var mu = Object.defineProperty;
var po = (t) => {
  throw TypeError(t);
};
var gu = (t, e, n) => e in t ? mu(t, e, { enumerable: !0, configurable: !0, writable: !0, value: n }) : t[e] = n;
var y = (t, e, n) => gu(t, typeof e != "symbol" ? e + "" : e, n), Vr = (t, e, n) => e.has(t) || po("Cannot " + n);
var p = (t, e, n) => (Vr(t, e, "read from private field"), n ? n.call(t) : e.get(t)), C = (t, e, n) => e.has(t) ? po("Cannot add the same private member more than once") : e instanceof WeakSet ? e.add(t) : e.set(t, n), S = (t, e, n, r) => (Vr(t, e, "write to private field"), r ? r.call(t, n) : e.set(t, n), n), W = (t, e, n) => (Vr(t, e, "access private method"), n);
const cs = {
  version: "0.3.9"
};
async function Us(t) {
  try {
    return [null, await t()];
  } catch (e) {
    return [e, null];
  }
}
function yu(t) {
  const e = Object.values(t).filter((r) => typeof r == "number");
  return Object.entries(t).filter(([r, s]) => e.indexOf(+r) === -1).map(([r, s]) => s);
}
var fo;
class _u {
  constructor() {
    this._map = /* @__PURE__ */ new WeakMap(), this._idmap = /* @__PURE__ */ new Map();
  }
  add(e, ...n) {
    const r = n[0];
    return this._map.set(e, r), r && typeof r == "object" && "id" in r && this._idmap.set(r.id, e), this;
  }
  clear() {
    return this._map = /* @__PURE__ */ new WeakMap(), this._idmap = /* @__PURE__ */ new Map(), this;
  }
  remove(e) {
    const n = this._map.get(e);
    return n && typeof n == "object" && "id" in n && this._idmap.delete(n.id), this._map.delete(e), this;
  }
  get(e) {
    const n = e._zod.parent;
    if (n) {
      const r = { ...this.get(n) ?? {} };
      delete r.id;
      const s = { ...r, ...this._map.get(e) };
      return Object.keys(s).length ? s : void 0;
    }
    return this._map.get(e);
  }
  has(e) {
    return this._map.has(e);
  }
}
function vu() {
  return new _u();
}
(fo = globalThis).__zod_globalRegistry ?? (fo.__zod_globalRegistry = vu());
const wu = globalThis.__zod_globalRegistry;
function ls(t) {
  let e = (t == null ? void 0 : t.target) ?? "draft-2020-12";
  return e === "draft-4" && (e = "draft-04"), e === "draft-7" && (e = "draft-07"), {
    processors: t.processors ?? {},
    metadataRegistry: (t == null ? void 0 : t.metadata) ?? wu,
    target: e,
    unrepresentable: (t == null ? void 0 : t.unrepresentable) ?? "throw",
    override: (t == null ? void 0 : t.override) ?? (() => {
    }),
    io: (t == null ? void 0 : t.io) ?? "output",
    counter: 0,
    seen: /* @__PURE__ */ new Map(),
    cycles: (t == null ? void 0 : t.cycles) ?? "ref",
    reused: (t == null ? void 0 : t.reused) ?? "inline",
    external: (t == null ? void 0 : t.external) ?? void 0
  };
}
function oe(t, e, n = { path: [], schemaPath: [] }) {
  var l, c;
  var r;
  const s = t._zod.def, o = e.seen.get(t);
  if (o)
    return o.count++, n.schemaPath.includes(t) && (o.cycle = n.path), o.schema;
  const i = { schema: {}, count: 1, cycle: void 0, path: n.path };
  e.seen.set(t, i);
  const a = (c = (l = t._zod).toJSONSchema) == null ? void 0 : c.call(l);
  if (a)
    i.schema = a;
  else {
    const h = {
      ...n,
      schemaPath: [...n.schemaPath, t],
      path: n.path
    };
    if (t._zod.processJSONSchema)
      t._zod.processJSONSchema(e, i.schema, h);
    else {
      const _ = i.schema, w = e.processors[s.type];
      if (!w)
        throw new Error(`[toJSONSchema]: Non-representable type encountered: ${s.type}`);
      w(t, e, _, h);
    }
    const m = t._zod.parent;
    m && (i.ref || (i.ref = m), oe(m, e, h), e.seen.get(m).isParent = !0);
  }
  const u = e.metadataRegistry.get(t);
  return u && Object.assign(i.schema, u), e.io === "input" && ve(t) && (delete i.schema.examples, delete i.schema.default), e.io === "input" && i.schema._prefault && ((r = i.schema).default ?? (r.default = i.schema._prefault)), delete i.schema._prefault, e.seen.get(t).schema;
}
function ds(t, e) {
  var i, a, u, d;
  const n = t.seen.get(e);
  if (!n)
    throw new Error("Unprocessed schema. This is a bug in Zod.");
  const r = /* @__PURE__ */ new Map();
  for (const l of t.seen.entries()) {
    const c = (i = t.metadataRegistry.get(l[0])) == null ? void 0 : i.id;
    if (c) {
      const h = r.get(c);
      if (h && h !== l[0])
        throw new Error(`Duplicate schema id "${c}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);
      r.set(c, l[0]);
    }
  }
  const s = (l) => {
    var w;
    const c = t.target === "draft-2020-12" ? "$defs" : "definitions";
    if (t.external) {
      const b = (w = t.external.registry.get(l[0])) == null ? void 0 : w.id, I = t.external.uri ?? ((x) => x);
      if (b)
        return { ref: I(b) };
      const T = l[1].defId ?? l[1].schema.id ?? `schema${t.counter++}`;
      return l[1].defId = T, { defId: T, ref: `${I("__shared")}#/${c}/${T}` };
    }
    if (l[1] === n)
      return { ref: "#" };
    const m = `#/${c}/`, _ = l[1].schema.id ?? `__schema${t.counter++}`;
    return { defId: _, ref: m + _ };
  }, o = (l) => {
    if (l[1].schema.$ref)
      return;
    const c = l[1], { ref: h, defId: m } = s(l);
    c.def = { ...c.schema }, m && (c.defId = m);
    const _ = c.schema;
    for (const w in _)
      delete _[w];
    _.$ref = h;
  };
  if (t.cycles === "throw")
    for (const l of t.seen.entries()) {
      const c = l[1];
      if (c.cycle)
        throw new Error(`Cycle detected: #/${(a = c.cycle) == null ? void 0 : a.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`);
    }
  for (const l of t.seen.entries()) {
    const c = l[1];
    if (e === l[0]) {
      o(l);
      continue;
    }
    if (t.external) {
      const m = (u = t.external.registry.get(l[0])) == null ? void 0 : u.id;
      if (e !== l[0] && m) {
        o(l);
        continue;
      }
    }
    if ((d = t.metadataRegistry.get(l[0])) == null ? void 0 : d.id) {
      o(l);
      continue;
    }
    if (c.cycle) {
      o(l);
      continue;
    }
    if (c.count > 1 && t.reused === "ref") {
      o(l);
      continue;
    }
  }
}
function ps(t, e) {
  var i, a, u;
  const n = t.seen.get(e);
  if (!n)
    throw new Error("Unprocessed schema. This is a bug in Zod.");
  const r = (d) => {
    const l = t.seen.get(d);
    if (l.ref === null)
      return;
    const c = l.def ?? l.schema, h = { ...c }, m = l.ref;
    if (l.ref = null, m) {
      r(m);
      const w = t.seen.get(m), b = w.schema;
      if (b.$ref && (t.target === "draft-07" || t.target === "draft-04" || t.target === "openapi-3.0") ? (c.allOf = c.allOf ?? [], c.allOf.push(b)) : Object.assign(c, b), Object.assign(c, h), d._zod.parent === m)
        for (const T in c)
          T === "$ref" || T === "allOf" || T in h || delete c[T];
      if (b.$ref)
        for (const T in c)
          T === "$ref" || T === "allOf" || T in w.def && JSON.stringify(c[T]) === JSON.stringify(w.def[T]) && delete c[T];
    }
    const _ = d._zod.parent;
    if (_ && _ !== m) {
      r(_);
      const w = t.seen.get(_);
      if (w != null && w.schema.$ref && (c.$ref = w.schema.$ref, w.def))
        for (const b in c)
          b === "$ref" || b === "allOf" || b in w.def && JSON.stringify(c[b]) === JSON.stringify(w.def[b]) && delete c[b];
    }
    t.override({
      zodSchema: d,
      jsonSchema: c,
      path: l.path ?? []
    });
  };
  for (const d of [...t.seen.entries()].reverse())
    r(d[0]);
  const s = {};
  if (t.target === "draft-2020-12" ? s.$schema = "https://json-schema.org/draft/2020-12/schema" : t.target === "draft-07" ? s.$schema = "http://json-schema.org/draft-07/schema#" : t.target === "draft-04" ? s.$schema = "http://json-schema.org/draft-04/schema#" : t.target, (i = t.external) != null && i.uri) {
    const d = (a = t.external.registry.get(e)) == null ? void 0 : a.id;
    if (!d)
      throw new Error("Schema is missing an `id` property");
    s.$id = t.external.uri(d);
  }
  Object.assign(s, n.def ?? n.schema);
  const o = ((u = t.external) == null ? void 0 : u.defs) ?? {};
  for (const d of t.seen.entries()) {
    const l = d[1];
    l.def && l.defId && (o[l.defId] = l.def);
  }
  t.external || Object.keys(o).length > 0 && (t.target === "draft-2020-12" ? s.$defs = o : s.definitions = o);
  try {
    const d = JSON.parse(JSON.stringify(s));
    return Object.defineProperty(d, "~standard", {
      value: {
        ...e["~standard"],
        jsonSchema: {
          input: ho(e, "input", t.processors),
          output: ho(e, "output", t.processors)
        }
      },
      enumerable: !1,
      writable: !1
    }), d;
  } catch {
    throw new Error("Error converting schema to JSON.");
  }
}
function ve(t, e) {
  const n = e ?? { seen: /* @__PURE__ */ new Set() };
  if (n.seen.has(t))
    return !1;
  n.seen.add(t);
  const r = t._zod.def;
  if (r.type === "transform")
    return !0;
  if (r.type === "array")
    return ve(r.element, n);
  if (r.type === "set")
    return ve(r.valueType, n);
  if (r.type === "lazy")
    return ve(r.getter(), n);
  if (r.type === "promise" || r.type === "optional" || r.type === "nonoptional" || r.type === "nullable" || r.type === "readonly" || r.type === "default" || r.type === "prefault")
    return ve(r.innerType, n);
  if (r.type === "intersection")
    return ve(r.left, n) || ve(r.right, n);
  if (r.type === "record" || r.type === "map")
    return ve(r.keyType, n) || ve(r.valueType, n);
  if (r.type === "pipe")
    return ve(r.in, n) || ve(r.out, n);
  if (r.type === "object") {
    for (const s in r.shape)
      if (ve(r.shape[s], n))
        return !0;
    return !1;
  }
  if (r.type === "union") {
    for (const s of r.options)
      if (ve(s, n))
        return !0;
    return !1;
  }
  if (r.type === "tuple") {
    for (const s of r.items)
      if (ve(s, n))
        return !0;
    return !!(r.rest && ve(r.rest, n));
  }
  return !1;
}
const ho = (t, e, n = {}) => (r) => {
  const { libraryOptions: s, target: o } = r ?? {}, i = ls({ ...s ?? {}, target: o, io: e, processors: n });
  return oe(t, i), ds(i, t), ps(i, t);
}, bu = {
  guid: "uuid",
  url: "uri",
  datetime: "date-time",
  json_string: "json-string",
  regex: ""
  // do not set
}, Iu = (t, e, n, r) => {
  const s = n;
  s.type = "string";
  const { minimum: o, maximum: i, format: a, patterns: u, contentEncoding: d } = t._zod.bag;
  if (typeof o == "number" && (s.minLength = o), typeof i == "number" && (s.maxLength = i), a && (s.format = bu[a] ?? a, s.format === "" && delete s.format, a === "time" && delete s.format), d && (s.contentEncoding = d), u && u.size > 0) {
    const l = [...u];
    l.length === 1 ? s.pattern = l[0].source : l.length > 1 && (s.allOf = [
      ...l.map((c) => ({
        ...e.target === "draft-07" || e.target === "draft-04" || e.target === "openapi-3.0" ? { type: "string" } : {},
        pattern: c.source
      }))
    ]);
  }
}, Su = (t, e, n, r) => {
  const s = n, { minimum: o, maximum: i, format: a, multipleOf: u, exclusiveMaximum: d, exclusiveMinimum: l } = t._zod.bag;
  typeof a == "string" && a.includes("int") ? s.type = "integer" : s.type = "number", typeof l == "number" && (e.target === "draft-04" || e.target === "openapi-3.0" ? (s.minimum = l, s.exclusiveMinimum = !0) : s.exclusiveMinimum = l), typeof o == "number" && (s.minimum = o, typeof l == "number" && e.target !== "draft-04" && (l >= o ? delete s.minimum : delete s.exclusiveMinimum)), typeof d == "number" && (e.target === "draft-04" || e.target === "openapi-3.0" ? (s.maximum = d, s.exclusiveMaximum = !0) : s.exclusiveMaximum = d), typeof i == "number" && (s.maximum = i, typeof d == "number" && e.target !== "draft-04" && (d <= i ? delete s.maximum : delete s.exclusiveMaximum)), typeof u == "number" && (s.multipleOf = u);
}, Tu = (t, e, n, r) => {
  n.type = "boolean";
}, xu = (t, e, n, r) => {
  if (e.unrepresentable === "throw")
    throw new Error("BigInt cannot be represented in JSON Schema");
}, Au = (t, e, n, r) => {
  if (e.unrepresentable === "throw")
    throw new Error("Symbols cannot be represented in JSON Schema");
}, ku = (t, e, n, r) => {
  e.target === "openapi-3.0" ? (n.type = "string", n.nullable = !0, n.enum = [null]) : n.type = "null";
}, Cu = (t, e, n, r) => {
  if (e.unrepresentable === "throw")
    throw new Error("Undefined cannot be represented in JSON Schema");
}, Ou = (t, e, n, r) => {
  if (e.unrepresentable === "throw")
    throw new Error("Void cannot be represented in JSON Schema");
}, Eu = (t, e, n, r) => {
  n.not = {};
}, Ru = (t, e, n, r) => {
}, Pu = (t, e, n, r) => {
}, Nu = (t, e, n, r) => {
  if (e.unrepresentable === "throw")
    throw new Error("Date cannot be represented in JSON Schema");
}, Du = (t, e, n, r) => {
  const s = t._zod.def, o = yu(s.entries);
  o.every((i) => typeof i == "number") && (n.type = "number"), o.every((i) => typeof i == "string") && (n.type = "string"), n.enum = o;
}, Mu = (t, e, n, r) => {
  const s = t._zod.def, o = [];
  for (const i of s.values)
    if (i === void 0) {
      if (e.unrepresentable === "throw")
        throw new Error("Literal `undefined` cannot be represented in JSON Schema");
    } else if (typeof i == "bigint") {
      if (e.unrepresentable === "throw")
        throw new Error("BigInt literals cannot be represented in JSON Schema");
      o.push(Number(i));
    } else
      o.push(i);
  if (o.length !== 0) if (o.length === 1) {
    const i = o[0];
    n.type = i === null ? "null" : typeof i, e.target === "draft-04" || e.target === "openapi-3.0" ? n.enum = [i] : n.const = i;
  } else
    o.every((i) => typeof i == "number") && (n.type = "number"), o.every((i) => typeof i == "string") && (n.type = "string"), o.every((i) => typeof i == "boolean") && (n.type = "boolean"), o.every((i) => i === null) && (n.type = "null"), n.enum = o;
}, ju = (t, e, n, r) => {
  if (e.unrepresentable === "throw")
    throw new Error("NaN cannot be represented in JSON Schema");
}, $u = (t, e, n, r) => {
  const s = n, o = t._zod.pattern;
  if (!o)
    throw new Error("Pattern not found in template literal");
  s.type = "string", s.pattern = o.source;
}, Fu = (t, e, n, r) => {
  const s = n, o = {
    type: "string",
    format: "binary",
    contentEncoding: "binary"
  }, { minimum: i, maximum: a, mime: u } = t._zod.bag;
  i !== void 0 && (o.minLength = i), a !== void 0 && (o.maxLength = a), u ? u.length === 1 ? (o.contentMediaType = u[0], Object.assign(s, o)) : (Object.assign(s, o), s.anyOf = u.map((d) => ({ contentMediaType: d }))) : Object.assign(s, o);
}, Lu = (t, e, n, r) => {
  n.type = "boolean";
}, Zu = (t, e, n, r) => {
  if (e.unrepresentable === "throw")
    throw new Error("Custom types cannot be represented in JSON Schema");
}, Uu = (t, e, n, r) => {
  if (e.unrepresentable === "throw")
    throw new Error("Function types cannot be represented in JSON Schema");
}, zu = (t, e, n, r) => {
  if (e.unrepresentable === "throw")
    throw new Error("Transforms cannot be represented in JSON Schema");
}, Bu = (t, e, n, r) => {
  if (e.unrepresentable === "throw")
    throw new Error("Map cannot be represented in JSON Schema");
}, Ju = (t, e, n, r) => {
  if (e.unrepresentable === "throw")
    throw new Error("Set cannot be represented in JSON Schema");
}, Gu = (t, e, n, r) => {
  const s = n, o = t._zod.def, { minimum: i, maximum: a } = t._zod.bag;
  typeof i == "number" && (s.minItems = i), typeof a == "number" && (s.maxItems = a), s.type = "array", s.items = oe(o.element, e, { ...r, path: [...r.path, "items"] });
}, qu = (t, e, n, r) => {
  var d;
  const s = n, o = t._zod.def;
  s.type = "object", s.properties = {};
  const i = o.shape;
  for (const l in i)
    s.properties[l] = oe(i[l], e, {
      ...r,
      path: [...r.path, "properties", l]
    });
  const a = new Set(Object.keys(i)), u = new Set([...a].filter((l) => {
    const c = o.shape[l]._zod;
    return e.io === "input" ? c.optin === void 0 : c.optout === void 0;
  }));
  u.size > 0 && (s.required = Array.from(u)), ((d = o.catchall) == null ? void 0 : d._zod.def.type) === "never" ? s.additionalProperties = !1 : o.catchall ? o.catchall && (s.additionalProperties = oe(o.catchall, e, {
    ...r,
    path: [...r.path, "additionalProperties"]
  })) : e.io === "output" && (s.additionalProperties = !1);
}, Vu = (t, e, n, r) => {
  const s = t._zod.def, o = s.inclusive === !1, i = s.options.map((a, u) => oe(a, e, {
    ...r,
    path: [...r.path, o ? "oneOf" : "anyOf", u]
  }));
  o ? n.oneOf = i : n.anyOf = i;
}, Wu = (t, e, n, r) => {
  const s = t._zod.def, o = oe(s.left, e, {
    ...r,
    path: [...r.path, "allOf", 0]
  }), i = oe(s.right, e, {
    ...r,
    path: [...r.path, "allOf", 1]
  }), a = (d) => "allOf" in d && Object.keys(d).length === 1, u = [
    ...a(o) ? o.allOf : [o],
    ...a(i) ? i.allOf : [i]
  ];
  n.allOf = u;
}, Hu = (t, e, n, r) => {
  const s = n, o = t._zod.def;
  s.type = "array";
  const i = e.target === "draft-2020-12" ? "prefixItems" : "items", a = e.target === "draft-2020-12" || e.target === "openapi-3.0" ? "items" : "additionalItems", u = o.items.map((h, m) => oe(h, e, {
    ...r,
    path: [...r.path, i, m]
  })), d = o.rest ? oe(o.rest, e, {
    ...r,
    path: [...r.path, a, ...e.target === "openapi-3.0" ? [o.items.length] : []]
  }) : null;
  e.target === "draft-2020-12" ? (s.prefixItems = u, d && (s.items = d)) : e.target === "openapi-3.0" ? (s.items = {
    anyOf: u
  }, d && s.items.anyOf.push(d), s.minItems = u.length, d || (s.maxItems = u.length)) : (s.items = u, d && (s.additionalItems = d));
  const { minimum: l, maximum: c } = t._zod.bag;
  typeof l == "number" && (s.minItems = l), typeof c == "number" && (s.maxItems = c);
}, Ku = (t, e, n, r) => {
  const s = n, o = t._zod.def;
  s.type = "object";
  const i = o.keyType, a = i._zod.bag, u = a == null ? void 0 : a.patterns;
  if (o.mode === "loose" && u && u.size > 0) {
    const l = oe(o.valueType, e, {
      ...r,
      path: [...r.path, "patternProperties", "*"]
    });
    s.patternProperties = {};
    for (const c of u)
      s.patternProperties[c.source] = l;
  } else
    (e.target === "draft-07" || e.target === "draft-2020-12") && (s.propertyNames = oe(o.keyType, e, {
      ...r,
      path: [...r.path, "propertyNames"]
    })), s.additionalProperties = oe(o.valueType, e, {
      ...r,
      path: [...r.path, "additionalProperties"]
    });
  const d = i._zod.values;
  if (d) {
    const l = [...d].filter((c) => typeof c == "string" || typeof c == "number");
    l.length > 0 && (s.required = l);
  }
}, Yu = (t, e, n, r) => {
  const s = t._zod.def, o = oe(s.innerType, e, r), i = e.seen.get(t);
  e.target === "openapi-3.0" ? (i.ref = s.innerType, n.nullable = !0) : n.anyOf = [o, { type: "null" }];
}, Xu = (t, e, n, r) => {
  const s = t._zod.def;
  oe(s.innerType, e, r);
  const o = e.seen.get(t);
  o.ref = s.innerType;
}, Qu = (t, e, n, r) => {
  const s = t._zod.def;
  oe(s.innerType, e, r);
  const o = e.seen.get(t);
  o.ref = s.innerType, n.default = JSON.parse(JSON.stringify(s.defaultValue));
}, ec = (t, e, n, r) => {
  const s = t._zod.def;
  oe(s.innerType, e, r);
  const o = e.seen.get(t);
  o.ref = s.innerType, e.io === "input" && (n._prefault = JSON.parse(JSON.stringify(s.defaultValue)));
}, tc = (t, e, n, r) => {
  const s = t._zod.def;
  oe(s.innerType, e, r);
  const o = e.seen.get(t);
  o.ref = s.innerType;
  let i;
  try {
    i = s.catchValue(void 0);
  } catch {
    throw new Error("Dynamic catch values are not supported in JSON Schema");
  }
  n.default = i;
}, nc = (t, e, n, r) => {
  const s = t._zod.def, o = e.io === "input" ? s.in._zod.def.type === "transform" ? s.out : s.in : s.out;
  oe(o, e, r);
  const i = e.seen.get(t);
  i.ref = o;
}, rc = (t, e, n, r) => {
  const s = t._zod.def;
  oe(s.innerType, e, r);
  const o = e.seen.get(t);
  o.ref = s.innerType, n.readOnly = !0;
}, sc = (t, e, n, r) => {
  const s = t._zod.def;
  oe(s.innerType, e, r);
  const o = e.seen.get(t);
  o.ref = s.innerType;
}, oc = (t, e, n, r) => {
  const s = t._zod.def;
  oe(s.innerType, e, r);
  const o = e.seen.get(t);
  o.ref = s.innerType;
}, ic = (t, e, n, r) => {
  const s = t._zod.innerType;
  oe(s, e, r);
  const o = e.seen.get(t);
  o.ref = s;
}, mo = {
  string: Iu,
  number: Su,
  boolean: Tu,
  bigint: xu,
  symbol: Au,
  null: ku,
  undefined: Cu,
  void: Ou,
  never: Eu,
  any: Ru,
  unknown: Pu,
  date: Nu,
  enum: Du,
  literal: Mu,
  nan: ju,
  template_literal: $u,
  file: Fu,
  success: Lu,
  custom: Zu,
  function: Uu,
  transform: zu,
  map: Bu,
  set: Ju,
  array: Gu,
  object: qu,
  union: Vu,
  intersection: Wu,
  tuple: Hu,
  record: Ku,
  nullable: Yu,
  nonoptional: Xu,
  default: Qu,
  prefault: ec,
  catch: tc,
  pipe: nc,
  readonly: rc,
  promise: sc,
  optional: oc,
  lazy: ic
};
function ac(t, e) {
  if ("_idmap" in t) {
    const r = t, s = ls({ ...e, processors: mo }), o = {};
    for (const u of r._idmap.entries()) {
      const [d, l] = u;
      oe(l, s);
    }
    const i = {}, a = {
      registry: r,
      uri: e == null ? void 0 : e.uri,
      defs: o
    };
    s.external = a;
    for (const u of r._idmap.entries()) {
      const [d, l] = u;
      ds(s, l), i[d] = ps(s, l);
    }
    if (Object.keys(o).length > 0) {
      const u = s.target === "draft-2020-12" ? "$defs" : "definitions";
      i.__shared = {
        [u]: o
      };
    }
    return { schemas: i };
  }
  const n = ls({ ...e, processors: mo });
  return oe(t, n), ds(n, t), ps(n, t);
}
function uc(t, e) {
  const n = { ...t };
  return Object.defineProperties(n, {
    $brand: {
      value: "auto-parseable-response-format",
      enumerable: !1
    },
    $parseRaw: {
      value: e,
      enumerable: !1
    }
  }), n;
}
const cc = Symbol("Let zodToJsonSchema decide on which parser to use"), go = {
  name: void 0,
  $refStrategy: "root",
  effectStrategy: "input",
  pipeStrategy: "all",
  dateStrategy: "format:date-time",
  mapStrategy: "entries",
  nullableStrategy: "from-target",
  removeAdditionalStrategy: "passthrough",
  definitionPath: "definitions",
  target: "jsonSchema7",
  strictUnions: !1,
  errorMessages: !1,
  markdownDescription: !1,
  patternStrategy: "escape",
  applyRegexFlags: !1,
  emailStrategy: "format:email",
  base64Strategy: "contentEncoding:base64",
  nameStrategy: "ref"
}, lc = (t) => typeof t == "string" ? {
  ...go,
  basePath: ["#"],
  definitions: {},
  name: t
} : {
  ...go,
  basePath: ["#"],
  definitions: {},
  ...t
}, fs = (t) => "_def" in t ? t._def : t;
function dc(t) {
  if (!t)
    return !0;
  for (const e in t)
    return !1;
  return !0;
}
const pc = (t) => {
  const e = lc(t), n = e.name !== void 0 ? [...e.basePath, e.definitionPath, e.name] : e.basePath;
  return {
    ...e,
    currentPath: n,
    propertyPath: void 0,
    seenRefs: /* @__PURE__ */ new Set(),
    seen: new Map(Object.entries(e.definitions).map(([r, s]) => [
      fs(s),
      {
        def: fs(s),
        path: [...e.basePath, e.definitionPath, r],
        // Resolution of references will be forced even though seen, so it's ok that the schema is undefined here for now.
        jsonSchema: void 0
      }
    ]))
  };
};
function Ii(t, e, n, r) {
  r != null && r.errorMessages && n && (t.errorMessage = {
    ...t.errorMessage,
    [e]: n
  });
}
function Q(t, e, n, r, s) {
  t[e] = n, Ii(t, e, r, s);
}
var kn;
(function(t) {
  t.assertEqual = (s) => {
  };
  function e(s) {
  }
  t.assertIs = e;
  function n(s) {
    throw new Error();
  }
  t.assertNever = n, t.arrayToEnum = (s) => {
    const o = {};
    for (const i of s)
      o[i] = i;
    return o;
  }, t.getValidEnumValues = (s) => {
    const o = t.objectKeys(s).filter((a) => typeof s[s[a]] != "number"), i = {};
    for (const a of o)
      i[a] = s[a];
    return t.objectValues(i);
  }, t.objectValues = (s) => t.objectKeys(s).map(function(o) {
    return s[o];
  }), t.objectKeys = typeof Object.keys == "function" ? (s) => Object.keys(s) : (s) => {
    const o = [];
    for (const i in s)
      Object.prototype.hasOwnProperty.call(s, i) && o.push(i);
    return o;
  }, t.find = (s, o) => {
    for (const i of s)
      if (o(i))
        return i;
  }, t.isInteger = typeof Number.isInteger == "function" ? (s) => Number.isInteger(s) : (s) => typeof s == "number" && Number.isFinite(s) && Math.floor(s) === s;
  function r(s, o = " | ") {
    return s.map((i) => typeof i == "string" ? `'${i}'` : i).join(o);
  }
  t.joinValues = r, t.jsonStringifyReplacer = (s, o) => typeof o == "bigint" ? o.toString() : o;
})(kn || (kn = {}));
var yo;
(function(t) {
  t.mergeShapes = (e, n) => ({
    ...e,
    ...n
    // second overwrites first
  });
})(yo || (yo = {}));
kn.arrayToEnum([
  "string",
  "nan",
  "number",
  "integer",
  "float",
  "boolean",
  "date",
  "bigint",
  "symbol",
  "function",
  "undefined",
  "null",
  "array",
  "object",
  "unknown",
  "promise",
  "void",
  "never",
  "map",
  "set"
]);
kn.arrayToEnum([
  "invalid_type",
  "invalid_literal",
  "custom",
  "invalid_union",
  "invalid_union_discriminator",
  "invalid_enum_value",
  "unrecognized_keys",
  "invalid_arguments",
  "invalid_return_type",
  "invalid_date",
  "invalid_string",
  "too_small",
  "too_big",
  "invalid_intersection_types",
  "not_multiple_of",
  "not_finite"
]);
let _o = class Si extends Error {
  get errors() {
    return this.issues;
  }
  constructor(e) {
    super(), this.issues = [], this.addIssue = (r) => {
      this.issues = [...this.issues, r];
    }, this.addIssues = (r = []) => {
      this.issues = [...this.issues, ...r];
    };
    const n = new.target.prototype;
    Object.setPrototypeOf ? Object.setPrototypeOf(this, n) : this.__proto__ = n, this.name = "ZodError", this.issues = e;
  }
  format(e) {
    const n = e || function(o) {
      return o.message;
    }, r = { _errors: [] }, s = (o) => {
      for (const i of o.issues)
        if (i.code === "invalid_union")
          i.unionErrors.map(s);
        else if (i.code === "invalid_return_type")
          s(i.returnTypeError);
        else if (i.code === "invalid_arguments")
          s(i.argumentsError);
        else if (i.path.length === 0)
          r._errors.push(n(i));
        else {
          let a = r, u = 0;
          for (; u < i.path.length; ) {
            const d = i.path[u];
            u === i.path.length - 1 ? (a[d] = a[d] || { _errors: [] }, a[d]._errors.push(n(i))) : a[d] = a[d] || { _errors: [] }, a = a[d], u++;
          }
        }
    };
    return s(this), r;
  }
  static assert(e) {
    if (!(e instanceof Si))
      throw new Error(`Not a ZodError: ${e}`);
  }
  toString() {
    return this.message;
  }
  get message() {
    return JSON.stringify(this.issues, kn.jsonStringifyReplacer, 2);
  }
  get isEmpty() {
    return this.issues.length === 0;
  }
  flatten(e = (n) => n.message) {
    const n = /* @__PURE__ */ Object.create(null), r = [];
    for (const s of this.issues)
      if (s.path.length > 0) {
        const o = s.path[0];
        n[o] = n[o] || [], n[o].push(e(s));
      } else
        r.push(e(s));
    return { formErrors: r, fieldErrors: n };
  }
  get formErrors() {
    return this.flatten();
  }
};
_o.create = (t) => new _o(t);
var vo;
(function(t) {
  t.errToObj = (e) => typeof e == "string" ? { message: e } : e || {}, t.toString = (e) => typeof e == "string" ? e : e == null ? void 0 : e.message;
})(vo || (vo = {}));
var z;
(function(t) {
  t.ZodString = "ZodString", t.ZodNumber = "ZodNumber", t.ZodNaN = "ZodNaN", t.ZodBigInt = "ZodBigInt", t.ZodBoolean = "ZodBoolean", t.ZodDate = "ZodDate", t.ZodSymbol = "ZodSymbol", t.ZodUndefined = "ZodUndefined", t.ZodNull = "ZodNull", t.ZodAny = "ZodAny", t.ZodUnknown = "ZodUnknown", t.ZodNever = "ZodNever", t.ZodVoid = "ZodVoid", t.ZodArray = "ZodArray", t.ZodObject = "ZodObject", t.ZodUnion = "ZodUnion", t.ZodDiscriminatedUnion = "ZodDiscriminatedUnion", t.ZodIntersection = "ZodIntersection", t.ZodTuple = "ZodTuple", t.ZodRecord = "ZodRecord", t.ZodMap = "ZodMap", t.ZodSet = "ZodSet", t.ZodFunction = "ZodFunction", t.ZodLazy = "ZodLazy", t.ZodLiteral = "ZodLiteral", t.ZodEnum = "ZodEnum", t.ZodEffects = "ZodEffects", t.ZodNativeEnum = "ZodNativeEnum", t.ZodOptional = "ZodOptional", t.ZodNullable = "ZodNullable", t.ZodDefault = "ZodDefault", t.ZodCatch = "ZodCatch", t.ZodPromise = "ZodPromise", t.ZodBranded = "ZodBranded", t.ZodPipeline = "ZodPipeline", t.ZodReadonly = "ZodReadonly";
})(z || (z = {}));
function fc() {
  return {};
}
function hc(t, e) {
  var r, s;
  const n = {
    type: "array"
  };
  return ((s = (r = t.type) == null ? void 0 : r._def) == null ? void 0 : s.typeName) !== z.ZodAny && (n.items = Y(t.type._def, {
    ...e,
    currentPath: [...e.currentPath, "items"]
  })), t.minLength && Q(n, "minItems", t.minLength.value, t.minLength.message, e), t.maxLength && Q(n, "maxItems", t.maxLength.value, t.maxLength.message, e), t.exactLength && (Q(n, "minItems", t.exactLength.value, t.exactLength.message, e), Q(n, "maxItems", t.exactLength.value, t.exactLength.message, e)), n;
}
function mc(t, e) {
  const n = {
    type: "integer",
    format: "int64"
  };
  if (!t.checks)
    return n;
  for (const r of t.checks)
    switch (r.kind) {
      case "min":
        e.target === "jsonSchema7" ? r.inclusive ? Q(n, "minimum", r.value, r.message, e) : Q(n, "exclusiveMinimum", r.value, r.message, e) : (r.inclusive || (n.exclusiveMinimum = !0), Q(n, "minimum", r.value, r.message, e));
        break;
      case "max":
        e.target === "jsonSchema7" ? r.inclusive ? Q(n, "maximum", r.value, r.message, e) : Q(n, "exclusiveMaximum", r.value, r.message, e) : (r.inclusive || (n.exclusiveMaximum = !0), Q(n, "maximum", r.value, r.message, e));
        break;
      case "multipleOf":
        Q(n, "multipleOf", r.value, r.message, e);
        break;
    }
  return n;
}
function gc() {
  return {
    type: "boolean"
  };
}
function yc(t, e) {
  return Y(t.type._def, e);
}
const _c = (t, e) => Y(t.innerType._def, e);
function Ti(t, e, n) {
  const r = n ?? e.dateStrategy;
  if (Array.isArray(r))
    return {
      anyOf: r.map((s, o) => Ti(t, e, s))
    };
  switch (r) {
    case "string":
    case "format:date-time":
      return {
        type: "string",
        format: "date-time"
      };
    case "format:date":
      return {
        type: "string",
        format: "date"
      };
    case "integer":
      return vc(t, e);
  }
}
const vc = (t, e) => {
  const n = {
    type: "integer",
    format: "unix-time"
  };
  if (e.target === "openApi3")
    return n;
  for (const r of t.checks)
    switch (r.kind) {
      case "min":
        Q(
          n,
          "minimum",
          r.value,
          // This is in milliseconds
          r.message,
          e
        );
        break;
      case "max":
        Q(
          n,
          "maximum",
          r.value,
          // This is in milliseconds
          r.message,
          e
        );
        break;
    }
  return n;
};
function wc(t, e) {
  return {
    ...Y(t.innerType._def, e),
    default: t.defaultValue()
  };
}
function bc(t, e, n) {
  return e.effectStrategy === "input" ? Y(t.schema._def, e, n) : {};
}
function Ic(t) {
  return {
    type: "string",
    enum: [...t.values]
  };
}
const Sc = (t) => "type" in t && t.type === "string" ? !1 : "allOf" in t;
function Tc(t, e) {
  const n = [
    Y(t.left._def, {
      ...e,
      currentPath: [...e.currentPath, "allOf", "0"]
    }),
    Y(t.right._def, {
      ...e,
      currentPath: [...e.currentPath, "allOf", "1"]
    })
  ].filter((o) => !!o);
  let r = e.target === "jsonSchema2019-09" ? { unevaluatedProperties: !1 } : void 0;
  const s = [];
  return n.forEach((o) => {
    if (Sc(o))
      s.push(...o.allOf), o.unevaluatedProperties === void 0 && (r = void 0);
    else {
      let i = o;
      if ("additionalProperties" in o && o.additionalProperties === !1) {
        const { additionalProperties: a, ...u } = o;
        i = u;
      } else
        r = void 0;
      s.push(i);
    }
  }), s.length ? {
    allOf: s,
    ...r
  } : void 0;
}
function xc(t, e) {
  const n = typeof t.value;
  return n !== "bigint" && n !== "number" && n !== "boolean" && n !== "string" ? {
    type: Array.isArray(t.value) ? "array" : "object"
  } : e.target === "openApi3" ? {
    type: n === "bigint" ? "integer" : n,
    enum: [t.value]
  } : {
    type: n === "bigint" ? "integer" : n,
    const: t.value
  };
}
let Wr;
const St = {
  /**
   * `c` was changed to `[cC]` to replicate /i flag
   */
  cuid: /^[cC][^\s-]{8,}$/,
  cuid2: /^[0-9a-z]+$/,
  ulid: /^[0-9A-HJKMNP-TV-Z]{26}$/,
  /**
   * `a-z` was added to replicate /i flag
   */
  email: /^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,
  /**
   * Constructed a valid Unicode RegExp
   *
   * Lazily instantiate since this type of regex isn't supported
   * in all envs (e.g. React Native).
   *
   * See:
   * https://github.com/colinhacks/zod/issues/2433
   * Fix in Zod:
   * https://github.com/colinhacks/zod/commit/9340fd51e48576a75adc919bff65dbc4a5d4c99b
   */
  emoji: () => (Wr === void 0 && (Wr = RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$", "u")), Wr),
  base64: /^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,
  nanoid: /^[a-zA-Z0-9_-]{21}$/
};
function xi(t, e) {
  const n = {
    type: "string"
  };
  function r(s) {
    return e.patternStrategy === "escape" ? Ac(s) : s;
  }
  if (t.checks)
    for (const s of t.checks)
      switch (s.kind) {
        case "min":
          Q(n, "minLength", typeof n.minLength == "number" ? Math.max(n.minLength, s.value) : s.value, s.message, e);
          break;
        case "max":
          Q(n, "maxLength", typeof n.maxLength == "number" ? Math.min(n.maxLength, s.value) : s.value, s.message, e);
          break;
        case "email":
          switch (e.emailStrategy) {
            case "format:email":
              Pe(n, "email", s.message, e);
              break;
            case "format:idn-email":
              Pe(n, "idn-email", s.message, e);
              break;
            case "pattern:zod":
              Ne(n, St.email, s.message, e);
              break;
          }
          break;
        case "url":
          Pe(n, "uri", s.message, e);
          break;
        case "uuid":
          Pe(n, "uuid", s.message, e);
          break;
        case "regex":
          Ne(n, s.regex, s.message, e);
          break;
        case "cuid":
          Ne(n, St.cuid, s.message, e);
          break;
        case "cuid2":
          Ne(n, St.cuid2, s.message, e);
          break;
        case "startsWith":
          Ne(n, RegExp(`^${r(s.value)}`), s.message, e);
          break;
        case "endsWith":
          Ne(n, RegExp(`${r(s.value)}$`), s.message, e);
          break;
        case "datetime":
          Pe(n, "date-time", s.message, e);
          break;
        case "date":
          Pe(n, "date", s.message, e);
          break;
        case "time":
          Pe(n, "time", s.message, e);
          break;
        case "duration":
          Pe(n, "duration", s.message, e);
          break;
        case "length":
          Q(n, "minLength", typeof n.minLength == "number" ? Math.max(n.minLength, s.value) : s.value, s.message, e), Q(n, "maxLength", typeof n.maxLength == "number" ? Math.min(n.maxLength, s.value) : s.value, s.message, e);
          break;
        case "includes": {
          Ne(n, RegExp(r(s.value)), s.message, e);
          break;
        }
        case "ip": {
          s.version !== "v6" && Pe(n, "ipv4", s.message, e), s.version !== "v4" && Pe(n, "ipv6", s.message, e);
          break;
        }
        case "emoji":
          Ne(n, St.emoji, s.message, e);
          break;
        case "ulid": {
          Ne(n, St.ulid, s.message, e);
          break;
        }
        case "base64": {
          switch (e.base64Strategy) {
            case "format:binary": {
              Pe(n, "binary", s.message, e);
              break;
            }
            case "contentEncoding:base64": {
              Q(n, "contentEncoding", "base64", s.message, e);
              break;
            }
            case "pattern:zod": {
              Ne(n, St.base64, s.message, e);
              break;
            }
          }
          break;
        }
        case "nanoid":
          Ne(n, St.nanoid, s.message, e);
      }
  return n;
}
const Ac = (t) => Array.from(t).map((e) => /[a-zA-Z0-9]/.test(e) ? e : `\\${e}`).join(""), Pe = (t, e, n, r) => {
  var s;
  t.format || (s = t.anyOf) != null && s.some((o) => o.format) ? (t.anyOf || (t.anyOf = []), t.format && (t.anyOf.push({
    format: t.format,
    ...t.errorMessage && r.errorMessages && {
      errorMessage: { format: t.errorMessage.format }
    }
  }), delete t.format, t.errorMessage && (delete t.errorMessage.format, Object.keys(t.errorMessage).length === 0 && delete t.errorMessage)), t.anyOf.push({
    format: e,
    ...n && r.errorMessages && { errorMessage: { format: n } }
  })) : Q(t, "format", e, n, r);
}, Ne = (t, e, n, r) => {
  var s;
  t.pattern || (s = t.allOf) != null && s.some((o) => o.pattern) ? (t.allOf || (t.allOf = []), t.pattern && (t.allOf.push({
    pattern: t.pattern,
    ...t.errorMessage && r.errorMessages && {
      errorMessage: { pattern: t.errorMessage.pattern }
    }
  }), delete t.pattern, t.errorMessage && (delete t.errorMessage.pattern, Object.keys(t.errorMessage).length === 0 && delete t.errorMessage)), t.allOf.push({
    pattern: wo(e, r),
    ...n && r.errorMessages && { errorMessage: { pattern: n } }
  })) : Q(t, "pattern", wo(e, r), n, r);
}, wo = (t, e) => {
  var d;
  const n = typeof t == "function" ? t() : t;
  if (!e.applyRegexFlags || !n.flags)
    return n.source;
  const r = {
    i: n.flags.includes("i"),
    // Case-insensitive
    m: n.flags.includes("m"),
    // `^` and `$` matches adjacent to newline characters
    s: n.flags.includes("s")
    // `.` matches newlines
  }, s = r.i ? n.source.toLowerCase() : n.source;
  let o = "", i = !1, a = !1, u = !1;
  for (let l = 0; l < s.length; l++) {
    if (i) {
      o += s[l], i = !1;
      continue;
    }
    if (r.i) {
      if (a) {
        if (s[l].match(/[a-z]/)) {
          u ? (o += s[l], o += `${s[l - 2]}-${s[l]}`.toUpperCase(), u = !1) : s[l + 1] === "-" && ((d = s[l + 2]) != null && d.match(/[a-z]/)) ? (o += s[l], u = !0) : o += `${s[l]}${s[l].toUpperCase()}`;
          continue;
        }
      } else if (s[l].match(/[a-z]/)) {
        o += `[${s[l]}${s[l].toUpperCase()}]`;
        continue;
      }
    }
    if (r.m) {
      if (s[l] === "^") {
        o += `(^|(?<=[\r
]))`;
        continue;
      } else if (s[l] === "$") {
        o += `($|(?=[\r
]))`;
        continue;
      }
    }
    if (r.s && s[l] === ".") {
      o += a ? `${s[l]}\r
` : `[${s[l]}\r
]`;
      continue;
    }
    o += s[l], s[l] === "\\" ? i = !0 : a && s[l] === "]" ? a = !1 : !a && s[l] === "[" && (a = !0);
  }
  try {
    const l = new RegExp(o);
  } catch {
    return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`), n.source;
  }
  return o;
};
function Ai(t, e) {
  var r, s, o, i;
  if (e.target === "openApi3" && ((r = t.keyType) == null ? void 0 : r._def.typeName) === z.ZodEnum)
    return {
      type: "object",
      required: t.keyType._def.values,
      properties: t.keyType._def.values.reduce((a, u) => ({
        ...a,
        [u]: Y(t.valueType._def, {
          ...e,
          currentPath: [...e.currentPath, "properties", u]
        }) ?? {}
      }), {}),
      additionalProperties: !1
    };
  const n = {
    type: "object",
    additionalProperties: Y(t.valueType._def, {
      ...e,
      currentPath: [...e.currentPath, "additionalProperties"]
    }) ?? {}
  };
  if (e.target === "openApi3")
    return n;
  if (((s = t.keyType) == null ? void 0 : s._def.typeName) === z.ZodString && ((o = t.keyType._def.checks) != null && o.length)) {
    const a = Object.entries(xi(t.keyType._def, e)).reduce((u, [d, l]) => d === "type" ? u : { ...u, [d]: l }, {});
    return {
      ...n,
      propertyNames: a
    };
  } else if (((i = t.keyType) == null ? void 0 : i._def.typeName) === z.ZodEnum)
    return {
      ...n,
      propertyNames: {
        enum: t.keyType._def.values
      }
    };
  return n;
}
function kc(t, e) {
  if (e.mapStrategy === "record")
    return Ai(t, e);
  const n = Y(t.keyType._def, {
    ...e,
    currentPath: [...e.currentPath, "items", "items", "0"]
  }) || {}, r = Y(t.valueType._def, {
    ...e,
    currentPath: [...e.currentPath, "items", "items", "1"]
  }) || {};
  return {
    type: "array",
    maxItems: 125,
    items: {
      type: "array",
      items: [n, r],
      minItems: 2,
      maxItems: 2
    }
  };
}
function Cc(t) {
  const e = t.values, r = Object.keys(t.values).filter((o) => typeof e[e[o]] != "number").map((o) => e[o]), s = Array.from(new Set(r.map((o) => typeof o)));
  return {
    type: s.length === 1 ? s[0] === "string" ? "string" : "number" : ["string", "number"],
    enum: r
  };
}
function Oc() {
  return {
    not: {}
  };
}
function Ec(t) {
  return t.target === "openApi3" ? {
    enum: ["null"],
    nullable: !0
  } : {
    type: "null"
  };
}
const gr = {
  ZodString: "string",
  ZodNumber: "number",
  ZodBigInt: "integer",
  ZodBoolean: "boolean",
  ZodNull: "null"
};
function Rc(t, e) {
  if (e.target === "openApi3")
    return bo(t, e);
  const n = t.options instanceof Map ? Array.from(t.options.values()) : t.options;
  if (n.every((r) => r._def.typeName in gr && (!r._def.checks || !r._def.checks.length))) {
    const r = n.reduce((s, o) => {
      const i = gr[o._def.typeName];
      return i && !s.includes(i) ? [...s, i] : s;
    }, []);
    return {
      type: r.length > 1 ? r : r[0]
    };
  } else if (n.every((r) => r._def.typeName === "ZodLiteral" && !r.description)) {
    const r = n.reduce((s, o) => {
      const i = typeof o._def.value;
      switch (i) {
        case "string":
        case "number":
        case "boolean":
          return [...s, i];
        case "bigint":
          return [...s, "integer"];
        case "object":
          if (o._def.value === null)
            return [...s, "null"];
        case "symbol":
        case "undefined":
        case "function":
        default:
          return s;
      }
    }, []);
    if (r.length === n.length) {
      const s = r.filter((o, i, a) => a.indexOf(o) === i);
      return {
        type: s.length > 1 ? s : s[0],
        enum: n.reduce((o, i) => o.includes(i._def.value) ? o : [...o, i._def.value], [])
      };
    }
  } else if (n.every((r) => r._def.typeName === "ZodEnum"))
    return {
      type: "string",
      enum: n.reduce((r, s) => [...r, ...s._def.values.filter((o) => !r.includes(o))], [])
    };
  return bo(t, e);
}
const bo = (t, e) => {
  const n = (t.options instanceof Map ? Array.from(t.options.values()) : t.options).map((r, s) => Y(r._def, {
    ...e,
    currentPath: [...e.currentPath, "anyOf", `${s}`]
  })).filter((r) => !!r && (!e.strictUnions || typeof r == "object" && Object.keys(r).length > 0));
  return n.length ? { anyOf: n } : void 0;
};
function Pc(t, e) {
  if (["ZodString", "ZodNumber", "ZodBigInt", "ZodBoolean", "ZodNull"].includes(t.innerType._def.typeName) && (!t.innerType._def.checks || !t.innerType._def.checks.length))
    return e.target === "openApi3" || e.nullableStrategy === "property" ? {
      type: gr[t.innerType._def.typeName],
      nullable: !0
    } : {
      type: [gr[t.innerType._def.typeName], "null"]
    };
  if (e.target === "openApi3") {
    const r = Y(t.innerType._def, {
      ...e,
      currentPath: [...e.currentPath]
    });
    return r && "$ref" in r ? { allOf: [r], nullable: !0 } : r && { ...r, nullable: !0 };
  }
  const n = Y(t.innerType._def, {
    ...e,
    currentPath: [...e.currentPath, "anyOf", "0"]
  });
  return n && { anyOf: [n, { type: "null" }] };
}
function Nc(t, e) {
  const n = {
    type: "number"
  };
  if (!t.checks)
    return n;
  for (const r of t.checks)
    switch (r.kind) {
      case "int":
        n.type = "integer", Ii(n, "type", r.message, e);
        break;
      case "min":
        e.target === "jsonSchema7" ? r.inclusive ? Q(n, "minimum", r.value, r.message, e) : Q(n, "exclusiveMinimum", r.value, r.message, e) : (r.inclusive || (n.exclusiveMinimum = !0), Q(n, "minimum", r.value, r.message, e));
        break;
      case "max":
        e.target === "jsonSchema7" ? r.inclusive ? Q(n, "maximum", r.value, r.message, e) : Q(n, "exclusiveMaximum", r.value, r.message, e) : (r.inclusive || (n.exclusiveMaximum = !0), Q(n, "maximum", r.value, r.message, e));
        break;
      case "multipleOf":
        Q(n, "multipleOf", r.value, r.message, e);
        break;
    }
  return n;
}
function Dc(t, e) {
  return e.removeAdditionalStrategy === "strict" ? t.catchall._def.typeName === "ZodNever" ? t.unknownKeys !== "strict" : Y(t.catchall._def, {
    ...e,
    currentPath: [...e.currentPath, "additionalProperties"]
  }) ?? !0 : t.catchall._def.typeName === "ZodNever" ? t.unknownKeys === "passthrough" : Y(t.catchall._def, {
    ...e,
    currentPath: [...e.currentPath, "additionalProperties"]
  }) ?? !0;
}
function Mc(t, e) {
  const n = {
    type: "object",
    ...Object.entries(t.shape()).reduce((r, [s, o]) => {
      var u;
      if (o === void 0 || o._def === void 0)
        return r;
      const i = [...e.currentPath, "properties", s], a = Y(o._def, {
        ...e,
        currentPath: i,
        propertyPath: i
      });
      if (a === void 0)
        return r;
      if (e.openaiStrictMode && o.isOptional() && !o.isNullable() && typeof ((u = o._def) == null ? void 0 : u.defaultValue) > "u")
        throw new Error(`Zod field at \`${i.join("/")}\` uses \`.optional()\` without \`.nullable()\` which is not supported by the API. See: https://platform.openai.com/docs/guides/structured-outputs?api-mode=responses#all-fields-must-be-required`);
      return {
        properties: {
          ...r.properties,
          [s]: a
        },
        required: o.isOptional() && !e.openaiStrictMode ? r.required : [...r.required, s]
      };
    }, { properties: {}, required: [] }),
    additionalProperties: Dc(t, e)
  };
  return n.required.length || delete n.required, n;
}
const jc = (t, e) => {
  if (e.propertyPath && e.currentPath.slice(0, e.propertyPath.length).toString() === e.propertyPath.toString())
    return Y(t.innerType._def, { ...e, currentPath: e.currentPath });
  const n = Y(t.innerType._def, {
    ...e,
    currentPath: [...e.currentPath, "anyOf", "1"]
  });
  return n ? {
    anyOf: [
      {
        not: {}
      },
      n
    ]
  } : {};
}, $c = (t, e) => {
  if (e.pipeStrategy === "input")
    return Y(t.in._def, e);
  if (e.pipeStrategy === "output")
    return Y(t.out._def, e);
  const n = Y(t.in._def, {
    ...e,
    currentPath: [...e.currentPath, "allOf", "0"]
  }), r = Y(t.out._def, {
    ...e,
    currentPath: [...e.currentPath, "allOf", n ? "1" : "0"]
  });
  return {
    allOf: [n, r].filter((s) => s !== void 0)
  };
};
function Fc(t, e) {
  return Y(t.type._def, e);
}
function Lc(t, e) {
  const r = {
    type: "array",
    uniqueItems: !0,
    items: Y(t.valueType._def, {
      ...e,
      currentPath: [...e.currentPath, "items"]
    })
  };
  return t.minSize && Q(r, "minItems", t.minSize.value, t.minSize.message, e), t.maxSize && Q(r, "maxItems", t.maxSize.value, t.maxSize.message, e), r;
}
function Zc(t, e) {
  return t.rest ? {
    type: "array",
    minItems: t.items.length,
    items: t.items.map((n, r) => Y(n._def, {
      ...e,
      currentPath: [...e.currentPath, "items", `${r}`]
    })).reduce((n, r) => r === void 0 ? n : [...n, r], []),
    additionalItems: Y(t.rest._def, {
      ...e,
      currentPath: [...e.currentPath, "additionalItems"]
    })
  } : {
    type: "array",
    minItems: t.items.length,
    maxItems: t.items.length,
    items: t.items.map((n, r) => Y(n._def, {
      ...e,
      currentPath: [...e.currentPath, "items", `${r}`]
    })).reduce((n, r) => r === void 0 ? n : [...n, r], [])
  };
}
function Uc() {
  return {
    not: {}
  };
}
function zc() {
  return {};
}
const Bc = (t, e) => Y(t.innerType._def, e);
function Y(t, e, n = !1) {
  var i;
  const r = e.seen.get(t);
  if (e.override) {
    const a = (i = e.override) == null ? void 0 : i.call(e, t, e, r, n);
    if (a !== cc)
      return a;
  }
  if (r && !n) {
    const a = Jc(r, e);
    if (a !== void 0)
      return "$ref" in a && e.seenRefs.add(a.$ref), a;
  }
  const s = { def: t, path: e.currentPath, jsonSchema: void 0 };
  e.seen.set(t, s);
  const o = qc(t, t.typeName, e, n);
  return o && Vc(t, e, o), s.jsonSchema = o, o;
}
const Jc = (t, e) => {
  switch (e.$refStrategy) {
    case "root":
      return { $ref: t.path.join("/") };
    // this case is needed as OpenAI strict mode doesn't support top-level `$ref`s, i.e.
    // the top-level schema *must* be `{"type": "object", "properties": {...}}` but if we ever
    // need to define a `$ref`, relative `$ref`s aren't supported, so we need to extract
    // the schema to `#/definitions/` and reference that.
    //
    // e.g. if we need to reference a schema at
    // `["#","definitions","contactPerson","properties","person1","properties","name"]`
    // then we'll extract it out to `contactPerson_properties_person1_properties_name`
    case "extract-to-root":
      const n = t.path.slice(e.basePath.length + 1).join("_");
      return n !== e.name && e.nameStrategy === "duplicate-ref" && (e.definitions[n] = t.def), { $ref: [...e.basePath, e.definitionPath, n].join("/") };
    case "relative":
      return { $ref: Gc(e.currentPath, t.path) };
    case "none":
    case "seen":
      return t.path.length < e.currentPath.length && t.path.every((r, s) => e.currentPath[s] === r) ? (console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`), {}) : e.$refStrategy === "seen" ? {} : void 0;
  }
}, Gc = (t, e) => {
  let n = 0;
  for (; n < t.length && n < e.length && t[n] === e[n]; n++)
    ;
  return [(t.length - n).toString(), ...e.slice(n)].join("/");
}, qc = (t, e, n, r) => {
  switch (e) {
    case z.ZodString:
      return xi(t, n);
    case z.ZodNumber:
      return Nc(t, n);
    case z.ZodObject:
      return Mc(t, n);
    case z.ZodBigInt:
      return mc(t, n);
    case z.ZodBoolean:
      return gc();
    case z.ZodDate:
      return Ti(t, n);
    case z.ZodUndefined:
      return Uc();
    case z.ZodNull:
      return Ec(n);
    case z.ZodArray:
      return hc(t, n);
    case z.ZodUnion:
    case z.ZodDiscriminatedUnion:
      return Rc(t, n);
    case z.ZodIntersection:
      return Tc(t, n);
    case z.ZodTuple:
      return Zc(t, n);
    case z.ZodRecord:
      return Ai(t, n);
    case z.ZodLiteral:
      return xc(t, n);
    case z.ZodEnum:
      return Ic(t);
    case z.ZodNativeEnum:
      return Cc(t);
    case z.ZodNullable:
      return Pc(t, n);
    case z.ZodOptional:
      return jc(t, n);
    case z.ZodMap:
      return kc(t, n);
    case z.ZodSet:
      return Lc(t, n);
    case z.ZodLazy:
      return Y(t.getter()._def, n);
    case z.ZodPromise:
      return Fc(t, n);
    case z.ZodNaN:
    case z.ZodNever:
      return Oc();
    case z.ZodEffects:
      return bc(t, n, r);
    case z.ZodAny:
      return fc();
    case z.ZodUnknown:
      return zc();
    case z.ZodDefault:
      return wc(t, n);
    case z.ZodBranded:
      return yc(t, n);
    case z.ZodReadonly:
      return Bc(t, n);
    case z.ZodCatch:
      return _c(t, n);
    case z.ZodPipeline:
      return $c(t, n);
    case z.ZodFunction:
    case z.ZodVoid:
    case z.ZodSymbol:
      return;
    default:
      return /* @__PURE__ */ ((s) => {
      })();
  }
}, Vc = (t, e, n) => (t.description && (n.description = t.description, e.markdownDescription && (n.markdownDescription = t.description)), n), Wc = (t, e) => {
  const n = pc(e), r = typeof e == "string" ? e : (e == null ? void 0 : e.nameStrategy) === "title" || e == null ? void 0 : e.name, s = Y(t._def, r === void 0 ? n : {
    ...n,
    currentPath: [...n.basePath, n.definitionPath, r]
  }, !1) ?? {}, o = typeof e == "object" && e.name !== void 0 && e.nameStrategy === "title" ? e.name : void 0;
  o !== void 0 && (s.title = o);
  const i = (() => {
    if (dc(n.definitions))
      return;
    const u = {}, d = /* @__PURE__ */ new Set();
    for (let l = 0; l < 500; l++) {
      const c = Object.entries(n.definitions).filter(([h]) => !d.has(h));
      if (c.length === 0)
        break;
      for (const [h, m] of c)
        u[h] = Y(fs(m), { ...n, currentPath: [...n.basePath, n.definitionPath, h] }, !0) ?? {}, d.add(h);
    }
    return u;
  })(), a = r === void 0 ? i ? {
    ...s,
    [n.definitionPath]: i
  } : s : n.nameStrategy === "duplicate-ref" ? {
    ...s,
    ...i || n.seenRefs.size ? {
      [n.definitionPath]: {
        ...i,
        // only actually duplicate the schema definition if it was ever referenced
        // otherwise the duplication is completely pointless
        ...n.seenRefs.size ? { [r]: s } : void 0
      }
    } : void 0
  } : {
    $ref: [...n.$refStrategy === "relative" ? [] : n.basePath, n.definitionPath, r].join("/"),
    [n.definitionPath]: {
      ...i,
      [r]: s
    }
  };
  return n.target === "jsonSchema7" ? a.$schema = "http://json-schema.org/draft-07/schema#" : n.target === "jsonSchema2019-09" && (a.$schema = "https://json-schema.org/draft/2019-09/schema#"), a;
};
function Hc(t, { parser: e, callback: n }) {
  const r = { ...t };
  return Object.defineProperties(r, {
    $brand: {
      value: "auto-parseable-tool",
      enumerable: !1
    },
    $parseRaw: {
      value: e,
      enumerable: !1
    },
    $callback: {
      value: n,
      enumerable: !1
    }
  }), r;
}
function Kc(t) {
  if (t.type !== "object")
    throw new Error(`Root schema must have type: 'object' but got type: ${t.type ? `'${t.type}'` : "undefined"}`);
  const e = structuredClone(t);
  return Ke(e, [], e);
}
function hs(t) {
  if (typeof t == "boolean")
    return !1;
  if (t.type === "null")
    return !0;
  for (const e of t.oneOf ?? [])
    if (hs(e))
      return !0;
  for (const e of t.anyOf ?? [])
    if (hs(e))
      return !0;
  return !1;
}
function Ke(t, e, n) {
  if (typeof t == "boolean")
    throw new TypeError(`Expected object schema but got boolean; path=${e.join("/")}`);
  if (!xt(t))
    throw new TypeError(`Expected ${JSON.stringify(t)} to be an object; path=${e.join("/")}`);
  const r = t.$defs;
  if (xt(r))
    for (const [h, m] of Object.entries(r))
      Ke(m, [...e, "$defs", h], n);
  const s = t.definitions;
  if (xt(s))
    for (const [h, m] of Object.entries(s))
      Ke(m, [...e, "definitions", h], n);
  t.type === "object" && !("additionalProperties" in t) && (t.additionalProperties = !1);
  const i = t.required ?? [], a = t.properties;
  if (xt(a)) {
    for (const [h, m] of Object.entries(a))
      if (!hs(m) && !i.includes(h))
        throw new Error(`Zod field at \`${[...e, "properties", h].join("/")}\` uses \`.optional()\` without \`.nullable()\` which is not supported by the API. See: https://platform.openai.com/docs/guides/structured-outputs?api-mode=responses#all-fields-must-be-required`);
    t.required = Object.keys(a), t.properties = Object.fromEntries(Object.entries(a).map(([h, m]) => [
      h,
      Ke(m, [...e, "properties", h], n)
    ]));
  }
  const u = t.items;
  xt(u) && (t.items = Ke(u, [...e, "items"], n));
  const d = t.anyOf;
  Array.isArray(d) && (t.anyOf = d.map((h, m) => Ke(h, [...e, "anyOf", String(m)], n)));
  const l = t.allOf;
  if (Array.isArray(l))
    if (l.length === 1) {
      const h = Ke(l[0], [...e, "allOf", "0"], n);
      Object.assign(t, h), delete t.allOf;
    } else
      t.allOf = l.map((h, m) => Ke(h, [...e, "allOf", String(m)], n));
  t.default === null && delete t.default;
  const c = t.$ref;
  if (c && Xc(t, 1)) {
    if (typeof c != "string")
      throw new TypeError(`Received non-string $ref - ${c}; path=${e.join("/")}`);
    const h = Yc(n, c);
    if (typeof h == "boolean")
      throw new Error(`Expected \`$ref: ${c}\` to resolve to an object schema but got boolean`);
    if (!xt(h))
      throw new Error(`Expected \`$ref: ${c}\` to resolve to an object but got ${JSON.stringify(h)}`);
    return Object.assign(t, { ...h, ...t }), delete t.$ref, Ke(t, e, n);
  }
  return t;
}
function Yc(t, e) {
  if (!e.startsWith("#/"))
    throw new Error(`Unexpected $ref format ${JSON.stringify(e)}; Does not start with #/`);
  const n = e.slice(2).split("/");
  let r = t;
  for (const s of n) {
    if (!xt(r))
      throw new Error(`encountered non-object entry while resolving ${e} - ${JSON.stringify(r)}`);
    const o = r[s];
    if (o === void 0)
      throw new Error(`Key ${s} not found while resolving ${e}`);
    r = o;
  }
  return r;
}
function xt(t) {
  return typeof t == "object" && t !== null && !Array.isArray(t);
}
function Xc(t, e) {
  let n = 0;
  for (const r in t)
    if (n++, n > e)
      return !0;
  return !1;
}
function ki(t, e) {
  return Wc(t, {
    openaiStrictMode: !0,
    name: e.name,
    nameStrategy: "duplicate-ref",
    $refStrategy: "extract-to-root",
    nullableStrategy: "property"
  });
}
function Ci(t) {
  return Kc(ac(t, {
    target: "draft-7"
  }));
}
function Oi(t) {
  return "_zod" in t;
}
function Qc(t, e, n) {
  return uc({
    type: "json_schema",
    ...n,
    name: e,
    strict: !0,
    schema: Oi(t) ? Ci(t) : ki(t, { name: e })
  }, (r) => t.parse(JSON.parse(r)));
}
function el(t) {
  return Hc({
    type: "function",
    name: t.name,
    parameters: Oi(t.parameters) ? Ci(t.parameters) : ki(t.parameters, { name: t.name }),
    strict: !0,
    ...t.description ? { description: t.description } : void 0
  }, {
    callback: t.function,
    parser: (e) => t.parameters.parse(JSON.parse(e))
  });
}
class Ve extends Error {
  constructor(n, r) {
    super(n);
    y(this, "state");
    this.name = new.target.name, this.state = r;
  }
}
class tl extends Ve {
}
class nl extends Ve {
}
class Oe extends Ve {
}
class rl extends Oe {
  constructor(n, r, s, o) {
    super(n, r);
    /** The original error thrown during validation, if any. */
    y(this, "originalError");
    /** Context from the tool invocation that failed. */
    y(this, "toolInvocation");
    this.originalError = s, this.toolInvocation = o;
  }
}
class te extends Ve {
}
class Ei extends Ve {
  constructor(n, r, s) {
    super(n, s);
    y(this, "error");
    this.error = r;
  }
}
class sl extends Ve {
  constructor(n, r, s) {
    super(n, s);
    y(this, "error");
    this.error = r;
  }
}
class Io extends Ve {
  constructor(n, r, s) {
    super(n, s);
    y(this, "result");
    this.result = r;
  }
}
class ms extends Ve {
  constructor(n, r, s) {
    super(n, s);
    y(this, "result");
    this.result = r;
  }
}
class ol extends Ve {
  constructor(n, r, s) {
    super(n, s);
    y(this, "result");
    this.result = r;
  }
}
class il extends Ve {
  constructor(n, r, s) {
    super(n, s);
    y(this, "result");
    this.result = r;
  }
}
function vn(t) {
  var n;
  if (typeof t != "object" || t === null)
    return;
  const e = t;
  return ((n = e._zod) == null ? void 0 : n.def) || e._def || e.def;
}
function $r(t) {
  const e = vn(t);
  if (!e)
    return;
  const n = typeof e.typeName == "string" && e.typeName || typeof e.type == "string" && e.type;
  if (typeof n != "string")
    return;
  const r = n.toLowerCase();
  return r.startsWith("zod") ? r.slice(3) : r;
}
function Lt(t) {
  return vn(t) ? $r(t) === "object" : !1;
}
function al(t) {
  return typeof t == "object" && t !== null && "input" in t && typeof t.input == "string";
}
const ul = "http://json-schema.org/draft-07/schema#", cl = /* @__PURE__ */ new Set(["optional"]), ll = /* @__PURE__ */ new Set([
  "brand",
  "branded",
  "catch",
  "default",
  "effects",
  "pipeline",
  "pipe",
  "prefault",
  "readonly",
  "refinement",
  "transform"
]), So = {
  string: { type: "string" },
  number: { type: "number" },
  bigint: { type: "integer" },
  boolean: { type: "boolean" },
  date: { type: "string", format: "date-time" }
};
function Ri(t) {
  return typeof t == "object" && t !== null && t.type === "object" && "properties" in t && "additionalProperties" in t;
}
function dl(t) {
  const e = Pi(t);
  if (e)
    return Array.isArray(e.required) || (e.required = []), typeof e.additionalProperties > "u" && (e.additionalProperties = !1), typeof e.$schema != "string" && (e.$schema = ul), e;
}
function Pi(t) {
  const e = Sl(t);
  if (!e)
    return;
  const n = {}, r = [];
  for (const [s, o] of Object.entries(e)) {
    const { schema: i, optional: a } = pl(o);
    if (!i)
      return;
    n[s] = i, a || r.push(s);
  }
  return { type: "object", properties: n, required: r, additionalProperties: !1 };
}
function pl(t) {
  let e = gs(t), n = !1;
  for (; cl.has($r(e) ?? ""); ) {
    n = !0;
    const r = vn(e), s = gs(r == null ? void 0 : r.innerType);
    if (!s || s === e)
      break;
    e = s;
  }
  return { schema: ze(e), optional: n };
}
function ze(t) {
  if (t === void 0)
    return;
  const e = gs(t), n = $r(e), r = vn(e);
  if (n) {
    if (n in So)
      return So[n];
    switch (n) {
      case "object":
        return Pi(e);
      case "array":
        return fl(r);
      case "tuple":
        return hl(r);
      case "union":
        return ml(r);
      case "intersection":
        return gl(r);
      case "literal":
        return bl(r);
      case "enum":
      case "nativeenum":
        return Il(r);
      case "record":
        return yl(r);
      case "map":
        return _l(r);
      case "set":
        return vl(r);
      case "nullable":
        return wl(r);
      default:
        return;
    }
  }
}
function fl(t) {
  const e = ze(Ni(t, "element", "items", "type"));
  return e ? { type: "array", items: e } : void 0;
}
function hl(t) {
  const e = Di(t == null ? void 0 : t.items).map((r) => ze(r)).filter(Boolean);
  if (!e.length)
    return;
  const n = {
    type: "array",
    items: e,
    minItems: e.length
  };
  return t != null && t.rest || (n.maxItems = e.length), n;
}
function ml(t) {
  const e = Di((t == null ? void 0 : t.options) ?? (t == null ? void 0 : t.schemas)).map((n) => ze(n)).filter(Boolean);
  return e.length ? { anyOf: e } : void 0;
}
function gl(t) {
  const e = ze(t == null ? void 0 : t.left), n = ze(t == null ? void 0 : t.right);
  return e && n ? { allOf: [e, n] } : void 0;
}
function yl(t) {
  const e = ze((t == null ? void 0 : t.valueType) ?? (t == null ? void 0 : t.values));
  return e ? { type: "object", additionalProperties: e } : void 0;
}
function _l(t) {
  const e = ze((t == null ? void 0 : t.valueType) ?? (t == null ? void 0 : t.values));
  return e ? { type: "array", items: e } : void 0;
}
function vl(t) {
  const e = ze(t == null ? void 0 : t.valueType);
  return e ? { type: "array", items: e, uniqueItems: !0 } : void 0;
}
function wl(t) {
  const e = ze((t == null ? void 0 : t.innerType) ?? (t == null ? void 0 : t.type));
  return e ? { anyOf: [e, { type: "null" }] } : void 0;
}
function gs(t) {
  let e = t;
  for (; ll.has($r(e) ?? ""); ) {
    const n = vn(e), r = (n == null ? void 0 : n.innerType) ?? (n == null ? void 0 : n.schema) ?? (n == null ? void 0 : n.base) ?? (n == null ? void 0 : n.type) ?? (n == null ? void 0 : n.wrapped) ?? (n == null ? void 0 : n.underlying);
    if (!r || r === e)
      return e;
    e = r;
  }
  return e;
}
function Ni(t, ...e) {
  if (t) {
    for (const n of e)
      if (n in t && t[n] !== void 0)
        return t[n];
  }
}
function Di(t) {
  return Array.isArray(t) ? t : t === void 0 ? [] : [t];
}
function bl(t) {
  if (!t)
    return;
  const e = Ni(t, "value", "literal");
  if (e !== void 0)
    return {
      const: e,
      type: e === null ? "null" : typeof e
    };
}
function Il(t) {
  if (t) {
    if (Array.isArray(t.values))
      return { enum: t.values };
    if (Array.isArray(t.options))
      return { enum: t.options };
    if (t.values && typeof t.values == "object")
      return { enum: Object.values(t.values) };
    if (t.enum && typeof t.enum == "object")
      return { enum: Object.values(t.enum) };
  }
}
function Sl(t) {
  if (typeof t != "object" || t === null)
    return;
  const e = t;
  if (e.shape && typeof e.shape == "object")
    return e.shape;
  if (typeof e.shape == "function")
    try {
      return e.shape();
    } catch {
      return;
    }
  const n = vn(e), r = n == null ? void 0 : n.shape;
  if (r && typeof r == "object")
    return r;
  if (typeof r == "function")
    try {
      return r();
    } catch {
      return;
    }
}
const Tl = el, xl = Qc;
function Mi(t) {
  return dl(t);
}
function yr(t) {
  if (t = t.replace(/\s/g, "_"), t = t.replace(/[^a-zA-Z0-9]/g, "_"), t.length === 0)
    throw new Error("Tool name cannot be empty");
  return t;
}
function zs(t, e) {
  const n = (r) => JSON.parse(r);
  if (Lt(t)) {
    const r = (o) => {
      const i = Mi(t);
      if (i)
        return {
          schema: i,
          parser: (u) => t.parse(JSON.parse(u))
        };
      const a = o instanceof Error ? ` Upstream helper error: ${o.message}` : "";
      throw new te(`Unable to convert the provided Zod schema to JSON Schema. Ensure that the \`zod\` package is available at runtime or provide a JSON schema object instead.${a}`);
    };
    let s;
    try {
      s = Tl({
        name: e,
        parameters: t,
        function: () => {
        },
        // empty function here to satisfy the OpenAI helper
        description: ""
      });
    } catch (o) {
      return r(o);
    }
    return Ri(s.parameters) ? {
      schema: s.parameters,
      parser: s.$parseRaw
    } : r();
  } else if (typeof t == "object" && t !== null)
    return {
      schema: t,
      parser: n
    };
  throw new te("Input type is not a ZodObject or a valid JSON schema");
}
function To(t) {
  if (t === "text")
    return "text";
  if (Lt(t)) {
    const e = (r, s) => {
      const o = Mi(t);
      if (o)
        return {
          type: (r == null ? void 0 : r.type) ?? "json_schema",
          name: (r == null ? void 0 : r.name) ?? "output",
          strict: (r == null ? void 0 : r.strict) ?? !1,
          schema: o
        };
      const i = s instanceof Error ? ` Upstream helper error: ${s.message}` : "";
      throw new te(`Unable to convert the provided Zod schema to JSON Schema. Ensure that the \`zod\` package is available at runtime or provide a JSON schema object instead.${i}`);
    };
    let n;
    try {
      n = xl(t, "output");
    } catch (r) {
      return e(void 0, r);
    }
    return Ri(n.schema) ? {
      type: n.type,
      name: n.name,
      strict: n.strict || !1,
      schema: n.schema
    } : e(n);
  }
  return t;
}
function Al(t) {
  return t && t.__esModule && Object.prototype.hasOwnProperty.call(t, "default") ? t.default : t;
}
var cr = { exports: {} }, Hr, xo;
function kl() {
  if (xo) return Hr;
  xo = 1;
  var t = 1e3, e = t * 60, n = e * 60, r = n * 24, s = r * 7, o = r * 365.25;
  Hr = function(l, c) {
    c = c || {};
    var h = typeof l;
    if (h === "string" && l.length > 0)
      return i(l);
    if (h === "number" && isFinite(l))
      return c.long ? u(l) : a(l);
    throw new Error(
      "val is not a non-empty string or a valid number. val=" + JSON.stringify(l)
    );
  };
  function i(l) {
    if (l = String(l), !(l.length > 100)) {
      var c = /^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(
        l
      );
      if (c) {
        var h = parseFloat(c[1]), m = (c[2] || "ms").toLowerCase();
        switch (m) {
          case "years":
          case "year":
          case "yrs":
          case "yr":
          case "y":
            return h * o;
          case "weeks":
          case "week":
          case "w":
            return h * s;
          case "days":
          case "day":
          case "d":
            return h * r;
          case "hours":
          case "hour":
          case "hrs":
          case "hr":
          case "h":
            return h * n;
          case "minutes":
          case "minute":
          case "mins":
          case "min":
          case "m":
            return h * e;
          case "seconds":
          case "second":
          case "secs":
          case "sec":
          case "s":
            return h * t;
          case "milliseconds":
          case "millisecond":
          case "msecs":
          case "msec":
          case "ms":
            return h;
          default:
            return;
        }
      }
    }
  }
  function a(l) {
    var c = Math.abs(l);
    return c >= r ? Math.round(l / r) + "d" : c >= n ? Math.round(l / n) + "h" : c >= e ? Math.round(l / e) + "m" : c >= t ? Math.round(l / t) + "s" : l + "ms";
  }
  function u(l) {
    var c = Math.abs(l);
    return c >= r ? d(l, c, r, "day") : c >= n ? d(l, c, n, "hour") : c >= e ? d(l, c, e, "minute") : c >= t ? d(l, c, t, "second") : l + " ms";
  }
  function d(l, c, h, m) {
    var _ = c >= h * 1.5;
    return Math.round(l / h) + " " + m + (_ ? "s" : "");
  }
  return Hr;
}
var Kr, Ao;
function Cl() {
  if (Ao) return Kr;
  Ao = 1;
  function t(e) {
    r.debug = r, r.default = r, r.coerce = d, r.disable = a, r.enable = o, r.enabled = u, r.humanize = kl(), r.destroy = l, Object.keys(e).forEach((c) => {
      r[c] = e[c];
    }), r.names = [], r.skips = [], r.formatters = {};
    function n(c) {
      let h = 0;
      for (let m = 0; m < c.length; m++)
        h = (h << 5) - h + c.charCodeAt(m), h |= 0;
      return r.colors[Math.abs(h) % r.colors.length];
    }
    r.selectColor = n;
    function r(c) {
      let h, m = null, _, w;
      function b(...I) {
        if (!b.enabled)
          return;
        const T = b, x = Number(/* @__PURE__ */ new Date()), P = x - (h || x);
        T.diff = P, T.prev = h, T.curr = x, h = x, I[0] = r.coerce(I[0]), typeof I[0] != "string" && I.unshift("%O");
        let D = 0;
        I[0] = I[0].replace(/%([a-zA-Z%])/g, (X, ue) => {
          if (X === "%%")
            return "%";
          D++;
          const V = r.formatters[ue];
          if (typeof V == "function") {
            const ie = I[D];
            X = V.call(T, ie), I.splice(D, 1), D--;
          }
          return X;
        }), r.formatArgs.call(T, I), (T.log || r.log).apply(T, I);
      }
      return b.namespace = c, b.useColors = r.useColors(), b.color = r.selectColor(c), b.extend = s, b.destroy = r.destroy, Object.defineProperty(b, "enabled", {
        enumerable: !0,
        configurable: !1,
        get: () => m !== null ? m : (_ !== r.namespaces && (_ = r.namespaces, w = r.enabled(c)), w),
        set: (I) => {
          m = I;
        }
      }), typeof r.init == "function" && r.init(b), b;
    }
    function s(c, h) {
      const m = r(this.namespace + (typeof h > "u" ? ":" : h) + c);
      return m.log = this.log, m;
    }
    function o(c) {
      r.save(c), r.namespaces = c, r.names = [], r.skips = [];
      const h = (typeof c == "string" ? c : "").trim().replace(/\s+/g, ",").split(",").filter(Boolean);
      for (const m of h)
        m[0] === "-" ? r.skips.push(m.slice(1)) : r.names.push(m);
    }
    function i(c, h) {
      let m = 0, _ = 0, w = -1, b = 0;
      for (; m < c.length; )
        if (_ < h.length && (h[_] === c[m] || h[_] === "*"))
          h[_] === "*" ? (w = _, b = m, _++) : (m++, _++);
        else if (w !== -1)
          _ = w + 1, b++, m = b;
        else
          return !1;
      for (; _ < h.length && h[_] === "*"; )
        _++;
      return _ === h.length;
    }
    function a() {
      const c = [
        ...r.names,
        ...r.skips.map((h) => "-" + h)
      ].join(",");
      return r.enable(""), c;
    }
    function u(c) {
      for (const h of r.skips)
        if (i(c, h))
          return !1;
      for (const h of r.names)
        if (i(c, h))
          return !0;
      return !1;
    }
    function d(c) {
      return c instanceof Error ? c.stack || c.message : c;
    }
    function l() {
      console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");
    }
    return r.enable(r.load()), r;
  }
  return Kr = t, Kr;
}
var ko;
function Ol() {
  return ko || (ko = 1, (function(t, e) {
    e.formatArgs = r, e.save = s, e.load = o, e.useColors = n, e.storage = i(), e.destroy = /* @__PURE__ */ (() => {
      let u = !1;
      return () => {
        u || (u = !0, console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."));
      };
    })(), e.colors = [
      "#0000CC",
      "#0000FF",
      "#0033CC",
      "#0033FF",
      "#0066CC",
      "#0066FF",
      "#0099CC",
      "#0099FF",
      "#00CC00",
      "#00CC33",
      "#00CC66",
      "#00CC99",
      "#00CCCC",
      "#00CCFF",
      "#3300CC",
      "#3300FF",
      "#3333CC",
      "#3333FF",
      "#3366CC",
      "#3366FF",
      "#3399CC",
      "#3399FF",
      "#33CC00",
      "#33CC33",
      "#33CC66",
      "#33CC99",
      "#33CCCC",
      "#33CCFF",
      "#6600CC",
      "#6600FF",
      "#6633CC",
      "#6633FF",
      "#66CC00",
      "#66CC33",
      "#9900CC",
      "#9900FF",
      "#9933CC",
      "#9933FF",
      "#99CC00",
      "#99CC33",
      "#CC0000",
      "#CC0033",
      "#CC0066",
      "#CC0099",
      "#CC00CC",
      "#CC00FF",
      "#CC3300",
      "#CC3333",
      "#CC3366",
      "#CC3399",
      "#CC33CC",
      "#CC33FF",
      "#CC6600",
      "#CC6633",
      "#CC9900",
      "#CC9933",
      "#CCCC00",
      "#CCCC33",
      "#FF0000",
      "#FF0033",
      "#FF0066",
      "#FF0099",
      "#FF00CC",
      "#FF00FF",
      "#FF3300",
      "#FF3333",
      "#FF3366",
      "#FF3399",
      "#FF33CC",
      "#FF33FF",
      "#FF6600",
      "#FF6633",
      "#FF9900",
      "#FF9933",
      "#FFCC00",
      "#FFCC33"
    ];
    function n() {
      if (typeof window < "u" && window.process && (window.process.type === "renderer" || window.process.__nwjs))
        return !0;
      if (typeof navigator < "u" && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))
        return !1;
      let u;
      return typeof document < "u" && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance || // Is firebug? http://stackoverflow.com/a/398120/376773
      typeof window < "u" && window.console && (window.console.firebug || window.console.exception && window.console.table) || // Is firefox >= v31?
      // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages
      typeof navigator < "u" && navigator.userAgent && (u = navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)) && parseInt(u[1], 10) >= 31 || // Double check webkit in userAgent just in case we are in a worker
      typeof navigator < "u" && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/);
    }
    function r(u) {
      if (u[0] = (this.useColors ? "%c" : "") + this.namespace + (this.useColors ? " %c" : " ") + u[0] + (this.useColors ? "%c " : " ") + "+" + t.exports.humanize(this.diff), !this.useColors)
        return;
      const d = "color: " + this.color;
      u.splice(1, 0, d, "color: inherit");
      let l = 0, c = 0;
      u[0].replace(/%[a-zA-Z%]/g, (h) => {
        h !== "%%" && (l++, h === "%c" && (c = l));
      }), u.splice(c, 0, d);
    }
    e.log = console.debug || console.log || (() => {
    });
    function s(u) {
      try {
        u ? e.storage.setItem("debug", u) : e.storage.removeItem("debug");
      } catch {
      }
    }
    function o() {
      let u;
      try {
        u = e.storage.getItem("debug") || e.storage.getItem("DEBUG");
      } catch {
      }
      return !u && typeof process < "u" && "env" in process && (u = process.env.DEBUG), u;
    }
    function i() {
      try {
        return localStorage;
      } catch {
      }
    }
    t.exports = Cl()(e);
    const { formatters: a } = t.exports;
    a.j = function(u) {
      try {
        return JSON.stringify(u);
      } catch (d) {
        return "[UnexpectedJSONParseError]: " + d.message;
      }
    };
  })(cr, cr.exports)), cr.exports;
}
var El = Ol();
const Rl = /* @__PURE__ */ Al(El);
function ji() {
  return vd();
}
function Co(t) {
  const e = ji();
  return typeof e < "u" && (e[t] === "true" || e[t] === "1");
}
const $i = {
  get disabled() {
    return !0;
  }
}, Fi = {
  get dontLogModelData() {
    return Co("OPENAI_AGENTS_DONT_LOG_MODEL_DATA");
  },
  get dontLogToolData() {
    return Co("OPENAI_AGENTS_DONT_LOG_TOOL_DATA");
  }
}, Pl = Fi.dontLogModelData, Nl = Fi.dontLogToolData;
function Li(t = "openai-agents") {
  return {
    namespace: t,
    debug: Rl(t),
    error: console.error,
    warn: console.warn,
    dontLogModelData: Pl,
    dontLogToolData: Nl
  };
}
const E = Li("openai-agents:core"), Oo = 20;
function vt(t) {
  if (t == null)
    return String(t);
  if (Zi(t))
    return An(new Uint8Array(t));
  if (Fr(t)) {
    const e = t;
    return An(new Uint8Array(e.buffer, e.byteOffset, e.byteLength));
  }
  if (typeof t == "string")
    return t;
  if (typeof t == "object")
    try {
      return JSON.stringify(t, Ml);
    } catch {
      return "[object with circular references]";
    }
  return String(t);
}
function Zi(t) {
  if (t instanceof ArrayBuffer)
    return !0;
  const e = globalThis.SharedArrayBuffer;
  return !!(e && t instanceof e);
}
function Fr(t) {
  return typeof ArrayBuffer < "u" && ArrayBuffer.isView(t);
}
function Bs(t) {
  return typeof t == "object" && t !== null && t.type === "Buffer" && Array.isArray(t.data);
}
function Ui(t) {
  const e = globalThis.Buffer;
  return !!(e && typeof e.isBuffer == "function" && e.isBuffer(t));
}
function An(t) {
  if (t.length === 0)
    return "[byte array (0 bytes)]";
  const e = Math.min(t.length, Oo), n = [];
  for (let o = 0; o < e; o++)
    n.push(Dl(t[o]));
  const r = t.length > Oo ? " " : "";
  return `[byte array ${n.join(" ")}${r} (${t.length} bytes)]`;
}
function Dl(t) {
  return `0x${t.toString(16).padStart(2, "0")}`;
}
function Ml(t, e) {
  if (Zi(e))
    return An(new Uint8Array(e));
  if (Fr(e)) {
    const n = e;
    return An(new Uint8Array(n.buffer, n.byteOffset, n.byteLength));
  }
  return Bs(e) ? An(Uint8Array.from(e.data)) : e;
}
function jl(t) {
  return {
    type: "tool_input",
    name: t.name,
    run: t.run
  };
}
function $l(t) {
  return {
    type: "tool_output",
    name: t.name,
    run: t.run
  };
}
function Fl(t) {
  return t ? t.map((e) => "type" in e && e.type === "tool_input" ? e : jl(e)) : [];
}
function Ll(t) {
  return t ? t.map((e) => "type" in e && e.type === "tool_output" ? e : $l(e)) : [];
}
function ys(t) {
  return !!t && typeof t == "object" && typeof t.create == "function";
}
const _s = /* @__PURE__ */ new WeakMap(), Zl = /* @__PURE__ */ new WeakMap(), _r = /* @__PURE__ */ new WeakMap();
function zi(t) {
  const e = Zl.get(t);
  if (e)
    return e;
  if (typeof t.computer == "function" || ys(t.computer))
    return t.computer;
}
function Eo(t, e, n) {
  let r = _r.get(e);
  r || (r = /* @__PURE__ */ new Map(), _r.set(e, r)), r.set(t, n);
}
async function Bi(t) {
  const { tool: e, runContext: n } = t, r = e;
  let s = _s.get(r);
  s || (s = /* @__PURE__ */ new WeakMap(), _s.set(r, s));
  const o = s.get(n);
  if (o)
    return Eo(e, n, o), o.computer;
  const i = zi(e), a = i && ys(i) ? i : ys(e.computer) ? e.computer : void 0, u = typeof i == "function" ? i : (a == null ? void 0 : a.create) ?? (typeof e.computer == "function" ? e.computer : void 0), d = a == null ? void 0 : a.dispose, l = u && typeof u == "function" ? await u({ runContext: n }) : e.computer;
  if (!l)
    throw new te("The computer tool did not provide a computer instance.");
  const c = {
    computer: l,
    dispose: d
  };
  return s.set(n, c), Eo(e, n, c), e.computer = l, l;
}
async function Ro({ runContext: t }) {
  const e = _r.get(t);
  if (!e)
    return;
  _r.delete(t);
  const n = [];
  for (const [r, s] of e.entries()) {
    const o = _s.get(r);
    o == null || o.delete(t);
    const i = zi(r);
    i && (r.computer = i), s.dispose && n.push(async () => {
      var a;
      await ((a = s.dispose) == null ? void 0 : a.call(s, { runContext: t, computer: s.computer }));
    });
  }
  for (const r of n)
    try {
      await r();
    } catch (s) {
      E.warn(`Failed to dispose computer for run context: ${s}`);
    }
}
function Ul(t, e) {
  return `An error occurred while running the tool. Please try again. Error: ${e instanceof Error ? e.toString() : String(e)}`;
}
function vs(t) {
  const e = t.name ? yr(t.name) : yr(t.execute.name), n = typeof t.errorFunction > "u" ? Ul : t.errorFunction;
  if (!e)
    throw new Error("Tool name cannot be empty. Either name your function or provide a name in the options.");
  const r = t.strict ?? !0;
  if (!r && Lt(t.parameters))
    throw new te("Strict mode is required for Zod parameters");
  const { parser: s, schema: o } = zs(t.parameters, e);
  async function i(l, c, h) {
    const [m, _] = await Us(() => s(c));
    if (m !== null)
      throw E.dontLogToolData ? E.debug(`Invalid JSON input for tool ${e}`) : E.debug(`Invalid JSON input for tool ${e}: ${c}`), new rl(
        "Invalid JSON input for tool",
        void 0,
        // no RunState available in this context
        m,
        { runContext: l, input: c, details: h }
      );
    E.dontLogToolData ? E.debug(`Invoking tool ${e}`) : E.debug(`Invoking tool ${e} with input ${c}`);
    const w = await t.execute(_, l, h), b = vt(w);
    return E.dontLogToolData ? E.debug(`Tool ${e} completed`) : E.debug(`Tool ${e} returned: ${b}`), w;
  }
  async function a(l, c, h) {
    return i(l, c, h).catch((m) => {
      if (n) {
        const _ = Dn();
        return _ == null || _.setError({
          message: "Error running tool (non-fatal)",
          data: {
            tool_name: e,
            error: m.toString()
          }
        }), n(l, m);
      }
      throw m;
    });
  }
  const u = typeof t.needsApproval == "function" ? t.needsApproval : async () => typeof t.needsApproval == "boolean" ? t.needsApproval : !1, d = typeof t.isEnabled == "function" ? async (l, c) => {
    const h = t.isEnabled;
    return !!await h({ runContext: l, agent: c });
  } : async () => typeof t.isEnabled == "boolean" ? t.isEnabled : !0;
  return {
    type: "function",
    name: e,
    description: t.description,
    parameters: o,
    strict: r,
    invoke: a,
    needsApproval: u,
    isEnabled: d,
    inputGuardrails: Fl(t.inputGuardrails),
    outputGuardrails: Ll(t.outputGuardrails)
  };
}
var K;
(function(t) {
  t.assertEqual = (s) => {
  };
  function e(s) {
  }
  t.assertIs = e;
  function n(s) {
    throw new Error();
  }
  t.assertNever = n, t.arrayToEnum = (s) => {
    const o = {};
    for (const i of s)
      o[i] = i;
    return o;
  }, t.getValidEnumValues = (s) => {
    const o = t.objectKeys(s).filter((a) => typeof s[s[a]] != "number"), i = {};
    for (const a of o)
      i[a] = s[a];
    return t.objectValues(i);
  }, t.objectValues = (s) => t.objectKeys(s).map(function(o) {
    return s[o];
  }), t.objectKeys = typeof Object.keys == "function" ? (s) => Object.keys(s) : (s) => {
    const o = [];
    for (const i in s)
      Object.prototype.hasOwnProperty.call(s, i) && o.push(i);
    return o;
  }, t.find = (s, o) => {
    for (const i of s)
      if (o(i))
        return i;
  }, t.isInteger = typeof Number.isInteger == "function" ? (s) => Number.isInteger(s) : (s) => typeof s == "number" && Number.isFinite(s) && Math.floor(s) === s;
  function r(s, o = " | ") {
    return s.map((i) => typeof i == "string" ? `'${i}'` : i).join(o);
  }
  t.joinValues = r, t.jsonStringifyReplacer = (s, o) => typeof o == "bigint" ? o.toString() : o;
})(K || (K = {}));
var Po;
(function(t) {
  t.mergeShapes = (e, n) => ({
    ...e,
    ...n
    // second overwrites first
  });
})(Po || (Po = {}));
const R = K.arrayToEnum([
  "string",
  "nan",
  "number",
  "integer",
  "float",
  "boolean",
  "date",
  "bigint",
  "symbol",
  "function",
  "undefined",
  "null",
  "array",
  "object",
  "unknown",
  "promise",
  "void",
  "never",
  "map",
  "set"
]), ut = (t) => {
  switch (typeof t) {
    case "undefined":
      return R.undefined;
    case "string":
      return R.string;
    case "number":
      return Number.isNaN(t) ? R.nan : R.number;
    case "boolean":
      return R.boolean;
    case "function":
      return R.function;
    case "bigint":
      return R.bigint;
    case "symbol":
      return R.symbol;
    case "object":
      return Array.isArray(t) ? R.array : t === null ? R.null : t.then && typeof t.then == "function" && t.catch && typeof t.catch == "function" ? R.promise : typeof Map < "u" && t instanceof Map ? R.map : typeof Set < "u" && t instanceof Set ? R.set : typeof Date < "u" && t instanceof Date ? R.date : R.object;
    default:
      return R.unknown;
  }
}, A = K.arrayToEnum([
  "invalid_type",
  "invalid_literal",
  "custom",
  "invalid_union",
  "invalid_union_discriminator",
  "invalid_enum_value",
  "unrecognized_keys",
  "invalid_arguments",
  "invalid_return_type",
  "invalid_date",
  "invalid_string",
  "too_small",
  "too_big",
  "invalid_intersection_types",
  "not_multiple_of",
  "not_finite"
]);
class Be extends Error {
  get errors() {
    return this.issues;
  }
  constructor(e) {
    super(), this.issues = [], this.addIssue = (r) => {
      this.issues = [...this.issues, r];
    }, this.addIssues = (r = []) => {
      this.issues = [...this.issues, ...r];
    };
    const n = new.target.prototype;
    Object.setPrototypeOf ? Object.setPrototypeOf(this, n) : this.__proto__ = n, this.name = "ZodError", this.issues = e;
  }
  format(e) {
    const n = e || function(o) {
      return o.message;
    }, r = { _errors: [] }, s = (o) => {
      for (const i of o.issues)
        if (i.code === "invalid_union")
          i.unionErrors.map(s);
        else if (i.code === "invalid_return_type")
          s(i.returnTypeError);
        else if (i.code === "invalid_arguments")
          s(i.argumentsError);
        else if (i.path.length === 0)
          r._errors.push(n(i));
        else {
          let a = r, u = 0;
          for (; u < i.path.length; ) {
            const d = i.path[u];
            u === i.path.length - 1 ? (a[d] = a[d] || { _errors: [] }, a[d]._errors.push(n(i))) : a[d] = a[d] || { _errors: [] }, a = a[d], u++;
          }
        }
    };
    return s(this), r;
  }
  static assert(e) {
    if (!(e instanceof Be))
      throw new Error(`Not a ZodError: ${e}`);
  }
  toString() {
    return this.message;
  }
  get message() {
    return JSON.stringify(this.issues, K.jsonStringifyReplacer, 2);
  }
  get isEmpty() {
    return this.issues.length === 0;
  }
  flatten(e = (n) => n.message) {
    const n = {}, r = [];
    for (const s of this.issues)
      if (s.path.length > 0) {
        const o = s.path[0];
        n[o] = n[o] || [], n[o].push(e(s));
      } else
        r.push(e(s));
    return { formErrors: r, fieldErrors: n };
  }
  get formErrors() {
    return this.flatten();
  }
}
Be.create = (t) => new Be(t);
const ws = (t, e) => {
  let n;
  switch (t.code) {
    case A.invalid_type:
      t.received === R.undefined ? n = "Required" : n = `Expected ${t.expected}, received ${t.received}`;
      break;
    case A.invalid_literal:
      n = `Invalid literal value, expected ${JSON.stringify(t.expected, K.jsonStringifyReplacer)}`;
      break;
    case A.unrecognized_keys:
      n = `Unrecognized key(s) in object: ${K.joinValues(t.keys, ", ")}`;
      break;
    case A.invalid_union:
      n = "Invalid input";
      break;
    case A.invalid_union_discriminator:
      n = `Invalid discriminator value. Expected ${K.joinValues(t.options)}`;
      break;
    case A.invalid_enum_value:
      n = `Invalid enum value. Expected ${K.joinValues(t.options)}, received '${t.received}'`;
      break;
    case A.invalid_arguments:
      n = "Invalid function arguments";
      break;
    case A.invalid_return_type:
      n = "Invalid function return type";
      break;
    case A.invalid_date:
      n = "Invalid date";
      break;
    case A.invalid_string:
      typeof t.validation == "object" ? "includes" in t.validation ? (n = `Invalid input: must include "${t.validation.includes}"`, typeof t.validation.position == "number" && (n = `${n} at one or more positions greater than or equal to ${t.validation.position}`)) : "startsWith" in t.validation ? n = `Invalid input: must start with "${t.validation.startsWith}"` : "endsWith" in t.validation ? n = `Invalid input: must end with "${t.validation.endsWith}"` : K.assertNever(t.validation) : t.validation !== "regex" ? n = `Invalid ${t.validation}` : n = "Invalid";
      break;
    case A.too_small:
      t.type === "array" ? n = `Array must contain ${t.exact ? "exactly" : t.inclusive ? "at least" : "more than"} ${t.minimum} element(s)` : t.type === "string" ? n = `String must contain ${t.exact ? "exactly" : t.inclusive ? "at least" : "over"} ${t.minimum} character(s)` : t.type === "number" ? n = `Number must be ${t.exact ? "exactly equal to " : t.inclusive ? "greater than or equal to " : "greater than "}${t.minimum}` : t.type === "bigint" ? n = `Number must be ${t.exact ? "exactly equal to " : t.inclusive ? "greater than or equal to " : "greater than "}${t.minimum}` : t.type === "date" ? n = `Date must be ${t.exact ? "exactly equal to " : t.inclusive ? "greater than or equal to " : "greater than "}${new Date(Number(t.minimum))}` : n = "Invalid input";
      break;
    case A.too_big:
      t.type === "array" ? n = `Array must contain ${t.exact ? "exactly" : t.inclusive ? "at most" : "less than"} ${t.maximum} element(s)` : t.type === "string" ? n = `String must contain ${t.exact ? "exactly" : t.inclusive ? "at most" : "under"} ${t.maximum} character(s)` : t.type === "number" ? n = `Number must be ${t.exact ? "exactly" : t.inclusive ? "less than or equal to" : "less than"} ${t.maximum}` : t.type === "bigint" ? n = `BigInt must be ${t.exact ? "exactly" : t.inclusive ? "less than or equal to" : "less than"} ${t.maximum}` : t.type === "date" ? n = `Date must be ${t.exact ? "exactly" : t.inclusive ? "smaller than or equal to" : "smaller than"} ${new Date(Number(t.maximum))}` : n = "Invalid input";
      break;
    case A.custom:
      n = "Invalid input";
      break;
    case A.invalid_intersection_types:
      n = "Intersection results could not be merged";
      break;
    case A.not_multiple_of:
      n = `Number must be a multiple of ${t.multipleOf}`;
      break;
    case A.not_finite:
      n = "Number must be finite";
      break;
    default:
      n = e.defaultError, K.assertNever(t);
  }
  return { message: n };
};
let zl = ws;
function Bl() {
  return zl;
}
const Jl = (t) => {
  const { data: e, path: n, errorMaps: r, issueData: s } = t, o = [...n, ...s.path || []], i = {
    ...s,
    path: o
  };
  if (s.message !== void 0)
    return {
      ...s,
      path: o,
      message: s.message
    };
  let a = "";
  const u = r.filter((d) => !!d).slice().reverse();
  for (const d of u)
    a = d(i, { data: e, defaultError: a }).message;
  return {
    ...s,
    path: o,
    message: a
  };
};
function O(t, e) {
  const n = Bl(), r = Jl({
    issueData: e,
    data: t.data,
    path: t.path,
    errorMaps: [
      t.common.contextualErrorMap,
      // contextual error map is first priority
      t.schemaErrorMap,
      // then schema-bound map if available
      n,
      // then global override map
      n === ws ? void 0 : ws
      // then global default map
    ].filter((s) => !!s)
  });
  t.common.issues.push(r);
}
class we {
  constructor() {
    this.value = "valid";
  }
  dirty() {
    this.value === "valid" && (this.value = "dirty");
  }
  abort() {
    this.value !== "aborted" && (this.value = "aborted");
  }
  static mergeArray(e, n) {
    const r = [];
    for (const s of n) {
      if (s.status === "aborted")
        return L;
      s.status === "dirty" && e.dirty(), r.push(s.value);
    }
    return { status: e.value, value: r };
  }
  static async mergeObjectAsync(e, n) {
    const r = [];
    for (const s of n) {
      const o = await s.key, i = await s.value;
      r.push({
        key: o,
        value: i
      });
    }
    return we.mergeObjectSync(e, r);
  }
  static mergeObjectSync(e, n) {
    const r = {};
    for (const s of n) {
      const { key: o, value: i } = s;
      if (o.status === "aborted" || i.status === "aborted")
        return L;
      o.status === "dirty" && e.dirty(), i.status === "dirty" && e.dirty(), o.value !== "__proto__" && (typeof i.value < "u" || s.alwaysSet) && (r[o.value] = i.value);
    }
    return { status: e.value, value: r };
  }
}
const L = Object.freeze({
  status: "aborted"
}), In = (t) => ({ status: "dirty", value: t }), Ee = (t) => ({ status: "valid", value: t }), No = (t) => t.status === "aborted", Do = (t) => t.status === "dirty", gn = (t) => t.status === "valid", vr = (t) => typeof Promise < "u" && t instanceof Promise;
var N;
(function(t) {
  t.errToObj = (e) => typeof e == "string" ? { message: e } : e || {}, t.toString = (e) => typeof e == "string" ? e : e == null ? void 0 : e.message;
})(N || (N = {}));
class Je {
  constructor(e, n, r, s) {
    this._cachedPath = [], this.parent = e, this.data = n, this._path = r, this._key = s;
  }
  get path() {
    return this._cachedPath.length || (Array.isArray(this._key) ? this._cachedPath.push(...this._path, ...this._key) : this._cachedPath.push(...this._path, this._key)), this._cachedPath;
  }
}
const Mo = (t, e) => {
  if (gn(e))
    return { success: !0, data: e.value };
  if (!t.common.issues.length)
    throw new Error("Validation failed but no issues detected.");
  return {
    success: !1,
    get error() {
      if (this._error)
        return this._error;
      const n = new Be(t.common.issues);
      return this._error = n, this._error;
    }
  };
};
function J(t) {
  if (!t)
    return {};
  const { errorMap: e, invalid_type_error: n, required_error: r, description: s } = t;
  if (e && (n || r))
    throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);
  return e ? { errorMap: e, description: s } : { errorMap: (i, a) => {
    const { message: u } = t;
    return i.code === "invalid_enum_value" ? { message: u ?? a.defaultError } : typeof a.data > "u" ? { message: u ?? r ?? a.defaultError } : i.code !== "invalid_type" ? { message: a.defaultError } : { message: u ?? n ?? a.defaultError };
  }, description: s };
}
class H {
  get description() {
    return this._def.description;
  }
  _getType(e) {
    return ut(e.data);
  }
  _getOrReturnCtx(e, n) {
    return n || {
      common: e.parent.common,
      data: e.data,
      parsedType: ut(e.data),
      schemaErrorMap: this._def.errorMap,
      path: e.path,
      parent: e.parent
    };
  }
  _processInputParams(e) {
    return {
      status: new we(),
      ctx: {
        common: e.parent.common,
        data: e.data,
        parsedType: ut(e.data),
        schemaErrorMap: this._def.errorMap,
        path: e.path,
        parent: e.parent
      }
    };
  }
  _parseSync(e) {
    const n = this._parse(e);
    if (vr(n))
      throw new Error("Synchronous parse encountered promise.");
    return n;
  }
  _parseAsync(e) {
    const n = this._parse(e);
    return Promise.resolve(n);
  }
  parse(e, n) {
    const r = this.safeParse(e, n);
    if (r.success)
      return r.data;
    throw r.error;
  }
  safeParse(e, n) {
    const r = {
      common: {
        issues: [],
        async: (n == null ? void 0 : n.async) ?? !1,
        contextualErrorMap: n == null ? void 0 : n.errorMap
      },
      path: (n == null ? void 0 : n.path) || [],
      schemaErrorMap: this._def.errorMap,
      parent: null,
      data: e,
      parsedType: ut(e)
    }, s = this._parseSync({ data: e, path: r.path, parent: r });
    return Mo(r, s);
  }
  "~validate"(e) {
    var r, s;
    const n = {
      common: {
        issues: [],
        async: !!this["~standard"].async
      },
      path: [],
      schemaErrorMap: this._def.errorMap,
      parent: null,
      data: e,
      parsedType: ut(e)
    };
    if (!this["~standard"].async)
      try {
        const o = this._parseSync({ data: e, path: [], parent: n });
        return gn(o) ? {
          value: o.value
        } : {
          issues: n.common.issues
        };
      } catch (o) {
        (s = (r = o == null ? void 0 : o.message) == null ? void 0 : r.toLowerCase()) != null && s.includes("encountered") && (this["~standard"].async = !0), n.common = {
          issues: [],
          async: !0
        };
      }
    return this._parseAsync({ data: e, path: [], parent: n }).then((o) => gn(o) ? {
      value: o.value
    } : {
      issues: n.common.issues
    });
  }
  async parseAsync(e, n) {
    const r = await this.safeParseAsync(e, n);
    if (r.success)
      return r.data;
    throw r.error;
  }
  async safeParseAsync(e, n) {
    const r = {
      common: {
        issues: [],
        contextualErrorMap: n == null ? void 0 : n.errorMap,
        async: !0
      },
      path: (n == null ? void 0 : n.path) || [],
      schemaErrorMap: this._def.errorMap,
      parent: null,
      data: e,
      parsedType: ut(e)
    }, s = this._parse({ data: e, path: r.path, parent: r }), o = await (vr(s) ? s : Promise.resolve(s));
    return Mo(r, o);
  }
  refine(e, n) {
    const r = (s) => typeof n == "string" || typeof n > "u" ? { message: n } : typeof n == "function" ? n(s) : n;
    return this._refinement((s, o) => {
      const i = e(s), a = () => o.addIssue({
        code: A.custom,
        ...r(s)
      });
      return typeof Promise < "u" && i instanceof Promise ? i.then((u) => u ? !0 : (a(), !1)) : i ? !0 : (a(), !1);
    });
  }
  refinement(e, n) {
    return this._refinement((r, s) => e(r) ? !0 : (s.addIssue(typeof n == "function" ? n(r, s) : n), !1));
  }
  _refinement(e) {
    return new zt({
      schema: this,
      typeName: Z.ZodEffects,
      effect: { type: "refinement", refinement: e }
    });
  }
  superRefine(e) {
    return this._refinement(e);
  }
  constructor(e) {
    this.spa = this.safeParseAsync, this._def = e, this.parse = this.parse.bind(this), this.safeParse = this.safeParse.bind(this), this.parseAsync = this.parseAsync.bind(this), this.safeParseAsync = this.safeParseAsync.bind(this), this.spa = this.spa.bind(this), this.refine = this.refine.bind(this), this.refinement = this.refinement.bind(this), this.superRefine = this.superRefine.bind(this), this.optional = this.optional.bind(this), this.nullable = this.nullable.bind(this), this.nullish = this.nullish.bind(this), this.array = this.array.bind(this), this.promise = this.promise.bind(this), this.or = this.or.bind(this), this.and = this.and.bind(this), this.transform = this.transform.bind(this), this.brand = this.brand.bind(this), this.default = this.default.bind(this), this.catch = this.catch.bind(this), this.describe = this.describe.bind(this), this.pipe = this.pipe.bind(this), this.readonly = this.readonly.bind(this), this.isNullable = this.isNullable.bind(this), this.isOptional = this.isOptional.bind(this), this["~standard"] = {
      version: 1,
      vendor: "zod",
      validate: (n) => this["~validate"](n)
    };
  }
  optional() {
    return rt.create(this, this._def);
  }
  nullable() {
    return Bt.create(this, this._def);
  }
  nullish() {
    return this.nullable().optional();
  }
  array() {
    return Ue.create(this);
  }
  promise() {
    return Ar.create(this, this._def);
  }
  or(e) {
    return br.create([this, e], this._def);
  }
  and(e) {
    return Ir.create(this, e, this._def);
  }
  transform(e) {
    return new zt({
      ...J(this._def),
      schema: this,
      typeName: Z.ZodEffects,
      effect: { type: "transform", transform: e }
    });
  }
  default(e) {
    const n = typeof e == "function" ? e : () => e;
    return new kr({
      ...J(this._def),
      innerType: this,
      defaultValue: n,
      typeName: Z.ZodDefault
    });
  }
  brand() {
    return new Vi({
      typeName: Z.ZodBranded,
      type: this,
      ...J(this._def)
    });
  }
  catch(e) {
    const n = typeof e == "function" ? e : () => e;
    return new Cr({
      ...J(this._def),
      innerType: this,
      catchValue: n,
      typeName: Z.ZodCatch
    });
  }
  describe(e) {
    const n = this.constructor;
    return new n({
      ...this._def,
      description: e
    });
  }
  pipe(e) {
    return Gs.create(this, e);
  }
  readonly() {
    return Or.create(this);
  }
  isOptional() {
    return this.safeParse(void 0).success;
  }
  isNullable() {
    return this.safeParse(null).success;
  }
}
const Gl = /^c[^\s-]{8,}$/i, ql = /^[0-9a-z]+$/, Vl = /^[0-9A-HJKMNP-TV-Z]{26}$/i, Wl = /^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i, Hl = /^[a-z0-9_-]{21}$/i, Kl = /^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/, Yl = /^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/, Xl = /^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i, Ql = "^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";
let Yr;
const ed = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/, td = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/, nd = /^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/, rd = /^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/, sd = /^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/, od = /^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/, Ji = "((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))", id = new RegExp(`^${Ji}$`);
function Gi(t) {
  let e = "[0-5]\\d";
  t.precision ? e = `${e}\\.\\d{${t.precision}}` : t.precision == null && (e = `${e}(\\.\\d+)?`);
  const n = t.precision ? "+" : "?";
  return `([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`;
}
function ad(t) {
  return new RegExp(`^${Gi(t)}$`);
}
function ud(t) {
  let e = `${Ji}T${Gi(t)}`;
  const n = [];
  return n.push(t.local ? "Z?" : "Z"), t.offset && n.push("([+-]\\d{2}:?\\d{2})"), e = `${e}(${n.join("|")})`, new RegExp(`^${e}$`);
}
function cd(t, e) {
  return !!((e === "v4" || !e) && ed.test(t) || (e === "v6" || !e) && nd.test(t));
}
function ld(t, e) {
  if (!Kl.test(t))
    return !1;
  try {
    const [n] = t.split(".");
    if (!n)
      return !1;
    const r = n.replace(/-/g, "+").replace(/_/g, "/").padEnd(n.length + (4 - n.length % 4) % 4, "="), s = JSON.parse(atob(r));
    return !(typeof s != "object" || s === null || "typ" in s && (s == null ? void 0 : s.typ) !== "JWT" || !s.alg || e && s.alg !== e);
  } catch {
    return !1;
  }
}
function dd(t, e) {
  return !!((e === "v4" || !e) && td.test(t) || (e === "v6" || !e) && rd.test(t));
}
class nt extends H {
  _parse(e) {
    if (this._def.coerce && (e.data = String(e.data)), this._getType(e) !== R.string) {
      const o = this._getOrReturnCtx(e);
      return O(o, {
        code: A.invalid_type,
        expected: R.string,
        received: o.parsedType
      }), L;
    }
    const r = new we();
    let s;
    for (const o of this._def.checks)
      if (o.kind === "min")
        e.data.length < o.value && (s = this._getOrReturnCtx(e, s), O(s, {
          code: A.too_small,
          minimum: o.value,
          type: "string",
          inclusive: !0,
          exact: !1,
          message: o.message
        }), r.dirty());
      else if (o.kind === "max")
        e.data.length > o.value && (s = this._getOrReturnCtx(e, s), O(s, {
          code: A.too_big,
          maximum: o.value,
          type: "string",
          inclusive: !0,
          exact: !1,
          message: o.message
        }), r.dirty());
      else if (o.kind === "length") {
        const i = e.data.length > o.value, a = e.data.length < o.value;
        (i || a) && (s = this._getOrReturnCtx(e, s), i ? O(s, {
          code: A.too_big,
          maximum: o.value,
          type: "string",
          inclusive: !0,
          exact: !0,
          message: o.message
        }) : a && O(s, {
          code: A.too_small,
          minimum: o.value,
          type: "string",
          inclusive: !0,
          exact: !0,
          message: o.message
        }), r.dirty());
      } else if (o.kind === "email")
        Xl.test(e.data) || (s = this._getOrReturnCtx(e, s), O(s, {
          validation: "email",
          code: A.invalid_string,
          message: o.message
        }), r.dirty());
      else if (o.kind === "emoji")
        Yr || (Yr = new RegExp(Ql, "u")), Yr.test(e.data) || (s = this._getOrReturnCtx(e, s), O(s, {
          validation: "emoji",
          code: A.invalid_string,
          message: o.message
        }), r.dirty());
      else if (o.kind === "uuid")
        Wl.test(e.data) || (s = this._getOrReturnCtx(e, s), O(s, {
          validation: "uuid",
          code: A.invalid_string,
          message: o.message
        }), r.dirty());
      else if (o.kind === "nanoid")
        Hl.test(e.data) || (s = this._getOrReturnCtx(e, s), O(s, {
          validation: "nanoid",
          code: A.invalid_string,
          message: o.message
        }), r.dirty());
      else if (o.kind === "cuid")
        Gl.test(e.data) || (s = this._getOrReturnCtx(e, s), O(s, {
          validation: "cuid",
          code: A.invalid_string,
          message: o.message
        }), r.dirty());
      else if (o.kind === "cuid2")
        ql.test(e.data) || (s = this._getOrReturnCtx(e, s), O(s, {
          validation: "cuid2",
          code: A.invalid_string,
          message: o.message
        }), r.dirty());
      else if (o.kind === "ulid")
        Vl.test(e.data) || (s = this._getOrReturnCtx(e, s), O(s, {
          validation: "ulid",
          code: A.invalid_string,
          message: o.message
        }), r.dirty());
      else if (o.kind === "url")
        try {
          new URL(e.data);
        } catch {
          s = this._getOrReturnCtx(e, s), O(s, {
            validation: "url",
            code: A.invalid_string,
            message: o.message
          }), r.dirty();
        }
      else o.kind === "regex" ? (o.regex.lastIndex = 0, o.regex.test(e.data) || (s = this._getOrReturnCtx(e, s), O(s, {
        validation: "regex",
        code: A.invalid_string,
        message: o.message
      }), r.dirty())) : o.kind === "trim" ? e.data = e.data.trim() : o.kind === "includes" ? e.data.includes(o.value, o.position) || (s = this._getOrReturnCtx(e, s), O(s, {
        code: A.invalid_string,
        validation: { includes: o.value, position: o.position },
        message: o.message
      }), r.dirty()) : o.kind === "toLowerCase" ? e.data = e.data.toLowerCase() : o.kind === "toUpperCase" ? e.data = e.data.toUpperCase() : o.kind === "startsWith" ? e.data.startsWith(o.value) || (s = this._getOrReturnCtx(e, s), O(s, {
        code: A.invalid_string,
        validation: { startsWith: o.value },
        message: o.message
      }), r.dirty()) : o.kind === "endsWith" ? e.data.endsWith(o.value) || (s = this._getOrReturnCtx(e, s), O(s, {
        code: A.invalid_string,
        validation: { endsWith: o.value },
        message: o.message
      }), r.dirty()) : o.kind === "datetime" ? ud(o).test(e.data) || (s = this._getOrReturnCtx(e, s), O(s, {
        code: A.invalid_string,
        validation: "datetime",
        message: o.message
      }), r.dirty()) : o.kind === "date" ? id.test(e.data) || (s = this._getOrReturnCtx(e, s), O(s, {
        code: A.invalid_string,
        validation: "date",
        message: o.message
      }), r.dirty()) : o.kind === "time" ? ad(o).test(e.data) || (s = this._getOrReturnCtx(e, s), O(s, {
        code: A.invalid_string,
        validation: "time",
        message: o.message
      }), r.dirty()) : o.kind === "duration" ? Yl.test(e.data) || (s = this._getOrReturnCtx(e, s), O(s, {
        validation: "duration",
        code: A.invalid_string,
        message: o.message
      }), r.dirty()) : o.kind === "ip" ? cd(e.data, o.version) || (s = this._getOrReturnCtx(e, s), O(s, {
        validation: "ip",
        code: A.invalid_string,
        message: o.message
      }), r.dirty()) : o.kind === "jwt" ? ld(e.data, o.alg) || (s = this._getOrReturnCtx(e, s), O(s, {
        validation: "jwt",
        code: A.invalid_string,
        message: o.message
      }), r.dirty()) : o.kind === "cidr" ? dd(e.data, o.version) || (s = this._getOrReturnCtx(e, s), O(s, {
        validation: "cidr",
        code: A.invalid_string,
        message: o.message
      }), r.dirty()) : o.kind === "base64" ? sd.test(e.data) || (s = this._getOrReturnCtx(e, s), O(s, {
        validation: "base64",
        code: A.invalid_string,
        message: o.message
      }), r.dirty()) : o.kind === "base64url" ? od.test(e.data) || (s = this._getOrReturnCtx(e, s), O(s, {
        validation: "base64url",
        code: A.invalid_string,
        message: o.message
      }), r.dirty()) : K.assertNever(o);
    return { status: r.value, value: e.data };
  }
  _regex(e, n, r) {
    return this.refinement((s) => e.test(s), {
      validation: n,
      code: A.invalid_string,
      ...N.errToObj(r)
    });
  }
  _addCheck(e) {
    return new nt({
      ...this._def,
      checks: [...this._def.checks, e]
    });
  }
  email(e) {
    return this._addCheck({ kind: "email", ...N.errToObj(e) });
  }
  url(e) {
    return this._addCheck({ kind: "url", ...N.errToObj(e) });
  }
  emoji(e) {
    return this._addCheck({ kind: "emoji", ...N.errToObj(e) });
  }
  uuid(e) {
    return this._addCheck({ kind: "uuid", ...N.errToObj(e) });
  }
  nanoid(e) {
    return this._addCheck({ kind: "nanoid", ...N.errToObj(e) });
  }
  cuid(e) {
    return this._addCheck({ kind: "cuid", ...N.errToObj(e) });
  }
  cuid2(e) {
    return this._addCheck({ kind: "cuid2", ...N.errToObj(e) });
  }
  ulid(e) {
    return this._addCheck({ kind: "ulid", ...N.errToObj(e) });
  }
  base64(e) {
    return this._addCheck({ kind: "base64", ...N.errToObj(e) });
  }
  base64url(e) {
    return this._addCheck({
      kind: "base64url",
      ...N.errToObj(e)
    });
  }
  jwt(e) {
    return this._addCheck({ kind: "jwt", ...N.errToObj(e) });
  }
  ip(e) {
    return this._addCheck({ kind: "ip", ...N.errToObj(e) });
  }
  cidr(e) {
    return this._addCheck({ kind: "cidr", ...N.errToObj(e) });
  }
  datetime(e) {
    return typeof e == "string" ? this._addCheck({
      kind: "datetime",
      precision: null,
      offset: !1,
      local: !1,
      message: e
    }) : this._addCheck({
      kind: "datetime",
      precision: typeof (e == null ? void 0 : e.precision) > "u" ? null : e == null ? void 0 : e.precision,
      offset: (e == null ? void 0 : e.offset) ?? !1,
      local: (e == null ? void 0 : e.local) ?? !1,
      ...N.errToObj(e == null ? void 0 : e.message)
    });
  }
  date(e) {
    return this._addCheck({ kind: "date", message: e });
  }
  time(e) {
    return typeof e == "string" ? this._addCheck({
      kind: "time",
      precision: null,
      message: e
    }) : this._addCheck({
      kind: "time",
      precision: typeof (e == null ? void 0 : e.precision) > "u" ? null : e == null ? void 0 : e.precision,
      ...N.errToObj(e == null ? void 0 : e.message)
    });
  }
  duration(e) {
    return this._addCheck({ kind: "duration", ...N.errToObj(e) });
  }
  regex(e, n) {
    return this._addCheck({
      kind: "regex",
      regex: e,
      ...N.errToObj(n)
    });
  }
  includes(e, n) {
    return this._addCheck({
      kind: "includes",
      value: e,
      position: n == null ? void 0 : n.position,
      ...N.errToObj(n == null ? void 0 : n.message)
    });
  }
  startsWith(e, n) {
    return this._addCheck({
      kind: "startsWith",
      value: e,
      ...N.errToObj(n)
    });
  }
  endsWith(e, n) {
    return this._addCheck({
      kind: "endsWith",
      value: e,
      ...N.errToObj(n)
    });
  }
  min(e, n) {
    return this._addCheck({
      kind: "min",
      value: e,
      ...N.errToObj(n)
    });
  }
  max(e, n) {
    return this._addCheck({
      kind: "max",
      value: e,
      ...N.errToObj(n)
    });
  }
  length(e, n) {
    return this._addCheck({
      kind: "length",
      value: e,
      ...N.errToObj(n)
    });
  }
  /**
   * Equivalent to `.min(1)`
   */
  nonempty(e) {
    return this.min(1, N.errToObj(e));
  }
  trim() {
    return new nt({
      ...this._def,
      checks: [...this._def.checks, { kind: "trim" }]
    });
  }
  toLowerCase() {
    return new nt({
      ...this._def,
      checks: [...this._def.checks, { kind: "toLowerCase" }]
    });
  }
  toUpperCase() {
    return new nt({
      ...this._def,
      checks: [...this._def.checks, { kind: "toUpperCase" }]
    });
  }
  get isDatetime() {
    return !!this._def.checks.find((e) => e.kind === "datetime");
  }
  get isDate() {
    return !!this._def.checks.find((e) => e.kind === "date");
  }
  get isTime() {
    return !!this._def.checks.find((e) => e.kind === "time");
  }
  get isDuration() {
    return !!this._def.checks.find((e) => e.kind === "duration");
  }
  get isEmail() {
    return !!this._def.checks.find((e) => e.kind === "email");
  }
  get isURL() {
    return !!this._def.checks.find((e) => e.kind === "url");
  }
  get isEmoji() {
    return !!this._def.checks.find((e) => e.kind === "emoji");
  }
  get isUUID() {
    return !!this._def.checks.find((e) => e.kind === "uuid");
  }
  get isNANOID() {
    return !!this._def.checks.find((e) => e.kind === "nanoid");
  }
  get isCUID() {
    return !!this._def.checks.find((e) => e.kind === "cuid");
  }
  get isCUID2() {
    return !!this._def.checks.find((e) => e.kind === "cuid2");
  }
  get isULID() {
    return !!this._def.checks.find((e) => e.kind === "ulid");
  }
  get isIP() {
    return !!this._def.checks.find((e) => e.kind === "ip");
  }
  get isCIDR() {
    return !!this._def.checks.find((e) => e.kind === "cidr");
  }
  get isBase64() {
    return !!this._def.checks.find((e) => e.kind === "base64");
  }
  get isBase64url() {
    return !!this._def.checks.find((e) => e.kind === "base64url");
  }
  get minLength() {
    let e = null;
    for (const n of this._def.checks)
      n.kind === "min" && (e === null || n.value > e) && (e = n.value);
    return e;
  }
  get maxLength() {
    let e = null;
    for (const n of this._def.checks)
      n.kind === "max" && (e === null || n.value < e) && (e = n.value);
    return e;
  }
}
nt.create = (t) => new nt({
  checks: [],
  typeName: Z.ZodString,
  coerce: (t == null ? void 0 : t.coerce) ?? !1,
  ...J(t)
});
function pd(t, e) {
  const n = (t.toString().split(".")[1] || "").length, r = (e.toString().split(".")[1] || "").length, s = n > r ? n : r, o = Number.parseInt(t.toFixed(s).replace(".", "")), i = Number.parseInt(e.toFixed(s).replace(".", ""));
  return o % i / 10 ** s;
}
class yn extends H {
  constructor() {
    super(...arguments), this.min = this.gte, this.max = this.lte, this.step = this.multipleOf;
  }
  _parse(e) {
    if (this._def.coerce && (e.data = Number(e.data)), this._getType(e) !== R.number) {
      const o = this._getOrReturnCtx(e);
      return O(o, {
        code: A.invalid_type,
        expected: R.number,
        received: o.parsedType
      }), L;
    }
    let r;
    const s = new we();
    for (const o of this._def.checks)
      o.kind === "int" ? K.isInteger(e.data) || (r = this._getOrReturnCtx(e, r), O(r, {
        code: A.invalid_type,
        expected: "integer",
        received: "float",
        message: o.message
      }), s.dirty()) : o.kind === "min" ? (o.inclusive ? e.data < o.value : e.data <= o.value) && (r = this._getOrReturnCtx(e, r), O(r, {
        code: A.too_small,
        minimum: o.value,
        type: "number",
        inclusive: o.inclusive,
        exact: !1,
        message: o.message
      }), s.dirty()) : o.kind === "max" ? (o.inclusive ? e.data > o.value : e.data >= o.value) && (r = this._getOrReturnCtx(e, r), O(r, {
        code: A.too_big,
        maximum: o.value,
        type: "number",
        inclusive: o.inclusive,
        exact: !1,
        message: o.message
      }), s.dirty()) : o.kind === "multipleOf" ? pd(e.data, o.value) !== 0 && (r = this._getOrReturnCtx(e, r), O(r, {
        code: A.not_multiple_of,
        multipleOf: o.value,
        message: o.message
      }), s.dirty()) : o.kind === "finite" ? Number.isFinite(e.data) || (r = this._getOrReturnCtx(e, r), O(r, {
        code: A.not_finite,
        message: o.message
      }), s.dirty()) : K.assertNever(o);
    return { status: s.value, value: e.data };
  }
  gte(e, n) {
    return this.setLimit("min", e, !0, N.toString(n));
  }
  gt(e, n) {
    return this.setLimit("min", e, !1, N.toString(n));
  }
  lte(e, n) {
    return this.setLimit("max", e, !0, N.toString(n));
  }
  lt(e, n) {
    return this.setLimit("max", e, !1, N.toString(n));
  }
  setLimit(e, n, r, s) {
    return new yn({
      ...this._def,
      checks: [
        ...this._def.checks,
        {
          kind: e,
          value: n,
          inclusive: r,
          message: N.toString(s)
        }
      ]
    });
  }
  _addCheck(e) {
    return new yn({
      ...this._def,
      checks: [...this._def.checks, e]
    });
  }
  int(e) {
    return this._addCheck({
      kind: "int",
      message: N.toString(e)
    });
  }
  positive(e) {
    return this._addCheck({
      kind: "min",
      value: 0,
      inclusive: !1,
      message: N.toString(e)
    });
  }
  negative(e) {
    return this._addCheck({
      kind: "max",
      value: 0,
      inclusive: !1,
      message: N.toString(e)
    });
  }
  nonpositive(e) {
    return this._addCheck({
      kind: "max",
      value: 0,
      inclusive: !0,
      message: N.toString(e)
    });
  }
  nonnegative(e) {
    return this._addCheck({
      kind: "min",
      value: 0,
      inclusive: !0,
      message: N.toString(e)
    });
  }
  multipleOf(e, n) {
    return this._addCheck({
      kind: "multipleOf",
      value: e,
      message: N.toString(n)
    });
  }
  finite(e) {
    return this._addCheck({
      kind: "finite",
      message: N.toString(e)
    });
  }
  safe(e) {
    return this._addCheck({
      kind: "min",
      inclusive: !0,
      value: Number.MIN_SAFE_INTEGER,
      message: N.toString(e)
    })._addCheck({
      kind: "max",
      inclusive: !0,
      value: Number.MAX_SAFE_INTEGER,
      message: N.toString(e)
    });
  }
  get minValue() {
    let e = null;
    for (const n of this._def.checks)
      n.kind === "min" && (e === null || n.value > e) && (e = n.value);
    return e;
  }
  get maxValue() {
    let e = null;
    for (const n of this._def.checks)
      n.kind === "max" && (e === null || n.value < e) && (e = n.value);
    return e;
  }
  get isInt() {
    return !!this._def.checks.find((e) => e.kind === "int" || e.kind === "multipleOf" && K.isInteger(e.value));
  }
  get isFinite() {
    let e = null, n = null;
    for (const r of this._def.checks) {
      if (r.kind === "finite" || r.kind === "int" || r.kind === "multipleOf")
        return !0;
      r.kind === "min" ? (n === null || r.value > n) && (n = r.value) : r.kind === "max" && (e === null || r.value < e) && (e = r.value);
    }
    return Number.isFinite(n) && Number.isFinite(e);
  }
}
yn.create = (t) => new yn({
  checks: [],
  typeName: Z.ZodNumber,
  coerce: (t == null ? void 0 : t.coerce) || !1,
  ...J(t)
});
class Cn extends H {
  constructor() {
    super(...arguments), this.min = this.gte, this.max = this.lte;
  }
  _parse(e) {
    if (this._def.coerce)
      try {
        e.data = BigInt(e.data);
      } catch {
        return this._getInvalidInput(e);
      }
    if (this._getType(e) !== R.bigint)
      return this._getInvalidInput(e);
    let r;
    const s = new we();
    for (const o of this._def.checks)
      o.kind === "min" ? (o.inclusive ? e.data < o.value : e.data <= o.value) && (r = this._getOrReturnCtx(e, r), O(r, {
        code: A.too_small,
        type: "bigint",
        minimum: o.value,
        inclusive: o.inclusive,
        message: o.message
      }), s.dirty()) : o.kind === "max" ? (o.inclusive ? e.data > o.value : e.data >= o.value) && (r = this._getOrReturnCtx(e, r), O(r, {
        code: A.too_big,
        type: "bigint",
        maximum: o.value,
        inclusive: o.inclusive,
        message: o.message
      }), s.dirty()) : o.kind === "multipleOf" ? e.data % o.value !== BigInt(0) && (r = this._getOrReturnCtx(e, r), O(r, {
        code: A.not_multiple_of,
        multipleOf: o.value,
        message: o.message
      }), s.dirty()) : K.assertNever(o);
    return { status: s.value, value: e.data };
  }
  _getInvalidInput(e) {
    const n = this._getOrReturnCtx(e);
    return O(n, {
      code: A.invalid_type,
      expected: R.bigint,
      received: n.parsedType
    }), L;
  }
  gte(e, n) {
    return this.setLimit("min", e, !0, N.toString(n));
  }
  gt(e, n) {
    return this.setLimit("min", e, !1, N.toString(n));
  }
  lte(e, n) {
    return this.setLimit("max", e, !0, N.toString(n));
  }
  lt(e, n) {
    return this.setLimit("max", e, !1, N.toString(n));
  }
  setLimit(e, n, r, s) {
    return new Cn({
      ...this._def,
      checks: [
        ...this._def.checks,
        {
          kind: e,
          value: n,
          inclusive: r,
          message: N.toString(s)
        }
      ]
    });
  }
  _addCheck(e) {
    return new Cn({
      ...this._def,
      checks: [...this._def.checks, e]
    });
  }
  positive(e) {
    return this._addCheck({
      kind: "min",
      value: BigInt(0),
      inclusive: !1,
      message: N.toString(e)
    });
  }
  negative(e) {
    return this._addCheck({
      kind: "max",
      value: BigInt(0),
      inclusive: !1,
      message: N.toString(e)
    });
  }
  nonpositive(e) {
    return this._addCheck({
      kind: "max",
      value: BigInt(0),
      inclusive: !0,
      message: N.toString(e)
    });
  }
  nonnegative(e) {
    return this._addCheck({
      kind: "min",
      value: BigInt(0),
      inclusive: !0,
      message: N.toString(e)
    });
  }
  multipleOf(e, n) {
    return this._addCheck({
      kind: "multipleOf",
      value: e,
      message: N.toString(n)
    });
  }
  get minValue() {
    let e = null;
    for (const n of this._def.checks)
      n.kind === "min" && (e === null || n.value > e) && (e = n.value);
    return e;
  }
  get maxValue() {
    let e = null;
    for (const n of this._def.checks)
      n.kind === "max" && (e === null || n.value < e) && (e = n.value);
    return e;
  }
}
Cn.create = (t) => new Cn({
  checks: [],
  typeName: Z.ZodBigInt,
  coerce: (t == null ? void 0 : t.coerce) ?? !1,
  ...J(t)
});
class bs extends H {
  _parse(e) {
    if (this._def.coerce && (e.data = !!e.data), this._getType(e) !== R.boolean) {
      const r = this._getOrReturnCtx(e);
      return O(r, {
        code: A.invalid_type,
        expected: R.boolean,
        received: r.parsedType
      }), L;
    }
    return Ee(e.data);
  }
}
bs.create = (t) => new bs({
  typeName: Z.ZodBoolean,
  coerce: (t == null ? void 0 : t.coerce) || !1,
  ...J(t)
});
class wr extends H {
  _parse(e) {
    if (this._def.coerce && (e.data = new Date(e.data)), this._getType(e) !== R.date) {
      const o = this._getOrReturnCtx(e);
      return O(o, {
        code: A.invalid_type,
        expected: R.date,
        received: o.parsedType
      }), L;
    }
    if (Number.isNaN(e.data.getTime())) {
      const o = this._getOrReturnCtx(e);
      return O(o, {
        code: A.invalid_date
      }), L;
    }
    const r = new we();
    let s;
    for (const o of this._def.checks)
      o.kind === "min" ? e.data.getTime() < o.value && (s = this._getOrReturnCtx(e, s), O(s, {
        code: A.too_small,
        message: o.message,
        inclusive: !0,
        exact: !1,
        minimum: o.value,
        type: "date"
      }), r.dirty()) : o.kind === "max" ? e.data.getTime() > o.value && (s = this._getOrReturnCtx(e, s), O(s, {
        code: A.too_big,
        message: o.message,
        inclusive: !0,
        exact: !1,
        maximum: o.value,
        type: "date"
      }), r.dirty()) : K.assertNever(o);
    return {
      status: r.value,
      value: new Date(e.data.getTime())
    };
  }
  _addCheck(e) {
    return new wr({
      ...this._def,
      checks: [...this._def.checks, e]
    });
  }
  min(e, n) {
    return this._addCheck({
      kind: "min",
      value: e.getTime(),
      message: N.toString(n)
    });
  }
  max(e, n) {
    return this._addCheck({
      kind: "max",
      value: e.getTime(),
      message: N.toString(n)
    });
  }
  get minDate() {
    let e = null;
    for (const n of this._def.checks)
      n.kind === "min" && (e === null || n.value > e) && (e = n.value);
    return e != null ? new Date(e) : null;
  }
  get maxDate() {
    let e = null;
    for (const n of this._def.checks)
      n.kind === "max" && (e === null || n.value < e) && (e = n.value);
    return e != null ? new Date(e) : null;
  }
}
wr.create = (t) => new wr({
  checks: [],
  coerce: (t == null ? void 0 : t.coerce) || !1,
  typeName: Z.ZodDate,
  ...J(t)
});
class jo extends H {
  _parse(e) {
    if (this._getType(e) !== R.symbol) {
      const r = this._getOrReturnCtx(e);
      return O(r, {
        code: A.invalid_type,
        expected: R.symbol,
        received: r.parsedType
      }), L;
    }
    return Ee(e.data);
  }
}
jo.create = (t) => new jo({
  typeName: Z.ZodSymbol,
  ...J(t)
});
class Is extends H {
  _parse(e) {
    if (this._getType(e) !== R.undefined) {
      const r = this._getOrReturnCtx(e);
      return O(r, {
        code: A.invalid_type,
        expected: R.undefined,
        received: r.parsedType
      }), L;
    }
    return Ee(e.data);
  }
}
Is.create = (t) => new Is({
  typeName: Z.ZodUndefined,
  ...J(t)
});
class Ss extends H {
  _parse(e) {
    if (this._getType(e) !== R.null) {
      const r = this._getOrReturnCtx(e);
      return O(r, {
        code: A.invalid_type,
        expected: R.null,
        received: r.parsedType
      }), L;
    }
    return Ee(e.data);
  }
}
Ss.create = (t) => new Ss({
  typeName: Z.ZodNull,
  ...J(t)
});
class On extends H {
  constructor() {
    super(...arguments), this._any = !0;
  }
  _parse(e) {
    return Ee(e.data);
  }
}
On.create = (t) => new On({
  typeName: Z.ZodAny,
  ...J(t)
});
class $o extends H {
  constructor() {
    super(...arguments), this._unknown = !0;
  }
  _parse(e) {
    return Ee(e.data);
  }
}
$o.create = (t) => new $o({
  typeName: Z.ZodUnknown,
  ...J(t)
});
class wt extends H {
  _parse(e) {
    const n = this._getOrReturnCtx(e);
    return O(n, {
      code: A.invalid_type,
      expected: R.never,
      received: n.parsedType
    }), L;
  }
}
wt.create = (t) => new wt({
  typeName: Z.ZodNever,
  ...J(t)
});
class Fo extends H {
  _parse(e) {
    if (this._getType(e) !== R.undefined) {
      const r = this._getOrReturnCtx(e);
      return O(r, {
        code: A.invalid_type,
        expected: R.void,
        received: r.parsedType
      }), L;
    }
    return Ee(e.data);
  }
}
Fo.create = (t) => new Fo({
  typeName: Z.ZodVoid,
  ...J(t)
});
class Ue extends H {
  _parse(e) {
    const { ctx: n, status: r } = this._processInputParams(e), s = this._def;
    if (n.parsedType !== R.array)
      return O(n, {
        code: A.invalid_type,
        expected: R.array,
        received: n.parsedType
      }), L;
    if (s.exactLength !== null) {
      const i = n.data.length > s.exactLength.value, a = n.data.length < s.exactLength.value;
      (i || a) && (O(n, {
        code: i ? A.too_big : A.too_small,
        minimum: a ? s.exactLength.value : void 0,
        maximum: i ? s.exactLength.value : void 0,
        type: "array",
        inclusive: !0,
        exact: !0,
        message: s.exactLength.message
      }), r.dirty());
    }
    if (s.minLength !== null && n.data.length < s.minLength.value && (O(n, {
      code: A.too_small,
      minimum: s.minLength.value,
      type: "array",
      inclusive: !0,
      exact: !1,
      message: s.minLength.message
    }), r.dirty()), s.maxLength !== null && n.data.length > s.maxLength.value && (O(n, {
      code: A.too_big,
      maximum: s.maxLength.value,
      type: "array",
      inclusive: !0,
      exact: !1,
      message: s.maxLength.message
    }), r.dirty()), n.common.async)
      return Promise.all([...n.data].map((i, a) => s.type._parseAsync(new Je(n, i, n.path, a)))).then((i) => we.mergeArray(r, i));
    const o = [...n.data].map((i, a) => s.type._parseSync(new Je(n, i, n.path, a)));
    return we.mergeArray(r, o);
  }
  get element() {
    return this._def.type;
  }
  min(e, n) {
    return new Ue({
      ...this._def,
      minLength: { value: e, message: N.toString(n) }
    });
  }
  max(e, n) {
    return new Ue({
      ...this._def,
      maxLength: { value: e, message: N.toString(n) }
    });
  }
  length(e, n) {
    return new Ue({
      ...this._def,
      exactLength: { value: e, message: N.toString(n) }
    });
  }
  nonempty(e) {
    return this.min(1, e);
  }
}
Ue.create = (t, e) => new Ue({
  type: t,
  minLength: null,
  maxLength: null,
  exactLength: null,
  typeName: Z.ZodArray,
  ...J(e)
});
function Ht(t) {
  if (t instanceof ce) {
    const e = {};
    for (const n in t.shape) {
      const r = t.shape[n];
      e[n] = rt.create(Ht(r));
    }
    return new ce({
      ...t._def,
      shape: () => e
    });
  } else return t instanceof Ue ? new Ue({
    ...t._def,
    type: Ht(t.element)
  }) : t instanceof rt ? rt.create(Ht(t.unwrap())) : t instanceof Bt ? Bt.create(Ht(t.unwrap())) : t instanceof Zt ? Zt.create(t.items.map((e) => Ht(e))) : t;
}
class ce extends H {
  constructor() {
    super(...arguments), this._cached = null, this.nonstrict = this.passthrough, this.augment = this.extend;
  }
  _getCached() {
    if (this._cached !== null)
      return this._cached;
    const e = this._def.shape(), n = K.objectKeys(e);
    return this._cached = { shape: e, keys: n }, this._cached;
  }
  _parse(e) {
    if (this._getType(e) !== R.object) {
      const d = this._getOrReturnCtx(e);
      return O(d, {
        code: A.invalid_type,
        expected: R.object,
        received: d.parsedType
      }), L;
    }
    const { status: r, ctx: s } = this._processInputParams(e), { shape: o, keys: i } = this._getCached(), a = [];
    if (!(this._def.catchall instanceof wt && this._def.unknownKeys === "strip"))
      for (const d in s.data)
        i.includes(d) || a.push(d);
    const u = [];
    for (const d of i) {
      const l = o[d], c = s.data[d];
      u.push({
        key: { status: "valid", value: d },
        value: l._parse(new Je(s, c, s.path, d)),
        alwaysSet: d in s.data
      });
    }
    if (this._def.catchall instanceof wt) {
      const d = this._def.unknownKeys;
      if (d === "passthrough")
        for (const l of a)
          u.push({
            key: { status: "valid", value: l },
            value: { status: "valid", value: s.data[l] }
          });
      else if (d === "strict")
        a.length > 0 && (O(s, {
          code: A.unrecognized_keys,
          keys: a
        }), r.dirty());
      else if (d !== "strip") throw new Error("Internal ZodObject error: invalid unknownKeys value.");
    } else {
      const d = this._def.catchall;
      for (const l of a) {
        const c = s.data[l];
        u.push({
          key: { status: "valid", value: l },
          value: d._parse(
            new Je(s, c, s.path, l)
            //, ctx.child(key), value, getParsedType(value)
          ),
          alwaysSet: l in s.data
        });
      }
    }
    return s.common.async ? Promise.resolve().then(async () => {
      const d = [];
      for (const l of u) {
        const c = await l.key, h = await l.value;
        d.push({
          key: c,
          value: h,
          alwaysSet: l.alwaysSet
        });
      }
      return d;
    }).then((d) => we.mergeObjectSync(r, d)) : we.mergeObjectSync(r, u);
  }
  get shape() {
    return this._def.shape();
  }
  strict(e) {
    return N.errToObj, new ce({
      ...this._def,
      unknownKeys: "strict",
      ...e !== void 0 ? {
        errorMap: (n, r) => {
          var o, i;
          const s = ((i = (o = this._def).errorMap) == null ? void 0 : i.call(o, n, r).message) ?? r.defaultError;
          return n.code === "unrecognized_keys" ? {
            message: N.errToObj(e).message ?? s
          } : {
            message: s
          };
        }
      } : {}
    });
  }
  strip() {
    return new ce({
      ...this._def,
      unknownKeys: "strip"
    });
  }
  passthrough() {
    return new ce({
      ...this._def,
      unknownKeys: "passthrough"
    });
  }
  // const AugmentFactory =
  //   <Def extends ZodObjectDef>(def: Def) =>
  //   <Augmentation extends ZodRawShape>(
  //     augmentation: Augmentation
  //   ): ZodObject<
  //     extendShape<ReturnType<Def["shape"]>, Augmentation>,
  //     Def["unknownKeys"],
  //     Def["catchall"]
  //   > => {
  //     return new ZodObject({
  //       ...def,
  //       shape: () => ({
  //         ...def.shape(),
  //         ...augmentation,
  //       }),
  //     }) as any;
  //   };
  extend(e) {
    return new ce({
      ...this._def,
      shape: () => ({
        ...this._def.shape(),
        ...e
      })
    });
  }
  /**
   * Prior to zod@1.0.12 there was a bug in the
   * inferred type of merged objects. Please
   * upgrade if you are experiencing issues.
   */
  merge(e) {
    return new ce({
      unknownKeys: e._def.unknownKeys,
      catchall: e._def.catchall,
      shape: () => ({
        ...this._def.shape(),
        ...e._def.shape()
      }),
      typeName: Z.ZodObject
    });
  }
  // merge<
  //   Incoming extends AnyZodObject,
  //   Augmentation extends Incoming["shape"],
  //   NewOutput extends {
  //     [k in keyof Augmentation | keyof Output]: k extends keyof Augmentation
  //       ? Augmentation[k]["_output"]
  //       : k extends keyof Output
  //       ? Output[k]
  //       : never;
  //   },
  //   NewInput extends {
  //     [k in keyof Augmentation | keyof Input]: k extends keyof Augmentation
  //       ? Augmentation[k]["_input"]
  //       : k extends keyof Input
  //       ? Input[k]
  //       : never;
  //   }
  // >(
  //   merging: Incoming
  // ): ZodObject<
  //   extendShape<T, ReturnType<Incoming["_def"]["shape"]>>,
  //   Incoming["_def"]["unknownKeys"],
  //   Incoming["_def"]["catchall"],
  //   NewOutput,
  //   NewInput
  // > {
  //   const merged: any = new ZodObject({
  //     unknownKeys: merging._def.unknownKeys,
  //     catchall: merging._def.catchall,
  //     shape: () =>
  //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),
  //     typeName: ZodFirstPartyTypeKind.ZodObject,
  //   }) as any;
  //   return merged;
  // }
  setKey(e, n) {
    return this.augment({ [e]: n });
  }
  // merge<Incoming extends AnyZodObject>(
  //   merging: Incoming
  // ): //ZodObject<T & Incoming["_shape"], UnknownKeys, Catchall> = (merging) => {
  // ZodObject<
  //   extendShape<T, ReturnType<Incoming["_def"]["shape"]>>,
  //   Incoming["_def"]["unknownKeys"],
  //   Incoming["_def"]["catchall"]
  // > {
  //   // const mergedShape = objectUtil.mergeShapes(
  //   //   this._def.shape(),
  //   //   merging._def.shape()
  //   // );
  //   const merged: any = new ZodObject({
  //     unknownKeys: merging._def.unknownKeys,
  //     catchall: merging._def.catchall,
  //     shape: () =>
  //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),
  //     typeName: ZodFirstPartyTypeKind.ZodObject,
  //   }) as any;
  //   return merged;
  // }
  catchall(e) {
    return new ce({
      ...this._def,
      catchall: e
    });
  }
  pick(e) {
    const n = {};
    for (const r of K.objectKeys(e))
      e[r] && this.shape[r] && (n[r] = this.shape[r]);
    return new ce({
      ...this._def,
      shape: () => n
    });
  }
  omit(e) {
    const n = {};
    for (const r of K.objectKeys(this.shape))
      e[r] || (n[r] = this.shape[r]);
    return new ce({
      ...this._def,
      shape: () => n
    });
  }
  /**
   * @deprecated
   */
  deepPartial() {
    return Ht(this);
  }
  partial(e) {
    const n = {};
    for (const r of K.objectKeys(this.shape)) {
      const s = this.shape[r];
      e && !e[r] ? n[r] = s : n[r] = s.optional();
    }
    return new ce({
      ...this._def,
      shape: () => n
    });
  }
  required(e) {
    const n = {};
    for (const r of K.objectKeys(this.shape))
      if (e && !e[r])
        n[r] = this.shape[r];
      else {
        let o = this.shape[r];
        for (; o instanceof rt; )
          o = o._def.innerType;
        n[r] = o;
      }
    return new ce({
      ...this._def,
      shape: () => n
    });
  }
  keyof() {
    return qi(K.objectKeys(this.shape));
  }
}
ce.create = (t, e) => new ce({
  shape: () => t,
  unknownKeys: "strip",
  catchall: wt.create(),
  typeName: Z.ZodObject,
  ...J(e)
});
ce.strictCreate = (t, e) => new ce({
  shape: () => t,
  unknownKeys: "strict",
  catchall: wt.create(),
  typeName: Z.ZodObject,
  ...J(e)
});
ce.lazycreate = (t, e) => new ce({
  shape: t,
  unknownKeys: "strip",
  catchall: wt.create(),
  typeName: Z.ZodObject,
  ...J(e)
});
class br extends H {
  _parse(e) {
    const { ctx: n } = this._processInputParams(e), r = this._def.options;
    function s(o) {
      for (const a of o)
        if (a.result.status === "valid")
          return a.result;
      for (const a of o)
        if (a.result.status === "dirty")
          return n.common.issues.push(...a.ctx.common.issues), a.result;
      const i = o.map((a) => new Be(a.ctx.common.issues));
      return O(n, {
        code: A.invalid_union,
        unionErrors: i
      }), L;
    }
    if (n.common.async)
      return Promise.all(r.map(async (o) => {
        const i = {
          ...n,
          common: {
            ...n.common,
            issues: []
          },
          parent: null
        };
        return {
          result: await o._parseAsync({
            data: n.data,
            path: n.path,
            parent: i
          }),
          ctx: i
        };
      })).then(s);
    {
      let o;
      const i = [];
      for (const u of r) {
        const d = {
          ...n,
          common: {
            ...n.common,
            issues: []
          },
          parent: null
        }, l = u._parseSync({
          data: n.data,
          path: n.path,
          parent: d
        });
        if (l.status === "valid")
          return l;
        l.status === "dirty" && !o && (o = { result: l, ctx: d }), d.common.issues.length && i.push(d.common.issues);
      }
      if (o)
        return n.common.issues.push(...o.ctx.common.issues), o.result;
      const a = i.map((u) => new Be(u));
      return O(n, {
        code: A.invalid_union,
        unionErrors: a
      }), L;
    }
  }
  get options() {
    return this._def.options;
  }
}
br.create = (t, e) => new br({
  options: t,
  typeName: Z.ZodUnion,
  ...J(e)
});
const Ye = (t) => t instanceof Tr ? Ye(t.schema) : t instanceof zt ? Ye(t.innerType()) : t instanceof xr ? [t.value] : t instanceof Ut ? t.options : t instanceof xs ? K.objectValues(t.enum) : t instanceof kr ? Ye(t._def.innerType) : t instanceof Is ? [void 0] : t instanceof Ss ? [null] : t instanceof rt ? [void 0, ...Ye(t.unwrap())] : t instanceof Bt ? [null, ...Ye(t.unwrap())] : t instanceof Vi || t instanceof Or ? Ye(t.unwrap()) : t instanceof Cr ? Ye(t._def.innerType) : [];
class Js extends H {
  _parse(e) {
    const { ctx: n } = this._processInputParams(e);
    if (n.parsedType !== R.object)
      return O(n, {
        code: A.invalid_type,
        expected: R.object,
        received: n.parsedType
      }), L;
    const r = this.discriminator, s = n.data[r], o = this.optionsMap.get(s);
    return o ? n.common.async ? o._parseAsync({
      data: n.data,
      path: n.path,
      parent: n
    }) : o._parseSync({
      data: n.data,
      path: n.path,
      parent: n
    }) : (O(n, {
      code: A.invalid_union_discriminator,
      options: Array.from(this.optionsMap.keys()),
      path: [r]
    }), L);
  }
  get discriminator() {
    return this._def.discriminator;
  }
  get options() {
    return this._def.options;
  }
  get optionsMap() {
    return this._def.optionsMap;
  }
  /**
   * The constructor of the discriminated union schema. Its behaviour is very similar to that of the normal z.union() constructor.
   * However, it only allows a union of objects, all of which need to share a discriminator property. This property must
   * have a different value for each object in the union.
   * @param discriminator the name of the discriminator property
   * @param types an array of object schemas
   * @param params
   */
  static create(e, n, r) {
    const s = /* @__PURE__ */ new Map();
    for (const o of n) {
      const i = Ye(o.shape[e]);
      if (!i.length)
        throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);
      for (const a of i) {
        if (s.has(a))
          throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);
        s.set(a, o);
      }
    }
    return new Js({
      typeName: Z.ZodDiscriminatedUnion,
      discriminator: e,
      options: n,
      optionsMap: s,
      ...J(r)
    });
  }
}
function Ts(t, e) {
  const n = ut(t), r = ut(e);
  if (t === e)
    return { valid: !0, data: t };
  if (n === R.object && r === R.object) {
    const s = K.objectKeys(e), o = K.objectKeys(t).filter((a) => s.indexOf(a) !== -1), i = { ...t, ...e };
    for (const a of o) {
      const u = Ts(t[a], e[a]);
      if (!u.valid)
        return { valid: !1 };
      i[a] = u.data;
    }
    return { valid: !0, data: i };
  } else if (n === R.array && r === R.array) {
    if (t.length !== e.length)
      return { valid: !1 };
    const s = [];
    for (let o = 0; o < t.length; o++) {
      const i = t[o], a = e[o], u = Ts(i, a);
      if (!u.valid)
        return { valid: !1 };
      s.push(u.data);
    }
    return { valid: !0, data: s };
  } else return n === R.date && r === R.date && +t == +e ? { valid: !0, data: t } : { valid: !1 };
}
class Ir extends H {
  _parse(e) {
    const { status: n, ctx: r } = this._processInputParams(e), s = (o, i) => {
      if (No(o) || No(i))
        return L;
      const a = Ts(o.value, i.value);
      return a.valid ? ((Do(o) || Do(i)) && n.dirty(), { status: n.value, value: a.data }) : (O(r, {
        code: A.invalid_intersection_types
      }), L);
    };
    return r.common.async ? Promise.all([
      this._def.left._parseAsync({
        data: r.data,
        path: r.path,
        parent: r
      }),
      this._def.right._parseAsync({
        data: r.data,
        path: r.path,
        parent: r
      })
    ]).then(([o, i]) => s(o, i)) : s(this._def.left._parseSync({
      data: r.data,
      path: r.path,
      parent: r
    }), this._def.right._parseSync({
      data: r.data,
      path: r.path,
      parent: r
    }));
  }
}
Ir.create = (t, e, n) => new Ir({
  left: t,
  right: e,
  typeName: Z.ZodIntersection,
  ...J(n)
});
class Zt extends H {
  _parse(e) {
    const { status: n, ctx: r } = this._processInputParams(e);
    if (r.parsedType !== R.array)
      return O(r, {
        code: A.invalid_type,
        expected: R.array,
        received: r.parsedType
      }), L;
    if (r.data.length < this._def.items.length)
      return O(r, {
        code: A.too_small,
        minimum: this._def.items.length,
        inclusive: !0,
        exact: !1,
        type: "array"
      }), L;
    !this._def.rest && r.data.length > this._def.items.length && (O(r, {
      code: A.too_big,
      maximum: this._def.items.length,
      inclusive: !0,
      exact: !1,
      type: "array"
    }), n.dirty());
    const o = [...r.data].map((i, a) => {
      const u = this._def.items[a] || this._def.rest;
      return u ? u._parse(new Je(r, i, r.path, a)) : null;
    }).filter((i) => !!i);
    return r.common.async ? Promise.all(o).then((i) => we.mergeArray(n, i)) : we.mergeArray(n, o);
  }
  get items() {
    return this._def.items;
  }
  rest(e) {
    return new Zt({
      ...this._def,
      rest: e
    });
  }
}
Zt.create = (t, e) => {
  if (!Array.isArray(t))
    throw new Error("You must pass an array of schemas to z.tuple([ ... ])");
  return new Zt({
    items: t,
    typeName: Z.ZodTuple,
    rest: null,
    ...J(e)
  });
};
class Sr extends H {
  get keySchema() {
    return this._def.keyType;
  }
  get valueSchema() {
    return this._def.valueType;
  }
  _parse(e) {
    const { status: n, ctx: r } = this._processInputParams(e);
    if (r.parsedType !== R.object)
      return O(r, {
        code: A.invalid_type,
        expected: R.object,
        received: r.parsedType
      }), L;
    const s = [], o = this._def.keyType, i = this._def.valueType;
    for (const a in r.data)
      s.push({
        key: o._parse(new Je(r, a, r.path, a)),
        value: i._parse(new Je(r, r.data[a], r.path, a)),
        alwaysSet: a in r.data
      });
    return r.common.async ? we.mergeObjectAsync(n, s) : we.mergeObjectSync(n, s);
  }
  get element() {
    return this._def.valueType;
  }
  static create(e, n, r) {
    return n instanceof H ? new Sr({
      keyType: e,
      valueType: n,
      typeName: Z.ZodRecord,
      ...J(r)
    }) : new Sr({
      keyType: nt.create(),
      valueType: e,
      typeName: Z.ZodRecord,
      ...J(n)
    });
  }
}
class Lo extends H {
  get keySchema() {
    return this._def.keyType;
  }
  get valueSchema() {
    return this._def.valueType;
  }
  _parse(e) {
    const { status: n, ctx: r } = this._processInputParams(e);
    if (r.parsedType !== R.map)
      return O(r, {
        code: A.invalid_type,
        expected: R.map,
        received: r.parsedType
      }), L;
    const s = this._def.keyType, o = this._def.valueType, i = [...r.data.entries()].map(([a, u], d) => ({
      key: s._parse(new Je(r, a, r.path, [d, "key"])),
      value: o._parse(new Je(r, u, r.path, [d, "value"]))
    }));
    if (r.common.async) {
      const a = /* @__PURE__ */ new Map();
      return Promise.resolve().then(async () => {
        for (const u of i) {
          const d = await u.key, l = await u.value;
          if (d.status === "aborted" || l.status === "aborted")
            return L;
          (d.status === "dirty" || l.status === "dirty") && n.dirty(), a.set(d.value, l.value);
        }
        return { status: n.value, value: a };
      });
    } else {
      const a = /* @__PURE__ */ new Map();
      for (const u of i) {
        const d = u.key, l = u.value;
        if (d.status === "aborted" || l.status === "aborted")
          return L;
        (d.status === "dirty" || l.status === "dirty") && n.dirty(), a.set(d.value, l.value);
      }
      return { status: n.value, value: a };
    }
  }
}
Lo.create = (t, e, n) => new Lo({
  valueType: e,
  keyType: t,
  typeName: Z.ZodMap,
  ...J(n)
});
class En extends H {
  _parse(e) {
    const { status: n, ctx: r } = this._processInputParams(e);
    if (r.parsedType !== R.set)
      return O(r, {
        code: A.invalid_type,
        expected: R.set,
        received: r.parsedType
      }), L;
    const s = this._def;
    s.minSize !== null && r.data.size < s.minSize.value && (O(r, {
      code: A.too_small,
      minimum: s.minSize.value,
      type: "set",
      inclusive: !0,
      exact: !1,
      message: s.minSize.message
    }), n.dirty()), s.maxSize !== null && r.data.size > s.maxSize.value && (O(r, {
      code: A.too_big,
      maximum: s.maxSize.value,
      type: "set",
      inclusive: !0,
      exact: !1,
      message: s.maxSize.message
    }), n.dirty());
    const o = this._def.valueType;
    function i(u) {
      const d = /* @__PURE__ */ new Set();
      for (const l of u) {
        if (l.status === "aborted")
          return L;
        l.status === "dirty" && n.dirty(), d.add(l.value);
      }
      return { status: n.value, value: d };
    }
    const a = [...r.data.values()].map((u, d) => o._parse(new Je(r, u, r.path, d)));
    return r.common.async ? Promise.all(a).then((u) => i(u)) : i(a);
  }
  min(e, n) {
    return new En({
      ...this._def,
      minSize: { value: e, message: N.toString(n) }
    });
  }
  max(e, n) {
    return new En({
      ...this._def,
      maxSize: { value: e, message: N.toString(n) }
    });
  }
  size(e, n) {
    return this.min(e, n).max(e, n);
  }
  nonempty(e) {
    return this.min(1, e);
  }
}
En.create = (t, e) => new En({
  valueType: t,
  minSize: null,
  maxSize: null,
  typeName: Z.ZodSet,
  ...J(e)
});
class Tr extends H {
  get schema() {
    return this._def.getter();
  }
  _parse(e) {
    const { ctx: n } = this._processInputParams(e);
    return this._def.getter()._parse({ data: n.data, path: n.path, parent: n });
  }
}
Tr.create = (t, e) => new Tr({
  getter: t,
  typeName: Z.ZodLazy,
  ...J(e)
});
class xr extends H {
  _parse(e) {
    if (e.data !== this._def.value) {
      const n = this._getOrReturnCtx(e);
      return O(n, {
        received: n.data,
        code: A.invalid_literal,
        expected: this._def.value
      }), L;
    }
    return { status: "valid", value: e.data };
  }
  get value() {
    return this._def.value;
  }
}
xr.create = (t, e) => new xr({
  value: t,
  typeName: Z.ZodLiteral,
  ...J(e)
});
function qi(t, e) {
  return new Ut({
    values: t,
    typeName: Z.ZodEnum,
    ...J(e)
  });
}
class Ut extends H {
  _parse(e) {
    if (typeof e.data != "string") {
      const n = this._getOrReturnCtx(e), r = this._def.values;
      return O(n, {
        expected: K.joinValues(r),
        received: n.parsedType,
        code: A.invalid_type
      }), L;
    }
    if (this._cache || (this._cache = new Set(this._def.values)), !this._cache.has(e.data)) {
      const n = this._getOrReturnCtx(e), r = this._def.values;
      return O(n, {
        received: n.data,
        code: A.invalid_enum_value,
        options: r
      }), L;
    }
    return Ee(e.data);
  }
  get options() {
    return this._def.values;
  }
  get enum() {
    const e = {};
    for (const n of this._def.values)
      e[n] = n;
    return e;
  }
  get Values() {
    const e = {};
    for (const n of this._def.values)
      e[n] = n;
    return e;
  }
  get Enum() {
    const e = {};
    for (const n of this._def.values)
      e[n] = n;
    return e;
  }
  extract(e, n = this._def) {
    return Ut.create(e, {
      ...this._def,
      ...n
    });
  }
  exclude(e, n = this._def) {
    return Ut.create(this.options.filter((r) => !e.includes(r)), {
      ...this._def,
      ...n
    });
  }
}
Ut.create = qi;
class xs extends H {
  _parse(e) {
    const n = K.getValidEnumValues(this._def.values), r = this._getOrReturnCtx(e);
    if (r.parsedType !== R.string && r.parsedType !== R.number) {
      const s = K.objectValues(n);
      return O(r, {
        expected: K.joinValues(s),
        received: r.parsedType,
        code: A.invalid_type
      }), L;
    }
    if (this._cache || (this._cache = new Set(K.getValidEnumValues(this._def.values))), !this._cache.has(e.data)) {
      const s = K.objectValues(n);
      return O(r, {
        received: r.data,
        code: A.invalid_enum_value,
        options: s
      }), L;
    }
    return Ee(e.data);
  }
  get enum() {
    return this._def.values;
  }
}
xs.create = (t, e) => new xs({
  values: t,
  typeName: Z.ZodNativeEnum,
  ...J(e)
});
class Ar extends H {
  unwrap() {
    return this._def.type;
  }
  _parse(e) {
    const { ctx: n } = this._processInputParams(e);
    if (n.parsedType !== R.promise && n.common.async === !1)
      return O(n, {
        code: A.invalid_type,
        expected: R.promise,
        received: n.parsedType
      }), L;
    const r = n.parsedType === R.promise ? n.data : Promise.resolve(n.data);
    return Ee(r.then((s) => this._def.type.parseAsync(s, {
      path: n.path,
      errorMap: n.common.contextualErrorMap
    })));
  }
}
Ar.create = (t, e) => new Ar({
  type: t,
  typeName: Z.ZodPromise,
  ...J(e)
});
class zt extends H {
  innerType() {
    return this._def.schema;
  }
  sourceType() {
    return this._def.schema._def.typeName === Z.ZodEffects ? this._def.schema.sourceType() : this._def.schema;
  }
  _parse(e) {
    const { status: n, ctx: r } = this._processInputParams(e), s = this._def.effect || null, o = {
      addIssue: (i) => {
        O(r, i), i.fatal ? n.abort() : n.dirty();
      },
      get path() {
        return r.path;
      }
    };
    if (o.addIssue = o.addIssue.bind(o), s.type === "preprocess") {
      const i = s.transform(r.data, o);
      if (r.common.async)
        return Promise.resolve(i).then(async (a) => {
          if (n.value === "aborted")
            return L;
          const u = await this._def.schema._parseAsync({
            data: a,
            path: r.path,
            parent: r
          });
          return u.status === "aborted" ? L : u.status === "dirty" || n.value === "dirty" ? In(u.value) : u;
        });
      {
        if (n.value === "aborted")
          return L;
        const a = this._def.schema._parseSync({
          data: i,
          path: r.path,
          parent: r
        });
        return a.status === "aborted" ? L : a.status === "dirty" || n.value === "dirty" ? In(a.value) : a;
      }
    }
    if (s.type === "refinement") {
      const i = (a) => {
        const u = s.refinement(a, o);
        if (r.common.async)
          return Promise.resolve(u);
        if (u instanceof Promise)
          throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");
        return a;
      };
      if (r.common.async === !1) {
        const a = this._def.schema._parseSync({
          data: r.data,
          path: r.path,
          parent: r
        });
        return a.status === "aborted" ? L : (a.status === "dirty" && n.dirty(), i(a.value), { status: n.value, value: a.value });
      } else
        return this._def.schema._parseAsync({ data: r.data, path: r.path, parent: r }).then((a) => a.status === "aborted" ? L : (a.status === "dirty" && n.dirty(), i(a.value).then(() => ({ status: n.value, value: a.value }))));
    }
    if (s.type === "transform")
      if (r.common.async === !1) {
        const i = this._def.schema._parseSync({
          data: r.data,
          path: r.path,
          parent: r
        });
        if (!gn(i))
          return L;
        const a = s.transform(i.value, o);
        if (a instanceof Promise)
          throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");
        return { status: n.value, value: a };
      } else
        return this._def.schema._parseAsync({ data: r.data, path: r.path, parent: r }).then((i) => gn(i) ? Promise.resolve(s.transform(i.value, o)).then((a) => ({
          status: n.value,
          value: a
        })) : L);
    K.assertNever(s);
  }
}
zt.create = (t, e, n) => new zt({
  schema: t,
  typeName: Z.ZodEffects,
  effect: e,
  ...J(n)
});
zt.createWithPreprocess = (t, e, n) => new zt({
  schema: e,
  effect: { type: "preprocess", transform: t },
  typeName: Z.ZodEffects,
  ...J(n)
});
class rt extends H {
  _parse(e) {
    return this._getType(e) === R.undefined ? Ee(void 0) : this._def.innerType._parse(e);
  }
  unwrap() {
    return this._def.innerType;
  }
}
rt.create = (t, e) => new rt({
  innerType: t,
  typeName: Z.ZodOptional,
  ...J(e)
});
class Bt extends H {
  _parse(e) {
    return this._getType(e) === R.null ? Ee(null) : this._def.innerType._parse(e);
  }
  unwrap() {
    return this._def.innerType;
  }
}
Bt.create = (t, e) => new Bt({
  innerType: t,
  typeName: Z.ZodNullable,
  ...J(e)
});
class kr extends H {
  _parse(e) {
    const { ctx: n } = this._processInputParams(e);
    let r = n.data;
    return n.parsedType === R.undefined && (r = this._def.defaultValue()), this._def.innerType._parse({
      data: r,
      path: n.path,
      parent: n
    });
  }
  removeDefault() {
    return this._def.innerType;
  }
}
kr.create = (t, e) => new kr({
  innerType: t,
  typeName: Z.ZodDefault,
  defaultValue: typeof e.default == "function" ? e.default : () => e.default,
  ...J(e)
});
class Cr extends H {
  _parse(e) {
    const { ctx: n } = this._processInputParams(e), r = {
      ...n,
      common: {
        ...n.common,
        issues: []
      }
    }, s = this._def.innerType._parse({
      data: r.data,
      path: r.path,
      parent: {
        ...r
      }
    });
    return vr(s) ? s.then((o) => ({
      status: "valid",
      value: o.status === "valid" ? o.value : this._def.catchValue({
        get error() {
          return new Be(r.common.issues);
        },
        input: r.data
      })
    })) : {
      status: "valid",
      value: s.status === "valid" ? s.value : this._def.catchValue({
        get error() {
          return new Be(r.common.issues);
        },
        input: r.data
      })
    };
  }
  removeCatch() {
    return this._def.innerType;
  }
}
Cr.create = (t, e) => new Cr({
  innerType: t,
  typeName: Z.ZodCatch,
  catchValue: typeof e.catch == "function" ? e.catch : () => e.catch,
  ...J(e)
});
class Zo extends H {
  _parse(e) {
    if (this._getType(e) !== R.nan) {
      const r = this._getOrReturnCtx(e);
      return O(r, {
        code: A.invalid_type,
        expected: R.nan,
        received: r.parsedType
      }), L;
    }
    return { status: "valid", value: e.data };
  }
}
Zo.create = (t) => new Zo({
  typeName: Z.ZodNaN,
  ...J(t)
});
class Vi extends H {
  _parse(e) {
    const { ctx: n } = this._processInputParams(e), r = n.data;
    return this._def.type._parse({
      data: r,
      path: n.path,
      parent: n
    });
  }
  unwrap() {
    return this._def.type;
  }
}
class Gs extends H {
  _parse(e) {
    const { status: n, ctx: r } = this._processInputParams(e);
    if (r.common.async)
      return (async () => {
        const o = await this._def.in._parseAsync({
          data: r.data,
          path: r.path,
          parent: r
        });
        return o.status === "aborted" ? L : o.status === "dirty" ? (n.dirty(), In(o.value)) : this._def.out._parseAsync({
          data: o.value,
          path: r.path,
          parent: r
        });
      })();
    {
      const s = this._def.in._parseSync({
        data: r.data,
        path: r.path,
        parent: r
      });
      return s.status === "aborted" ? L : s.status === "dirty" ? (n.dirty(), {
        status: "dirty",
        value: s.value
      }) : this._def.out._parseSync({
        data: s.value,
        path: r.path,
        parent: r
      });
    }
  }
  static create(e, n) {
    return new Gs({
      in: e,
      out: n,
      typeName: Z.ZodPipeline
    });
  }
}
class Or extends H {
  _parse(e) {
    const n = this._def.innerType._parse(e), r = (s) => (gn(s) && (s.value = Object.freeze(s.value)), s);
    return vr(n) ? n.then((s) => r(s)) : r(n);
  }
  unwrap() {
    return this._def.innerType;
  }
}
Or.create = (t, e) => new Or({
  innerType: t,
  typeName: Z.ZodReadonly,
  ...J(e)
});
function Uo(t, e) {
  const n = typeof t == "function" ? t(e) : typeof t == "string" ? { message: t } : t;
  return typeof n == "string" ? { message: n } : n;
}
function fd(t, e = {}, n) {
  return t ? On.create().superRefine((r, s) => {
    const o = t(r);
    if (o instanceof Promise)
      return o.then((i) => {
        if (!i) {
          const a = Uo(e, r), u = a.fatal ?? n ?? !0;
          s.addIssue({ code: "custom", ...a, fatal: u });
        }
      });
    if (!o) {
      const i = Uo(e, r), a = i.fatal ?? n ?? !0;
      s.addIssue({ code: "custom", ...i, fatal: a });
    }
  }) : On.create();
}
var Z;
(function(t) {
  t.ZodString = "ZodString", t.ZodNumber = "ZodNumber", t.ZodNaN = "ZodNaN", t.ZodBigInt = "ZodBigInt", t.ZodBoolean = "ZodBoolean", t.ZodDate = "ZodDate", t.ZodSymbol = "ZodSymbol", t.ZodUndefined = "ZodUndefined", t.ZodNull = "ZodNull", t.ZodAny = "ZodAny", t.ZodUnknown = "ZodUnknown", t.ZodNever = "ZodNever", t.ZodVoid = "ZodVoid", t.ZodArray = "ZodArray", t.ZodObject = "ZodObject", t.ZodUnion = "ZodUnion", t.ZodDiscriminatedUnion = "ZodDiscriminatedUnion", t.ZodIntersection = "ZodIntersection", t.ZodTuple = "ZodTuple", t.ZodRecord = "ZodRecord", t.ZodMap = "ZodMap", t.ZodSet = "ZodSet", t.ZodFunction = "ZodFunction", t.ZodLazy = "ZodLazy", t.ZodLiteral = "ZodLiteral", t.ZodEnum = "ZodEnum", t.ZodEffects = "ZodEffects", t.ZodNativeEnum = "ZodNativeEnum", t.ZodOptional = "ZodOptional", t.ZodNullable = "ZodNullable", t.ZodDefault = "ZodDefault", t.ZodCatch = "ZodCatch", t.ZodPromise = "ZodPromise", t.ZodBranded = "ZodBranded", t.ZodPipeline = "ZodPipeline", t.ZodReadonly = "ZodReadonly";
})(Z || (Z = {}));
const Wi = (t, e = {
  message: `Input not instance of ${t.name}`
}) => fd((n) => n instanceof t, e), f = nt.create, k = yn.create, yt = bs.create, B = On.create;
wt.create;
const U = Ue.create, g = ce.create, Ge = br.create, ge = Js.create;
Ir.create;
Zt.create;
const ne = Sr.create, hd = Tr.create, v = xr.create, ae = Ut.create;
Ar.create;
rt.create;
Bt.create;
g({
  name: f(),
  description: f().optional(),
  inputSchema: g({
    type: v("object"),
    properties: ne(f(), B()),
    required: U(f()),
    additionalProperties: yt()
  })
});
const Xr = {}, Qr = {}, md = ({ server: t, agent: e }) => t.toolFilter && typeof t.toolFilter == "function" && e ? `${t.name}:${e.name}` : t.name;
async function gd({ server: t, convertSchemasToStrict: e, runContext: n, agent: r, generateMCPToolCacheKey: s }) {
  const o = (s || md)({
    server: t,
    agent: r,
    runContext: n
  });
  if (t.cacheToolsList && Xr[o])
    return Xr[o].map((a) => zo(a, t, e));
  const i = async (a) => {
    const u = await t.listTools();
    let d = u;
    if (n && r) {
      const c = { runContext: n, agent: r, serverName: t.name }, h = [];
      for (const m of u) {
        const _ = t.toolFilter;
        if (_)
          if (typeof _ == "function") {
            if (!await _(c, m)) {
              E.debug(`MCP Tool (server: ${t.name}, tool: ${m.name}) is blocked by the callable filter.`);
              continue;
            }
          } else {
            const w = _.allowedToolNames ?? [], b = _.blockedToolNames ?? [];
            if (w.length > 0 || b.length > 0) {
              const I = w.length > 0 ? w.includes(m.name) : !0, T = b.length > 0 ? b.includes(m.name) : !1;
              if (!I || T) {
                T ? E.debug(`MCP Tool (server: ${t.name}, tool: ${m.name}) is blocked by the static filter.`) : I || E.debug(`MCP Tool (server: ${t.name}, tool: ${m.name}) is not allowed by the static filter.`);
                continue;
              }
            }
          }
        h.push(m);
      }
      d = h;
    }
    a && (a.spanData.result = d.map((c) => c.name));
    const l = d.map((c) => zo(c, t, e));
    return t.cacheToolsList && (Xr[o] = d, Qr[t.name] || (Qr[t.name] = /* @__PURE__ */ new Set()), Qr[t.name].add(o)), l;
  };
  return _n() ? Cp(i, {
    data: { server: t.name }
  }) : i();
}
async function yd(t, e, n, r = !1) {
  const s = Array.isArray(t) ? {
    mcpServers: t,
    runContext: e,
    agent: n,
    convertSchemasToStrict: r
  } : t, { mcpServers: o, convertSchemasToStrict: i = !1, runContext: a, agent: u, generateMCPToolCacheKey: d } = s, l = [], c = /* @__PURE__ */ new Set();
  for (const h of o) {
    const m = await gd({
      server: h,
      convertSchemasToStrict: i,
      runContext: a,
      agent: u,
      generateMCPToolCacheKey: d
    }), w = [...new Set(m.map((b) => b.name))].filter((b) => c.has(b));
    if (w.length > 0)
      throw new te(`Duplicate tool names found across MCP servers: ${w.join(", ")}`);
    for (const b of m)
      c.add(b.name), l.push(b);
  }
  return l;
}
function zo(t, e, n) {
  var i, a, u, d;
  async function r(l, c) {
    let h = {};
    typeof l == "string" && l ? h = JSON.parse(l) : typeof l == "object" && l != null && (h = l);
    const m = Dn();
    m && (m.spanData.mcp_data = { server: e.name });
    const _ = await e.callTool(t.name, h);
    return _.length === 1 ? _[0] : _;
  }
  const s = {
    ...t.inputSchema,
    type: ((i = t.inputSchema) == null ? void 0 : i.type) ?? "object",
    properties: ((a = t.inputSchema) == null ? void 0 : a.properties) ?? {},
    required: ((u = t.inputSchema) == null ? void 0 : u.required) ?? [],
    additionalProperties: ((d = t.inputSchema) == null ? void 0 : d.additionalProperties) ?? !1
  };
  if (n || s.additionalProperties === !0)
    try {
      const l = _d(s);
      return vs({
        name: t.name,
        description: t.description || "",
        parameters: l,
        strict: !0,
        execute: r
      });
    } catch (l) {
      E.warn(`Error converting MCP schema to strict mode: ${l}`);
    }
  const o = {
    ...s,
    additionalProperties: !0
  };
  return vs({
    name: t.name,
    description: t.description || "",
    parameters: o,
    strict: !1,
    execute: r
  });
}
function _d(t) {
  const e = {
    ...t,
    additionalProperties: !1
  };
  return e.required || (e.required = []), e;
}
function vd() {
  return {};
}
var en, kt;
class Lr {
  constructor() {
    C(this, en, new EventTarget());
    C(this, kt, /* @__PURE__ */ new Map());
  }
  on(e, n) {
    const r = e;
    let s = p(this, kt).get(r);
    s || (s = /* @__PURE__ */ new Map(), p(this, kt).set(r, s));
    let o = s.get(n);
    o || (o = /* @__PURE__ */ new Set(), s.set(n, o));
    const i = ((a) => n(...a.detail ?? []));
    return o.add(i), p(this, en).addEventListener(r, i), this;
  }
  off(e, n) {
    const r = e, s = p(this, kt).get(r), o = s == null ? void 0 : s.get(n);
    if (o != null && o.size) {
      for (const i of o)
        p(this, en).removeEventListener(r, i);
      s == null || s.delete(n), (s == null ? void 0 : s.size) === 0 && p(this, kt).delete(r);
    }
    return this;
  }
  emit(e, ...n) {
    const r = new CustomEvent(e, { detail: n });
    return p(this, en).dispatchEvent(r);
  }
  once(e, n) {
    const r = (...s) => {
      this.off(e, r), n(...s);
    };
    return this.on(e, r), this;
  }
}
en = new WeakMap(), kt = new WeakMap();
const Hi = () => typeof crypto < "u" && crypto.randomUUID ? crypto.randomUUID() : "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function(t) {
  const e = Math.random() * 16 | 0;
  return (t === "x" ? e : e & 3 | 8).toString(16);
}), wd = class {
  constructor() {
  }
  pipeTo(e, n) {
  }
  pipeThrough(e, n) {
  }
}, bd = globalThis.ReadableStream, Id = globalThis.TransformStream;
class Bo {
  constructor() {
    y(this, "context", null);
  }
  run(e, n) {
    return this.context = e, n();
  }
  getStore() {
    return this.context;
  }
  enterWith(e) {
    this.context = e;
  }
}
class Sd {
  constructor() {
  }
  setTimeout(e, n) {
    const r = setTimeout(e, n);
    return r.ref = typeof r.ref == "function" ? r.ref : () => r, r.unref = typeof r.unref == "function" ? r.unref : () => r, r.hasRef = typeof r.hasRef == "function" ? r.hasRef : () => !0, r.refresh = typeof r.refresh == "function" ? r.refresh : () => r, r;
  }
  clearTimeout(e) {
    window.clearTimeout(e);
  }
}
const Td = new Sd();
function _t(t) {
  if (t.length === 0)
    return "";
  const e = typeof globalThis < "u" && globalThis.Buffer ? globalThis.Buffer : void 0;
  if (e)
    return e.from(t).toString("base64");
  let n = "";
  for (let i = 0; i < t.length; i += 1)
    n += String.fromCharCode(t[i]);
  if (typeof globalThis.btoa == "function")
    return globalThis.btoa(n);
  const r = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
  let s = "", o = 0;
  for (; o < n.length; ) {
    const i = n.charCodeAt(o++), a = n.charCodeAt(o++), u = n.charCodeAt(o++), d = i >> 2, l = (i & 3) << 4 | a >> 4, c = isNaN(a) ? 64 : (a & 15) << 2 | u >> 6, h = isNaN(u) ? 64 : u & 63;
    s += r.charAt(d) + r.charAt(l) + r.charAt(c) + r.charAt(h);
  }
  return s;
}
function xd(t) {
  if (t instanceof ArrayBuffer)
    return {
      __type: "ArrayBuffer",
      data: _t(new Uint8Array(t))
    };
  if (Fr(t)) {
    const e = t;
    return {
      __type: e.constructor.name,
      data: _t(new Uint8Array(e.buffer, e.byteOffset, e.byteLength))
    };
  }
  if (Ui(t)) {
    const e = t;
    return {
      __type: "Buffer",
      data: _t(new Uint8Array(e.buffer, e.byteOffset, e.byteLength))
    };
  }
  if (Bs(t))
    return {
      __type: "Buffer",
      data: _t(Uint8Array.from(t.data))
    };
}
function Ad(t) {
  if (t instanceof ArrayBuffer)
    return new Uint8Array(t);
  if (Fr(t)) {
    const e = t;
    return new Uint8Array(e.buffer, e.byteOffset, e.byteLength);
  }
  if (Ui(t)) {
    const e = t;
    return new Uint8Array(e.buffer, e.byteOffset, e.byteLength);
  }
  if (Bs(t))
    return Uint8Array.from(t.data);
}
function Er(t) {
  return typeof t == "string" ? [{ type: "message", role: "user", content: t }] : [...t];
}
function De(t) {
  return JSON.stringify(t, Cd);
}
function As(t) {
  const e = /* @__PURE__ */ new Map();
  for (const n of t) {
    const r = De(n), s = e.get(r);
    s ? s.push(n) : e.set(r, [n]);
  }
  return e;
}
function kd(t, e) {
  const n = t.get(e);
  if (!n || n.length === 0)
    return;
  const [r] = n;
  return n.shift(), n.length === 0 && t.delete(e), r;
}
function Rr(t, e) {
  const n = De(e), r = t.get(n);
  if (!r || r.length === 0)
    return !1;
  const s = r.findIndex((o) => o === e);
  return s === -1 ? !1 : (r.splice(s, 1), r.length === 0 && t.delete(n), !0);
}
function Cd(t, e) {
  const n = xd(e);
  return n || e;
}
function Ki(t) {
  return t.filter((e) => e.type !== "tool_approval_item").map((e) => e.rawItem);
}
function Rn(t, e) {
  const n = Ki(e);
  return [...Er(t), ...n];
}
const de = g({
  /**
   * Additional optional provider specific data. Used for custom functionality or model provider
   * specific fields.
   */
  providerData: ne(f(), B()).optional()
}), Re = de.extend({
  /**
   * An ID to identify the item. This is optional by default. If a model provider absolutely
   * requires this field, it will be validated on the model level.
   */
  id: f().optional()
}), Od = de.extend({
  type: v("refusal"),
  /**
   * The refusal explanation from the model.
   */
  refusal: f()
}), Ed = de.extend({
  type: v("output_text"),
  /**
   * The text output from the model.
   */
  text: f()
}), qs = de.extend({
  type: v("input_text"),
  /**
   * A text input for example a message from a user
   */
  text: f()
}), Rd = de.extend({
  type: v("reasoning_text"),
  /**
   * A text input for example a message from a user
   */
  text: f()
}), Yi = de.extend({
  type: v("input_image"),
  /**
   * The image input to the model. Could be provided inline (`image`), as a URL, or by reference to a
   * previously uploaded OpenAI file.
   */
  image: f().or(g({ id: f().describe("OpenAI file ID") })).describe("Either base64 encoded image data, a data URL, or an object with a file ID.").optional(),
  /**
   * Controls the level of detail requested for image understanding tasks.
   * Future models may add new values, therefore this accepts any string.
   */
  detail: f().optional()
}), Xi = de.extend({
  type: v("input_file"),
  /**
   * The file input to the model. Could be raw data, a URL, or an OpenAI file ID.
   * When passing a string, it is interpreted as inline data or a URL; use `{ id }` for file IDs.
   */
  file: f().describe("Either base64 encoded file data or a publicly accessible file URL").or(g({ id: f().describe("OpenAI file ID") })).or(g({ url: f().describe("Publicly accessible file URL") })).describe("Contents of the file or an object with a file ID.").optional(),
  /**
   * Optional filename metadata when uploading file data inline.
   */
  filename: f().optional()
}), Qi = de.extend({
  type: v("audio"),
  /**
   * The audio input to the model. Could be base64 encoded audio data or an object with a file ID.
   */
  audio: f().or(g({
    id: f()
  })).describe("Base64 encoded audio data or file id"),
  /**
   * The format of the audio.
   */
  format: f().nullable().optional(),
  /**
   * The transcript of the audio.
   */
  transcript: f().nullable().optional()
}), Pd = de.extend({
  type: v("image"),
  /**
   * The image input to the model. Could be base64 encoded image data or an object with a file ID.
   */
  image: f().describe("Base64 encoded image data")
}), Nd = de.extend({
  type: v("text"),
  /**
   * The text output from the model.
   */
  text: f()
}), Dd = g({
  data: Ge([f(), Wi(Uint8Array)]).describe("Base64 image data, or raw bytes that will be base64 encoded automatically."),
  mediaType: f().optional()
}), Md = g({
  url: f().describe("Publicly accessible URL pointing to the image content")
}), jd = g({
  fileId: f().describe("OpenAI file ID referencing uploaded image content")
}), $d = Ge([Dd, Md, jd]).describe("Inline image data or references to uploaded content."), Fd = g({
  data: Ge([f(), Wi(Uint8Array)]).describe("Base64 encoded file data, or raw bytes that will be encoded automatically."),
  mediaType: f().describe("IANA media type describing the file contents"),
  filename: f().describe("Filename associated with the inline data")
}), Ld = g({
  url: f().describe("Publicly accessible URL for the file content"),
  filename: f().optional()
}), Zd = g({
  id: f().describe("OpenAI file ID referencing uploaded content"),
  filename: f().optional()
}), Ud = Ge([
  f().describe("Existing data URL or base64 string"),
  Fd,
  Ld,
  Zd
]).describe("Inline data (with metadata) or references pointing to file contents."), zd = (...t) => f(), Bd = de.extend({
  type: v("image"),
  /**
   * Inline image content or a reference to an uploaded file. Accepts a URL/data URL string or an
   * object describing the data/url/fileId source.
   */
  image: f().or($d).optional(),
  /**
   * Controls the requested level of detail for vision models.
   * Use a string to avoid constraining future model capabilities.
   */
  detail: zd("low", "high", "auto").optional()
}), Jd = de.extend({
  type: v("file"),
  /**
   * File output reference. Provide either a string (data URL / base64), a data object (requires
   * mediaType + filename), or an object pointing to an uploaded file/URL.
   */
  file: Ud
}), Gd = de.extend({
  type: v("computer_screenshot"),
  /**
   * A base64 encoded image data or a URL representing the screenshot.
   */
  data: f().describe("Base64 encoded image data or URL")
}), qd = ge("type", [
  g({ type: v("screenshot") }),
  g({
    type: v("click"),
    x: k(),
    y: k(),
    button: ae(["left", "right", "wheel", "back", "forward"])
  }),
  g({
    type: v("double_click"),
    x: k(),
    y: k()
  }),
  g({
    type: v("scroll"),
    x: k(),
    y: k(),
    scroll_x: k(),
    scroll_y: k()
  }),
  g({
    type: v("type"),
    text: f()
  }),
  g({ type: v("wait") }),
  g({
    type: v("move"),
    x: k(),
    y: k()
  }),
  g({
    type: v("keypress"),
    keys: U(f())
  }),
  g({
    type: v("drag"),
    path: U(g({ x: k(), y: k() }))
  })
]), Vd = ge("type", [
  Ed,
  Od,
  Qi,
  Pd
]), Vs = Re.extend({
  /**
   * Any item without a type is treated as a message
   */
  type: v("message").optional()
}), Zr = Vs.extend({
  /**
   * Representing a message from the assistant (i.e. the model)
   */
  role: v("assistant"),
  /**
   * The status of the message.
   */
  status: ae(["in_progress", "completed", "incomplete"]),
  /**
   * The content of the message.
   */
  content: U(Vd)
}), Wd = ge("type", [
  qs,
  Yi,
  Xi,
  Qi
]), ea = Vs.extend({
  // type: z.literal('message'),
  /**
   * Representing a message from the user
   */
  role: v("user"),
  /**
   * The content of the message.
   */
  content: U(Wd).or(f())
}), ta = Vs.extend({
  // type: z.literal('message'),
  /**
   * Representing a system message to the user
   */
  role: v("system"),
  /**
   * The content of the message.
   */
  content: f()
});
ge("role", [
  ta,
  Zr,
  ea
]);
const Pn = Re.extend({
  type: v("hosted_tool_call"),
  /**
   * The name of the hosted tool. For example `web_search_call` or `file_search_call`
   */
  name: f().describe("The name of the hosted tool"),
  /**
   * The arguments of the hosted tool call.
   */
  arguments: f().describe("The arguments of the hosted tool call").optional(),
  /**
   * The status of the tool call.
   */
  status: f().optional(),
  /**
   * The primary output of the tool call. Additional output might be in the `providerData` field.
   */
  output: f().optional()
}), Nn = Re.extend({
  type: v("function_call"),
  /**
   * The ID of the tool call. Required to match up the respective tool call result.
   */
  callId: f().describe("The ID of the tool call"),
  /**
   * The name of the function.
   */
  name: f().describe("The name of the function"),
  /**
   * The status of the function call.
   */
  status: ae(["in_progress", "completed", "incomplete"]).optional(),
  /**
   * The arguments of the function call.
   */
  arguments: f()
}), Hd = ge("type", [
  Nd,
  Bd,
  Jd
]), Kd = ge("type", [
  qs,
  Yi,
  Xi
]), Pr = Re.extend({
  type: v("function_call_result"),
  /**
   * The name of the tool that was called
   */
  name: f().describe("The name of the tool"),
  /**
   * The ID of the tool call. Required to match up the respective tool call result.
   */
  callId: f().describe("The ID of the tool call"),
  /**
   * The status of the tool call.
   */
  status: ae(["in_progress", "completed", "incomplete"]),
  /**
   * The output of the tool call.
   */
  output: Ge([
    f(),
    Hd,
    U(Kd)
  ]).describe("Output returned by the tool call. Supports plain strings, legacy ToolOutput items, or structured input_* items.")
}), Ws = Re.extend({
  type: v("computer_call"),
  /**
   * The ID of the computer call. Required to match up the respective computer call result.
   */
  callId: f().describe("The ID of the computer call"),
  /**
   * The status of the computer call.
   */
  status: ae(["in_progress", "completed", "incomplete"]),
  /**
   * The action to be performed by the computer.
   */
  action: qd
}), na = Re.extend({
  type: v("computer_call_result"),
  /**
   * The ID of the computer call. Required to match up the respective computer call result.
   */
  callId: f().describe("The ID of the computer call"),
  /**
   * The output of the computer call.
   */
  output: Gd
}), Yd = g({
  commands: U(f()),
  timeoutMs: k().int().min(0).optional(),
  maxOutputLength: k().int().min(0).optional()
}), Ur = Re.extend({
  type: v("shell_call"),
  callId: f(),
  status: ae(["in_progress", "completed", "incomplete"]).optional(),
  action: Yd
}), Xd = ge("type", [
  g({ type: v("timeout") }),
  g({
    type: v("exit"),
    exitCode: k().int().nullable()
  })
]), Qd = g({
  stdout: f(),
  stderr: f(),
  outcome: Xd
}).passthrough(), Hs = Re.extend({
  type: v("shell_call_output"),
  callId: f(),
  maxOutputLength: k().optional(),
  output: U(Qd)
}), ep = g({
  type: v("create_file"),
  path: f(),
  diff: f()
}), tp = g({
  type: v("update_file"),
  path: f(),
  diff: f()
}), np = g({
  type: v("delete_file"),
  path: f()
}), rp = ge("type", [
  ep,
  tp,
  np
]), zr = Re.extend({
  type: v("apply_patch_call"),
  callId: f(),
  status: ae(["in_progress", "completed"]),
  operation: rp
}), Ks = Re.extend({
  type: v("apply_patch_call_output"),
  callId: f(),
  status: ae(["completed", "failed"]),
  output: f().optional()
}), sp = ge("type", [
  Ws,
  Ur,
  zr,
  Nn,
  Pn
]), Ys = de.extend({
  id: f().optional(),
  type: v("reasoning"),
  /**
   * The user facing representation of the reasoning. Additional information might be in the `providerData` field.
   */
  content: U(qs),
  /**
   * The raw reasoning text from the model.
   */
  rawContent: U(Rd).optional()
}), ra = Re.extend({
  type: v("compaction"),
  /**
   * Encrypted payload returned by the compaction endpoint.
   */
  encrypted_content: f(),
  /**
   * Identifier for the compaction item.
   */
  id: f().optional(),
  /**
   * Identifier for the generator of this compaction item.
   */
  created_by: f().optional()
}), sa = Re.extend({
  type: v("unknown")
}), Xs = ge("type", [
  Zr,
  Pn,
  Nn,
  Ws,
  Ur,
  zr,
  Pr,
  Hs,
  Ks,
  Ys,
  ra,
  sa
]), op = Ge([
  ea,
  Zr,
  ta,
  Pn,
  Nn,
  Ws,
  Ur,
  zr,
  Pr,
  na,
  Hs,
  Ks,
  Ys,
  ra,
  sa
]), ip = g({
  inputTokens: k(),
  outputTokens: k(),
  totalTokens: k(),
  inputTokensDetails: ne(f(), k()).optional(),
  outputTokensDetails: ne(f(), k()).optional(),
  endpoint: f().optional()
}), ap = g({
  requests: k().optional(),
  inputTokens: k(),
  outputTokens: k(),
  totalTokens: k(),
  inputTokensDetails: Ge([
    ne(f(), k()),
    U(ne(f(), k()))
  ]).optional(),
  outputTokensDetails: Ge([
    ne(f(), k()),
    U(ne(f(), k()))
  ]).optional(),
  requestUsageEntries: U(ip).optional()
}), oa = de.extend({
  type: v("output_text_delta"),
  /**
   * The delta text that was streamed by the modelto the user.
   */
  delta: f()
}), up = de.extend({
  type: v("response_started")
}), ia = de.extend({
  type: v("response_done"),
  /**
   * The response from the model.
   */
  response: de.extend({
    /**
     * The ID of the response.
     */
    id: f(),
    /**
     * The usage data for the response.
     */
    usage: ap,
    /**
     * The output from the model.
     */
    output: U(Xs)
  })
}), cp = de.extend({
  type: v("model"),
  event: B().describe("The event from the model")
});
ge("type", [
  oa,
  ia,
  up,
  cp
]);
function lp(...t) {
  const e = t.filter(Boolean);
  if (e.length === 0)
    return;
  const n = AbortSignal.any;
  if (typeof n == "function")
    try {
      return n(e);
    } catch (o) {
      E.debug(`AbortSignal.any failed, falling back: ${o}`);
    }
  const r = new AbortController(), s = (o) => {
    r.signal.aborted || r.abort(o);
  };
  for (const o of e) {
    if (o.aborted) {
      s(o.reason);
      break;
    }
    o.addEventListener("abort", () => s(o.reason), {
      once: !0
    });
  }
  return r.signal;
}
class aa {
  constructor(e) {
    y(this, "state");
    this.state = e;
  }
  /**
   * The history of the agent run. This includes the input items and the new items generated during
   * the agent run.
   *
   * This can be used as inputs for the next agent run.
   */
  get history() {
    return Rn(this.input, this.newItems);
  }
  /**
   * The new items generated during the agent run. These include things like new messages, tool
   * calls and their outputs, etc.
   *
   * It does not include information about the agents and instead represents the model data.
   *
   * For the output including the agents, use the `newItems` property.
   */
  get output() {
    return Rn([], this.newItems);
  }
  /**
   * A copy of the original input items.
   */
  get input() {
    return this.state._originalInput;
  }
  /**
   * The run items generated during the agent run. This associates the model data with the agents.
   *
   * For the model data that can be used as inputs for the next agent run, use the `output` property.
   */
  get newItems() {
    return this.state._generatedItems;
  }
  /**
   * The raw LLM responses generated by the model during the agent run.
   */
  get rawResponses() {
    return this.state._modelResponses;
  }
  /**
   * The last response ID generated by the model during the agent run.
   */
  get lastResponseId() {
    const e = this.rawResponses;
    return e && e.length > 0 ? e[e.length - 1].responseId : void 0;
  }
  /**
   * The last agent that was run
   */
  get lastAgent() {
    return this.state._currentAgent;
  }
  /**
   * Guardrail results for the input messages.
   */
  get inputGuardrailResults() {
    return this.state._inputGuardrailResults;
  }
  /**
   * Guardrail results for the final output of the agent.
   */
  get outputGuardrailResults() {
    return this.state._outputGuardrailResults;
  }
  /**
   * Guardrail results for tool inputs.
   */
  get toolInputGuardrailResults() {
    return this.state._toolInputGuardrailResults;
  }
  /**
   * Guardrail results for tool outputs.
   */
  get toolOutputGuardrailResults() {
    return this.state._toolOutputGuardrailResults;
  }
  /**
   * Any interruptions that occurred during the agent run for example for tool approvals.
   */
  get interruptions() {
    var e;
    return ((e = this.state._currentStep) == null ? void 0 : e.type) === "next_step_interruption" ? this.state._currentStep.data.interruptions : [];
  }
  /**
   * The final output of the agent. If the output type was set to anything other than `text`,
   * this will be parsed either as JSON or using the Zod schema you provided.
   */
  get finalOutput() {
    var e;
    if (((e = this.state._currentStep) == null ? void 0 : e.type) === "next_step_final_output")
      return this.state._currentAgent.processFinalOutput(this.state._currentStep.output);
    E.warn("Accessed finalOutput before agent run is completed.");
  }
}
class es extends aa {
  constructor(e) {
    super(e);
  }
}
var Fn, ct, Ct, Te, Ot, tn, nn, Ln, rn, Zn;
class ua extends aa {
  constructor(n = {}) {
    super(n.state);
    /**
     * The current turn number
     */
    y(this, "currentTurn", 0);
    /**
     * The maximum number of turns that can be run
     */
    y(this, "maxTurns");
    C(this, Fn, null);
    C(this, ct);
    C(this, Ct);
    C(this, Te);
    C(this, Ot);
    C(this, tn);
    C(this, nn);
    C(this, Ln);
    C(this, rn, !1);
    C(this, Zn);
    if (S(this, Ct, new AbortController()), S(this, ct, lp(n.signal, p(this, Ct).signal)), S(this, Ot, new bd({
      start: (r) => {
        S(this, Te, r);
      },
      cancel: () => {
        p(this, Ct).signal.aborted || p(this, Ct).abort();
      }
    })), S(this, tn, new Promise((r, s) => {
      S(this, nn, r), S(this, Ln, s);
    })), p(this, ct)) {
      const r = () => {
        var o;
        if (p(this, rn))
          return;
        S(this, rn, !0);
        const s = p(this, Te);
        if (S(this, Te, void 0), s)
          try {
            s.close();
          } catch (i) {
            E.debug(`Failed to close readable stream on abort: ${i}`);
          }
        (o = p(this, nn)) == null || o.call(this);
      };
      p(this, ct).aborted ? r() : p(this, ct).addEventListener("abort", r, {
        once: !0
      });
    }
  }
  /**
   * The current agent that is running
   */
  get currentAgent() {
    return this.lastAgent;
  }
  /**
   * @internal
   * Adds an item to the stream of output items
   */
  _addItem(n) {
    var r;
    this.cancelled || (r = p(this, Te)) == null || r.enqueue(n);
  }
  /**
   * @internal
   * Indicates that the stream has been completed
   */
  _done() {
    var n;
    !this.cancelled && p(this, Te) && (p(this, Te).close(), S(this, Te, void 0), (n = p(this, nn)) == null || n.call(this));
  }
  /**
   * @internal
   * Handles an error in the stream loop.
   */
  _raiseError(n) {
    var r;
    !this.cancelled && p(this, Te) && (p(this, Te).error(n), S(this, Te, void 0)), S(this, Fn, n), (r = p(this, Ln)) == null || r.call(this, n), p(this, tn).catch((s) => {
      E.debug(`Resulted in an error: ${s}`);
    });
  }
  /**
   * Returns true if the stream has been cancelled.
   */
  get cancelled() {
    return p(this, rn);
  }
  /**
   * Returns the underlying readable stream.
   * @returns A readable stream of the agent run.
   */
  toStream() {
    return p(this, Ot);
  }
  /**
   * Await this promise to ensure that the stream has been completed if you are not consuming the
   * stream directly.
   */
  get completed() {
    return p(this, tn);
  }
  /**
   * Error thrown during the run, if any.
   */
  get error() {
    return p(this, Fn);
  }
  toTextStream(n = {}) {
    const r = p(this, Ot).pipeThrough(new Id({
      transform(s, o) {
        if (s.type === "raw_model_stream_event" && s.data.type === "output_text_delta") {
          const i = oa.parse(s.data);
          o.enqueue(i.delta);
        }
      }
    }));
    return n.compatibleWithNodeStreams ? wd.fromWeb(r) : r;
  }
  [Symbol.asyncIterator]() {
    return p(this, Ot)[Symbol.asyncIterator]();
  }
  /**
   * @internal
   * Sets the stream loop promise that completes when the internal stream loop finishes.
   * This is used to defer trace end until all agent work is complete.
   */
  _setStreamLoopPromise(n) {
    S(this, Zn, n);
  }
  /**
   * @internal
   * Returns a promise that resolves when the stream loop completes.
   * This is used by the tracing system to wait for all agent work before ending the trace.
   */
  _getStreamLoopPromise() {
    return p(this, Zn);
  }
  /**
   * @internal
   * Returns the abort signal that should be used to cancel the streaming run.
   */
  _getAbortSignal() {
    return p(this, ct);
  }
}
Fn = new WeakMap(), ct = new WeakMap(), Ct = new WeakMap(), Te = new WeakMap(), Ot = new WeakMap(), tn = new WeakMap(), nn = new WeakMap(), Ln = new WeakMap(), rn = new WeakMap(), Zn = new WeakMap();
const Jo = Symbol.for("openai.agents.core.asyncLocalStorage");
let ts;
function st() {
  try {
    const t = globalThis, e = t[Jo];
    if (e)
      return e;
    const n = new Bo();
    return t[Jo] = n, n;
  } catch {
    return ts || (ts = new Bo()), ts;
  }
}
function ir() {
  const t = st().getStore();
  if ((t == null ? void 0 : t.active) === !0)
    return t;
}
function _n() {
  const t = ir();
  return t != null && t.trace ? t.trace : null;
}
function Dn() {
  const t = ir();
  return t != null && t.span ? t.span : null;
}
function ca(t, e, n) {
  return async () => {
    const r = _n();
    if (!r)
      throw new Error("No trace found");
    let s = !1, o = !1;
    const i = () => {
      e.active = !1, e.trace = void 0, e.span = void 0, e.previousSpan = void 0, st().enterWith(n);
    };
    try {
      await r.start(), o = !0;
      const a = await t(r);
      if (a instanceof ua) {
        const u = a._getStreamLoopPromise();
        if (u)
          return s = !0, u.finally(async () => {
            try {
              o && await r.end();
            } finally {
              i();
            }
          }), a;
      }
      return o && await r.end(), a;
    } finally {
      s || i();
    }
  };
}
async function dp(t, e, n = {}) {
  const s = {
    trace: typeof t == "string" ? We().createTrace({
      ...n,
      name: t
    }) : t,
    active: !0
  }, o = st().getStore();
  return st().run(s, ca(e, s, o));
}
async function pp(t, e = {}) {
  if (_n())
    return await t();
  const s = {
    trace: We().createTrace(e),
    active: !0
  }, o = st().getStore();
  return st().run(s, ca(t, s, o));
}
function Qs(t) {
  const e = ir();
  if (!e)
    throw new Error("No existing trace found");
  e.span && (e.span.previousSpan = e.previousSpan, e.previousSpan = e.span), t.previousSpan = e.span ?? e.previousSpan, e.span = t, st().enterWith(e);
}
function Sn() {
  var e;
  const t = ir();
  t && (t.span = t.previousSpan, t.previousSpan = (e = t.previousSpan) == null ? void 0 : e.previousSpan, st().enterWith(t));
}
function Jt(t) {
  const e = Dn();
  e && e.setError(t);
}
function fp(t) {
  var e, n, r;
  return {
    trace: (e = t.trace) == null ? void 0 : e.clone(),
    span: (n = t.span) == null ? void 0 : n.clone(),
    previousSpan: (r = t.previousSpan) == null ? void 0 : r.clone(),
    active: t.active
  };
}
function ks(t) {
  const e = ir();
  if (!e)
    return t();
  const n = fp(e);
  return st().run(n, t);
}
class hp {
  async export(e) {
    if ($i.disabled) {
      E.debug("Tracing is disabled. Skipping export");
      return;
    }
    for (const n of e)
      n.type === "trace" ? console.log(`[Exporter] Export trace traceId=${n.traceId} name=${n.name}${n.groupId ? ` groupId=${n.groupId}` : ""}`) : console.log(`[Exporter] Export span: ${JSON.stringify(n)}`);
  }
}
var Un, sn, zn, Bn, on, _e, Qe, lt, dt, an, Se, Cs, Os, Kt;
class mp {
  constructor(e, {
    maxQueueSize: n = 1e3,
    maxBatchSize: r = 100,
    scheduleDelay: s = 5e3,
    // 5 seconds
    exportTriggerRatio: o = 0.8
  } = {}) {
    C(this, Se);
    C(this, Un);
    C(this, sn);
    C(this, zn);
    C(this, Bn);
    C(this, on);
    C(this, _e, []);
    C(this, Qe);
    C(this, lt, null);
    C(this, dt, !1);
    C(this, an, null);
    S(this, Un, n), S(this, sn, r), S(this, zn, s), S(this, Bn, n * o), S(this, on, e), S(this, Qe, Td), E.debug("Automatic trace export loop is not supported in this environment. You need to manually call `getGlobalTraceProvider().forceFlush()` to export traces.");
  }
  start() {
    S(this, an, new AbortController()), W(this, Se, Os).call(this);
  }
  async onTraceStart(e) {
    await W(this, Se, Cs).call(this, e);
  }
  async onTraceEnd(e) {
  }
  async onSpanStart(e) {
  }
  async onSpanEnd(e) {
    await W(this, Se, Cs).call(this, e);
  }
  async shutdown(e) {
    var n;
    for (e && p(this, Qe).setTimeout(() => {
      var r;
      (r = p(this, an)) == null || r.abort();
    }, e), E.debug("Shutting down gracefully"); p(this, _e).length > 0; ) {
      if (E.debug(`Waiting for buffer to empty. Items left: ${p(this, _e).length}`), p(this, dt) || await W(this, Se, Kt).call(this, !0), (n = p(this, an)) != null && n.signal.aborted) {
        E.debug("Timeout reached, force flushing"), await W(this, Se, Kt).call(this, !0);
        break;
      }
      await new Promise((r) => p(this, Qe).setTimeout(r, 500));
    }
    E.debug("Buffer empty. Exiting"), p(this, Qe) && p(this, lt) && p(this, Qe).clearTimeout(p(this, lt));
  }
  async forceFlush() {
    p(this, _e).length > 0 && await W(this, Se, Kt).call(this, !0);
  }
}
Un = new WeakMap(), sn = new WeakMap(), zn = new WeakMap(), Bn = new WeakMap(), on = new WeakMap(), _e = new WeakMap(), Qe = new WeakMap(), lt = new WeakMap(), dt = new WeakMap(), an = new WeakMap(), Se = new WeakSet(), Cs = async function(e) {
  if (p(this, _e).length + 1 > p(this, Un)) {
    E.error("Dropping trace because buffer is full");
    return;
  }
  p(this, _e).push(e), p(this, _e).length > p(this, Bn) && await W(this, Se, Kt).call(this);
}, Os = function() {
  S(this, lt, p(this, Qe).setTimeout(async () => {
    await W(this, Se, Kt).call(this), W(this, Se, Os).call(this);
  }, p(this, zn))), typeof p(this, lt).unref == "function" && p(this, lt).unref();
}, Kt = async function(e = !1) {
  if (p(this, _e).length !== 0) {
    if (E.debug(`Exporting batches. Force: ${e}. Buffer size: ${p(this, _e).length}`), e || p(this, _e).length < p(this, sn)) {
      const n = [...p(this, _e)];
      S(this, _e, []), S(this, dt, !0), await p(this, on).export(n), S(this, dt, !1);
    } else if (p(this, _e).length > 0) {
      const n = p(this, _e).splice(0, p(this, sn));
      S(this, dt, !0), await p(this, on).export(n), S(this, dt, !1);
    }
  }
};
var xe;
class gp {
  constructor() {
    C(this, xe, []);
  }
  start() {
    for (const e of p(this, xe))
      e.start && e.start();
  }
  addTraceProcessor(e) {
    p(this, xe).push(e);
  }
  setProcessors(e) {
    E.debug("Shutting down old processors");
    for (const n of p(this, xe))
      n.shutdown();
    S(this, xe, e);
  }
  async onTraceStart(e) {
    for (const n of p(this, xe))
      await n.onTraceStart(e);
  }
  async onTraceEnd(e) {
    for (const n of p(this, xe))
      await n.onTraceEnd(e);
  }
  async onSpanStart(e) {
    for (const n of p(this, xe))
      await n.onSpanStart(e);
  }
  async onSpanEnd(e) {
    for (const n of p(this, xe))
      await n.onSpanEnd(e);
  }
  async shutdown(e) {
    for (const n of p(this, xe))
      await n.shutdown(e);
  }
  async forceFlush() {
    for (const e of p(this, xe))
      await e.forceFlush();
  }
}
xe = new WeakMap();
let ns = null, rs = null;
function yp() {
  return ns || (ns = new hp()), ns;
}
function la() {
  return rs || (rs = new mp(yp())), rs;
}
function Go() {
  return (/* @__PURE__ */ new Date()).toISOString();
}
function da() {
  return `trace_${Hi().replace(/-/g, "")}`;
}
function _p() {
  return `span_${Hi().replace(/-/g, "").slice(0, 24)}`;
}
function vp(t) {
  return Object.fromEntries(Object.entries(t).filter(([e]) => !e.startsWith("_")));
}
var Jn, Gn, qn, Vn, Et, pt, ft, Rt, un, Wn;
const ao = class ao {
  constructor(e, n) {
    y(this, "type", "trace.span");
    C(this, Jn);
    C(this, Gn);
    C(this, qn);
    C(this, Vn);
    C(this, Et);
    C(this, pt);
    C(this, ft);
    C(this, Rt);
    C(this, un);
    C(this, Wn);
    S(this, Gn, e.traceId), S(this, qn, e.spanId ?? _p()), S(this, Jn, e.data), S(this, Et, n), S(this, Vn, e.parentId ?? null), S(this, Rt, e.error ?? null), S(this, pt, e.startedAt ?? null), S(this, ft, e.endedAt ?? null), S(this, un, e.tracingApiKey);
  }
  get traceId() {
    return p(this, Gn);
  }
  get spanData() {
    return p(this, Jn);
  }
  get spanId() {
    return p(this, qn);
  }
  get parentId() {
    return p(this, Vn);
  }
  get previousSpan() {
    return p(this, Wn);
  }
  set previousSpan(e) {
    S(this, Wn, e);
  }
  start() {
    if (p(this, pt)) {
      E.warn("Span already started");
      return;
    }
    S(this, pt, Go()), p(this, Et).onSpanStart(this);
  }
  end() {
    if (p(this, ft)) {
      E.debug("Span already finished", this.spanData);
      return;
    }
    S(this, ft, Go()), p(this, Et).onSpanEnd(this);
  }
  setError(e) {
    S(this, Rt, e);
  }
  get error() {
    return p(this, Rt);
  }
  get startedAt() {
    return p(this, pt);
  }
  get endedAt() {
    return p(this, ft);
  }
  get tracingApiKey() {
    return p(this, un);
  }
  clone() {
    var n;
    const e = new ao({
      traceId: this.traceId,
      spanId: this.spanId,
      parentId: this.parentId ?? void 0,
      data: this.spanData,
      startedAt: p(this, pt) ?? void 0,
      endedAt: p(this, ft) ?? void 0,
      error: p(this, Rt) ?? void 0,
      tracingApiKey: p(this, un)
    }, p(this, Et));
    return e.previousSpan = (n = this.previousSpan) == null ? void 0 : n.clone(), e;
  }
  toJSON() {
    return {
      object: this.type,
      id: this.spanId,
      trace_id: this.traceId,
      parent_id: this.parentId,
      started_at: this.startedAt,
      ended_at: this.endedAt,
      span_data: vp(this.spanData),
      error: this.error
    };
  }
};
Jn = new WeakMap(), Gn = new WeakMap(), qn = new WeakMap(), Vn = new WeakMap(), Et = new WeakMap(), pt = new WeakMap(), ft = new WeakMap(), Rt = new WeakMap(), un = new WeakMap(), Wn = new WeakMap();
let Mn = ao;
class at extends Mn {
  constructor(e, n) {
    super({ traceId: "no-op", spanId: "no-op", data: e }, n);
  }
  start() {
  }
  end() {
  }
  setError() {
  }
  toJSON() {
    return null;
  }
}
var cn, et;
const uo = class uo {
  constructor(e, n) {
    y(this, "type", "trace");
    y(this, "traceId");
    y(this, "name");
    y(this, "groupId", null);
    y(this, "metadata");
    y(this, "tracingApiKey");
    C(this, cn);
    C(this, et);
    this.traceId = e.traceId ?? da(), this.name = e.name ?? "Agent workflow", this.groupId = e.groupId ?? null, this.metadata = e.metadata ?? {}, this.tracingApiKey = e.tracingApiKey, S(this, cn, n ?? la()), S(this, et, e.started ?? !1);
  }
  async start() {
    p(this, et) || (S(this, et, !0), await p(this, cn).onTraceStart(this));
  }
  async end() {
    p(this, et) && (S(this, et, !1), await p(this, cn).onTraceEnd(this));
  }
  clone() {
    return new uo({
      traceId: this.traceId,
      name: this.name,
      groupId: this.groupId ?? void 0,
      metadata: this.metadata,
      started: p(this, et),
      tracingApiKey: this.tracingApiKey
    });
  }
  /**
   * Serializes the trace for export or persistence.
   * Set `includeTracingApiKey` to true only when you intentionally need to persist the
   * exporter credentials (for example, when handing off a run to another process that
   * cannot access the original environment). Defaults to false to avoid leaking secrets.
   */
  toJSON(e) {
    const n = {
      object: this.type,
      id: this.traceId,
      workflow_name: this.name,
      group_id: this.groupId,
      metadata: this.metadata
    };
    return e != null && e.includeTracingApiKey && this.tracingApiKey && (n.tracing_api_key = this.tracingApiKey), n;
  }
};
cn = new WeakMap(), et = new WeakMap();
let jn = uo;
class ss extends jn {
  constructor() {
    super({});
  }
  async start() {
  }
  async end() {
  }
  toJSON() {
    return null;
  }
}
var me, Pt, jr, fa;
class pa {
  constructor() {
    C(this, jr);
    C(this, me);
    C(this, Pt);
    S(this, me, new gp()), S(this, Pt, $i.disabled), W(this, jr, fa).call(this);
  }
  /**
   * Add a processor to the list of processors. Each processor will receive all traces/spans.
   *
   * @param processor - The processor to add.
   */
  registerProcessor(e) {
    p(this, me).addTraceProcessor(e);
  }
  /**
   * Set the list of processors. This will replace any existing processors.
   *
   * @param processors - The list of processors to set.
   */
  setProcessors(e) {
    p(this, me).setProcessors(e);
  }
  /**
   * Get the current trace.
   *
   * @returns The current trace.
   */
  getCurrentTrace() {
    return _n();
  }
  getCurrentSpan() {
    return Dn();
  }
  setDisabled(e) {
    S(this, Pt, e);
  }
  startExportLoop() {
    p(this, me).start();
  }
  createTrace(e) {
    if (p(this, Pt))
      return E.debug("Tracing is disabled, Not creating trace %o", e), new ss();
    const n = e.traceId ?? da(), r = e.name ?? "Agent workflow";
    return E.debug("Creating trace %s with name %s", n, r), new jn({ ...e, name: r, traceId: n }, p(this, me));
  }
  createSpan(e, n) {
    if (p(this, Pt) || e.disabled)
      return E.debug("Tracing is disabled, Not creating span %o", e), new at(e.data, p(this, me));
    let r, s, o;
    if (n) {
      if (n instanceof jn) {
        if (n instanceof ss)
          return E.debug("Parent trace is no-op, returning NoopSpan"), new at(e.data, p(this, me));
        s = n.traceId, o = n.tracingApiKey;
      } else if (n instanceof Mn) {
        if (n instanceof at)
          return E.debug("Parent span is no-op, returning NoopSpan"), new at(e.data, p(this, me));
        r = n.spanId, s = n.traceId, o = n.tracingApiKey;
      }
    } else {
      const i = _n(), a = Dn();
      if (!i)
        return E.error("No active trace. Make sure to start a trace with `withTrace()` first. Returning NoopSpan."), new at(e.data, p(this, me));
      if (a instanceof at || i instanceof ss)
        return E.debug(`Parent ${a} or ${i} is no-op, returning NoopSpan`), new at(e.data, p(this, me));
      s = i.traceId, o = i.tracingApiKey, a ? (E.debug("Using parent span %s", a.spanId), r = a.spanId) : E.debug("No parent span, using current trace %s", i.traceId);
    }
    return s ? (E.debug(`Creating span ${JSON.stringify(e.data)} with id ${e.spanId ?? s}`), new Mn({
      ...e,
      traceId: s,
      parentId: r,
      tracingApiKey: o ?? e.tracingApiKey
    }, p(this, me))) : (E.error("No traceId found. Make sure to start a trace with `withTrace()` first. Returning NoopSpan."), new at(e.data, p(this, me)));
  }
  async shutdown(e) {
    try {
      E.debug("Shutting down tracing provider"), await p(this, me).shutdown(e);
    } catch (n) {
      E.error("Error shutting down tracing provider %o", n);
    }
  }
  async forceFlush() {
    await p(this, me).forceFlush();
  }
}
me = new WeakMap(), Pt = new WeakMap(), jr = new WeakSet(), /** Adds listeners to `process` to ensure `shutdown` occurs before exit. */
fa = function() {
  if (typeof process < "u" && typeof process.on == "function") {
    const e = async () => {
      const n = setTimeout(() => {
        console.warn("Cleanup timeout, forcing exit"), process.exit(1);
      }, 5e3);
      try {
        await this.shutdown();
      } finally {
        clearTimeout(n);
      }
    };
    process.on("beforeExit", e), process.on("SIGINT", async () => {
      await e(), qo("SIGINT") || process.exit(130);
    }), process.on("SIGTERM", async () => {
      await e(), qo("SIGTERM") || process.exit(0);
    }), process.on("unhandledRejection", async (n, r) => {
      E.error("Unhandled rejection", n, r), await e(), wp("unhandledRejection") || process.exit(1);
    });
  }
};
let os;
function qo(t) {
  return process.listeners(t).length > 1;
}
function wp(t) {
  return process.listeners(t).length > 1;
}
function We() {
  const t = Symbol.for("openai.agents.core.traceProvider");
  try {
    const e = globalThis, n = e[t];
    if (n)
      return n;
    const r = Object.getOwnPropertyDescriptor(e, t);
    if (r && r.writable === !1 && r.configurable === !1 && !r.set)
      return lr();
    if (!r)
      try {
        Object.defineProperty(e, t, {
          value: void 0,
          writable: !0,
          configurable: !0
        });
      } catch {
        return lr();
      }
    try {
      const s = new pa();
      return e[t] = s, s;
    } catch {
      return lr();
    }
  } catch {
    return lr();
  }
}
function lr() {
  return os || (os = new pa()), os;
}
function Br(t) {
  return async (e, ...n) => ks(async () => {
    const r = t(...n);
    Qs(r);
    try {
      return r.start(), await e(r);
    } catch (s) {
      throw r.setError({
        message: s.message,
        data: s.data
      }), s;
    } finally {
      r.end(), Sn();
    }
  });
}
function bp(t, e) {
  var n;
  return We().createSpan({
    ...t,
    data: {
      type: "agent",
      name: ((n = t == null ? void 0 : t.data) == null ? void 0 : n.name) ?? "Agent",
      ...t == null ? void 0 : t.data
    }
  }, e);
}
function Ip(t, e) {
  var n, r;
  return We().createSpan({
    ...t,
    data: {
      type: "function",
      input: ((n = t == null ? void 0 : t.data) == null ? void 0 : n.input) ?? "",
      output: ((r = t == null ? void 0 : t.data) == null ? void 0 : r.output) ?? "",
      ...t == null ? void 0 : t.data
    }
  }, e);
}
const ha = Br(Ip);
function Sp(t, e) {
  return We().createSpan({
    ...t,
    data: { type: "handoff", ...t == null ? void 0 : t.data }
  }, e);
}
const Tp = Br(Sp);
function xp(t, e) {
  return We().createSpan({
    ...t,
    data: {
      type: "guardrail",
      triggered: !1,
      ...t == null ? void 0 : t.data
    }
  }, e);
}
const Ap = Br(xp);
function kp(t, e) {
  return We().createSpan({
    ...t,
    data: {
      type: "mcp_tools",
      ...t == null ? void 0 : t.data
    }
  }, e);
}
const Cp = Br(kp);
function Op(t) {
  We().registerProcessor(t);
}
class eo {
  on(e, n) {
    return this.eventEmitter.on(e, n), this.eventEmitter;
  }
  off(e, n) {
    return this.eventEmitter.off(e, n), this.eventEmitter;
  }
  emit(e, ...n) {
    return this.eventEmitter.emit(e, ...n);
  }
  once(e, n) {
    return this.eventEmitter.once(e, n), this.eventEmitter;
  }
}
class Ep extends eo {
  constructor() {
    super(...arguments);
    y(this, "eventEmitter", new Lr());
  }
}
class Rp extends eo {
  constructor() {
    super(...arguments);
    y(this, "eventEmitter", new Lr());
  }
}
const Pp = "OPENAI_DEFAULT_MODEL";
function Jr(t) {
  return t.startsWith("gpt-5-chat") ? !1 : t.startsWith("gpt-5");
}
function ma() {
  return Jr(ga());
}
function ga() {
  var e;
  return ((e = ji()[Pp]) == null ? void 0 : e.toLowerCase()) ?? "gpt-4.1";
}
function Np(t) {
  const e = ga();
  return Jr(e) ? {
    // We chose "low" instead of "minimal" because some of the built-in tools
    // (e.g., file search, image generation, etc.) do not support "minimal"
    // If you want to use "minimal" reasoning effort, you can pass your own model settings
    reasoning: { effort: "low" },
    text: { verbosity: "low" }
  } : {};
}
function ya(t) {
  return JSON.stringify({ assistant: t.name });
}
function Dp(t) {
  return `transfer_to_${yr(t.name)}`;
}
function Mp(t) {
  return `Handoff to the ${t.name} agent to handle the request. ${t.handoffDescription ?? ""}`;
}
class _a {
  constructor(e, n) {
    /**
     * The name of the tool that represents the handoff.
     */
    y(this, "toolName");
    /**
     * The description of the tool that represents the handoff.
     */
    y(this, "toolDescription");
    /**
     * The JSON schema for the handoff input. Can be empty if the handoff does not take an input
     */
    y(this, "inputJsonSchema", {
      type: "object",
      properties: {},
      required: [],
      additionalProperties: !1
    });
    /**
     * Whether the input JSON schema is in strict mode. We **strongly** recommend setting this to
     * true, as it increases the likelihood of correct JSON input.
     */
    y(this, "strictJsonSchema", !0);
    /**
     * The function that invokes the handoff. The parameters passed are:
     * 1. The handoff run context
     * 2. The arguments from the LLM, as a JSON string. Empty string if inputJsonSchema is empty.
     *
     * Must return an agent
     */
    y(this, "onInvokeHandoff");
    /**
     * The name of the agent that is being handed off to.
     */
    y(this, "agentName");
    /**
     * A function that filters the inputs that are passed to the next agent. By default, the new agent
     * sees the entire conversation history. In some cases, you may want to filter inputs e.g. to
     * remove older inputs, or remove tools from existing inputs.
     *
     * The function will receive the entire conversation hisstory so far, including the input item
     * that triggered the handoff and a tool call output item representing the handoff tool's output.
     *
     * You are free to modify the input history or new items as you see fit. The next agent that runs
     * will receive `handoffInputData.allItems
     */
    y(this, "inputFilter");
    /**
     * The agent that is being handed off to.
     */
    y(this, "agent");
    y(this, "isEnabled", async () => !0);
    this.agentName = e.name, this.onInvokeHandoff = n, this.toolName = Dp(e), this.toolDescription = Mp(e), this.agent = e;
  }
  /**
   * Returns a function tool definition that can be used to invoke the handoff.
   */
  getHandoffAsFunctionTool() {
    return {
      type: "function",
      name: this.toolName,
      description: this.toolDescription,
      parameters: this.inputJsonSchema,
      strict: this.strictJsonSchema
    };
  }
}
function va(t, e = {}) {
  let n;
  const r = !!e.onHandoff, s = !!e.inputType;
  if (!(r === s))
    throw new te("You must provide either both `onHandoff` and `inputType` or neither.");
  async function i(u, d) {
    var l;
    if (n) {
      if (!d)
        throw Jt({
          message: `Handoff function expected non empty input but got: ${d}`,
          data: {
            details: "input is empty"
          }
        }), new Oe("Handoff function expected non empty input");
      try {
        const c = await n(d);
        e.onHandoff && await e.onHandoff(u, c);
      } catch (c) {
        throw Jt({
          message: "Invalid JSON provided",
          data: {}
        }), E.dontLogToolData || E.error(`Invalid JSON when parsing: ${d}. Error: ${c}`), new Oe("Invalid JSON provided");
      }
    } else
      await ((l = e.onHandoff) == null ? void 0 : l.call(e, u));
    return t;
  }
  const a = new _a(t, i);
  if (typeof e.isEnabled == "function") {
    const u = e.isEnabled;
    a.isEnabled = async ({ runContext: d, agent: l }) => !!await u({ runContext: d, agent: l });
  } else typeof e.isEnabled == "boolean" && (a.isEnabled = async () => e.isEnabled);
  if (e.inputType) {
    const u = zs(e.inputType, a.toolName);
    a.inputJsonSchema = u.schema, a.strictJsonSchema = !0, n = u.parser;
  }
  return e.toolNameOverride && (a.toolName = e.toolNameOverride), e.toolDescriptionOverride && (a.toolDescription = e.toolDescriptionOverride), e.inputFilter && (a.inputFilter = e.inputFilter), a;
}
function jp(t) {
  return t instanceof _a ? t : va(t);
}
class $p {
  /**
   * @param data The raw responses stream events from the LLM.
   */
  constructor(e) {
    y(this, "data");
    /**
     * The type of the event.
     */
    y(this, "type", "raw_model_stream_event");
    this.data = e;
  }
}
class Fp {
  /**
   * @param name The name of the event.
   * @param item The item that was created.
   */
  constructor(e, n) {
    y(this, "name");
    y(this, "item");
    y(this, "type", "run_item_stream_event");
    this.name = e, this.item = n;
  }
}
class Lp {
  /**
   * @param agent The new agent
   */
  constructor(e) {
    y(this, "agent");
    y(this, "type", "agent_updated_stream_event");
    this.agent = e;
  }
}
function wa({ name: t, execute: e, runInParallel: n = !0 }) {
  return {
    type: "input",
    name: t,
    runInParallel: n,
    guardrailFunction: e,
    async run(r) {
      return {
        guardrail: { type: "input", name: t },
        output: await e(r)
      };
    }
  };
}
function to({ name: t, execute: e }) {
  return {
    type: "output",
    name: t,
    guardrailFunction: e,
    async run(n) {
      return {
        guardrail: { type: "output", name: t },
        agent: n.agent,
        agentOutput: n.agentOutput,
        output: await e(n)
      };
    }
  };
}
function Zp() {
  throw new Error("No default model provider set. Make sure to set a provider using setDefaultModelProvider before calling getDefaultModelProvider or pass an explicit provider.");
}
class bn {
  constructor(e) {
    /**
     * The number of input tokens used for this request.
     */
    y(this, "inputTokens");
    /**
     * The number of output tokens used for this request.
     */
    y(this, "outputTokens");
    /**
     * The total number of tokens sent and received for this request.
     */
    y(this, "totalTokens");
    /**
     * Details about the input tokens used for this request.
     */
    y(this, "inputTokensDetails");
    /**
     * Details about the output tokens used for this request.
     */
    y(this, "outputTokensDetails");
    /**
     * The endpoint that produced this usage entry (e.g., responses.create, responses.compact).
     */
    y(this, "endpoint");
    this.inputTokens = (e == null ? void 0 : e.inputTokens) ?? (e == null ? void 0 : e.input_tokens) ?? 0, this.outputTokens = (e == null ? void 0 : e.outputTokens) ?? (e == null ? void 0 : e.output_tokens) ?? 0, this.totalTokens = (e == null ? void 0 : e.totalTokens) ?? (e == null ? void 0 : e.total_tokens) ?? this.inputTokens + this.outputTokens;
    const n = (e == null ? void 0 : e.inputTokensDetails) ?? (e == null ? void 0 : e.input_tokens_details);
    this.inputTokensDetails = n || {};
    const r = (e == null ? void 0 : e.outputTokensDetails) ?? (e == null ? void 0 : e.output_tokens_details);
    this.outputTokensDetails = r || {}, typeof (e == null ? void 0 : e.endpoint) < "u" && (this.endpoint = e.endpoint);
  }
}
class ar {
  constructor(e) {
    /**
     * The number of requests made to the LLM API.
     */
    y(this, "requests");
    /**
     * The number of input tokens used across all requests.
     */
    y(this, "inputTokens");
    /**
     * The number of output tokens used across all requests.
     */
    y(this, "outputTokens");
    /**
     * The total number of tokens sent and received, across all requests.
     */
    y(this, "totalTokens");
    /**
     * Details about the input tokens used across all requests.
     */
    y(this, "inputTokensDetails", []);
    /**
     * Details about the output tokens used across all requests.
     */
    y(this, "outputTokensDetails", []);
    /**
     * List of per-request usage entries for detailed cost calculations.
     */
    y(this, "requestUsageEntries");
    if (typeof e > "u")
      this.requests = 0, this.inputTokens = 0, this.outputTokens = 0, this.totalTokens = 0, this.inputTokensDetails = [], this.outputTokensDetails = [], this.requestUsageEntries = void 0;
    else {
      this.requests = (e == null ? void 0 : e.requests) ?? 1, this.inputTokens = (e == null ? void 0 : e.inputTokens) ?? (e == null ? void 0 : e.input_tokens) ?? 0, this.outputTokens = (e == null ? void 0 : e.outputTokens) ?? (e == null ? void 0 : e.output_tokens) ?? 0, this.totalTokens = (e == null ? void 0 : e.totalTokens) ?? (e == null ? void 0 : e.total_tokens) ?? this.inputTokens + this.outputTokens;
      const n = (e == null ? void 0 : e.inputTokensDetails) ?? (e == null ? void 0 : e.input_tokens_details);
      Array.isArray(n) ? this.inputTokensDetails = n : this.inputTokensDetails = n ? [n] : [];
      const r = (e == null ? void 0 : e.outputTokensDetails) ?? (e == null ? void 0 : e.output_tokens_details);
      Array.isArray(r) ? this.outputTokensDetails = r : this.outputTokensDetails = r ? [r] : [];
      const s = (e == null ? void 0 : e.requestUsageEntries) ?? (e == null ? void 0 : e.request_usage_entries), o = Array.isArray(s) ? s.map((i) => i instanceof bn ? i : new bn(i)) : void 0;
      this.requestUsageEntries = o && o.length > 0 ? o : void 0;
    }
  }
  add(e) {
    var n, r;
    this.requests += e.requests ?? 0, this.inputTokens += e.inputTokens ?? 0, this.outputTokens += e.outputTokens ?? 0, this.totalTokens += e.totalTokens ?? 0, e.inputTokensDetails && this.inputTokensDetails.push(...e.inputTokensDetails), e.outputTokensDetails && this.outputTokensDetails.push(...e.outputTokensDetails), Array.isArray(e.requestUsageEntries) && e.requestUsageEntries.length > 0 ? (this.requestUsageEntries ?? (this.requestUsageEntries = []), this.requestUsageEntries.push(...e.requestUsageEntries.map((s) => s instanceof bn ? s : new bn(s)))) : e.requests === 1 && e.totalTokens > 0 && (this.requestUsageEntries ?? (this.requestUsageEntries = []), this.requestUsageEntries.push(new bn({
      inputTokens: e.inputTokens,
      outputTokens: e.outputTokens,
      totalTokens: e.totalTokens,
      inputTokensDetails: (n = e.inputTokensDetails) == null ? void 0 : n[0],
      outputTokensDetails: (r = e.outputTokensDetails) == null ? void 0 : r[0]
    })));
  }
}
var Ae;
class Yt {
  constructor(e = {}) {
    /**
     * The context object you passed to the `Runner.run()` method.
     */
    y(this, "context");
    /**
     * The usage of the agent run so far. For streamed responses, the usage will be updated in real-time
     */
    y(this, "usage");
    /**
     * A map of tool names to whether they have been approved.
     */
    C(this, Ae);
    this.context = e, this.usage = new ar(), S(this, Ae, /* @__PURE__ */ new Map());
  }
  /**
   * Rebuild the approvals map from a serialized state.
   * @internal
   *
   * @param approvals - The approvals map to rebuild.
   */
  _rebuildApprovals(e) {
    S(this, Ae, new Map(Object.entries(e)));
  }
  /**
   * Check if a tool call has been approved.
   *
   * @param approval - Details about the tool call being evaluated.
   * @returns `true` if the tool call has been approved, `false` if blocked and `undefined` if not yet approved or rejected.
   */
  isToolApproved(e) {
    const { toolName: n, callId: r } = e, s = p(this, Ae).get(n);
    if ((s == null ? void 0 : s.approved) === !0 && s.rejected === !0)
      return E.warn("Tool is permanently approved and rejected at the same time. Approval takes precedence"), !0;
    if ((s == null ? void 0 : s.approved) === !0)
      return !0;
    if ((s == null ? void 0 : s.rejected) === !0)
      return !1;
    const o = Array.isArray(s == null ? void 0 : s.approved) ? s.approved.includes(r) : !1, i = Array.isArray(s == null ? void 0 : s.rejected) ? s.rejected.includes(r) : !1;
    if (o && i)
      return E.warn(`Tool call ${r} is both approved and rejected at the same time. Approval takes precedence`), !0;
    if (o)
      return !0;
    if (i)
      return !1;
  }
  /**
   * Approve a tool call.
   *
   * @param approvalItem - The tool approval item to approve.
   * @param options - Additional approval behavior options.
   */
  approveTool(e, { alwaysApprove: n = !1 } = {}) {
    const r = e.toolName ?? e.rawItem.name;
    if (n) {
      p(this, Ae).set(r, {
        approved: !0,
        rejected: []
      });
      return;
    }
    const s = p(this, Ae).get(r) ?? {
      approved: [],
      rejected: []
    };
    if (Array.isArray(s.approved)) {
      const o = "callId" in e.rawItem ? e.rawItem.callId : e.rawItem.id;
      s.approved.push(o);
    }
    p(this, Ae).set(r, s);
  }
  /**
   * Reject a tool call.
   *
   * @param approvalItem - The tool approval item to reject.
   */
  rejectTool(e, { alwaysReject: n = !1 } = {}) {
    const r = e.toolName ?? e.rawItem.name;
    if (n) {
      p(this, Ae).set(r, {
        approved: !1,
        rejected: !0
      });
      return;
    }
    const s = p(this, Ae).get(r) ?? {
      approved: [],
      rejected: []
    };
    if (Array.isArray(s.rejected)) {
      const o = "callId" in e.rawItem ? e.rawItem.callId : e.rawItem.id;
      s.rejected.push(o);
    }
    p(this, Ae).set(r, s);
  }
  toJSON() {
    return {
      context: this.context,
      usage: this.usage,
      approvals: Object.fromEntries(p(this, Ae).entries())
    };
  }
}
Ae = new WeakMap();
class Vt {
  constructor() {
    y(this, "type", "base_item");
    y(this, "rawItem");
  }
  toJSON() {
    return {
      type: this.type,
      rawItem: this.rawItem
    };
  }
}
class Gr extends Vt {
  constructor(n, r) {
    super();
    y(this, "rawItem");
    y(this, "agent");
    y(this, "type", "message_output_item");
    this.rawItem = n, this.agent = r;
  }
  toJSON() {
    return {
      ...super.toJSON(),
      agent: this.agent.toJSON()
    };
  }
  get content() {
    let n = "";
    for (const r of this.rawItem.content)
      r.type === "output_text" && (n += r.text);
    return n;
  }
}
class Gt extends Vt {
  constructor(n, r) {
    super();
    y(this, "rawItem");
    y(this, "agent");
    y(this, "type", "tool_call_item");
    this.rawItem = n, this.agent = r;
  }
  toJSON() {
    return {
      ...super.toJSON(),
      agent: this.agent.toJSON()
    };
  }
}
class qe extends Vt {
  constructor(n, r, s) {
    super();
    y(this, "rawItem");
    y(this, "agent");
    y(this, "output");
    y(this, "type", "tool_call_output_item");
    this.rawItem = n, this.agent = r, this.output = s;
  }
  toJSON() {
    return {
      ...super.toJSON(),
      agent: this.agent.toJSON(),
      output: vt(this.output)
    };
  }
}
class no extends Vt {
  constructor(n, r) {
    super();
    y(this, "rawItem");
    y(this, "agent");
    y(this, "type", "reasoning_item");
    this.rawItem = n, this.agent = r;
  }
  toJSON() {
    return {
      ...super.toJSON(),
      agent: this.agent.toJSON()
    };
  }
}
class ro extends Vt {
  constructor(n, r) {
    super();
    y(this, "rawItem");
    y(this, "agent");
    y(this, "type", "handoff_call_item");
    this.rawItem = n, this.agent = r;
  }
  toJSON() {
    return {
      ...super.toJSON(),
      agent: this.agent.toJSON()
    };
  }
}
class so extends Vt {
  constructor(n, r, s) {
    super();
    y(this, "rawItem");
    y(this, "sourceAgent");
    y(this, "targetAgent");
    y(this, "type", "handoff_output_item");
    this.rawItem = n, this.sourceAgent = r, this.targetAgent = s;
  }
  toJSON() {
    return {
      ...super.toJSON(),
      sourceAgent: this.sourceAgent.toJSON(),
      targetAgent: this.targetAgent.toJSON()
    };
  }
}
class le extends Vt {
  constructor(n, r, s) {
    super();
    y(this, "rawItem");
    y(this, "agent");
    y(this, "toolName");
    y(this, "type", "tool_approval_item");
    this.rawItem = n, this.agent = r, this.toolName = s, this.toolName = s ?? n.name;
  }
  /**
   * Returns the tool name if available on the raw item or provided explicitly.
   * Kept for backwards compatibility with code that previously relied on `rawItem.name`.
   */
  get name() {
    return this.toolName ?? this.rawItem.name;
  }
  /**
   * Returns the arguments if the raw item has an arguments property otherwise this will be undefined.
   */
  get arguments() {
    return "arguments" in this.rawItem ? this.rawItem.arguments : void 0;
  }
  toJSON() {
    return {
      ...super.toJSON(),
      agent: this.agent.toJSON(),
      toolName: this.toolName
    };
  }
}
var ht;
class Vo {
  constructor() {
    C(this, ht, /* @__PURE__ */ new Map());
  }
  addToolUse(e, n, r = {}) {
    const s = r.allowEmpty ?? !1;
    if (n.length === 0 && !s) {
      const o = p(this, ht).get(e);
      if (!o || o.length > 0)
        return;
    }
    if (!s) {
      const o = p(this, ht).get(e);
      if (o && o.length > 0 && n.length === 0)
        return;
    }
    p(this, ht).set(e, n);
  }
  hasUsedTools(e) {
    return p(this, ht).has(e);
  }
  toJSON() {
    return Object.fromEntries(Array.from(p(this, ht).entries()).map(([e, n]) => [e.name, n]));
  }
}
ht = new WeakMap();
const Up = ge("type", [
  g({
    type: v("next_step_handoff"),
    newAgent: B()
  }),
  g({
    type: v("next_step_final_output"),
    output: f()
  }),
  g({
    type: v("next_step_run_again")
  }),
  g({
    type: v("next_step_interruption"),
    data: ne(f(), B())
  })
]);
class Ze {
  constructor(e, n, r, s, o) {
    y(this, "originalInput");
    y(this, "modelResponse");
    y(this, "preStepItems");
    y(this, "newStepItems");
    y(this, "nextStep");
    this.originalInput = e, this.modelResponse = n, this.preStepItems = r, this.newStepItems = s, this.nextStep = o;
  }
  get generatedItems() {
    return this.preStepItems.concat(this.newStepItems);
  }
}
const Es = "1.1", ba = ["1.0", Es], zp = ae(ba), Fe = g({
  name: f()
}), Bp = g({
  object: v("trace.span"),
  id: f(),
  trace_id: f(),
  parent_id: f().nullable(),
  started_at: f().nullable(),
  ended_at: f().nullable(),
  error: g({
    message: f(),
    data: ne(f(), B()).optional()
  }).nullable(),
  span_data: ne(f(), B())
}), Ia = Bp.extend({
  previous_span: hd(() => Ia).optional()
}), Jp = g({
  inputTokens: k(),
  outputTokens: k(),
  totalTokens: k(),
  inputTokensDetails: ne(f(), k()).optional(),
  outputTokensDetails: ne(f(), k()).optional(),
  endpoint: f().optional()
}), Sa = g({
  requests: k(),
  inputTokens: k(),
  outputTokens: k(),
  totalTokens: k(),
  inputTokensDetails: U(ne(f(), k())).optional(),
  outputTokensDetails: U(ne(f(), k())).optional(),
  requestUsageEntries: U(Jp).optional()
}), Wo = g({
  usage: Sa,
  output: U(Xs),
  responseId: f().optional(),
  providerData: ne(f(), B()).optional()
}), Ta = ge("type", [
  g({
    type: v("message_output_item"),
    rawItem: Zr,
    agent: Fe
  }),
  g({
    type: v("tool_call_item"),
    rawItem: sp.or(Pn),
    agent: Fe
  }),
  g({
    type: v("tool_call_output_item"),
    rawItem: Pr.or(na).or(Hs).or(Ks),
    agent: Fe,
    output: f()
  }),
  g({
    type: v("reasoning_item"),
    rawItem: Ys,
    agent: Fe
  }),
  g({
    type: v("handoff_call_item"),
    rawItem: Nn,
    agent: Fe
  }),
  g({
    type: v("handoff_output_item"),
    rawItem: Pr,
    sourceAgent: Fe,
    targetAgent: Fe
  }),
  g({
    type: v("tool_approval_item"),
    rawItem: Nn.or(Pn).or(Ur).or(zr),
    agent: Fe,
    toolName: f().optional()
  })
]), Gp = g({
  object: v("trace"),
  id: f(),
  workflow_name: f(),
  group_id: f().nullable(),
  metadata: ne(f(), B()),
  // Populated only if the trace was created with a per-run tracingApiKey (e.g., Runner.run({ tracing: { apiKey } }))
  // and serialization opts in to include it. By default this is omitted to avoid persisting secrets.
  tracing_api_key: f().optional().nullable()
}), qp = g({
  newItems: U(Ta),
  toolsUsed: U(f()),
  handoffs: U(g({
    toolCall: B(),
    handoff: B()
  })),
  functions: U(g({
    toolCall: B(),
    tool: B()
  })),
  computerActions: U(g({
    toolCall: B(),
    computer: B()
  })),
  shellActions: U(g({
    toolCall: B(),
    shell: B()
  })).optional(),
  applyPatchActions: U(g({
    toolCall: B(),
    applyPatch: B()
  })).optional(),
  mcpApprovalRequests: U(g({
    requestItem: g({
      // protocol.HostedToolCallItem
      rawItem: g({
        type: v("hosted_tool_call"),
        name: f(),
        arguments: f().optional(),
        status: f().optional(),
        output: f().optional(),
        // this always exists but marked as optional for early version compatibility; when releasing 1.0, we can remove the nullable and optional
        providerData: ne(f(), B()).nullable().optional()
      })
    }),
    // HostedMCPTool
    mcpTool: g({
      type: v("hosted_tool"),
      name: v("hosted_mcp"),
      providerData: ne(f(), B())
    })
  })).optional()
}), xa = g({
  tripwireTriggered: yt(),
  outputInfo: B()
}), Vp = ge("type", [
  g({ type: v("allow") }),
  g({
    type: v("rejectContent"),
    message: f()
  }),
  g({ type: v("throwException") })
]), Aa = g({
  outputInfo: B().optional(),
  behavior: Vp
}), ka = g({
  type: Ge([v("tool_input"), v("tool_output")]),
  name: f()
}), Wp = g({
  guardrail: g({
    type: v("input"),
    name: f()
  }),
  output: xa
}), Hp = g({
  guardrail: g({
    type: v("output"),
    name: f()
  }),
  agentOutput: B(),
  agent: Fe,
  output: xa
}), Kp = g({
  guardrail: ka.extend({
    type: v("tool_input")
  }),
  output: Aa
}), Yp = g({
  guardrail: ka.extend({
    type: v("tool_output")
  }),
  output: Aa
}), Ho = g({
  $schemaVersion: zp,
  currentTurn: k(),
  currentAgent: Fe,
  originalInput: f().or(U(op)),
  modelResponses: U(Wo),
  context: g({
    usage: Sa,
    approvals: ne(f(), g({
      approved: U(f()).or(yt()),
      rejected: U(f()).or(yt())
    })),
    context: ne(f(), B())
  }),
  toolUseTracker: ne(f(), U(f())),
  maxTurns: k(),
  currentAgentSpan: Ia.nullable().optional(),
  noActiveAgentRun: yt(),
  inputGuardrailResults: U(Wp),
  outputGuardrailResults: U(Hp),
  toolInputGuardrailResults: U(Kp).optional().default([]),
  toolOutputGuardrailResults: U(Yp).optional().default([]),
  currentTurnInProgress: yt().optional(),
  currentStep: Up.optional(),
  lastModelResponse: Wo.optional(),
  generatedItems: U(Ta),
  lastProcessedResponse: qp.optional(),
  currentTurnPersistedItemCount: k().int().min(0).optional(),
  conversationId: f().optional(),
  previousResponseId: f().optional(),
  trace: Gp.nullable()
});
class Xe {
  constructor(e, n, r, s) {
    /**
     * Current turn number in the conversation.
     */
    y(this, "_currentTurn", 0);
    /**
     * Whether the current turn has already been counted (useful when resuming mid-turn).
     */
    y(this, "_currentTurnInProgress", !1);
    /**
     * The agent currently handling the conversation.
     */
    y(this, "_currentAgent");
    /**
     * Original user input prior to any processing.
     */
    y(this, "_originalInput");
    /**
     * Responses from the model so far.
     */
    y(this, "_modelResponses");
    /**
     * Conversation identifier when the server manages conversation history.
     */
    y(this, "_conversationId");
    /**
     * Latest response identifier returned by the server for server-managed conversations.
     */
    y(this, "_previousResponseId");
    /**
     * Active tracing span for the current agent if tracing is enabled.
     */
    y(this, "_currentAgentSpan");
    /**
     * Run context tracking approvals, usage, and other metadata.
     */
    y(this, "_context");
    /**
     * Tracks what tools each agent has used.
     */
    y(this, "_toolUseTracker");
    /**
     * Items generated by the agent during the run.
     */
    y(this, "_generatedItems");
    /**
     * Number of `_generatedItems` already flushed to session storage for the current turn.
     *
     * Persisting the entire turn on every save would duplicate responses and tool outputs.
     * Instead, `saveToSession` appends only the delta since the previous write. This counter
     * tracks how many generated run items from *this turn* were already written so the next
     * save can slice off only the new entries. When a turn is interrupted (e.g., awaiting tool
     * approval) and later resumed, we rewind the counter before continuing so the pending tool
     * output still gets stored.
     */
    y(this, "_currentTurnPersistedItemCount");
    /**
     * Maximum allowed turns before forcing termination.
     */
    y(this, "_maxTurns");
    /**
     * Whether the run has an active agent step in progress.
     */
    y(this, "_noActiveAgentRun", !0);
    /**
     * Last model response for the previous turn.
     */
    y(this, "_lastTurnResponse");
    /**
     * Results from input guardrails applied to the run.
     */
    y(this, "_inputGuardrailResults");
    /**
     * Results from output guardrails applied to the run.
     */
    y(this, "_outputGuardrailResults");
    /**
     * Results from tool input guardrails applied during tool execution.
     */
    y(this, "_toolInputGuardrailResults");
    /**
     * Results from tool output guardrails applied during tool execution.
     */
    y(this, "_toolOutputGuardrailResults");
    /**
     * Next step computed for the agent to take.
     */
    y(this, "_currentStep");
    /**
     * Parsed model response after applying guardrails and tools.
     */
    y(this, "_lastProcessedResponse");
    /**
     * Trace associated with this run if tracing is enabled.
     */
    y(this, "_trace", null);
    this._context = e, this._originalInput = structuredClone(n), this._modelResponses = [], this._currentAgentSpan = void 0, this._currentAgent = r, this._toolUseTracker = new Vo(), this._generatedItems = [], this._currentTurnPersistedItemCount = 0, this._maxTurns = s, this._inputGuardrailResults = [], this._outputGuardrailResults = [], this._toolInputGuardrailResults = [], this._toolOutputGuardrailResults = [], this._trace = _n();
  }
  /**
   * The usage aggregated for this run. This includes per-request breakdowns when available.
   */
  get usage() {
    return this._context.usage;
  }
  /**
   * Updates server-managed conversation identifiers as a single operation.
   */
  setConversationContext(e, n) {
    this._conversationId = e, this._previousResponseId = n;
  }
  /**
   * Updates the agent span associated with the current run.
   */
  setCurrentAgentSpan(e) {
    this._currentAgentSpan = e;
  }
  /**
   * Switches the active agent handling the run.
   */
  setCurrentAgent(e) {
    this._currentAgent = e;
  }
  /**
   * Resets the counter that tracks how many items were persisted for the current turn.
   */
  resetTurnPersistence() {
    this._currentTurnPersistedItemCount = 0;
  }
  /**
   * Rewinds the persisted item counter when pending approvals require re-writing outputs.
   */
  rewindTurnPersistence(e) {
    e <= 0 || (this._currentTurnPersistedItemCount = Math.max(0, this._currentTurnPersistedItemCount - e));
  }
  /**
   * The history of the agent run. This includes the input items and the new items generated during the run.
   *
   * This can be used as inputs for the next agent run.
   */
  get history() {
    return Rn(this._originalInput, this._generatedItems);
  }
  /**
   * Returns all interruptions if the current step is an interruption otherwise returns an empty array.
   */
  getInterruptions() {
    var e;
    return ((e = this._currentStep) == null ? void 0 : e.type) !== "next_step_interruption" ? [] : this._currentStep.data.interruptions;
  }
  /**
   * Approves a tool call requested by the agent through an interruption and approval item request.
   *
   * To approve the request use this method and then run the agent again with the same state object
   * to continue the execution.
   *
   * By default it will only approve the current tool call. To allow the tool to be used multiple
   * times throughout the run, set the `alwaysApprove` option to `true`.
   *
   * @param approvalItem - The tool call approval item to approve.
   * @param options - Options for the approval.
   */
  approve(e, n = { alwaysApprove: !1 }) {
    this._context.approveTool(e, n);
  }
  /**
   * Rejects a tool call requested by the agent through an interruption and approval item request.
   *
   * To reject the request use this method and then run the agent again with the same state object
   * to continue the execution.
   *
   * By default it will only reject the current tool call. To allow the tool to be used multiple
   * times throughout the run, set the `alwaysReject` option to `true`.
   *
   * @param approvalItem - The tool call approval item to reject.
   * @param options - Options for the rejection.
   */
  reject(e, n = { alwaysReject: !1 }) {
    this._context.rejectTool(e, n);
  }
  /**
   * Serializes the run state to a JSON object.
   *
   * This method is used to serialize the run state to a JSON object that can be used to
   * resume the run later.
   *
   * @returns The serialized run state.
   */
  /**
   * Serializes the run state. By default, tracing API keys are omitted to prevent
   * accidental persistence of secrets. Pass `includeTracingApiKey: true` only when you
   * intentionally need to migrate a run along with its tracing credentials (e.g., to
   * rehydrate in a separate process that lacks the original environment variables).
   */
  toJSON(e = {}) {
    var o;
    const n = e.includeTracingApiKey === !0, r = {
      $schemaVersion: Es,
      currentTurn: this._currentTurn,
      currentAgent: {
        name: this._currentAgent.name
      },
      originalInput: this._originalInput,
      modelResponses: this._modelResponses.map((i) => ({
        usage: {
          requests: i.usage.requests,
          inputTokens: i.usage.inputTokens,
          outputTokens: i.usage.outputTokens,
          totalTokens: i.usage.totalTokens,
          inputTokensDetails: i.usage.inputTokensDetails,
          outputTokensDetails: i.usage.outputTokensDetails,
          ...i.usage.requestUsageEntries && i.usage.requestUsageEntries.length > 0 ? {
            requestUsageEntries: i.usage.requestUsageEntries.map((a) => ({
              inputTokens: a.inputTokens,
              outputTokens: a.outputTokens,
              totalTokens: a.totalTokens,
              inputTokensDetails: a.inputTokensDetails,
              outputTokensDetails: a.outputTokensDetails,
              ...a.endpoint ? { endpoint: a.endpoint } : {}
            }))
          } : {}
        },
        output: i.output,
        responseId: i.responseId,
        providerData: i.providerData
      })),
      context: this._context.toJSON(),
      toolUseTracker: this._toolUseTracker.toJSON(),
      maxTurns: this._maxTurns,
      currentAgentSpan: (o = this._currentAgentSpan) == null ? void 0 : o.toJSON(),
      noActiveAgentRun: this._noActiveAgentRun,
      currentTurnInProgress: this._currentTurnInProgress,
      inputGuardrailResults: this._inputGuardrailResults,
      outputGuardrailResults: this._outputGuardrailResults.map((i) => ({
        ...i,
        agent: i.agent.toJSON()
      })),
      toolInputGuardrailResults: this._toolInputGuardrailResults,
      toolOutputGuardrailResults: this._toolOutputGuardrailResults,
      currentStep: this._currentStep,
      lastModelResponse: this._lastTurnResponse,
      generatedItems: this._generatedItems.map((i) => i.toJSON()),
      currentTurnPersistedItemCount: this._currentTurnPersistedItemCount,
      lastProcessedResponse: this._lastProcessedResponse,
      conversationId: this._conversationId,
      previousResponseId: this._previousResponseId,
      trace: this._trace ? this._trace.toJSON({ includeTracingApiKey: n }) : null
    }, s = Ho.safeParse(r);
    if (!s.success)
      throw new tl(`Failed to serialize run state. ${s.error.message}`);
    return s.data;
  }
  /**
   * Serializes the run state to a string.
   *
   * This method is used to serialize the run state to a string that can be used to
   * resume the run later.
   *
   * @returns The serialized run state.
   */
  toString(e = {}) {
    return JSON.stringify(this.toJSON(e));
  }
  /**
   * Deserializes a run state from a string.
   *
   * This method is used to deserialize a run state from a string that was serialized using the
   * `toString` method.
   */
  static async fromString(e, n) {
    var c, h, m, _, w, b;
    const [r, s] = await Us(() => JSON.parse(n));
    if (r)
      throw new te(`Failed to parse run state. ${r instanceof Error ? r.message : String(r)}`);
    const o = s.$schemaVersion;
    if (!o)
      throw new te("Run state is missing schema version");
    if (!ba.includes(o))
      throw new te(`Run state schema version ${o} is not supported. Please use version ${Es}.`);
    const i = Ho.parse(JSON.parse(n)), a = Xp(e), u = new Yt(i.context.context);
    u._rebuildApprovals(i.context.approvals);
    const d = a.get(i.currentAgent.name);
    if (!d)
      throw new te(`Agent ${i.currentAgent.name} not found`);
    const l = new Xe(u, "", d, i.maxTurns);
    l._currentTurn = i.currentTurn, l._currentTurnInProgress = i.currentTurnInProgress ?? !1, l._conversationId = i.conversationId ?? void 0, l._previousResponseId = i.previousResponseId ?? void 0, l._toolUseTracker = new Vo();
    for (const [I, T] of Object.entries(i.toolUseTracker))
      l._toolUseTracker.addToolUse(a.get(I), T, { allowEmpty: !0 });
    if (i.currentAgentSpan) {
      i.trace || E.warn("Trace is not set, skipping tracing setup");
      const I = We().createTrace({
        traceId: (c = i.trace) == null ? void 0 : c.id,
        name: (h = i.trace) == null ? void 0 : h.workflow_name,
        groupId: ((m = i.trace) == null ? void 0 : m.group_id) ?? void 0,
        metadata: (_ = i.trace) == null ? void 0 : _.metadata,
        tracingApiKey: ((w = i.trace) == null ? void 0 : w.tracing_api_key) ?? void 0
      });
      l._currentAgentSpan = Ca(I, i.currentAgentSpan), l._trace = I;
    }
    return l._noActiveAgentRun = i.noActiveAgentRun, l._inputGuardrailResults = i.inputGuardrailResults, l._outputGuardrailResults = i.outputGuardrailResults.map((I) => ({
      ...I,
      agent: a.get(I.agent.name)
    })), l._toolInputGuardrailResults = i.toolInputGuardrailResults, l._toolOutputGuardrailResults = i.toolOutputGuardrailResults, l._currentStep = i.currentStep, l._originalInput = i.originalInput, l._modelResponses = i.modelResponses.map(Ko), l._lastTurnResponse = i.lastModelResponse ? Ko(i.lastModelResponse) : void 0, l._generatedItems = i.generatedItems.map((I) => Oa(I, a)), l._currentTurnPersistedItemCount = i.currentTurnPersistedItemCount ?? 0, l._lastProcessedResponse = i.lastProcessedResponse ? await Qp(a, l._currentAgent, l._context, i.lastProcessedResponse) : void 0, ((b = i.currentStep) == null ? void 0 : b.type) === "next_step_handoff" && (l._currentStep = {
      type: "next_step_handoff",
      newAgent: a.get(i.currentStep.newAgent.name)
    }), l;
  }
}
function Xp(t) {
  const e = /* @__PURE__ */ new Map(), n = [t];
  for (; n.length > 0; ) {
    const r = n.shift();
    if (!e.has(r.name)) {
      e.set(r.name, r);
      for (const s of r.handoffs)
        s instanceof ot ? e.has(s.name) || n.push(s) : s.agent && (e.has(s.agent.name) || n.push(s.agent));
    }
  }
  return e;
}
function Ca(t, e) {
  const n = e.span_data, r = e.previous_span ? Ca(t, e.previous_span) : void 0, s = We().createSpan({
    spanId: e.id,
    traceId: e.trace_id,
    parentId: e.parent_id ?? void 0,
    startedAt: e.started_at ?? void 0,
    endedAt: e.ended_at ?? void 0,
    data: n
  }, t);
  return s.previousSpan = r, s;
}
function Ko(t) {
  return {
    usage: new ar(t.usage),
    output: t.output.map((n) => Xs.parse(n)),
    responseId: t.responseId,
    providerData: t.providerData
  };
}
function Oa(t, e) {
  switch (t.type) {
    case "message_output_item":
      return new Gr(t.rawItem, e.get(t.agent.name));
    case "tool_call_item":
      return new Gt(t.rawItem, e.get(t.agent.name));
    case "tool_call_output_item":
      return new qe(t.rawItem, e.get(t.agent.name), t.output);
    case "reasoning_item":
      return new no(t.rawItem, e.get(t.agent.name));
    case "handoff_call_item":
      return new ro(t.rawItem, e.get(t.agent.name));
    case "handoff_output_item":
      return new so(t.rawItem, e.get(t.sourceAgent.name), e.get(t.targetAgent.name));
    case "tool_approval_item":
      return new le(t.rawItem, e.get(t.agent.name), t.toolName);
  }
}
async function Qp(t, e, n, r) {
  const s = await e.getAllTools(n), o = new Map(s.filter((c) => c.type === "function").map((c) => [c.name, c])), i = new Map(s.filter((c) => c.type === "computer").map((c) => [c.name, c])), a = new Map(s.filter((c) => c.type === "shell").map((c) => [c.name, c])), u = new Map(s.filter((c) => c.type === "apply_patch").map((c) => [c.name, c])), d = new Map(e.handoffs.map((c) => c instanceof ot ? [c.name, va(c)] : [c.toolName, c])), l = {
    newItems: r.newItems.map((c) => Oa(c, t)),
    toolsUsed: r.toolsUsed,
    handoffs: r.handoffs.map((c) => {
      if (!d.has(c.handoff.toolName))
        throw new te(`Handoff ${c.handoff.toolName} not found`);
      return {
        toolCall: c.toolCall,
        handoff: d.get(c.handoff.toolName)
      };
    }),
    functions: await Promise.all(r.functions.map(async (c) => {
      if (!o.has(c.tool.name))
        throw new te(`Tool ${c.tool.name} not found`);
      return {
        toolCall: c.toolCall,
        tool: o.get(c.tool.name)
      };
    })),
    computerActions: r.computerActions.map((c) => {
      const h = c.computer.name;
      if (!i.has(h))
        throw new te(`Computer tool ${h} not found`);
      return {
        toolCall: c.toolCall,
        computer: i.get(h)
      };
    }),
    shellActions: (r.shellActions ?? []).map((c) => {
      const h = c.shell.name;
      if (!a.has(h))
        throw new te(`Shell tool ${h} not found`);
      return {
        toolCall: c.toolCall,
        shell: a.get(h)
      };
    }),
    applyPatchActions: (r.applyPatchActions ?? []).map((c) => {
      const h = c.applyPatch.name;
      if (!u.has(h))
        throw new te(`Apply patch tool ${h} not found`);
      return {
        toolCall: c.toolCall,
        applyPatch: u.get(h)
      };
    }),
    mcpApprovalRequests: (r.mcpApprovalRequests ?? []).map((c) => ({
      requestItem: new le(c.requestItem.rawItem, e),
      mcpTool: c.mcpTool
    }))
  };
  return {
    ...l,
    hasToolsOrApprovalsToRun() {
      return l.handoffs.length > 0 || l.functions.length > 0 || l.mcpApprovalRequests.length > 0 || l.computerActions.length > 0 || l.shellActions.length > 0 || l.applyPatchActions.length > 0;
    }
  };
}
const Yo = 10;
async function ef(t, e, n, r, s) {
  const o = (m, _) => m.map((w) => {
    const b = structuredClone(w);
    return _ && b && typeof b == "object" && _.set(b, w), b;
  }), i = /* @__PURE__ */ new WeakMap(), a = As(r), u = [];
  for (const m of r)
    m && typeof m == "object" && u.push(m);
  const d = (m) => {
    if (!m || typeof m != "object")
      return;
    const _ = u.findIndex((w) => w === m);
    _ !== -1 && u.splice(_, 1);
  }, l = () => {
    const m = u.shift();
    return m && Rr(a, m), m;
  }, h = {
    input: o(r, i),
    instructions: s
  };
  if (!e)
    return {
      modelInput: h,
      sourceItems: [...r],
      persistedItems: [],
      filterApplied: !1
    };
  try {
    const m = await e({
      modelData: h,
      agent: t,
      context: n.context
    });
    if (!m || !Array.isArray(m.input))
      throw new te("callModelInputFilter must return a ModelInputData object with an input array.");
    const _ = m.input.map((b) => {
      if (!b || typeof b != "object")
        return;
      const I = i.get(b);
      if (I)
        return d(I), Rr(a, I), I;
      const T = De(b), x = kd(a, T);
      if (x)
        return d(x), x;
      const P = l();
      if (P)
        return P;
    }), w = o(m.input);
    return {
      modelInput: {
        input: w,
        instructions: typeof m.instructions > "u" ? s : m.instructions
      },
      sourceItems: _,
      persistedItems: w.map((b) => structuredClone(b)),
      filterApplied: !0
    };
  } catch (m) {
    throw Jt({
      message: "Error in callModelInputFilter",
      data: { error: String(m) }
    }), m;
  }
}
class Xo {
  constructor({ conversationId: e, previousResponseId: n }) {
    y(this, "conversationId");
    y(this, "previousResponseId");
    // Using this flag because WeakSet does not provide a way to check its size.
    y(this, "sentInitialInput", !1);
    // The items already sent to the model; using WeakSet for memory efficiency.
    y(this, "sentItems", /* @__PURE__ */ new WeakSet());
    // The items received from the server; using WeakSet for memory efficiency.
    y(this, "serverItems", /* @__PURE__ */ new WeakSet());
    // Track initial input items that have not yet been sent so they can be retried on later turns.
    y(this, "remainingInitialInput", null);
    this.conversationId = e ?? void 0, this.previousResponseId = n ?? void 0;
  }
  /**
   * Pre-populates tracker caches from an existing RunState when resuming server-managed runs.
   */
  primeFromState({ originalInput: e, generatedItems: n, modelResponses: r }) {
    if (this.sentInitialInput)
      return;
    const s = Er(e), o = r.length > 0, i = /* @__PURE__ */ new Set();
    for (const u of r)
      for (const d of u.output)
        d && typeof d == "object" && (this.serverItems.add(d), i.add(De(d)));
    if (o) {
      for (const u of s)
        u && typeof u == "object" && this.sentItems.add(u);
      this.sentInitialInput = !0, this.remainingInitialInput = null;
    }
    const a = r[r.length - 1];
    if (!this.conversationId && (a != null && a.responseId) && (this.previousResponseId = a.responseId), o)
      for (const u of n) {
        const d = u.rawItem;
        if (!d || typeof d != "object")
          continue;
        const l = De(d);
        (this.serverItems.has(d) || i.has(l)) && this.sentItems.add(d);
      }
  }
  /**
   * Records the raw items returned by the server so future delta calculations skip them.
   * Also captures the latest response identifier to chain follow-up calls when possible.
   */
  trackServerItems(e) {
    if (e) {
      for (const n of e.output)
        n && typeof n == "object" && this.serverItems.add(n);
      !this.conversationId && e.responseId && (this.previousResponseId = e.responseId);
    }
  }
  /**
   * Returns the minimum set of items that still need to be delivered to the server for the
   * current turn. This includes the original turn inputs (until acknowledged) plus any
   * newly generated items that have not yet been echoed back by the API.
   */
  prepareInput(e, n) {
    const r = [];
    if (this.sentInitialInput)
      this.remainingInitialInput && this.remainingInitialInput.length > 0 && r.push(...this.remainingInitialInput);
    else {
      const s = Er(e);
      r.push(...s), this.remainingInitialInput = s.filter((o) => !!o && typeof o == "object"), this.sentInitialInput = !0;
    }
    for (const s of n) {
      if (s.type === "tool_approval_item")
        continue;
      const o = s.rawItem;
      !o || typeof o != "object" || this.sentItems.has(o) || this.serverItems.has(o) || r.push(o);
    }
    return r;
  }
  /**
   * Marks the provided originals as delivered so future turns do not resend them and any
   * pending initial inputs can be dropped once the server acknowledges receipt.
   */
  markInputAsSent(e, n) {
    const r = /* @__PURE__ */ new Set(), s = (n == null ? void 0 : n.filterApplied) ?? !1, o = (n == null ? void 0 : n.filterApplied) && !!n.allTurnItems;
    this.addDeliveredItems(r, e);
    const i = n == null ? void 0 : n.allTurnItems;
    o && i && this.addDeliveredItems(r, i), this.updateRemainingInitialInput(r, !!s);
  }
  addDeliveredItems(e, n) {
    for (const r of n)
      !r || typeof r != "object" || e.has(r) || (e.add(r), this.sentItems.add(r));
  }
  updateRemainingInitialInput(e, n) {
    if (!this.remainingInitialInput || this.remainingInitialInput.length === 0 || e.size === 0) {
      n && this.remainingInitialInput && (this.remainingInitialInput = null);
      return;
    }
    this.remainingInitialInput = this.remainingInitialInput.filter((r) => !e.has(r)), this.remainingInitialInput.length === 0 ? this.remainingInitialInput = null : n && (this.remainingInitialInput = null);
  }
}
const is = () => {
  let t = !1, e = !1, n, r;
  const s = (u) => {
    e = !0, n = u, t = !1;
  };
  return {
    get pending() {
      return t;
    },
    get failed() {
      return e;
    },
    get error() {
      return n;
    },
    markPending: () => {
      t = !0;
    },
    setPromise: (u) => {
      u && (t = !0, r = u.then((d) => d).catch((d) => (s(d), [])).finally(() => {
        t = !1;
      }));
    },
    setError: s,
    throwIfError: () => {
      if (n)
        throw n;
    },
    awaitCompletion: async (u) => {
      if (r && await r, n && !(u != null && u.suppressErrors))
        throw n;
    }
  };
};
async function Ea(t) {
  const { state: e, guardrails: n, guardrailArgs: r, resultsTarget: s, onTripwire: o, isTripwireError: i, onError: a } = t;
  try {
    const u = await Promise.all(n.map(async (d) => Ap(async (l) => {
      const c = await d.run(r);
      return l.spanData.triggered = c.output.tripwireTriggered, c;
    }, { data: { name: d.name } }, e._currentAgentSpan)));
    s.push(...u);
    for (const d of u)
      d.output.tripwireTriggered && (e._currentAgentSpan && e._currentAgentSpan.setError({
        message: "Guardrail tripwire triggered",
        data: { guardrail: d.guardrail.name }
      }), o(d));
    return u;
  } catch (u) {
    if (i(u))
      throw u;
    return a(u), [];
  }
}
function tf(t, e) {
  return e.concat(t._currentAgent.inputGuardrails.map(wa));
}
function nf(t) {
  const e = [], n = [];
  for (const r of t)
    r.runInParallel === !1 ? e.push(r) : n.push(r);
  return { blocking: e, parallel: n };
}
async function Qo(t, e) {
  if (e.length === 0)
    return [];
  const n = {
    agent: t._currentAgent,
    input: t._originalInput,
    context: t._context
  };
  return await Ea({
    state: t,
    guardrails: e,
    guardrailArgs: n,
    resultsTarget: t._inputGuardrailResults,
    onTripwire: (r) => {
      throw new Io(`Input guardrail triggered: ${JSON.stringify(r.output.outputInfo)}`, r, t);
    },
    isTripwireError: (r) => r instanceof Io,
    onError: (r) => {
      throw t._currentTurn--, new Ei(`Input guardrail failed to complete: ${r}`, r, t);
    }
  });
}
async function ei(t, e, n) {
  const r = e.concat(t._currentAgent.outputGuardrails.map(to));
  if (r.length === 0)
    return;
  const s = t._currentAgent.processFinalOutput(n), o = Rn([], t._generatedItems), i = {
    agent: t._currentAgent,
    agentOutput: s,
    context: t._context,
    details: {
      modelResponse: t._lastTurnResponse,
      output: o
    }
  };
  await Ea({
    state: t,
    guardrails: r,
    guardrailArgs: i,
    resultsTarget: t._outputGuardrailResults,
    onTripwire: (a) => {
      throw new ms(`Output guardrail triggered: ${JSON.stringify(a.output.outputInfo)}`, a, t);
    },
    isTripwireError: (a) => a instanceof ms,
    onError: (a) => {
      throw new Ei(`Output guardrail failed to complete: ${a}`, a, t);
    }
  });
}
const ti = (t) => {
  var n;
  const e = t == null ? void 0 : t.providerData;
  return !!(e != null && e.reasoning || (n = e == null ? void 0 : e.text) != null && n.verbosity || e != null && e.reasoning_effort);
};
function rf(t, e) {
  return typeof t == "string" && t !== ot.DEFAULT_MODEL_PLACEHOLDER || t ? t : e ?? t ?? ot.DEFAULT_MODEL_PLACEHOLDER;
}
function sf(t, e, n) {
  return t.resetToolChoice && e.hasUsedTools(t) ? { ...n, toolChoice: void 0 } : n;
}
function of(t, e, n, r, s) {
  const o = s ?? (typeof n == "string" ? n : (n == null ? void 0 : n.model) ?? (n == null ? void 0 : n.name)), i = typeof o == "string" ? !Jr(o) : !0, a = ti(e) || ti(r);
  return ma() && t && i && a ? af(r) : r;
}
function af(t) {
  var r, s, o, i;
  const e = t.providerData ? { ...t.providerData } : void 0;
  e && (e.text && typeof e.text == "object" && (e.text = { ...e.text }, delete e.text.verbosity), delete e.reasoning, delete e.reasoning_effort);
  const n = {
    ...t,
    providerData: e
  };
  return t.reasoning && (n.reasoning = { ...t.reasoning }), t.text && (n.text = { ...t.text }), (r = n.providerData) == null || delete r.reasoning, (o = (s = n.providerData) == null ? void 0 : s.text) == null || delete o.verbosity, (i = n.providerData) == null || delete i.reasoning_effort, n.reasoning && (delete n.reasoning.effort, delete n.reasoning.summary), n.text && delete n.text.verbosity, n;
}
function uf(t, e, n) {
  if (!t)
    throw Jt({
      message: e,
      data: n
    }), new Oe(e);
  return t;
}
function as({ output: t, tool: e, agent: n, errorMessage: r, errorData: s, items: o, toolsUsed: i, actions: a, buildAction: u }) {
  const d = uf(e, r, s);
  o.push(new Gt(t, n)), i.push(d.name), a.push(u(d));
}
function cf(t, e, n, r) {
  const s = e.get(t.name);
  if (s)
    return { type: "handoff", handoff: s };
  const o = n.get(t.name);
  if (!o) {
    const i = `Tool ${t.name} not found in agent ${r.name}.`;
    throw Jt({
      message: i,
      data: {
        tool_name: t.name,
        agent_name: r.name
      }
    }), new Oe(i);
  }
  return { type: "function", tool: o };
}
function ni(t, e, n, r) {
  var T;
  const s = [], o = [], i = [], a = [], u = [], d = [], l = [], c = [], h = new Map(r.map((x) => [x.toolName, x])), m = new Map(n.filter((x) => x.type === "function").map((x) => [x.name, x])), _ = n.find((x) => x.type === "computer"), w = n.find((x) => x.type === "shell"), b = n.find((x) => x.type === "apply_patch"), I = new Map(n.filter((x) => {
    var P;
    return x.type === "hosted_tool" && ((P = x.providerData) == null ? void 0 : P.type) === "mcp";
  }).map((x) => x).map((x) => [x.providerData.server_label, x]));
  for (const x of t.output) {
    if (x.type === "message")
      x.role === "assistant" && s.push(new Gr(x, e));
    else if (x.type === "hosted_tool_call") {
      s.push(new Gt(x, e));
      const D = x.name;
      if (c.push(D), ((T = x.providerData) == null ? void 0 : T.type) === "mcp_approval_request" || x.name === "mcp_approval_request") {
        const $ = x.providerData, X = $.server_label, ue = I.get(X);
        if (typeof ue > "u") {
          const ie = `MCP server (${X}) not found in Agent (${e.name})`;
          throw Jt({
            message: ie,
            data: { mcp_server_label: X }
          }), new Oe(ie);
        }
        const V = new le({
          type: "hosted_tool_call",
          // We must use this name to align with the name sent from the servers
          name: $.name,
          id: $.id,
          status: "in_progress",
          providerData: $
        }, e);
        l.push({
          requestItem: V,
          mcpTool: ue
        }), ue.providerData.on_approval || s.push(V);
      }
    } else x.type === "reasoning" ? s.push(new no(x, e)) : x.type === "computer_call" ? as({
      output: x,
      tool: _,
      agent: e,
      errorMessage: "Model produced computer action without a computer tool.",
      errorData: { agent_name: e.name },
      items: s,
      toolsUsed: c,
      actions: a,
      buildAction: (D) => ({
        toolCall: x,
        computer: D
      })
    }) : x.type === "shell_call" ? as({
      output: x,
      tool: w,
      agent: e,
      errorMessage: "Model produced shell action without a shell tool.",
      errorData: { agent_name: e.name },
      items: s,
      toolsUsed: c,
      actions: u,
      buildAction: (D) => ({
        toolCall: x,
        shell: D
      })
    }) : x.type === "apply_patch_call" && as({
      output: x,
      tool: b,
      agent: e,
      errorMessage: "Model produced apply_patch action without an apply_patch tool.",
      errorData: { agent_name: e.name },
      items: s,
      toolsUsed: c,
      actions: d,
      buildAction: (D) => ({
        toolCall: x,
        applyPatch: D
      })
    });
    if (x.type !== "function_call")
      continue;
    c.push(x.name);
    const P = cf(x, h, m, e);
    P.type === "handoff" ? (s.push(new ro(x, e)), o.push({
      toolCall: x,
      handoff: P.handoff
    })) : (s.push(new Gt(x, e)), i.push({
      toolCall: x,
      tool: P.tool
    }));
  }
  return {
    newItems: s,
    handoffs: o,
    functions: i,
    computerActions: a,
    shellActions: u,
    applyPatchActions: d,
    mcpApprovalRequests: l,
    toolsUsed: c,
    hasToolsOrApprovalsToRun() {
      return o.length > 0 || i.length > 0 || l.length > 0 || a.length > 0 || u.length > 0 || d.length > 0;
    }
  };
}
const lf = (t) => {
  if (!t)
    return !1;
  if (t instanceof Error && t.name === "AbortError")
    return !0;
  const e = typeof DOMException < "u" ? DOMException : void 0;
  return !!(e && t instanceof e && t.name === "AbortError");
};
function df(t) {
  if (t instanceof Gr)
    return "message_output_created";
  if (t instanceof ro)
    return "handoff_requested";
  if (t instanceof so)
    return "handoff_occurred";
  if (t instanceof Gt)
    return "tool_called";
  if (t instanceof qe)
    return "tool_output";
  if (t instanceof no)
    return "reasoning_item_created";
  if (t instanceof le)
    return "tool_approval_requested";
}
function Ra(t, e) {
  const n = df(e);
  if (!n) {
    E.warn("Unknown item type: ", e);
    return;
  }
  t._addItem(new Fp(n, e));
}
function pf(t, e) {
  for (const n of e)
    Ra(t, n);
}
function ri(t, e, n) {
  const r = n == null ? void 0 : n.skipItems;
  for (const s of e.newStepItems)
    r != null && r.has(s) || Ra(t, s);
}
function ff(t) {
  return !!t && typeof t.runCompaction == "function";
}
function hf(t) {
  const { session: e } = t;
  if (!e)
    return;
  class n {
    constructor() {
      y(this, "session");
      y(this, "hasCallModelInputFilter");
      y(this, "persistInput");
      y(this, "originalSnapshot");
      y(this, "filteredSnapshot");
      y(this, "pendingWriteCounts");
      y(this, "persistedInput", !1);
      y(this, "setPreparedItems", (s) => {
        const o = s ?? [];
        this.originalSnapshot = o.map((i) => structuredClone(i)), this.pendingWriteCounts = /* @__PURE__ */ new Map();
        for (const i of o) {
          const a = De(i);
          this.pendingWriteCounts.set(a, (this.pendingWriteCounts.get(a) ?? 0) + 1);
        }
      });
      y(this, "recordTurnItems", (s, o) => {
        const i = this.pendingWriteCounts;
        if (o !== void 0) {
          if (!i) {
            this.filteredSnapshot = mf(o);
            return;
          }
          const a = yf({
            pendingCounts: i,
            sourceItems: s,
            filteredItems: o,
            existingSnapshot: this.filteredSnapshot
          });
          a !== void 0 && (this.filteredSnapshot = a);
          return;
        }
        this.filteredSnapshot = _f({
          pendingCounts: i,
          sourceItems: s,
          existingSnapshot: this.filteredSnapshot
        });
      });
      y(this, "getItemsForPersistence", () => {
        if (this.filteredSnapshot !== void 0)
          return this.filteredSnapshot;
        if (!this.hasCallModelInputFilter)
          return this.originalSnapshot;
      });
      y(this, "buildPersistInputOnce", (s) => {
        if (!this.session || s)
          return;
        const o = this.persistInput ?? Pa;
        return async () => {
          if (this.persistedInput)
            return;
          const i = this.getItemsForPersistence();
          !i || i.length === 0 || (this.persistedInput = !0, await o(this.session, i));
        };
      });
      this.session = t.session, this.hasCallModelInputFilter = t.hasCallModelInputFilter, this.persistInput = t.persistInput, this.originalSnapshot = t.resumingFromState ? [] : void 0, this.filteredSnapshot = void 0, this.pendingWriteCounts = t.resumingFromState ? /* @__PURE__ */ new Map() : void 0;
    }
  }
  return new n();
}
function mf(t) {
  return t.map((e) => structuredClone(e));
}
function gf(t) {
  const e = /* @__PURE__ */ new WeakMap();
  for (const n of t) {
    if (!n || typeof n != "object")
      continue;
    const r = (e.get(n) ?? 0) + 1;
    e.set(n, r);
  }
  return e;
}
function yf(t) {
  const { pendingCounts: e, sourceItems: n, filteredItems: r, existingSnapshot: s } = t, o = [], i = gf(n), a = () => {
    for (const [u, d] of e)
      if (d > 0)
        return e.set(u, d - 1), !0;
    return !1;
  };
  for (let u = 0; u < r.length; u++) {
    const d = r[u];
    if (!d)
      continue;
    let l = !1;
    const c = n[u];
    if (c && typeof c == "object") {
      const _ = (i.get(c) ?? 0) - 1;
      if (i.set(c, _), _ > 0)
        continue;
      const w = De(c), b = e.get(w) ?? 0;
      if (b > 0) {
        e.set(w, b - 1), o.push(structuredClone(d)), l = !0;
        continue;
      }
    }
    const h = De(d), m = e.get(h) ?? 0;
    if (m > 0) {
      e.set(h, m - 1), o.push(structuredClone(d)), l = !0;
      continue;
    }
    !c && a() && (o.push(structuredClone(d)), l = !0), !l && !c && s === void 0 && o.push(structuredClone(d));
  }
  return o.length > 0 || s === void 0 ? o : s;
}
function _f(t) {
  const { pendingCounts: e, sourceItems: n, existingSnapshot: r } = t;
  if (!e) {
    const o = n.filter((i) => !!i).map((i) => structuredClone(i));
    return o.length > 0 ? o : r === void 0 ? [] : r;
  }
  const s = [];
  for (const o of n) {
    if (!o)
      continue;
    const i = De(o), a = e.get(i) ?? 0;
    a <= 0 || (e.set(i, a - 1), s.push(structuredClone(o)));
  }
  return s.length > 0 ? s : r === void 0 ? [] : r;
}
async function vf(t, e, n) {
  const r = n.state, s = r._currentTurnPersistedItemCount ?? 0, o = n.newItems.slice(s);
  process.env.OPENAI_AGENTS__DEBUG_SAVE_SESSION && console.debug("saveToSession:newRunItems", o.map((i) => i.type)), await Ma({
    session: t,
    state: r,
    newRunItems: o,
    extraInputItems: e,
    lastResponseId: n.lastResponseId,
    alreadyPersistedCount: s
  });
}
async function Pa(t, e) {
  if (!t || !e || e.length === 0)
    return;
  const n = Na(e);
  await t.addItems(n);
}
async function si(t, e) {
  const n = e.state, r = n._currentTurnPersistedItemCount ?? 0, s = e.newItems.slice(r);
  await Ma({
    session: t,
    state: n,
    newRunItems: s,
    lastResponseId: e.lastResponseId,
    alreadyPersistedCount: r
  });
}
async function wf(t, e, n, r) {
  if (!e)
    return {
      preparedInput: t,
      sessionItems: void 0
    };
  const s = (r == null ? void 0 : r.includeHistoryInPreparedInput) ?? !0, o = (r == null ? void 0 : r.preserveDroppedNewItems) ?? !1, i = await e.getItems(), a = Er(t);
  if (!n)
    return {
      preparedInput: s ? [...i, ...a] : a,
      sessionItems: a
    };
  const u = i.slice(), d = a.slice(), l = await n(i, a);
  if (!Array.isArray(l))
    throw new te("Session input callback must return an array of AgentInputItem objects.");
  const c = ii(u), h = ii(d), m = As(u), _ = As(d), w = [];
  for (const I of l) {
    const T = De(I);
    if (Rr(_, I)) {
      ai(h, T), w.push(I);
      continue;
    }
    if (Rr(m, I)) {
      ai(c, T);
      continue;
    }
    const x = c.get(T) ?? 0;
    if (x > 0) {
      c.set(T, x - 1);
      continue;
    }
    const P = h.get(T) ?? 0;
    if (P > 0) {
      h.set(T, P - 1), w.push(I);
      continue;
    }
    w.push(I);
  }
  const b = s ? l : w.length > 0 ? w : o ? d : [];
  return o && w.length === 0 && d.length > 0 && E.warn("sessionInputCallback dropped all new inputs in a server-managed conversation; original turn inputs were restored to avoid losing the API delta. Keep at least one new item or omit conversationId if you intended to drop them."), {
    preparedInput: b,
    sessionItems: w
  };
}
function Na(t) {
  return t.map((e) => Rs(Ps(e)));
}
function Rs(t, e = {}) {
  if (t == null)
    return t;
  const n = Ad(t);
  if (n)
    return bf(n, e.mediaType);
  if (Array.isArray(t))
    return t.map((i) => Rs(i, e));
  if (!Da(t))
    return t;
  const r = t, s = {}, o = typeof r.mediaType == "string" && r.mediaType.length > 0 ? r.mediaType : e.mediaType;
  for (const [i, a] of Object.entries(r)) {
    const u = i === "data" || i === "fileData" ? { mediaType: o } : e;
    s[i] = Rs(a, u);
  }
  return s;
}
function bf(t, e) {
  const n = _t(t);
  return `data:${e && !e.startsWith("data:") ? e : "text/plain"};base64,${n}`;
}
function Da(t) {
  if (typeof t != "object" || t === null)
    return !1;
  const e = Object.getPrototypeOf(t);
  return e === Object.prototype || e === null;
}
function Ps(t) {
  if (t == null)
    return t;
  if (Array.isArray(t))
    return t.map((o) => Ps(o));
  if (!Da(t))
    return t;
  const e = t, n = {}, s = typeof e.type == "string" && e.type.length > 0 && If(e.type);
  for (const [o, i] of Object.entries(e))
    s && o === "id" || (n[o] = Ps(i));
  return n;
}
function If(t) {
  switch (t) {
    case "function_call":
    case "function_call_result":
      return !0;
    default:
      return !1;
  }
}
async function Ma(t) {
  const { session: e, state: n, newRunItems: r, extraInputItems: s = [], lastResponseId: o, alreadyPersistedCount: i } = t;
  if (!e)
    return;
  const a = [
    ...s,
    ...Ki(r)
  ];
  if (a.length === 0) {
    n._currentTurnPersistedItemCount = i + r.length, await oi(e, o, n);
    return;
  }
  const u = Na(a);
  await e.addItems(u), await oi(e, o, n), n._currentTurnPersistedItemCount = i + r.length;
}
async function oi(t, e, n) {
  if (!ff(t))
    return;
  const r = await t.runCompaction(typeof e > "u" ? void 0 : { responseId: e });
  if (!r)
    return;
  const s = r.usage;
  n._context.usage.add(new ar({
    requests: 1,
    inputTokens: s.inputTokens,
    outputTokens: s.outputTokens,
    totalTokens: s.totalTokens,
    inputTokensDetails: s.inputTokensDetails,
    outputTokensDetails: s.outputTokensDetails,
    requestUsageEntries: [s]
  }));
}
function ii(t) {
  const e = /* @__PURE__ */ new Map();
  for (const n of t) {
    const r = De(n);
    e.set(r, (e.get(r) ?? 0) + 1);
  }
  return e;
}
function ai(t, e) {
  const n = (t.get(e) ?? 0) - 1;
  n <= 0 ? t.delete(e) : t.set(e, n);
}
function ja(t) {
  if (t.type !== "message" || t.role !== "assistant")
    return;
  const e = t.content[t.content.length - 1];
  if (e.type === "output_text")
    return e.text;
}
function Sf(t) {
  return t.output.length === 0 ? "" : ja(t.output[t.output.length - 1]) || "";
}
function $a(t) {
  return t.behavior ?? { type: "allow" };
}
async function Fa({ guardrails: t, context: e, agent: n, toolCall: r, onResult: s }) {
  const o = t ?? [];
  for (const i of o) {
    const a = await i.run({
      context: e,
      agent: n,
      toolCall: r
    }), u = $a(a), d = {
      guardrail: { type: "tool_input", name: i.name },
      output: { ...a, behavior: u }
    };
    if (s == null || s(d), u.type === "rejectContent")
      return { type: "reject", message: u.message };
    if (u.type === "throwException")
      throw new ol(`Tool input guardrail triggered: ${i.name}`, d);
  }
  return { type: "allow" };
}
async function La({ guardrails: t, context: e, agent: n, toolCall: r, toolOutput: s, onResult: o }) {
  const i = t ?? [];
  let a = s;
  for (const u of i) {
    const d = await u.run({
      context: e,
      agent: n,
      toolCall: r,
      output: s
    }), l = $a(d), c = {
      guardrail: { type: "tool_output", name: u.name },
      output: { ...d, behavior: l }
    };
    if (o == null || o(c), l.type === "rejectContent") {
      a = l.message;
      break;
    }
    if (l.type === "throwException")
      throw new il(`Tool output guardrail triggered: ${u.name}`, c);
  }
  return a;
}
const Za = "Tool execution was not approved.";
function Nr(t, e) {
  const n = Nf(e);
  if (n) {
    const r = n.map(Df);
    return {
      type: "function_call_result",
      name: t.name,
      callId: t.callId,
      status: "completed",
      output: r
    };
  }
  return {
    type: "function_call_result",
    name: t.name,
    callId: t.callId,
    status: "completed",
    output: {
      type: "text",
      text: vt(e)
    }
  };
}
async function Ua(t, e, n, r) {
  const s = { agent: t, runner: n, state: r };
  try {
    return await Promise.all(e.map(async (i) => {
      const a = Tf(i), u = await kf(s, i, a);
      return u !== "approved" ? u : Cf(s, i);
    }));
  } catch (o) {
    throw new sl(`Failed to run function tools: ${o}`, o, r);
  }
}
function Tf(t) {
  let e = t.toolCall.arguments;
  return t.tool.parameters && (Lt(t.tool.parameters) ? e = t.tool.parameters.parse(e) : e = JSON.parse(e)), e;
}
function xf(t, e) {
  return {
    type: "function_approval",
    tool: e.tool,
    runItem: new le(e.toolCall, t.agent)
  };
}
async function Af(t, e) {
  const { agent: n } = t;
  return ha(async (r) => {
    const s = "Tool execution was not approved.";
    return r.setError({
      message: s,
      data: {
        tool_name: e.tool.name,
        error: `Tool execution for ${e.toolCall.callId} was manually rejected by user.`
      }
    }), r.spanData.output = s, {
      type: "function_output",
      tool: e.tool,
      output: s,
      runItem: new qe(Nr(e.toolCall, s), n, s)
    };
  }, {
    data: {
      name: e.tool.name
    }
  });
}
async function kf(t, e, n) {
  const { state: r } = t;
  if (!await e.tool.needsApproval(r._context, n, e.toolCall.callId))
    return "approved";
  const o = r._context.isToolApproved({
    toolName: e.tool.name,
    callId: e.toolCall.callId
  });
  return o === !1 ? await Af(t, e) : o !== !0 ? xf(t, e) : "approved";
}
async function Cf(t, e) {
  const { agent: n, runner: r, state: s } = t;
  return ha(async (o) => {
    r.config.traceIncludeSensitiveData && (o.spanData.input = e.toolCall.arguments);
    try {
      const i = await Fa({
        guardrails: e.tool.inputGuardrails,
        context: s._context,
        agent: n,
        toolCall: e.toolCall,
        onResult: (c) => {
          s._toolInputGuardrailResults.push(c);
        }
      });
      qr(r, s._context, n, e.tool, e.toolCall);
      let a;
      i.type === "reject" ? a = i.message : (a = await e.tool.invoke(s._context, e.toolCall.arguments, { toolCall: e.toolCall }), a = await La({
        guardrails: e.tool.outputGuardrails,
        context: s._context,
        agent: n,
        toolCall: e.toolCall,
        toolOutput: a,
        onResult: (c) => {
          s._toolOutputGuardrailResults.push(c);
        }
      }));
      const u = vt(a);
      $n(r, s._context, n, e.tool, u, e.toolCall), r.config.traceIncludeSensitiveData && (o.spanData.output = u);
      const d = {
        type: "function_output",
        tool: e.tool,
        output: a,
        runItem: new qe(Nr(e.toolCall, a), n, a)
      }, l = th(e.toolCall);
      if (l) {
        d.agentRunResult = l;
        const c = l.interruptions;
        c.length > 0 && (d.interruptions = c);
      }
      return d;
    } catch (i) {
      o.setError({
        message: "Error running tool",
        data: {
          tool_name: e.tool.name,
          error: String(i)
        }
      });
      const a = String(i);
      throw $n(r, s._context, n, e.tool, a, e.toolCall), i;
    }
  }, {
    data: {
      name: e.tool.name
    }
  });
}
async function Of(t, e) {
  const n = e.action;
  let r;
  switch (n.type) {
    case "click":
      await t.click(n.x, n.y, n.button);
      break;
    case "double_click":
      await t.doubleClick(n.x, n.y);
      break;
    case "drag":
      await t.drag(n.path.map((s) => [s.x, s.y]));
      break;
    case "keypress":
      await t.keypress(n.keys);
      break;
    case "move":
      await t.move(n.x, n.y);
      break;
    case "screenshot":
      r = await t.screenshot();
      break;
    case "scroll":
      await t.scroll(n.x, n.y, n.scroll_x, n.scroll_y);
      break;
    case "type":
      await t.type(n.text);
      break;
    case "wait":
      await t.wait();
      break;
  }
  if (typeof r < "u" || typeof t.screenshot == "function" && (r = await t.screenshot(), typeof r < "u"))
    return r;
  throw new Error("Computer does not implement screenshot()");
}
function za(t) {
  if (t instanceof Error)
    return t.message || t.toString();
  try {
    return JSON.stringify(t);
  } catch {
    return String(t);
  }
}
async function Ef(t) {
  const { runContext: e, toolName: n, callId: r, approvalItem: s, needsApproval: o, onApproval: i } = t;
  if (!o)
    return "approved";
  if (i) {
    const u = await i(e, s);
    u.approve === !0 ? e.approveTool(s) : u.approve === !1 && e.rejectTool(s);
  }
  const a = e.isToolApproved({
    toolName: n,
    callId: r
  });
  return a === !0 ? "approved" : a === !1 ? "rejected" : "pending";
}
async function Ba(t) {
  const { runContext: e, toolName: n, callId: r, approvalItem: s, needsApproval: o, onApproval: i, buildRejectionItem: a } = t, u = await Ef({
    runContext: e,
    toolName: n,
    callId: r,
    approvalItem: s,
    needsApproval: o,
    onApproval: i
  });
  return u === "rejected" ? { status: "rejected", item: a() } : u === "pending" ? { status: "pending", item: s } : { status: "approved" };
}
function qr(t, e, n, r, s) {
  t.emit("agent_tool_start", e, n, r, { toolCall: s }), typeof n.emit == "function" && n.emit("agent_tool_start", e, r, { toolCall: s });
}
function $n(t, e, n, r, s, o) {
  t.emit("agent_tool_end", e, n, r, s, { toolCall: o }), typeof n.emit == "function" && n.emit("agent_tool_end", e, r, s, { toolCall: o });
}
async function Ja(t, e, n, r, s = void 0) {
  const o = s ?? E, i = [];
  for (const a of e) {
    const u = a.shell, d = a.toolCall, l = new le(d, t, u.name), c = await Ba({
      runContext: r,
      toolName: u.name,
      callId: d.callId,
      approvalItem: l,
      needsApproval: await u.needsApproval(r, d.action, d.callId),
      onApproval: u.onApproval,
      buildRejectionItem: () => {
        const b = Za, I = {
          stdout: "",
          stderr: b,
          outcome: { type: "exit", exitCode: null }
        };
        return new qe({
          type: "shell_call_output",
          callId: d.callId,
          output: [I]
        }, t, b);
      }
    });
    if (c.status !== "approved") {
      i.push(c.item);
      continue;
    }
    qr(n, r, t, u, d);
    let h;
    const m = {};
    let _;
    try {
      const b = await u.shell.run(d.action);
      h = b.output ?? [], b.providerData && Object.assign(m, b.providerData), typeof b.maxOutputLength == "number" && (_ = b.maxOutputLength);
    } catch (b) {
      h = [
        {
          stdout: "",
          stderr: za(b),
          outcome: { type: "exit", exitCode: null }
        }
      ], o.error("Failed to execute shell action:", b);
    }
    h = h ?? [], $n(n, r, t, u, JSON.stringify(h), d);
    const w = {
      type: "shell_call_output",
      callId: d.callId,
      output: h ?? []
    };
    typeof _ == "number" && (w.maxOutputLength = _), Object.keys(m).length > 0 && (w.providerData = m), i.push(new qe(w, t, w.output));
  }
  return i;
}
async function Ga(t, e, n, r, s = void 0) {
  const o = s ?? E, i = [];
  for (const a of e) {
    const u = a.applyPatch, d = a.toolCall, l = new le(d, t, u.name), c = await Ba({
      runContext: r,
      toolName: u.name,
      callId: d.callId,
      approvalItem: l,
      needsApproval: await u.needsApproval(r, d.operation, d.callId),
      onApproval: u.onApproval,
      buildRejectionItem: () => {
        const w = Za;
        return new qe({
          type: "apply_patch_call_output",
          callId: d.callId,
          status: "failed",
          output: w
        }, t, w);
      }
    });
    if (c.status !== "approved") {
      i.push(c.item);
      continue;
    }
    qr(n, r, t, u, d);
    let h = "completed", m = "";
    try {
      let w;
      switch (d.operation.type) {
        case "create_file":
          w = await u.editor.createFile(d.operation);
          break;
        case "update_file":
          w = await u.editor.updateFile(d.operation);
          break;
        case "delete_file":
          w = await u.editor.deleteFile(d.operation);
          break;
        default:
          throw new Error("Unsupported apply_patch operation");
      }
      w && typeof w.status == "string" && (h = w.status), w && typeof w.output == "string" && (m = w.output);
    } catch (w) {
      h = "failed", m = za(w), o.error("Failed to execute apply_patch operation:", w);
    }
    $n(n, r, t, u, m, d);
    const _ = {
      type: "apply_patch_call_output",
      callId: d.callId,
      status: h
    };
    m && (_.output = m), i.push(new qe(_, t, m));
  }
  return i;
}
async function qa(t, e, n, r, s = void 0) {
  const o = s ?? E, i = [];
  for (const a of e) {
    const u = a.toolCall;
    qr(n, r, t, a.computer, u);
    let d;
    try {
      const h = await Bi({
        tool: a.computer,
        runContext: r
      });
      d = await Of(h, u);
    } catch (h) {
      o.error("Failed to execute computer action:", h), d = "";
    }
    $n(n, r, t, a.computer, d, u);
    const l = d ? `data:image/png;base64,${d}` : "", c = {
      type: "computer_call_result",
      callId: u.callId,
      output: { type: "computer_screenshot", data: l }
    };
    i.push(new qe(c, t, l));
  }
  return i;
}
async function Rf(t, e, n, r, s, o, i, a) {
  if (r = [...r], o.length === 0)
    return E.warn("Incorrectly called executeHandoffCalls with no handoffs. This should not happen. Moving on."), new Ze(e, s, n, r, { type: "next_step_run_again" });
  if (o.length > 1) {
    const d = "Multiple handoffs detected, ignoring this one.";
    for (let l = 1; l < o.length; l++)
      r.push(new qe(Nr(o[l].toolCall, d), t, d));
  }
  const u = o[0];
  return Tp(async (d) => {
    const l = u.handoff, c = await l.onInvokeHandoff(a, u.toolCall.arguments);
    if (d.spanData.to_agent = c.name, o.length > 1) {
      const m = o.map((_) => _.handoff.agentName);
      d.setError({
        message: "Multiple handoffs requested",
        data: {
          requested_agents: m
        }
      });
    }
    r.push(new so(Nr(u.toolCall, ya(c)), t, c)), i.emit("agent_handoff", a, t, c), t.emit("agent_handoff", a, c);
    const h = l.inputFilter ?? i.config.handoffInputFilter;
    if (h) {
      E.debug("Filtering inputs for handoff"), typeof h != "function" && d.setError({
        message: "Invalid input filter",
        data: {
          details: "not callable"
        }
      });
      const m = {
        inputHistory: Array.isArray(e) ? [...e] : e,
        preHandoffItems: [...n],
        newItems: [...r],
        runContext: a
      }, _ = h(m);
      e = _.inputHistory, n = _.preHandoffItems, r = _.newItems;
    }
    return new Ze(e, s, n, r, { type: "next_step_handoff", newAgent: c });
  }, {
    data: {
      from_agent: t.name
    }
  });
}
const dr = {
  isFinalOutput: !1,
  isInterrupted: void 0
};
function oo(t, e = []) {
  const n = [];
  for (const r of e)
    r instanceof le && n.push(r);
  for (const r of t)
    if (r.runItem instanceof le && n.push(r.runItem), r.type === "function_output") {
      if (Array.isArray(r.interruptions))
        n.push(...r.interruptions);
      else if (r.agentRunResult) {
        const s = r.agentRunResult.interruptions;
        s.length > 0 && n.push(...s);
      }
    }
  return n;
}
async function Pf(t, e, n, r = []) {
  if (e.length === 0 && r.length === 0)
    return dr;
  const s = oo(e, r);
  if (s.length > 0)
    return {
      isFinalOutput: !1,
      isInterrupted: !0,
      interruptions: s
    };
  if (t.toolUseBehavior === "run_llm_again")
    return dr;
  const o = e[0];
  if (t.toolUseBehavior === "stop_on_first_tool")
    return (o == null ? void 0 : o.type) === "function_output" ? {
      isFinalOutput: !0,
      isInterrupted: void 0,
      finalOutput: vt(o.output)
    } : dr;
  const i = t.toolUseBehavior;
  if (typeof i == "object") {
    const a = e.find((u) => i.stopAtToolNames.includes(u.tool.name));
    return (a == null ? void 0 : a.type) === "function_output" ? {
      isFinalOutput: !0,
      isInterrupted: void 0,
      finalOutput: vt(a.output)
    } : dr;
  }
  if (typeof i == "function")
    return i(n._context, e);
  throw new te(`Invalid toolUseBehavior: ${i}`, n);
}
function Nf(t) {
  if (Array.isArray(t)) {
    const n = [];
    for (const r of t) {
      const s = ui(r);
      if (!s)
        return null;
      n.push(s);
    }
    return n;
  }
  const e = ui(t);
  return e ? [e] : null;
}
function ui(t) {
  if (!At(t))
    return null;
  const e = t.type;
  if (e === "text" && typeof t.text == "string") {
    const n = { type: "text", text: t.text };
    return At(t.providerData) && (n.providerData = t.providerData), n;
  }
  if (e === "image") {
    const n = { type: "image" };
    let r, s;
    const o = he(t.mediaType) ? t.mediaType : void 0, i = t.image;
    if (typeof i == "string" && i.length > 0)
      r = i;
    else if (At(i)) {
      const a = i, u = he(a.mediaType) ? a.mediaType : o;
      if (he(a.url) ? r = a.url : (he(a.data) || a.data instanceof Uint8Array && a.data.length > 0) && (r = pr(a.data, u)), !r) {
        const d = he(a.fileId) && a.fileId || he(a.id) && a.id || void 0;
        d && (s = d);
      }
    }
    if (!r && typeof t.imageUrl == "string" && t.imageUrl.length > 0 && (r = t.imageUrl), !s && typeof t.fileId == "string" && t.fileId.length > 0 && (s = t.fileId), !r && typeof t.data == "string" && t.data.length > 0 ? r = o ? pr(t.data, o) : t.data : !r && t.data instanceof Uint8Array && t.data.length > 0 && (r = pr(t.data, o)), typeof t.detail == "string" && t.detail.length > 0 && (n.detail = t.detail), r)
      n.image = r;
    else if (s)
      n.image = { fileId: s };
    else
      return null;
    return At(t.providerData) && (n.providerData = t.providerData), n;
  }
  if (e === "file") {
    const n = Mf(t);
    if (!n)
      return null;
    const r = { type: "file", file: n };
    return At(t.providerData) && (r.providerData = t.providerData), r;
  }
  return null;
}
function Df(t) {
  if (t.type === "text") {
    const n = {
      type: "input_text",
      text: t.text
    };
    return t.providerData && (n.providerData = t.providerData), n;
  }
  if (t.type === "image") {
    const n = { type: "input_image" };
    if (typeof t.detail == "string" && t.detail.length > 0 && (n.detail = t.detail), typeof t.image == "string" && t.image.length > 0)
      n.image = t.image;
    else if (At(t.image)) {
      const r = t.image, s = he(r.mediaType) ? r.mediaType : void 0;
      if (he(r.url))
        n.image = r.url;
      else if (he(r.data))
        n.image = s && !r.data.startsWith("data:") ? Xt(r.data, s) : r.data;
      else if (r.data instanceof Uint8Array && r.data.length > 0) {
        const o = _t(r.data);
        n.image = Xt(o, s);
      } else {
        const o = he(r.fileId) && r.fileId || he(r.id) && r.id || void 0;
        o && (n.image = { id: o });
      }
    }
    return t.providerData && (n.providerData = t.providerData), n;
  }
  if (t.type === "file") {
    const n = { type: "input_file" }, r = t.file;
    if (typeof r == "string")
      n.file = r;
    else if (r && typeof r == "object") {
      const s = r;
      if ("data" in s && s.data) {
        const o = s.mediaType ?? "text/plain";
        if (typeof s.data == "string")
          n.file = Xt(s.data, o);
        else {
          const i = _t(s.data);
          n.file = Xt(i, o);
        }
      } else if (typeof s.url == "string" && s.url.length > 0)
        n.file = { url: s.url };
      else {
        const o = typeof s.id == "string" && s.id.length > 0 && s.id || (typeof s.fileId == "string" && s.fileId.length > 0 ? s.fileId : void 0);
        o && (n.file = { id: o });
      }
      typeof s.filename == "string" && s.filename.length > 0 && (n.filename = s.filename);
    }
    return t.providerData && (n.providerData = t.providerData), n;
  }
  return t;
}
function Mf(t) {
  const e = t.file;
  if (typeof e == "string" && e.length > 0)
    return e;
  const n = jf(e);
  if (n)
    return n;
  const r = $f(t);
  return r || null;
}
function jf(t) {
  if (!At(t))
    return null;
  if ("data" in t && t.data !== void 0) {
    const n = t.data, r = typeof n == "string" && n.length > 0, s = n instanceof Uint8Array && n.length > 0;
    return !r && !s || !he(t.mediaType) || !he(t.filename) ? null : {
      data: typeof n == "string" ? n : new Uint8Array(n),
      mediaType: t.mediaType,
      filename: t.filename
    };
  }
  if (he(t.url)) {
    const n = { url: t.url };
    return he(t.filename) && (n.filename = t.filename), n;
  }
  const e = he(t.id) && t.id || he(t.fileId) && t.fileId;
  if (e) {
    const n = { id: e };
    return he(t.filename) && (n.filename = t.filename), n;
  }
  return null;
}
function $f(t) {
  const e = typeof t.filename == "string" && t.filename.length > 0 ? t.filename : void 0, n = typeof t.mediaType == "string" && t.mediaType.length > 0 ? t.mediaType : void 0;
  if (typeof t.fileData == "string" && t.fileData.length > 0)
    return !n || !e ? null : { data: t.fileData, mediaType: n, filename: e };
  if (t.fileData instanceof Uint8Array && t.fileData.length > 0)
    return !n || !e ? null : { data: new Uint8Array(t.fileData), mediaType: n, filename: e };
  if (typeof t.fileUrl == "string" && t.fileUrl.length > 0) {
    const r = { url: t.fileUrl };
    return e && (r.filename = e), r;
  }
  if (typeof t.fileId == "string" && t.fileId.length > 0) {
    const r = { id: t.fileId };
    return e && (r.filename = e), r;
  }
  return null;
}
function At(t) {
  return typeof t == "object" && t !== null;
}
function he(t) {
  return typeof t == "string" && t.length > 0;
}
function pr(t, e) {
  if (typeof t == "string")
    return e && !t.startsWith("data:") ? Xt(t, e) : t;
  const n = _t(t);
  return Xt(n, e);
}
function Xt(t, e) {
  return e ? `data:${e};base64,${t}` : t;
}
async function Va({ requests: t, agent: e, state: n, functionResults: r, appendIfNew: s, resolveApproval: o }) {
  const i = /* @__PURE__ */ new Set(), a = /* @__PURE__ */ new Set();
  for (const u of t) {
    const d = u.requestItem.rawItem;
    if (d.type !== "hosted_tool_call")
      continue;
    const l = d.providerData;
    if (!l)
      continue;
    const c = u.mcpTool.providerData, h = d.id ?? l.id;
    if (c != null && c.on_approval) {
      const _ = await c.on_approval(n._context, u.requestItem), w = {
        approve: _.approve,
        approval_request_id: h ?? l.id,
        reason: _.reason
      };
      s(new Gt({
        type: "hosted_tool_call",
        name: "mcp_approval_response",
        providerData: w
      }, e));
      continue;
    }
    const m = typeof o == "function" ? o(d) : void 0;
    if (typeof m < "u" && h) {
      const _ = {
        approve: m,
        approval_request_id: h,
        reason: void 0
      };
      s(new Gt({
        type: "hosted_tool_call",
        name: "mcp_approval_response",
        providerData: _
      }, e));
      continue;
    }
    r.push({
      type: "hosted_mcp_tool_approval",
      tool: u.mcpTool,
      runItem: u.requestItem
    }), s(u.requestItem), i.add(u.requestItem), h && a.add(h);
  }
  return { pendingApprovals: i, pendingApprovalIds: a };
}
const Ff = [
  "function_call",
  "hosted_tool_call",
  "shell_call",
  "apply_patch_call"
];
function Ns(t) {
  var e;
  return t.rawItem.type === "hosted_tool_call" && ((e = t.rawItem.providerData) == null ? void 0 : e.type) === "mcp_approval_request";
}
function Lf(t, e) {
  if (Ns(t))
    return "pending";
  const n = t.rawItem, r = t.toolName ?? ("name" in n && typeof n.name == "string" ? n.name : void 0), s = "callId" in n && typeof n.callId == "string" ? n.callId : "id" in n && typeof n.id == "string" ? n.id : void 0;
  if (!r || !s)
    return "pending";
  const o = e._context.isToolApproved({ toolName: r, callId: s });
  return o === !0 ? "approved" : o === !1 ? "rejected" : "pending";
}
function Zf(t) {
  if (!t || typeof t != "object" || !("rawItem" in t))
    return !1;
  const e = t.rawItem;
  if (!e || typeof e != "object")
    return !1;
  const n = e.type;
  return Ff.includes(n);
}
function Dr(t) {
  const e = t.rawItem;
  if (!e)
    return;
  if (e.type === "function_call" && e.callId)
    return `function_call:${e.callId}`;
  if ("callId" in e && e.callId)
    return `${e.type}:${e.callId}`;
  const n = "id" in e ? e.id : void 0;
  if (n)
    return `${e.type}:${n}`;
  const r = typeof e.providerData == "object" && e.providerData ? e.providerData : void 0;
  if (r != null && r.id)
    return `${e.type}:provider:${r.id}`;
  const s = "agent" in t && t.agent ? t.agent.name : "";
  try {
    return `${s}:${e.type}:${JSON.stringify(e)}`;
  } catch {
    return `${s}:${e.type}`;
  }
}
function Wa(t) {
  const e = new Set(t), n = /* @__PURE__ */ new Set();
  for (const r of t)
    if (r instanceof le) {
      const s = Dr(r);
      s && n.add(s);
    }
  return { seenItems: e, seenApprovalIdentities: n };
}
function Ha(t, e, n) {
  if (!n.seenItems.has(t)) {
    if (t instanceof le) {
      const r = Dr(t);
      if (r) {
        if (n.seenApprovalIdentities.has(r))
          return;
        n.seenApprovalIdentities.add(r);
      }
    }
    n.seenItems.add(t), e.push(t);
  }
}
function Uf(t, e) {
  const n = /* @__PURE__ */ new Set();
  for (const r of t) {
    if (!(r instanceof le))
      continue;
    const s = r.rawItem;
    !s || s.type !== e || ("callId" in s && s.callId ? n.add(s.callId) : "id" in s && s.id && n.add(s.id));
  }
  return n;
}
function fr(t, e) {
  const n = /* @__PURE__ */ new Set();
  for (const r of t) {
    const s = r.rawItem;
    if (!s || typeof s != "object" || s.type !== e)
      continue;
    const o = s.callId;
    typeof o == "string" && n.add(o);
  }
  return n;
}
function ci(t, e, n) {
  const r = Uf(t, n);
  return r.size === 0 ? [] : e.filter((s) => typeof s.toolCall.callId == "string" && r.has(s.toolCall.callId));
}
function us(t, e) {
  return t.filter((n) => {
    const r = n.toolCall.callId, s = typeof r == "string";
    return !(e.allowedCallIds && e.allowedCallIds.size > 0 && (!s || !e.allowedCallIds.has(r)) || s && e.completedCallIds.has(r));
  });
}
function li(t, e = 160) {
  const n = t.trim();
  return n ? n.length <= e ? n : `${n.slice(0, e - 3)}...` : "Schema validation failed.";
}
function zf(t) {
  try {
    if (t instanceof Be) {
      const e = t.issues[0];
      if (e) {
        const n = Array.isArray(e.path) ? e.path : [], r = n.length > 0 ? n.map((o) => String(o)).join(".") : "(root)", s = li(e.message ?? "");
        return `Invalid output type: final assistant output failed schema validation at "${r}" (${s}).`;
      }
      return "Invalid output type: final assistant output failed schema validation.";
    }
    if (t instanceof Error && t.message)
      return `Invalid output type: ${li(t.message)}`;
  } catch {
  }
  return "Invalid output type: final assistant output did not match the expected schema.";
}
async function Bf(t, e, n, r, s, o, i) {
  const a = n.filter((F) => F instanceof le && "callId" in F.rawItem && F.rawItem.type === "function_call").map((F) => F.rawItem.callId), u = fr(n, "function_call_result"), d = fr(n, "shell_call_output"), l = fr(n, "apply_patch_call_output"), c = i.getInterruptions().filter(Zf), h = /* @__PURE__ */ new Set();
  for (const F of c) {
    if (!(F instanceof le) || Ns(F))
      continue;
    const q = F.rawItem;
    if (q.type === "function_call" && q.callId && u.has(q.callId) || q.type === "shell_call" && q.callId && d.has(q.callId) || q.type === "apply_patch_call" && q.callId && l.has(q.callId))
      continue;
    const pe = Dr(F);
    pe && Lf(F, i) === "pending" && h.add(pe);
  }
  const m = s.functions.filter((F) => {
    const q = F.toolCall.callId;
    return a.includes(q) ? !u.has(q) : !1;
  }), _ = us(ci(n, s.shellActions, "shell_call"), {
    completedCallIds: d
  }), w = us(s.computerActions, {
    completedCallIds: fr(n, "computer_call_result")
  }), b = us(ci(n, s.applyPatchActions, "apply_patch_call"), {
    completedCallIds: l
  }), I = await Ua(t, m, o, i), T = w.length > 0 ? await qa(t, w, o, i._context) : [], x = _.length > 0 ? await Ja(t, _, o, i._context) : [], P = b.length > 0 ? await Ga(t, b, o, i._context) : [], D = [], $ = Wa(n), X = (F) => Ha(F, D, $);
  for (const F of I)
    X(F.runItem);
  for (const F of T)
    X(F);
  for (const F of x)
    X(F);
  for (const F of P)
    X(F);
  const ue = oo([], [...x, ...P]), V = await Va({
    requests: s.mcpApprovalRequests,
    agent: t,
    state: i,
    functionResults: I,
    appendIfNew: X,
    resolveApproval: (F) => {
      const q = F.providerData, pe = F.id ?? (q == null ? void 0 : q.id);
      if (pe)
        return i._context.isToolApproved({
          toolName: F.name,
          callId: pe
        });
    }
  }), ie = n.filter((F) => {
    var pe;
    if (!(F instanceof le))
      return !0;
    if (Ns(F)) {
      if (V.pendingApprovals.has(F))
        return !0;
      const it = F.rawItem.id ?? ((pe = F.rawItem.providerData) == null ? void 0 : pe.id);
      return it ? V.pendingApprovalIds.has(it) : !1;
    }
    const q = Dr(F);
    return q ? h.has(q) : !0;
  }), Me = /* @__PURE__ */ new Set();
  for (const F of ie)
    F instanceof le && Me.add(F);
  let je = 0;
  for (const F of n)
    F instanceof le && !Me.has(F) && je++;
  je > 0 && i.rewindTurnPersistence(je);
  const He = await Ka({
    agent: t,
    runner: o,
    state: i,
    functionResults: I,
    originalInput: e,
    newResponse: r,
    preStepItems: ie,
    newItems: D,
    additionalInterruptions: ue
  });
  return He || new Ze(e, r, ie, D, { type: "next_step_run_again" });
}
async function di(t, e, n, r, s, o, i) {
  const a = n, u = [], d = Wa(n), l = (P) => Ha(P, u, d);
  for (const P of s.newItems)
    l(P);
  const [c, h, m, _] = await Promise.all([
    Ua(t, s.functions, o, i),
    qa(t, s.computerActions, o, i._context),
    Ja(t, s.shellActions, o, i._context),
    Ga(t, s.applyPatchActions, o, i._context)
  ]);
  for (const P of c)
    l(P.runItem);
  for (const P of h)
    l(P);
  for (const P of m)
    l(P);
  for (const P of _)
    l(P);
  const w = oo([], [...m, ..._]);
  if (s.mcpApprovalRequests.length > 0 && await Va({
    requests: s.mcpApprovalRequests,
    agent: t,
    state: i,
    functionResults: c,
    appendIfNew: l,
    resolveApproval: (P) => {
      const D = P.providerData, $ = P.id ?? (D == null ? void 0 : D.id);
      if ($)
        return i._context.isToolApproved({
          toolName: P.name,
          callId: $
        });
    }
  }), s.handoffs.length > 0)
    return await Rf(t, e, a, u, r, s.handoffs, o, i._context);
  const b = await Ka({
    agent: t,
    runner: o,
    state: i,
    functionResults: c,
    originalInput: e,
    newResponse: r,
    preStepItems: a,
    newItems: u,
    additionalInterruptions: w
  });
  if (b)
    return b;
  if (s.hasToolsOrApprovalsToRun())
    return new Ze(e, r, a, u, { type: "next_step_run_again" });
  const I = u.filter((P) => P instanceof Gr), T = I.length > 0 ? ja(I[I.length - 1].rawItem) : void 0;
  if (typeof T > "u")
    return new Ze(e, r, a, u, { type: "next_step_run_again" });
  if (!(c.some((P) => P.runItem instanceof le) || w.length > 0)) {
    if (t.outputType === "text")
      return new Ze(e, r, a, u, {
        type: "next_step_final_output",
        output: T
      });
    if (t.outputType !== "text" && T) {
      const { parser: P } = zs(t.outputType, "final_output"), [D] = await Us(() => P(T));
      if (D) {
        const $ = zf(D);
        throw Jt({
          message: $,
          data: {
            error: String(D)
          }
        }), new Oe($);
      }
      return new Ze(e, r, a, u, { type: "next_step_final_output", output: T });
    }
  }
  return new Ze(e, r, a, u, { type: "next_step_run_again" });
}
async function Ka({ agent: t, runner: e, state: n, functionResults: r, originalInput: s, newResponse: o, preStepItems: i, newItems: a, additionalInterruptions: u = [] }) {
  const d = await Pf(t, r, n, u);
  return d.isFinalOutput ? new Ze(s, o, i, a, {
    type: "next_step_final_output",
    output: d.finalOutput
  }) : d.isInterrupted ? new Ze(s, o, i, a, {
    type: "next_step_interruption",
    data: {
      interruptions: d.interruptions
    }
  }) : null;
}
function Jf(t) {
  return !!t && typeof t == "object" && "environment" in t && "dimensions" in t;
}
function Gf(t) {
  if (t.type === "function")
    return {
      type: "function",
      name: t.name,
      description: t.description,
      parameters: t.parameters,
      strict: t.strict
    };
  if (t.type === "computer") {
    if (!Jf(t.computer))
      throw new te("Computer tool is not initialized for serialization. Call resolveComputer({ tool, runContext }) first (for example, when building a model payload outside Runner.run).");
    return {
      type: "computer",
      name: t.name,
      environment: t.computer.environment,
      dimensions: t.computer.dimensions
    };
  }
  return t.type === "shell" ? {
    type: "shell",
    name: t.name
  } : t.type === "apply_patch" ? {
    type: "apply_patch",
    name: t.name
  } : {
    type: "hosted_tool",
    name: t.name,
    providerData: t.providerData
  };
}
function qf(t) {
  return {
    toolName: t.toolName,
    toolDescription: t.toolDescription,
    inputJsonSchema: t.inputJsonSchema,
    strictJsonSchema: t.strictJsonSchema
  };
}
function pi(t, e) {
  return t ? !1 : e ? !0 : "enabled_without_data";
}
function Vf(t) {
  const { agent: e, handoffs: n, tools: r, currentSpan: s } = t, o = s;
  if (o)
    return o.spanData.tools = r.map((u) => u.name), o;
  const i = n.map((u) => u.agentName), a = bp({
    data: {
      name: e.name,
      handoffs: i,
      tools: r.map((u) => u.name),
      output_type: e.outputSchemaName
    }
  });
  return a.start(), Qs(a), a;
}
async function Wf(t) {
  const e = await Hf(t);
  return await Kf(e.tools, t._context), t.setCurrentAgentSpan(Vf({
    agent: t._currentAgent,
    handoffs: e.handoffs,
    tools: e.tools,
    currentSpan: t._currentAgentSpan
  })), {
    ...e,
    serializedHandoffs: e.handoffs.map((n) => qf(n)),
    serializedTools: e.tools.map((n) => Gf(n)),
    toolsExplicitlyProvided: t._currentAgent.hasExplicitToolConfig()
  };
}
async function Hf(t) {
  const e = await t._currentAgent.getEnabledHandoffs(t._context), n = await t._currentAgent.getAllTools(t._context);
  return { handoffs: e, tools: n };
}
async function Kf(t, e) {
  const n = t.filter((r) => r.type === "computer");
  n.length !== 0 && await Promise.all(n.map(async (r) => {
    await Bi({ tool: r, runContext: e });
  }));
}
async function fi(t) {
  var w;
  const { state: e, input: n, generatedItems: r, isResumedState: s, preserveTurnPersistenceOnResume: o, continuingInterruptedTurn: i, serverConversationTracker: a, inputGuardrailDefs: u, guardrailHandlers: d, emitAgentStart: l } = t, c = await Wf(e), { isResumingFromInterruption: h } = Xf(e, {
    isResumedState: s,
    preserveTurnPersistenceOnResume: o,
    continuingInterruptedTurn: i
  });
  if (e._currentTurn > e._maxTurns)
    throw (w = e._currentAgentSpan) == null || w.setError({
      message: "Max turns exceeded",
      data: { max_turns: e._maxTurns }
    }), new nl(`Max turns (${e._maxTurns}) exceeded`, e);
  E.debug(`Running agent ${e._currentAgent.name} (turn ${e._currentTurn})`);
  const { parallelGuardrailPromise: m } = await Yf(e, u, h, d), _ = a ? a.prepareInput(n, r) : Rn(n, r);
  return e._noActiveAgentRun && (e._currentAgent.emit("agent_start", e._context, e._currentAgent, _), l == null || l(e._context, e._currentAgent, _)), {
    artifacts: c,
    turnInput: _,
    parallelGuardrailPromise: m
  };
}
async function Yf(t, e, n, r = {}) {
  var i;
  if (t._currentTurn !== 1 || n)
    return {};
  const s = tf(t, e), o = nf(s);
  return o.blocking.length > 0 && await Qo(t, o.blocking), o.parallel.length > 0 ? ((i = r.onParallelStart) == null || i.call(r), { parallelGuardrailPromise: Qo(t, o.parallel).catch((d) => {
    var l;
    return (l = r.onParallelError) == null || l.call(r, d), [];
  }) }) : {};
}
function Xf(t, e) {
  const n = e.isResumedState && e.continuingInterruptedTurn, r = e.isResumedState && t._currentTurnInProgress === !0;
  return !n && !r && (t._currentTurn++, (!e.isResumedState || !e.preserveTurnPersistenceOnResume || t._currentTurnPersistedItemCount > t._generatedItems.length) && t.resetTurnPersistence()), t._currentTurnInProgress = !0, { isResumingFromInterruption: n };
}
function Ds(t) {
  const { state: e, turnResult: n, agent: r, toolsUsed: s, resetTurnPersistence: o, onStepItems: i } = t;
  i == null || i(n), e._toolUseTracker.addToolUse(r, s), e._originalInput = n.originalInput, e._generatedItems = n.generatedItems, o && n.nextStep.type === "next_step_run_again" && e.resetTurnPersistence(), e._currentStep = n.nextStep;
}
async function hi(t) {
  var o;
  const { state: e, runner: n, onStepItems: r } = t, s = await Bf(e._currentAgent, e._originalInput, e._generatedItems, e._lastTurnResponse, e._lastProcessedResponse, n, e);
  return Ds({
    state: e,
    turnResult: s,
    agent: e._currentAgent,
    toolsUsed: ((o = e._lastProcessedResponse) == null ? void 0 : o.toolsUsed) ?? [],
    resetTurnPersistence: !1,
    onStepItems: r
  }), s.nextStep.type === "next_step_interruption" ? { nextStep: s.nextStep, action: "return_interruption" } : s.nextStep.type === "next_step_run_again" ? { nextStep: s.nextStep, action: "rerun_turn" } : { nextStep: s.nextStep, action: "advance_step" };
}
function mi(t) {
  const { state: e, outcome: n, setContinuingInterruptedTurn: r } = t;
  switch (n.action) {
    case "return_interruption":
      return e._currentStep = n.nextStep, { shouldReturn: !0, shouldContinue: !1 };
    case "rerun_turn":
      return r(!0), e._currentStep = void 0, { shouldReturn: !1, shouldContinue: !0 };
    case "advance_step":
      return r(!1), e._currentStep = n.nextStep, { shouldReturn: !1, shouldContinue: !1 };
    default: {
      const s = n.action;
      throw new Error(`Unhandled interruption outcome: ${s}`);
    }
  }
}
var ke, Ya, Xa, Qa, eu, Ms;
class Qf extends Rp {
  /**
   * Creates a runner with optional defaults that apply to every subsequent run invocation.
   *
   * @param config - Overrides for models, guardrails, tracing, or session behavior.
   */
  constructor(n = {}) {
    super();
    C(this, ke);
    y(this, "config");
    // --------------------------------------------------------------
    //  Internals
    // --------------------------------------------------------------
    y(this, "inputGuardrailDefs");
    y(this, "outputGuardrailDefs");
    this.config = {
      modelProvider: n.modelProvider ?? Zp(),
      model: n.model,
      modelSettings: n.modelSettings,
      handoffInputFilter: n.handoffInputFilter,
      inputGuardrails: n.inputGuardrails,
      outputGuardrails: n.outputGuardrails,
      tracingDisabled: n.tracingDisabled ?? !1,
      traceIncludeSensitiveData: n.traceIncludeSensitiveData ?? !0,
      workflowName: n.workflowName ?? "Agent workflow",
      traceId: n.traceId,
      groupId: n.groupId,
      traceMetadata: n.traceMetadata,
      tracing: n.tracing,
      sessionInputCallback: n.sessionInputCallback,
      callModelInputFilter: n.callModelInputFilter
    }, this.inputGuardrailDefs = (n.inputGuardrails ?? []).map(wa), this.outputGuardrailDefs = (n.outputGuardrails ?? []).map(to);
  }
  async run(n, r, s = {
    stream: !1,
    context: void 0
  }) {
    const o = s ?? { stream: !1, context: void 0 }, i = o.sessionInputCallback ?? this.config.sessionInputCallback, a = o.callModelInputFilter ?? this.config.callModelInputFilter, u = !!a, d = o.tracing ?? this.config.tracing, l = {
      ...o,
      sessionInputCallback: i,
      callModelInputFilter: a
    }, c = r instanceof Xe, h = c && r._currentTurnInProgress === !0, m = c ? r._conversationId : void 0, _ = c ? r._previousResponseId : void 0, w = !!(l.conversationId ?? m) || !!(l.previousResponseId ?? _), b = l.session, I = hf({
      session: b,
      hasCallModelInputFilter: u,
      persistInput: Pa,
      resumingFromState: c
    });
    let T = r;
    if (!(T instanceof Xe)) {
      const D = await wf(T, b, i, {
        // When the server tracks conversation state we only send the new turn inputs;
        // previous messages are recovered via conversationId/previousResponseId.
        includeHistoryInPreparedInput: !w,
        preserveDroppedNewItems: w
      });
      if (w && b) {
        const $ = D.sessionItems;
        $ && $.length > 0 ? T = $ : T = D.preparedInput;
      } else
        T = D.preparedInput;
      I == null || I.setPreparedItems(D.sessionItems);
    }
    const x = I == null ? void 0 : I.buildPersistInputOnce(w), P = async () => {
      if (l.stream)
        return await W(this, ke, eu).call(this, n, T, l, x, I == null ? void 0 : I.recordTurnItems, h);
      const D = await W(this, ke, Xa).call(this, n, T, l, I == null ? void 0 : I.recordTurnItems, h);
      return I && !w && await vf(b, I.getItemsForPersistence(), D), D;
    };
    return T instanceof Xe && T._trace ? dp(T._trace, async () => (T._currentAgentSpan && Qs(T._currentAgentSpan), P())) : pp(async () => P(), {
      traceId: this.config.traceId,
      name: this.config.workflowName,
      groupId: this.config.groupId,
      metadata: this.config.traceMetadata,
      // Per-run tracing config overrides exporter defaults such as environment API key.
      tracingApiKey: d == null ? void 0 : d.apiKey
    });
  }
}
ke = new WeakSet(), Ya = async function(n) {
  const r = n.model !== void 0 && n.model !== ot.DEFAULT_MODEL_PLACEHOLDER || this.config.model !== void 0 && this.config.model !== ot.DEFAULT_MODEL_PLACEHOLDER, s = rf(n.model, this.config.model), o = typeof s == "string" ? s : void 0;
  return { model: typeof s == "string" ? await this.config.modelProvider.getModel(s) : s, explictlyModelSet: r, resolvedModelName: o };
}, Xa = async function(n, r, s, o, i) {
  return ks(async () => {
    var m, _, w;
    const a = r instanceof Xe, u = a ? r : new Xe(s.context instanceof Yt ? s.context : new Yt(s.context), r, n, s.maxTurns ?? Yo), d = s.conversationId ?? (a ? u._conversationId : void 0), l = s.previousResponseId ?? (a ? u._previousResponseId : void 0);
    a || u.setConversationContext(d, l);
    const c = d || l ? new Xo({
      conversationId: d,
      previousResponseId: l
    }) : void 0;
    c && a && (c.primeFromState({
      originalInput: u._originalInput,
      generatedItems: u._generatedItems,
      modelResponses: u._modelResponses
    }), u.setConversationContext(c.conversationId, c.previousResponseId));
    let h = !1;
    try {
      for (; ; ) {
        if (u._currentStep = u._currentStep ?? {
          type: "next_step_run_again"
        }, u._currentStep.type === "next_step_interruption") {
          if (E.debug("Continuing from interruption"), !u._lastTurnResponse || !u._lastProcessedResponse)
            throw new te("No model response found in previous state", u);
          const I = await hi({
            state: u,
            runner: this
          }), { shouldReturn: T, shouldContinue: x } = mi({
            state: u,
            outcome: I,
            setContinuingInterruptedTurn: (P) => {
              h = P;
            }
          });
          if (T)
            return new es(u);
          if (x)
            continue;
        }
        if (u._currentStep.type === "next_step_run_again") {
          const I = h;
          h = !1;
          const T = is(), x = u._currentTurn, P = u._currentTurnPersistedItemCount, D = u._generatedItems.length, { artifacts: $, turnInput: X, parallelGuardrailPromise: ue } = await fi({
            state: u,
            input: u._originalInput,
            generatedItems: u._generatedItems,
            isResumedState: a,
            preserveTurnPersistenceOnResume: i,
            continuingInterruptedTurn: I,
            serverConversationTracker: c,
            inputGuardrailDefs: this.inputGuardrailDefs,
            guardrailHandlers: {
              onParallelStart: T.markPending,
              onParallelError: T.setError
            },
            emitAgentStart: (je, He, F) => {
              this.emit("agent_start", je, He, F);
            }
          });
          i && u._currentTurn > x && P <= D && (u._currentTurnPersistedItemCount = P), T.setPromise(ue);
          const V = await W(this, ke, Ms).call(this, u, s, $, X, c, o);
          T.throwIfError(), u._lastTurnResponse = await V.model.getResponse({
            systemInstructions: V.modelInput.instructions,
            prompt: V.prompt,
            // Explicit agent/run config models should take precedence over prompt defaults.
            ...V.explictlyModelSet ? { overridePromptModel: !0 } : {},
            input: V.modelInput.input,
            previousResponseId: V.previousResponseId,
            conversationId: V.conversationId,
            modelSettings: V.modelSettings,
            tools: V.serializedTools,
            toolsExplicitlyProvided: V.toolsExplicitlyProvided,
            outputType: To(u._currentAgent.outputType),
            handoffs: V.serializedHandoffs,
            tracing: pi(this.config.tracingDisabled, this.config.traceIncludeSensitiveData),
            signal: s.signal
          }), c && c.markInputAsSent(V.sourceItems, {
            filterApplied: V.filterApplied,
            allTurnItems: V.turnInput
          }), u._modelResponses.push(u._lastTurnResponse), u._context.usage.add(u._lastTurnResponse.usage), u._noActiveAgentRun = !1, c == null || c.trackServerItems(u._lastTurnResponse), c && u.setConversationContext(c.conversationId, c.previousResponseId);
          const ie = ni(u._lastTurnResponse, u._currentAgent, V.tools, V.handoffs);
          u._lastProcessedResponse = ie;
          const Me = await di(u._currentAgent, u._originalInput, u._generatedItems, u._lastTurnResponse, u._lastProcessedResponse, this, u);
          Ds({
            state: u,
            turnResult: Me,
            agent: u._currentAgent,
            toolsUsed: ((m = u._lastProcessedResponse) == null ? void 0 : m.toolsUsed) ?? [],
            resetTurnPersistence: !a
          }), await T.awaitCompletion();
        }
        const b = u._currentStep;
        if (!b) {
          E.debug("Running next loop");
          continue;
        }
        switch (b.type) {
          case "next_step_final_output":
            return await ei(u, this.outputGuardrailDefs, b.output), u._currentTurnInProgress = !1, this.emit("agent_end", u._context, u._currentAgent, b.output), u._currentAgent.emit("agent_end", u._context, b.output), new es(u);
          case "next_step_handoff":
            u.setCurrentAgent(b.newAgent), u._currentAgentSpan && (u._currentAgentSpan.end(), Sn(), u.setCurrentAgentSpan(void 0)), u._noActiveAgentRun = !0, u._currentTurnInProgress = !1, u._currentStep = { type: "next_step_run_again" };
            break;
          case "next_step_interruption":
            return new es(u);
          case "next_step_run_again":
            u._currentTurnInProgress = !1, E.debug("Running next loop");
            break;
          default:
            E.debug("Running next loop");
        }
      }
    } catch (b) {
      throw u._currentTurnInProgress = !1, u._currentAgentSpan && u._currentAgentSpan.setError({
        message: "Error in agent run",
        data: { error: String(b) }
      }), b;
    } finally {
      if (((_ = u._currentStep) == null ? void 0 : _.type) !== "next_step_interruption")
        try {
          await Ro({ runContext: u._context });
        } catch (b) {
          E.warn(`Failed to dispose computers after run: ${b}`);
        }
      u._currentAgentSpan && (((w = u._currentStep) == null ? void 0 : w.type) !== "next_step_interruption" && u._currentAgentSpan.end(), Sn());
    }
  });
}, Qa = async function(n, r, s, o, i, a) {
  var x, P;
  const u = r.conversationId ?? n.state._conversationId, d = r.previousResponseId ?? n.state._previousResponseId, l = !!u || !!d, c = l ? new Xo({
    conversationId: u,
    previousResponseId: d
  }) : void 0;
  c && n.state.setConversationContext(c.conversationId, c.previousResponseId);
  let h = !1, m = !1, _ = is();
  const w = async () => {
    m || !o || (await o(), m = !0);
  };
  let b;
  const I = async () => {
    if (await _.awaitCompletion(), _.failed)
      throw _.error;
    h && !m && !_.failed && await w();
  };
  c && s && (c.primeFromState({
    originalInput: n.state._originalInput,
    generatedItems: n.state._generatedItems,
    modelResponses: n.state._modelResponses
  }), n.state.setConversationContext(c.conversationId, c.previousResponseId));
  let T = !1;
  try {
    for (; ; ) {
      const D = n.state._currentAgent;
      if (n.state._currentStep = n.state._currentStep ?? {
        type: "next_step_run_again"
      }, n.state._currentStep.type === "next_step_interruption") {
        if (E.debug("Continuing from interruption"), !n.state._lastTurnResponse || !n.state._lastProcessedResponse)
          throw new te("No model response found in previous state", n.state);
        const X = await hi({
          state: n.state,
          runner: this,
          onStepItems: (ie) => {
            ri(n, ie);
          }
        }), { shouldReturn: ue, shouldContinue: V } = mi({
          state: n.state,
          outcome: X,
          setContinuingInterruptedTurn: (ie) => {
            T = ie;
          }
        });
        if (ue)
          return;
        if (V)
          continue;
      }
      if (n.state._currentStep.type === "next_step_run_again") {
        b = void 0, _ = is();
        const X = T;
        T = !1;
        const ue = n.state._currentTurn, V = n.state._currentTurnPersistedItemCount, ie = n.state._generatedItems.length, Me = await fi({
          state: n.state,
          input: n.input,
          generatedItems: n.newItems,
          isResumedState: s,
          preserveTurnPersistenceOnResume: a,
          continuingInterruptedTurn: X,
          serverConversationTracker: c,
          inputGuardrailDefs: this.inputGuardrailDefs,
          guardrailHandlers: {
            onParallelStart: () => {
              _.markPending();
            },
            onParallelError: (be) => {
              _.setError(be);
            }
          },
          emitAgentStart: (be, It, hu) => {
            this.emit("agent_start", be, It, hu);
          }
        });
        a && n.state._currentTurn > ue && V <= ie && (n.state._currentTurnPersistedItemCount = V);
        const { artifacts: je, turnInput: He } = Me;
        b = Me.parallelGuardrailPromise, _.setPromise(b);
        const F = _.pending, q = await W(this, ke, Ms).call(this, n.state, r, je, He, c, i);
        _.throwIfError();
        let pe, it = !1;
        const Wt = () => {
          it || !c || (c.markInputAsSent(q.sourceItems, {
            filterApplied: q.filterApplied,
            allTurnItems: q.turnInput
          }), it = !0);
        };
        h = !0, F || await w();
        try {
          for await (const be of q.model.getStreamedResponse({
            systemInstructions: q.modelInput.instructions,
            prompt: q.prompt,
            // Streaming requests should also honor explicitly chosen models.
            ...q.explictlyModelSet ? { overridePromptModel: !0 } : {},
            input: q.modelInput.input,
            previousResponseId: q.previousResponseId,
            conversationId: q.conversationId,
            modelSettings: q.modelSettings,
            tools: q.serializedTools,
            toolsExplicitlyProvided: q.toolsExplicitlyProvided,
            handoffs: q.serializedHandoffs,
            outputType: To(D.outputType),
            tracing: pi(this.config.tracingDisabled, this.config.traceIncludeSensitiveData),
            signal: r.signal
          })) {
            if (_.throwIfError(), Wt(), be.type === "response_done") {
              const It = ia.parse(be);
              pe = {
                usage: new ar(It.response.usage),
                output: It.response.output,
                responseId: It.response.id
              }, n.state._context.usage.add(pe.usage);
            }
            if (n.cancelled) {
              await I();
              return;
            }
            n._addItem(new $p(be));
          }
        } catch (be) {
          if (lf(be)) {
            h && Wt(), await I();
            return;
          }
          throw be;
        }
        if (pe && Wt(), await I(), n.cancelled)
          return;
        if (n.state._noActiveAgentRun = !1, !pe)
          throw new Oe("Model did not produce a final response!", n.state);
        n.state._lastTurnResponse = pe, c == null || c.trackServerItems(pe), c && n.state.setConversationContext(c.conversationId, c.previousResponseId), n.state._modelResponses.push(n.state._lastTurnResponse);
        const bt = ni(n.state._lastTurnResponse, D, q.tools, q.handoffs);
        n.state._lastProcessedResponse = bt;
        const ye = new Set(bt.newItems);
        ye.size > 0 && pf(n, bt.newItems);
        const ur = await di(D, n.state._originalInput, n.state._generatedItems, n.state._lastTurnResponse, n.state._lastProcessedResponse, this, n.state);
        Ds({
          state: n.state,
          turnResult: ur,
          agent: D,
          toolsUsed: bt.toolsUsed,
          resetTurnPersistence: !s,
          onStepItems: (be) => {
            ri(n, be, { skipItems: ye });
          }
        });
      }
      const $ = n.state._currentStep;
      switch ($.type) {
        case "next_step_final_output":
          await ei(n.state, this.outputGuardrailDefs, $.output), n.state._currentTurnInProgress = !1, await w(), l || await si(r.session, n), this.emit("agent_end", n.state._context, D, $.output), D.emit("agent_end", n.state._context, $.output);
          return;
        case "next_step_interruption":
          await w(), l || await si(r.session, n);
          return;
        case "next_step_handoff":
          n.state.setCurrentAgent($.newAgent), n.state._currentAgentSpan && (n.state._currentAgentSpan.end(), Sn()), n.state.setCurrentAgentSpan(void 0), n._addItem(new Lp(n.state._currentAgent)), n.state._noActiveAgentRun = !0, n.state._currentTurnInProgress = !1, n.state._currentStep = {
            type: "next_step_run_again"
          };
          break;
        case "next_step_run_again":
          n.state._currentTurnInProgress = !1, E.debug("Running next loop");
          break;
        default:
          E.debug("Running next loop");
      }
    }
  } catch (D) {
    throw n.state._currentTurnInProgress = !1, _.pending && await _.awaitCompletion({ suppressErrors: !0 }), h && !m && !_.failed && await w(), n.state._currentAgentSpan && n.state._currentAgentSpan.setError({
      message: "Error in agent run",
      data: { error: String(D) }
    }), D;
  } finally {
    if (_.pending && await _.awaitCompletion({ suppressErrors: !0 }), h && !m && !_.failed && await w(), ((x = n.state._currentStep) == null ? void 0 : x.type) !== "next_step_interruption")
      try {
        await Ro({ runContext: n.state._context });
      } catch (D) {
        E.warn(`Failed to dispose computers after run: ${D}`);
      }
    n.state._currentAgentSpan && (((P = n.state._currentStep) == null ? void 0 : P.type) !== "next_step_interruption" && n.state._currentAgentSpan.end(), Sn());
  }
}, eu = async function(n, r, s, o, i, a) {
  return s = s ?? {}, ks(async () => {
    const u = r instanceof Xe, d = u ? r : new Xe(s.context instanceof Yt ? s.context : new Yt(s.context), r, n, s.maxTurns ?? Yo), l = s.conversationId ?? (u ? d._conversationId : void 0), c = s.previousResponseId ?? (u ? d._previousResponseId : void 0);
    u || d.setConversationContext(l, c);
    const h = new ua({
      signal: s.signal,
      state: d
    }), m = {
      ...s,
      signal: h._getAbortSignal()
    };
    h.maxTurns = m.maxTurns ?? d._maxTurns;
    const _ = W(this, ke, Qa).call(this, h, m, u, o, i, a).then(() => {
      h._done();
    }, (w) => {
      h._raiseError(w);
    });
    return h._setStreamLoopPromise(_), h;
  });
}, Ms = async function(n, r, s, o, i, a) {
  const { model: u, explictlyModelSet: d, resolvedModelName: l } = await W(this, ke, Ya).call(this, n._currentAgent);
  let c = {
    ...this.config.modelSettings,
    ...n._currentAgent.modelSettings
  };
  c = of(d, n._currentAgent.modelSettings, u, c, l), c = sf(n._currentAgent, n._toolUseTracker, c);
  const h = await n._currentAgent.getSystemPrompt(n._context), m = await n._currentAgent.getPrompt(n._context), { modelInput: _, sourceItems: w, persistedItems: b, filterApplied: I } = await ef(n._currentAgent, r.callModelInputFilter, n._context, o, h);
  a == null || a(w, I ? b : void 0);
  const T = (i == null ? void 0 : i.previousResponseId) ?? r.previousResponseId, x = (i == null ? void 0 : i.conversationId) ?? r.conversationId;
  return {
    ...s,
    model: u,
    explictlyModelSet: d,
    modelSettings: c,
    modelInput: _,
    prompt: m,
    previousResponseId: T,
    conversationId: x,
    sourceItems: w,
    filterApplied: I,
    turnInput: o
  };
};
const js = /* @__PURE__ */ new WeakMap();
function eh(t, e) {
  t && js.set(t, e);
}
function th(t) {
  const e = js.get(t);
  return e && js.delete(t), e;
}
const nh = g({ input: f() }), Qt = class Qt extends Ep {
  constructor(n) {
    super();
    y(this, "name");
    y(this, "instructions");
    y(this, "prompt");
    y(this, "handoffDescription");
    y(this, "handoffs");
    y(this, "model");
    y(this, "modelSettings");
    y(this, "tools");
    y(this, "mcpServers");
    y(this, "inputGuardrails");
    y(this, "outputGuardrails");
    y(this, "outputType", "text");
    y(this, "toolUseBehavior");
    y(this, "resetToolChoice");
    y(this, "_toolsExplicitlyConfigured");
    if (typeof n.name != "string" || n.name.trim() === "")
      throw new te("Agent must have a name.");
    if (this.name = n.name, this.instructions = n.instructions ?? Qt.DEFAULT_MODEL_PLACEHOLDER, this.prompt = n.prompt, this.handoffDescription = n.handoffDescription ?? "", this.handoffs = n.handoffs ?? [], this.model = n.model ?? "", this.modelSettings = n.modelSettings ?? Np(), this.tools = n.tools ?? [], this._toolsExplicitlyConfigured = n.tools !== void 0, this.mcpServers = n.mcpServers ?? [], this.inputGuardrails = n.inputGuardrails ?? [], this.outputGuardrails = n.outputGuardrails ?? [], n.outputType && (this.outputType = n.outputType), this.toolUseBehavior = n.toolUseBehavior ?? "run_llm_again", this.resetToolChoice = n.resetToolChoice ?? !0, // The user sets a non-default model
    n.model !== void 0 && // The default model is gpt-5
    ma() && // However, the specified model is not a gpt-5 model
    (typeof n.model != "string" || !Jr(n.model)) && // The model settings are not customized for the specified model
    n.modelSettings === void 0 && (this.modelSettings = {}), (n.handoffOutputTypeWarningEnabled === void 0 || n.handoffOutputTypeWarningEnabled) && this.handoffs && this.outputType) {
      const r = /* @__PURE__ */ new Set([JSON.stringify(this.outputType)]);
      for (const s of this.handoffs)
        "outputType" in s && s.outputType ? r.add(JSON.stringify(s.outputType)) : "agent" in s && s.agent.outputType && r.add(JSON.stringify(s.agent.outputType));
      r.size > 1 && E.warn(`[Agent] Warning: Handoff agents have different output types: ${Array.from(r).join(", ")}. You can make it type-safe by using Agent.create({ ... }) method instead.`);
    }
  }
  /**
   * Create an Agent with handoffs and automatically infer the union type for TOutput from the handoff agents' output types.
   */
  static create(n) {
    return new Qt({
      ...n,
      handoffs: n.handoffs,
      outputType: n.outputType,
      handoffOutputTypeWarningEnabled: !1
    });
  }
  /**
   * Output schema name.
   */
  get outputSchemaName() {
    if (this.outputType === "text")
      return "text";
    if (Lt(this.outputType))
      return "ZodOutput";
    if (typeof this.outputType == "object")
      return this.outputType.name;
    throw new Error(`Unknown output type: ${this.outputType}`);
  }
  /**
   * Makes a copy of the agent, with the given arguments changed. For example, you could do:
   *
   * ```
   * const newAgent = agent.clone({ instructions: 'New instructions' })
   * ```
   *
   * @param config - A partial configuration to change.
   * @returns A new agent with the given changes.
   */
  clone(n) {
    return new Qt({
      ...this,
      ...n
    });
  }
  /**
   * Transform this agent into a tool, callable by other agents.
   *
   * This is different from handoffs in two ways:
   * 1. In handoffs, the new agent receives the conversation history. In this tool, the new agent
   *    receives generated input.
   * 2. In handoffs, the new agent takes over the conversation. In this tool, the new agent is
   *    called as a tool, and the conversation is continued by the original agent.
   *
   * @param options - Options for the tool.
   * @returns A tool that runs the agent and returns the output text.
   */
  asTool(n) {
    const { toolName: r, toolDescription: s, customOutputExtractor: o, needsApproval: i, runConfig: a, runOptions: u, isEnabled: d, onStream: l } = n, c = /* @__PURE__ */ new Map(), h = async (w) => {
      const b = c.get(w.event.type), I = c.get("*"), T = [
        ...l ? [l] : [],
        ...b ? Array.from(b) : [],
        ...I ? Array.from(I) : []
      ];
      await Promise.allSettled(T.map((x) => Promise.resolve().then(() => x(w))));
    }, _ = {
      ...vs({
        name: r ?? yr(this.name),
        description: s ?? "",
        parameters: nh,
        strict: !0,
        needsApproval: i,
        isEnabled: d,
        execute: async (w, b, I) => {
          if (!al(w))
            throw new Oe("Agent tool called with invalid input");
          const T = new Qf(a ?? {}), x = typeof l == "function" || c.size > 0, P = x ? await T.run(this, w.input, {
            context: b,
            ...u ?? {},
            stream: !0
          }) : await T.run(this, w.input, {
            context: b,
            ...u ?? {}
          }), D = {
            agent: this,
            toolCall: I == null ? void 0 : I.toolCall
          };
          if (x) {
            const V = P;
            for await (const ie of V)
              await h({
                event: ie,
                ...D
              });
            await V.completed;
          }
          const $ = P, X = typeof this.toolUseBehavior == "object" && this.toolUseBehavior !== null && "stopAtToolNames" in this.toolUseBehavior;
          typeof o != "function" && X && E.debug(`You're passing the agent (name: ${this.name}) with toolUseBehavior.stopAtToolNames configured as a tool to a different agent; this may not work as you expect. You may want to have a wrapper function tool to consistently return the final output.`);
          const ue = typeof o == "function" ? await o($) : Sf($.rawResponses[$.rawResponses.length - 1]);
          return I != null && I.toolCall && eh(I.toolCall, $), ue;
        }
      }),
      on: (w, b) => {
        const I = c.get(w) ?? /* @__PURE__ */ new Set();
        return I.add(b), c.set(w, I), _;
      }
    };
    return _;
  }
  /**
   * Returns the system prompt for the agent.
   *
   * If the agent has a function as its instructions, this function will be called with the
   * runContext and the agent instance.
   */
  async getSystemPrompt(n) {
    return typeof this.instructions == "function" ? await this.instructions(n, this) : this.instructions;
  }
  /**
   * Returns the prompt template for the agent, if defined.
   *
   * If the agent has a function as its prompt, this function will be called with the
   * runContext and the agent instance.
   */
  async getPrompt(n) {
    return typeof this.prompt == "function" ? await this.prompt(n, this) : this.prompt;
  }
  /**
   * Fetches the available tools from the MCP servers.
   * @returns the MCP powered tools
   */
  async getMcpTools(n) {
    return this.mcpServers.length > 0 ? yd({
      mcpServers: this.mcpServers,
      runContext: n,
      agent: this,
      convertSchemasToStrict: !1
    }) : [];
  }
  /**
   * ALl agent tools, including the MCPl and function tools.
   *
   * @returns all configured tools
   */
  async getAllTools(n) {
    const r = await this.getMcpTools(n), s = [];
    for (const o of this.tools) {
      if (o.type === "function") {
        const i = o.isEnabled;
        if (!(typeof i == "function" ? await i(n, this) : typeof i == "boolean" ? i : !0))
          continue;
      }
      s.push(o);
    }
    return [...r, ...s];
  }
  hasExplicitToolConfig() {
    return this._toolsExplicitlyConfigured;
  }
  /**
   * Returns the handoffs that should be exposed to the model for the current run.
   *
   * Handoffs that provide an `isEnabled` function returning `false` are omitted.
   */
  async getEnabledHandoffs(n) {
    var o;
    const r = ((o = this.handoffs) == null ? void 0 : o.map((i) => jp(i))) ?? [], s = [];
    for (const i of r)
      await i.isEnabled({ runContext: n, agent: this }) && s.push(i);
    return s;
  }
  /**
   * Processes the final output of the agent.
   *
   * @param output - The output of the agent.
   * @returns The parsed out.
   */
  processFinalOutput(n) {
    if (this.outputType === "text")
      return n;
    if (typeof this.outputType == "object") {
      const r = JSON.parse(n);
      return Lt(this.outputType) ? this.outputType.parse(r) : r;
    }
    throw new Error(`Unknown output type: ${this.outputType}`);
  }
  /**
   * Returns a JSON representation of the agent, which is serializable.
   *
   * @returns A JSON object containing the agent's name.
   */
  toJSON() {
    return {
      name: this.name
    };
  }
};
y(Qt, "DEFAULT_MODEL_PLACEHOLDER", "");
let ot = Qt;
Op(la());
function tu(t) {
  const e = atob(t), n = e.length, r = new Uint8Array(n);
  for (let s = 0; s < n; s++)
    r[s] = e.charCodeAt(s);
  return r.buffer;
}
function nu(t) {
  const e = String.fromCharCode(...new Uint8Array(t));
  return btoa(e);
}
function ru(t) {
  if (typeof t > "u" || t === null || typeof t != "object" || !("type" in t) || typeof t.type != "string" || !t.type || t.type !== "message" || !("content" in t) || !Array.isArray(t.content) || t.content.length < 1)
    return;
  const e = t.content[t.content.length - 1];
  if (!(!("type" in e) || typeof e.type != "string")) {
    if (e.type === "output_text")
      return typeof e.text == "string" ? e.text : void 0;
    if (e.type === "output_audio")
      return typeof e.transcript == "string" ? e.transcript : void 0;
  }
}
function rh(t, e) {
  const n = t.filter((o) => !e.some((i) => i.itemId === o.itemId)), r = e.filter((o) => !t.some((i) => i.itemId === o.itemId)), s = e.filter((o) => t.some((i) => i.itemId === o.itemId && JSON.stringify(i) !== JSON.stringify(o)));
  return {
    removals: n,
    additions: r,
    updates: s
  };
}
function sh() {
  return typeof window > "u" ? !1 : typeof window.RTCPeerConnection < "u";
}
function gi(t) {
  return t.role === "system" ? t : t.role === "assistant" ? {
    ...t,
    content: t.content.map((e) => e.type === "output_audio" ? {
      ...e,
      audio: null
    } : e)
  } : t.role === "user" ? {
    ...t,
    content: t.content.map((e) => e.type === "input_audio" ? {
      ...e,
      audio: null
    } : e)
  } : t;
}
function oh(t, e) {
  if (t.role !== "assistant" || e.role !== "assistant")
    return e;
  const n = e.content.map((r, s) => {
    if (r.type !== "output_audio" || !(typeof r.transcript != "string" || r.transcript.length === 0))
      return r;
    const i = t.content[s];
    return i && i.type === "output_audio" && typeof i.transcript == "string" && i.transcript.length > 0 ? {
      ...r,
      transcript: i.transcript
    } : r;
  });
  return {
    ...e,
    content: n
  };
}
function yi(t, e, n) {
  if (e.type === "conversation.item.input_audio_transcription.completed")
    return t.map((o) => {
      if (o.itemId === e.item_id && o.type === "message" && "role" in o && o.role === "user") {
        const i = o.content.map((a) => a.type === "input_audio" ? {
          ...a,
          transcript: e.transcript
        } : a);
        return {
          ...o,
          content: i,
          status: "completed"
        };
      }
      return o;
    });
  const r = !n && e.type === "message" ? gi(e) : e, s = t.findIndex((o) => o.itemId === e.itemId);
  if (s !== -1) {
    const o = t[s], i = r.type === "message" && o.type === "message" ? oh(o, r) : r;
    return t.map((a, u) => u === s ? i : !n && a.type === "message" ? gi(a) : a);
  } else if (e.previousItemId) {
    const o = t.findIndex((i) => i.itemId === e.previousItemId);
    return o !== -1 ? [
      ...t.slice(0, o + 1),
      r,
      ...t.slice(o + 1)
    ] : [...t, r];
  } else
    return [...t, r];
}
const su = {
  "User-Agent": `Agents/JavaScript ${cs.version}`,
  "X-OpenAI-Agents-SDK": `openai-agents-sdk.${cs.version}`
}, ih = `openai-agents-sdk.${cs.version}`;
function ah(t, e) {
  const { name: n, arguments: r, ...s } = e;
  return new le({
    type: "hosted_tool_call",
    name: n,
    arguments: JSON.stringify(r),
    status: "in_progress",
    providerData: {
      ...s
    }
  }, t);
}
function _i(t) {
  if (t.rawItem.type !== "function_call" && t.rawItem.type !== "hosted_tool_call")
    throw new Error("Invalid approval item type for Realtime MCP approval request");
  const { name: e, arguments: n, providerData: r } = t.rawItem, { itemId: s, serverLabel: o, ...i } = r ?? {};
  if (!s || !o)
    throw new Error("Invalid approval item for Realtime MCP approval request");
  return {
    type: "mcp_approval_request",
    itemId: s,
    serverLabel: o,
    ...i,
    name: e,
    arguments: n ? JSON.parse(n) : {},
    approved: null
  };
}
class Im extends ot {
  constructor(n) {
    super(n);
    /**
     * The voice intended to be used by the agent. If another agent already spoke during the
     * RealtimeSession, changing the voice during a handoff will fail.
     */
    y(this, "voice");
    this.voice = n.voice;
  }
}
function uh(t) {
  return {
    debounceTextLength: t.debounceTextLength ?? 100
  };
}
function ch({ policyHint: t, ...e }) {
  const n = to(e), r = t ?? n.name;
  return {
    ...n,
    policyHint: r,
    run: async (s) => {
      const o = await n.run(s);
      return {
        ...o,
        guardrail: { ...o.guardrail, policyHint: r }
      };
    }
  };
}
function lh(t) {
  return `
 Your last answer was blocked. 
Failed Guardrail Reason: ${t.guardrail.policyHint}. 
Failure Details: ${JSON.stringify(t.output.outputInfo ?? {})}. 
Please respond again following policy. Apologize for not being able to answer the question (while avoiding the specific reason) and divert discussion back to an approved topic immediately and not invite more discussion.
`.trim();
}
function Tt(t, e) {
  return t in e && typeof e[t] < "u";
}
function dh(t) {
  return Tt("modalities", t) || Tt("inputAudioFormat", t) || Tt("outputAudioFormat", t) || Tt("inputAudioTranscription", t) || Tt("turnDetection", t) || Tt("inputAudioNoiseReduction", t) || Tt("speed", t);
}
function ph(t) {
  var e, n, r, s, o, i, a, u;
  if (!dh(t)) {
    const d = (e = t.audio) != null && e.input ? {
      format: hr(t.audio.input.format),
      noiseReduction: t.audio.input.noiseReduction ?? null,
      transcription: t.audio.input.transcription,
      turnDetection: t.audio.input.turnDetection
    } : void 0, l = ((r = (n = t.audio) == null ? void 0 : n.output) == null ? void 0 : r.voice) ?? t.voice, c = (s = t.audio) != null && s.output || typeof l < "u" ? {
      format: hr((i = (o = t.audio) == null ? void 0 : o.output) == null ? void 0 : i.format),
      voice: l,
      speed: (u = (a = t.audio) == null ? void 0 : a.output) == null ? void 0 : u.speed
    } : void 0;
    return {
      model: t.model,
      instructions: t.instructions,
      toolChoice: t.toolChoice,
      tools: t.tools,
      tracing: t.tracing,
      providerData: t.providerData,
      prompt: t.prompt,
      outputModalities: t.outputModalities,
      audio: d || c ? {
        input: d,
        output: c
      } : void 0
    };
  }
  return {
    model: t.model,
    instructions: t.instructions,
    toolChoice: t.toolChoice,
    tools: t.tools,
    tracing: t.tracing,
    providerData: t.providerData,
    prompt: t.prompt,
    outputModalities: t.modalities,
    audio: {
      input: {
        format: hr(t.inputAudioFormat),
        noiseReduction: t.inputAudioNoiseReduction ?? null,
        transcription: t.inputAudioTranscription,
        turnDetection: t.turnDetection
      },
      output: {
        format: hr(t.outputAudioFormat),
        voice: t.voice,
        speed: t.speed
      }
    }
  };
}
function hr(t) {
  if (!t)
    return;
  if (typeof t == "object")
    return t;
  const e = String(t);
  return e === "pcm16" ? { type: "audio/pcm", rate: 24e3 } : e === "g711_ulaw" ? { type: "audio/pcmu" } : e === "g711_alaw" ? { type: "audio/pcma" } : { type: "audio/pcm", rate: 24e3 };
}
g({
  itemId: f()
});
const vi = ge("role", [
  g({
    itemId: f(),
    previousItemId: f().nullable().optional(),
    type: v("message"),
    role: v("system"),
    content: U(g({ type: v("input_text"), text: f() }))
  }),
  g({
    itemId: f(),
    previousItemId: f().nullable().optional(),
    type: v("message"),
    role: v("user"),
    status: ae(["in_progress", "completed"]),
    content: U(g({ type: v("input_text"), text: f() }).or(g({
      type: v("input_audio"),
      audio: f().nullable().optional(),
      transcript: f().nullable()
    })))
  }),
  g({
    itemId: f(),
    previousItemId: f().nullable().optional(),
    type: v("message"),
    role: v("assistant"),
    status: ae(["in_progress", "completed", "incomplete"]),
    content: U(g({ type: v("output_text"), text: f() }).or(g({
      type: v("output_audio"),
      audio: f().nullable().optional(),
      transcript: f().nullable().optional()
    })))
  })
]), wi = g({
  itemId: f(),
  previousItemId: f().nullable().optional(),
  type: v("function_call"),
  status: ae(["in_progress", "completed", "incomplete"]),
  arguments: f(),
  name: f(),
  output: f().nullable()
}), bi = g({
  itemId: f(),
  previousItemId: f().nullable().optional(),
  type: ae(["mcp_call", "mcp_tool_call"]),
  status: ae(["in_progress", "completed", "incomplete"]),
  arguments: f(),
  name: f(),
  output: f().nullable()
}), fh = g({
  itemId: f(),
  type: v("mcp_approval_request"),
  serverLabel: f(),
  name: f(),
  arguments: ne(f(), B()),
  approved: yt().optional().nullable()
}), Ce = Li("openai-agents:realtime"), ou = g({
  id: f().optional().nullable(),
  conversation_id: f().optional().nullable(),
  max_output_tokens: k().or(v("inf")).optional().nullable(),
  metadata: ne(f(), B()).optional().nullable(),
  // GA rename: modalities -> output_modalities
  output_modalities: U(f()).optional().nullable(),
  object: v("realtime.response").optional().nullable(),
  output: U(B()).optional().nullable(),
  // GA grouping: audio.output.{format,voice}
  audio: g({
    output: g({
      format: B().optional().nullable(),
      voice: f().optional().nullable()
    }).optional().nullable()
  }).optional().nullable(),
  status: ae(["completed", "incomplete", "failed", "cancelled", "in_progress"]).optional().nullable(),
  status_details: ne(f(), B()).optional().nullable(),
  usage: g({
    input_tokens: k().optional(),
    input_token_details: ne(f(), B()).optional().nullable(),
    output_tokens: k().optional(),
    output_token_details: ne(f(), B()).optional().nullable()
  }).optional().nullable()
}), hh = g({
  id: f().optional(),
  audio: f().nullable().optional(),
  text: f().nullable().optional(),
  transcript: f().nullable().optional(),
  type: Ge([
    v("input_text"),
    v("input_audio"),
    v("item_reference"),
    v("output_text"),
    v("output_audio")
  ])
}), wn = g({
  id: f().optional(),
  arguments: f().optional(),
  call_id: f().optional(),
  content: U(hh).optional(),
  name: f().optional(),
  output: f().nullable().optional(),
  role: ae(["user", "assistant", "system"]).optional(),
  status: ae(["completed", "incomplete", "in_progress"]).optional(),
  type: ae([
    "message",
    "function_call",
    "function_call_output",
    "mcp_list_tools",
    "mcp_tool_call",
    "mcp_call",
    "mcp_approval_request",
    "mcp_approval_response"
  ]).optional(),
  approval_request_id: f().nullable().optional(),
  approve: yt().nullable().optional(),
  reason: f().nullable().optional(),
  server_label: f().optional(),
  error: B().nullable().optional(),
  tools: U(g({
    name: f(),
    description: f(),
    input_schema: ne(B()).optional()
  }).passthrough()).optional()
}).passthrough(), mh = g({
  type: v("conversation.created"),
  event_id: f(),
  conversation: g({
    id: f().optional(),
    object: v("realtime.conversation").optional()
  })
}), gh = g({
  type: v("conversation.item.added"),
  event_id: f(),
  item: wn,
  previous_item_id: f().nullable().optional()
}), yh = g({
  type: v("conversation.item.done"),
  event_id: f(),
  item: wn,
  previous_item_id: f().nullable().optional()
}), _h = g({
  type: v("conversation.item.deleted"),
  event_id: f(),
  item_id: f()
}), vh = g({
  type: v("conversation.item.input_audio_transcription.completed"),
  event_id: f(),
  item_id: f(),
  content_index: k(),
  transcript: f(),
  logprobs: U(B()).nullable().optional(),
  usage: g({
    type: v("tokens"),
    total_tokens: k(),
    input_tokens: k(),
    input_token_details: g({
      text_tokens: k(),
      audio_tokens: k()
    }),
    output_tokens: k()
  }).optional()
}), wh = g({
  type: v("conversation.item.input_audio_transcription.delta"),
  event_id: f(),
  item_id: f(),
  content_index: k().optional(),
  delta: f().optional(),
  logprobs: U(B()).nullable().optional()
}), bh = g({
  type: v("conversation.item.input_audio_transcription.failed"),
  event_id: f(),
  item_id: f(),
  content_index: k(),
  error: g({
    code: f().optional(),
    message: f().optional(),
    param: f().optional(),
    type: f().optional()
  })
}), Ih = g({
  type: v("conversation.item.retrieved"),
  event_id: f(),
  item: wn
}), Sh = g({
  type: v("conversation.item.truncated"),
  event_id: f(),
  item_id: f(),
  audio_end_ms: k(),
  content_index: k()
}), Th = g({
  type: v("conversation.item.create"),
  item: wn,
  event_id: f().optional(),
  previous_item_id: f().nullable().optional()
}), xh = g({
  type: v("conversation.item.delete"),
  item_id: f(),
  event_id: f().optional()
}), Ah = g({
  type: v("conversation.item.retrieve"),
  item_id: f(),
  event_id: f().optional()
}), kh = g({
  type: v("conversation.item.truncate"),
  item_id: f(),
  audio_end_ms: k(),
  content_index: k(),
  event_id: f().optional()
}), Ch = g({
  type: v("error"),
  event_id: f().optional(),
  error: B().optional()
}), Oh = g({
  type: v("input_audio_buffer.cleared"),
  event_id: f()
}), Eh = g({
  type: v("input_audio_buffer.append"),
  audio: f(),
  event_id: f().optional()
}), Rh = g({
  type: v("input_audio_buffer.clear"),
  event_id: f().optional()
}), Ph = g({
  type: v("input_audio_buffer.commit"),
  event_id: f().optional()
}), Nh = g({
  type: v("input_audio_buffer.committed"),
  event_id: f(),
  item_id: f(),
  previous_item_id: f().nullable().optional()
}), Dh = g({
  type: v("input_audio_buffer.speech_started"),
  event_id: f(),
  item_id: f(),
  audio_start_ms: k()
}), Mh = g({
  type: v("input_audio_buffer.speech_stopped"),
  event_id: f(),
  item_id: f(),
  audio_end_ms: k()
}), jh = g({
  type: v("output_audio_buffer.started"),
  event_id: f()
}).passthrough(), $h = g({
  type: v("output_audio_buffer.stopped"),
  event_id: f()
}).passthrough(), Fh = g({
  type: v("output_audio_buffer.cleared"),
  event_id: f()
}), Lh = g({
  type: v("rate_limits.updated"),
  event_id: f(),
  rate_limits: U(g({
    limit: k().optional(),
    name: ae(["requests", "tokens"]).optional(),
    remaining: k().optional(),
    reset_seconds: k().optional()
  }))
}), Zh = g({
  type: v("response.output_audio.delta"),
  event_id: f(),
  item_id: f(),
  content_index: k(),
  delta: f(),
  output_index: k(),
  response_id: f()
}), Uh = g({
  type: v("response.output_audio.done"),
  event_id: f(),
  item_id: f(),
  content_index: k(),
  output_index: k(),
  response_id: f()
}), zh = g({
  type: v("response.output_audio_transcript.delta"),
  event_id: f(),
  item_id: f(),
  content_index: k(),
  delta: f(),
  output_index: k(),
  response_id: f()
}), Bh = g({
  //  GA may introduce response.output_audio_transcript.done
  type: v("response.output_audio_transcript.done"),
  event_id: f(),
  item_id: f(),
  content_index: k(),
  transcript: f(),
  output_index: k(),
  response_id: f()
}), Jh = g({
  type: v("response.content_part.added"),
  event_id: f(),
  item_id: f(),
  content_index: k(),
  output_index: k(),
  response_id: f(),
  part: g({
    audio: f().optional(),
    text: f().optional(),
    transcript: f().optional(),
    type: ae(["text", "audio"]).optional()
  })
}), Gh = g({
  type: v("response.content_part.done"),
  event_id: f(),
  item_id: f(),
  content_index: k(),
  output_index: k(),
  response_id: f(),
  part: g({
    audio: f().optional(),
    text: f().optional(),
    transcript: f().optional(),
    type: ae(["text", "audio"]).optional()
  })
}), qh = g({
  type: v("response.created"),
  event_id: f(),
  response: ou
}), iu = g({
  type: v("response.done"),
  event_id: f(),
  response: ou
}), Vh = g({
  type: v("response.function_call_arguments.delta"),
  event_id: f(),
  item_id: f(),
  call_id: f(),
  delta: f(),
  output_index: k(),
  response_id: f()
}), Wh = g({
  type: v("response.function_call_arguments.done"),
  event_id: f(),
  item_id: f(),
  call_id: f(),
  arguments: f(),
  output_index: k(),
  response_id: f()
}), Hh = g({
  type: v("response.output_item.added"),
  event_id: f(),
  item: wn,
  output_index: k(),
  response_id: f()
}), Kh = g({
  type: v("response.output_item.done"),
  event_id: f(),
  item: wn,
  output_index: k(),
  response_id: f()
}), Yh = g({
  type: v("response.output_text.delta"),
  event_id: f(),
  item_id: f(),
  content_index: k(),
  delta: f(),
  output_index: k(),
  response_id: f()
}), Xh = g({
  // No rename specified for done; keep response.text.done
  type: v("response.output_text.done"),
  event_id: f(),
  item_id: f(),
  content_index: k(),
  text: f(),
  output_index: k(),
  response_id: f()
}), Qh = g({
  type: v("session.created"),
  event_id: f(),
  session: B()
}), em = g({
  type: v("session.updated"),
  event_id: f(),
  session: B()
}), tm = g({
  type: v("response.cancel"),
  event_id: f().optional(),
  response_id: f().optional()
}), nm = g({
  type: v("response.create"),
  event_id: f().optional(),
  response: B().optional()
}), rm = g({
  type: v("session.update"),
  event_id: f().optional(),
  session: B()
}), sm = g({
  type: v("mcp_list_tools.in_progress"),
  event_id: f().optional(),
  item_id: f().optional()
}), om = g({
  type: v("mcp_list_tools.completed"),
  event_id: f().optional(),
  item_id: f().optional()
}), im = g({
  type: v("response.mcp_call_arguments.delta"),
  event_id: f(),
  response_id: f(),
  item_id: f(),
  output_index: k(),
  delta: f(),
  obfuscation: f()
}), am = g({
  type: v("response.mcp_call_arguments.done"),
  event_id: f(),
  response_id: f(),
  item_id: f(),
  output_index: k(),
  arguments: f()
}), um = g({
  type: v("response.mcp_call.in_progress"),
  event_id: f(),
  output_index: k(),
  item_id: f()
}), cm = g({
  type: v("response.mcp_call.completed"),
  event_id: f(),
  output_index: k(),
  item_id: f()
}), lm = g({
  type: v("mcp_list_tools.failed"),
  event_id: f().optional(),
  item_id: f().optional()
}), dm = g({
  type: f(),
  event_id: f().optional().nullable()
}).passthrough(), pm = ge("type", [
  mh,
  gh,
  yh,
  _h,
  vh,
  wh,
  bh,
  Ih,
  Sh,
  Ch,
  Oh,
  Nh,
  Dh,
  Mh,
  jh,
  $h,
  Fh,
  Lh,
  Zh,
  Uh,
  zh,
  Bh,
  Jh,
  Gh,
  qh,
  iu,
  Vh,
  Wh,
  Hh,
  Kh,
  Yh,
  Xh,
  Qh,
  em,
  sm,
  om,
  lm,
  im,
  am,
  um,
  cm
]);
ge("type", [
  Th,
  xh,
  Ah,
  kh,
  Eh,
  Rh,
  Ph,
  tm,
  nm,
  rm
]);
function io(t) {
  const e = JSON.parse(t.data.toString()), n = pm.safeParse(e);
  if (!n.success) {
    const r = dm.safeParse(e);
    return r.success ? { data: r.data, isGeneric: !0 } : { data: null, isGeneric: !0 };
  }
  return { data: n.data, isGeneric: !1 };
}
const fm = "gpt-realtime", $e = {
  outputModalities: ["audio"],
  audio: {
    input: {
      format: { type: "audio/pcm", rate: 24e3 },
      transcription: { model: "gpt-4o-mini-transcribe" },
      turnDetection: { type: "semantic_vad" },
      noiseReduction: null
    },
    output: {
      format: { type: "audio/pcm", rate: 24e3 },
      speed: 1
    }
  }
};
var Nt, Hn, Ie, Kn;
const co = class co extends eo {
  constructor(n = {}) {
    super();
    C(this, Nt);
    C(this, Hn);
    C(this, Ie, null);
    C(this, Kn, null);
    y(this, "eventEmitter", new Lr());
    S(this, Nt, n.model ?? fm), S(this, Hn, n.apiKey);
  }
  /**
   * The current model that is being used by the transport layer.
   */
  get currentModel() {
    return p(this, Nt);
  }
  /**
   * The current model that is being used by the transport layer.
   * **Note**: The model cannot be changed mid conversation.
   */
  set currentModel(n) {
    S(this, Nt, n);
  }
  /**
   * Hook for subclasses to clean up transport-specific state when audio
   * playback finishes. Defaults to a no-op.
   */
  _afterAudioDoneEvent() {
  }
  get _rawSessionConfig() {
    return p(this, Kn) ?? null;
  }
  async _getApiKey(n) {
    const r = n.apiKey ?? p(this, Hn);
    return typeof r == "function" ? await r() : r;
  }
  _onMessage(n) {
    var o, i, a, u, d, l;
    const { data: r, isGeneric: s } = io(n);
    if (r !== null && (this.emit("*", r), !s)) {
      if (r.type === "error" ? this.emit("error", { type: "error", error: r }) : this.emit(r.type, r), r.type === "response.created") {
        this.emit("turn_started", {
          type: "response_started",
          providerData: {
            ...r
          }
        });
        return;
      }
      if (r.type === "session.updated" && S(this, Kn, r.session), r.type === "response.done") {
        const c = iu.safeParse(r);
        if (!c.success) {
          Ce.error("Error parsing response done event", c.error);
          return;
        }
        const h = ((o = c.data.response.usage) == null ? void 0 : o.input_tokens) ?? 0, m = ((i = c.data.response.usage) == null ? void 0 : i.output_tokens) ?? 0, _ = h + m, w = new ar({
          inputTokens: h,
          inputTokensDetails: ((a = c.data.response.usage) == null ? void 0 : a.input_token_details) ?? {},
          outputTokens: m,
          outputTokensDetails: ((u = c.data.response.usage) == null ? void 0 : u.output_token_details) ?? {},
          totalTokens: _
        });
        this.emit("usage_update", w), this.emit("turn_done", {
          type: "response_done",
          response: {
            id: c.data.response.id ?? "",
            output: c.data.response.output ?? [],
            usage: {
              inputTokens: h,
              inputTokensDetails: ((d = c.data.response.usage) == null ? void 0 : d.input_token_details) ?? {},
              outputTokens: m,
              outputTokensDetails: ((l = c.data.response.usage) == null ? void 0 : l.output_token_details) ?? {},
              totalTokens: _
            }
          }
        });
        return;
      }
      if (r.type === "response.output_audio.done") {
        this.emit("audio_done"), this._afterAudioDoneEvent();
        return;
      }
      if (r.type === "conversation.item.deleted") {
        this.emit("item_deleted", {
          itemId: r.item_id
        });
        return;
      }
      if (r.type === "conversation.item.input_audio_transcription.completed" || r.type === "conversation.item.truncated") {
        this.sendEvent({
          type: "conversation.item.retrieve",
          item_id: r.item_id
        });
        return;
      }
      if (r.type === "conversation.item.input_audio_transcription.delta" || r.type === "response.output_text.delta" || r.type === "response.output_audio_transcript.delta" || r.type === "response.function_call_arguments.delta") {
        r.type === "response.output_audio_transcript.delta" && this.emit("audio_transcript_delta", {
          type: "transcript_delta",
          delta: r.delta,
          itemId: r.item_id,
          responseId: r.response_id
        });
        return;
      }
      if (r.type === "conversation.item.added" || r.type === "conversation.item.done" || r.type === "conversation.item.retrieved") {
        if (r.item.type === "mcp_list_tools" && r.type === "conversation.item.done") {
          const c = r.item.server_label ?? "", h = r.item.tools ?? [];
          try {
            this.emit("mcp_tools_listed", {
              serverLabel: c,
              tools: h
            });
          } catch (m) {
            Ce.error("Error emitting mcp_tools_listed", m, r.item);
          }
          return;
        }
        if (r.item.type === "message") {
          const c = r.type === "conversation.item.added" || r.type === "conversation.item.done" ? r.previous_item_id : null, h = vi.parse({
            itemId: r.item.id,
            previousItemId: c,
            type: r.item.type,
            role: r.item.role,
            content: r.item.content,
            status: r.item.status
          });
          this.emit("item_update", h);
          return;
        }
        if (r.item.type === "mcp_approval_request" && r.type === "conversation.item.done") {
          const c = r.item, h = fh.parse({
            itemId: c.id,
            type: c.type,
            serverLabel: c.server_label,
            name: c.name,
            arguments: JSON.parse(c.arguments || "{}"),
            approved: c.approved
          });
          this.emit("item_update", h), this.emit("mcp_approval_request", h);
          return;
        }
        if (r.item.type === "mcp_tool_call" || r.item.type === "mcp_call") {
          const c = r.type === "conversation.item.done" ? "completed" : "in_progress", h = bi.parse({
            itemId: r.item.id,
            type: r.item.type,
            status: c,
            arguments: r.item.arguments,
            name: r.item.name,
            output: r.item.output
          });
          this.emit("item_update", h), r.type === "conversation.item.done" && this.emit("mcp_tool_call_completed", h);
          return;
        }
      }
      if (r.type === "response.mcp_call.in_progress") {
        const c = r;
        this.sendEvent({
          type: "conversation.item.retrieve",
          item_id: c.item_id
        });
        return;
      }
      if (r.type === "mcp_list_tools.in_progress") {
        const c = r;
        c.item_id && this.sendEvent({
          type: "conversation.item.retrieve",
          item_id: c.item_id
        });
        return;
      }
      if (r.type === "response.output_item.done" || r.type === "response.output_item.added") {
        const c = r.item;
        if (c.type === "function_call" && c.status === "completed") {
          const h = wi.parse({
            itemId: c.id,
            type: c.type,
            status: "in_progress",
            // we set it to in_progress for the UI as it will only be completed with the output
            arguments: c.arguments,
            name: c.name,
            output: null
          });
          this.emit("item_update", h), this.emit("function_call", {
            id: c.id,
            type: "function_call",
            callId: c.call_id ?? "",
            arguments: c.arguments ?? "",
            name: c.name ?? ""
          });
          return;
        }
        if (c.type === "mcp_tool_call" || c.type === "mcp_call") {
          const h = bi.parse({
            itemId: c.id,
            type: c.type,
            status: r.type === "response.output_item.done" ? "completed" : "in_progress",
            // we set it to in_progress for the UI as it will only be completed with the output
            arguments: c.arguments,
            name: c.name,
            output: c.output
          });
          this.emit("item_update", h);
          return;
        }
        if (c.type === "message") {
          const h = vi.parse({
            itemId: r.item.id,
            type: r.item.type,
            role: r.item.role,
            content: r.item.content,
            status: r.type === "response.output_item.done" ? c.status ?? "completed" : c.status ?? "in_progress"
          });
          this.emit("item_update", h);
          return;
        }
      }
    }
  }
  _onError(n) {
    this.emit("error", {
      type: "error",
      error: n
    });
  }
  _onOpen() {
    this.emit("connected");
  }
  _onClose() {
    this.emit("disconnected");
  }
  /**
   * Send a message to the Realtime API. This will create a new item in the conversation and
   * trigger a response.
   *
   * @param message - The message to send.
   * @param otherEventData - Additional event data to send.
   */
  sendMessage(n, r, { triggerResponse: s = !0 } = {}) {
    const o = typeof n == "string" ? [
      {
        type: "input_text",
        text: n
      }
    ] : n.content.map((i) => i.type === "input_image" ? {
      type: "input_image",
      image_url: i.image,
      ...i.providerData ?? {}
    } : i);
    this.sendEvent({
      type: "conversation.item.create",
      item: {
        type: "message",
        role: "user",
        content: o
      },
      ...r
    }), s && this.sendEvent({
      type: "response.create"
    });
  }
  addImage(n, { triggerResponse: r = !0 } = {}) {
    this.sendMessage({
      type: "message",
      role: "user",
      content: [{ type: "input_image", image: n }]
    }, {}, { triggerResponse: r });
  }
  _getMergedSessionConfig(n) {
    var u, d, l, c, h, m, _, w, b, I, T, x, P, D, $, X, ue, V, ie, Me, je, He, F, q, pe, it, Wt, bt;
    const r = ph(n), s = (d = (u = r.audio) == null ? void 0 : u.input) == null ? void 0 : d.noiseReduction, o = (c = (l = r.audio) == null ? void 0 : l.input) == null ? void 0 : c.transcription, i = co.buildTurnDetectionConfig((m = (h = r.audio) == null ? void 0 : h.input) == null ? void 0 : m.turnDetection), a = {
      type: "realtime",
      instructions: r.instructions,
      model: r.model ?? p(this, Nt),
      output_modalities: r.outputModalities ?? $e.outputModalities,
      audio: {
        input: {
          format: ((w = (_ = r.audio) == null ? void 0 : _.input) == null ? void 0 : w.format) ?? ((I = (b = $e.audio) == null ? void 0 : b.input) == null ? void 0 : I.format),
          noise_reduction: s === void 0 ? (x = (T = $e.audio) == null ? void 0 : T.input) == null ? void 0 : x.noiseReduction : s,
          transcription: o === void 0 ? (D = (P = $e.audio) == null ? void 0 : P.input) == null ? void 0 : D.transcription : o,
          turn_detection: i === void 0 ? (X = ($ = $e.audio) == null ? void 0 : $.input) == null ? void 0 : X.turnDetection : i
        },
        output: {
          format: ((V = (ue = r.audio) == null ? void 0 : ue.output) == null ? void 0 : V.format) ?? ((Me = (ie = $e.audio) == null ? void 0 : ie.output) == null ? void 0 : Me.format),
          voice: ((He = (je = r.audio) == null ? void 0 : je.output) == null ? void 0 : He.voice) ?? ((q = (F = $e.audio) == null ? void 0 : F.output) == null ? void 0 : q.voice),
          speed: ((it = (pe = r.audio) == null ? void 0 : pe.output) == null ? void 0 : it.speed) ?? ((bt = (Wt = $e.audio) == null ? void 0 : Wt.output) == null ? void 0 : bt.speed)
        }
      },
      tool_choice: r.toolChoice ?? $e.toolChoice,
      // We don't set tracing here to make sure that we don't try to override it on every
      // session.update as it might lead to errors
      ...r.providerData ?? {}
    };
    return r.prompt && (a.prompt = {
      id: r.prompt.promptId,
      version: r.prompt.version,
      variables: r.prompt.variables
    }), r.tools && r.tools.length > 0 && (a.tools = r.tools.map((ye) => {
      const ur = (be) => Object.fromEntries(Object.entries(be).filter(([, It]) => typeof It < "u"));
      return ye.type === "mcp" ? ur({
        type: "mcp",
        server_label: ye.server_label,
        server_url: ye.server_url,
        server_description: ye.server_description,
        connector_id: ye.connector_id,
        authorization: ye.authorization,
        headers: ye.headers,
        allowed_tools: ye.allowed_tools,
        require_approval: ye.require_approval
      }) : ur({
        type: ye.type,
        name: ye.name,
        description: ye.description,
        parameters: ye.parameters
      });
    })), a;
  }
  /**
   * Build the payload object expected by the Realtime API when creating or updating a session.
   *
   * The helper centralises the conversion from camelCase runtime config to the snake_case payload
   * required by the Realtime API so transports that need a one-off payload (for example SIP call
   * acceptance) can reuse the same logic without duplicating private state.
   *
   * @param config - The session config to merge with defaults.
   */
  buildSessionPayload(n) {
    return this._getMergedSessionConfig(n);
  }
  static buildTurnDetectionConfig(n) {
    if (typeof n > "u")
      return;
    if (n === null)
      return null;
    const { type: r, createResponse: s, create_response: o, eagerness: i, interruptResponse: a, interrupt_response: u, prefixPaddingMs: d, prefix_padding_ms: l, silenceDurationMs: c, silence_duration_ms: h, threshold: m, idleTimeoutMs: _, idle_timeout_ms: w, ...b } = n, I = {
      type: r,
      create_response: s ?? o,
      eagerness: i,
      interrupt_response: a ?? u,
      prefix_padding_ms: d ?? l,
      silence_duration_ms: c ?? h,
      idle_timeout_ms: _ ?? w,
      threshold: m,
      ...b
    };
    return Object.keys(I).forEach((T) => {
      I[T] === void 0 && delete I[T];
    }), Object.keys(I).length > 0 ? I : void 0;
  }
  /**
   * Sets the internal tracing config. This is used to track the tracing config that has been set
   * during the session.create event.
   */
  set _tracingConfig(n) {
    S(this, Ie, n);
  }
  /**
   * Sets the tracing config for the session. This will send the tracing config to the Realtime API.
   *
   * @param tracingConfig - The tracing config to set. We don't support 'auto' here as the SDK will always configure a Workflow Name unless it exists
   */
  _updateTracingConfig(n) {
    var r, s, o;
    if (typeof p(this, Ie) > "u" && S(this, Ie, null), n === "auto") {
      this.sendEvent({
        type: "session.update",
        session: {
          type: "realtime",
          tracing: "auto"
        }
      });
      return;
    }
    if (p(this, Ie) !== null && typeof p(this, Ie) != "string" && typeof n != "string") {
      Ce.warn("Tracing config is already set, skipping setting it again. This likely happens when you already set a tracing config on session creation.");
      return;
    }
    if (n === null) {
      Ce.debug("Disabling tracing for this session. It cannot be turned on for this session from this point on."), this.sendEvent({
        type: "session.update",
        session: {
          type: "realtime",
          tracing: null
        }
      });
      return;
    }
    if (p(this, Ie) === null || typeof p(this, Ie) == "string") {
      this.sendEvent({
        type: "session.update",
        session: {
          type: "realtime",
          tracing: n
        }
      });
      return;
    }
    if ((n == null ? void 0 : n.group_id) !== ((r = p(this, Ie)) == null ? void 0 : r.group_id) || (n == null ? void 0 : n.metadata) !== ((s = p(this, Ie)) == null ? void 0 : s.metadata) || (n == null ? void 0 : n.workflow_name) !== ((o = p(this, Ie)) == null ? void 0 : o.workflow_name)) {
      Ce.warn("Mismatch in tracing config. Ignoring the new tracing config. This likely happens when you already set a tracing config on session creation. Current tracing config: %s, new tracing config: %s", JSON.stringify(p(this, Ie)), JSON.stringify(n));
      return;
    }
    this.sendEvent({
      type: "session.update",
      session: {
        type: "realtime",
        tracing: n
      }
    });
  }
  /**
   * Updates the session config. This will merge it with the current session config with the default
   * values and send it to the Realtime API.
   *
   * @param config - The session config to update.
   */
  updateSessionConfig(n) {
    const r = this.buildSessionPayload(n);
    this.sendEvent({
      type: "session.update",
      session: r
    });
  }
  /**
   * Send the output of a function call to the Realtime API.
   *
   * @param toolCall - The tool call to send the output for.
   * @param output - The output of the function call.
   * @param startResponse - Whether to start a new response after sending the output.
   */
  sendFunctionCallOutput(n, r, s = !0) {
    this.sendEvent({
      type: "conversation.item.create",
      item: {
        type: "function_call_output",
        output: r,
        call_id: n.callId
      }
    });
    try {
      const o = wi.parse({
        itemId: n.id,
        previousItemId: n.previousItemId,
        type: "function_call",
        status: "completed",
        arguments: n.arguments,
        name: n.name,
        output: r
      });
      this.emit("item_update", o);
    } catch (o) {
      Ce.error("Error parsing tool call item", o, n);
    }
    s && this.sendEvent({
      type: "response.create"
    });
  }
  /**
   * Send an audio buffer to the Realtime API. If `{ commit: true }` is passed, the audio buffer
   * will be committed and the model will start processing it. This is necessary if you have
   * disabled turn detection / voice activity detection (VAD).
   *
   * @param audio - The audio buffer to send.
   * @param options - The options for the audio buffer.
   */
  sendAudio(n, { commit: r = !1 } = {}) {
    this.sendEvent({
      type: "input_audio_buffer.append",
      audio: nu(n)
    }), r && this.sendEvent({
      type: "input_audio_buffer.commit"
    });
  }
  /**
   * Reset the history of the conversation. This will create a diff between the old and new history
   * and send the necessary events to the Realtime API to update the history.
   *
   * @param oldHistory - The old history of the conversation.
   * @param newHistory - The new history of the conversation.
   */
  resetHistory(n, r) {
    const { removals: s, additions: o, updates: i } = rh(n, r), a = new Set(s.map((d) => d.itemId));
    for (const d of i)
      a.add(d.itemId);
    if (a.size > 0)
      for (const d of a)
        this.sendEvent({
          type: "conversation.item.delete",
          item_id: d
        });
    const u = [...o, ...i];
    for (const d of u)
      if (d.type === "message") {
        const l = {
          type: "message",
          role: d.role,
          content: d.content,
          id: d.itemId
        };
        d.role !== "system" && d.status && (l.status = d.status), this.sendEvent({
          type: "conversation.item.create",
          item: l
        });
      } else d.type === "function_call" && Ce.warn("Function calls cannot be manually added or updated at the moment. Ignoring.");
  }
  sendMcpResponse(n, r) {
    this.sendEvent({
      type: "conversation.item.create",
      previous_item_id: n.itemId,
      item: {
        type: "mcp_approval_response",
        approval_request_id: n.itemId,
        approve: r
      }
    });
  }
};
Nt = new WeakMap(), Hn = new WeakMap(), Ie = new WeakMap(), Kn = new WeakMap();
let Mr = co;
var Yn, ee, Xn, mt, Qn;
class hm extends Mr {
  constructor(n = {}) {
    if (typeof RTCPeerConnection > "u")
      throw new Error("WebRTC is not supported in this environment");
    super(n);
    y(this, "options");
    C(this, Yn);
    C(this, ee, {
      status: "disconnected",
      peerConnection: void 0,
      dataChannel: void 0,
      callId: void 0
    });
    C(this, Xn);
    C(this, mt, !1);
    C(this, Qn, !1);
    this.options = n, S(this, Yn, n.baseUrl ?? "https://api.openai.com/v1/realtime/calls"), S(this, Xn, n.useInsecureApiKey ?? !1);
  }
  /**
   * The current call ID of the WebRTC connection.
   */
  get callId() {
    return p(this, ee).callId;
  }
  /**
   * The current status of the WebRTC connection.
   */
  get status() {
    return p(this, ee).status;
  }
  /**
   * The current connection state of the WebRTC connection including the peer connection and data
   * channel.
   */
  get connectionState() {
    return p(this, ee);
  }
  /**
   * Whether the session is muted.
   */
  get muted() {
    return p(this, Qn);
  }
  /**
   * Connect to the Realtime API. This will establish the connection to the OpenAI Realtime API
   * via WebRTC.
   *
   * If you are using a browser, the transport layer will also automatically configure the
   * microphone and audio output to be used by the session.
   *
   * @param options - The options for the connection.
   */
  async connect(n) {
    if (p(this, ee).status === "connected")
      return;
    p(this, ee).status === "connecting" && Ce.warn("Realtime connection already in progress. Please await original promise");
    const r = n.model ?? this.currentModel;
    this.currentModel = r;
    const s = n.url ?? p(this, Yn), o = await this._getApiKey(n), i = typeof o == "string" && o.startsWith("ek_");
    if (!p(this, Xn) && !i)
      throw new te("Using the WebRTC connection in a browser environment requires an ephemeral client key. If you need to use a regular API key, use the WebSocket transport or set the `useInsecureApiKey` option to true.");
    return new Promise(async (a, u) => {
      var d, l;
      try {
        const c = {
          ...n.initialSessionConfig || {},
          model: this.currentModel
        }, h = new URL(s);
        let m = new RTCPeerConnection();
        const _ = m.createDataChannel("oai-events");
        let w;
        const b = ($) => {
          $.onconnectionstatechange = () => {
            switch ($.connectionState) {
              case "disconnected":
              case "failed":
              case "closed":
                this.close();
                break;
            }
          };
        };
        b(m), S(this, ee, {
          status: "connecting",
          peerConnection: m,
          dataChannel: _,
          callId: w
        }), this.emit("connection_change", p(this, ee).status), _.addEventListener("open", () => {
          S(this, ee, {
            status: "connected",
            peerConnection: m,
            dataChannel: _,
            callId: w
          }), this.updateSessionConfig(c), this.emit("connection_change", p(this, ee).status), this._onOpen(), a();
        }), _.addEventListener("error", ($) => {
          this.close(), this._onError($), u($);
        }), _.addEventListener("message", ($) => {
          this._onMessage($);
          const { data: X, isGeneric: ue } = io($);
          if (!(!X || ue) && (X.type === "response.created" ? S(this, mt, !0) : X.type === "response.done" && S(this, mt, !1), X.type === "session.created")) {
            this._tracingConfig = X.session.tracing;
            const V = typeof c.tracing > "u" ? "auto" : c.tracing;
            this._updateTracingConfig(V);
          }
        });
        const I = this.options.audioElement ?? document.createElement("audio");
        I.autoplay = !0, m.ontrack = ($) => {
          I.srcObject = $.streams[0];
        };
        const T = this.options.mediaStream ?? await navigator.mediaDevices.getUserMedia({
          audio: !0
        });
        if (m.addTrack(T.getAudioTracks()[0]), this.options.changePeerConnection) {
          const $ = m;
          m = await this.options.changePeerConnection(m), $ !== m && ($.onconnectionstatechange = null), b(m), S(this, ee, { ...p(this, ee), peerConnection: m });
        }
        const x = await m.createOffer();
        if (await m.setLocalDescription(x), !x.sdp)
          throw new Error("Failed to create offer");
        const P = await fetch(h, {
          method: "POST",
          body: x.sdp,
          headers: {
            "Content-Type": "application/sdp",
            Authorization: `Bearer ${o}`,
            "X-OpenAI-Agents-SDK": su["X-OpenAI-Agents-SDK"]
          }
        });
        w = (l = (d = P.headers) == null ? void 0 : d.get("Location")) == null ? void 0 : l.split("/").pop(), S(this, ee, { ...p(this, ee), callId: w });
        const D = {
          type: "answer",
          sdp: await P.text()
        };
        await m.setRemoteDescription(D);
      } catch (c) {
        this.close(), this._onError(c), u(c);
      }
    });
  }
  /**
   * Send an event to the Realtime API. This will stringify the event and send it directly to the
   * API. This can be used if you want to take control over the connection and send events manually.
   *
   * @param event - The event to send.
   */
  sendEvent(n) {
    if (!p(this, ee).dataChannel || p(this, ee).dataChannel.readyState !== "open")
      throw new Error("WebRTC data channel is not connected. Make sure you call `connect()` before sending events.");
    p(this, ee).dataChannel.send(JSON.stringify(n));
  }
  /**
   * Mute or unmute the session.
   * @param muted - Whether to mute the session.
   */
  mute(n) {
    S(this, Qn, n), p(this, ee).peerConnection && p(this, ee).peerConnection.getSenders().forEach((s) => {
      s.track && (s.track.enabled = !n);
    });
  }
  _afterAudioDoneEvent() {
    S(this, mt, !1);
  }
  /**
   * Close the connection to the Realtime API and disconnects the underlying WebRTC connection.
   */
  close() {
    if (p(this, ee).dataChannel && p(this, ee).dataChannel.close(), p(this, ee).peerConnection) {
      const n = p(this, ee).peerConnection;
      n.onconnectionstatechange = null, n.getSenders().forEach((r) => {
        var s;
        (s = r.track) == null || s.stop();
      }), n.close();
    }
    p(this, ee).status !== "disconnected" && (S(this, ee, {
      status: "disconnected",
      peerConnection: void 0,
      dataChannel: void 0,
      callId: void 0
    }), this.emit("connection_change", p(this, ee).status), this._onClose());
  }
  /**
   * Interrupt the current response if one is ongoing and clear the audio buffer so that the agent
   * stops talking.
   */
  interrupt() {
    p(this, mt) && (this.sendEvent({
      type: "response.cancel"
    }), S(this, mt, !1)), this.sendEvent({
      type: "output_audio_buffer.clear"
    });
  }
}
Yn = new WeakMap(), ee = new WeakMap(), Xn = new WeakMap(), mt = new WeakMap(), Qn = new WeakMap();
const mm = globalThis.WebSocket;
var gt, Dt, Mt, fe, er, tt, jt, $t, ln, tr, qt, $s, uu;
class au extends Mr {
  constructor(n = {}) {
    super(n);
    C(this, qt);
    C(this, gt);
    C(this, Dt);
    C(this, Mt);
    C(this, fe, {
      status: "disconnected",
      websocket: void 0
    });
    C(this, er);
    C(this, tt);
    C(this, jt);
    /**
     * Timestamp maintained by the transport layer to aid with the calculation of the elapsed time
     * since the response started to compute the right interruption time.
     *
     * Mostly internal but might be used by extended transport layers for their interruption
     * calculation.
     */
    y(this, "_firstAudioTimestamp");
    y(this, "_audioLengthMs", 0);
    C(this, $t, !1);
    C(this, ln);
    C(this, tr);
    S(this, Dt, n.url), S(this, Mt, n.url), S(this, er, n.useInsecureApiKey ?? !1), S(this, ln, n.createWebSocket), S(this, tr, n.skipOpenEventListeners ?? !1);
  }
  getCommonRequestHeaders() {
    return su;
  }
  /**
   * The current status of the WebSocket connection.
   */
  get status() {
    return p(this, fe).status;
  }
  /**
   * The current connection state of the WebSocket connection.
   */
  get connectionState() {
    return p(this, fe);
  }
  /**
   * Always returns `null` as the WebSocket transport layer does not handle muting. Instead,
   * this should be handled by the client by not triggering the `sendAudio` method.
   */
  get muted() {
    return null;
  }
  /**
   * The current item ID of the ongoing response.
   */
  get currentItemId() {
    return p(this, tt);
  }
  /**
   * Triggers the `audio` event that a client might listen to to receive the audio buffer.
   * Protected for you to be able to override and disable emitting this event in case your extended
   * transport layer handles audio internally.
   *
   * @param audioEvent - The audio event to emit.
   */
  _onAudio(n) {
    this.emit("audio", n);
  }
  _afterAudioDoneEvent() {
    W(this, qt, $s).call(this);
  }
  async connect(n) {
    const r = n.model ?? this.currentModel;
    this.currentModel = r, S(this, gt, await this._getApiKey(n));
    const s = n.callId;
    let o;
    n.url ? (o = n.url, S(this, Mt, n.url)) : s ? o = `wss://api.openai.com/v1/realtime?call_id=${s}` : p(this, Mt) ? o = p(this, Mt) : o = `wss://api.openai.com/v1/realtime?model=${this.currentModel}`, S(this, Dt, o);
    const i = {
      ...n.initialSessionConfig || {},
      model: this.currentModel
    };
    await new Promise((a, u) => {
      W(this, qt, uu).call(this, a, u, i).catch(u);
    }), await this.updateSessionConfig(i);
  }
  /**
   * Send an event to the Realtime API. This will stringify the event and send it directly to the
   * API. This can be used if you want to take control over the connection and send events manually.
   *
   * @param event - The event to send.
   */
  sendEvent(n) {
    if (!p(this, fe).websocket)
      throw new Error("WebSocket is not connected. Make sure you call `connect()` before sending events.");
    p(this, fe).websocket.send(JSON.stringify(n));
  }
  /**
   * Close the WebSocket connection.
   *
   * This will also reset any internal connection tracking used for interruption handling.
   */
  close() {
    var n;
    (n = p(this, fe).websocket) == null || n.close(), S(this, tt, void 0), this._firstAudioTimestamp = void 0, this._audioLengthMs = 0, S(this, jt, void 0);
  }
  /**
   * Will throw an error as the WebSocket transport layer does not support muting.
   */
  mute(n) {
    throw new Error("Mute is not supported for the WebSocket transport. You have to mute the audio input yourself.");
  }
  /**
   * Send an audio buffer to the Realtime API. This is used for your client to send audio to the
   * model to respond.
   *
   * @param audio - The audio buffer to send.
   * @param options - The options for the audio buffer.
   */
  sendAudio(n, r = {}) {
    p(this, fe).status === "connected" && super.sendAudio(n, r);
  }
  /**
   * Send a cancel response event to the Realtime API. This is used to cancel an ongoing
   *  response that the model is currently generating.
   */
  _cancelResponse() {
    p(this, $t) && (this.sendEvent({
      type: "response.cancel"
    }), S(this, $t, !1));
  }
  /**
   * Do NOT call this method directly. Call `interrupt()` instead for proper interruption handling.
   *
   * This method is used to send the right events to the API to inform the model that the user has
   * interrupted the response. It might be overridden/extended by an extended transport layer. See
   * the `TwilioRealtimeTransportLayer` for an example.
   *
   * @param elapsedTime - The elapsed time since the response started.
   */
  _interrupt(n, r = !0) {
    if (n < 0)
      return;
    r && this._cancelResponse();
    const s = this._audioLengthMs ?? Number.POSITIVE_INFINITY, o = Math.max(0, Math.floor(Math.min(n, s)));
    this.emit("audio_interrupted"), this.sendEvent({
      type: "conversation.item.truncate",
      item_id: p(this, tt),
      content_index: p(this, jt),
      audio_end_ms: o
    });
  }
  /**
   * Interrupt the ongoing response. This method is triggered automatically by the client when
   * voice activity detection (VAD) is enabled (default) as well as when an output guardrail got
   * triggered.
   *
   * You can also call this method directly if you want to interrupt the conversation for example
   * based on an event in the client.
   */
  interrupt(n = !0) {
    if (!p(this, tt) || typeof this._firstAudioTimestamp != "number")
      return;
    const r = Date.now() - this._firstAudioTimestamp;
    r >= 0 && this._interrupt(r, n), W(this, qt, $s).call(this);
  }
}
gt = new WeakMap(), Dt = new WeakMap(), Mt = new WeakMap(), fe = new WeakMap(), er = new WeakMap(), tt = new WeakMap(), jt = new WeakMap(), $t = new WeakMap(), ln = new WeakMap(), tr = new WeakMap(), qt = new WeakSet(), $s = function() {
  S(this, tt, void 0), this._firstAudioTimestamp = void 0, this._audioLengthMs = 0, S(this, jt, void 0);
}, uu = async function(n, r, s) {
  if (p(this, fe).websocket) {
    n();
    return;
  }
  if (!p(this, gt))
    throw new te("API key is not set. Please call `connect()` with an API key first.");
  if (!p(this, gt).startsWith("ek_") && !p(this, er))
    throw new te("Using the WebSocket connection in a browser environment requires an ephemeral client key. If you have to use a regular API key, set the `useInsecureApiKey` option to true.");
  let o = null;
  if (p(this, ln))
    o = await p(this, ln).call(this, {
      url: p(this, Dt),
      apiKey: p(this, gt)
    });
  else {
    const a = [
      "realtime",
      // Auth
      "openai-insecure-api-key." + p(this, gt),
      // Version header
      ih
    ];
    o = new mm(p(this, Dt), a);
  }
  S(this, fe, {
    status: "connecting",
    websocket: o
  }), this.emit("connection_change", p(this, fe).status);
  const i = () => {
    S(this, fe, {
      status: "connected",
      websocket: o
    }), this.emit("connection_change", p(this, fe).status), this._onOpen(), n();
  };
  p(this, tr) === !0 ? i() : o.addEventListener("open", i), o.addEventListener("error", (a) => {
    this._onError(a), S(this, fe, {
      status: "disconnected",
      websocket: void 0
    }), this.emit("connection_change", p(this, fe).status), r(a);
  }), o.addEventListener("message", (a) => {
    var l, c, h, m, _, w, b;
    this._onMessage(a);
    const { data: u, isGeneric: d } = io(a);
    if (!(!u || d)) {
      if (u.type === "response.output_audio.delta") {
        S(this, jt, u.content_index), S(this, tt, u.item_id), this._firstAudioTimestamp === void 0 && (this._firstAudioTimestamp = Date.now(), this._audioLengthMs = 0);
        const I = tu(u.delta), T = (h = (c = (l = this._rawSessionConfig) == null ? void 0 : l.audio) == null ? void 0 : c.output) == null ? void 0 : h.format;
        if (T && typeof T == "object") {
          const P = T.type;
          if (P === "audio/pcmu" || P === "audio/pcma")
            this._audioLengthMs += I.byteLength / 8;
          else if (P === "audio/pcm") {
            const D = T.rate ?? 24e3;
            this._audioLengthMs += I.byteLength / 2 / D * 1e3;
          } else
            this._audioLengthMs += I.byteLength / 24 / 2;
        } else typeof T == "string" ? T.startsWith("g711_") ? this._audioLengthMs += I.byteLength / 8 : this._audioLengthMs += I.byteLength / 24 / 2 : this._audioLengthMs += I.byteLength / 24 / 2;
        const x = {
          type: "audio",
          data: I,
          responseId: u.response_id
        };
        this._onAudio(x);
      } else if (u.type === "input_audio_buffer.speech_started") {
        const I = ((b = (w = (_ = (m = this._rawSessionConfig) == null ? void 0 : m.audio) == null ? void 0 : _.input) == null ? void 0 : w.turn_detection) == null ? void 0 : b.interrupt_response) ?? !1;
        this.interrupt(!I);
      } else if (u.type === "response.created")
        S(this, $t, !0);
      else if (u.type === "response.done")
        S(this, $t, !1);
      else if (u.type === "session.created") {
        this._tracingConfig = u.session.tracing;
        const I = typeof s.tracing > "u" ? "auto" : s.tracing;
        this._updateTracingConfig(I);
      }
    }
  }), o.addEventListener("close", () => {
    S(this, fe, {
      status: "disconnected",
      websocket: void 0
    }), this.emit("connection_change", p(this, fe).status), this._onClose();
  });
};
const cu = Symbol("backgroundResult");
function Sm(t) {
  return {
    [cu]: !0,
    content: t
  };
}
function gm(t) {
  return typeof t == "object" && t !== null && cu in t;
}
function ym(t) {
  return t.type === "function" || t.type === "hosted_tool" && t.name === "hosted_mcp";
}
function _m(t) {
  if (t.type === "function")
    return t;
  if (t.type === "hosted_tool" && t.name === "hosted_mcp") {
    const e = t.providerData.server_url && t.providerData.server_url.length > 0 ? t.providerData.server_url : void 0;
    return {
      type: "mcp",
      server_label: t.providerData.server_label,
      server_url: e,
      headers: t.providerData.headers,
      allowed_tools: t.providerData.allowed_tools,
      require_approval: t.providerData.require_approval
    };
  }
  throw new te(`Invalid tool type: ${t}`);
}
function vm() {
  return JSON.parse(JSON.stringify($e));
}
var G, M, dn, j, pn, fn, nr, se, hn, mn, Le, rr, Ft, sr, or, re, Tn, xn, lu, mr, du, Ls, pu, Zs;
const lo = class lo extends Lr {
  constructor(n, r = {}) {
    super();
    C(this, re);
    y(this, "initialAgent");
    y(this, "options");
    C(this, G);
    C(this, M);
    C(this, dn);
    C(this, j);
    C(this, pn, []);
    C(this, fn);
    C(this, nr, {});
    C(this, se, []);
    C(this, hn);
    C(this, mn, {});
    C(this, Le, !1);
    // Tracks all MCP tools fetched per server label (from mcp_list_tools results).
    C(this, rr, /* @__PURE__ */ new Map());
    // Tracks currently available MCP tools based on the active agent's configured server_labels.
    C(this, Ft, []);
    // Keeps track of the last full session config we sent (camelCase keys) so that
    // subsequent updates (e.g. during agent handoffs) preserve properties that are
    // not explicitly recalculated here (such as inputAudioFormat, outputAudioFormat,
    // modalities, speed, toolChoice, turnDetection, etc.). Without this, updating
    // the agent would drop audio format overrides (e.g. g711_ulaw) and revert to
    // transport defaults causing issues for integrations like Twilio.
    C(this, sr, vm());
    C(this, or, !0);
    this.initialAgent = n, this.options = r, typeof r.transport > "u" && sh() || r.transport === "webrtc" ? S(this, G, new hm()) : r.transport === "websocket" || typeof r.transport > "u" ? S(this, G, new au()) : S(this, G, r.transport), S(this, M, n), S(this, j, new Yt({
      ...r.context ?? {},
      history: p(this, se)
    })), S(this, pn, (r.outputGuardrails ?? []).map(ch)), S(this, fn, uh(r.outputGuardrailSettings ?? {})), S(this, hn, r.historyStoreAudio ?? !1), S(this, or, r.automaticallyTriggerResponseForMcpToolCalls ?? !0);
  }
  /**
   * The transport layer used by the session.
   */
  get transport() {
    return p(this, G);
  }
  /**
   * The current agent in the session.
   */
  get currentAgent() {
    return p(this, M);
  }
  /**
   * The current usage of the session.
   */
  get usage() {
    return p(this, j).usage;
  }
  /**
   * The current context of the session.
   */
  get context() {
    return p(this, j);
  }
  /**
   * Whether the session is muted. Might be `null` if the underlying transport layer does not
   * support muting.
   */
  get muted() {
    return p(this, G).muted;
  }
  /**
   * The history of the session.
   */
  get history() {
    return p(this, se);
  }
  get availableMcpTools() {
    return p(this, Ft);
  }
  /**
   * Compute the initial session config that the current session will use when connecting.
   *
   * This mirrors the configuration payload we send during `connect`, including dynamic values
   * such as the upstream agent instructions, tool definitions, and prompt content generated at
   * runtime. Keeping this helper exposed allows transports or orchestration layers to precompute
   * a CallAccept-compatible payload without opening a socket.
   *
   * @param overrides - Additional config overrides applied on top of the session options.
   */
  async getInitialSessionConfig(n = {}) {
    return await W(this, re, Tn).call(this, this.initialAgent), W(this, re, xn).call(this, {
      ...this.options.config ?? {},
      ...n ?? {}
    });
  }
  /**
   * Convenience helper to compute the initial session config without manually instantiating and connecting a session.
   *
   * This is primarily useful for integrations that must provide the session configuration to a
   * third party (for example the SIP `calls.accept` endpoint) before the actual realtime session
   * is attached. The helper instantiates a throwaway session so all agent-driven dynamic fields
   * resolve in exactly the same way as the live session path.
   *
   * @param agent - The starting agent for the session.
   * @param options - Session options used to seed the config calculation.
   * @param overrides - Additional config overrides applied on top of the provided options.
   */
  static async computeInitialSessionConfig(n, r = {}, s = {}) {
    const o = new lo(n, r);
    try {
      return await o.getInitialSessionConfig(s);
    } finally {
      o.close();
    }
  }
  async updateAgent(n) {
    return p(this, M).emit("agent_handoff", p(this, j), n), this.emit("agent_handoff", p(this, j), p(this, M), n), await W(this, re, Tn).call(this, n), await p(this, G).updateSessionConfig(await W(this, re, xn).call(this)), n;
  }
  /**
   * Connect to the session. This will establish the connection to the underlying transport layer
   * and start the session.
   *
   * After connecting, the session will also emit a `history_updated` event with an empty history.
   *
   * @param options - The options for the connection.
   */
  async connect(n) {
    await W(this, re, Tn).call(this, this.initialAgent), W(this, re, pu).call(this), await p(this, G).connect({
      apiKey: n.apiKey ?? this.options.apiKey,
      model: this.options.model,
      url: n.url,
      callId: n.callId,
      initialSessionConfig: await W(this, re, xn).call(this, this.options.config)
    }), S(this, se, []), this.emit("history_updated", p(this, se));
  }
  /**
   * Update the history of the session.
   * @param newHistory - The new history to set.
   */
  updateHistory(n) {
    let r;
    typeof n == "function" ? r = n(p(this, se)) : r = n, p(this, G).resetHistory(p(this, se), r);
  }
  /**
   * Send a message to the session.
   * @param message - The message to send.
   * @param otherEventData - Additional event data to send.
   */
  sendMessage(n, r = {}) {
    p(this, G).sendMessage(n, r);
  }
  /**
   * Add image to the session
   * @param image - The image to add.
   */
  addImage(n, { triggerResponse: r = !0 } = {}) {
    p(this, G).addImage(n, { triggerResponse: r });
  }
  /**
   * Mute the session.
   * @param muted - Whether to mute the session.
   */
  mute(n) {
    p(this, G).mute(n);
  }
  /**
   * Disconnect from the session.
   */
  close() {
    S(this, mn, {}), p(this, G).close();
  }
  /**
   * Send audio to the session.
   * @param audio - The audio to send.
   * @param options - Additional options.
   * @param options.commit - Whether to finish the turn with this audio.
   */
  sendAudio(n, r = {}) {
    p(this, G).sendAudio(n, r);
  }
  /**
   * Interrupt the session artificially for example if you want to build a "stop talking"
   * button.
   */
  interrupt() {
    p(this, G).interrupt();
  }
  /**
   * Approve a tool call. This will also trigger the tool call to the agent.
   * @param approvalItem - The approval item to approve.
   * @param options - Additional options.
   * @param options.alwaysApprove - Whether to always approve the tool call.
   */
  async approve(n, r = { alwaysApprove: !1 }) {
    p(this, j).approveTool(n, r);
    const s = n.toolName ?? n.rawItem.name, o = p(this, M).tools.find((i) => i.name === s);
    if (o && o.type === "function" && n.rawItem.type === "function_call")
      await W(this, re, mr).call(this, n.rawItem, o);
    else if (n.rawItem.type === "hosted_tool_call") {
      r.alwaysApprove && Ce.warn("Always approving MCP tools is not supported. Use the allowed tools configuration instead.");
      const i = _i(n);
      p(this, G).sendMcpResponse(i, !0);
    } else
      throw new Oe(`Tool ${s ?? "unknown"} not found`);
  }
  /**
   * Reject a tool call. This will also trigger the tool call to the agent.
   * @param approvalItem - The approval item to reject.
   * @param options - Additional options.
   * @param options.alwaysReject - Whether to always reject the tool call.
   */
  async reject(n, r = { alwaysReject: !1 }) {
    p(this, j).rejectTool(n, r);
    const s = n.toolName ?? n.rawItem.name, o = p(this, M).tools.find((i) => i.name === s);
    if (o && o.type === "function" && n.rawItem.type === "function_call")
      await W(this, re, mr).call(this, n.rawItem, o);
    else if (n.rawItem.type === "hosted_tool_call") {
      r.alwaysReject && Ce.warn("Always rejecting MCP tools is not supported. Use the allowed tools configuration instead.");
      const i = _i(n);
      p(this, G).sendMcpResponse(i, !1);
    } else
      throw new Oe(`Tool ${s ?? "unknown"} not found`);
  }
};
G = new WeakMap(), M = new WeakMap(), dn = new WeakMap(), j = new WeakMap(), pn = new WeakMap(), fn = new WeakMap(), nr = new WeakMap(), se = new WeakMap(), hn = new WeakMap(), mn = new WeakMap(), Le = new WeakMap(), rr = new WeakMap(), Ft = new WeakMap(), sr = new WeakMap(), or = new WeakMap(), re = new WeakSet(), Tn = async function(n) {
  S(this, M, n);
  const r = await p(this, M).getEnabledHandoffs(p(this, j)), s = r.map((u) => u.getHandoffAsFunctionTool()), o = (await p(this, M).getAllTools(p(this, j))).filter(ym).map(_m), i = typeof p(this, M).tools < "u" || typeof p(this, M).mcpServers < "u", a = r.length > 0;
  S(this, dn, i || a ? [...o, ...s] : void 0), W(this, re, Zs).call(this);
}, xn = async function(n = {}) {
  const r = n ?? {}, s = this.options.config ?? {}, o = await p(this, M).getSystemPrompt(p(this, j)), i = (m) => {
    var w;
    const _ = m.audio;
    return (w = _ == null ? void 0 : _.output) == null ? void 0 : w.voice;
  }, a = this.options.tracingDisabled ? null : this.options.workflowName ? {
    workflow_name: this.options.workflowName
  } : "auto";
  a !== null && a !== "auto" ? (this.options.groupId && (a.group_id = this.options.groupId), this.options.traceMetadata && (a.metadata = this.options.traceMetadata)) : (this.options.groupId || this.options.traceMetadata) && Ce.warn("In order to set traceMetadata or a groupId you need to specify a workflowName.");
  const u = i(r) ?? i(s), d = r.voice ?? s.voice, l = typeof u < "u" ? u : typeof d < "u" ? d : p(this, M).voice, h = {
    ...{
      ...p(this, sr) ?? {},
      ...s,
      ...r
    },
    instructions: o,
    voice: l,
    model: this.options.model,
    tools: p(this, dn),
    tracing: a,
    prompt: typeof p(this, M).prompt == "function" ? await p(this, M).prompt(p(this, j), p(this, M)) : p(this, M).prompt
  };
  return S(this, sr, h), h;
}, lu = async function(n, r) {
  const s = await r.onInvokeHandoff(p(this, j), n.arguments);
  p(this, M).emit("agent_handoff", p(this, j), s), this.emit("agent_handoff", p(this, j), p(this, M), s), await W(this, re, Tn).call(this, s), await p(this, G).updateSessionConfig(await W(this, re, xn).call(this));
  const o = ya(s);
  return p(this, G).sendFunctionCallOutput(n, o, !0), s;
}, mr = async function(n, r) {
  p(this, j).context.history = JSON.parse(JSON.stringify(p(this, se)));
  let s = n.arguments;
  if (r.parameters && (Lt(r.parameters) ? s = r.parameters.parse(s) : s = JSON.parse(s)), await r.needsApproval(p(this, j), s, n.callId)) {
    const l = this.context.isToolApproved({
      toolName: r.name,
      callId: n.callId
    });
    if (l === !1) {
      this.emit("agent_tool_start", p(this, j), p(this, M), r, {
        toolCall: n
      }), p(this, M).emit("agent_tool_start", p(this, j), r, {
        toolCall: n
      });
      const c = "Tool execution was not approved.";
      p(this, G).sendFunctionCallOutput(n, c, !0), this.emit("agent_tool_end", p(this, j), p(this, M), r, c, { toolCall: n }), p(this, M).emit("agent_tool_end", p(this, j), r, c, {
        toolCall: n
      });
      return;
    } else if (typeof l > "u") {
      this.emit("tool_approval_requested", p(this, j), p(this, M), {
        type: "function_approval",
        tool: r,
        approvalItem: new le(n, p(this, M))
      });
      return;
    }
  }
  const i = await Fa({
    guardrails: r.inputGuardrails,
    context: p(this, j),
    agent: p(this, M),
    toolCall: n
  });
  this.emit("agent_tool_start", p(this, j), p(this, M), r, {
    toolCall: n
  }), p(this, M).emit("agent_tool_start", p(this, j), r, {
    toolCall: n
  }), p(this, j).context.history = JSON.parse(JSON.stringify(p(this, se)));
  const a = i.type === "reject" ? i.message : await r.invoke(p(this, j), n.arguments, {
    toolCall: n
  }), u = i.type === "reject" ? a : await La({
    guardrails: r.outputGuardrails,
    context: p(this, j),
    agent: p(this, M),
    toolCall: n,
    toolOutput: a
  });
  let d;
  gm(u) ? (d = vt(u.content), p(this, G).sendFunctionCallOutput(n, d, !1)) : (d = vt(u), p(this, G).sendFunctionCallOutput(n, d, !0)), this.emit("agent_tool_end", p(this, j), p(this, M), r, d, { toolCall: n }), p(this, M).emit("agent_tool_end", p(this, j), r, d, { toolCall: n });
}, du = async function(n) {
  const r = await p(this, M).getEnabledHandoffs(p(this, j)), s = new Map(r.map((u) => [u.toolName, u])), o = await p(this, M).getAllTools(p(this, j)), i = new Map(o.map((u) => [u.name, u])), a = s.get(n.name);
  if (a)
    await W(this, re, lu).call(this, n, a);
  else {
    const u = i.get(n.name);
    if (u && u.type === "function")
      await W(this, re, mr).call(this, n, u);
    else
      throw new Oe(`Tool ${n.name} not found`);
  }
}, Ls = async function(n, r, s) {
  if (p(this, pn).length === 0)
    return;
  const o = {
    agent: p(this, M),
    agentOutput: n,
    context: p(this, j)
  }, a = (await Promise.all(p(this, pn).map((u) => u.run(o)))).find((u) => u.output.tripwireTriggered);
  if (a) {
    if (p(this, mn)[r])
      return;
    p(this, mn)[r] = !0;
    const u = new ms(`Output guardrail triggered: ${JSON.stringify(a.output.outputInfo)}`, a);
    this.emit("guardrail_tripped", p(this, j), p(this, M), u, {
      itemId: s
    }), this.interrupt();
    const d = lh(a);
    this.sendMessage(d);
    return;
  }
}, pu = function() {
  p(this, G).on("*", (s) => {
    if (this.emit("transport_event", s), s.type === "conversation.item.input_audio_transcription.completed")
      try {
        const o = s;
        S(this, se, yi(p(this, se), o, p(this, hn))), p(this, j).context.history = p(this, se), this.emit("history_updated", p(this, se));
      } catch (o) {
        this.emit("error", {
          type: "error",
          error: o
        });
      }
  }), p(this, G).on("mcp_tools_listed", ({ serverLabel: s, tools: o }) => {
    try {
      p(this, rr).set(s, o ?? []), W(this, re, Zs).call(this);
    } catch (i) {
      this.emit("error", { type: "error", error: i });
    }
  }), p(this, G).on("audio", (s) => {
    p(this, Le) || (S(this, Le, !0), this.emit("audio_start", p(this, j), p(this, M))), this.emit("audio", s);
  }), p(this, G).on("turn_started", () => {
    S(this, Le, !1), this.emit("agent_start", p(this, j), p(this, M)), p(this, M).emit("agent_start", p(this, j), p(this, M));
  }), p(this, G).on("turn_done", (s) => {
    const o = s.response.output[s.response.output.length - 1], i = ru(o) ?? "", a = (o == null ? void 0 : o.id) ?? "";
    this.emit("agent_end", p(this, j), p(this, M), i), p(this, M).emit("agent_end", p(this, j), i), W(this, re, Ls).call(this, i, s.response.id, a);
  }), p(this, G).on("audio_done", () => {
    p(this, Le) && S(this, Le, !1), this.emit("audio_stopped", p(this, j), p(this, M));
  });
  let n = 0, r;
  p(this, G).on("audio_transcript_delta", (s) => {
    try {
      const o = s.delta, i = s.itemId, a = s.responseId;
      r !== i && (r = i, n = 0);
      const d = (p(this, nr)[i] ?? "") + o;
      if (p(this, nr)[i] = d, p(this, fn).debounceTextLength < 0)
        return;
      const l = Math.floor(d.length / p(this, fn).debounceTextLength);
      l > n && (n = l, W(this, re, Ls).call(this, d, a, i));
    } catch (o) {
      this.emit("error", {
        type: "error",
        error: o
      });
    }
  }), p(this, G).on("item_update", (s) => {
    try {
      const o = !p(this, se).some((i) => i.itemId === s.itemId);
      if (S(this, se, yi(p(this, se), s, p(this, hn))), p(this, j).context.history = p(this, se), o) {
        const i = p(this, se).find((a) => a.itemId === s.itemId);
        i && this.emit("history_added", i);
      }
      this.emit("history_updated", p(this, se));
    } catch (o) {
      this.emit("error", {
        type: "error",
        error: o
      });
    }
  }), p(this, G).on("item_deleted", (s) => {
    try {
      S(this, se, p(this, se).filter((o) => o.itemId !== s.itemId)), p(this, j).context.history = p(this, se), this.emit("history_updated", p(this, se));
    } catch (o) {
      this.emit("error", {
        type: "error",
        error: o
      });
    }
  }), p(this, G).on("function_call", async (s) => {
    try {
      await W(this, re, du).call(this, s);
    } catch (o) {
      Ce.error("Error handling function call", o), this.emit("error", {
        type: "error",
        error: o
      });
    }
  }), p(this, G).on("usage_update", (s) => {
    p(this, j).usage.add(s);
  }), p(this, G).on("audio_interrupted", () => {
    p(this, Le) && S(this, Le, !1), this.emit("audio_interrupted", p(this, j), p(this, M));
  }), p(this, G).on("error", (s) => {
    this.emit("error", s);
  }), p(this, G).on("mcp_tool_call_completed", (s) => {
    this.emit("mcp_tool_call_completed", p(this, j), p(this, M), s), p(this, or) && p(this, G).sendEvent({
      type: "response.create"
    });
  }), p(this, G).on("mcp_approval_request", (s) => {
    this.emit("tool_approval_requested", p(this, j), p(this, M), {
      type: "mcp_approval_request",
      approvalItem: ah(p(this, M), s)
    });
  });
}, /**
 * Recomputes the currently available MCP tools based on the current agent's active
 * MCP server configurations and the cached per-server tool listings. Emits
 * `mcp_tools_changed` if the set changed.
 */
Zs = function() {
  var u;
  const n = (u = p(this, dn)) == null ? void 0 : u.filter((d) => d.type === "mcp"), r = (d) => {
    const l = d.allowed_tools;
    if (l) {
      if (Array.isArray(l))
        return l;
      if (l && Array.isArray(l.tool_names))
        return l.tool_names;
    }
  }, s = /* @__PURE__ */ new Map();
  for (const d of n) {
    const l = p(this, rr).get(d.server_label) ?? [], c = r(d);
    for (const h of l)
      c && !c.includes(h.name) || s.has(h.name) || s.set(h.name, h);
  }
  const o = Array.from(s.values()), i = p(this, Ft);
  (i.length !== o.length || JSON.stringify(i.map((d) => d.name).sort()) !== JSON.stringify(o.map((d) => d.name).sort())) && (S(this, Ft, o), this.emit("mcp_tools_changed", p(this, Ft)));
};
let Fs = lo;
class fu extends au {
  constructor(e = {}) {
    super(e);
  }
  /**
   * Build the initial session payload for a SIP-attached session, matching the config that a RealtimeSession would send on connect.
   *
   * This enables SIP deployments to accept an incoming call with a payload that already reflects
   * the active agent's instructions, tools, prompt, and tracing metadata without duplicating the
   * session logic outside of the SDK. The returned object structurally matches the REST
   * `CallAcceptParams` interface, so it can be forwarded directly to
   * `openai.realtime.calls.accept(...)`.
   *
   * @param agent - The starting agent used to seed the session instructions, tools, and prompt.
   * @param options - Optional session options that mirror the ones passed to the RealtimeSession constructor.
   * @param overrides - Additional config overrides applied on top of the session options.
   */
  static async buildInitialConfig(e, n = {}, r = {}) {
    const s = await Fs.computeInitialSessionConfig(e, n, r);
    return new fu().buildSessionPayload(s);
  }
  sendAudio(e, n = {}) {
    throw new Error("OpenAIRealtimeSIP does not support sending audio buffers; audio is handled by the SIP call.");
  }
  async connect(e) {
    if (!e.callId)
      throw new te("OpenAIRealtimeSIP requires `callId` in the connect options.");
    await super.connect(e);
  }
}
const Tm = {
  base64ToArrayBuffer: tu,
  arrayBufferToBase64: nu,
  getLastTextFromAudioOutputMessage: ru
};
export {
  fm as DEFAULT_OPENAI_REALTIME_MODEL,
  $e as DEFAULT_OPENAI_REALTIME_SESSION_CONFIG,
  Oe as ModelBehaviorError,
  Mr as OpenAIRealtimeBase,
  fu as OpenAIRealtimeSIP,
  hm as OpenAIRealtimeWebRTC,
  au as OpenAIRealtimeWebSocket,
  ms as OutputGuardrailTripwireTriggered,
  Im as RealtimeAgent,
  Fs as RealtimeSession,
  te as UserError,
  Sm as backgroundResult,
  gm as isBackgroundResult,
  vs as tool,
  Tm as utils
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3BlbmFpLXJlYWx0aW1lLWFnZW50cy5tanMiLCJzb3VyY2VzIjpbIi4uL21ldGFkYXRhLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdXRpbHMvc2FmZUV4ZWN1dGUubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9ub2RlX21vZHVsZXMvem9kL3Y0L2NvcmUvdXRpbC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvbm9kZV9tb2R1bGVzL3pvZC92NC9jb3JlL3JlZ2lzdHJpZXMuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL25vZGVfbW9kdWxlcy96b2QvdjQvY29yZS90by1qc29uLXNjaGVtYS5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvbm9kZV9tb2R1bGVzL3pvZC92NC9jb3JlL2pzb24tc2NoZW1hLXByb2Nlc3NvcnMuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL2xpYi9wYXJzZXIubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9PcHRpb25zLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvdXRpbC5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL1JlZnMubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9lcnJvck1lc3NhZ2VzLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvbm9kZV9tb2R1bGVzL3pvZC92My9oZWxwZXJzL3V0aWwuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL25vZGVfbW9kdWxlcy96b2QvdjMvWm9kRXJyb3IuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL25vZGVfbW9kdWxlcy96b2QvdjMvaGVscGVycy9lcnJvclV0aWwuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL25vZGVfbW9kdWxlcy96b2QvdjMvdHlwZXMuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvYW55Lm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9hcnJheS5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvYmlnaW50Lm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9ib29sZWFuLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9icmFuZGVkLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9jYXRjaC5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvZGF0ZS5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvZGVmYXVsdC5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvZWZmZWN0cy5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvZW51bS5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvaW50ZXJzZWN0aW9uLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9saXRlcmFsLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9zdHJpbmcubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3JlY29yZC5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvbWFwLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9uYXRpdmVFbnVtLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9uZXZlci5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvbnVsbC5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvdW5pb24ubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL251bGxhYmxlLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9udW1iZXIubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL29iamVjdC5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvb3B0aW9uYWwubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3BpcGVsaW5lLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9wcm9taXNlLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9zZXQubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3R1cGxlLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy91bmRlZmluZWQubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3Vua25vd24ubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3JlYWRvbmx5Lm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2VEZWYubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS96b2RUb0pzb25TY2hlbWEubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9saWIvUmVzcG9uc2VzUGFyc2VyLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvbGliL3RyYW5zZm9ybS5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL2hlbHBlcnMvem9kLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvZXJyb3JzLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdXRpbHMvem9kQ29tcGF0Lm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdXRpbHMvdHlwZUd1YXJkcy5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3V0aWxzL3pvZEpzb25TY2hlbWFDb21wYXQubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC91dGlscy90b29scy5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvbXMvaW5kZXguanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9ub2RlX21vZHVsZXMvZGVidWcvc3JjL2NvbW1vbi5qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL25vZGVfbW9kdWxlcy9kZWJ1Zy9zcmMvYnJvd3Nlci5qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvY29uZmlnLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvbG9nZ2VyLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdXRpbHMvc21hcnRTdHJpbmcubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC90b29sR3VhcmRyYWlsLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdG9vbC5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvem9kL3YzL2hlbHBlcnMvdXRpbC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy96b2QvdjMvWm9kRXJyb3IuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvem9kL3YzL2xvY2FsZXMvZW4uanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvem9kL3YzL2Vycm9ycy5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy96b2QvdjMvaGVscGVycy9wYXJzZVV0aWwuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvem9kL3YzL2hlbHBlcnMvZXJyb3JVdGlsLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92My90eXBlcy5qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvbWNwLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3Qvc2hpbXMvc2hpbXMtYnJvd3Nlci5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3V0aWxzL2Jhc2U2NC5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3V0aWxzL2JpbmFyeS5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3J1bm5lci9pdGVtcy5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3R5cGVzL3Byb3RvY29sLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvcmVzdWx0Lm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdHJhY2luZy9jb250ZXh0Lm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdHJhY2luZy9wcm9jZXNzb3IubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC90cmFjaW5nL3V0aWxzLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdHJhY2luZy9zcGFucy5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3RyYWNpbmcvdHJhY2VzLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdHJhY2luZy9wcm92aWRlci5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3RyYWNpbmcvY3JlYXRlU3BhbnMubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC90cmFjaW5nL2luZGV4Lm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvbGlmZWN5Y2xlLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvZGVmYXVsdE1vZGVsLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvaGFuZG9mZi5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L2V2ZW50cy5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L2d1YXJkcmFpbC5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3Byb3ZpZGVycy5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3VzYWdlLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvcnVuQ29udGV4dC5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L2l0ZW1zLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvcnVubmVyL3Rvb2xVc2VUcmFja2VyLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvcnVubmVyL3N0ZXBzLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvcnVuU3RhdGUubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9ydW5uZXIvY29uc3RhbnRzLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvcnVubmVyL2NvbnZlcnNhdGlvbi5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3J1bm5lci9ndWFyZHJhaWxzLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvcnVubmVyL21vZGVsU2V0dGluZ3MubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9ydW5uZXIvbW9kZWxPdXRwdXRzLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvcnVubmVyL3N0cmVhbWluZy5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L21lbW9yeS9zZXNzaW9uLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvcnVubmVyL3Nlc3Npb25QZXJzaXN0ZW5jZS5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3V0aWxzL21lc3NhZ2VzLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdXRpbHMvdG9vbEd1YXJkcmFpbHMubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9ydW5uZXIvdG9vbEV4ZWN1dGlvbi5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3J1bm5lci9tY3BBcHByb3ZhbHMubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9ydW5uZXIvdHVyblJlc29sdXRpb24ubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC91dGlscy9zZXJpYWxpemUubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9ydW5uZXIvdHJhY2luZy5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3J1bm5lci9tb2RlbFByZXBhcmF0aW9uLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvcnVubmVyL3R1cm5QcmVwYXJhdGlvbi5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3J1bm5lci9ydW5Mb29wLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvcnVuLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvYWdlbnQubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9pbmRleC5tanMiLCIuLi91dGlscy5tanMiLCIuLi9yZWFsdGltZUFnZW50Lm1qcyIsIi4uL2d1YXJkcmFpbC5tanMiLCIuLi9jbGllbnRNZXNzYWdlcy5tanMiLCIuLi9pdGVtcy5tanMiLCIuLi9sb2dnZXIubWpzIiwiLi4vb3BlbmFpUmVhbHRpbWVFdmVudHMubWpzIiwiLi4vb3BlbmFpUmVhbHRpbWVCYXNlLm1qcyIsIi4uL29wZW5haVJlYWx0aW1lV2ViUnRjLm1qcyIsIi4uL3NoaW1zL3NoaW1zLWJyb3dzZXIubWpzIiwiLi4vb3BlbmFpUmVhbHRpbWVXZWJzb2NrZXQubWpzIiwiLi4vdG9vbC5tanMiLCIuLi9yZWFsdGltZVNlc3Npb24ubWpzIiwiLi4vb3BlbmFpUmVhbHRpbWVTaXAubWpzIiwiLi4vaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoaXMgZmlsZSBpcyBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZFxuZXhwb3J0IGNvbnN0IE1FVEFEQVRBID0ge1xuICAgIFwibmFtZVwiOiBcIkBvcGVuYWkvYWdlbnRzLXJlYWx0aW1lXCIsXG4gICAgXCJ2ZXJzaW9uXCI6IFwiMC4zLjlcIixcbiAgICBcInZlcnNpb25zXCI6IHtcbiAgICAgICAgXCJAb3BlbmFpL2FnZW50cy1yZWFsdGltZVwiOiBcIjAuMy45XCIsXG4gICAgICAgIFwiQG9wZW5haS9hZ2VudHMtY29yZVwiOiBcIndvcmtzcGFjZToqXCJcbiAgICB9XG59O1xuZXhwb3J0IGRlZmF1bHQgTUVUQURBVEE7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tZXRhZGF0YS5tanMubWFwIiwiZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNhZmVFeGVjdXRlKGZuKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIFtudWxsLCBhd2FpdCBmbigpXTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHJldHVybiBbZXJyb3IsIG51bGxdO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNhZmVFeGVjdXRlLm1qcy5tYXAiLCIvLyBmdW5jdGlvbnNcbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRFcXVhbCh2YWwpIHtcbiAgICByZXR1cm4gdmFsO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydE5vdEVxdWFsKHZhbCkge1xuICAgIHJldHVybiB2YWw7XG59XG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0SXMoX2FyZykgeyB9XG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0TmV2ZXIoX3gpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmV4cGVjdGVkIHZhbHVlIGluIGV4aGF1c3RpdmUgY2hlY2tcIik7XG59XG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0KF8pIHsgfVxuZXhwb3J0IGZ1bmN0aW9uIGdldEVudW1WYWx1ZXMoZW50cmllcykge1xuICAgIGNvbnN0IG51bWVyaWNWYWx1ZXMgPSBPYmplY3QudmFsdWVzKGVudHJpZXMpLmZpbHRlcigodikgPT4gdHlwZW9mIHYgPT09IFwibnVtYmVyXCIpO1xuICAgIGNvbnN0IHZhbHVlcyA9IE9iamVjdC5lbnRyaWVzKGVudHJpZXMpXG4gICAgICAgIC5maWx0ZXIoKFtrLCBfXSkgPT4gbnVtZXJpY1ZhbHVlcy5pbmRleE9mKCtrKSA9PT0gLTEpXG4gICAgICAgIC5tYXAoKFtfLCB2XSkgPT4gdik7XG4gICAgcmV0dXJuIHZhbHVlcztcbn1cbmV4cG9ydCBmdW5jdGlvbiBqb2luVmFsdWVzKGFycmF5LCBzZXBhcmF0b3IgPSBcInxcIikge1xuICAgIHJldHVybiBhcnJheS5tYXAoKHZhbCkgPT4gc3RyaW5naWZ5UHJpbWl0aXZlKHZhbCkpLmpvaW4oc2VwYXJhdG9yKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBqc29uU3RyaW5naWZ5UmVwbGFjZXIoXywgdmFsdWUpIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcImJpZ2ludFwiKVxuICAgICAgICByZXR1cm4gdmFsdWUudG9TdHJpbmcoKTtcbiAgICByZXR1cm4gdmFsdWU7XG59XG5leHBvcnQgZnVuY3Rpb24gY2FjaGVkKGdldHRlcikge1xuICAgIGNvbnN0IHNldCA9IGZhbHNlO1xuICAgIHJldHVybiB7XG4gICAgICAgIGdldCB2YWx1ZSgpIHtcbiAgICAgICAgICAgIGlmICghc2V0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBnZXR0ZXIoKTtcbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ2YWx1ZVwiLCB7IHZhbHVlIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImNhY2hlZCB2YWx1ZSBhbHJlYWR5IHNldFwiKTtcbiAgICAgICAgfSxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIG51bGxpc2goaW5wdXQpIHtcbiAgICByZXR1cm4gaW5wdXQgPT09IG51bGwgfHwgaW5wdXQgPT09IHVuZGVmaW5lZDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjbGVhblJlZ2V4KHNvdXJjZSkge1xuICAgIGNvbnN0IHN0YXJ0ID0gc291cmNlLnN0YXJ0c1dpdGgoXCJeXCIpID8gMSA6IDA7XG4gICAgY29uc3QgZW5kID0gc291cmNlLmVuZHNXaXRoKFwiJFwiKSA/IHNvdXJjZS5sZW5ndGggLSAxIDogc291cmNlLmxlbmd0aDtcbiAgICByZXR1cm4gc291cmNlLnNsaWNlKHN0YXJ0LCBlbmQpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZsb2F0U2FmZVJlbWFpbmRlcih2YWwsIHN0ZXApIHtcbiAgICBjb25zdCB2YWxEZWNDb3VudCA9ICh2YWwudG9TdHJpbmcoKS5zcGxpdChcIi5cIilbMV0gfHwgXCJcIikubGVuZ3RoO1xuICAgIGNvbnN0IHN0ZXBTdHJpbmcgPSBzdGVwLnRvU3RyaW5nKCk7XG4gICAgbGV0IHN0ZXBEZWNDb3VudCA9IChzdGVwU3RyaW5nLnNwbGl0KFwiLlwiKVsxXSB8fCBcIlwiKS5sZW5ndGg7XG4gICAgaWYgKHN0ZXBEZWNDb3VudCA9PT0gMCAmJiAvXFxkP2UtXFxkPy8udGVzdChzdGVwU3RyaW5nKSkge1xuICAgICAgICBjb25zdCBtYXRjaCA9IHN0ZXBTdHJpbmcubWF0Y2goL1xcZD9lLShcXGQ/KS8pO1xuICAgICAgICBpZiAobWF0Y2g/LlsxXSkge1xuICAgICAgICAgICAgc3RlcERlY0NvdW50ID0gTnVtYmVyLnBhcnNlSW50KG1hdGNoWzFdKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBkZWNDb3VudCA9IHZhbERlY0NvdW50ID4gc3RlcERlY0NvdW50ID8gdmFsRGVjQ291bnQgOiBzdGVwRGVjQ291bnQ7XG4gICAgY29uc3QgdmFsSW50ID0gTnVtYmVyLnBhcnNlSW50KHZhbC50b0ZpeGVkKGRlY0NvdW50KS5yZXBsYWNlKFwiLlwiLCBcIlwiKSk7XG4gICAgY29uc3Qgc3RlcEludCA9IE51bWJlci5wYXJzZUludChzdGVwLnRvRml4ZWQoZGVjQ291bnQpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKTtcbiAgICByZXR1cm4gKHZhbEludCAlIHN0ZXBJbnQpIC8gMTAgKiogZGVjQ291bnQ7XG59XG5jb25zdCBFVkFMVUFUSU5HID0gU3ltYm9sKFwiZXZhbHVhdGluZ1wiKTtcbmV4cG9ydCBmdW5jdGlvbiBkZWZpbmVMYXp5KG9iamVjdCwga2V5LCBnZXR0ZXIpIHtcbiAgICBsZXQgdmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iamVjdCwga2V5LCB7XG4gICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gRVZBTFVBVElORykge1xuICAgICAgICAgICAgICAgIC8vIENpcmN1bGFyIHJlZmVyZW5jZSBkZXRlY3RlZCwgcmV0dXJuIHVuZGVmaW5lZCB0byBicmVhayB0aGUgY3ljbGVcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IEVWQUxVQVRJTkc7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBnZXR0ZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0KHYpIHtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmplY3QsIGtleSwge1xuICAgICAgICAgICAgICAgIHZhbHVlOiB2LFxuICAgICAgICAgICAgICAgIC8vIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gb2JqZWN0W2tleV0gPSB2O1xuICAgICAgICB9LFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gb2JqZWN0Q2xvbmUob2JqKSB7XG4gICAgcmV0dXJuIE9iamVjdC5jcmVhdGUoT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iaiksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKG9iaikpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGFzc2lnblByb3AodGFyZ2V0LCBwcm9wLCB2YWx1ZSkge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIHByb3AsIHtcbiAgICAgICAgdmFsdWUsXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gbWVyZ2VEZWZzKC4uLmRlZnMpIHtcbiAgICBjb25zdCBtZXJnZWREZXNjcmlwdG9ycyA9IHt9O1xuICAgIGZvciAoY29uc3QgZGVmIG9mIGRlZnMpIHtcbiAgICAgICAgY29uc3QgZGVzY3JpcHRvcnMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhkZWYpO1xuICAgICAgICBPYmplY3QuYXNzaWduKG1lcmdlZERlc2NyaXB0b3JzLCBkZXNjcmlwdG9ycyk7XG4gICAgfVxuICAgIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh7fSwgbWVyZ2VkRGVzY3JpcHRvcnMpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNsb25lRGVmKHNjaGVtYSkge1xuICAgIHJldHVybiBtZXJnZURlZnMoc2NoZW1hLl96b2QuZGVmKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRFbGVtZW50QXRQYXRoKG9iaiwgcGF0aCkge1xuICAgIGlmICghcGF0aClcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICByZXR1cm4gcGF0aC5yZWR1Y2UoKGFjYywga2V5KSA9PiBhY2M/LltrZXldLCBvYmopO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHByb21pc2VBbGxPYmplY3QocHJvbWlzZXNPYmopIHtcbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMocHJvbWlzZXNPYmopO1xuICAgIGNvbnN0IHByb21pc2VzID0ga2V5cy5tYXAoKGtleSkgPT4gcHJvbWlzZXNPYmpba2V5XSk7XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKChyZXN1bHRzKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc29sdmVkT2JqID0ge307XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgcmVzb2x2ZWRPYmpba2V5c1tpXV0gPSByZXN1bHRzW2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXNvbHZlZE9iajtcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiByYW5kb21TdHJpbmcobGVuZ3RoID0gMTApIHtcbiAgICBjb25zdCBjaGFycyA9IFwiYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpcIjtcbiAgICBsZXQgc3RyID0gXCJcIjtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHN0ciArPSBjaGFyc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjaGFycy5sZW5ndGgpXTtcbiAgICB9XG4gICAgcmV0dXJuIHN0cjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBlc2Moc3RyKSB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHN0cik7XG59XG5leHBvcnQgZnVuY3Rpb24gc2x1Z2lmeShpbnB1dCkge1xuICAgIHJldHVybiBpbnB1dFxuICAgICAgICAudG9Mb3dlckNhc2UoKVxuICAgICAgICAudHJpbSgpXG4gICAgICAgIC5yZXBsYWNlKC9bXlxcd1xccy1dL2csIFwiXCIpXG4gICAgICAgIC5yZXBsYWNlKC9bXFxzXy1dKy9nLCBcIi1cIilcbiAgICAgICAgLnJlcGxhY2UoL14tK3wtKyQvZywgXCJcIik7XG59XG5leHBvcnQgY29uc3QgY2FwdHVyZVN0YWNrVHJhY2UgPSAoXCJjYXB0dXJlU3RhY2tUcmFjZVwiIGluIEVycm9yID8gRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UgOiAoLi4uX2FyZ3MpID0+IHsgfSk7XG5leHBvcnQgZnVuY3Rpb24gaXNPYmplY3QoZGF0YSkge1xuICAgIHJldHVybiB0eXBlb2YgZGF0YSA9PT0gXCJvYmplY3RcIiAmJiBkYXRhICE9PSBudWxsICYmICFBcnJheS5pc0FycmF5KGRhdGEpO1xufVxuZXhwb3J0IGNvbnN0IGFsbG93c0V2YWwgPSBjYWNoZWQoKCkgPT4ge1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBpZiAodHlwZW9mIG5hdmlnYXRvciAhPT0gXCJ1bmRlZmluZWRcIiAmJiBuYXZpZ2F0b3I/LnVzZXJBZ2VudD8uaW5jbHVkZXMoXCJDbG91ZGZsYXJlXCIpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgRiA9IEZ1bmN0aW9uO1xuICAgICAgICBuZXcgRihcIlwiKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGNhdGNoIChfKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBpc1BsYWluT2JqZWN0KG8pIHtcbiAgICBpZiAoaXNPYmplY3QobykgPT09IGZhbHNlKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgLy8gbW9kaWZpZWQgY29uc3RydWN0b3JcbiAgICBjb25zdCBjdG9yID0gby5jb25zdHJ1Y3RvcjtcbiAgICBpZiAoY3RvciA9PT0gdW5kZWZpbmVkKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICBpZiAodHlwZW9mIGN0b3IgIT09IFwiZnVuY3Rpb25cIilcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgLy8gbW9kaWZpZWQgcHJvdG90eXBlXG4gICAgY29uc3QgcHJvdCA9IGN0b3IucHJvdG90eXBlO1xuICAgIGlmIChpc09iamVjdChwcm90KSA9PT0gZmFsc2UpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAvLyBjdG9yIGRvZXNuJ3QgaGF2ZSBzdGF0aWMgYGlzUHJvdG90eXBlT2ZgXG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChwcm90LCBcImlzUHJvdG90eXBlT2ZcIikgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG5leHBvcnQgZnVuY3Rpb24gc2hhbGxvd0Nsb25lKG8pIHtcbiAgICBpZiAoaXNQbGFpbk9iamVjdChvKSlcbiAgICAgICAgcmV0dXJuIHsgLi4ubyB9O1xuICAgIGlmIChBcnJheS5pc0FycmF5KG8pKVxuICAgICAgICByZXR1cm4gWy4uLm9dO1xuICAgIHJldHVybiBvO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG51bUtleXMoZGF0YSkge1xuICAgIGxldCBrZXlDb3VudCA9IDA7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gZGF0YSkge1xuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGRhdGEsIGtleSkpIHtcbiAgICAgICAgICAgIGtleUNvdW50Kys7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGtleUNvdW50O1xufVxuZXhwb3J0IGNvbnN0IGdldFBhcnNlZFR5cGUgPSAoZGF0YSkgPT4ge1xuICAgIGNvbnN0IHQgPSB0eXBlb2YgZGF0YTtcbiAgICBzd2l0Y2ggKHQpIHtcbiAgICAgICAgY2FzZSBcInVuZGVmaW5lZFwiOlxuICAgICAgICAgICAgcmV0dXJuIFwidW5kZWZpbmVkXCI7XG4gICAgICAgIGNhc2UgXCJzdHJpbmdcIjpcbiAgICAgICAgICAgIHJldHVybiBcInN0cmluZ1wiO1xuICAgICAgICBjYXNlIFwibnVtYmVyXCI6XG4gICAgICAgICAgICByZXR1cm4gTnVtYmVyLmlzTmFOKGRhdGEpID8gXCJuYW5cIiA6IFwibnVtYmVyXCI7XG4gICAgICAgIGNhc2UgXCJib29sZWFuXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJib29sZWFuXCI7XG4gICAgICAgIGNhc2UgXCJmdW5jdGlvblwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiZnVuY3Rpb25cIjtcbiAgICAgICAgY2FzZSBcImJpZ2ludFwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiYmlnaW50XCI7XG4gICAgICAgIGNhc2UgXCJzeW1ib2xcIjpcbiAgICAgICAgICAgIHJldHVybiBcInN5bWJvbFwiO1xuICAgICAgICBjYXNlIFwib2JqZWN0XCI6XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBcImFycmF5XCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGF0YSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBcIm51bGxcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkYXRhLnRoZW4gJiYgdHlwZW9mIGRhdGEudGhlbiA9PT0gXCJmdW5jdGlvblwiICYmIGRhdGEuY2F0Y2ggJiYgdHlwZW9mIGRhdGEuY2F0Y2ggPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBcInByb21pc2VcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgTWFwICE9PSBcInVuZGVmaW5lZFwiICYmIGRhdGEgaW5zdGFuY2VvZiBNYXApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJtYXBcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgU2V0ICE9PSBcInVuZGVmaW5lZFwiICYmIGRhdGEgaW5zdGFuY2VvZiBTZXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJzZXRcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgRGF0ZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkYXRhIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBcImRhdGVcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIGlmICh0eXBlb2YgRmlsZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkYXRhIGluc3RhbmNlb2YgRmlsZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBcImZpbGVcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBcIm9iamVjdFwiO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIGRhdGEgdHlwZTogJHt0fWApO1xuICAgIH1cbn07XG5leHBvcnQgY29uc3QgcHJvcGVydHlLZXlUeXBlcyA9IG5ldyBTZXQoW1wic3RyaW5nXCIsIFwibnVtYmVyXCIsIFwic3ltYm9sXCJdKTtcbmV4cG9ydCBjb25zdCBwcmltaXRpdmVUeXBlcyA9IG5ldyBTZXQoW1wic3RyaW5nXCIsIFwibnVtYmVyXCIsIFwiYmlnaW50XCIsIFwiYm9vbGVhblwiLCBcInN5bWJvbFwiLCBcInVuZGVmaW5lZFwiXSk7XG5leHBvcnQgZnVuY3Rpb24gZXNjYXBlUmVnZXgoc3RyKSB7XG4gICAgcmV0dXJuIHN0ci5yZXBsYWNlKC9bLiorP14ke30oKXxbXFxdXFxcXF0vZywgXCJcXFxcJCZcIik7XG59XG4vLyB6b2Qtc3BlY2lmaWMgdXRpbHNcbmV4cG9ydCBmdW5jdGlvbiBjbG9uZShpbnN0LCBkZWYsIHBhcmFtcykge1xuICAgIGNvbnN0IGNsID0gbmV3IGluc3QuX3pvZC5jb25zdHIoZGVmID8/IGluc3QuX3pvZC5kZWYpO1xuICAgIGlmICghZGVmIHx8IHBhcmFtcz8ucGFyZW50KVxuICAgICAgICBjbC5fem9kLnBhcmVudCA9IGluc3Q7XG4gICAgcmV0dXJuIGNsO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZVBhcmFtcyhfcGFyYW1zKSB7XG4gICAgY29uc3QgcGFyYW1zID0gX3BhcmFtcztcbiAgICBpZiAoIXBhcmFtcylcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIGlmICh0eXBlb2YgcGFyYW1zID09PSBcInN0cmluZ1wiKVxuICAgICAgICByZXR1cm4geyBlcnJvcjogKCkgPT4gcGFyYW1zIH07XG4gICAgaWYgKHBhcmFtcz8ubWVzc2FnZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmIChwYXJhbXM/LmVycm9yICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3Qgc3BlY2lmeSBib3RoIGBtZXNzYWdlYCBhbmQgYGVycm9yYCBwYXJhbXNcIik7XG4gICAgICAgIHBhcmFtcy5lcnJvciA9IHBhcmFtcy5tZXNzYWdlO1xuICAgIH1cbiAgICBkZWxldGUgcGFyYW1zLm1lc3NhZ2U7XG4gICAgaWYgKHR5cGVvZiBwYXJhbXMuZXJyb3IgPT09IFwic3RyaW5nXCIpXG4gICAgICAgIHJldHVybiB7IC4uLnBhcmFtcywgZXJyb3I6ICgpID0+IHBhcmFtcy5lcnJvciB9O1xuICAgIHJldHVybiBwYXJhbXM7XG59XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVHJhbnNwYXJlbnRQcm94eShnZXR0ZXIpIHtcbiAgICBsZXQgdGFyZ2V0O1xuICAgIHJldHVybiBuZXcgUHJveHkoe30sIHtcbiAgICAgICAgZ2V0KF8sIHByb3AsIHJlY2VpdmVyKSB7XG4gICAgICAgICAgICB0YXJnZXQgPz8gKHRhcmdldCA9IGdldHRlcigpKTtcbiAgICAgICAgICAgIHJldHVybiBSZWZsZWN0LmdldCh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0KF8sIHByb3AsIHZhbHVlLCByZWNlaXZlcikge1xuICAgICAgICAgICAgdGFyZ2V0ID8/ICh0YXJnZXQgPSBnZXR0ZXIoKSk7XG4gICAgICAgICAgICByZXR1cm4gUmVmbGVjdC5zZXQodGFyZ2V0LCBwcm9wLCB2YWx1ZSwgcmVjZWl2ZXIpO1xuICAgICAgICB9LFxuICAgICAgICBoYXMoXywgcHJvcCkge1xuICAgICAgICAgICAgdGFyZ2V0ID8/ICh0YXJnZXQgPSBnZXR0ZXIoKSk7XG4gICAgICAgICAgICByZXR1cm4gUmVmbGVjdC5oYXModGFyZ2V0LCBwcm9wKTtcbiAgICAgICAgfSxcbiAgICAgICAgZGVsZXRlUHJvcGVydHkoXywgcHJvcCkge1xuICAgICAgICAgICAgdGFyZ2V0ID8/ICh0YXJnZXQgPSBnZXR0ZXIoKSk7XG4gICAgICAgICAgICByZXR1cm4gUmVmbGVjdC5kZWxldGVQcm9wZXJ0eSh0YXJnZXQsIHByb3ApO1xuICAgICAgICB9LFxuICAgICAgICBvd25LZXlzKF8pIHtcbiAgICAgICAgICAgIHRhcmdldCA/PyAodGFyZ2V0ID0gZ2V0dGVyKCkpO1xuICAgICAgICAgICAgcmV0dXJuIFJlZmxlY3Qub3duS2V5cyh0YXJnZXQpO1xuICAgICAgICB9LFxuICAgICAgICBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoXywgcHJvcCkge1xuICAgICAgICAgICAgdGFyZ2V0ID8/ICh0YXJnZXQgPSBnZXR0ZXIoKSk7XG4gICAgICAgICAgICByZXR1cm4gUmVmbGVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBwcm9wKTtcbiAgICAgICAgfSxcbiAgICAgICAgZGVmaW5lUHJvcGVydHkoXywgcHJvcCwgZGVzY3JpcHRvcikge1xuICAgICAgICAgICAgdGFyZ2V0ID8/ICh0YXJnZXQgPSBnZXR0ZXIoKSk7XG4gICAgICAgICAgICByZXR1cm4gUmVmbGVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIHByb3AsIGRlc2NyaXB0b3IpO1xuICAgICAgICB9LFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHN0cmluZ2lmeVByaW1pdGl2ZSh2YWx1ZSkge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwiYmlnaW50XCIpXG4gICAgICAgIHJldHVybiB2YWx1ZS50b1N0cmluZygpICsgXCJuXCI7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIilcbiAgICAgICAgcmV0dXJuIGBcIiR7dmFsdWV9XCJgO1xuICAgIHJldHVybiBgJHt2YWx1ZX1gO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG9wdGlvbmFsS2V5cyhzaGFwZSkge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhzaGFwZSkuZmlsdGVyKChrKSA9PiB7XG4gICAgICAgIHJldHVybiBzaGFwZVtrXS5fem9kLm9wdGluID09PSBcIm9wdGlvbmFsXCIgJiYgc2hhcGVba10uX3pvZC5vcHRvdXQgPT09IFwib3B0aW9uYWxcIjtcbiAgICB9KTtcbn1cbmV4cG9ydCBjb25zdCBOVU1CRVJfRk9STUFUX1JBTkdFUyA9IHtcbiAgICBzYWZlaW50OiBbTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVIsIE51bWJlci5NQVhfU0FGRV9JTlRFR0VSXSxcbiAgICBpbnQzMjogWy0yMTQ3NDgzNjQ4LCAyMTQ3NDgzNjQ3XSxcbiAgICB1aW50MzI6IFswLCA0Mjk0OTY3Mjk1XSxcbiAgICBmbG9hdDMyOiBbLTMuNDAyODIzNDY2Mzg1Mjg4NmUzOCwgMy40MDI4MjM0NjYzODUyODg2ZTM4XSxcbiAgICBmbG9hdDY0OiBbLU51bWJlci5NQVhfVkFMVUUsIE51bWJlci5NQVhfVkFMVUVdLFxufTtcbmV4cG9ydCBjb25zdCBCSUdJTlRfRk9STUFUX1JBTkdFUyA9IHtcbiAgICBpbnQ2NDogWy8qIEBfX1BVUkVfXyovIEJpZ0ludChcIi05MjIzMzcyMDM2ODU0Nzc1ODA4XCIpLCAvKiBAX19QVVJFX18qLyBCaWdJbnQoXCI5MjIzMzcyMDM2ODU0Nzc1ODA3XCIpXSxcbiAgICB1aW50NjQ6IFsvKiBAX19QVVJFX18qLyBCaWdJbnQoMCksIC8qIEBfX1BVUkVfXyovIEJpZ0ludChcIjE4NDQ2NzQ0MDczNzA5NTUxNjE1XCIpXSxcbn07XG5leHBvcnQgZnVuY3Rpb24gcGljayhzY2hlbWEsIG1hc2spIHtcbiAgICBjb25zdCBjdXJyRGVmID0gc2NoZW1hLl96b2QuZGVmO1xuICAgIGNvbnN0IGNoZWNrcyA9IGN1cnJEZWYuY2hlY2tzO1xuICAgIGNvbnN0IGhhc0NoZWNrcyA9IGNoZWNrcyAmJiBjaGVja3MubGVuZ3RoID4gMDtcbiAgICBpZiAoaGFzQ2hlY2tzKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIi5waWNrKCkgY2Fubm90IGJlIHVzZWQgb24gb2JqZWN0IHNjaGVtYXMgY29udGFpbmluZyByZWZpbmVtZW50c1wiKTtcbiAgICB9XG4gICAgY29uc3QgZGVmID0gbWVyZ2VEZWZzKHNjaGVtYS5fem9kLmRlZiwge1xuICAgICAgICBnZXQgc2hhcGUoKSB7XG4gICAgICAgICAgICBjb25zdCBuZXdTaGFwZSA9IHt9O1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbWFzaykge1xuICAgICAgICAgICAgICAgIGlmICghKGtleSBpbiBjdXJyRGVmLnNoYXBlKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVucmVjb2duaXplZCBrZXk6IFwiJHtrZXl9XCJgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFtYXNrW2tleV0pXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIG5ld1NoYXBlW2tleV0gPSBjdXJyRGVmLnNoYXBlW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhc3NpZ25Qcm9wKHRoaXMsIFwic2hhcGVcIiwgbmV3U2hhcGUpOyAvLyBzZWxmLWNhY2hpbmdcbiAgICAgICAgICAgIHJldHVybiBuZXdTaGFwZTtcbiAgICAgICAgfSxcbiAgICAgICAgY2hlY2tzOiBbXSxcbiAgICB9KTtcbiAgICByZXR1cm4gY2xvbmUoc2NoZW1hLCBkZWYpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG9taXQoc2NoZW1hLCBtYXNrKSB7XG4gICAgY29uc3QgY3VyckRlZiA9IHNjaGVtYS5fem9kLmRlZjtcbiAgICBjb25zdCBjaGVja3MgPSBjdXJyRGVmLmNoZWNrcztcbiAgICBjb25zdCBoYXNDaGVja3MgPSBjaGVja3MgJiYgY2hlY2tzLmxlbmd0aCA+IDA7XG4gICAgaWYgKGhhc0NoZWNrcykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCIub21pdCgpIGNhbm5vdCBiZSB1c2VkIG9uIG9iamVjdCBzY2hlbWFzIGNvbnRhaW5pbmcgcmVmaW5lbWVudHNcIik7XG4gICAgfVxuICAgIGNvbnN0IGRlZiA9IG1lcmdlRGVmcyhzY2hlbWEuX3pvZC5kZWYsIHtcbiAgICAgICAgZ2V0IHNoYXBlKCkge1xuICAgICAgICAgICAgY29uc3QgbmV3U2hhcGUgPSB7IC4uLnNjaGVtYS5fem9kLmRlZi5zaGFwZSB9O1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbWFzaykge1xuICAgICAgICAgICAgICAgIGlmICghKGtleSBpbiBjdXJyRGVmLnNoYXBlKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVucmVjb2duaXplZCBrZXk6IFwiJHtrZXl9XCJgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFtYXNrW2tleV0pXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBuZXdTaGFwZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXNzaWduUHJvcCh0aGlzLCBcInNoYXBlXCIsIG5ld1NoYXBlKTsgLy8gc2VsZi1jYWNoaW5nXG4gICAgICAgICAgICByZXR1cm4gbmV3U2hhcGU7XG4gICAgICAgIH0sXG4gICAgICAgIGNoZWNrczogW10sXG4gICAgfSk7XG4gICAgcmV0dXJuIGNsb25lKHNjaGVtYSwgZGVmKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBleHRlbmQoc2NoZW1hLCBzaGFwZSkge1xuICAgIGlmICghaXNQbGFpbk9iamVjdChzaGFwZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBpbnB1dCB0byBleHRlbmQ6IGV4cGVjdGVkIGEgcGxhaW4gb2JqZWN0XCIpO1xuICAgIH1cbiAgICBjb25zdCBjaGVja3MgPSBzY2hlbWEuX3pvZC5kZWYuY2hlY2tzO1xuICAgIGNvbnN0IGhhc0NoZWNrcyA9IGNoZWNrcyAmJiBjaGVja3MubGVuZ3RoID4gMDtcbiAgICBpZiAoaGFzQ2hlY2tzKSB7XG4gICAgICAgIC8vIE9ubHkgdGhyb3cgaWYgbmV3IHNoYXBlIG92ZXJsYXBzIHdpdGggZXhpc3Rpbmcgc2hhcGVcbiAgICAgICAgLy8gVXNlIGdldE93blByb3BlcnR5RGVzY3JpcHRvciB0byBjaGVjayBrZXkgZXhpc3RlbmNlIHdpdGhvdXQgYWNjZXNzaW5nIHZhbHVlc1xuICAgICAgICBjb25zdCBleGlzdGluZ1NoYXBlID0gc2NoZW1hLl96b2QuZGVmLnNoYXBlO1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBzaGFwZSkge1xuICAgICAgICAgICAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZXhpc3RpbmdTaGFwZSwga2V5KSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IG92ZXJ3cml0ZSBrZXlzIG9uIG9iamVjdCBzY2hlbWFzIGNvbnRhaW5pbmcgcmVmaW5lbWVudHMuIFVzZSBgLnNhZmVFeHRlbmQoKWAgaW5zdGVhZC5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgZGVmID0gbWVyZ2VEZWZzKHNjaGVtYS5fem9kLmRlZiwge1xuICAgICAgICBnZXQgc2hhcGUoKSB7XG4gICAgICAgICAgICBjb25zdCBfc2hhcGUgPSB7IC4uLnNjaGVtYS5fem9kLmRlZi5zaGFwZSwgLi4uc2hhcGUgfTtcbiAgICAgICAgICAgIGFzc2lnblByb3AodGhpcywgXCJzaGFwZVwiLCBfc2hhcGUpOyAvLyBzZWxmLWNhY2hpbmdcbiAgICAgICAgICAgIHJldHVybiBfc2hhcGU7XG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgcmV0dXJuIGNsb25lKHNjaGVtYSwgZGVmKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzYWZlRXh0ZW5kKHNjaGVtYSwgc2hhcGUpIHtcbiAgICBpZiAoIWlzUGxhaW5PYmplY3Qoc2hhcGUpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgaW5wdXQgdG8gc2FmZUV4dGVuZDogZXhwZWN0ZWQgYSBwbGFpbiBvYmplY3RcIik7XG4gICAgfVxuICAgIGNvbnN0IGRlZiA9IG1lcmdlRGVmcyhzY2hlbWEuX3pvZC5kZWYsIHtcbiAgICAgICAgZ2V0IHNoYXBlKCkge1xuICAgICAgICAgICAgY29uc3QgX3NoYXBlID0geyAuLi5zY2hlbWEuX3pvZC5kZWYuc2hhcGUsIC4uLnNoYXBlIH07XG4gICAgICAgICAgICBhc3NpZ25Qcm9wKHRoaXMsIFwic2hhcGVcIiwgX3NoYXBlKTsgLy8gc2VsZi1jYWNoaW5nXG4gICAgICAgICAgICByZXR1cm4gX3NoYXBlO1xuICAgICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiBjbG9uZShzY2hlbWEsIGRlZik7XG59XG5leHBvcnQgZnVuY3Rpb24gbWVyZ2UoYSwgYikge1xuICAgIGNvbnN0IGRlZiA9IG1lcmdlRGVmcyhhLl96b2QuZGVmLCB7XG4gICAgICAgIGdldCBzaGFwZSgpIHtcbiAgICAgICAgICAgIGNvbnN0IF9zaGFwZSA9IHsgLi4uYS5fem9kLmRlZi5zaGFwZSwgLi4uYi5fem9kLmRlZi5zaGFwZSB9O1xuICAgICAgICAgICAgYXNzaWduUHJvcCh0aGlzLCBcInNoYXBlXCIsIF9zaGFwZSk7IC8vIHNlbGYtY2FjaGluZ1xuICAgICAgICAgICAgcmV0dXJuIF9zaGFwZTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0IGNhdGNoYWxsKCkge1xuICAgICAgICAgICAgcmV0dXJuIGIuX3pvZC5kZWYuY2F0Y2hhbGw7XG4gICAgICAgIH0sXG4gICAgICAgIGNoZWNrczogW10sIC8vIGRlbGV0ZSBleGlzdGluZyBjaGVja3NcbiAgICB9KTtcbiAgICByZXR1cm4gY2xvbmUoYSwgZGVmKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwYXJ0aWFsKENsYXNzLCBzY2hlbWEsIG1hc2spIHtcbiAgICBjb25zdCBjdXJyRGVmID0gc2NoZW1hLl96b2QuZGVmO1xuICAgIGNvbnN0IGNoZWNrcyA9IGN1cnJEZWYuY2hlY2tzO1xuICAgIGNvbnN0IGhhc0NoZWNrcyA9IGNoZWNrcyAmJiBjaGVja3MubGVuZ3RoID4gMDtcbiAgICBpZiAoaGFzQ2hlY2tzKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIi5wYXJ0aWFsKCkgY2Fubm90IGJlIHVzZWQgb24gb2JqZWN0IHNjaGVtYXMgY29udGFpbmluZyByZWZpbmVtZW50c1wiKTtcbiAgICB9XG4gICAgY29uc3QgZGVmID0gbWVyZ2VEZWZzKHNjaGVtYS5fem9kLmRlZiwge1xuICAgICAgICBnZXQgc2hhcGUoKSB7XG4gICAgICAgICAgICBjb25zdCBvbGRTaGFwZSA9IHNjaGVtYS5fem9kLmRlZi5zaGFwZTtcbiAgICAgICAgICAgIGNvbnN0IHNoYXBlID0geyAuLi5vbGRTaGFwZSB9O1xuICAgICAgICAgICAgaWYgKG1hc2spIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBtYXNrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKGtleSBpbiBvbGRTaGFwZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5yZWNvZ25pemVkIGtleTogXCIke2tleX1cImApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICghbWFza1trZXldKVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIChvbGRTaGFwZVtrZXldIS5fem9kLm9wdGluID09PSBcIm9wdGlvbmFsXCIpIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICBzaGFwZVtrZXldID0gQ2xhc3NcbiAgICAgICAgICAgICAgICAgICAgICAgID8gbmV3IENsYXNzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIm9wdGlvbmFsXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5uZXJUeXBlOiBvbGRTaGFwZVtrZXldLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIDogb2xkU2hhcGVba2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBvbGRTaGFwZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiAob2xkU2hhcGVba2V5XSEuX3pvZC5vcHRpbiA9PT0gXCJvcHRpb25hbFwiKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgc2hhcGVba2V5XSA9IENsYXNzXG4gICAgICAgICAgICAgICAgICAgICAgICA/IG5ldyBDbGFzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJvcHRpb25hbFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlubmVyVHlwZTogb2xkU2hhcGVba2V5XSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG9sZFNoYXBlW2tleV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXNzaWduUHJvcCh0aGlzLCBcInNoYXBlXCIsIHNoYXBlKTsgLy8gc2VsZi1jYWNoaW5nXG4gICAgICAgICAgICByZXR1cm4gc2hhcGU7XG4gICAgICAgIH0sXG4gICAgICAgIGNoZWNrczogW10sXG4gICAgfSk7XG4gICAgcmV0dXJuIGNsb25lKHNjaGVtYSwgZGVmKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZXF1aXJlZChDbGFzcywgc2NoZW1hLCBtYXNrKSB7XG4gICAgY29uc3QgZGVmID0gbWVyZ2VEZWZzKHNjaGVtYS5fem9kLmRlZiwge1xuICAgICAgICBnZXQgc2hhcGUoKSB7XG4gICAgICAgICAgICBjb25zdCBvbGRTaGFwZSA9IHNjaGVtYS5fem9kLmRlZi5zaGFwZTtcbiAgICAgICAgICAgIGNvbnN0IHNoYXBlID0geyAuLi5vbGRTaGFwZSB9O1xuICAgICAgICAgICAgaWYgKG1hc2spIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBtYXNrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKGtleSBpbiBzaGFwZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5yZWNvZ25pemVkIGtleTogXCIke2tleX1cImApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICghbWFza1trZXldKVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIC8vIG92ZXJ3cml0ZSB3aXRoIG5vbi1vcHRpb25hbFxuICAgICAgICAgICAgICAgICAgICBzaGFwZVtrZXldID0gbmV3IENsYXNzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwibm9ub3B0aW9uYWxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGlubmVyVHlwZTogb2xkU2hhcGVba2V5XSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gb2xkU2hhcGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gb3ZlcndyaXRlIHdpdGggbm9uLW9wdGlvbmFsXG4gICAgICAgICAgICAgICAgICAgIHNoYXBlW2tleV0gPSBuZXcgQ2xhc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJub25vcHRpb25hbFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5uZXJUeXBlOiBvbGRTaGFwZVtrZXldLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhc3NpZ25Qcm9wKHRoaXMsIFwic2hhcGVcIiwgc2hhcGUpOyAvLyBzZWxmLWNhY2hpbmdcbiAgICAgICAgICAgIHJldHVybiBzaGFwZTtcbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICByZXR1cm4gY2xvbmUoc2NoZW1hLCBkZWYpO1xufVxuLy8gaW52YWxpZF90eXBlIHwgdG9vX2JpZyB8IHRvb19zbWFsbCB8IGludmFsaWRfZm9ybWF0IHwgbm90X211bHRpcGxlX29mIHwgdW5yZWNvZ25pemVkX2tleXMgfCBpbnZhbGlkX3VuaW9uIHwgaW52YWxpZF9rZXkgfCBpbnZhbGlkX2VsZW1lbnQgfCBpbnZhbGlkX3ZhbHVlIHwgY3VzdG9tXG5leHBvcnQgZnVuY3Rpb24gYWJvcnRlZCh4LCBzdGFydEluZGV4ID0gMCkge1xuICAgIGlmICh4LmFib3J0ZWQgPT09IHRydWUpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIGZvciAobGV0IGkgPSBzdGFydEluZGV4OyBpIDwgeC5pc3N1ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHguaXNzdWVzW2ldPy5jb250aW51ZSAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHByZWZpeElzc3VlcyhwYXRoLCBpc3N1ZXMpIHtcbiAgICByZXR1cm4gaXNzdWVzLm1hcCgoaXNzKSA9PiB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgKF9hID0gaXNzKS5wYXRoID8/IChfYS5wYXRoID0gW10pO1xuICAgICAgICBpc3MucGF0aC51bnNoaWZ0KHBhdGgpO1xuICAgICAgICByZXR1cm4gaXNzO1xuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHVud3JhcE1lc3NhZ2UobWVzc2FnZSkge1xuICAgIHJldHVybiB0eXBlb2YgbWVzc2FnZSA9PT0gXCJzdHJpbmdcIiA/IG1lc3NhZ2UgOiBtZXNzYWdlPy5tZXNzYWdlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZpbmFsaXplSXNzdWUoaXNzLCBjdHgsIGNvbmZpZykge1xuICAgIGNvbnN0IGZ1bGwgPSB7IC4uLmlzcywgcGF0aDogaXNzLnBhdGggPz8gW10gfTtcbiAgICAvLyBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHlcbiAgICBpZiAoIWlzcy5tZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSB1bndyYXBNZXNzYWdlKGlzcy5pbnN0Py5fem9kLmRlZj8uZXJyb3I/Lihpc3MpKSA/P1xuICAgICAgICAgICAgdW53cmFwTWVzc2FnZShjdHg/LmVycm9yPy4oaXNzKSkgPz9cbiAgICAgICAgICAgIHVud3JhcE1lc3NhZ2UoY29uZmlnLmN1c3RvbUVycm9yPy4oaXNzKSkgPz9cbiAgICAgICAgICAgIHVud3JhcE1lc3NhZ2UoY29uZmlnLmxvY2FsZUVycm9yPy4oaXNzKSkgPz9cbiAgICAgICAgICAgIFwiSW52YWxpZCBpbnB1dFwiO1xuICAgICAgICBmdWxsLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgIH1cbiAgICAvLyBkZWxldGUgKGZ1bGwgYXMgYW55KS5kZWY7XG4gICAgZGVsZXRlIGZ1bGwuaW5zdDtcbiAgICBkZWxldGUgZnVsbC5jb250aW51ZTtcbiAgICBpZiAoIWN0eD8ucmVwb3J0SW5wdXQpIHtcbiAgICAgICAgZGVsZXRlIGZ1bGwuaW5wdXQ7XG4gICAgfVxuICAgIHJldHVybiBmdWxsO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldFNpemFibGVPcmlnaW4oaW5wdXQpIHtcbiAgICBpZiAoaW5wdXQgaW5zdGFuY2VvZiBTZXQpXG4gICAgICAgIHJldHVybiBcInNldFwiO1xuICAgIGlmIChpbnB1dCBpbnN0YW5jZW9mIE1hcClcbiAgICAgICAgcmV0dXJuIFwibWFwXCI7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGlmIChpbnB1dCBpbnN0YW5jZW9mIEZpbGUpXG4gICAgICAgIHJldHVybiBcImZpbGVcIjtcbiAgICByZXR1cm4gXCJ1bmtub3duXCI7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0TGVuZ3RoYWJsZU9yaWdpbihpbnB1dCkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGlucHV0KSlcbiAgICAgICAgcmV0dXJuIFwiYXJyYXlcIjtcbiAgICBpZiAodHlwZW9mIGlucHV0ID09PSBcInN0cmluZ1wiKVxuICAgICAgICByZXR1cm4gXCJzdHJpbmdcIjtcbiAgICByZXR1cm4gXCJ1bmtub3duXCI7XG59XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VkVHlwZShkYXRhKSB7XG4gICAgY29uc3QgdCA9IHR5cGVvZiBkYXRhO1xuICAgIHN3aXRjaCAodCkge1xuICAgICAgICBjYXNlIFwibnVtYmVyXCI6IHtcbiAgICAgICAgICAgIHJldHVybiBOdW1iZXIuaXNOYU4oZGF0YSkgPyBcIm5hblwiIDogXCJudW1iZXJcIjtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwib2JqZWN0XCI6IHtcbiAgICAgICAgICAgIGlmIChkYXRhID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwibnVsbFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJhcnJheVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgb2JqID0gZGF0YTtcbiAgICAgICAgICAgIGlmIChvYmogJiYgT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iaikgIT09IE9iamVjdC5wcm90b3R5cGUgJiYgXCJjb25zdHJ1Y3RvclwiIGluIG9iaiAmJiBvYmouY29uc3RydWN0b3IpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqLmNvbnN0cnVjdG9yLm5hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHQ7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNzdWUoLi4uYXJncykge1xuICAgIGNvbnN0IFtpc3MsIGlucHV0LCBpbnN0XSA9IGFyZ3M7XG4gICAgaWYgKHR5cGVvZiBpc3MgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IGlzcyxcbiAgICAgICAgICAgIGNvZGU6IFwiY3VzdG9tXCIsXG4gICAgICAgICAgICBpbnB1dCxcbiAgICAgICAgICAgIGluc3QsXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7IC4uLmlzcyB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFuRW51bShvYmopIHtcbiAgICByZXR1cm4gT2JqZWN0LmVudHJpZXMob2JqKVxuICAgICAgICAuZmlsdGVyKChbaywgX10pID0+IHtcbiAgICAgICAgLy8gcmV0dXJuIHRydWUgaWYgTmFOLCBtZWFuaW5nIGl0J3Mgbm90IGEgbnVtYmVyLCB0aHVzIGEgc3RyaW5nIGtleVxuICAgICAgICByZXR1cm4gTnVtYmVyLmlzTmFOKE51bWJlci5wYXJzZUludChrLCAxMCkpO1xuICAgIH0pXG4gICAgICAgIC5tYXAoKGVsKSA9PiBlbFsxXSk7XG59XG4vLyBDb2RlYyB1dGlsaXR5IGZ1bmN0aW9uc1xuZXhwb3J0IGZ1bmN0aW9uIGJhc2U2NFRvVWludDhBcnJheShiYXNlNjQpIHtcbiAgICBjb25zdCBiaW5hcnlTdHJpbmcgPSBhdG9iKGJhc2U2NCk7XG4gICAgY29uc3QgYnl0ZXMgPSBuZXcgVWludDhBcnJheShiaW5hcnlTdHJpbmcubGVuZ3RoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJpbmFyeVN0cmluZy5sZW5ndGg7IGkrKykge1xuICAgICAgICBieXRlc1tpXSA9IGJpbmFyeVN0cmluZy5jaGFyQ29kZUF0KGkpO1xuICAgIH1cbiAgICByZXR1cm4gYnl0ZXM7XG59XG5leHBvcnQgZnVuY3Rpb24gdWludDhBcnJheVRvQmFzZTY0KGJ5dGVzKSB7XG4gICAgbGV0IGJpbmFyeVN0cmluZyA9IFwiXCI7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBieXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBiaW5hcnlTdHJpbmcgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShieXRlc1tpXSk7XG4gICAgfVxuICAgIHJldHVybiBidG9hKGJpbmFyeVN0cmluZyk7XG59XG5leHBvcnQgZnVuY3Rpb24gYmFzZTY0dXJsVG9VaW50OEFycmF5KGJhc2U2NHVybCkge1xuICAgIGNvbnN0IGJhc2U2NCA9IGJhc2U2NHVybC5yZXBsYWNlKC8tL2csIFwiK1wiKS5yZXBsYWNlKC9fL2csIFwiL1wiKTtcbiAgICBjb25zdCBwYWRkaW5nID0gXCI9XCIucmVwZWF0KCg0IC0gKGJhc2U2NC5sZW5ndGggJSA0KSkgJSA0KTtcbiAgICByZXR1cm4gYmFzZTY0VG9VaW50OEFycmF5KGJhc2U2NCArIHBhZGRpbmcpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHVpbnQ4QXJyYXlUb0Jhc2U2NHVybChieXRlcykge1xuICAgIHJldHVybiB1aW50OEFycmF5VG9CYXNlNjQoYnl0ZXMpLnJlcGxhY2UoL1xcKy9nLCBcIi1cIikucmVwbGFjZSgvXFwvL2csIFwiX1wiKS5yZXBsYWNlKC89L2csIFwiXCIpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGhleFRvVWludDhBcnJheShoZXgpIHtcbiAgICBjb25zdCBjbGVhbkhleCA9IGhleC5yZXBsYWNlKC9eMHgvLCBcIlwiKTtcbiAgICBpZiAoY2xlYW5IZXgubGVuZ3RoICUgMiAhPT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGhleCBzdHJpbmcgbGVuZ3RoXCIpO1xuICAgIH1cbiAgICBjb25zdCBieXRlcyA9IG5ldyBVaW50OEFycmF5KGNsZWFuSGV4Lmxlbmd0aCAvIDIpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2xlYW5IZXgubGVuZ3RoOyBpICs9IDIpIHtcbiAgICAgICAgYnl0ZXNbaSAvIDJdID0gTnVtYmVyLnBhcnNlSW50KGNsZWFuSGV4LnNsaWNlKGksIGkgKyAyKSwgMTYpO1xuICAgIH1cbiAgICByZXR1cm4gYnl0ZXM7XG59XG5leHBvcnQgZnVuY3Rpb24gdWludDhBcnJheVRvSGV4KGJ5dGVzKSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20oYnl0ZXMpXG4gICAgICAgIC5tYXAoKGIpID0+IGIudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsIFwiMFwiKSlcbiAgICAgICAgLmpvaW4oXCJcIik7XG59XG4vLyBpbnN0YW5jZW9mXG5leHBvcnQgY2xhc3MgQ2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yKC4uLl9hcmdzKSB7IH1cbn1cbiIsInZhciBfYTtcbmV4cG9ydCBjb25zdCAkb3V0cHV0ID0gU3ltYm9sKFwiWm9kT3V0cHV0XCIpO1xuZXhwb3J0IGNvbnN0ICRpbnB1dCA9IFN5bWJvbChcIlpvZElucHV0XCIpO1xuZXhwb3J0IGNsYXNzICRab2RSZWdpc3RyeSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuX21hcCA9IG5ldyBXZWFrTWFwKCk7XG4gICAgICAgIHRoaXMuX2lkbWFwID0gbmV3IE1hcCgpO1xuICAgIH1cbiAgICBhZGQoc2NoZW1hLCAuLi5fbWV0YSkge1xuICAgICAgICBjb25zdCBtZXRhID0gX21ldGFbMF07XG4gICAgICAgIHRoaXMuX21hcC5zZXQoc2NoZW1hLCBtZXRhKTtcbiAgICAgICAgaWYgKG1ldGEgJiYgdHlwZW9mIG1ldGEgPT09IFwib2JqZWN0XCIgJiYgXCJpZFwiIGluIG1ldGEpIHtcbiAgICAgICAgICAgIHRoaXMuX2lkbWFwLnNldChtZXRhLmlkLCBzY2hlbWEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBjbGVhcigpIHtcbiAgICAgICAgdGhpcy5fbWFwID0gbmV3IFdlYWtNYXAoKTtcbiAgICAgICAgdGhpcy5faWRtYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICByZW1vdmUoc2NoZW1hKSB7XG4gICAgICAgIGNvbnN0IG1ldGEgPSB0aGlzLl9tYXAuZ2V0KHNjaGVtYSk7XG4gICAgICAgIGlmIChtZXRhICYmIHR5cGVvZiBtZXRhID09PSBcIm9iamVjdFwiICYmIFwiaWRcIiBpbiBtZXRhKSB7XG4gICAgICAgICAgICB0aGlzLl9pZG1hcC5kZWxldGUobWV0YS5pZCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fbWFwLmRlbGV0ZShzY2hlbWEpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgZ2V0KHNjaGVtYSkge1xuICAgICAgICAvLyByZXR1cm4gdGhpcy5fbWFwLmdldChzY2hlbWEpIGFzIGFueTtcbiAgICAgICAgLy8gaW5oZXJpdCBtZXRhZGF0YVxuICAgICAgICBjb25zdCBwID0gc2NoZW1hLl96b2QucGFyZW50O1xuICAgICAgICBpZiAocCkge1xuICAgICAgICAgICAgY29uc3QgcG0gPSB7IC4uLih0aGlzLmdldChwKSA/PyB7fSkgfTtcbiAgICAgICAgICAgIGRlbGV0ZSBwbS5pZDsgLy8gZG8gbm90IGluaGVyaXQgaWRcbiAgICAgICAgICAgIGNvbnN0IGYgPSB7IC4uLnBtLCAuLi50aGlzLl9tYXAuZ2V0KHNjaGVtYSkgfTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhmKS5sZW5ndGggPyBmIDogdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9tYXAuZ2V0KHNjaGVtYSk7XG4gICAgfVxuICAgIGhhcyhzY2hlbWEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX21hcC5oYXMoc2NoZW1hKTtcbiAgICB9XG59XG4vLyByZWdpc3RyaWVzXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0cnkoKSB7XG4gICAgcmV0dXJuIG5ldyAkWm9kUmVnaXN0cnkoKTtcbn1cbihfYSA9IGdsb2JhbFRoaXMpLl9fem9kX2dsb2JhbFJlZ2lzdHJ5ID8/IChfYS5fX3pvZF9nbG9iYWxSZWdpc3RyeSA9IHJlZ2lzdHJ5KCkpO1xuZXhwb3J0IGNvbnN0IGdsb2JhbFJlZ2lzdHJ5ID0gZ2xvYmFsVGhpcy5fX3pvZF9nbG9iYWxSZWdpc3RyeTtcbiIsImltcG9ydCB7IGdsb2JhbFJlZ2lzdHJ5IH0gZnJvbSBcIi4vcmVnaXN0cmllcy5qc1wiO1xuLy8gZnVuY3Rpb24gaW5pdGlhbGl6ZUNvbnRleHQ8VCBleHRlbmRzIHNjaGVtYXMuJFpvZFR5cGU+KGlucHV0czogSlNPTlNjaGVtYUdlbmVyYXRvclBhcmFtczxUPik6IFRvSlNPTlNjaGVtYUNvbnRleHQ8VD4ge1xuLy8gICByZXR1cm4ge1xuLy8gICAgIHByb2Nlc3NvcjogaW5wdXRzLnByb2Nlc3Nvcixcbi8vICAgICBtZXRhZGF0YVJlZ2lzdHJ5OiBpbnB1dHMubWV0YWRhdGEgPz8gZ2xvYmFsUmVnaXN0cnksXG4vLyAgICAgdGFyZ2V0OiBpbnB1dHMudGFyZ2V0ID8/IFwiZHJhZnQtMjAyMC0xMlwiLFxuLy8gICAgIHVucmVwcmVzZW50YWJsZTogaW5wdXRzLnVucmVwcmVzZW50YWJsZSA/PyBcInRocm93XCIsXG4vLyAgIH07XG4vLyB9XG5leHBvcnQgZnVuY3Rpb24gaW5pdGlhbGl6ZUNvbnRleHQocGFyYW1zKSB7XG4gICAgLy8gTm9ybWFsaXplIHRhcmdldDogY29udmVydCBvbGQgbm9uLWh5cGhlbmF0ZWQgdmVyc2lvbnMgdG8gaHlwaGVuYXRlZCB2ZXJzaW9uc1xuICAgIGxldCB0YXJnZXQgPSBwYXJhbXM/LnRhcmdldCA/PyBcImRyYWZ0LTIwMjAtMTJcIjtcbiAgICBpZiAodGFyZ2V0ID09PSBcImRyYWZ0LTRcIilcbiAgICAgICAgdGFyZ2V0ID0gXCJkcmFmdC0wNFwiO1xuICAgIGlmICh0YXJnZXQgPT09IFwiZHJhZnQtN1wiKVxuICAgICAgICB0YXJnZXQgPSBcImRyYWZ0LTA3XCI7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcHJvY2Vzc29yczogcGFyYW1zLnByb2Nlc3NvcnMgPz8ge30sXG4gICAgICAgIG1ldGFkYXRhUmVnaXN0cnk6IHBhcmFtcz8ubWV0YWRhdGEgPz8gZ2xvYmFsUmVnaXN0cnksXG4gICAgICAgIHRhcmdldCxcbiAgICAgICAgdW5yZXByZXNlbnRhYmxlOiBwYXJhbXM/LnVucmVwcmVzZW50YWJsZSA/PyBcInRocm93XCIsXG4gICAgICAgIG92ZXJyaWRlOiBwYXJhbXM/Lm92ZXJyaWRlID8/ICgoKSA9PiB7IH0pLFxuICAgICAgICBpbzogcGFyYW1zPy5pbyA/PyBcIm91dHB1dFwiLFxuICAgICAgICBjb3VudGVyOiAwLFxuICAgICAgICBzZWVuOiBuZXcgTWFwKCksXG4gICAgICAgIGN5Y2xlczogcGFyYW1zPy5jeWNsZXMgPz8gXCJyZWZcIixcbiAgICAgICAgcmV1c2VkOiBwYXJhbXM/LnJldXNlZCA/PyBcImlubGluZVwiLFxuICAgICAgICBleHRlcm5hbDogcGFyYW1zPy5leHRlcm5hbCA/PyB1bmRlZmluZWQsXG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwcm9jZXNzKHNjaGVtYSwgY3R4LCBfcGFyYW1zID0geyBwYXRoOiBbXSwgc2NoZW1hUGF0aDogW10gfSkge1xuICAgIHZhciBfYTtcbiAgICBjb25zdCBkZWYgPSBzY2hlbWEuX3pvZC5kZWY7XG4gICAgLy8gY2hlY2sgZm9yIHNjaGVtYSBpbiBzZWVuc1xuICAgIGNvbnN0IHNlZW4gPSBjdHguc2Vlbi5nZXQoc2NoZW1hKTtcbiAgICBpZiAoc2Vlbikge1xuICAgICAgICBzZWVuLmNvdW50Kys7XG4gICAgICAgIC8vIGNoZWNrIGlmIGN5Y2xlXG4gICAgICAgIGNvbnN0IGlzQ3ljbGUgPSBfcGFyYW1zLnNjaGVtYVBhdGguaW5jbHVkZXMoc2NoZW1hKTtcbiAgICAgICAgaWYgKGlzQ3ljbGUpIHtcbiAgICAgICAgICAgIHNlZW4uY3ljbGUgPSBfcGFyYW1zLnBhdGg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNlZW4uc2NoZW1hO1xuICAgIH1cbiAgICAvLyBpbml0aWFsaXplXG4gICAgY29uc3QgcmVzdWx0ID0geyBzY2hlbWE6IHt9LCBjb3VudDogMSwgY3ljbGU6IHVuZGVmaW5lZCwgcGF0aDogX3BhcmFtcy5wYXRoIH07XG4gICAgY3R4LnNlZW4uc2V0KHNjaGVtYSwgcmVzdWx0KTtcbiAgICAvLyBjdXN0b20gbWV0aG9kIG92ZXJyaWRlcyBkZWZhdWx0IGJlaGF2aW9yXG4gICAgY29uc3Qgb3ZlcnJpZGVTY2hlbWEgPSBzY2hlbWEuX3pvZC50b0pTT05TY2hlbWE/LigpO1xuICAgIGlmIChvdmVycmlkZVNjaGVtYSkge1xuICAgICAgICByZXN1bHQuc2NoZW1hID0gb3ZlcnJpZGVTY2hlbWE7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBwYXJhbXMgPSB7XG4gICAgICAgICAgICAuLi5fcGFyYW1zLFxuICAgICAgICAgICAgc2NoZW1hUGF0aDogWy4uLl9wYXJhbXMuc2NoZW1hUGF0aCwgc2NoZW1hXSxcbiAgICAgICAgICAgIHBhdGg6IF9wYXJhbXMucGF0aCxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHNjaGVtYS5fem9kLnByb2Nlc3NKU09OU2NoZW1hKSB7XG4gICAgICAgICAgICBzY2hlbWEuX3pvZC5wcm9jZXNzSlNPTlNjaGVtYShjdHgsIHJlc3VsdC5zY2hlbWEsIHBhcmFtcyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBfanNvbiA9IHJlc3VsdC5zY2hlbWE7XG4gICAgICAgICAgICBjb25zdCBwcm9jZXNzb3IgPSBjdHgucHJvY2Vzc29yc1tkZWYudHlwZV07XG4gICAgICAgICAgICBpZiAoIXByb2Nlc3Nvcikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgW3RvSlNPTlNjaGVtYV06IE5vbi1yZXByZXNlbnRhYmxlIHR5cGUgZW5jb3VudGVyZWQ6ICR7ZGVmLnR5cGV9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwcm9jZXNzb3Ioc2NoZW1hLCBjdHgsIF9qc29uLCBwYXJhbXMpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcmVudCA9IHNjaGVtYS5fem9kLnBhcmVudDtcbiAgICAgICAgaWYgKHBhcmVudCkge1xuICAgICAgICAgICAgLy8gQWxzbyBzZXQgcmVmIGlmIHByb2Nlc3NvciBkaWRuJ3QgKGZvciBpbmhlcml0YW5jZSlcbiAgICAgICAgICAgIGlmICghcmVzdWx0LnJlZilcbiAgICAgICAgICAgICAgICByZXN1bHQucmVmID0gcGFyZW50O1xuICAgICAgICAgICAgcHJvY2VzcyhwYXJlbnQsIGN0eCwgcGFyYW1zKTtcbiAgICAgICAgICAgIGN0eC5zZWVuLmdldChwYXJlbnQpLmlzUGFyZW50ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBtZXRhZGF0YVxuICAgIGNvbnN0IG1ldGEgPSBjdHgubWV0YWRhdGFSZWdpc3RyeS5nZXQoc2NoZW1hKTtcbiAgICBpZiAobWV0YSlcbiAgICAgICAgT2JqZWN0LmFzc2lnbihyZXN1bHQuc2NoZW1hLCBtZXRhKTtcbiAgICBpZiAoY3R4LmlvID09PSBcImlucHV0XCIgJiYgaXNUcmFuc2Zvcm1pbmcoc2NoZW1hKSkge1xuICAgICAgICAvLyBleGFtcGxlcy9kZWZhdWx0cyBvbmx5IGFwcGx5IHRvIG91dHB1dCB0eXBlIG9mIHBpcGVcbiAgICAgICAgZGVsZXRlIHJlc3VsdC5zY2hlbWEuZXhhbXBsZXM7XG4gICAgICAgIGRlbGV0ZSByZXN1bHQuc2NoZW1hLmRlZmF1bHQ7XG4gICAgfVxuICAgIC8vIHNldCBwcmVmYXVsdCBhcyBkZWZhdWx0XG4gICAgaWYgKGN0eC5pbyA9PT0gXCJpbnB1dFwiICYmIHJlc3VsdC5zY2hlbWEuX3ByZWZhdWx0KVxuICAgICAgICAoX2EgPSByZXN1bHQuc2NoZW1hKS5kZWZhdWx0ID8/IChfYS5kZWZhdWx0ID0gcmVzdWx0LnNjaGVtYS5fcHJlZmF1bHQpO1xuICAgIGRlbGV0ZSByZXN1bHQuc2NoZW1hLl9wcmVmYXVsdDtcbiAgICAvLyBwdWxsaW5nIGZyZXNoIGZyb20gY3R4LnNlZW4gaW4gY2FzZSBpdCB3YXMgb3ZlcndyaXR0ZW5cbiAgICBjb25zdCBfcmVzdWx0ID0gY3R4LnNlZW4uZ2V0KHNjaGVtYSk7XG4gICAgcmV0dXJuIF9yZXN1bHQuc2NoZW1hO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGV4dHJhY3REZWZzKGN0eCwgc2NoZW1hXG4vLyBwYXJhbXM6IEVtaXRQYXJhbXNcbikge1xuICAgIC8vIGl0ZXJhdGUgb3ZlciBzZWVuIG1hcDtcbiAgICBjb25zdCByb290ID0gY3R4LnNlZW4uZ2V0KHNjaGVtYSk7XG4gICAgaWYgKCFyb290KVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbnByb2Nlc3NlZCBzY2hlbWEuIFRoaXMgaXMgYSBidWcgaW4gWm9kLlwiKTtcbiAgICAvLyBUcmFjayBpZHMgdG8gZGV0ZWN0IGR1cGxpY2F0ZXMgYWNyb3NzIGRpZmZlcmVudCBzY2hlbWFzXG4gICAgY29uc3QgaWRUb1NjaGVtYSA9IG5ldyBNYXAoKTtcbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGN0eC5zZWVuLmVudHJpZXMoKSkge1xuICAgICAgICBjb25zdCBpZCA9IGN0eC5tZXRhZGF0YVJlZ2lzdHJ5LmdldChlbnRyeVswXSk/LmlkO1xuICAgICAgICBpZiAoaWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nID0gaWRUb1NjaGVtYS5nZXQoaWQpO1xuICAgICAgICAgICAgaWYgKGV4aXN0aW5nICYmIGV4aXN0aW5nICE9PSBlbnRyeVswXSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRHVwbGljYXRlIHNjaGVtYSBpZCBcIiR7aWR9XCIgZGV0ZWN0ZWQgZHVyaW5nIEpTT04gU2NoZW1hIGNvbnZlcnNpb24uIFR3byBkaWZmZXJlbnQgc2NoZW1hcyBjYW5ub3Qgc2hhcmUgdGhlIHNhbWUgaWQgd2hlbiBjb252ZXJ0ZWQgdG9nZXRoZXIuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZFRvU2NoZW1hLnNldChpZCwgZW50cnlbMF0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIHJldHVybnMgYSByZWYgdG8gdGhlIHNjaGVtYVxuICAgIC8vIGRlZklkIHdpbGwgYmUgZW1wdHkgaWYgdGhlIHJlZiBwb2ludHMgdG8gYW4gZXh0ZXJuYWwgc2NoZW1hIChvciAjKVxuICAgIGNvbnN0IG1ha2VVUkkgPSAoZW50cnkpID0+IHtcbiAgICAgICAgLy8gY29tcGFyaW5nIHRoZSBzZWVuIG9iamVjdHMgYmVjYXVzZSBzb21ldGltZXNcbiAgICAgICAgLy8gbXVsdGlwbGUgc2NoZW1hcyBtYXAgdG8gdGhlIHNhbWUgc2VlbiBvYmplY3QuXG4gICAgICAgIC8vIGUuZy4gbGF6eVxuICAgICAgICAvLyBleHRlcm5hbCBpcyBjb25maWd1cmVkXG4gICAgICAgIGNvbnN0IGRlZnNTZWdtZW50ID0gY3R4LnRhcmdldCA9PT0gXCJkcmFmdC0yMDIwLTEyXCIgPyBcIiRkZWZzXCIgOiBcImRlZmluaXRpb25zXCI7XG4gICAgICAgIGlmIChjdHguZXh0ZXJuYWwpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4dGVybmFsSWQgPSBjdHguZXh0ZXJuYWwucmVnaXN0cnkuZ2V0KGVudHJ5WzBdKT8uaWQ7IC8vID8/IFwiX19zaGFyZWRcIjsvLyBgX19zY2hlbWEke2N0eC5jb3VudGVyKyt9YDtcbiAgICAgICAgICAgIC8vIGNoZWNrIGlmIHNjaGVtYSBpcyBpbiB0aGUgZXh0ZXJuYWwgcmVnaXN0cnlcbiAgICAgICAgICAgIGNvbnN0IHVyaUdlbmVyYXRvciA9IGN0eC5leHRlcm5hbC51cmkgPz8gKChpZCkgPT4gaWQpO1xuICAgICAgICAgICAgaWYgKGV4dGVybmFsSWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyByZWY6IHVyaUdlbmVyYXRvcihleHRlcm5hbElkKSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gb3RoZXJ3aXNlLCBhZGQgdG8gX19zaGFyZWRcbiAgICAgICAgICAgIGNvbnN0IGlkID0gZW50cnlbMV0uZGVmSWQgPz8gZW50cnlbMV0uc2NoZW1hLmlkID8/IGBzY2hlbWEke2N0eC5jb3VudGVyKyt9YDtcbiAgICAgICAgICAgIGVudHJ5WzFdLmRlZklkID0gaWQ7IC8vIHNldCBkZWZJZCBzbyBpdCB3aWxsIGJlIHJldXNlZCBpZiBuZWVkZWRcbiAgICAgICAgICAgIHJldHVybiB7IGRlZklkOiBpZCwgcmVmOiBgJHt1cmlHZW5lcmF0b3IoXCJfX3NoYXJlZFwiKX0jLyR7ZGVmc1NlZ21lbnR9LyR7aWR9YCB9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChlbnRyeVsxXSA9PT0gcm9vdCkge1xuICAgICAgICAgICAgcmV0dXJuIHsgcmVmOiBcIiNcIiB9O1xuICAgICAgICB9XG4gICAgICAgIC8vIHNlbGYtY29udGFpbmVkIHNjaGVtYVxuICAgICAgICBjb25zdCB1cmlQcmVmaXggPSBgI2A7XG4gICAgICAgIGNvbnN0IGRlZlVyaVByZWZpeCA9IGAke3VyaVByZWZpeH0vJHtkZWZzU2VnbWVudH0vYDtcbiAgICAgICAgY29uc3QgZGVmSWQgPSBlbnRyeVsxXS5zY2hlbWEuaWQgPz8gYF9fc2NoZW1hJHtjdHguY291bnRlcisrfWA7XG4gICAgICAgIHJldHVybiB7IGRlZklkLCByZWY6IGRlZlVyaVByZWZpeCArIGRlZklkIH07XG4gICAgfTtcbiAgICAvLyBzdG9yZWQgY2FjaGVkIHZlcnNpb24gaW4gYGRlZmAgcHJvcGVydHlcbiAgICAvLyByZW1vdmUgYWxsIHByb3BlcnRpZXMsIHNldCAkcmVmXG4gICAgY29uc3QgZXh0cmFjdFRvRGVmID0gKGVudHJ5KSA9PiB7XG4gICAgICAgIC8vIGlmIHRoZSBzY2hlbWEgaXMgYWxyZWFkeSBhIHJlZmVyZW5jZSwgZG8gbm90IGV4dHJhY3QgaXRcbiAgICAgICAgaWYgKGVudHJ5WzFdLnNjaGVtYS4kcmVmKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2VlbiA9IGVudHJ5WzFdO1xuICAgICAgICBjb25zdCB7IHJlZiwgZGVmSWQgfSA9IG1ha2VVUkkoZW50cnkpO1xuICAgICAgICBzZWVuLmRlZiA9IHsgLi4uc2Vlbi5zY2hlbWEgfTtcbiAgICAgICAgLy8gZGVmSWQgd29uJ3QgYmUgc2V0IGlmIHRoZSBzY2hlbWEgaXMgYSByZWZlcmVuY2UgdG8gYW4gZXh0ZXJuYWwgc2NoZW1hXG4gICAgICAgIC8vIG9yIGlmIHRoZSBzY2hlbWEgaXMgdGhlIHJvb3Qgc2NoZW1hXG4gICAgICAgIGlmIChkZWZJZClcbiAgICAgICAgICAgIHNlZW4uZGVmSWQgPSBkZWZJZDtcbiAgICAgICAgLy8gd2lwZSBhd2F5IGFsbCBwcm9wZXJ0aWVzIGV4Y2VwdCAkcmVmXG4gICAgICAgIGNvbnN0IHNjaGVtYSA9IHNlZW4uc2NoZW1hO1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBzY2hlbWEpIHtcbiAgICAgICAgICAgIGRlbGV0ZSBzY2hlbWFba2V5XTtcbiAgICAgICAgfVxuICAgICAgICBzY2hlbWEuJHJlZiA9IHJlZjtcbiAgICB9O1xuICAgIC8vIHRocm93IG9uIGN5Y2xlc1xuICAgIC8vIGJyZWFrIGN5Y2xlc1xuICAgIGlmIChjdHguY3ljbGVzID09PSBcInRocm93XCIpIHtcbiAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBjdHguc2Vlbi5lbnRyaWVzKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHNlZW4gPSBlbnRyeVsxXTtcbiAgICAgICAgICAgIGlmIChzZWVuLmN5Y2xlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ3ljbGUgZGV0ZWN0ZWQ6IFwiICtcbiAgICAgICAgICAgICAgICAgICAgYCMvJHtzZWVuLmN5Y2xlPy5qb2luKFwiL1wiKX0vPHJvb3Q+YCArXG4gICAgICAgICAgICAgICAgICAgICdcXG5cXG5TZXQgdGhlIGBjeWNsZXNgIHBhcmFtZXRlciB0byBgXCJyZWZcImAgdG8gcmVzb2x2ZSBjeWNsaWNhbCBzY2hlbWFzIHdpdGggZGVmcy4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBleHRyYWN0IHNjaGVtYXMgaW50byAkZGVmc1xuICAgIGZvciAoY29uc3QgZW50cnkgb2YgY3R4LnNlZW4uZW50cmllcygpKSB7XG4gICAgICAgIGNvbnN0IHNlZW4gPSBlbnRyeVsxXTtcbiAgICAgICAgLy8gY29udmVydCByb290IHNjaGVtYSB0byAjICRyZWZcbiAgICAgICAgaWYgKHNjaGVtYSA9PT0gZW50cnlbMF0pIHtcbiAgICAgICAgICAgIGV4dHJhY3RUb0RlZihlbnRyeSk7IC8vIHRoaXMgaGFzIHNwZWNpYWwgaGFuZGxpbmcgZm9yIHRoZSByb290IHNjaGVtYVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZXh0cmFjdCBzY2hlbWFzIHRoYXQgYXJlIGluIHRoZSBleHRlcm5hbCByZWdpc3RyeVxuICAgICAgICBpZiAoY3R4LmV4dGVybmFsKSB7XG4gICAgICAgICAgICBjb25zdCBleHQgPSBjdHguZXh0ZXJuYWwucmVnaXN0cnkuZ2V0KGVudHJ5WzBdKT8uaWQ7XG4gICAgICAgICAgICBpZiAoc2NoZW1hICE9PSBlbnRyeVswXSAmJiBleHQpIHtcbiAgICAgICAgICAgICAgICBleHRyYWN0VG9EZWYoZW50cnkpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGV4dHJhY3Qgc2NoZW1hcyB3aXRoIGBpZGAgbWV0YVxuICAgICAgICBjb25zdCBpZCA9IGN0eC5tZXRhZGF0YVJlZ2lzdHJ5LmdldChlbnRyeVswXSk/LmlkO1xuICAgICAgICBpZiAoaWQpIHtcbiAgICAgICAgICAgIGV4dHJhY3RUb0RlZihlbnRyeSk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBicmVhayBjeWNsZXNcbiAgICAgICAgaWYgKHNlZW4uY3ljbGUpIHtcbiAgICAgICAgICAgIC8vIGFueVxuICAgICAgICAgICAgZXh0cmFjdFRvRGVmKGVudHJ5KTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIGV4dHJhY3QgcmV1c2VkIHNjaGVtYXNcbiAgICAgICAgaWYgKHNlZW4uY291bnQgPiAxKSB7XG4gICAgICAgICAgICBpZiAoY3R4LnJldXNlZCA9PT0gXCJyZWZcIikge1xuICAgICAgICAgICAgICAgIGV4dHJhY3RUb0RlZihlbnRyeSk7XG4gICAgICAgICAgICAgICAgLy8gYmlvbWUtaWdub3JlIGxpbnQ6XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gZmluYWxpemUoY3R4LCBzY2hlbWEpIHtcbiAgICBjb25zdCByb290ID0gY3R4LnNlZW4uZ2V0KHNjaGVtYSk7XG4gICAgaWYgKCFyb290KVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbnByb2Nlc3NlZCBzY2hlbWEuIFRoaXMgaXMgYSBidWcgaW4gWm9kLlwiKTtcbiAgICAvLyBmbGF0dGVuIHJlZnMgLSBpbmhlcml0IHByb3BlcnRpZXMgZnJvbSBwYXJlbnQgc2NoZW1hc1xuICAgIGNvbnN0IGZsYXR0ZW5SZWYgPSAoem9kU2NoZW1hKSA9PiB7XG4gICAgICAgIGNvbnN0IHNlZW4gPSBjdHguc2Vlbi5nZXQoem9kU2NoZW1hKTtcbiAgICAgICAgLy8gYWxyZWFkeSBwcm9jZXNzZWRcbiAgICAgICAgaWYgKHNlZW4ucmVmID09PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBzY2hlbWEgPSBzZWVuLmRlZiA/PyBzZWVuLnNjaGVtYTtcbiAgICAgICAgY29uc3QgX2NhY2hlZCA9IHsgLi4uc2NoZW1hIH07XG4gICAgICAgIGNvbnN0IHJlZiA9IHNlZW4ucmVmO1xuICAgICAgICBzZWVuLnJlZiA9IG51bGw7IC8vIHByZXZlbnQgaW5maW5pdGUgcmVjdXJzaW9uXG4gICAgICAgIGlmIChyZWYpIHtcbiAgICAgICAgICAgIGZsYXR0ZW5SZWYocmVmKTtcbiAgICAgICAgICAgIGNvbnN0IHJlZlNlZW4gPSBjdHguc2Vlbi5nZXQocmVmKTtcbiAgICAgICAgICAgIGNvbnN0IHJlZlNjaGVtYSA9IHJlZlNlZW4uc2NoZW1hO1xuICAgICAgICAgICAgLy8gbWVyZ2UgcmVmZXJlbmNlZCBzY2hlbWEgaW50byBjdXJyZW50XG4gICAgICAgICAgICBpZiAocmVmU2NoZW1hLiRyZWYgJiYgKGN0eC50YXJnZXQgPT09IFwiZHJhZnQtMDdcIiB8fCBjdHgudGFyZ2V0ID09PSBcImRyYWZ0LTA0XCIgfHwgY3R4LnRhcmdldCA9PT0gXCJvcGVuYXBpLTMuMFwiKSkge1xuICAgICAgICAgICAgICAgIC8vIG9sZGVyIGRyYWZ0cyBjYW4ndCBjb21iaW5lICRyZWYgd2l0aCBvdGhlciBwcm9wZXJ0aWVzXG4gICAgICAgICAgICAgICAgc2NoZW1hLmFsbE9mID0gc2NoZW1hLmFsbE9mID8/IFtdO1xuICAgICAgICAgICAgICAgIHNjaGVtYS5hbGxPZi5wdXNoKHJlZlNjaGVtYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHNjaGVtYSwgcmVmU2NoZW1hKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHJlc3RvcmUgY2hpbGQncyBvd24gcHJvcGVydGllcyAoY2hpbGQgd2lucylcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oc2NoZW1hLCBfY2FjaGVkKTtcbiAgICAgICAgICAgIGNvbnN0IGlzUGFyZW50UmVmID0gem9kU2NoZW1hLl96b2QucGFyZW50ID09PSByZWY7XG4gICAgICAgICAgICAvLyBGb3IgcGFyZW50IGNoYWluLCBjaGlsZCBpcyBhIHJlZmluZW1lbnQgLSByZW1vdmUgcGFyZW50LW9ubHkgcHJvcGVydGllc1xuICAgICAgICAgICAgaWYgKGlzUGFyZW50UmVmKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gc2NoZW1hKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkgPT09IFwiJHJlZlwiIHx8IGtleSA9PT0gXCJhbGxPZlwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKGtleSBpbiBfY2FjaGVkKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHNjaGVtYVtrZXldO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gV2hlbiByZWYgd2FzIGV4dHJhY3RlZCB0byAkZGVmcywgcmVtb3ZlIHByb3BlcnRpZXMgdGhhdCBtYXRjaCB0aGUgZGVmaW5pdGlvblxuICAgICAgICAgICAgaWYgKHJlZlNjaGVtYS4kcmVmKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gc2NoZW1hKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkgPT09IFwiJHJlZlwiIHx8IGtleSA9PT0gXCJhbGxPZlwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkgaW4gcmVmU2Vlbi5kZWYgJiYgSlNPTi5zdHJpbmdpZnkoc2NoZW1hW2tleV0pID09PSBKU09OLnN0cmluZ2lmeShyZWZTZWVuLmRlZltrZXldKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHNjaGVtYVtrZXldO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIElmIHBhcmVudCB3YXMgZXh0cmFjdGVkIChoYXMgJHJlZiksIHByb3BhZ2F0ZSAkcmVmIHRvIHRoaXMgc2NoZW1hXG4gICAgICAgIC8vIFRoaXMgaGFuZGxlcyBjYXNlcyBsaWtlOiByZWFkb25seSgpLm1ldGEoe2lkfSkuZGVzY3JpYmUoKVxuICAgICAgICAvLyB3aGVyZSBwcm9jZXNzb3Igc2V0cyByZWYgdG8gaW5uZXJUeXBlIGJ1dCBwYXJlbnQgc2hvdWxkIGJlIHJlZmVyZW5jZWRcbiAgICAgICAgY29uc3QgcGFyZW50ID0gem9kU2NoZW1hLl96b2QucGFyZW50O1xuICAgICAgICBpZiAocGFyZW50ICYmIHBhcmVudCAhPT0gcmVmKSB7XG4gICAgICAgICAgICAvLyBFbnN1cmUgcGFyZW50IGlzIHByb2Nlc3NlZCBmaXJzdCBzbyBpdHMgZGVmIGhhcyBpbmhlcml0ZWQgcHJvcGVydGllc1xuICAgICAgICAgICAgZmxhdHRlblJlZihwYXJlbnQpO1xuICAgICAgICAgICAgY29uc3QgcGFyZW50U2VlbiA9IGN0eC5zZWVuLmdldChwYXJlbnQpO1xuICAgICAgICAgICAgaWYgKHBhcmVudFNlZW4/LnNjaGVtYS4kcmVmKSB7XG4gICAgICAgICAgICAgICAgc2NoZW1hLiRyZWYgPSBwYXJlbnRTZWVuLnNjaGVtYS4kcmVmO1xuICAgICAgICAgICAgICAgIC8vIERlLWR1cGxpY2F0ZSB3aXRoIHBhcmVudCdzIGRlZmluaXRpb25cbiAgICAgICAgICAgICAgICBpZiAocGFyZW50U2Vlbi5kZWYpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gc2NoZW1hKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoa2V5ID09PSBcIiRyZWZcIiB8fCBrZXkgPT09IFwiYWxsT2ZcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXkgaW4gcGFyZW50U2Vlbi5kZWYgJiYgSlNPTi5zdHJpbmdpZnkoc2NoZW1hW2tleV0pID09PSBKU09OLnN0cmluZ2lmeShwYXJlbnRTZWVuLmRlZltrZXldKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBzY2hlbWFba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBleGVjdXRlIG92ZXJyaWRlc1xuICAgICAgICBjdHgub3ZlcnJpZGUoe1xuICAgICAgICAgICAgem9kU2NoZW1hOiB6b2RTY2hlbWEsXG4gICAgICAgICAgICBqc29uU2NoZW1hOiBzY2hlbWEsXG4gICAgICAgICAgICBwYXRoOiBzZWVuLnBhdGggPz8gW10sXG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiBbLi4uY3R4LnNlZW4uZW50cmllcygpXS5yZXZlcnNlKCkpIHtcbiAgICAgICAgZmxhdHRlblJlZihlbnRyeVswXSk7XG4gICAgfVxuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgIGlmIChjdHgudGFyZ2V0ID09PSBcImRyYWZ0LTIwMjAtMTJcIikge1xuICAgICAgICByZXN1bHQuJHNjaGVtYSA9IFwiaHR0cHM6Ly9qc29uLXNjaGVtYS5vcmcvZHJhZnQvMjAyMC0xMi9zY2hlbWFcIjtcbiAgICB9XG4gICAgZWxzZSBpZiAoY3R4LnRhcmdldCA9PT0gXCJkcmFmdC0wN1wiKSB7XG4gICAgICAgIHJlc3VsdC4kc2NoZW1hID0gXCJodHRwOi8vanNvbi1zY2hlbWEub3JnL2RyYWZ0LTA3L3NjaGVtYSNcIjtcbiAgICB9XG4gICAgZWxzZSBpZiAoY3R4LnRhcmdldCA9PT0gXCJkcmFmdC0wNFwiKSB7XG4gICAgICAgIHJlc3VsdC4kc2NoZW1hID0gXCJodHRwOi8vanNvbi1zY2hlbWEub3JnL2RyYWZ0LTA0L3NjaGVtYSNcIjtcbiAgICB9XG4gICAgZWxzZSBpZiAoY3R4LnRhcmdldCA9PT0gXCJvcGVuYXBpLTMuMFwiKSB7XG4gICAgICAgIC8vIE9wZW5BUEkgMy4wIHNjaGVtYSBvYmplY3RzIHNob3VsZCBub3QgaW5jbHVkZSBhICRzY2hlbWEgcHJvcGVydHlcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIEFyYml0cmFyeSBzdHJpbmcgdmFsdWVzIGFyZSBhbGxvd2VkIGJ1dCB3b24ndCBoYXZlIGEgJHNjaGVtYSBwcm9wZXJ0eSBzZXRcbiAgICB9XG4gICAgaWYgKGN0eC5leHRlcm5hbD8udXJpKSB7XG4gICAgICAgIGNvbnN0IGlkID0gY3R4LmV4dGVybmFsLnJlZ2lzdHJ5LmdldChzY2hlbWEpPy5pZDtcbiAgICAgICAgaWYgKCFpZClcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlNjaGVtYSBpcyBtaXNzaW5nIGFuIGBpZGAgcHJvcGVydHlcIik7XG4gICAgICAgIHJlc3VsdC4kaWQgPSBjdHguZXh0ZXJuYWwudXJpKGlkKTtcbiAgICB9XG4gICAgT2JqZWN0LmFzc2lnbihyZXN1bHQsIHJvb3QuZGVmID8/IHJvb3Quc2NoZW1hKTtcbiAgICAvLyBidWlsZCBkZWZzIG9iamVjdFxuICAgIGNvbnN0IGRlZnMgPSBjdHguZXh0ZXJuYWw/LmRlZnMgPz8ge307XG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiBjdHguc2Vlbi5lbnRyaWVzKCkpIHtcbiAgICAgICAgY29uc3Qgc2VlbiA9IGVudHJ5WzFdO1xuICAgICAgICBpZiAoc2Vlbi5kZWYgJiYgc2Vlbi5kZWZJZCkge1xuICAgICAgICAgICAgZGVmc1tzZWVuLmRlZklkXSA9IHNlZW4uZGVmO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIHNldCBkZWZpbml0aW9ucyBpbiByZXN1bHRcbiAgICBpZiAoY3R4LmV4dGVybmFsKSB7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAoT2JqZWN0LmtleXMoZGVmcykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgaWYgKGN0eC50YXJnZXQgPT09IFwiZHJhZnQtMjAyMC0xMlwiKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LiRkZWZzID0gZGVmcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5kZWZpbml0aW9ucyA9IGRlZnM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gdGhpcyBcImZpbmFsaXplc1wiIHRoaXMgc2NoZW1hIGFuZCBlbnN1cmVzIGFsbCBjeWNsZXMgYXJlIHJlbW92ZWRcbiAgICAgICAgLy8gZWFjaCBjYWxsIHRvIGZpbmFsaXplKCkgaXMgZnVuY3Rpb25hbGx5IGluZGVwZW5kZW50XG4gICAgICAgIC8vIHRob3VnaCB0aGUgc2VlbiBtYXAgaXMgc2hhcmVkXG4gICAgICAgIGNvbnN0IGZpbmFsaXplZCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocmVzdWx0KSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmaW5hbGl6ZWQsIFwifnN0YW5kYXJkXCIsIHtcbiAgICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgLi4uc2NoZW1hW1wifnN0YW5kYXJkXCJdLFxuICAgICAgICAgICAgICAgIGpzb25TY2hlbWE6IHtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IGNyZWF0ZVN0YW5kYXJkSlNPTlNjaGVtYU1ldGhvZChzY2hlbWEsIFwiaW5wdXRcIiwgY3R4LnByb2Nlc3NvcnMpLFxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQ6IGNyZWF0ZVN0YW5kYXJkSlNPTlNjaGVtYU1ldGhvZChzY2hlbWEsIFwib3V0cHV0XCIsIGN0eC5wcm9jZXNzb3JzKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgd3JpdGFibGU6IGZhbHNlLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZpbmFsaXplZDtcbiAgICB9XG4gICAgY2F0Y2ggKF9lcnIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRXJyb3IgY29udmVydGluZyBzY2hlbWEgdG8gSlNPTi5cIik7XG4gICAgfVxufVxuZnVuY3Rpb24gaXNUcmFuc2Zvcm1pbmcoX3NjaGVtYSwgX2N0eCkge1xuICAgIGNvbnN0IGN0eCA9IF9jdHggPz8geyBzZWVuOiBuZXcgU2V0KCkgfTtcbiAgICBpZiAoY3R4LnNlZW4uaGFzKF9zY2hlbWEpKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgY3R4LnNlZW4uYWRkKF9zY2hlbWEpO1xuICAgIGNvbnN0IGRlZiA9IF9zY2hlbWEuX3pvZC5kZWY7XG4gICAgaWYgKGRlZi50eXBlID09PSBcInRyYW5zZm9ybVwiKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoZGVmLnR5cGUgPT09IFwiYXJyYXlcIilcbiAgICAgICAgcmV0dXJuIGlzVHJhbnNmb3JtaW5nKGRlZi5lbGVtZW50LCBjdHgpO1xuICAgIGlmIChkZWYudHlwZSA9PT0gXCJzZXRcIilcbiAgICAgICAgcmV0dXJuIGlzVHJhbnNmb3JtaW5nKGRlZi52YWx1ZVR5cGUsIGN0eCk7XG4gICAgaWYgKGRlZi50eXBlID09PSBcImxhenlcIilcbiAgICAgICAgcmV0dXJuIGlzVHJhbnNmb3JtaW5nKGRlZi5nZXR0ZXIoKSwgY3R4KTtcbiAgICBpZiAoZGVmLnR5cGUgPT09IFwicHJvbWlzZVwiIHx8XG4gICAgICAgIGRlZi50eXBlID09PSBcIm9wdGlvbmFsXCIgfHxcbiAgICAgICAgZGVmLnR5cGUgPT09IFwibm9ub3B0aW9uYWxcIiB8fFxuICAgICAgICBkZWYudHlwZSA9PT0gXCJudWxsYWJsZVwiIHx8XG4gICAgICAgIGRlZi50eXBlID09PSBcInJlYWRvbmx5XCIgfHxcbiAgICAgICAgZGVmLnR5cGUgPT09IFwiZGVmYXVsdFwiIHx8XG4gICAgICAgIGRlZi50eXBlID09PSBcInByZWZhdWx0XCIpIHtcbiAgICAgICAgcmV0dXJuIGlzVHJhbnNmb3JtaW5nKGRlZi5pbm5lclR5cGUsIGN0eCk7XG4gICAgfVxuICAgIGlmIChkZWYudHlwZSA9PT0gXCJpbnRlcnNlY3Rpb25cIikge1xuICAgICAgICByZXR1cm4gaXNUcmFuc2Zvcm1pbmcoZGVmLmxlZnQsIGN0eCkgfHwgaXNUcmFuc2Zvcm1pbmcoZGVmLnJpZ2h0LCBjdHgpO1xuICAgIH1cbiAgICBpZiAoZGVmLnR5cGUgPT09IFwicmVjb3JkXCIgfHwgZGVmLnR5cGUgPT09IFwibWFwXCIpIHtcbiAgICAgICAgcmV0dXJuIGlzVHJhbnNmb3JtaW5nKGRlZi5rZXlUeXBlLCBjdHgpIHx8IGlzVHJhbnNmb3JtaW5nKGRlZi52YWx1ZVR5cGUsIGN0eCk7XG4gICAgfVxuICAgIGlmIChkZWYudHlwZSA9PT0gXCJwaXBlXCIpIHtcbiAgICAgICAgcmV0dXJuIGlzVHJhbnNmb3JtaW5nKGRlZi5pbiwgY3R4KSB8fCBpc1RyYW5zZm9ybWluZyhkZWYub3V0LCBjdHgpO1xuICAgIH1cbiAgICBpZiAoZGVmLnR5cGUgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gZGVmLnNoYXBlKSB7XG4gICAgICAgICAgICBpZiAoaXNUcmFuc2Zvcm1pbmcoZGVmLnNoYXBlW2tleV0sIGN0eCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoZGVmLnR5cGUgPT09IFwidW5pb25cIikge1xuICAgICAgICBmb3IgKGNvbnN0IG9wdGlvbiBvZiBkZWYub3B0aW9ucykge1xuICAgICAgICAgICAgaWYgKGlzVHJhbnNmb3JtaW5nKG9wdGlvbiwgY3R4KSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChkZWYudHlwZSA9PT0gXCJ0dXBsZVwiKSB7XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBkZWYuaXRlbXMpIHtcbiAgICAgICAgICAgIGlmIChpc1RyYW5zZm9ybWluZyhpdGVtLCBjdHgpKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYucmVzdCAmJiBpc1RyYW5zZm9ybWluZyhkZWYucmVzdCwgY3R4KSlcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIHRvSlNPTlNjaGVtYSBtZXRob2QgZm9yIGEgc2NoZW1hIGluc3RhbmNlLlxuICogVGhpcyBlbmNhcHN1bGF0ZXMgdGhlIGxvZ2ljIG9mIGluaXRpYWxpemluZyBjb250ZXh0LCBwcm9jZXNzaW5nLCBleHRyYWN0aW5nIGRlZnMsIGFuZCBmaW5hbGl6aW5nLlxuICovXG5leHBvcnQgY29uc3QgY3JlYXRlVG9KU09OU2NoZW1hTWV0aG9kID0gKHNjaGVtYSwgcHJvY2Vzc29ycyA9IHt9KSA9PiAocGFyYW1zKSA9PiB7XG4gICAgY29uc3QgY3R4ID0gaW5pdGlhbGl6ZUNvbnRleHQoeyAuLi5wYXJhbXMsIHByb2Nlc3NvcnMgfSk7XG4gICAgcHJvY2VzcyhzY2hlbWEsIGN0eCk7XG4gICAgZXh0cmFjdERlZnMoY3R4LCBzY2hlbWEpO1xuICAgIHJldHVybiBmaW5hbGl6ZShjdHgsIHNjaGVtYSk7XG59O1xuZXhwb3J0IGNvbnN0IGNyZWF0ZVN0YW5kYXJkSlNPTlNjaGVtYU1ldGhvZCA9IChzY2hlbWEsIGlvLCBwcm9jZXNzb3JzID0ge30pID0+IChwYXJhbXMpID0+IHtcbiAgICBjb25zdCB7IGxpYnJhcnlPcHRpb25zLCB0YXJnZXQgfSA9IHBhcmFtcyA/PyB7fTtcbiAgICBjb25zdCBjdHggPSBpbml0aWFsaXplQ29udGV4dCh7IC4uLihsaWJyYXJ5T3B0aW9ucyA/PyB7fSksIHRhcmdldCwgaW8sIHByb2Nlc3NvcnMgfSk7XG4gICAgcHJvY2VzcyhzY2hlbWEsIGN0eCk7XG4gICAgZXh0cmFjdERlZnMoY3R4LCBzY2hlbWEpO1xuICAgIHJldHVybiBmaW5hbGl6ZShjdHgsIHNjaGVtYSk7XG59O1xuIiwiaW1wb3J0IHsgZXh0cmFjdERlZnMsIGZpbmFsaXplLCBpbml0aWFsaXplQ29udGV4dCwgcHJvY2VzcywgfSBmcm9tIFwiLi90by1qc29uLXNjaGVtYS5qc1wiO1xuaW1wb3J0IHsgZ2V0RW51bVZhbHVlcyB9IGZyb20gXCIuL3V0aWwuanNcIjtcbmNvbnN0IGZvcm1hdE1hcCA9IHtcbiAgICBndWlkOiBcInV1aWRcIixcbiAgICB1cmw6IFwidXJpXCIsXG4gICAgZGF0ZXRpbWU6IFwiZGF0ZS10aW1lXCIsXG4gICAganNvbl9zdHJpbmc6IFwianNvbi1zdHJpbmdcIixcbiAgICByZWdleDogXCJcIiwgLy8gZG8gbm90IHNldFxufTtcbi8vID09PT09PT09PT09PT09PT09PT09IFNJTVBMRSBUWVBFIFBST0NFU1NPUlMgPT09PT09PT09PT09PT09PT09PT1cbmV4cG9ydCBjb25zdCBzdHJpbmdQcm9jZXNzb3IgPSAoc2NoZW1hLCBjdHgsIF9qc29uLCBfcGFyYW1zKSA9PiB7XG4gICAgY29uc3QganNvbiA9IF9qc29uO1xuICAgIGpzb24udHlwZSA9IFwic3RyaW5nXCI7XG4gICAgY29uc3QgeyBtaW5pbXVtLCBtYXhpbXVtLCBmb3JtYXQsIHBhdHRlcm5zLCBjb250ZW50RW5jb2RpbmcgfSA9IHNjaGVtYS5fem9kXG4gICAgICAgIC5iYWc7XG4gICAgaWYgKHR5cGVvZiBtaW5pbXVtID09PSBcIm51bWJlclwiKVxuICAgICAgICBqc29uLm1pbkxlbmd0aCA9IG1pbmltdW07XG4gICAgaWYgKHR5cGVvZiBtYXhpbXVtID09PSBcIm51bWJlclwiKVxuICAgICAgICBqc29uLm1heExlbmd0aCA9IG1heGltdW07XG4gICAgLy8gY3VzdG9tIHBhdHRlcm4gb3ZlcnJpZGVzIGZvcm1hdFxuICAgIGlmIChmb3JtYXQpIHtcbiAgICAgICAganNvbi5mb3JtYXQgPSBmb3JtYXRNYXBbZm9ybWF0XSA/PyBmb3JtYXQ7XG4gICAgICAgIGlmIChqc29uLmZvcm1hdCA9PT0gXCJcIilcbiAgICAgICAgICAgIGRlbGV0ZSBqc29uLmZvcm1hdDsgLy8gZW1wdHkgZm9ybWF0IGlzIG5vdCB2YWxpZFxuICAgICAgICAvLyBKU09OIFNjaGVtYSBmb3JtYXQ6IFwidGltZVwiIHJlcXVpcmVzIGEgZnVsbCB0aW1lIHdpdGggb2Zmc2V0IG9yIFpcbiAgICAgICAgLy8gei5pc28udGltZSgpIGRvZXMgbm90IGluY2x1ZGUgdGltZXpvbmUgaW5mb3JtYXRpb24sIHNvIGZvcm1hdDogXCJ0aW1lXCIgc2hvdWxkIG5ldmVyIGJlIHVzZWRcbiAgICAgICAgaWYgKGZvcm1hdCA9PT0gXCJ0aW1lXCIpIHtcbiAgICAgICAgICAgIGRlbGV0ZSBqc29uLmZvcm1hdDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoY29udGVudEVuY29kaW5nKVxuICAgICAgICBqc29uLmNvbnRlbnRFbmNvZGluZyA9IGNvbnRlbnRFbmNvZGluZztcbiAgICBpZiAocGF0dGVybnMgJiYgcGF0dGVybnMuc2l6ZSA+IDApIHtcbiAgICAgICAgY29uc3QgcmVnZXhlcyA9IFsuLi5wYXR0ZXJuc107XG4gICAgICAgIGlmIChyZWdleGVzLmxlbmd0aCA9PT0gMSlcbiAgICAgICAgICAgIGpzb24ucGF0dGVybiA9IHJlZ2V4ZXNbMF0uc291cmNlO1xuICAgICAgICBlbHNlIGlmIChyZWdleGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIGpzb24uYWxsT2YgPSBbXG4gICAgICAgICAgICAgICAgLi4ucmVnZXhlcy5tYXAoKHJlZ2V4KSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICAuLi4oY3R4LnRhcmdldCA9PT0gXCJkcmFmdC0wN1wiIHx8IGN0eC50YXJnZXQgPT09IFwiZHJhZnQtMDRcIiB8fCBjdHgudGFyZ2V0ID09PSBcIm9wZW5hcGktMy4wXCJcbiAgICAgICAgICAgICAgICAgICAgICAgID8geyB0eXBlOiBcInN0cmluZ1wiIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDoge30pLFxuICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuOiByZWdleC5zb3VyY2UsXG4gICAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5leHBvcnQgY29uc3QgbnVtYmVyUHJvY2Vzc29yID0gKHNjaGVtYSwgY3R4LCBfanNvbiwgX3BhcmFtcykgPT4ge1xuICAgIGNvbnN0IGpzb24gPSBfanNvbjtcbiAgICBjb25zdCB7IG1pbmltdW0sIG1heGltdW0sIGZvcm1hdCwgbXVsdGlwbGVPZiwgZXhjbHVzaXZlTWF4aW11bSwgZXhjbHVzaXZlTWluaW11bSB9ID0gc2NoZW1hLl96b2QuYmFnO1xuICAgIGlmICh0eXBlb2YgZm9ybWF0ID09PSBcInN0cmluZ1wiICYmIGZvcm1hdC5pbmNsdWRlcyhcImludFwiKSlcbiAgICAgICAganNvbi50eXBlID0gXCJpbnRlZ2VyXCI7XG4gICAgZWxzZVxuICAgICAgICBqc29uLnR5cGUgPSBcIm51bWJlclwiO1xuICAgIGlmICh0eXBlb2YgZXhjbHVzaXZlTWluaW11bSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICBpZiAoY3R4LnRhcmdldCA9PT0gXCJkcmFmdC0wNFwiIHx8IGN0eC50YXJnZXQgPT09IFwib3BlbmFwaS0zLjBcIikge1xuICAgICAgICAgICAganNvbi5taW5pbXVtID0gZXhjbHVzaXZlTWluaW11bTtcbiAgICAgICAgICAgIGpzb24uZXhjbHVzaXZlTWluaW11bSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBqc29uLmV4Y2x1c2l2ZU1pbmltdW0gPSBleGNsdXNpdmVNaW5pbXVtO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICh0eXBlb2YgbWluaW11bSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICBqc29uLm1pbmltdW0gPSBtaW5pbXVtO1xuICAgICAgICBpZiAodHlwZW9mIGV4Y2x1c2l2ZU1pbmltdW0gPT09IFwibnVtYmVyXCIgJiYgY3R4LnRhcmdldCAhPT0gXCJkcmFmdC0wNFwiKSB7XG4gICAgICAgICAgICBpZiAoZXhjbHVzaXZlTWluaW11bSA+PSBtaW5pbXVtKVxuICAgICAgICAgICAgICAgIGRlbGV0ZSBqc29uLm1pbmltdW07XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgZGVsZXRlIGpzb24uZXhjbHVzaXZlTWluaW11bTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGV4Y2x1c2l2ZU1heGltdW0gPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgaWYgKGN0eC50YXJnZXQgPT09IFwiZHJhZnQtMDRcIiB8fCBjdHgudGFyZ2V0ID09PSBcIm9wZW5hcGktMy4wXCIpIHtcbiAgICAgICAgICAgIGpzb24ubWF4aW11bSA9IGV4Y2x1c2l2ZU1heGltdW07XG4gICAgICAgICAgICBqc29uLmV4Y2x1c2l2ZU1heGltdW0gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAganNvbi5leGNsdXNpdmVNYXhpbXVtID0gZXhjbHVzaXZlTWF4aW11bTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAodHlwZW9mIG1heGltdW0gPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAganNvbi5tYXhpbXVtID0gbWF4aW11bTtcbiAgICAgICAgaWYgKHR5cGVvZiBleGNsdXNpdmVNYXhpbXVtID09PSBcIm51bWJlclwiICYmIGN0eC50YXJnZXQgIT09IFwiZHJhZnQtMDRcIikge1xuICAgICAgICAgICAgaWYgKGV4Y2x1c2l2ZU1heGltdW0gPD0gbWF4aW11bSlcbiAgICAgICAgICAgICAgICBkZWxldGUganNvbi5tYXhpbXVtO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGRlbGV0ZSBqc29uLmV4Y2x1c2l2ZU1heGltdW07XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHR5cGVvZiBtdWx0aXBsZU9mID09PSBcIm51bWJlclwiKVxuICAgICAgICBqc29uLm11bHRpcGxlT2YgPSBtdWx0aXBsZU9mO1xufTtcbmV4cG9ydCBjb25zdCBib29sZWFuUHJvY2Vzc29yID0gKF9zY2hlbWEsIF9jdHgsIGpzb24sIF9wYXJhbXMpID0+IHtcbiAgICBqc29uLnR5cGUgPSBcImJvb2xlYW5cIjtcbn07XG5leHBvcnQgY29uc3QgYmlnaW50UHJvY2Vzc29yID0gKF9zY2hlbWEsIGN0eCwgX2pzb24sIF9wYXJhbXMpID0+IHtcbiAgICBpZiAoY3R4LnVucmVwcmVzZW50YWJsZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkJpZ0ludCBjYW5ub3QgYmUgcmVwcmVzZW50ZWQgaW4gSlNPTiBTY2hlbWFcIik7XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCBzeW1ib2xQcm9jZXNzb3IgPSAoX3NjaGVtYSwgY3R4LCBfanNvbiwgX3BhcmFtcykgPT4ge1xuICAgIGlmIChjdHgudW5yZXByZXNlbnRhYmxlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU3ltYm9scyBjYW5ub3QgYmUgcmVwcmVzZW50ZWQgaW4gSlNPTiBTY2hlbWFcIik7XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCBudWxsUHJvY2Vzc29yID0gKF9zY2hlbWEsIGN0eCwganNvbiwgX3BhcmFtcykgPT4ge1xuICAgIGlmIChjdHgudGFyZ2V0ID09PSBcIm9wZW5hcGktMy4wXCIpIHtcbiAgICAgICAganNvbi50eXBlID0gXCJzdHJpbmdcIjtcbiAgICAgICAganNvbi5udWxsYWJsZSA9IHRydWU7XG4gICAgICAgIGpzb24uZW51bSA9IFtudWxsXTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGpzb24udHlwZSA9IFwibnVsbFwiO1xuICAgIH1cbn07XG5leHBvcnQgY29uc3QgdW5kZWZpbmVkUHJvY2Vzc29yID0gKF9zY2hlbWEsIGN0eCwgX2pzb24sIF9wYXJhbXMpID0+IHtcbiAgICBpZiAoY3R4LnVucmVwcmVzZW50YWJsZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuZGVmaW5lZCBjYW5ub3QgYmUgcmVwcmVzZW50ZWQgaW4gSlNPTiBTY2hlbWFcIik7XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCB2b2lkUHJvY2Vzc29yID0gKF9zY2hlbWEsIGN0eCwgX2pzb24sIF9wYXJhbXMpID0+IHtcbiAgICBpZiAoY3R4LnVucmVwcmVzZW50YWJsZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlZvaWQgY2Fubm90IGJlIHJlcHJlc2VudGVkIGluIEpTT04gU2NoZW1hXCIpO1xuICAgIH1cbn07XG5leHBvcnQgY29uc3QgbmV2ZXJQcm9jZXNzb3IgPSAoX3NjaGVtYSwgX2N0eCwganNvbiwgX3BhcmFtcykgPT4ge1xuICAgIGpzb24ubm90ID0ge307XG59O1xuZXhwb3J0IGNvbnN0IGFueVByb2Nlc3NvciA9IChfc2NoZW1hLCBfY3R4LCBfanNvbiwgX3BhcmFtcykgPT4ge1xuICAgIC8vIGVtcHR5IHNjaGVtYSBhY2NlcHRzIGFueXRoaW5nXG59O1xuZXhwb3J0IGNvbnN0IHVua25vd25Qcm9jZXNzb3IgPSAoX3NjaGVtYSwgX2N0eCwgX2pzb24sIF9wYXJhbXMpID0+IHtcbiAgICAvLyBlbXB0eSBzY2hlbWEgYWNjZXB0cyBhbnl0aGluZ1xufTtcbmV4cG9ydCBjb25zdCBkYXRlUHJvY2Vzc29yID0gKF9zY2hlbWEsIGN0eCwgX2pzb24sIF9wYXJhbXMpID0+IHtcbiAgICBpZiAoY3R4LnVucmVwcmVzZW50YWJsZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkRhdGUgY2Fubm90IGJlIHJlcHJlc2VudGVkIGluIEpTT04gU2NoZW1hXCIpO1xuICAgIH1cbn07XG5leHBvcnQgY29uc3QgZW51bVByb2Nlc3NvciA9IChzY2hlbWEsIF9jdHgsIGpzb24sIF9wYXJhbXMpID0+IHtcbiAgICBjb25zdCBkZWYgPSBzY2hlbWEuX3pvZC5kZWY7XG4gICAgY29uc3QgdmFsdWVzID0gZ2V0RW51bVZhbHVlcyhkZWYuZW50cmllcyk7XG4gICAgLy8gTnVtYmVyIGVudW1zIGNhbiBoYXZlIGJvdGggc3RyaW5nIGFuZCBudW1iZXIgdmFsdWVzXG4gICAgaWYgKHZhbHVlcy5ldmVyeSgodikgPT4gdHlwZW9mIHYgPT09IFwibnVtYmVyXCIpKVxuICAgICAgICBqc29uLnR5cGUgPSBcIm51bWJlclwiO1xuICAgIGlmICh2YWx1ZXMuZXZlcnkoKHYpID0+IHR5cGVvZiB2ID09PSBcInN0cmluZ1wiKSlcbiAgICAgICAganNvbi50eXBlID0gXCJzdHJpbmdcIjtcbiAgICBqc29uLmVudW0gPSB2YWx1ZXM7XG59O1xuZXhwb3J0IGNvbnN0IGxpdGVyYWxQcm9jZXNzb3IgPSAoc2NoZW1hLCBjdHgsIGpzb24sIF9wYXJhbXMpID0+IHtcbiAgICBjb25zdCBkZWYgPSBzY2hlbWEuX3pvZC5kZWY7XG4gICAgY29uc3QgdmFscyA9IFtdO1xuICAgIGZvciAoY29uc3QgdmFsIG9mIGRlZi52YWx1ZXMpIHtcbiAgICAgICAgaWYgKHZhbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZiAoY3R4LnVucmVwcmVzZW50YWJsZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTGl0ZXJhbCBgdW5kZWZpbmVkYCBjYW5ub3QgYmUgcmVwcmVzZW50ZWQgaW4gSlNPTiBTY2hlbWFcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBkbyBub3QgYWRkIHRvIHZhbHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgdmFsID09PSBcImJpZ2ludFwiKSB7XG4gICAgICAgICAgICBpZiAoY3R4LnVucmVwcmVzZW50YWJsZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQmlnSW50IGxpdGVyYWxzIGNhbm5vdCBiZSByZXByZXNlbnRlZCBpbiBKU09OIFNjaGVtYVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhbHMucHVzaChOdW1iZXIodmFsKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YWxzLnB1c2godmFsKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAodmFscy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgLy8gZG8gbm90aGluZyAoYW4gdW5kZWZpbmVkIGxpdGVyYWwgd2FzIHN0cmlwcGVkKVxuICAgIH1cbiAgICBlbHNlIGlmICh2YWxzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBjb25zdCB2YWwgPSB2YWxzWzBdO1xuICAgICAgICBqc29uLnR5cGUgPSB2YWwgPT09IG51bGwgPyBcIm51bGxcIiA6IHR5cGVvZiB2YWw7XG4gICAgICAgIGlmIChjdHgudGFyZ2V0ID09PSBcImRyYWZ0LTA0XCIgfHwgY3R4LnRhcmdldCA9PT0gXCJvcGVuYXBpLTMuMFwiKSB7XG4gICAgICAgICAgICBqc29uLmVudW0gPSBbdmFsXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGpzb24uY29uc3QgPSB2YWw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmICh2YWxzLmV2ZXJ5KCh2KSA9PiB0eXBlb2YgdiA9PT0gXCJudW1iZXJcIikpXG4gICAgICAgICAgICBqc29uLnR5cGUgPSBcIm51bWJlclwiO1xuICAgICAgICBpZiAodmFscy5ldmVyeSgodikgPT4gdHlwZW9mIHYgPT09IFwic3RyaW5nXCIpKVxuICAgICAgICAgICAganNvbi50eXBlID0gXCJzdHJpbmdcIjtcbiAgICAgICAgaWYgKHZhbHMuZXZlcnkoKHYpID0+IHR5cGVvZiB2ID09PSBcImJvb2xlYW5cIikpXG4gICAgICAgICAgICBqc29uLnR5cGUgPSBcImJvb2xlYW5cIjtcbiAgICAgICAgaWYgKHZhbHMuZXZlcnkoKHYpID0+IHYgPT09IG51bGwpKVxuICAgICAgICAgICAganNvbi50eXBlID0gXCJudWxsXCI7XG4gICAgICAgIGpzb24uZW51bSA9IHZhbHM7XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCBuYW5Qcm9jZXNzb3IgPSAoX3NjaGVtYSwgY3R4LCBfanNvbiwgX3BhcmFtcykgPT4ge1xuICAgIGlmIChjdHgudW5yZXByZXNlbnRhYmxlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTmFOIGNhbm5vdCBiZSByZXByZXNlbnRlZCBpbiBKU09OIFNjaGVtYVwiKTtcbiAgICB9XG59O1xuZXhwb3J0IGNvbnN0IHRlbXBsYXRlTGl0ZXJhbFByb2Nlc3NvciA9IChzY2hlbWEsIF9jdHgsIGpzb24sIF9wYXJhbXMpID0+IHtcbiAgICBjb25zdCBfanNvbiA9IGpzb247XG4gICAgY29uc3QgcGF0dGVybiA9IHNjaGVtYS5fem9kLnBhdHRlcm47XG4gICAgaWYgKCFwYXR0ZXJuKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQYXR0ZXJuIG5vdCBmb3VuZCBpbiB0ZW1wbGF0ZSBsaXRlcmFsXCIpO1xuICAgIF9qc29uLnR5cGUgPSBcInN0cmluZ1wiO1xuICAgIF9qc29uLnBhdHRlcm4gPSBwYXR0ZXJuLnNvdXJjZTtcbn07XG5leHBvcnQgY29uc3QgZmlsZVByb2Nlc3NvciA9IChzY2hlbWEsIF9jdHgsIGpzb24sIF9wYXJhbXMpID0+IHtcbiAgICBjb25zdCBfanNvbiA9IGpzb247XG4gICAgY29uc3QgZmlsZSA9IHtcbiAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgZm9ybWF0OiBcImJpbmFyeVwiLFxuICAgICAgICBjb250ZW50RW5jb2Rpbmc6IFwiYmluYXJ5XCIsXG4gICAgfTtcbiAgICBjb25zdCB7IG1pbmltdW0sIG1heGltdW0sIG1pbWUgfSA9IHNjaGVtYS5fem9kLmJhZztcbiAgICBpZiAobWluaW11bSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICBmaWxlLm1pbkxlbmd0aCA9IG1pbmltdW07XG4gICAgaWYgKG1heGltdW0gIT09IHVuZGVmaW5lZClcbiAgICAgICAgZmlsZS5tYXhMZW5ndGggPSBtYXhpbXVtO1xuICAgIGlmIChtaW1lKSB7XG4gICAgICAgIGlmIChtaW1lLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgZmlsZS5jb250ZW50TWVkaWFUeXBlID0gbWltZVswXTtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oX2pzb24sIGZpbGUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihfanNvbiwgZmlsZSk7IC8vIHNoYXJlZCBwcm9wcyBhdCByb290XG4gICAgICAgICAgICBfanNvbi5hbnlPZiA9IG1pbWUubWFwKChtKSA9PiAoeyBjb250ZW50TWVkaWFUeXBlOiBtIH0pKTsgLy8gb25seSBjb250ZW50TWVkaWFUeXBlIGRpZmZlcnNcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgT2JqZWN0LmFzc2lnbihfanNvbiwgZmlsZSk7XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCBzdWNjZXNzUHJvY2Vzc29yID0gKF9zY2hlbWEsIF9jdHgsIGpzb24sIF9wYXJhbXMpID0+IHtcbiAgICBqc29uLnR5cGUgPSBcImJvb2xlYW5cIjtcbn07XG5leHBvcnQgY29uc3QgY3VzdG9tUHJvY2Vzc29yID0gKF9zY2hlbWEsIGN0eCwgX2pzb24sIF9wYXJhbXMpID0+IHtcbiAgICBpZiAoY3R4LnVucmVwcmVzZW50YWJsZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkN1c3RvbSB0eXBlcyBjYW5ub3QgYmUgcmVwcmVzZW50ZWQgaW4gSlNPTiBTY2hlbWFcIik7XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCBmdW5jdGlvblByb2Nlc3NvciA9IChfc2NoZW1hLCBjdHgsIF9qc29uLCBfcGFyYW1zKSA9PiB7XG4gICAgaWYgKGN0eC51bnJlcHJlc2VudGFibGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGdW5jdGlvbiB0eXBlcyBjYW5ub3QgYmUgcmVwcmVzZW50ZWQgaW4gSlNPTiBTY2hlbWFcIik7XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCB0cmFuc2Zvcm1Qcm9jZXNzb3IgPSAoX3NjaGVtYSwgY3R4LCBfanNvbiwgX3BhcmFtcykgPT4ge1xuICAgIGlmIChjdHgudW5yZXByZXNlbnRhYmxlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVHJhbnNmb3JtcyBjYW5ub3QgYmUgcmVwcmVzZW50ZWQgaW4gSlNPTiBTY2hlbWFcIik7XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCBtYXBQcm9jZXNzb3IgPSAoX3NjaGVtYSwgY3R4LCBfanNvbiwgX3BhcmFtcykgPT4ge1xuICAgIGlmIChjdHgudW5yZXByZXNlbnRhYmxlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWFwIGNhbm5vdCBiZSByZXByZXNlbnRlZCBpbiBKU09OIFNjaGVtYVwiKTtcbiAgICB9XG59O1xuZXhwb3J0IGNvbnN0IHNldFByb2Nlc3NvciA9IChfc2NoZW1hLCBjdHgsIF9qc29uLCBfcGFyYW1zKSA9PiB7XG4gICAgaWYgKGN0eC51bnJlcHJlc2VudGFibGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTZXQgY2Fubm90IGJlIHJlcHJlc2VudGVkIGluIEpTT04gU2NoZW1hXCIpO1xuICAgIH1cbn07XG4vLyA9PT09PT09PT09PT09PT09PT09PSBDT01QT1NJVEUgVFlQRSBQUk9DRVNTT1JTID09PT09PT09PT09PT09PT09PT09XG5leHBvcnQgY29uc3QgYXJyYXlQcm9jZXNzb3IgPSAoc2NoZW1hLCBjdHgsIF9qc29uLCBwYXJhbXMpID0+IHtcbiAgICBjb25zdCBqc29uID0gX2pzb247XG4gICAgY29uc3QgZGVmID0gc2NoZW1hLl96b2QuZGVmO1xuICAgIGNvbnN0IHsgbWluaW11bSwgbWF4aW11bSB9ID0gc2NoZW1hLl96b2QuYmFnO1xuICAgIGlmICh0eXBlb2YgbWluaW11bSA9PT0gXCJudW1iZXJcIilcbiAgICAgICAganNvbi5taW5JdGVtcyA9IG1pbmltdW07XG4gICAgaWYgKHR5cGVvZiBtYXhpbXVtID09PSBcIm51bWJlclwiKVxuICAgICAgICBqc29uLm1heEl0ZW1zID0gbWF4aW11bTtcbiAgICBqc29uLnR5cGUgPSBcImFycmF5XCI7XG4gICAganNvbi5pdGVtcyA9IHByb2Nlc3MoZGVmLmVsZW1lbnQsIGN0eCwgeyAuLi5wYXJhbXMsIHBhdGg6IFsuLi5wYXJhbXMucGF0aCwgXCJpdGVtc1wiXSB9KTtcbn07XG5leHBvcnQgY29uc3Qgb2JqZWN0UHJvY2Vzc29yID0gKHNjaGVtYSwgY3R4LCBfanNvbiwgcGFyYW1zKSA9PiB7XG4gICAgY29uc3QganNvbiA9IF9qc29uO1xuICAgIGNvbnN0IGRlZiA9IHNjaGVtYS5fem9kLmRlZjtcbiAgICBqc29uLnR5cGUgPSBcIm9iamVjdFwiO1xuICAgIGpzb24ucHJvcGVydGllcyA9IHt9O1xuICAgIGNvbnN0IHNoYXBlID0gZGVmLnNoYXBlO1xuICAgIGZvciAoY29uc3Qga2V5IGluIHNoYXBlKSB7XG4gICAgICAgIGpzb24ucHJvcGVydGllc1trZXldID0gcHJvY2VzcyhzaGFwZVtrZXldLCBjdHgsIHtcbiAgICAgICAgICAgIC4uLnBhcmFtcyxcbiAgICAgICAgICAgIHBhdGg6IFsuLi5wYXJhbXMucGF0aCwgXCJwcm9wZXJ0aWVzXCIsIGtleV0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyByZXF1aXJlZCBrZXlzXG4gICAgY29uc3QgYWxsS2V5cyA9IG5ldyBTZXQoT2JqZWN0LmtleXMoc2hhcGUpKTtcbiAgICBjb25zdCByZXF1aXJlZEtleXMgPSBuZXcgU2V0KFsuLi5hbGxLZXlzXS5maWx0ZXIoKGtleSkgPT4ge1xuICAgICAgICBjb25zdCB2ID0gZGVmLnNoYXBlW2tleV0uX3pvZDtcbiAgICAgICAgaWYgKGN0eC5pbyA9PT0gXCJpbnB1dFwiKSB7XG4gICAgICAgICAgICByZXR1cm4gdi5vcHRpbiA9PT0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHYub3B0b3V0ID09PSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9KSk7XG4gICAgaWYgKHJlcXVpcmVkS2V5cy5zaXplID4gMCkge1xuICAgICAgICBqc29uLnJlcXVpcmVkID0gQXJyYXkuZnJvbShyZXF1aXJlZEtleXMpO1xuICAgIH1cbiAgICAvLyBjYXRjaGFsbFxuICAgIGlmIChkZWYuY2F0Y2hhbGw/Ll96b2QuZGVmLnR5cGUgPT09IFwibmV2ZXJcIikge1xuICAgICAgICAvLyBzdHJpY3RcbiAgICAgICAganNvbi5hZGRpdGlvbmFsUHJvcGVydGllcyA9IGZhbHNlO1xuICAgIH1cbiAgICBlbHNlIGlmICghZGVmLmNhdGNoYWxsKSB7XG4gICAgICAgIC8vIHJlZ3VsYXJcbiAgICAgICAgaWYgKGN0eC5pbyA9PT0gXCJvdXRwdXRcIilcbiAgICAgICAgICAgIGpzb24uYWRkaXRpb25hbFByb3BlcnRpZXMgPSBmYWxzZTtcbiAgICB9XG4gICAgZWxzZSBpZiAoZGVmLmNhdGNoYWxsKSB7XG4gICAgICAgIGpzb24uYWRkaXRpb25hbFByb3BlcnRpZXMgPSBwcm9jZXNzKGRlZi5jYXRjaGFsbCwgY3R4LCB7XG4gICAgICAgICAgICAuLi5wYXJhbXMsXG4gICAgICAgICAgICBwYXRoOiBbLi4ucGFyYW1zLnBhdGgsIFwiYWRkaXRpb25hbFByb3BlcnRpZXNcIl0sXG4gICAgICAgIH0pO1xuICAgIH1cbn07XG5leHBvcnQgY29uc3QgdW5pb25Qcm9jZXNzb3IgPSAoc2NoZW1hLCBjdHgsIGpzb24sIHBhcmFtcykgPT4ge1xuICAgIGNvbnN0IGRlZiA9IHNjaGVtYS5fem9kLmRlZjtcbiAgICAvLyBFeGNsdXNpdmUgdW5pb25zIChpbmNsdXNpdmUgPT09IGZhbHNlKSB1c2Ugb25lT2YgKGV4YWN0bHkgb25lIG1hdGNoKSBpbnN0ZWFkIG9mIGFueU9mIChvbmUgb3IgbW9yZSBtYXRjaGVzKVxuICAgIC8vIFRoaXMgaW5jbHVkZXMgYm90aCB6LnhvcigpIGFuZCBkaXNjcmltaW5hdGVkIHVuaW9uc1xuICAgIGNvbnN0IGlzRXhjbHVzaXZlID0gZGVmLmluY2x1c2l2ZSA9PT0gZmFsc2U7XG4gICAgY29uc3Qgb3B0aW9ucyA9IGRlZi5vcHRpb25zLm1hcCgoeCwgaSkgPT4gcHJvY2Vzcyh4LCBjdHgsIHtcbiAgICAgICAgLi4ucGFyYW1zLFxuICAgICAgICBwYXRoOiBbLi4ucGFyYW1zLnBhdGgsIGlzRXhjbHVzaXZlID8gXCJvbmVPZlwiIDogXCJhbnlPZlwiLCBpXSxcbiAgICB9KSk7XG4gICAgaWYgKGlzRXhjbHVzaXZlKSB7XG4gICAgICAgIGpzb24ub25lT2YgPSBvcHRpb25zO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAganNvbi5hbnlPZiA9IG9wdGlvbnM7XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCBpbnRlcnNlY3Rpb25Qcm9jZXNzb3IgPSAoc2NoZW1hLCBjdHgsIGpzb24sIHBhcmFtcykgPT4ge1xuICAgIGNvbnN0IGRlZiA9IHNjaGVtYS5fem9kLmRlZjtcbiAgICBjb25zdCBhID0gcHJvY2VzcyhkZWYubGVmdCwgY3R4LCB7XG4gICAgICAgIC4uLnBhcmFtcyxcbiAgICAgICAgcGF0aDogWy4uLnBhcmFtcy5wYXRoLCBcImFsbE9mXCIsIDBdLFxuICAgIH0pO1xuICAgIGNvbnN0IGIgPSBwcm9jZXNzKGRlZi5yaWdodCwgY3R4LCB7XG4gICAgICAgIC4uLnBhcmFtcyxcbiAgICAgICAgcGF0aDogWy4uLnBhcmFtcy5wYXRoLCBcImFsbE9mXCIsIDFdLFxuICAgIH0pO1xuICAgIGNvbnN0IGlzU2ltcGxlSW50ZXJzZWN0aW9uID0gKHZhbCkgPT4gXCJhbGxPZlwiIGluIHZhbCAmJiBPYmplY3Qua2V5cyh2YWwpLmxlbmd0aCA9PT0gMTtcbiAgICBjb25zdCBhbGxPZiA9IFtcbiAgICAgICAgLi4uKGlzU2ltcGxlSW50ZXJzZWN0aW9uKGEpID8gYS5hbGxPZiA6IFthXSksXG4gICAgICAgIC4uLihpc1NpbXBsZUludGVyc2VjdGlvbihiKSA/IGIuYWxsT2YgOiBbYl0pLFxuICAgIF07XG4gICAganNvbi5hbGxPZiA9IGFsbE9mO1xufTtcbmV4cG9ydCBjb25zdCB0dXBsZVByb2Nlc3NvciA9IChzY2hlbWEsIGN0eCwgX2pzb24sIHBhcmFtcykgPT4ge1xuICAgIGNvbnN0IGpzb24gPSBfanNvbjtcbiAgICBjb25zdCBkZWYgPSBzY2hlbWEuX3pvZC5kZWY7XG4gICAganNvbi50eXBlID0gXCJhcnJheVwiO1xuICAgIGNvbnN0IHByZWZpeFBhdGggPSBjdHgudGFyZ2V0ID09PSBcImRyYWZ0LTIwMjAtMTJcIiA/IFwicHJlZml4SXRlbXNcIiA6IFwiaXRlbXNcIjtcbiAgICBjb25zdCByZXN0UGF0aCA9IGN0eC50YXJnZXQgPT09IFwiZHJhZnQtMjAyMC0xMlwiID8gXCJpdGVtc1wiIDogY3R4LnRhcmdldCA9PT0gXCJvcGVuYXBpLTMuMFwiID8gXCJpdGVtc1wiIDogXCJhZGRpdGlvbmFsSXRlbXNcIjtcbiAgICBjb25zdCBwcmVmaXhJdGVtcyA9IGRlZi5pdGVtcy5tYXAoKHgsIGkpID0+IHByb2Nlc3MoeCwgY3R4LCB7XG4gICAgICAgIC4uLnBhcmFtcyxcbiAgICAgICAgcGF0aDogWy4uLnBhcmFtcy5wYXRoLCBwcmVmaXhQYXRoLCBpXSxcbiAgICB9KSk7XG4gICAgY29uc3QgcmVzdCA9IGRlZi5yZXN0XG4gICAgICAgID8gcHJvY2VzcyhkZWYucmVzdCwgY3R4LCB7XG4gICAgICAgICAgICAuLi5wYXJhbXMsXG4gICAgICAgICAgICBwYXRoOiBbLi4ucGFyYW1zLnBhdGgsIHJlc3RQYXRoLCAuLi4oY3R4LnRhcmdldCA9PT0gXCJvcGVuYXBpLTMuMFwiID8gW2RlZi5pdGVtcy5sZW5ndGhdIDogW10pXSxcbiAgICAgICAgfSlcbiAgICAgICAgOiBudWxsO1xuICAgIGlmIChjdHgudGFyZ2V0ID09PSBcImRyYWZ0LTIwMjAtMTJcIikge1xuICAgICAgICBqc29uLnByZWZpeEl0ZW1zID0gcHJlZml4SXRlbXM7XG4gICAgICAgIGlmIChyZXN0KSB7XG4gICAgICAgICAgICBqc29uLml0ZW1zID0gcmVzdDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChjdHgudGFyZ2V0ID09PSBcIm9wZW5hcGktMy4wXCIpIHtcbiAgICAgICAganNvbi5pdGVtcyA9IHtcbiAgICAgICAgICAgIGFueU9mOiBwcmVmaXhJdGVtcyxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHJlc3QpIHtcbiAgICAgICAgICAgIGpzb24uaXRlbXMuYW55T2YucHVzaChyZXN0KTtcbiAgICAgICAgfVxuICAgICAgICBqc29uLm1pbkl0ZW1zID0gcHJlZml4SXRlbXMubGVuZ3RoO1xuICAgICAgICBpZiAoIXJlc3QpIHtcbiAgICAgICAgICAgIGpzb24ubWF4SXRlbXMgPSBwcmVmaXhJdGVtcy5sZW5ndGg7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGpzb24uaXRlbXMgPSBwcmVmaXhJdGVtcztcbiAgICAgICAgaWYgKHJlc3QpIHtcbiAgICAgICAgICAgIGpzb24uYWRkaXRpb25hbEl0ZW1zID0gcmVzdDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBsZW5ndGhcbiAgICBjb25zdCB7IG1pbmltdW0sIG1heGltdW0gfSA9IHNjaGVtYS5fem9kLmJhZztcbiAgICBpZiAodHlwZW9mIG1pbmltdW0gPT09IFwibnVtYmVyXCIpXG4gICAgICAgIGpzb24ubWluSXRlbXMgPSBtaW5pbXVtO1xuICAgIGlmICh0eXBlb2YgbWF4aW11bSA9PT0gXCJudW1iZXJcIilcbiAgICAgICAganNvbi5tYXhJdGVtcyA9IG1heGltdW07XG59O1xuZXhwb3J0IGNvbnN0IHJlY29yZFByb2Nlc3NvciA9IChzY2hlbWEsIGN0eCwgX2pzb24sIHBhcmFtcykgPT4ge1xuICAgIGNvbnN0IGpzb24gPSBfanNvbjtcbiAgICBjb25zdCBkZWYgPSBzY2hlbWEuX3pvZC5kZWY7XG4gICAganNvbi50eXBlID0gXCJvYmplY3RcIjtcbiAgICAvLyBGb3IgbG9vc2VSZWNvcmQgd2l0aCByZWdleCBwYXR0ZXJucywgdXNlIHBhdHRlcm5Qcm9wZXJ0aWVzXG4gICAgLy8gVGhpcyBjb3JyZWN0bHkgcmVwcmVzZW50cyBcIm9ubHkgdmFsaWRhdGUga2V5cyBtYXRjaGluZyB0aGUgcGF0dGVyblwiIHNlbWFudGljc1xuICAgIC8vIGFuZCBjb21wb3NlcyB3ZWxsIHdpdGggYWxsT2YgKGludGVyc2VjdGlvbnMpXG4gICAgY29uc3Qga2V5VHlwZSA9IGRlZi5rZXlUeXBlO1xuICAgIGNvbnN0IGtleUJhZyA9IGtleVR5cGUuX3pvZC5iYWc7XG4gICAgY29uc3QgcGF0dGVybnMgPSBrZXlCYWc/LnBhdHRlcm5zO1xuICAgIGlmIChkZWYubW9kZSA9PT0gXCJsb29zZVwiICYmIHBhdHRlcm5zICYmIHBhdHRlcm5zLnNpemUgPiAwKSB7XG4gICAgICAgIC8vIFVzZSBwYXR0ZXJuUHJvcGVydGllcyBmb3IgbG9vc2VSZWNvcmQgd2l0aCByZWdleCBwYXR0ZXJuc1xuICAgICAgICBjb25zdCB2YWx1ZVNjaGVtYSA9IHByb2Nlc3MoZGVmLnZhbHVlVHlwZSwgY3R4LCB7XG4gICAgICAgICAgICAuLi5wYXJhbXMsXG4gICAgICAgICAgICBwYXRoOiBbLi4ucGFyYW1zLnBhdGgsIFwicGF0dGVyblByb3BlcnRpZXNcIiwgXCIqXCJdLFxuICAgICAgICB9KTtcbiAgICAgICAganNvbi5wYXR0ZXJuUHJvcGVydGllcyA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IHBhdHRlcm4gb2YgcGF0dGVybnMpIHtcbiAgICAgICAgICAgIGpzb24ucGF0dGVyblByb3BlcnRpZXNbcGF0dGVybi5zb3VyY2VdID0gdmFsdWVTY2hlbWE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIERlZmF1bHQgYmVoYXZpb3I6IHVzZSBwcm9wZXJ0eU5hbWVzICsgYWRkaXRpb25hbFByb3BlcnRpZXNcbiAgICAgICAgaWYgKGN0eC50YXJnZXQgPT09IFwiZHJhZnQtMDdcIiB8fCBjdHgudGFyZ2V0ID09PSBcImRyYWZ0LTIwMjAtMTJcIikge1xuICAgICAgICAgICAganNvbi5wcm9wZXJ0eU5hbWVzID0gcHJvY2VzcyhkZWYua2V5VHlwZSwgY3R4LCB7XG4gICAgICAgICAgICAgICAgLi4ucGFyYW1zLFxuICAgICAgICAgICAgICAgIHBhdGg6IFsuLi5wYXJhbXMucGF0aCwgXCJwcm9wZXJ0eU5hbWVzXCJdLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAganNvbi5hZGRpdGlvbmFsUHJvcGVydGllcyA9IHByb2Nlc3MoZGVmLnZhbHVlVHlwZSwgY3R4LCB7XG4gICAgICAgICAgICAuLi5wYXJhbXMsXG4gICAgICAgICAgICBwYXRoOiBbLi4ucGFyYW1zLnBhdGgsIFwiYWRkaXRpb25hbFByb3BlcnRpZXNcIl0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBBZGQgcmVxdWlyZWQgZm9yIGtleXMgd2l0aCBkaXNjcmV0ZSB2YWx1ZXMgKGVudW0sIGxpdGVyYWwsIGV0Yy4pXG4gICAgY29uc3Qga2V5VmFsdWVzID0ga2V5VHlwZS5fem9kLnZhbHVlcztcbiAgICBpZiAoa2V5VmFsdWVzKSB7XG4gICAgICAgIGNvbnN0IHZhbGlkS2V5VmFsdWVzID0gWy4uLmtleVZhbHVlc10uZmlsdGVyKCh2KSA9PiB0eXBlb2YgdiA9PT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgdiA9PT0gXCJudW1iZXJcIik7XG4gICAgICAgIGlmICh2YWxpZEtleVZhbHVlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBqc29uLnJlcXVpcmVkID0gdmFsaWRLZXlWYWx1ZXM7XG4gICAgICAgIH1cbiAgICB9XG59O1xuZXhwb3J0IGNvbnN0IG51bGxhYmxlUHJvY2Vzc29yID0gKHNjaGVtYSwgY3R4LCBqc29uLCBwYXJhbXMpID0+IHtcbiAgICBjb25zdCBkZWYgPSBzY2hlbWEuX3pvZC5kZWY7XG4gICAgY29uc3QgaW5uZXIgPSBwcm9jZXNzKGRlZi5pbm5lclR5cGUsIGN0eCwgcGFyYW1zKTtcbiAgICBjb25zdCBzZWVuID0gY3R4LnNlZW4uZ2V0KHNjaGVtYSk7XG4gICAgaWYgKGN0eC50YXJnZXQgPT09IFwib3BlbmFwaS0zLjBcIikge1xuICAgICAgICBzZWVuLnJlZiA9IGRlZi5pbm5lclR5cGU7XG4gICAgICAgIGpzb24ubnVsbGFibGUgPSB0cnVlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAganNvbi5hbnlPZiA9IFtpbm5lciwgeyB0eXBlOiBcIm51bGxcIiB9XTtcbiAgICB9XG59O1xuZXhwb3J0IGNvbnN0IG5vbm9wdGlvbmFsUHJvY2Vzc29yID0gKHNjaGVtYSwgY3R4LCBfanNvbiwgcGFyYW1zKSA9PiB7XG4gICAgY29uc3QgZGVmID0gc2NoZW1hLl96b2QuZGVmO1xuICAgIHByb2Nlc3MoZGVmLmlubmVyVHlwZSwgY3R4LCBwYXJhbXMpO1xuICAgIGNvbnN0IHNlZW4gPSBjdHguc2Vlbi5nZXQoc2NoZW1hKTtcbiAgICBzZWVuLnJlZiA9IGRlZi5pbm5lclR5cGU7XG59O1xuZXhwb3J0IGNvbnN0IGRlZmF1bHRQcm9jZXNzb3IgPSAoc2NoZW1hLCBjdHgsIGpzb24sIHBhcmFtcykgPT4ge1xuICAgIGNvbnN0IGRlZiA9IHNjaGVtYS5fem9kLmRlZjtcbiAgICBwcm9jZXNzKGRlZi5pbm5lclR5cGUsIGN0eCwgcGFyYW1zKTtcbiAgICBjb25zdCBzZWVuID0gY3R4LnNlZW4uZ2V0KHNjaGVtYSk7XG4gICAgc2Vlbi5yZWYgPSBkZWYuaW5uZXJUeXBlO1xuICAgIGpzb24uZGVmYXVsdCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZGVmLmRlZmF1bHRWYWx1ZSkpO1xufTtcbmV4cG9ydCBjb25zdCBwcmVmYXVsdFByb2Nlc3NvciA9IChzY2hlbWEsIGN0eCwganNvbiwgcGFyYW1zKSA9PiB7XG4gICAgY29uc3QgZGVmID0gc2NoZW1hLl96b2QuZGVmO1xuICAgIHByb2Nlc3MoZGVmLmlubmVyVHlwZSwgY3R4LCBwYXJhbXMpO1xuICAgIGNvbnN0IHNlZW4gPSBjdHguc2Vlbi5nZXQoc2NoZW1hKTtcbiAgICBzZWVuLnJlZiA9IGRlZi5pbm5lclR5cGU7XG4gICAgaWYgKGN0eC5pbyA9PT0gXCJpbnB1dFwiKVxuICAgICAgICBqc29uLl9wcmVmYXVsdCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZGVmLmRlZmF1bHRWYWx1ZSkpO1xufTtcbmV4cG9ydCBjb25zdCBjYXRjaFByb2Nlc3NvciA9IChzY2hlbWEsIGN0eCwganNvbiwgcGFyYW1zKSA9PiB7XG4gICAgY29uc3QgZGVmID0gc2NoZW1hLl96b2QuZGVmO1xuICAgIHByb2Nlc3MoZGVmLmlubmVyVHlwZSwgY3R4LCBwYXJhbXMpO1xuICAgIGNvbnN0IHNlZW4gPSBjdHguc2Vlbi5nZXQoc2NoZW1hKTtcbiAgICBzZWVuLnJlZiA9IGRlZi5pbm5lclR5cGU7XG4gICAgbGV0IGNhdGNoVmFsdWU7XG4gICAgdHJ5IHtcbiAgICAgICAgY2F0Y2hWYWx1ZSA9IGRlZi5jYXRjaFZhbHVlKHVuZGVmaW5lZCk7XG4gICAgfVxuICAgIGNhdGNoIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRHluYW1pYyBjYXRjaCB2YWx1ZXMgYXJlIG5vdCBzdXBwb3J0ZWQgaW4gSlNPTiBTY2hlbWFcIik7XG4gICAgfVxuICAgIGpzb24uZGVmYXVsdCA9IGNhdGNoVmFsdWU7XG59O1xuZXhwb3J0IGNvbnN0IHBpcGVQcm9jZXNzb3IgPSAoc2NoZW1hLCBjdHgsIF9qc29uLCBwYXJhbXMpID0+IHtcbiAgICBjb25zdCBkZWYgPSBzY2hlbWEuX3pvZC5kZWY7XG4gICAgY29uc3QgaW5uZXJUeXBlID0gY3R4LmlvID09PSBcImlucHV0XCIgPyAoZGVmLmluLl96b2QuZGVmLnR5cGUgPT09IFwidHJhbnNmb3JtXCIgPyBkZWYub3V0IDogZGVmLmluKSA6IGRlZi5vdXQ7XG4gICAgcHJvY2Vzcyhpbm5lclR5cGUsIGN0eCwgcGFyYW1zKTtcbiAgICBjb25zdCBzZWVuID0gY3R4LnNlZW4uZ2V0KHNjaGVtYSk7XG4gICAgc2Vlbi5yZWYgPSBpbm5lclR5cGU7XG59O1xuZXhwb3J0IGNvbnN0IHJlYWRvbmx5UHJvY2Vzc29yID0gKHNjaGVtYSwgY3R4LCBqc29uLCBwYXJhbXMpID0+IHtcbiAgICBjb25zdCBkZWYgPSBzY2hlbWEuX3pvZC5kZWY7XG4gICAgcHJvY2VzcyhkZWYuaW5uZXJUeXBlLCBjdHgsIHBhcmFtcyk7XG4gICAgY29uc3Qgc2VlbiA9IGN0eC5zZWVuLmdldChzY2hlbWEpO1xuICAgIHNlZW4ucmVmID0gZGVmLmlubmVyVHlwZTtcbiAgICBqc29uLnJlYWRPbmx5ID0gdHJ1ZTtcbn07XG5leHBvcnQgY29uc3QgcHJvbWlzZVByb2Nlc3NvciA9IChzY2hlbWEsIGN0eCwgX2pzb24sIHBhcmFtcykgPT4ge1xuICAgIGNvbnN0IGRlZiA9IHNjaGVtYS5fem9kLmRlZjtcbiAgICBwcm9jZXNzKGRlZi5pbm5lclR5cGUsIGN0eCwgcGFyYW1zKTtcbiAgICBjb25zdCBzZWVuID0gY3R4LnNlZW4uZ2V0KHNjaGVtYSk7XG4gICAgc2Vlbi5yZWYgPSBkZWYuaW5uZXJUeXBlO1xufTtcbmV4cG9ydCBjb25zdCBvcHRpb25hbFByb2Nlc3NvciA9IChzY2hlbWEsIGN0eCwgX2pzb24sIHBhcmFtcykgPT4ge1xuICAgIGNvbnN0IGRlZiA9IHNjaGVtYS5fem9kLmRlZjtcbiAgICBwcm9jZXNzKGRlZi5pbm5lclR5cGUsIGN0eCwgcGFyYW1zKTtcbiAgICBjb25zdCBzZWVuID0gY3R4LnNlZW4uZ2V0KHNjaGVtYSk7XG4gICAgc2Vlbi5yZWYgPSBkZWYuaW5uZXJUeXBlO1xufTtcbmV4cG9ydCBjb25zdCBsYXp5UHJvY2Vzc29yID0gKHNjaGVtYSwgY3R4LCBfanNvbiwgcGFyYW1zKSA9PiB7XG4gICAgY29uc3QgaW5uZXJUeXBlID0gc2NoZW1hLl96b2QuaW5uZXJUeXBlO1xuICAgIHByb2Nlc3MoaW5uZXJUeXBlLCBjdHgsIHBhcmFtcyk7XG4gICAgY29uc3Qgc2VlbiA9IGN0eC5zZWVuLmdldChzY2hlbWEpO1xuICAgIHNlZW4ucmVmID0gaW5uZXJUeXBlO1xufTtcbi8vID09PT09PT09PT09PT09PT09PT09IEFMTCBQUk9DRVNTT1JTID09PT09PT09PT09PT09PT09PT09XG5leHBvcnQgY29uc3QgYWxsUHJvY2Vzc29ycyA9IHtcbiAgICBzdHJpbmc6IHN0cmluZ1Byb2Nlc3NvcixcbiAgICBudW1iZXI6IG51bWJlclByb2Nlc3NvcixcbiAgICBib29sZWFuOiBib29sZWFuUHJvY2Vzc29yLFxuICAgIGJpZ2ludDogYmlnaW50UHJvY2Vzc29yLFxuICAgIHN5bWJvbDogc3ltYm9sUHJvY2Vzc29yLFxuICAgIG51bGw6IG51bGxQcm9jZXNzb3IsXG4gICAgdW5kZWZpbmVkOiB1bmRlZmluZWRQcm9jZXNzb3IsXG4gICAgdm9pZDogdm9pZFByb2Nlc3NvcixcbiAgICBuZXZlcjogbmV2ZXJQcm9jZXNzb3IsXG4gICAgYW55OiBhbnlQcm9jZXNzb3IsXG4gICAgdW5rbm93bjogdW5rbm93blByb2Nlc3NvcixcbiAgICBkYXRlOiBkYXRlUHJvY2Vzc29yLFxuICAgIGVudW06IGVudW1Qcm9jZXNzb3IsXG4gICAgbGl0ZXJhbDogbGl0ZXJhbFByb2Nlc3NvcixcbiAgICBuYW46IG5hblByb2Nlc3NvcixcbiAgICB0ZW1wbGF0ZV9saXRlcmFsOiB0ZW1wbGF0ZUxpdGVyYWxQcm9jZXNzb3IsXG4gICAgZmlsZTogZmlsZVByb2Nlc3NvcixcbiAgICBzdWNjZXNzOiBzdWNjZXNzUHJvY2Vzc29yLFxuICAgIGN1c3RvbTogY3VzdG9tUHJvY2Vzc29yLFxuICAgIGZ1bmN0aW9uOiBmdW5jdGlvblByb2Nlc3NvcixcbiAgICB0cmFuc2Zvcm06IHRyYW5zZm9ybVByb2Nlc3NvcixcbiAgICBtYXA6IG1hcFByb2Nlc3NvcixcbiAgICBzZXQ6IHNldFByb2Nlc3NvcixcbiAgICBhcnJheTogYXJyYXlQcm9jZXNzb3IsXG4gICAgb2JqZWN0OiBvYmplY3RQcm9jZXNzb3IsXG4gICAgdW5pb246IHVuaW9uUHJvY2Vzc29yLFxuICAgIGludGVyc2VjdGlvbjogaW50ZXJzZWN0aW9uUHJvY2Vzc29yLFxuICAgIHR1cGxlOiB0dXBsZVByb2Nlc3NvcixcbiAgICByZWNvcmQ6IHJlY29yZFByb2Nlc3NvcixcbiAgICBudWxsYWJsZTogbnVsbGFibGVQcm9jZXNzb3IsXG4gICAgbm9ub3B0aW9uYWw6IG5vbm9wdGlvbmFsUHJvY2Vzc29yLFxuICAgIGRlZmF1bHQ6IGRlZmF1bHRQcm9jZXNzb3IsXG4gICAgcHJlZmF1bHQ6IHByZWZhdWx0UHJvY2Vzc29yLFxuICAgIGNhdGNoOiBjYXRjaFByb2Nlc3NvcixcbiAgICBwaXBlOiBwaXBlUHJvY2Vzc29yLFxuICAgIHJlYWRvbmx5OiByZWFkb25seVByb2Nlc3NvcixcbiAgICBwcm9taXNlOiBwcm9taXNlUHJvY2Vzc29yLFxuICAgIG9wdGlvbmFsOiBvcHRpb25hbFByb2Nlc3NvcixcbiAgICBsYXp5OiBsYXp5UHJvY2Vzc29yLFxufTtcbmV4cG9ydCBmdW5jdGlvbiB0b0pTT05TY2hlbWEoaW5wdXQsIHBhcmFtcykge1xuICAgIGlmIChcIl9pZG1hcFwiIGluIGlucHV0KSB7XG4gICAgICAgIC8vIFJlZ2lzdHJ5IGNhc2VcbiAgICAgICAgY29uc3QgcmVnaXN0cnkgPSBpbnB1dDtcbiAgICAgICAgY29uc3QgY3R4ID0gaW5pdGlhbGl6ZUNvbnRleHQoeyAuLi5wYXJhbXMsIHByb2Nlc3NvcnM6IGFsbFByb2Nlc3NvcnMgfSk7XG4gICAgICAgIGNvbnN0IGRlZnMgPSB7fTtcbiAgICAgICAgLy8gRmlyc3QgcGFzczogcHJvY2VzcyBhbGwgc2NoZW1hcyB0byBidWlsZCB0aGUgc2VlbiBtYXBcbiAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiByZWdpc3RyeS5faWRtYXAuZW50cmllcygpKSB7XG4gICAgICAgICAgICBjb25zdCBbXywgc2NoZW1hXSA9IGVudHJ5O1xuICAgICAgICAgICAgcHJvY2VzcyhzY2hlbWEsIGN0eCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2NoZW1hcyA9IHt9O1xuICAgICAgICBjb25zdCBleHRlcm5hbCA9IHtcbiAgICAgICAgICAgIHJlZ2lzdHJ5LFxuICAgICAgICAgICAgdXJpOiBwYXJhbXM/LnVyaSxcbiAgICAgICAgICAgIGRlZnMsXG4gICAgICAgIH07XG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgY29udGV4dCB3aXRoIGV4dGVybmFsIGNvbmZpZ3VyYXRpb25cbiAgICAgICAgY3R4LmV4dGVybmFsID0gZXh0ZXJuYWw7XG4gICAgICAgIC8vIFNlY29uZCBwYXNzOiBlbWl0IGVhY2ggc2NoZW1hXG4gICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgcmVnaXN0cnkuX2lkbWFwLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgY29uc3QgW2tleSwgc2NoZW1hXSA9IGVudHJ5O1xuICAgICAgICAgICAgZXh0cmFjdERlZnMoY3R4LCBzY2hlbWEpO1xuICAgICAgICAgICAgc2NoZW1hc1trZXldID0gZmluYWxpemUoY3R4LCBzY2hlbWEpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChPYmplY3Qua2V5cyhkZWZzKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBkZWZzU2VnbWVudCA9IGN0eC50YXJnZXQgPT09IFwiZHJhZnQtMjAyMC0xMlwiID8gXCIkZGVmc1wiIDogXCJkZWZpbml0aW9uc1wiO1xuICAgICAgICAgICAgc2NoZW1hcy5fX3NoYXJlZCA9IHtcbiAgICAgICAgICAgICAgICBbZGVmc1NlZ21lbnRdOiBkZWZzLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzY2hlbWFzIH07XG4gICAgfVxuICAgIC8vIFNpbmdsZSBzY2hlbWEgY2FzZVxuICAgIGNvbnN0IGN0eCA9IGluaXRpYWxpemVDb250ZXh0KHsgLi4ucGFyYW1zLCBwcm9jZXNzb3JzOiBhbGxQcm9jZXNzb3JzIH0pO1xuICAgIHByb2Nlc3MoaW5wdXQsIGN0eCk7XG4gICAgZXh0cmFjdERlZnMoY3R4LCBpbnB1dCk7XG4gICAgcmV0dXJuIGZpbmFsaXplKGN0eCwgaW5wdXQpO1xufVxuIiwiaW1wb3J0IHsgQ29udGVudEZpbHRlckZpbmlzaFJlYXNvbkVycm9yLCBMZW5ndGhGaW5pc2hSZWFzb25FcnJvciwgT3BlbkFJRXJyb3IgfSBmcm9tIFwiLi4vZXJyb3IubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gaXNDaGF0Q29tcGxldGlvbkZ1bmN0aW9uVG9vbCh0b29sKSB7XG4gICAgcmV0dXJuIHRvb2wgIT09IHVuZGVmaW5lZCAmJiAnZnVuY3Rpb24nIGluIHRvb2wgJiYgdG9vbC5mdW5jdGlvbiAhPT0gdW5kZWZpbmVkO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VQYXJzZWFibGVSZXNwb25zZUZvcm1hdChyZXNwb25zZV9mb3JtYXQsIHBhcnNlcikge1xuICAgIGNvbnN0IG9iaiA9IHsgLi4ucmVzcG9uc2VfZm9ybWF0IH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMob2JqLCB7XG4gICAgICAgICRicmFuZDoge1xuICAgICAgICAgICAgdmFsdWU6ICdhdXRvLXBhcnNlYWJsZS1yZXNwb25zZS1mb3JtYXQnLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICAgICRwYXJzZVJhdzoge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlcixcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiBvYmo7XG59XG5leHBvcnQgZnVuY3Rpb24gbWFrZVBhcnNlYWJsZVRleHRGb3JtYXQocmVzcG9uc2VfZm9ybWF0LCBwYXJzZXIpIHtcbiAgICBjb25zdCBvYmogPSB7IC4uLnJlc3BvbnNlX2Zvcm1hdCB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKG9iaiwge1xuICAgICAgICAkYnJhbmQ6IHtcbiAgICAgICAgICAgIHZhbHVlOiAnYXV0by1wYXJzZWFibGUtcmVzcG9uc2UtZm9ybWF0JyxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgICAkcGFyc2VSYXc6IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZXIsXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICByZXR1cm4gb2JqO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzQXV0b1BhcnNhYmxlUmVzcG9uc2VGb3JtYXQocmVzcG9uc2VfZm9ybWF0KSB7XG4gICAgcmV0dXJuIHJlc3BvbnNlX2Zvcm1hdD8uWyckYnJhbmQnXSA9PT0gJ2F1dG8tcGFyc2VhYmxlLXJlc3BvbnNlLWZvcm1hdCc7XG59XG5leHBvcnQgZnVuY3Rpb24gbWFrZVBhcnNlYWJsZVRvb2wodG9vbCwgeyBwYXJzZXIsIGNhbGxiYWNrLCB9KSB7XG4gICAgY29uc3Qgb2JqID0geyAuLi50b29sIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMob2JqLCB7XG4gICAgICAgICRicmFuZDoge1xuICAgICAgICAgICAgdmFsdWU6ICdhdXRvLXBhcnNlYWJsZS10b29sJyxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgICAkcGFyc2VSYXc6IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZXIsXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgICAgJGNhbGxiYWNrOiB7XG4gICAgICAgICAgICB2YWx1ZTogY2FsbGJhY2ssXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICByZXR1cm4gb2JqO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzQXV0b1BhcnNhYmxlVG9vbCh0b29sKSB7XG4gICAgcmV0dXJuIHRvb2w/LlsnJGJyYW5kJ10gPT09ICdhdXRvLXBhcnNlYWJsZS10b29sJztcbn1cbmV4cG9ydCBmdW5jdGlvbiBtYXliZVBhcnNlQ2hhdENvbXBsZXRpb24oY29tcGxldGlvbiwgcGFyYW1zKSB7XG4gICAgaWYgKCFwYXJhbXMgfHwgIWhhc0F1dG9QYXJzZWFibGVJbnB1dChwYXJhbXMpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5jb21wbGV0aW9uLFxuICAgICAgICAgICAgY2hvaWNlczogY29tcGxldGlvbi5jaG9pY2VzLm1hcCgoY2hvaWNlKSA9PiB7XG4gICAgICAgICAgICAgICAgYXNzZXJ0VG9vbENhbGxzQXJlQ2hhdENvbXBsZXRpb25GdW5jdGlvblRvb2xDYWxscyhjaG9pY2UubWVzc2FnZS50b29sX2NhbGxzKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAuLi5jaG9pY2UsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmNob2ljZS5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VkOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgLi4uKGNob2ljZS5tZXNzYWdlLnRvb2xfY2FsbHMgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbF9jYWxsczogY2hvaWNlLm1lc3NhZ2UudG9vbF9jYWxscyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWQpLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlQ2hhdENvbXBsZXRpb24oY29tcGxldGlvbiwgcGFyYW1zKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUNoYXRDb21wbGV0aW9uKGNvbXBsZXRpb24sIHBhcmFtcykge1xuICAgIGNvbnN0IGNob2ljZXMgPSBjb21wbGV0aW9uLmNob2ljZXMubWFwKChjaG9pY2UpID0+IHtcbiAgICAgICAgaWYgKGNob2ljZS5maW5pc2hfcmVhc29uID09PSAnbGVuZ3RoJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IExlbmd0aEZpbmlzaFJlYXNvbkVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNob2ljZS5maW5pc2hfcmVhc29uID09PSAnY29udGVudF9maWx0ZXInKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgQ29udGVudEZpbHRlckZpbmlzaFJlYXNvbkVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgYXNzZXJ0VG9vbENhbGxzQXJlQ2hhdENvbXBsZXRpb25GdW5jdGlvblRvb2xDYWxscyhjaG9pY2UubWVzc2FnZS50b29sX2NhbGxzKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmNob2ljZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IHtcbiAgICAgICAgICAgICAgICAuLi5jaG9pY2UubWVzc2FnZSxcbiAgICAgICAgICAgICAgICAuLi4oY2hvaWNlLm1lc3NhZ2UudG9vbF9jYWxscyA/XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xfY2FsbHM6IGNob2ljZS5tZXNzYWdlLnRvb2xfY2FsbHM/Lm1hcCgodG9vbENhbGwpID0+IHBhcnNlVG9vbENhbGwocGFyYW1zLCB0b29sQ2FsbCkpID8/IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCksXG4gICAgICAgICAgICAgICAgcGFyc2VkOiBjaG9pY2UubWVzc2FnZS5jb250ZW50ICYmICFjaG9pY2UubWVzc2FnZS5yZWZ1c2FsID9cbiAgICAgICAgICAgICAgICAgICAgcGFyc2VSZXNwb25zZUZvcm1hdChwYXJhbXMsIGNob2ljZS5tZXNzYWdlLmNvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIDogbnVsbCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfSk7XG4gICAgcmV0dXJuIHsgLi4uY29tcGxldGlvbiwgY2hvaWNlcyB9O1xufVxuZnVuY3Rpb24gcGFyc2VSZXNwb25zZUZvcm1hdChwYXJhbXMsIGNvbnRlbnQpIHtcbiAgICBpZiAocGFyYW1zLnJlc3BvbnNlX2Zvcm1hdD8udHlwZSAhPT0gJ2pzb25fc2NoZW1hJykge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaWYgKHBhcmFtcy5yZXNwb25zZV9mb3JtYXQ/LnR5cGUgPT09ICdqc29uX3NjaGVtYScpIHtcbiAgICAgICAgaWYgKCckcGFyc2VSYXcnIGluIHBhcmFtcy5yZXNwb25zZV9mb3JtYXQpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlX2Zvcm1hdCA9IHBhcmFtcy5yZXNwb25zZV9mb3JtYXQ7XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2VfZm9ybWF0LiRwYXJzZVJhdyhjb250ZW50KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShjb250ZW50KTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiBwYXJzZVRvb2xDYWxsKHBhcmFtcywgdG9vbENhbGwpIHtcbiAgICBjb25zdCBpbnB1dFRvb2wgPSBwYXJhbXMudG9vbHM/LmZpbmQoKGlucHV0VG9vbCkgPT4gaXNDaGF0Q29tcGxldGlvbkZ1bmN0aW9uVG9vbChpbnB1dFRvb2wpICYmIGlucHV0VG9vbC5mdW5jdGlvbj8ubmFtZSA9PT0gdG9vbENhbGwuZnVuY3Rpb24ubmFtZSk7IC8vIFRTIGRvZXNuJ3QgbmFycm93IGJhc2VkIG9uIGlzQ2hhdENvbXBsZXRpb25Ub29sXG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4udG9vbENhbGwsXG4gICAgICAgIGZ1bmN0aW9uOiB7XG4gICAgICAgICAgICAuLi50b29sQ2FsbC5mdW5jdGlvbixcbiAgICAgICAgICAgIHBhcnNlZF9hcmd1bWVudHM6IGlzQXV0b1BhcnNhYmxlVG9vbChpbnB1dFRvb2wpID8gaW5wdXRUb29sLiRwYXJzZVJhdyh0b29sQ2FsbC5mdW5jdGlvbi5hcmd1bWVudHMpXG4gICAgICAgICAgICAgICAgOiBpbnB1dFRvb2w/LmZ1bmN0aW9uLnN0cmljdCA/IEpTT04ucGFyc2UodG9vbENhbGwuZnVuY3Rpb24uYXJndW1lbnRzKVxuICAgICAgICAgICAgICAgICAgICA6IG51bGwsXG4gICAgICAgIH0sXG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzaG91bGRQYXJzZVRvb2xDYWxsKHBhcmFtcywgdG9vbENhbGwpIHtcbiAgICBpZiAoIXBhcmFtcyB8fCAhKCd0b29scycgaW4gcGFyYW1zKSB8fCAhcGFyYW1zLnRvb2xzKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgaW5wdXRUb29sID0gcGFyYW1zLnRvb2xzPy5maW5kKChpbnB1dFRvb2wpID0+IGlzQ2hhdENvbXBsZXRpb25GdW5jdGlvblRvb2woaW5wdXRUb29sKSAmJiBpbnB1dFRvb2wuZnVuY3Rpb24/Lm5hbWUgPT09IHRvb2xDYWxsLmZ1bmN0aW9uLm5hbWUpO1xuICAgIHJldHVybiAoaXNDaGF0Q29tcGxldGlvbkZ1bmN0aW9uVG9vbChpbnB1dFRvb2wpICYmXG4gICAgICAgIChpc0F1dG9QYXJzYWJsZVRvb2woaW5wdXRUb29sKSB8fCBpbnB1dFRvb2w/LmZ1bmN0aW9uLnN0cmljdCB8fCBmYWxzZSkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGhhc0F1dG9QYXJzZWFibGVJbnB1dChwYXJhbXMpIHtcbiAgICBpZiAoaXNBdXRvUGFyc2FibGVSZXNwb25zZUZvcm1hdChwYXJhbXMucmVzcG9uc2VfZm9ybWF0KSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIChwYXJhbXMudG9vbHM/LnNvbWUoKHQpID0+IGlzQXV0b1BhcnNhYmxlVG9vbCh0KSB8fCAodC50eXBlID09PSAnZnVuY3Rpb24nICYmIHQuZnVuY3Rpb24uc3RyaWN0ID09PSB0cnVlKSkgPz8gZmFsc2UpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydFRvb2xDYWxsc0FyZUNoYXRDb21wbGV0aW9uRnVuY3Rpb25Ub29sQ2FsbHModG9vbENhbGxzKSB7XG4gICAgZm9yIChjb25zdCB0b29sQ2FsbCBvZiB0b29sQ2FsbHMgfHwgW10pIHtcbiAgICAgICAgaWYgKHRvb2xDYWxsLnR5cGUgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBPcGVuQUlFcnJvcihgQ3VycmVudGx5IG9ubHkgXFxgZnVuY3Rpb25cXGAgdG9vbCBjYWxscyBhcmUgc3VwcG9ydGVkOyBSZWNlaXZlZCBcXGAke3Rvb2xDYWxsLnR5cGV9XFxgYCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVJbnB1dFRvb2xzKHRvb2xzKSB7XG4gICAgZm9yIChjb25zdCB0b29sIG9mIHRvb2xzID8/IFtdKSB7XG4gICAgICAgIGlmICh0b29sLnR5cGUgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBPcGVuQUlFcnJvcihgQ3VycmVudGx5IG9ubHkgXFxgZnVuY3Rpb25cXGAgdG9vbCB0eXBlcyBzdXBwb3J0IGF1dG8tcGFyc2luZzsgUmVjZWl2ZWQgXFxgJHt0b29sLnR5cGV9XFxgYCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRvb2wuZnVuY3Rpb24uc3RyaWN0ICE9PSB0cnVlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT3BlbkFJRXJyb3IoYFRoZSBcXGAke3Rvb2wuZnVuY3Rpb24ubmFtZX1cXGAgdG9vbCBpcyBub3QgbWFya2VkIHdpdGggXFxgc3RyaWN0OiB0cnVlXFxgLiBPbmx5IHN0cmljdCBmdW5jdGlvbiB0b29scyBjYW4gYmUgYXV0by1wYXJzZWRgKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhcnNlci5tanMubWFwIiwiZXhwb3J0IGNvbnN0IGlnbm9yZU92ZXJyaWRlID0gU3ltYm9sKCdMZXQgem9kVG9Kc29uU2NoZW1hIGRlY2lkZSBvbiB3aGljaCBwYXJzZXIgdG8gdXNlJyk7XG5jb25zdCBkZWZhdWx0T3B0aW9ucyA9IHtcbiAgICBuYW1lOiB1bmRlZmluZWQsXG4gICAgJHJlZlN0cmF0ZWd5OiAncm9vdCcsXG4gICAgZWZmZWN0U3RyYXRlZ3k6ICdpbnB1dCcsXG4gICAgcGlwZVN0cmF0ZWd5OiAnYWxsJyxcbiAgICBkYXRlU3RyYXRlZ3k6ICdmb3JtYXQ6ZGF0ZS10aW1lJyxcbiAgICBtYXBTdHJhdGVneTogJ2VudHJpZXMnLFxuICAgIG51bGxhYmxlU3RyYXRlZ3k6ICdmcm9tLXRhcmdldCcsXG4gICAgcmVtb3ZlQWRkaXRpb25hbFN0cmF0ZWd5OiAncGFzc3Rocm91Z2gnLFxuICAgIGRlZmluaXRpb25QYXRoOiAnZGVmaW5pdGlvbnMnLFxuICAgIHRhcmdldDogJ2pzb25TY2hlbWE3JyxcbiAgICBzdHJpY3RVbmlvbnM6IGZhbHNlLFxuICAgIGVycm9yTWVzc2FnZXM6IGZhbHNlLFxuICAgIG1hcmtkb3duRGVzY3JpcHRpb246IGZhbHNlLFxuICAgIHBhdHRlcm5TdHJhdGVneTogJ2VzY2FwZScsXG4gICAgYXBwbHlSZWdleEZsYWdzOiBmYWxzZSxcbiAgICBlbWFpbFN0cmF0ZWd5OiAnZm9ybWF0OmVtYWlsJyxcbiAgICBiYXNlNjRTdHJhdGVneTogJ2NvbnRlbnRFbmNvZGluZzpiYXNlNjQnLFxuICAgIG5hbWVTdHJhdGVneTogJ3JlZicsXG59O1xuZXhwb3J0IGNvbnN0IGdldERlZmF1bHRPcHRpb25zID0gKG9wdGlvbnMpID0+IHtcbiAgICAvLyBXZSBuZWVkIHRvIGFkZCBgZGVmaW5pdGlvbnNgIGhlcmUgYXMgd2UgbWF5IG11dGF0ZSBpdFxuICAgIHJldHVybiAodHlwZW9mIG9wdGlvbnMgPT09ICdzdHJpbmcnID9cbiAgICAgICAge1xuICAgICAgICAgICAgLi4uZGVmYXVsdE9wdGlvbnMsXG4gICAgICAgICAgICBiYXNlUGF0aDogWycjJ10sXG4gICAgICAgICAgICBkZWZpbml0aW9uczoge30sXG4gICAgICAgICAgICBuYW1lOiBvcHRpb25zLFxuICAgICAgICB9XG4gICAgICAgIDoge1xuICAgICAgICAgICAgLi4uZGVmYXVsdE9wdGlvbnMsXG4gICAgICAgICAgICBiYXNlUGF0aDogWycjJ10sXG4gICAgICAgICAgICBkZWZpbml0aW9uczoge30sXG4gICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICB9KTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1PcHRpb25zLm1qcy5tYXAiLCJleHBvcnQgY29uc3Qgem9kRGVmID0gKHpvZFNjaGVtYSkgPT4ge1xuICAgIHJldHVybiAnX2RlZicgaW4gem9kU2NoZW1hID8gem9kU2NoZW1hLl9kZWYgOiB6b2RTY2hlbWE7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIGlzRW1wdHlPYmoob2JqKSB7XG4gICAgaWYgKCFvYmopXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIGZvciAoY29uc3QgX2sgaW4gb2JqKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRydWU7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD11dGlsLm1qcy5tYXAiLCJpbXBvcnQgeyBnZXREZWZhdWx0T3B0aW9ucyB9IGZyb20gXCIuL09wdGlvbnMubWpzXCI7XG5pbXBvcnQgeyB6b2REZWYgfSBmcm9tIFwiLi91dGlsLm1qc1wiO1xuZXhwb3J0IGNvbnN0IGdldFJlZnMgPSAob3B0aW9ucykgPT4ge1xuICAgIGNvbnN0IF9vcHRpb25zID0gZ2V0RGVmYXVsdE9wdGlvbnMob3B0aW9ucyk7XG4gICAgY29uc3QgY3VycmVudFBhdGggPSBfb3B0aW9ucy5uYW1lICE9PSB1bmRlZmluZWQgP1xuICAgICAgICBbLi4uX29wdGlvbnMuYmFzZVBhdGgsIF9vcHRpb25zLmRlZmluaXRpb25QYXRoLCBfb3B0aW9ucy5uYW1lXVxuICAgICAgICA6IF9vcHRpb25zLmJhc2VQYXRoO1xuICAgIHJldHVybiB7XG4gICAgICAgIC4uLl9vcHRpb25zLFxuICAgICAgICBjdXJyZW50UGF0aDogY3VycmVudFBhdGgsXG4gICAgICAgIHByb3BlcnR5UGF0aDogdW5kZWZpbmVkLFxuICAgICAgICBzZWVuUmVmczogbmV3IFNldCgpLFxuICAgICAgICBzZWVuOiBuZXcgTWFwKE9iamVjdC5lbnRyaWVzKF9vcHRpb25zLmRlZmluaXRpb25zKS5tYXAoKFtuYW1lLCBkZWZdKSA9PiBbXG4gICAgICAgICAgICB6b2REZWYoZGVmKSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkZWY6IHpvZERlZihkZWYpLFxuICAgICAgICAgICAgICAgIHBhdGg6IFsuLi5fb3B0aW9ucy5iYXNlUGF0aCwgX29wdGlvbnMuZGVmaW5pdGlvblBhdGgsIG5hbWVdLFxuICAgICAgICAgICAgICAgIC8vIFJlc29sdXRpb24gb2YgcmVmZXJlbmNlcyB3aWxsIGJlIGZvcmNlZCBldmVuIHRob3VnaCBzZWVuLCBzbyBpdCdzIG9rIHRoYXQgdGhlIHNjaGVtYSBpcyB1bmRlZmluZWQgaGVyZSBmb3Igbm93LlxuICAgICAgICAgICAgICAgIGpzb25TY2hlbWE6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIF0pKSxcbiAgICB9O1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJlZnMubWpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBhZGRFcnJvck1lc3NhZ2UocmVzLCBrZXksIGVycm9yTWVzc2FnZSwgcmVmcykge1xuICAgIGlmICghcmVmcz8uZXJyb3JNZXNzYWdlcylcbiAgICAgICAgcmV0dXJuO1xuICAgIGlmIChlcnJvck1lc3NhZ2UpIHtcbiAgICAgICAgcmVzLmVycm9yTWVzc2FnZSA9IHtcbiAgICAgICAgICAgIC4uLnJlcy5lcnJvck1lc3NhZ2UsXG4gICAgICAgICAgICBba2V5XTogZXJyb3JNZXNzYWdlLFxuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywga2V5LCB2YWx1ZSwgZXJyb3JNZXNzYWdlLCByZWZzKSB7XG4gICAgcmVzW2tleV0gPSB2YWx1ZTtcbiAgICBhZGRFcnJvck1lc3NhZ2UocmVzLCBrZXksIGVycm9yTWVzc2FnZSwgcmVmcyk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lcnJvck1lc3NhZ2VzLm1qcy5tYXAiLCJleHBvcnQgdmFyIHV0aWw7XG4oZnVuY3Rpb24gKHV0aWwpIHtcbiAgICB1dGlsLmFzc2VydEVxdWFsID0gKF8pID0+IHsgfTtcbiAgICBmdW5jdGlvbiBhc3NlcnRJcyhfYXJnKSB7IH1cbiAgICB1dGlsLmFzc2VydElzID0gYXNzZXJ0SXM7XG4gICAgZnVuY3Rpb24gYXNzZXJ0TmV2ZXIoX3gpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgfVxuICAgIHV0aWwuYXNzZXJ0TmV2ZXIgPSBhc3NlcnROZXZlcjtcbiAgICB1dGlsLmFycmF5VG9FbnVtID0gKGl0ZW1zKSA9PiB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHtcbiAgICAgICAgICAgIG9ialtpdGVtXSA9IGl0ZW07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9O1xuICAgIHV0aWwuZ2V0VmFsaWRFbnVtVmFsdWVzID0gKG9iaikgPT4ge1xuICAgICAgICBjb25zdCB2YWxpZEtleXMgPSB1dGlsLm9iamVjdEtleXMob2JqKS5maWx0ZXIoKGspID0+IHR5cGVvZiBvYmpbb2JqW2tdXSAhPT0gXCJudW1iZXJcIik7XG4gICAgICAgIGNvbnN0IGZpbHRlcmVkID0ge307XG4gICAgICAgIGZvciAoY29uc3QgayBvZiB2YWxpZEtleXMpIHtcbiAgICAgICAgICAgIGZpbHRlcmVkW2tdID0gb2JqW2tdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1dGlsLm9iamVjdFZhbHVlcyhmaWx0ZXJlZCk7XG4gICAgfTtcbiAgICB1dGlsLm9iamVjdFZhbHVlcyA9IChvYmopID0+IHtcbiAgICAgICAgcmV0dXJuIHV0aWwub2JqZWN0S2V5cyhvYmopLm1hcChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIG9ialtlXTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICB1dGlsLm9iamVjdEtleXMgPSB0eXBlb2YgT2JqZWN0LmtleXMgPT09IFwiZnVuY3Rpb25cIiAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGJhbi9iYW5cbiAgICAgICAgPyAob2JqKSA9PiBPYmplY3Qua2V5cyhvYmopIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgYmFuL2JhblxuICAgICAgICA6IChvYmplY3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGtleXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIG9iamVjdCkge1xuICAgICAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGtleXMucHVzaChrZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBrZXlzO1xuICAgICAgICB9O1xuICAgIHV0aWwuZmluZCA9IChhcnIsIGNoZWNrZXIpID0+IHtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGFycikge1xuICAgICAgICAgICAgaWYgKGNoZWNrZXIoaXRlbSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIHV0aWwuaXNJbnRlZ2VyID0gdHlwZW9mIE51bWJlci5pc0ludGVnZXIgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICA/ICh2YWwpID0+IE51bWJlci5pc0ludGVnZXIodmFsKSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGJhbi9iYW5cbiAgICAgICAgOiAodmFsKSA9PiB0eXBlb2YgdmFsID09PSBcIm51bWJlclwiICYmIE51bWJlci5pc0Zpbml0ZSh2YWwpICYmIE1hdGguZmxvb3IodmFsKSA9PT0gdmFsO1xuICAgIGZ1bmN0aW9uIGpvaW5WYWx1ZXMoYXJyYXksIHNlcGFyYXRvciA9IFwiIHwgXCIpIHtcbiAgICAgICAgcmV0dXJuIGFycmF5Lm1hcCgodmFsKSA9PiAodHlwZW9mIHZhbCA9PT0gXCJzdHJpbmdcIiA/IGAnJHt2YWx9J2AgOiB2YWwpKS5qb2luKHNlcGFyYXRvcik7XG4gICAgfVxuICAgIHV0aWwuam9pblZhbHVlcyA9IGpvaW5WYWx1ZXM7XG4gICAgdXRpbC5qc29uU3RyaW5naWZ5UmVwbGFjZXIgPSAoXywgdmFsdWUpID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJiaWdpbnRcIikge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH07XG59KSh1dGlsIHx8ICh1dGlsID0ge30pKTtcbmV4cG9ydCB2YXIgb2JqZWN0VXRpbDtcbihmdW5jdGlvbiAob2JqZWN0VXRpbCkge1xuICAgIG9iamVjdFV0aWwubWVyZ2VTaGFwZXMgPSAoZmlyc3QsIHNlY29uZCkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uZmlyc3QsXG4gICAgICAgICAgICAuLi5zZWNvbmQsIC8vIHNlY29uZCBvdmVyd3JpdGVzIGZpcnN0XG4gICAgICAgIH07XG4gICAgfTtcbn0pKG9iamVjdFV0aWwgfHwgKG9iamVjdFV0aWwgPSB7fSkpO1xuZXhwb3J0IGNvbnN0IFpvZFBhcnNlZFR5cGUgPSB1dGlsLmFycmF5VG9FbnVtKFtcbiAgICBcInN0cmluZ1wiLFxuICAgIFwibmFuXCIsXG4gICAgXCJudW1iZXJcIixcbiAgICBcImludGVnZXJcIixcbiAgICBcImZsb2F0XCIsXG4gICAgXCJib29sZWFuXCIsXG4gICAgXCJkYXRlXCIsXG4gICAgXCJiaWdpbnRcIixcbiAgICBcInN5bWJvbFwiLFxuICAgIFwiZnVuY3Rpb25cIixcbiAgICBcInVuZGVmaW5lZFwiLFxuICAgIFwibnVsbFwiLFxuICAgIFwiYXJyYXlcIixcbiAgICBcIm9iamVjdFwiLFxuICAgIFwidW5rbm93blwiLFxuICAgIFwicHJvbWlzZVwiLFxuICAgIFwidm9pZFwiLFxuICAgIFwibmV2ZXJcIixcbiAgICBcIm1hcFwiLFxuICAgIFwic2V0XCIsXG5dKTtcbmV4cG9ydCBjb25zdCBnZXRQYXJzZWRUeXBlID0gKGRhdGEpID0+IHtcbiAgICBjb25zdCB0ID0gdHlwZW9mIGRhdGE7XG4gICAgc3dpdGNoICh0KSB7XG4gICAgICAgIGNhc2UgXCJ1bmRlZmluZWRcIjpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZDtcbiAgICAgICAgY2FzZSBcInN0cmluZ1wiOlxuICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuc3RyaW5nO1xuICAgICAgICBjYXNlIFwibnVtYmVyXCI6XG4gICAgICAgICAgICByZXR1cm4gTnVtYmVyLmlzTmFOKGRhdGEpID8gWm9kUGFyc2VkVHlwZS5uYW4gOiBab2RQYXJzZWRUeXBlLm51bWJlcjtcbiAgICAgICAgY2FzZSBcImJvb2xlYW5cIjpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLmJvb2xlYW47XG4gICAgICAgIGNhc2UgXCJmdW5jdGlvblwiOlxuICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuZnVuY3Rpb247XG4gICAgICAgIGNhc2UgXCJiaWdpbnRcIjpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLmJpZ2ludDtcbiAgICAgICAgY2FzZSBcInN5bWJvbFwiOlxuICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuc3ltYm9sO1xuICAgICAgICBjYXNlIFwib2JqZWN0XCI6XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLmFycmF5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRhdGEgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5udWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRhdGEudGhlbiAmJiB0eXBlb2YgZGF0YS50aGVuID09PSBcImZ1bmN0aW9uXCIgJiYgZGF0YS5jYXRjaCAmJiB0eXBlb2YgZGF0YS5jYXRjaCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUucHJvbWlzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgTWFwICE9PSBcInVuZGVmaW5lZFwiICYmIGRhdGEgaW5zdGFuY2VvZiBNYXApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5tYXA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIFNldCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkYXRhIGluc3RhbmNlb2YgU2V0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuc2V0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBEYXRlICE9PSBcInVuZGVmaW5lZFwiICYmIGRhdGEgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuZGF0ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLm9iamVjdDtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnVua25vd247XG4gICAgfVxufTtcbiIsImltcG9ydCB7IHV0aWwgfSBmcm9tIFwiLi9oZWxwZXJzL3V0aWwuanNcIjtcbmV4cG9ydCBjb25zdCBab2RJc3N1ZUNvZGUgPSB1dGlsLmFycmF5VG9FbnVtKFtcbiAgICBcImludmFsaWRfdHlwZVwiLFxuICAgIFwiaW52YWxpZF9saXRlcmFsXCIsXG4gICAgXCJjdXN0b21cIixcbiAgICBcImludmFsaWRfdW5pb25cIixcbiAgICBcImludmFsaWRfdW5pb25fZGlzY3JpbWluYXRvclwiLFxuICAgIFwiaW52YWxpZF9lbnVtX3ZhbHVlXCIsXG4gICAgXCJ1bnJlY29nbml6ZWRfa2V5c1wiLFxuICAgIFwiaW52YWxpZF9hcmd1bWVudHNcIixcbiAgICBcImludmFsaWRfcmV0dXJuX3R5cGVcIixcbiAgICBcImludmFsaWRfZGF0ZVwiLFxuICAgIFwiaW52YWxpZF9zdHJpbmdcIixcbiAgICBcInRvb19zbWFsbFwiLFxuICAgIFwidG9vX2JpZ1wiLFxuICAgIFwiaW52YWxpZF9pbnRlcnNlY3Rpb25fdHlwZXNcIixcbiAgICBcIm5vdF9tdWx0aXBsZV9vZlwiLFxuICAgIFwibm90X2Zpbml0ZVwiLFxuXSk7XG5leHBvcnQgY29uc3QgcXVvdGVsZXNzSnNvbiA9IChvYmopID0+IHtcbiAgICBjb25zdCBqc29uID0gSlNPTi5zdHJpbmdpZnkob2JqLCBudWxsLCAyKTtcbiAgICByZXR1cm4ganNvbi5yZXBsYWNlKC9cIihbXlwiXSspXCI6L2csIFwiJDE6XCIpO1xufTtcbmV4cG9ydCBjbGFzcyBab2RFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBnZXQgZXJyb3JzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc3N1ZXM7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGlzc3Vlcykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmlzc3VlcyA9IFtdO1xuICAgICAgICB0aGlzLmFkZElzc3VlID0gKHN1YikgPT4ge1xuICAgICAgICAgICAgdGhpcy5pc3N1ZXMgPSBbLi4udGhpcy5pc3N1ZXMsIHN1Yl07XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuYWRkSXNzdWVzID0gKHN1YnMgPSBbXSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5pc3N1ZXMgPSBbLi4udGhpcy5pc3N1ZXMsIC4uLnN1YnNdO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBhY3R1YWxQcm90byA9IG5ldy50YXJnZXQucHJvdG90eXBlO1xuICAgICAgICBpZiAoT2JqZWN0LnNldFByb3RvdHlwZU9mKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgYmFuL2JhblxuICAgICAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIGFjdHVhbFByb3RvKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX19wcm90b19fID0gYWN0dWFsUHJvdG87XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5uYW1lID0gXCJab2RFcnJvclwiO1xuICAgICAgICB0aGlzLmlzc3VlcyA9IGlzc3VlcztcbiAgICB9XG4gICAgZm9ybWF0KF9tYXBwZXIpIHtcbiAgICAgICAgY29uc3QgbWFwcGVyID0gX21hcHBlciB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGlzc3VlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlzc3VlLm1lc3NhZ2U7XG4gICAgICAgICAgICB9O1xuICAgICAgICBjb25zdCBmaWVsZEVycm9ycyA9IHsgX2Vycm9yczogW10gfTtcbiAgICAgICAgY29uc3QgcHJvY2Vzc0Vycm9yID0gKGVycm9yKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGlzc3VlIG9mIGVycm9yLmlzc3Vlcykge1xuICAgICAgICAgICAgICAgIGlmIChpc3N1ZS5jb2RlID09PSBcImludmFsaWRfdW5pb25cIikge1xuICAgICAgICAgICAgICAgICAgICBpc3N1ZS51bmlvbkVycm9ycy5tYXAocHJvY2Vzc0Vycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUuY29kZSA9PT0gXCJpbnZhbGlkX3JldHVybl90eXBlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc0Vycm9yKGlzc3VlLnJldHVyblR5cGVFcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLmNvZGUgPT09IFwiaW52YWxpZF9hcmd1bWVudHNcIikge1xuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzRXJyb3IoaXNzdWUuYXJndW1lbnRzRXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS5wYXRoLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZEVycm9ycy5fZXJyb3JzLnB1c2gobWFwcGVyKGlzc3VlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsZXQgY3VyciA9IGZpZWxkRXJyb3JzO1xuICAgICAgICAgICAgICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChpIDwgaXNzdWUucGF0aC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVsID0gaXNzdWUucGF0aFtpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlcm1pbmFsID0gaSA9PT0gaXNzdWUucGF0aC5sZW5ndGggLSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0ZXJtaW5hbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJbZWxdID0gY3VycltlbF0gfHwgeyBfZXJyb3JzOiBbXSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmICh0eXBlb2YgZWwgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIGN1cnJbZWxdID0gY3VycltlbF0gfHwgeyBfZXJyb3JzOiBbXSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIH0gZWxzZSBpZiAodHlwZW9mIGVsID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBjb25zdCBlcnJvckFycmF5OiBhbnkgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIGVycm9yQXJyYXkuX2Vycm9ycyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgY3VycltlbF0gPSBjdXJyW2VsXSB8fCBlcnJvckFycmF5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJbZWxdID0gY3VycltlbF0gfHwgeyBfZXJyb3JzOiBbXSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJbZWxdLl9lcnJvcnMucHVzaChtYXBwZXIoaXNzdWUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnIgPSBjdXJyW2VsXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcHJvY2Vzc0Vycm9yKHRoaXMpO1xuICAgICAgICByZXR1cm4gZmllbGRFcnJvcnM7XG4gICAgfVxuICAgIHN0YXRpYyBhc3NlcnQodmFsdWUpIHtcbiAgICAgICAgaWYgKCEodmFsdWUgaW5zdGFuY2VvZiBab2RFcnJvcikpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgTm90IGEgWm9kRXJyb3I6ICR7dmFsdWV9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1lc3NhZ2U7XG4gICAgfVxuICAgIGdldCBtZXNzYWdlKCkge1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcy5pc3N1ZXMsIHV0aWwuanNvblN0cmluZ2lmeVJlcGxhY2VyLCAyKTtcbiAgICB9XG4gICAgZ2V0IGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzc3Vlcy5sZW5ndGggPT09IDA7XG4gICAgfVxuICAgIGZsYXR0ZW4obWFwcGVyID0gKGlzc3VlKSA9PiBpc3N1ZS5tZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IGZpZWxkRXJyb3JzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgY29uc3QgZm9ybUVycm9ycyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHN1YiBvZiB0aGlzLmlzc3Vlcykge1xuICAgICAgICAgICAgaWYgKHN1Yi5wYXRoLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmaXJzdEVsID0gc3ViLnBhdGhbMF07XG4gICAgICAgICAgICAgICAgZmllbGRFcnJvcnNbZmlyc3RFbF0gPSBmaWVsZEVycm9yc1tmaXJzdEVsXSB8fCBbXTtcbiAgICAgICAgICAgICAgICBmaWVsZEVycm9yc1tmaXJzdEVsXS5wdXNoKG1hcHBlcihzdWIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGZvcm1FcnJvcnMucHVzaChtYXBwZXIoc3ViKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgZm9ybUVycm9ycywgZmllbGRFcnJvcnMgfTtcbiAgICB9XG4gICAgZ2V0IGZvcm1FcnJvcnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZsYXR0ZW4oKTtcbiAgICB9XG59XG5ab2RFcnJvci5jcmVhdGUgPSAoaXNzdWVzKSA9PiB7XG4gICAgY29uc3QgZXJyb3IgPSBuZXcgWm9kRXJyb3IoaXNzdWVzKTtcbiAgICByZXR1cm4gZXJyb3I7XG59O1xuIiwiZXhwb3J0IHZhciBlcnJvclV0aWw7XG4oZnVuY3Rpb24gKGVycm9yVXRpbCkge1xuICAgIGVycm9yVXRpbC5lcnJUb09iaiA9IChtZXNzYWdlKSA9PiB0eXBlb2YgbWVzc2FnZSA9PT0gXCJzdHJpbmdcIiA/IHsgbWVzc2FnZSB9IDogbWVzc2FnZSB8fCB7fTtcbiAgICAvLyBiaW9tZS1pZ25vcmUgbGludDpcbiAgICBlcnJvclV0aWwudG9TdHJpbmcgPSAobWVzc2FnZSkgPT4gdHlwZW9mIG1lc3NhZ2UgPT09IFwic3RyaW5nXCIgPyBtZXNzYWdlIDogbWVzc2FnZT8ubWVzc2FnZTtcbn0pKGVycm9yVXRpbCB8fCAoZXJyb3JVdGlsID0ge30pKTtcbiIsImltcG9ydCB7IFpvZEVycm9yLCBab2RJc3N1ZUNvZGUsIH0gZnJvbSBcIi4vWm9kRXJyb3IuanNcIjtcbmltcG9ydCB7IGRlZmF1bHRFcnJvck1hcCwgZ2V0RXJyb3JNYXAgfSBmcm9tIFwiLi9lcnJvcnMuanNcIjtcbmltcG9ydCB7IGVycm9yVXRpbCB9IGZyb20gXCIuL2hlbHBlcnMvZXJyb3JVdGlsLmpzXCI7XG5pbXBvcnQgeyBESVJUWSwgSU5WQUxJRCwgT0ssIFBhcnNlU3RhdHVzLCBhZGRJc3N1ZVRvQ29udGV4dCwgaXNBYm9ydGVkLCBpc0FzeW5jLCBpc0RpcnR5LCBpc1ZhbGlkLCBtYWtlSXNzdWUsIH0gZnJvbSBcIi4vaGVscGVycy9wYXJzZVV0aWwuanNcIjtcbmltcG9ydCB7IHV0aWwsIFpvZFBhcnNlZFR5cGUsIGdldFBhcnNlZFR5cGUgfSBmcm9tIFwiLi9oZWxwZXJzL3V0aWwuanNcIjtcbmNsYXNzIFBhcnNlSW5wdXRMYXp5UGF0aCB7XG4gICAgY29uc3RydWN0b3IocGFyZW50LCB2YWx1ZSwgcGF0aCwga2V5KSB7XG4gICAgICAgIHRoaXMuX2NhY2hlZFBhdGggPSBbXTtcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIHRoaXMuZGF0YSA9IHZhbHVlO1xuICAgICAgICB0aGlzLl9wYXRoID0gcGF0aDtcbiAgICAgICAgdGhpcy5fa2V5ID0ga2V5O1xuICAgIH1cbiAgICBnZXQgcGF0aCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9jYWNoZWRQYXRoLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodGhpcy5fa2V5KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2NhY2hlZFBhdGgucHVzaCguLi50aGlzLl9wYXRoLCAuLi50aGlzLl9rZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY2FjaGVkUGF0aC5wdXNoKC4uLnRoaXMuX3BhdGgsIHRoaXMuX2tleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZFBhdGg7XG4gICAgfVxufVxuY29uc3QgaGFuZGxlUmVzdWx0ID0gKGN0eCwgcmVzdWx0KSA9PiB7XG4gICAgaWYgKGlzVmFsaWQocmVzdWx0KSkge1xuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQudmFsdWUgfTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmICghY3R4LmNvbW1vbi5pc3N1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJWYWxpZGF0aW9uIGZhaWxlZCBidXQgbm8gaXNzdWVzIGRldGVjdGVkLlwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICBnZXQgZXJyb3IoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2Vycm9yKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZXJyb3I7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgWm9kRXJyb3IoY3R4LmNvbW1vbi5pc3N1ZXMpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2Vycm9yID0gZXJyb3I7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2Vycm9yO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG59O1xuZnVuY3Rpb24gcHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpIHtcbiAgICBpZiAoIXBhcmFtcylcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIGNvbnN0IHsgZXJyb3JNYXAsIGludmFsaWRfdHlwZV9lcnJvciwgcmVxdWlyZWRfZXJyb3IsIGRlc2NyaXB0aW9uIH0gPSBwYXJhbXM7XG4gICAgaWYgKGVycm9yTWFwICYmIChpbnZhbGlkX3R5cGVfZXJyb3IgfHwgcmVxdWlyZWRfZXJyb3IpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2FuJ3QgdXNlIFwiaW52YWxpZF90eXBlX2Vycm9yXCIgb3IgXCJyZXF1aXJlZF9lcnJvclwiIGluIGNvbmp1bmN0aW9uIHdpdGggY3VzdG9tIGVycm9yIG1hcC5gKTtcbiAgICB9XG4gICAgaWYgKGVycm9yTWFwKVxuICAgICAgICByZXR1cm4geyBlcnJvck1hcDogZXJyb3JNYXAsIGRlc2NyaXB0aW9uIH07XG4gICAgY29uc3QgY3VzdG9tTWFwID0gKGlzcywgY3R4KSA9PiB7XG4gICAgICAgIGNvbnN0IHsgbWVzc2FnZSB9ID0gcGFyYW1zO1xuICAgICAgICBpZiAoaXNzLmNvZGUgPT09IFwiaW52YWxpZF9lbnVtX3ZhbHVlXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB7IG1lc3NhZ2U6IG1lc3NhZ2UgPz8gY3R4LmRlZmF1bHRFcnJvciB9O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgY3R4LmRhdGEgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB7IG1lc3NhZ2U6IG1lc3NhZ2UgPz8gcmVxdWlyZWRfZXJyb3IgPz8gY3R4LmRlZmF1bHRFcnJvciB9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc3MuY29kZSAhPT0gXCJpbnZhbGlkX3R5cGVcIilcbiAgICAgICAgICAgIHJldHVybiB7IG1lc3NhZ2U6IGN0eC5kZWZhdWx0RXJyb3IgfTtcbiAgICAgICAgcmV0dXJuIHsgbWVzc2FnZTogbWVzc2FnZSA/PyBpbnZhbGlkX3R5cGVfZXJyb3IgPz8gY3R4LmRlZmF1bHRFcnJvciB9O1xuICAgIH07XG4gICAgcmV0dXJuIHsgZXJyb3JNYXA6IGN1c3RvbU1hcCwgZGVzY3JpcHRpb24gfTtcbn1cbmV4cG9ydCBjbGFzcyBab2RUeXBlIHtcbiAgICBnZXQgZGVzY3JpcHRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuZGVzY3JpcHRpb247XG4gICAgfVxuICAgIF9nZXRUeXBlKGlucHV0KSB7XG4gICAgICAgIHJldHVybiBnZXRQYXJzZWRUeXBlKGlucHV0LmRhdGEpO1xuICAgIH1cbiAgICBfZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCkge1xuICAgICAgICByZXR1cm4gKGN0eCB8fCB7XG4gICAgICAgICAgICBjb21tb246IGlucHV0LnBhcmVudC5jb21tb24sXG4gICAgICAgICAgICBkYXRhOiBpbnB1dC5kYXRhLFxuICAgICAgICAgICAgcGFyc2VkVHlwZTogZ2V0UGFyc2VkVHlwZShpbnB1dC5kYXRhKSxcbiAgICAgICAgICAgIHNjaGVtYUVycm9yTWFwOiB0aGlzLl9kZWYuZXJyb3JNYXAsXG4gICAgICAgICAgICBwYXRoOiBpbnB1dC5wYXRoLFxuICAgICAgICAgICAgcGFyZW50OiBpbnB1dC5wYXJlbnQsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdGF0dXM6IG5ldyBQYXJzZVN0YXR1cygpLFxuICAgICAgICAgICAgY3R4OiB7XG4gICAgICAgICAgICAgICAgY29tbW9uOiBpbnB1dC5wYXJlbnQuY29tbW9uLFxuICAgICAgICAgICAgICAgIGRhdGE6IGlucHV0LmRhdGEsXG4gICAgICAgICAgICAgICAgcGFyc2VkVHlwZTogZ2V0UGFyc2VkVHlwZShpbnB1dC5kYXRhKSxcbiAgICAgICAgICAgICAgICBzY2hlbWFFcnJvck1hcDogdGhpcy5fZGVmLmVycm9yTWFwLFxuICAgICAgICAgICAgICAgIHBhdGg6IGlucHV0LnBhdGgsXG4gICAgICAgICAgICAgICAgcGFyZW50OiBpbnB1dC5wYXJlbnQsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBfcGFyc2VTeW5jKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX3BhcnNlKGlucHV0KTtcbiAgICAgICAgaWYgKGlzQXN5bmMocmVzdWx0KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU3luY2hyb25vdXMgcGFyc2UgZW5jb3VudGVyZWQgcHJvbWlzZS5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgX3BhcnNlQXN5bmMoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fcGFyc2UoaW5wdXQpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdCk7XG4gICAgfVxuICAgIHBhcnNlKGRhdGEsIHBhcmFtcykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnNhZmVQYXJzZShkYXRhLCBwYXJhbXMpO1xuICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0LmRhdGE7XG4gICAgICAgIHRocm93IHJlc3VsdC5lcnJvcjtcbiAgICB9XG4gICAgc2FmZVBhcnNlKGRhdGEsIHBhcmFtcykge1xuICAgICAgICBjb25zdCBjdHggPSB7XG4gICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgIGFzeW5jOiBwYXJhbXM/LmFzeW5jID8/IGZhbHNlLFxuICAgICAgICAgICAgICAgIGNvbnRleHR1YWxFcnJvck1hcDogcGFyYW1zPy5lcnJvck1hcCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwYXRoOiBwYXJhbXM/LnBhdGggfHwgW10sXG4gICAgICAgICAgICBzY2hlbWFFcnJvck1hcDogdGhpcy5fZGVmLmVycm9yTWFwLFxuICAgICAgICAgICAgcGFyZW50OiBudWxsLFxuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHBhcnNlZFR5cGU6IGdldFBhcnNlZFR5cGUoZGF0YSksXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX3BhcnNlU3luYyh7IGRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KTtcbiAgICAgICAgcmV0dXJuIGhhbmRsZVJlc3VsdChjdHgsIHJlc3VsdCk7XG4gICAgfVxuICAgIFwifnZhbGlkYXRlXCIoZGF0YSkge1xuICAgICAgICBjb25zdCBjdHggPSB7XG4gICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgIGFzeW5jOiAhIXRoaXNbXCJ+c3RhbmRhcmRcIl0uYXN5bmMsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGF0aDogW10sXG4gICAgICAgICAgICBzY2hlbWFFcnJvck1hcDogdGhpcy5fZGVmLmVycm9yTWFwLFxuICAgICAgICAgICAgcGFyZW50OiBudWxsLFxuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHBhcnNlZFR5cGU6IGdldFBhcnNlZFR5cGUoZGF0YSksXG4gICAgICAgIH07XG4gICAgICAgIGlmICghdGhpc1tcIn5zdGFuZGFyZFwiXS5hc3luYykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9wYXJzZVN5bmMoeyBkYXRhLCBwYXRoOiBbXSwgcGFyZW50OiBjdHggfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlzVmFsaWQocmVzdWx0KVxuICAgICAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpc3N1ZXM6IGN0eC5jb21tb24uaXNzdWVzLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGlmIChlcnI/Lm1lc3NhZ2U/LnRvTG93ZXJDYXNlKCk/LmluY2x1ZGVzKFwiZW5jb3VudGVyZWRcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpc1tcIn5zdGFuZGFyZFwiXS5hc3luYyA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGN0eC5jb21tb24gPSB7XG4gICAgICAgICAgICAgICAgICAgIGlzc3VlczogW10sXG4gICAgICAgICAgICAgICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX3BhcnNlQXN5bmMoeyBkYXRhLCBwYXRoOiBbXSwgcGFyZW50OiBjdHggfSkudGhlbigocmVzdWx0KSA9PiBpc1ZhbGlkKHJlc3VsdClcbiAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHQudmFsdWUsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICBpc3N1ZXM6IGN0eC5jb21tb24uaXNzdWVzLFxuICAgICAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIHBhcnNlQXN5bmMoZGF0YSwgcGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuc2FmZVBhcnNlQXN5bmMoZGF0YSwgcGFyYW1zKTtcbiAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5kYXRhO1xuICAgICAgICB0aHJvdyByZXN1bHQuZXJyb3I7XG4gICAgfVxuICAgIGFzeW5jIHNhZmVQYXJzZUFzeW5jKGRhdGEsIHBhcmFtcykge1xuICAgICAgICBjb25zdCBjdHggPSB7XG4gICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgIGNvbnRleHR1YWxFcnJvck1hcDogcGFyYW1zPy5lcnJvck1hcCxcbiAgICAgICAgICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwYXRoOiBwYXJhbXM/LnBhdGggfHwgW10sXG4gICAgICAgICAgICBzY2hlbWFFcnJvck1hcDogdGhpcy5fZGVmLmVycm9yTWFwLFxuICAgICAgICAgICAgcGFyZW50OiBudWxsLFxuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHBhcnNlZFR5cGU6IGdldFBhcnNlZFR5cGUoZGF0YSksXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IG1heWJlQXN5bmNSZXN1bHQgPSB0aGlzLl9wYXJzZSh7IGRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgKGlzQXN5bmMobWF5YmVBc3luY1Jlc3VsdCkgPyBtYXliZUFzeW5jUmVzdWx0IDogUHJvbWlzZS5yZXNvbHZlKG1heWJlQXN5bmNSZXN1bHQpKTtcbiAgICAgICAgcmV0dXJuIGhhbmRsZVJlc3VsdChjdHgsIHJlc3VsdCk7XG4gICAgfVxuICAgIHJlZmluZShjaGVjaywgbWVzc2FnZSkge1xuICAgICAgICBjb25zdCBnZXRJc3N1ZVByb3BlcnRpZXMgPSAodmFsKSA9PiB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgPT09IFwic3RyaW5nXCIgfHwgdHlwZW9mIG1lc3NhZ2UgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBtZXNzYWdlIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgbWVzc2FnZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2UodmFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVmaW5lbWVudCgodmFsLCBjdHgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGNoZWNrKHZhbCk7XG4gICAgICAgICAgICBjb25zdCBzZXRFcnJvciA9ICgpID0+IGN0eC5hZGRJc3N1ZSh7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmN1c3RvbSxcbiAgICAgICAgICAgICAgICAuLi5nZXRJc3N1ZVByb3BlcnRpZXModmFsKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBQcm9taXNlICE9PSBcInVuZGVmaW5lZFwiICYmIHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0LnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRFcnJvcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghcmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgc2V0RXJyb3IoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlZmluZW1lbnQoY2hlY2ssIHJlZmluZW1lbnREYXRhKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZWZpbmVtZW50KCh2YWwsIGN0eCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFjaGVjayh2YWwpKSB7XG4gICAgICAgICAgICAgICAgY3R4LmFkZElzc3VlKHR5cGVvZiByZWZpbmVtZW50RGF0YSA9PT0gXCJmdW5jdGlvblwiID8gcmVmaW5lbWVudERhdGEodmFsLCBjdHgpIDogcmVmaW5lbWVudERhdGEpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX3JlZmluZW1lbnQocmVmaW5lbWVudCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEVmZmVjdHMoe1xuICAgICAgICAgICAgc2NoZW1hOiB0aGlzLFxuICAgICAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFZmZlY3RzLFxuICAgICAgICAgICAgZWZmZWN0OiB7IHR5cGU6IFwicmVmaW5lbWVudFwiLCByZWZpbmVtZW50IH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdXBlclJlZmluZShyZWZpbmVtZW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZWZpbmVtZW50KHJlZmluZW1lbnQpO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihkZWYpIHtcbiAgICAgICAgLyoqIEFsaWFzIG9mIHNhZmVQYXJzZUFzeW5jICovXG4gICAgICAgIHRoaXMuc3BhID0gdGhpcy5zYWZlUGFyc2VBc3luYztcbiAgICAgICAgdGhpcy5fZGVmID0gZGVmO1xuICAgICAgICB0aGlzLnBhcnNlID0gdGhpcy5wYXJzZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnNhZmVQYXJzZSA9IHRoaXMuc2FmZVBhcnNlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucGFyc2VBc3luYyA9IHRoaXMucGFyc2VBc3luYy5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnNhZmVQYXJzZUFzeW5jID0gdGhpcy5zYWZlUGFyc2VBc3luYy5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnNwYSA9IHRoaXMuc3BhLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucmVmaW5lID0gdGhpcy5yZWZpbmUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5yZWZpbmVtZW50ID0gdGhpcy5yZWZpbmVtZW50LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuc3VwZXJSZWZpbmUgPSB0aGlzLnN1cGVyUmVmaW5lLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub3B0aW9uYWwgPSB0aGlzLm9wdGlvbmFsLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMubnVsbGFibGUgPSB0aGlzLm51bGxhYmxlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMubnVsbGlzaCA9IHRoaXMubnVsbGlzaC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmFycmF5ID0gdGhpcy5hcnJheS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnByb21pc2UgPSB0aGlzLnByb21pc2UuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5vciA9IHRoaXMub3IuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5hbmQgPSB0aGlzLmFuZC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnRyYW5zZm9ybSA9IHRoaXMudHJhbnNmb3JtLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuYnJhbmQgPSB0aGlzLmJyYW5kLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuZGVmYXVsdCA9IHRoaXMuZGVmYXVsdC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmNhdGNoID0gdGhpcy5jYXRjaC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmRlc2NyaWJlID0gdGhpcy5kZXNjcmliZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnBpcGUgPSB0aGlzLnBpcGUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5yZWFkb25seSA9IHRoaXMucmVhZG9ubHkuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5pc051bGxhYmxlID0gdGhpcy5pc051bGxhYmxlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaXNPcHRpb25hbCA9IHRoaXMuaXNPcHRpb25hbC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzW1wifnN0YW5kYXJkXCJdID0ge1xuICAgICAgICAgICAgdmVyc2lvbjogMSxcbiAgICAgICAgICAgIHZlbmRvcjogXCJ6b2RcIixcbiAgICAgICAgICAgIHZhbGlkYXRlOiAoZGF0YSkgPT4gdGhpc1tcIn52YWxpZGF0ZVwiXShkYXRhKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgb3B0aW9uYWwoKSB7XG4gICAgICAgIHJldHVybiBab2RPcHRpb25hbC5jcmVhdGUodGhpcywgdGhpcy5fZGVmKTtcbiAgICB9XG4gICAgbnVsbGFibGUoKSB7XG4gICAgICAgIHJldHVybiBab2ROdWxsYWJsZS5jcmVhdGUodGhpcywgdGhpcy5fZGVmKTtcbiAgICB9XG4gICAgbnVsbGlzaCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubnVsbGFibGUoKS5vcHRpb25hbCgpO1xuICAgIH1cbiAgICBhcnJheSgpIHtcbiAgICAgICAgcmV0dXJuIFpvZEFycmF5LmNyZWF0ZSh0aGlzKTtcbiAgICB9XG4gICAgcHJvbWlzZSgpIHtcbiAgICAgICAgcmV0dXJuIFpvZFByb21pc2UuY3JlYXRlKHRoaXMsIHRoaXMuX2RlZik7XG4gICAgfVxuICAgIG9yKG9wdGlvbikge1xuICAgICAgICByZXR1cm4gWm9kVW5pb24uY3JlYXRlKFt0aGlzLCBvcHRpb25dLCB0aGlzLl9kZWYpO1xuICAgIH1cbiAgICBhbmQoaW5jb21pbmcpIHtcbiAgICAgICAgcmV0dXJuIFpvZEludGVyc2VjdGlvbi5jcmVhdGUodGhpcywgaW5jb21pbmcsIHRoaXMuX2RlZik7XG4gICAgfVxuICAgIHRyYW5zZm9ybSh0cmFuc2Zvcm0pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RFZmZlY3RzKHtcbiAgICAgICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXModGhpcy5fZGVmKSxcbiAgICAgICAgICAgIHNjaGVtYTogdGhpcyxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRWZmZWN0cyxcbiAgICAgICAgICAgIGVmZmVjdDogeyB0eXBlOiBcInRyYW5zZm9ybVwiLCB0cmFuc2Zvcm0gfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGRlZmF1bHQoZGVmKSB7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRWYWx1ZUZ1bmMgPSB0eXBlb2YgZGVmID09PSBcImZ1bmN0aW9uXCIgPyBkZWYgOiAoKSA9PiBkZWY7XG4gICAgICAgIHJldHVybiBuZXcgWm9kRGVmYXVsdCh7XG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHRoaXMuX2RlZiksXG4gICAgICAgICAgICBpbm5lclR5cGU6IHRoaXMsXG4gICAgICAgICAgICBkZWZhdWx0VmFsdWU6IGRlZmF1bHRWYWx1ZUZ1bmMsXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZERlZmF1bHQsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBicmFuZCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RCcmFuZGVkKHtcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQnJhbmRlZCxcbiAgICAgICAgICAgIHR5cGU6IHRoaXMsXG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHRoaXMuX2RlZiksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjYXRjaChkZWYpIHtcbiAgICAgICAgY29uc3QgY2F0Y2hWYWx1ZUZ1bmMgPSB0eXBlb2YgZGVmID09PSBcImZ1bmN0aW9uXCIgPyBkZWYgOiAoKSA9PiBkZWY7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQ2F0Y2goe1xuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyh0aGlzLl9kZWYpLFxuICAgICAgICAgICAgaW5uZXJUeXBlOiB0aGlzLFxuICAgICAgICAgICAgY2F0Y2hWYWx1ZTogY2F0Y2hWYWx1ZUZ1bmMsXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZENhdGNoLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZGVzY3JpYmUoZGVzY3JpcHRpb24pIHtcbiAgICAgICAgY29uc3QgVGhpcyA9IHRoaXMuY29uc3RydWN0b3I7XG4gICAgICAgIHJldHVybiBuZXcgVGhpcyh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHBpcGUodGFyZ2V0KSB7XG4gICAgICAgIHJldHVybiBab2RQaXBlbGluZS5jcmVhdGUodGhpcywgdGFyZ2V0KTtcbiAgICB9XG4gICAgcmVhZG9ubHkoKSB7XG4gICAgICAgIHJldHVybiBab2RSZWFkb25seS5jcmVhdGUodGhpcyk7XG4gICAgfVxuICAgIGlzT3B0aW9uYWwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNhZmVQYXJzZSh1bmRlZmluZWQpLnN1Y2Nlc3M7XG4gICAgfVxuICAgIGlzTnVsbGFibGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNhZmVQYXJzZShudWxsKS5zdWNjZXNzO1xuICAgIH1cbn1cbmNvbnN0IGN1aWRSZWdleCA9IC9eY1teXFxzLV17OCx9JC9pO1xuY29uc3QgY3VpZDJSZWdleCA9IC9eWzAtOWEtel0rJC87XG5jb25zdCB1bGlkUmVnZXggPSAvXlswLTlBLUhKS01OUC1UVi1aXXsyNn0kL2k7XG4vLyBjb25zdCB1dWlkUmVnZXggPVxuLy8gICAvXihbYS1mMC05XXs4fS1bYS1mMC05XXs0fS1bMS01XVthLWYwLTldezN9LVthLWYwLTldezR9LVthLWYwLTldezEyfXwwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDApJC9pO1xuY29uc3QgdXVpZFJlZ2V4ID0gL15bMC05YS1mQS1GXXs4fVxcYi1bMC05YS1mQS1GXXs0fVxcYi1bMC05YS1mQS1GXXs0fVxcYi1bMC05YS1mQS1GXXs0fVxcYi1bMC05YS1mQS1GXXsxMn0kL2k7XG5jb25zdCBuYW5vaWRSZWdleCA9IC9eW2EtejAtOV8tXXsyMX0kL2k7XG5jb25zdCBqd3RSZWdleCA9IC9eW0EtWmEtejAtOS1fXStcXC5bQS1aYS16MC05LV9dK1xcLltBLVphLXowLTktX10qJC87XG5jb25zdCBkdXJhdGlvblJlZ2V4ID0gL15bLStdP1AoPyEkKSg/Oig/OlstK10/XFxkK1kpfCg/OlstK10/XFxkK1suLF1cXGQrWSQpKT8oPzooPzpbLStdP1xcZCtNKXwoPzpbLStdP1xcZCtbLixdXFxkK00kKSk/KD86KD86Wy0rXT9cXGQrVyl8KD86Wy0rXT9cXGQrWy4sXVxcZCtXJCkpPyg/Oig/OlstK10/XFxkK0QpfCg/OlstK10/XFxkK1suLF1cXGQrRCQpKT8oPzpUKD89W1xcZCstXSkoPzooPzpbLStdP1xcZCtIKXwoPzpbLStdP1xcZCtbLixdXFxkK0gkKSk/KD86KD86Wy0rXT9cXGQrTSl8KD86Wy0rXT9cXGQrWy4sXVxcZCtNJCkpPyg/OlstK10/XFxkKyg/OlsuLF1cXGQrKT9TKT8pPz8kLztcbi8vIGZyb20gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzQ2MTgxLzE1NTAxNTVcbi8vIG9sZCB2ZXJzaW9uOiB0b28gc2xvdywgZGlkbid0IHN1cHBvcnQgdW5pY29kZVxuLy8gY29uc3QgZW1haWxSZWdleCA9IC9eKCgoW2Etel18XFxkfFshI1xcJCUmJ1xcKlxcK1xcLVxcLz1cXD9cXF5fYHtcXHx9fl18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKyhcXC4oW2Etel18XFxkfFshI1xcJCUmJ1xcKlxcK1xcLVxcLz1cXD9cXF5fYHtcXHx9fl18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKykqKXwoKFxceDIyKSgoKChcXHgyMHxcXHgwOSkqKFxceDBkXFx4MGEpKT8oXFx4MjB8XFx4MDkpKyk/KChbXFx4MDEtXFx4MDhcXHgwYlxceDBjXFx4MGUtXFx4MWZcXHg3Zl18XFx4MjF8W1xceDIzLVxceDViXXxbXFx4NWQtXFx4N2VdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoXFxcXChbXFx4MDEtXFx4MDlcXHgwYlxceDBjXFx4MGQtXFx4N2ZdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpKSooKChcXHgyMHxcXHgwOSkqKFxceDBkXFx4MGEpKT8oXFx4MjB8XFx4MDkpKyk/KFxceDIyKSkpQCgoKFthLXpdfFxcZHxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KChbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKihbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSlcXC4pKygoW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCgoW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKihbYS16XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKSQvaTtcbi8vb2xkIGVtYWlsIHJlZ2V4XG4vLyBjb25zdCBlbWFpbFJlZ2V4ID0gL14oKFtePD4oKVtcXF0uLDs6XFxzQFwiXSsoXFwuW148PigpW1xcXS4sOzpcXHNAXCJdKykqKXwoXCIuK1wiKSlAKCg/IS0pKFtePD4oKVtcXF0uLDs6XFxzQFwiXStcXC4pK1tePD4oKVtcXF0uLDs6XFxzQFwiXXsxLH0pW14tPD4oKVtcXF0uLDs6XFxzQFwiXSQvaTtcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuLy8gY29uc3QgZW1haWxSZWdleCA9XG4vLyAgIC9eKChbXjw+KClbXFxdXFxcXC4sOzpcXHNAXFxcIl0rKFxcLltePD4oKVtcXF1cXFxcLiw7Olxcc0BcXFwiXSspKil8KFxcXCIuK1xcXCIpKUAoKFxcWygoKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKVxcLil7M30oKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKVxcXSl8KFxcW0lQdjY6KChbYS1mMC05XXsxLDR9Oil7N318OjooW2EtZjAtOV17MSw0fTopezAsNn18KFthLWYwLTldezEsNH06KXsxfTooW2EtZjAtOV17MSw0fTopezAsNX18KFthLWYwLTldezEsNH06KXsyfTooW2EtZjAtOV17MSw0fTopezAsNH18KFthLWYwLTldezEsNH06KXszfTooW2EtZjAtOV17MSw0fTopezAsM318KFthLWYwLTldezEsNH06KXs0fTooW2EtZjAtOV17MSw0fTopezAsMn18KFthLWYwLTldezEsNH06KXs1fTooW2EtZjAtOV17MSw0fTopezAsMX0pKFthLWYwLTldezEsNH18KCgoMjVbMC01XSl8KDJbMC00XVswLTldKXwoMVswLTldezJ9KXwoWzAtOV17MSwyfSkpXFwuKXszfSgoMjVbMC01XSl8KDJbMC00XVswLTldKXwoMVswLTldezJ9KXwoWzAtOV17MSwyfSkpKVxcXSl8KFtBLVphLXowLTldKFtBLVphLXowLTktXSpbQS1aYS16MC05XSkqKFxcLltBLVphLXpdezIsfSkrKSkkLztcbi8vIGNvbnN0IGVtYWlsUmVnZXggPVxuLy8gICAvXlthLXpBLVowLTlcXC5cXCFcXCNcXCRcXCVcXCZcXCdcXCpcXCtcXC9cXD1cXD9cXF5cXF9cXGBcXHtcXHxcXH1cXH5cXC1dK0BbYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8oPzpcXC5bYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8pKiQvO1xuLy8gY29uc3QgZW1haWxSZWdleCA9XG4vLyAgIC9eKD86W2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKyg/OlxcLlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSspKnxcIig/OltcXHgwMS1cXHgwOFxceDBiXFx4MGNcXHgwZS1cXHgxZlxceDIxXFx4MjMtXFx4NWJcXHg1ZC1cXHg3Zl18XFxcXFtcXHgwMS1cXHgwOVxceDBiXFx4MGNcXHgwZS1cXHg3Zl0pKlwiKUAoPzooPzpbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XFwuKStbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/fFxcWyg/Oig/OjI1WzAtNV18MlswLTRdWzAtOV18WzAxXT9bMC05XVswLTldPylcXC4pezN9KD86MjVbMC01XXwyWzAtNF1bMC05XXxbMDFdP1swLTldWzAtOV0/fFthLXowLTktXSpbYS16MC05XTooPzpbXFx4MDEtXFx4MDhcXHgwYlxceDBjXFx4MGUtXFx4MWZcXHgyMS1cXHg1YVxceDUzLVxceDdmXXxcXFxcW1xceDAxLVxceDA5XFx4MGJcXHgwY1xceDBlLVxceDdmXSkrKVxcXSkkL2k7XG5jb25zdCBlbWFpbFJlZ2V4ID0gL14oPyFcXC4pKD8hLipcXC5cXC4pKFtBLVowLTlfJytcXC1cXC5dKilbQS1aMC05XystXUAoW0EtWjAtOV1bQS1aMC05XFwtXSpcXC4pK1tBLVpdezIsfSQvaTtcbi8vIGNvbnN0IGVtYWlsUmVnZXggPVxuLy8gICAvXlthLXowLTkuISMkJSbigJkqKy89P15fYHt8fX4tXStAW2EtejAtOS1dKyg/OlxcLlthLXowLTlcXC1dKykqJC9pO1xuLy8gZnJvbSBodHRwczovL3RoZWtldmluc2NvdHQuY29tL2Vtb2ppcy1pbi1qYXZhc2NyaXB0LyN3cml0aW5nLWEtcmVndWxhci1leHByZXNzaW9uXG5jb25zdCBfZW1vamlSZWdleCA9IGBeKFxcXFxwe0V4dGVuZGVkX1BpY3RvZ3JhcGhpY318XFxcXHB7RW1vamlfQ29tcG9uZW50fSkrJGA7XG5sZXQgZW1vamlSZWdleDtcbi8vIGZhc3Rlciwgc2ltcGxlciwgc2FmZXJcbmNvbnN0IGlwdjRSZWdleCA9IC9eKD86KD86MjVbMC01XXwyWzAtNF1bMC05XXwxWzAtOV1bMC05XXxbMS05XVswLTldfFswLTldKVxcLil7M30oPzoyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldWzAtOV18WzAtOV0pJC87XG5jb25zdCBpcHY0Q2lkclJlZ2V4ID0gL14oPzooPzoyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldWzAtOV18WzAtOV0pXFwuKXszfSg/OjI1WzAtNV18MlswLTRdWzAtOV18MVswLTldWzAtOV18WzEtOV1bMC05XXxbMC05XSlcXC8oM1swLTJdfFsxMl0/WzAtOV0pJC87XG4vLyBjb25zdCBpcHY2UmVnZXggPVxuLy8gL14oKFthLWYwLTldezEsNH06KXs3fXw6OihbYS1mMC05XXsxLDR9Oil7MCw2fXwoW2EtZjAtOV17MSw0fTopezF9OihbYS1mMC05XXsxLDR9Oil7MCw1fXwoW2EtZjAtOV17MSw0fTopezJ9OihbYS1mMC05XXsxLDR9Oil7MCw0fXwoW2EtZjAtOV17MSw0fTopezN9OihbYS1mMC05XXsxLDR9Oil7MCwzfXwoW2EtZjAtOV17MSw0fTopezR9OihbYS1mMC05XXsxLDR9Oil7MCwyfXwoW2EtZjAtOV17MSw0fTopezV9OihbYS1mMC05XXsxLDR9Oil7MCwxfSkoW2EtZjAtOV17MSw0fXwoKCgyNVswLTVdKXwoMlswLTRdWzAtOV0pfCgxWzAtOV17Mn0pfChbMC05XXsxLDJ9KSlcXC4pezN9KCgyNVswLTVdKXwoMlswLTRdWzAtOV0pfCgxWzAtOV17Mn0pfChbMC05XXsxLDJ9KSkpJC87XG5jb25zdCBpcHY2UmVnZXggPSAvXigoWzAtOWEtZkEtRl17MSw0fTopezcsN31bMC05YS1mQS1GXXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw3fTp8KFswLTlhLWZBLUZdezEsNH06KXsxLDZ9OlswLTlhLWZBLUZdezEsNH18KFswLTlhLWZBLUZdezEsNH06KXsxLDV9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDJ9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw0fSg6WzAtOWEtZkEtRl17MSw0fSl7MSwzfXwoWzAtOWEtZkEtRl17MSw0fTopezEsM30oOlswLTlhLWZBLUZdezEsNH0pezEsNH18KFswLTlhLWZBLUZdezEsNH06KXsxLDJ9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDV9fFswLTlhLWZBLUZdezEsNH06KCg6WzAtOWEtZkEtRl17MSw0fSl7MSw2fSl8OigoOlswLTlhLWZBLUZdezEsNH0pezEsN318Oil8ZmU4MDooOlswLTlhLWZBLUZdezAsNH0pezAsNH0lWzAtOWEtekEtWl17MSx9fDo6KGZmZmYoOjB7MSw0fSl7MCwxfTopezAsMX0oKDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKVxcLil7MywzfSgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSl8KFswLTlhLWZBLUZdezEsNH06KXsxLDR9OigoMjVbMC01XXwoMlswLTRdfDF7MCwxfVswLTldKXswLDF9WzAtOV0pXFwuKXszLDN9KDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKSkkLztcbmNvbnN0IGlwdjZDaWRyUmVnZXggPSAvXigoWzAtOWEtZkEtRl17MSw0fTopezcsN31bMC05YS1mQS1GXXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw3fTp8KFswLTlhLWZBLUZdezEsNH06KXsxLDZ9OlswLTlhLWZBLUZdezEsNH18KFswLTlhLWZBLUZdezEsNH06KXsxLDV9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDJ9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw0fSg6WzAtOWEtZkEtRl17MSw0fSl7MSwzfXwoWzAtOWEtZkEtRl17MSw0fTopezEsM30oOlswLTlhLWZBLUZdezEsNH0pezEsNH18KFswLTlhLWZBLUZdezEsNH06KXsxLDJ9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDV9fFswLTlhLWZBLUZdezEsNH06KCg6WzAtOWEtZkEtRl17MSw0fSl7MSw2fSl8OigoOlswLTlhLWZBLUZdezEsNH0pezEsN318Oil8ZmU4MDooOlswLTlhLWZBLUZdezAsNH0pezAsNH0lWzAtOWEtekEtWl17MSx9fDo6KGZmZmYoOjB7MSw0fSl7MCwxfTopezAsMX0oKDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKVxcLil7MywzfSgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSl8KFswLTlhLWZBLUZdezEsNH06KXsxLDR9OigoMjVbMC01XXwoMlswLTRdfDF7MCwxfVswLTldKXswLDF9WzAtOV0pXFwuKXszLDN9KDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKSlcXC8oMTJbMC04XXwxWzAxXVswLTldfFsxLTldP1swLTldKSQvO1xuLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNzg2MDM5Mi9kZXRlcm1pbmUtaWYtc3RyaW5nLWlzLWluLWJhc2U2NC11c2luZy1qYXZhc2NyaXB0XG5jb25zdCBiYXNlNjRSZWdleCA9IC9eKFswLTlhLXpBLVorL117NH0pKigoWzAtOWEtekEtWisvXXsyfT09KXwoWzAtOWEtekEtWisvXXszfT0pKT8kLztcbi8vIGh0dHBzOi8vYmFzZTY0Lmd1cnUvc3RhbmRhcmRzL2Jhc2U2NHVybFxuY29uc3QgYmFzZTY0dXJsUmVnZXggPSAvXihbMC05YS16QS1aLV9dezR9KSooKFswLTlhLXpBLVotX117Mn0oPT0pPyl8KFswLTlhLXpBLVotX117M30oPSk/KSk/JC87XG4vLyBzaW1wbGVcbi8vIGNvbnN0IGRhdGVSZWdleFNvdXJjZSA9IGBcXFxcZHs0fS1cXFxcZHsyfS1cXFxcZHsyfWA7XG4vLyBubyBsZWFwIHllYXIgdmFsaWRhdGlvblxuLy8gY29uc3QgZGF0ZVJlZ2V4U291cmNlID0gYFxcXFxkezR9LSgoMFsxMzU3OF18MTB8MTIpLTMxfCgwWzEzLTldfDFbMC0yXSktMzB8KDBbMS05XXwxWzAtMl0pLSgwWzEtOV18MVxcXFxkfDJcXFxcZCkpYDtcbi8vIHdpdGggbGVhcCB5ZWFyIHZhbGlkYXRpb25cbmNvbnN0IGRhdGVSZWdleFNvdXJjZSA9IGAoKFxcXFxkXFxcXGRbMjQ2OF1bMDQ4XXxcXFxcZFxcXFxkWzEzNTc5XVsyNl18XFxcXGRcXFxcZDBbNDhdfFswMjQ2OF1bMDQ4XTAwfFsxMzU3OV1bMjZdMDApLTAyLTI5fFxcXFxkezR9LSgoMFsxMzU3OF18MVswMl0pLSgwWzEtOV18WzEyXVxcXFxkfDNbMDFdKXwoMFs0NjldfDExKS0oMFsxLTldfFsxMl1cXFxcZHwzMCl8KDAyKS0oMFsxLTldfDFcXFxcZHwyWzAtOF0pKSlgO1xuY29uc3QgZGF0ZVJlZ2V4ID0gbmV3IFJlZ0V4cChgXiR7ZGF0ZVJlZ2V4U291cmNlfSRgKTtcbmZ1bmN0aW9uIHRpbWVSZWdleFNvdXJjZShhcmdzKSB7XG4gICAgbGV0IHNlY29uZHNSZWdleFNvdXJjZSA9IGBbMC01XVxcXFxkYDtcbiAgICBpZiAoYXJncy5wcmVjaXNpb24pIHtcbiAgICAgICAgc2Vjb25kc1JlZ2V4U291cmNlID0gYCR7c2Vjb25kc1JlZ2V4U291cmNlfVxcXFwuXFxcXGR7JHthcmdzLnByZWNpc2lvbn19YDtcbiAgICB9XG4gICAgZWxzZSBpZiAoYXJncy5wcmVjaXNpb24gPT0gbnVsbCkge1xuICAgICAgICBzZWNvbmRzUmVnZXhTb3VyY2UgPSBgJHtzZWNvbmRzUmVnZXhTb3VyY2V9KFxcXFwuXFxcXGQrKT9gO1xuICAgIH1cbiAgICBjb25zdCBzZWNvbmRzUXVhbnRpZmllciA9IGFyZ3MucHJlY2lzaW9uID8gXCIrXCIgOiBcIj9cIjsgLy8gcmVxdWlyZSBzZWNvbmRzIGlmIHByZWNpc2lvbiBpcyBub256ZXJvXG4gICAgcmV0dXJuIGAoWzAxXVxcXFxkfDJbMC0zXSk6WzAtNV1cXFxcZCg6JHtzZWNvbmRzUmVnZXhTb3VyY2V9KSR7c2Vjb25kc1F1YW50aWZpZXJ9YDtcbn1cbmZ1bmN0aW9uIHRpbWVSZWdleChhcmdzKSB7XG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoYF4ke3RpbWVSZWdleFNvdXJjZShhcmdzKX0kYCk7XG59XG4vLyBBZGFwdGVkIGZyb20gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzMxNDMyMzFcbmV4cG9ydCBmdW5jdGlvbiBkYXRldGltZVJlZ2V4KGFyZ3MpIHtcbiAgICBsZXQgcmVnZXggPSBgJHtkYXRlUmVnZXhTb3VyY2V9VCR7dGltZVJlZ2V4U291cmNlKGFyZ3MpfWA7XG4gICAgY29uc3Qgb3B0cyA9IFtdO1xuICAgIG9wdHMucHVzaChhcmdzLmxvY2FsID8gYFo/YCA6IGBaYCk7XG4gICAgaWYgKGFyZ3Mub2Zmc2V0KVxuICAgICAgICBvcHRzLnB1c2goYChbKy1dXFxcXGR7Mn06P1xcXFxkezJ9KWApO1xuICAgIHJlZ2V4ID0gYCR7cmVnZXh9KCR7b3B0cy5qb2luKFwifFwiKX0pYDtcbiAgICByZXR1cm4gbmV3IFJlZ0V4cChgXiR7cmVnZXh9JGApO1xufVxuZnVuY3Rpb24gaXNWYWxpZElQKGlwLCB2ZXJzaW9uKSB7XG4gICAgaWYgKCh2ZXJzaW9uID09PSBcInY0XCIgfHwgIXZlcnNpb24pICYmIGlwdjRSZWdleC50ZXN0KGlwKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKCh2ZXJzaW9uID09PSBcInY2XCIgfHwgIXZlcnNpb24pICYmIGlwdjZSZWdleC50ZXN0KGlwKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gaXNWYWxpZEpXVChqd3QsIGFsZykge1xuICAgIGlmICghand0UmVnZXgudGVzdChqd3QpKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgW2hlYWRlcl0gPSBqd3Quc3BsaXQoXCIuXCIpO1xuICAgICAgICBpZiAoIWhlYWRlcilcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgLy8gQ29udmVydCBiYXNlNjR1cmwgdG8gYmFzZTY0XG4gICAgICAgIGNvbnN0IGJhc2U2NCA9IGhlYWRlclxuICAgICAgICAgICAgLnJlcGxhY2UoLy0vZywgXCIrXCIpXG4gICAgICAgICAgICAucmVwbGFjZSgvXy9nLCBcIi9cIilcbiAgICAgICAgICAgIC5wYWRFbmQoaGVhZGVyLmxlbmd0aCArICgoNCAtIChoZWFkZXIubGVuZ3RoICUgNCkpICUgNCksIFwiPVwiKTtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBjb25zdCBkZWNvZGVkID0gSlNPTi5wYXJzZShhdG9iKGJhc2U2NCkpO1xuICAgICAgICBpZiAodHlwZW9mIGRlY29kZWQgIT09IFwib2JqZWN0XCIgfHwgZGVjb2RlZCA9PT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKFwidHlwXCIgaW4gZGVjb2RlZCAmJiBkZWNvZGVkPy50eXAgIT09IFwiSldUXCIpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmICghZGVjb2RlZC5hbGcpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmIChhbGcgJiYgZGVjb2RlZC5hbGcgIT09IGFsZylcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGNhdGNoIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGlzVmFsaWRDaWRyKGlwLCB2ZXJzaW9uKSB7XG4gICAgaWYgKCh2ZXJzaW9uID09PSBcInY0XCIgfHwgIXZlcnNpb24pICYmIGlwdjRDaWRyUmVnZXgudGVzdChpcCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmICgodmVyc2lvbiA9PT0gXCJ2NlwiIHx8ICF2ZXJzaW9uKSAmJiBpcHY2Q2lkclJlZ2V4LnRlc3QoaXApKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5leHBvcnQgY2xhc3MgWm9kU3RyaW5nIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGlmICh0aGlzLl9kZWYuY29lcmNlKSB7XG4gICAgICAgICAgICBpbnB1dC5kYXRhID0gU3RyaW5nKGlucHV0LmRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuc3RyaW5nKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnN0cmluZyxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN0YXR1cyA9IG5ldyBQYXJzZVN0YXR1cygpO1xuICAgICAgICBsZXQgY3R4ID0gdW5kZWZpbmVkO1xuICAgICAgICBmb3IgKGNvbnN0IGNoZWNrIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaGVjay5raW5kID09PSBcIm1pblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0LmRhdGEubGVuZ3RoIDwgY2hlY2sudmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm1heFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0LmRhdGEubGVuZ3RoID4gY2hlY2sudmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBleGFjdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJsZW5ndGhcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb0JpZyA9IGlucHV0LmRhdGEubGVuZ3RoID4gY2hlY2sudmFsdWU7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9vU21hbGwgPSBpbnB1dC5kYXRhLmxlbmd0aCA8IGNoZWNrLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmICh0b29CaWcgfHwgdG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0b29CaWcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heGltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0b29TbWFsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGFjdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJlbWFpbFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFlbWFpbFJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJlbWFpbFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiZW1vamlcIikge1xuICAgICAgICAgICAgICAgIGlmICghZW1vamlSZWdleCkge1xuICAgICAgICAgICAgICAgICAgICBlbW9qaVJlZ2V4ID0gbmV3IFJlZ0V4cChfZW1vamlSZWdleCwgXCJ1XCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWVtb2ppUmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImVtb2ppXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ1dWlkXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXV1aWRSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwidXVpZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibmFub2lkXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIW5hbm9pZFJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJuYW5vaWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImN1aWRcIikge1xuICAgICAgICAgICAgICAgIGlmICghY3VpZFJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJjdWlkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJjdWlkMlwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFjdWlkMlJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJjdWlkMlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidWxpZFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF1bGlkUmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcInVsaWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInVybFwiKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgICAgICAgICBuZXcgVVJMKGlucHV0LmRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwidXJsXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJyZWdleFwiKSB7XG4gICAgICAgICAgICAgICAgY2hlY2sucmVnZXgubGFzdEluZGV4ID0gMDtcbiAgICAgICAgICAgICAgICBjb25zdCB0ZXN0UmVzdWx0ID0gY2hlY2sucmVnZXgudGVzdChpbnB1dC5kYXRhKTtcbiAgICAgICAgICAgICAgICBpZiAoIXRlc3RSZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJyZWdleFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidHJpbVwiKSB7XG4gICAgICAgICAgICAgICAgaW5wdXQuZGF0YSA9IGlucHV0LmRhdGEudHJpbSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJpbmNsdWRlc1wiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpbnB1dC5kYXRhLmluY2x1ZGVzKGNoZWNrLnZhbHVlLCBjaGVjay5wb3NpdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogeyBpbmNsdWRlczogY2hlY2sudmFsdWUsIHBvc2l0aW9uOiBjaGVjay5wb3NpdGlvbiB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidG9Mb3dlckNhc2VcIikge1xuICAgICAgICAgICAgICAgIGlucHV0LmRhdGEgPSBpbnB1dC5kYXRhLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInRvVXBwZXJDYXNlXCIpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC5kYXRhID0gaW5wdXQuZGF0YS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJzdGFydHNXaXRoXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlucHV0LmRhdGEuc3RhcnRzV2l0aChjaGVjay52YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogeyBzdGFydHNXaXRoOiBjaGVjay52YWx1ZSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiZW5kc1dpdGhcIikge1xuICAgICAgICAgICAgICAgIGlmICghaW5wdXQuZGF0YS5lbmRzV2l0aChjaGVjay52YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogeyBlbmRzV2l0aDogY2hlY2sudmFsdWUgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImRhdGV0aW1lXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWdleCA9IGRhdGV0aW1lUmVnZXgoY2hlY2spO1xuICAgICAgICAgICAgICAgIGlmICghcmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImRhdGV0aW1lXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJkYXRlXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWdleCA9IGRhdGVSZWdleDtcbiAgICAgICAgICAgICAgICBpZiAoIXJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJkYXRlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ0aW1lXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWdleCA9IHRpbWVSZWdleChjaGVjayk7XG4gICAgICAgICAgICAgICAgaWYgKCFyZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwidGltZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiZHVyYXRpb25cIikge1xuICAgICAgICAgICAgICAgIGlmICghZHVyYXRpb25SZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiZHVyYXRpb25cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImlwXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlzVmFsaWRJUChpbnB1dC5kYXRhLCBjaGVjay52ZXJzaW9uKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImlwXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJqd3RcIikge1xuICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZEpXVChpbnB1dC5kYXRhLCBjaGVjay5hbGcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiand0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJjaWRyXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlzVmFsaWRDaWRyKGlucHV0LmRhdGEsIGNoZWNrLnZlcnNpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiY2lkclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiYmFzZTY0XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWJhc2U2NFJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJiYXNlNjRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImJhc2U2NHVybFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFiYXNlNjR1cmxSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiYmFzZTY0dXJsXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdXRpbC5hc3NlcnROZXZlcihjaGVjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBpbnB1dC5kYXRhIH07XG4gICAgfVxuICAgIF9yZWdleChyZWdleCwgdmFsaWRhdGlvbiwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWZpbmVtZW50KChkYXRhKSA9PiByZWdleC50ZXN0KGRhdGEpLCB7XG4gICAgICAgICAgICB2YWxpZGF0aW9uLFxuICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX2FkZENoZWNrKGNoZWNrKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU3RyaW5nKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIGNoZWNrXSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVtYWlsKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJlbWFpbFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIHVybChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwidXJsXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgZW1vamkobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImVtb2ppXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgdXVpZChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwidXVpZFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIG5hbm9pZChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwibmFub2lkXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgY3VpZChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiY3VpZFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIGN1aWQyKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJjdWlkMlwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIHVsaWQobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcInVsaWRcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICBiYXNlNjQobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImJhc2U2NFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIGJhc2U2NHVybChtZXNzYWdlKSB7XG4gICAgICAgIC8vIGJhc2U2NHVybCBlbmNvZGluZyBpcyBhIG1vZGlmaWNhdGlvbiBvZiBiYXNlNjQgdGhhdCBjYW4gc2FmZWx5IGJlIHVzZWQgaW4gVVJMcyBhbmQgZmlsZW5hbWVzXG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcImJhc2U2NHVybFwiLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgand0KG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJqd3RcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnMpIH0pO1xuICAgIH1cbiAgICBpcChvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiaXBcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnMpIH0pO1xuICAgIH1cbiAgICBjaWRyKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJjaWRyXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihvcHRpb25zKSB9KTtcbiAgICB9XG4gICAgZGF0ZXRpbWUob3B0aW9ucykge1xuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICAgICAga2luZDogXCJkYXRldGltZVwiLFxuICAgICAgICAgICAgICAgIHByZWNpc2lvbjogbnVsbCxcbiAgICAgICAgICAgICAgICBvZmZzZXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGxvY2FsOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBvcHRpb25zLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwiZGF0ZXRpbWVcIixcbiAgICAgICAgICAgIHByZWNpc2lvbjogdHlwZW9mIG9wdGlvbnM/LnByZWNpc2lvbiA9PT0gXCJ1bmRlZmluZWRcIiA/IG51bGwgOiBvcHRpb25zPy5wcmVjaXNpb24sXG4gICAgICAgICAgICBvZmZzZXQ6IG9wdGlvbnM/Lm9mZnNldCA/PyBmYWxzZSxcbiAgICAgICAgICAgIGxvY2FsOiBvcHRpb25zPy5sb2NhbCA/PyBmYWxzZSxcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihvcHRpb25zPy5tZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGRhdGUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImRhdGVcIiwgbWVzc2FnZSB9KTtcbiAgICB9XG4gICAgdGltZShvcHRpb25zKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgICAgICBraW5kOiBcInRpbWVcIixcbiAgICAgICAgICAgICAgICBwcmVjaXNpb246IG51bGwsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogb3B0aW9ucyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcInRpbWVcIixcbiAgICAgICAgICAgIHByZWNpc2lvbjogdHlwZW9mIG9wdGlvbnM/LnByZWNpc2lvbiA9PT0gXCJ1bmRlZmluZWRcIiA/IG51bGwgOiBvcHRpb25zPy5wcmVjaXNpb24sXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoob3B0aW9ucz8ubWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBkdXJhdGlvbihtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiZHVyYXRpb25cIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICByZWdleChyZWdleCwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJyZWdleFwiLFxuICAgICAgICAgICAgcmVnZXg6IHJlZ2V4LFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaW5jbHVkZXModmFsdWUsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwiaW5jbHVkZXNcIixcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIHBvc2l0aW9uOiBvcHRpb25zPy5wb3NpdGlvbixcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihvcHRpb25zPy5tZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXJ0c1dpdGgodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwic3RhcnRzV2l0aFwiLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZW5kc1dpdGgodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwiZW5kc1dpdGhcIixcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG1pbihtaW5MZW5ndGgsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWluXCIsXG4gICAgICAgICAgICB2YWx1ZTogbWluTGVuZ3RoLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWF4KG1heExlbmd0aCwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBtYXhMZW5ndGgsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBsZW5ndGgobGVuLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcImxlbmd0aFwiLFxuICAgICAgICAgICAgdmFsdWU6IGxlbixcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVxdWl2YWxlbnQgdG8gYC5taW4oMSlgXG4gICAgICovXG4gICAgbm9uZW1wdHkobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5taW4oMSwgZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgdHJpbSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RTdHJpbmcoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgeyBraW5kOiBcInRyaW1cIiB9XSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHRvTG93ZXJDYXNlKCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFN0cmluZyh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFsuLi50aGlzLl9kZWYuY2hlY2tzLCB7IGtpbmQ6IFwidG9Mb3dlckNhc2VcIiB9XSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHRvVXBwZXJDYXNlKCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFN0cmluZyh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFsuLi50aGlzLl9kZWYuY2hlY2tzLCB7IGtpbmQ6IFwidG9VcHBlckNhc2VcIiB9XSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldCBpc0RhdGV0aW1lKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImRhdGV0aW1lXCIpO1xuICAgIH1cbiAgICBnZXQgaXNEYXRlKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImRhdGVcIik7XG4gICAgfVxuICAgIGdldCBpc1RpbWUoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwidGltZVwiKTtcbiAgICB9XG4gICAgZ2V0IGlzRHVyYXRpb24oKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZHVyYXRpb25cIik7XG4gICAgfVxuICAgIGdldCBpc0VtYWlsKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImVtYWlsXCIpO1xuICAgIH1cbiAgICBnZXQgaXNVUkwoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwidXJsXCIpO1xuICAgIH1cbiAgICBnZXQgaXNFbW9qaSgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJlbW9qaVwiKTtcbiAgICB9XG4gICAgZ2V0IGlzVVVJRCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJ1dWlkXCIpO1xuICAgIH1cbiAgICBnZXQgaXNOQU5PSUQoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwibmFub2lkXCIpO1xuICAgIH1cbiAgICBnZXQgaXNDVUlEKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImN1aWRcIik7XG4gICAgfVxuICAgIGdldCBpc0NVSUQyKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImN1aWQyXCIpO1xuICAgIH1cbiAgICBnZXQgaXNVTElEKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcInVsaWRcIik7XG4gICAgfVxuICAgIGdldCBpc0lQKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImlwXCIpO1xuICAgIH1cbiAgICBnZXQgaXNDSURSKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImNpZHJcIik7XG4gICAgfVxuICAgIGdldCBpc0Jhc2U2NCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJiYXNlNjRcIik7XG4gICAgfVxuICAgIGdldCBpc0Jhc2U2NHVybCgpIHtcbiAgICAgICAgLy8gYmFzZTY0dXJsIGVuY29kaW5nIGlzIGEgbW9kaWZpY2F0aW9uIG9mIGJhc2U2NCB0aGF0IGNhbiBzYWZlbHkgYmUgdXNlZCBpbiBVUkxzIGFuZCBmaWxlbmFtZXNcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJiYXNlNjR1cmxcIik7XG4gICAgfVxuICAgIGdldCBtaW5MZW5ndGgoKSB7XG4gICAgICAgIGxldCBtaW4gPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1pblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1pbiA9PT0gbnVsbCB8fCBjaC52YWx1ZSA+IG1pbilcbiAgICAgICAgICAgICAgICAgICAgbWluID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1pbjtcbiAgICB9XG4gICAgZ2V0IG1heExlbmd0aCgpIHtcbiAgICAgICAgbGV0IG1heCA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWF4ID09PSBudWxsIHx8IGNoLnZhbHVlIDwgbWF4KVxuICAgICAgICAgICAgICAgICAgICBtYXggPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWF4O1xuICAgIH1cbn1cblpvZFN0cmluZy5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RTdHJpbmcoe1xuICAgICAgICBjaGVja3M6IFtdLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFN0cmluZyxcbiAgICAgICAgY29lcmNlOiBwYXJhbXM/LmNvZXJjZSA/PyBmYWxzZSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbi8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzM5NjY0ODQvd2h5LWRvZXMtbW9kdWx1cy1vcGVyYXRvci1yZXR1cm4tZnJhY3Rpb25hbC1udW1iZXItaW4tamF2YXNjcmlwdC8zMTcxMTAzNCMzMTcxMTAzNFxuZnVuY3Rpb24gZmxvYXRTYWZlUmVtYWluZGVyKHZhbCwgc3RlcCkge1xuICAgIGNvbnN0IHZhbERlY0NvdW50ID0gKHZhbC50b1N0cmluZygpLnNwbGl0KFwiLlwiKVsxXSB8fCBcIlwiKS5sZW5ndGg7XG4gICAgY29uc3Qgc3RlcERlY0NvdW50ID0gKHN0ZXAudG9TdHJpbmcoKS5zcGxpdChcIi5cIilbMV0gfHwgXCJcIikubGVuZ3RoO1xuICAgIGNvbnN0IGRlY0NvdW50ID0gdmFsRGVjQ291bnQgPiBzdGVwRGVjQ291bnQgPyB2YWxEZWNDb3VudCA6IHN0ZXBEZWNDb3VudDtcbiAgICBjb25zdCB2YWxJbnQgPSBOdW1iZXIucGFyc2VJbnQodmFsLnRvRml4ZWQoZGVjQ291bnQpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKTtcbiAgICBjb25zdCBzdGVwSW50ID0gTnVtYmVyLnBhcnNlSW50KHN0ZXAudG9GaXhlZChkZWNDb3VudCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xuICAgIHJldHVybiAodmFsSW50ICUgc3RlcEludCkgLyAxMCAqKiBkZWNDb3VudDtcbn1cbmV4cG9ydCBjbGFzcyBab2ROdW1iZXIgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5taW4gPSB0aGlzLmd0ZTtcbiAgICAgICAgdGhpcy5tYXggPSB0aGlzLmx0ZTtcbiAgICAgICAgdGhpcy5zdGVwID0gdGhpcy5tdWx0aXBsZU9mO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi5jb2VyY2UpIHtcbiAgICAgICAgICAgIGlucHV0LmRhdGEgPSBOdW1iZXIoaW5wdXQuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5udW1iZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUubnVtYmVyLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGN0eCA9IHVuZGVmaW5lZDtcbiAgICAgICAgY29uc3Qgc3RhdHVzID0gbmV3IFBhcnNlU3RhdHVzKCk7XG4gICAgICAgIGZvciAoY29uc3QgY2hlY2sgb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoZWNrLmtpbmQgPT09IFwiaW50XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXV0aWwuaXNJbnRlZ2VyKGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBlY3RlZDogXCJpbnRlZ2VyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICByZWNlaXZlZDogXCJmbG9hdFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29TbWFsbCA9IGNoZWNrLmluY2x1c2l2ZSA/IGlucHV0LmRhdGEgPCBjaGVjay52YWx1ZSA6IGlucHV0LmRhdGEgPD0gY2hlY2sudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKHRvb1NtYWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwibnVtYmVyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IGNoZWNrLmluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm1heFwiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9vQmlnID0gY2hlY2suaW5jbHVzaXZlID8gaW5wdXQuZGF0YSA+IGNoZWNrLnZhbHVlIDogaW5wdXQuZGF0YSA+PSBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vQmlnKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIm51bWJlclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiBjaGVjay5pbmNsdXNpdmUsXG4gICAgICAgICAgICAgICAgICAgICAgICBleGFjdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtdWx0aXBsZU9mXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZmxvYXRTYWZlUmVtYWluZGVyKGlucHV0LmRhdGEsIGNoZWNrLnZhbHVlKSAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUubm90X211bHRpcGxlX29mLFxuICAgICAgICAgICAgICAgICAgICAgICAgbXVsdGlwbGVPZjogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJmaW5pdGVcIikge1xuICAgICAgICAgICAgICAgIGlmICghTnVtYmVyLmlzRmluaXRlKGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5ub3RfZmluaXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHV0aWwuYXNzZXJ0TmV2ZXIoY2hlY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogaW5wdXQuZGF0YSB9O1xuICAgIH1cbiAgICBndGUodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtaW5cIiwgdmFsdWUsIHRydWUsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gICAgfVxuICAgIGd0KHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWluXCIsIHZhbHVlLCBmYWxzZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgbHRlKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWF4XCIsIHZhbHVlLCB0cnVlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBsdCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1heFwiLCB2YWx1ZSwgZmFsc2UsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gICAgfVxuICAgIHNldExpbWl0KGtpbmQsIHZhbHVlLCBpbmNsdXNpdmUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2ROdW1iZXIoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbXG4gICAgICAgICAgICAgICAgLi4udGhpcy5fZGVmLmNoZWNrcyxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGtpbmQsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmUsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9hZGRDaGVjayhjaGVjaykge1xuICAgICAgICByZXR1cm4gbmV3IFpvZE51bWJlcih7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFsuLi50aGlzLl9kZWYuY2hlY2tzLCBjaGVja10sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpbnQobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJpbnRcIixcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHBvc2l0aXZlKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWluXCIsXG4gICAgICAgICAgICB2YWx1ZTogMCxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogZmFsc2UsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBuZWdhdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1heFwiLFxuICAgICAgICAgICAgdmFsdWU6IDAsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm9ucG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiAwLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm9ubmVnYXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiAwLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbXVsdGlwbGVPZih2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtdWx0aXBsZU9mXCIsXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBmaW5pdGUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJmaW5pdGVcIixcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNhZmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUixcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSkuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWF4XCIsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXQgbWluVmFsdWUoKSB7XG4gICAgICAgIGxldCBtaW4gPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1pblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1pbiA9PT0gbnVsbCB8fCBjaC52YWx1ZSA+IG1pbilcbiAgICAgICAgICAgICAgICAgICAgbWluID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1pbjtcbiAgICB9XG4gICAgZ2V0IG1heFZhbHVlKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXg7XG4gICAgfVxuICAgIGdldCBpc0ludCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJpbnRcIiB8fCAoY2gua2luZCA9PT0gXCJtdWx0aXBsZU9mXCIgJiYgdXRpbC5pc0ludGVnZXIoY2gudmFsdWUpKSk7XG4gICAgfVxuICAgIGdldCBpc0Zpbml0ZSgpIHtcbiAgICAgICAgbGV0IG1heCA9IG51bGw7XG4gICAgICAgIGxldCBtaW4gPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcImZpbml0ZVwiIHx8IGNoLmtpbmQgPT09IFwiaW50XCIgfHwgY2gua2luZCA9PT0gXCJtdWx0aXBsZU9mXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWluID09PSBudWxsIHx8IGNoLnZhbHVlID4gbWluKVxuICAgICAgICAgICAgICAgICAgICBtaW4gPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWF4ID09PSBudWxsIHx8IGNoLnZhbHVlIDwgbWF4KVxuICAgICAgICAgICAgICAgICAgICBtYXggPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTnVtYmVyLmlzRmluaXRlKG1pbikgJiYgTnVtYmVyLmlzRmluaXRlKG1heCk7XG4gICAgfVxufVxuWm9kTnVtYmVyLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE51bWJlcih7XG4gICAgICAgIGNoZWNrczogW10sXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTnVtYmVyLFxuICAgICAgICBjb2VyY2U6IHBhcmFtcz8uY29lcmNlIHx8IGZhbHNlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZEJpZ0ludCBleHRlbmRzIFpvZFR5cGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLm1pbiA9IHRoaXMuZ3RlO1xuICAgICAgICB0aGlzLm1heCA9IHRoaXMubHRlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi5jb2VyY2UpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaW5wdXQuZGF0YSA9IEJpZ0ludChpbnB1dC5kYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0SW52YWxpZElucHV0KGlucHV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLmJpZ2ludCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2dldEludmFsaWRJbnB1dChpbnB1dCk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGN0eCA9IHVuZGVmaW5lZDtcbiAgICAgICAgY29uc3Qgc3RhdHVzID0gbmV3IFBhcnNlU3RhdHVzKCk7XG4gICAgICAgIGZvciAoY29uc3QgY2hlY2sgb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoZWNrLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29TbWFsbCA9IGNoZWNrLmluY2x1c2l2ZSA/IGlucHV0LmRhdGEgPCBjaGVjay52YWx1ZSA6IGlucHV0LmRhdGEgPD0gY2hlY2sudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKHRvb1NtYWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImJpZ2ludFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWluaW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IGNoZWNrLmluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm1heFwiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9vQmlnID0gY2hlY2suaW5jbHVzaXZlID8gaW5wdXQuZGF0YSA+IGNoZWNrLnZhbHVlIDogaW5wdXQuZGF0YSA+PSBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vQmlnKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJiaWdpbnRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heGltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiBjaGVjay5pbmNsdXNpdmUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtdWx0aXBsZU9mXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuZGF0YSAlIGNoZWNrLnZhbHVlICE9PSBCaWdJbnQoMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLm5vdF9tdWx0aXBsZV9vZixcbiAgICAgICAgICAgICAgICAgICAgICAgIG11bHRpcGxlT2Y6IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHV0aWwuYXNzZXJ0TmV2ZXIoY2hlY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogaW5wdXQuZGF0YSB9O1xuICAgIH1cbiAgICBfZ2V0SW52YWxpZElucHV0KGlucHV0KSB7XG4gICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUuYmlnaW50LFxuICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgfVxuICAgIGd0ZSh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1pblwiLCB2YWx1ZSwgdHJ1ZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgZ3QodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtaW5cIiwgdmFsdWUsIGZhbHNlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBsdGUodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtYXhcIiwgdmFsdWUsIHRydWUsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gICAgfVxuICAgIGx0KHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWF4XCIsIHZhbHVlLCBmYWxzZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgc2V0TGltaXQoa2luZCwgdmFsdWUsIGluY2x1c2l2ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEJpZ0ludCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFtcbiAgICAgICAgICAgICAgICAuLi50aGlzLl9kZWYuY2hlY2tzLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2luZCxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX2FkZENoZWNrKGNoZWNrKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQmlnSW50KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIGNoZWNrXSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHBvc2l0aXZlKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWluXCIsXG4gICAgICAgICAgICB2YWx1ZTogQmlnSW50KDApLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiBmYWxzZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG5lZ2F0aXZlKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWF4XCIsXG4gICAgICAgICAgICB2YWx1ZTogQmlnSW50KDApLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiBmYWxzZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG5vbnBvc2l0aXZlKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWF4XCIsXG4gICAgICAgICAgICB2YWx1ZTogQmlnSW50KDApLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm9ubmVnYXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtdWx0aXBsZU9mKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm11bHRpcGxlT2ZcIixcbiAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0IG1pblZhbHVlKCkge1xuICAgICAgICBsZXQgbWluID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChtaW4gPT09IG51bGwgfHwgY2gudmFsdWUgPiBtaW4pXG4gICAgICAgICAgICAgICAgICAgIG1pbiA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtaW47XG4gICAgfVxuICAgIGdldCBtYXhWYWx1ZSgpIHtcbiAgICAgICAgbGV0IG1heCA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWF4ID09PSBudWxsIHx8IGNoLnZhbHVlIDwgbWF4KVxuICAgICAgICAgICAgICAgICAgICBtYXggPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWF4O1xuICAgIH1cbn1cblpvZEJpZ0ludC5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RCaWdJbnQoe1xuICAgICAgICBjaGVja3M6IFtdLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEJpZ0ludCxcbiAgICAgICAgY29lcmNlOiBwYXJhbXM/LmNvZXJjZSA/PyBmYWxzZSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RCb29sZWFuIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGlmICh0aGlzLl9kZWYuY29lcmNlKSB7XG4gICAgICAgICAgICBpbnB1dC5kYXRhID0gQm9vbGVhbihpbnB1dC5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLmJvb2xlYW4pIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUuYm9vbGVhbixcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2RCb29sZWFuLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZEJvb2xlYW4oe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEJvb2xlYW4sXG4gICAgICAgIGNvZXJjZTogcGFyYW1zPy5jb2VyY2UgfHwgZmFsc2UsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kRGF0ZSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5fZGVmLmNvZXJjZSkge1xuICAgICAgICAgICAgaW5wdXQuZGF0YSA9IG5ldyBEYXRlKGlucHV0LmRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuZGF0ZSkge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5kYXRlLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKE51bWJlci5pc05hTihpbnB1dC5kYXRhLmdldFRpbWUoKSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX2RhdGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN0YXR1cyA9IG5ldyBQYXJzZVN0YXR1cygpO1xuICAgICAgICBsZXQgY3R4ID0gdW5kZWZpbmVkO1xuICAgICAgICBmb3IgKGNvbnN0IGNoZWNrIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaGVjay5raW5kID09PSBcIm1pblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0LmRhdGEuZ2V0VGltZSgpIDwgY2hlY2sudmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBleGFjdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZGF0ZVwiLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhLmdldFRpbWUoKSA+IGNoZWNrLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heGltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJkYXRlXCIsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB1dGlsLmFzc2VydE5ldmVyKGNoZWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RhdHVzOiBzdGF0dXMudmFsdWUsXG4gICAgICAgICAgICB2YWx1ZTogbmV3IERhdGUoaW5wdXQuZGF0YS5nZXRUaW1lKCkpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBfYWRkQ2hlY2soY2hlY2spIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2REYXRlKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIGNoZWNrXSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG1pbihtaW5EYXRlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgdmFsdWU6IG1pbkRhdGUuZ2V0VGltZSgpLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWF4KG1heERhdGUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWF4XCIsXG4gICAgICAgICAgICB2YWx1ZTogbWF4RGF0ZS5nZXRUaW1lKCksXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXQgbWluRGF0ZSgpIHtcbiAgICAgICAgbGV0IG1pbiA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWluID09PSBudWxsIHx8IGNoLnZhbHVlID4gbWluKVxuICAgICAgICAgICAgICAgICAgICBtaW4gPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWluICE9IG51bGwgPyBuZXcgRGF0ZShtaW4pIDogbnVsbDtcbiAgICB9XG4gICAgZ2V0IG1heERhdGUoKSB7XG4gICAgICAgIGxldCBtYXggPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1heFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1heCA9PT0gbnVsbCB8fCBjaC52YWx1ZSA8IG1heClcbiAgICAgICAgICAgICAgICAgICAgbWF4ID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1heCAhPSBudWxsID8gbmV3IERhdGUobWF4KSA6IG51bGw7XG4gICAgfVxufVxuWm9kRGF0ZS5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2REYXRlKHtcbiAgICAgICAgY2hlY2tzOiBbXSxcbiAgICAgICAgY29lcmNlOiBwYXJhbXM/LmNvZXJjZSB8fCBmYWxzZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REYXRlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZFN5bWJvbCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnN5bWJvbCkge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5zeW1ib2wsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxufVxuWm9kU3ltYm9sLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFN5bWJvbCh7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU3ltYm9sLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZFVuZGVmaW5lZCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS51bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxufVxuWm9kVW5kZWZpbmVkLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFVuZGVmaW5lZCh7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVW5kZWZpbmVkLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZE51bGwgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5udWxsKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm51bGwsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxufVxuWm9kTnVsbC5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROdWxsKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROdWxsLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZEFueSBleHRlbmRzIFpvZFR5cGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICAvLyB0byBwcmV2ZW50IGluc3RhbmNlcyBvZiBvdGhlciBjbGFzc2VzIGZyb20gZXh0ZW5kaW5nIFpvZEFueS4gdGhpcyBjYXVzZXMgaXNzdWVzIHdpdGggY2F0Y2hhbGwgaW4gWm9kT2JqZWN0LlxuICAgICAgICB0aGlzLl9hbnkgPSB0cnVlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbn1cblpvZEFueS5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RBbnkoe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEFueSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RVbmtub3duIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIC8vIHJlcXVpcmVkXG4gICAgICAgIHRoaXMuX3Vua25vd24gPSB0cnVlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbn1cblpvZFVua25vd24uY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kVW5rbm93bih7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVW5rbm93bixcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2ROZXZlciBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm5ldmVyLFxuICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgfVxufVxuWm9kTmV2ZXIuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTmV2ZXIoe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5ldmVyLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZFZvaWQgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS51bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUudm9pZCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2RWb2lkLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFZvaWQoe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFZvaWQsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kQXJyYXkgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHgsIHN0YXR1cyB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgY29uc3QgZGVmID0gdGhpcy5fZGVmO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuYXJyYXkpIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUuYXJyYXksXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGVmLmV4YWN0TGVuZ3RoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBjb25zdCB0b29CaWcgPSBjdHguZGF0YS5sZW5ndGggPiBkZWYuZXhhY3RMZW5ndGgudmFsdWU7XG4gICAgICAgICAgICBjb25zdCB0b29TbWFsbCA9IGN0eC5kYXRhLmxlbmd0aCA8IGRlZi5leGFjdExlbmd0aC52YWx1ZTtcbiAgICAgICAgICAgIGlmICh0b29CaWcgfHwgdG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogdG9vQmlnID8gWm9kSXNzdWVDb2RlLnRvb19iaWcgOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiAodG9vU21hbGwgPyBkZWYuZXhhY3RMZW5ndGgudmFsdWUgOiB1bmRlZmluZWQpLFxuICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiAodG9vQmlnID8gZGVmLmV4YWN0TGVuZ3RoLnZhbHVlIDogdW5kZWZpbmVkKSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJhcnJheVwiLFxuICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGV4YWN0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYuZXhhY3RMZW5ndGgubWVzc2FnZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZGVmLm1pbkxlbmd0aCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKGN0eC5kYXRhLmxlbmd0aCA8IGRlZi5taW5MZW5ndGgudmFsdWUpIHtcbiAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgbWluaW11bTogZGVmLm1pbkxlbmd0aC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJhcnJheVwiLFxuICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZGVmLm1pbkxlbmd0aC5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYubWF4TGVuZ3RoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoY3R4LmRhdGEubGVuZ3RoID4gZGVmLm1heExlbmd0aC52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX2JpZyxcbiAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogZGVmLm1heExlbmd0aC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJhcnJheVwiLFxuICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZGVmLm1heExlbmd0aC5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoWy4uLmN0eC5kYXRhXS5tYXAoKGl0ZW0sIGkpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVmLnR5cGUuX3BhcnNlQXN5bmMobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGl0ZW0sIGN0eC5wYXRoLCBpKSk7XG4gICAgICAgICAgICB9KSkudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlQXJyYXkoc3RhdHVzLCByZXN1bHQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gWy4uLmN0eC5kYXRhXS5tYXAoKGl0ZW0sIGkpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBkZWYudHlwZS5fcGFyc2VTeW5jKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCBpdGVtLCBjdHgucGF0aCwgaSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlQXJyYXkoc3RhdHVzLCByZXN1bHQpO1xuICAgIH1cbiAgICBnZXQgZWxlbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi50eXBlO1xuICAgIH1cbiAgICBtaW4obWluTGVuZ3RoLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQXJyYXkoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgbWluTGVuZ3RoOiB7IHZhbHVlOiBtaW5MZW5ndGgsIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWF4KG1heExlbmd0aCwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEFycmF5KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIG1heExlbmd0aDogeyB2YWx1ZTogbWF4TGVuZ3RoLCBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGxlbmd0aChsZW4sIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RBcnJheSh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBleGFjdExlbmd0aDogeyB2YWx1ZTogbGVuLCBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG5vbmVtcHR5KG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWluKDEsIG1lc3NhZ2UpO1xuICAgIH1cbn1cblpvZEFycmF5LmNyZWF0ZSA9IChzY2hlbWEsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kQXJyYXkoe1xuICAgICAgICB0eXBlOiBzY2hlbWEsXG4gICAgICAgIG1pbkxlbmd0aDogbnVsbCxcbiAgICAgICAgbWF4TGVuZ3RoOiBudWxsLFxuICAgICAgICBleGFjdExlbmd0aDogbnVsbCxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RBcnJheSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmZ1bmN0aW9uIGRlZXBQYXJ0aWFsaWZ5KHNjaGVtYSkge1xuICAgIGlmIChzY2hlbWEgaW5zdGFuY2VvZiBab2RPYmplY3QpIHtcbiAgICAgICAgY29uc3QgbmV3U2hhcGUgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gc2NoZW1hLnNoYXBlKSB7XG4gICAgICAgICAgICBjb25zdCBmaWVsZFNjaGVtYSA9IHNjaGVtYS5zaGFwZVtrZXldO1xuICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IFpvZE9wdGlvbmFsLmNyZWF0ZShkZWVwUGFydGlhbGlmeShmaWVsZFNjaGVtYSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnNjaGVtYS5fZGVmLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+IG5ld1NoYXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2NoZW1hIGluc3RhbmNlb2YgWm9kQXJyYXkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RBcnJheSh7XG4gICAgICAgICAgICAuLi5zY2hlbWEuX2RlZixcbiAgICAgICAgICAgIHR5cGU6IGRlZXBQYXJ0aWFsaWZ5KHNjaGVtYS5lbGVtZW50KSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHNjaGVtYSBpbnN0YW5jZW9mIFpvZE9wdGlvbmFsKSB7XG4gICAgICAgIHJldHVybiBab2RPcHRpb25hbC5jcmVhdGUoZGVlcFBhcnRpYWxpZnkoc2NoZW1hLnVud3JhcCgpKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHNjaGVtYSBpbnN0YW5jZW9mIFpvZE51bGxhYmxlKSB7XG4gICAgICAgIHJldHVybiBab2ROdWxsYWJsZS5jcmVhdGUoZGVlcFBhcnRpYWxpZnkoc2NoZW1hLnVud3JhcCgpKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHNjaGVtYSBpbnN0YW5jZW9mIFpvZFR1cGxlKSB7XG4gICAgICAgIHJldHVybiBab2RUdXBsZS5jcmVhdGUoc2NoZW1hLml0ZW1zLm1hcCgoaXRlbSkgPT4gZGVlcFBhcnRpYWxpZnkoaXRlbSkpKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBzY2hlbWE7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFpvZE9iamVjdCBleHRlbmRzIFpvZFR5cGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLl9jYWNoZWQgPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQGRlcHJlY2F0ZWQgSW4gbW9zdCBjYXNlcywgdGhpcyBpcyBubyBsb25nZXIgbmVlZGVkIC0gdW5rbm93biBwcm9wZXJ0aWVzIGFyZSBub3cgc2lsZW50bHkgc3RyaXBwZWQuXG4gICAgICAgICAqIElmIHlvdSB3YW50IHRvIHBhc3MgdGhyb3VnaCB1bmtub3duIHByb3BlcnRpZXMsIHVzZSBgLnBhc3N0aHJvdWdoKClgIGluc3RlYWQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm5vbnN0cmljdCA9IHRoaXMucGFzc3Rocm91Z2g7XG4gICAgICAgIC8vIGV4dGVuZDxcbiAgICAgICAgLy8gICBBdWdtZW50YXRpb24gZXh0ZW5kcyBab2RSYXdTaGFwZSxcbiAgICAgICAgLy8gICBOZXdPdXRwdXQgZXh0ZW5kcyB1dGlsLmZsYXR0ZW48e1xuICAgICAgICAvLyAgICAgW2sgaW4ga2V5b2YgQXVnbWVudGF0aW9uIHwga2V5b2YgT3V0cHV0XTogayBleHRlbmRzIGtleW9mIEF1Z21lbnRhdGlvblxuICAgICAgICAvLyAgICAgICA/IEF1Z21lbnRhdGlvbltrXVtcIl9vdXRwdXRcIl1cbiAgICAgICAgLy8gICAgICAgOiBrIGV4dGVuZHMga2V5b2YgT3V0cHV0XG4gICAgICAgIC8vICAgICAgID8gT3V0cHV0W2tdXG4gICAgICAgIC8vICAgICAgIDogbmV2ZXI7XG4gICAgICAgIC8vICAgfT4sXG4gICAgICAgIC8vICAgTmV3SW5wdXQgZXh0ZW5kcyB1dGlsLmZsYXR0ZW48e1xuICAgICAgICAvLyAgICAgW2sgaW4ga2V5b2YgQXVnbWVudGF0aW9uIHwga2V5b2YgSW5wdXRdOiBrIGV4dGVuZHMga2V5b2YgQXVnbWVudGF0aW9uXG4gICAgICAgIC8vICAgICAgID8gQXVnbWVudGF0aW9uW2tdW1wiX2lucHV0XCJdXG4gICAgICAgIC8vICAgICAgIDogayBleHRlbmRzIGtleW9mIElucHV0XG4gICAgICAgIC8vICAgICAgID8gSW5wdXRba11cbiAgICAgICAgLy8gICAgICAgOiBuZXZlcjtcbiAgICAgICAgLy8gICB9PlxuICAgICAgICAvLyA+KFxuICAgICAgICAvLyAgIGF1Z21lbnRhdGlvbjogQXVnbWVudGF0aW9uXG4gICAgICAgIC8vICk6IFpvZE9iamVjdDxcbiAgICAgICAgLy8gICBleHRlbmRTaGFwZTxULCBBdWdtZW50YXRpb24+LFxuICAgICAgICAvLyAgIFVua25vd25LZXlzLFxuICAgICAgICAvLyAgIENhdGNoYWxsLFxuICAgICAgICAvLyAgIE5ld091dHB1dCxcbiAgICAgICAgLy8gICBOZXdJbnB1dFxuICAgICAgICAvLyA+IHtcbiAgICAgICAgLy8gICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgIC8vICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgIC8vICAgICBzaGFwZTogKCkgPT4gKHtcbiAgICAgICAgLy8gICAgICAgLi4udGhpcy5fZGVmLnNoYXBlKCksXG4gICAgICAgIC8vICAgICAgIC4uLmF1Z21lbnRhdGlvbixcbiAgICAgICAgLy8gICAgIH0pLFxuICAgICAgICAvLyAgIH0pIGFzIGFueTtcbiAgICAgICAgLy8gfVxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlcHJlY2F0ZWQgVXNlIGAuZXh0ZW5kYCBpbnN0ZWFkXG4gICAgICAgICAqICAqL1xuICAgICAgICB0aGlzLmF1Z21lbnQgPSB0aGlzLmV4dGVuZDtcbiAgICB9XG4gICAgX2dldENhY2hlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2NhY2hlZCAhPT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jYWNoZWQ7XG4gICAgICAgIGNvbnN0IHNoYXBlID0gdGhpcy5fZGVmLnNoYXBlKCk7XG4gICAgICAgIGNvbnN0IGtleXMgPSB1dGlsLm9iamVjdEtleXMoc2hhcGUpO1xuICAgICAgICB0aGlzLl9jYWNoZWQgPSB7IHNoYXBlLCBrZXlzIH07XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWNoZWQ7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm9iamVjdCkge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5vYmplY3QsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IHN0YXR1cywgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCB7IHNoYXBlLCBrZXlzOiBzaGFwZUtleXMgfSA9IHRoaXMuX2dldENhY2hlZCgpO1xuICAgICAgICBjb25zdCBleHRyYUtleXMgPSBbXTtcbiAgICAgICAgaWYgKCEodGhpcy5fZGVmLmNhdGNoYWxsIGluc3RhbmNlb2YgWm9kTmV2ZXIgJiYgdGhpcy5fZGVmLnVua25vd25LZXlzID09PSBcInN0cmlwXCIpKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBjdHguZGF0YSkge1xuICAgICAgICAgICAgICAgIGlmICghc2hhcGVLZXlzLmluY2x1ZGVzKGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZXh0cmFLZXlzLnB1c2goa2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFpcnMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2Ygc2hhcGVLZXlzKSB7XG4gICAgICAgICAgICBjb25zdCBrZXlWYWxpZGF0b3IgPSBzaGFwZVtrZXldO1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBjdHguZGF0YVtrZXldO1xuICAgICAgICAgICAgcGFpcnMucHVzaCh7XG4gICAgICAgICAgICAgICAga2V5OiB7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZToga2V5IH0sXG4gICAgICAgICAgICAgICAgdmFsdWU6IGtleVZhbGlkYXRvci5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIHZhbHVlLCBjdHgucGF0aCwga2V5KSksXG4gICAgICAgICAgICAgICAgYWx3YXlzU2V0OiBrZXkgaW4gY3R4LmRhdGEsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fZGVmLmNhdGNoYWxsIGluc3RhbmNlb2YgWm9kTmV2ZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IHVua25vd25LZXlzID0gdGhpcy5fZGVmLnVua25vd25LZXlzO1xuICAgICAgICAgICAgaWYgKHVua25vd25LZXlzID09PSBcInBhc3N0aHJvdWdoXCIpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBleHRyYUtleXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFpcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IHsgc3RhdHVzOiBcInZhbGlkXCIsIHZhbHVlOiBrZXkgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZTogY3R4LmRhdGFba2V5XSB9LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh1bmtub3duS2V5cyA9PT0gXCJzdHJpY3RcIikge1xuICAgICAgICAgICAgICAgIGlmIChleHRyYUtleXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS51bnJlY29nbml6ZWRfa2V5cyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleXM6IGV4dHJhS2V5cyxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHVua25vd25LZXlzID09PSBcInN0cmlwXCIpIHtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW50ZXJuYWwgWm9kT2JqZWN0IGVycm9yOiBpbnZhbGlkIHVua25vd25LZXlzIHZhbHVlLmApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gcnVuIGNhdGNoYWxsIHZhbGlkYXRpb25cbiAgICAgICAgICAgIGNvbnN0IGNhdGNoYWxsID0gdGhpcy5fZGVmLmNhdGNoYWxsO1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgZXh0cmFLZXlzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBjdHguZGF0YVtrZXldO1xuICAgICAgICAgICAgICAgIHBhaXJzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBrZXk6IHsgc3RhdHVzOiBcInZhbGlkXCIsIHZhbHVlOiBrZXkgfSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGNhdGNoYWxsLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgdmFsdWUsIGN0eC5wYXRoLCBrZXkpIC8vLCBjdHguY2hpbGQoa2V5KSwgdmFsdWUsIGdldFBhcnNlZFR5cGUodmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIGFsd2F5c1NldDoga2V5IGluIGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKClcbiAgICAgICAgICAgICAgICAudGhlbihhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3luY1BhaXJzID0gW107XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBwYWlyIG9mIHBhaXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGF3YWl0IHBhaXIua2V5O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IHBhaXIudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIHN5bmNQYWlycy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWx3YXlzU2V0OiBwYWlyLmFsd2F5c1NldCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBzeW5jUGFpcnM7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC50aGVuKChzeW5jUGFpcnMpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VPYmplY3RTeW5jKHN0YXR1cywgc3luY1BhaXJzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlT2JqZWN0U3luYyhzdGF0dXMsIHBhaXJzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgc2hhcGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2hhcGUoKTtcbiAgICB9XG4gICAgc3RyaWN0KG1lc3NhZ2UpIHtcbiAgICAgICAgZXJyb3JVdGlsLmVyclRvT2JqO1xuICAgICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICB1bmtub3duS2V5czogXCJzdHJpY3RcIixcbiAgICAgICAgICAgIC4uLihtZXNzYWdlICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JNYXA6IChpc3N1ZSwgY3R4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWZhdWx0RXJyb3IgPSB0aGlzLl9kZWYuZXJyb3JNYXA/Lihpc3N1ZSwgY3R4KS5tZXNzYWdlID8/IGN0eC5kZWZhdWx0RXJyb3I7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNzdWUuY29kZSA9PT0gXCJ1bnJlY29nbml6ZWRfa2V5c1wiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKS5tZXNzYWdlID8/IGRlZmF1bHRFcnJvcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWZhdWx0RXJyb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA6IHt9KSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0cmlwKCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICB1bmtub3duS2V5czogXCJzdHJpcFwiLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcGFzc3Rocm91Z2goKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHVua25vd25LZXlzOiBcInBhc3N0aHJvdWdoXCIsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBjb25zdCBBdWdtZW50RmFjdG9yeSA9XG4gICAgLy8gICA8RGVmIGV4dGVuZHMgWm9kT2JqZWN0RGVmPihkZWY6IERlZikgPT5cbiAgICAvLyAgIDxBdWdtZW50YXRpb24gZXh0ZW5kcyBab2RSYXdTaGFwZT4oXG4gICAgLy8gICAgIGF1Z21lbnRhdGlvbjogQXVnbWVudGF0aW9uXG4gICAgLy8gICApOiBab2RPYmplY3Q8XG4gICAgLy8gICAgIGV4dGVuZFNoYXBlPFJldHVyblR5cGU8RGVmW1wic2hhcGVcIl0+LCBBdWdtZW50YXRpb24+LFxuICAgIC8vICAgICBEZWZbXCJ1bmtub3duS2V5c1wiXSxcbiAgICAvLyAgICAgRGVmW1wiY2F0Y2hhbGxcIl1cbiAgICAvLyAgID4gPT4ge1xuICAgIC8vICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgLy8gICAgICAgLi4uZGVmLFxuICAgIC8vICAgICAgIHNoYXBlOiAoKSA9PiAoe1xuICAgIC8vICAgICAgICAgLi4uZGVmLnNoYXBlKCksXG4gICAgLy8gICAgICAgICAuLi5hdWdtZW50YXRpb24sXG4gICAgLy8gICAgICAgfSksXG4gICAgLy8gICAgIH0pIGFzIGFueTtcbiAgICAvLyAgIH07XG4gICAgZXh0ZW5kKGF1Z21lbnRhdGlvbikge1xuICAgICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBzaGFwZTogKCkgPT4gKHtcbiAgICAgICAgICAgICAgICAuLi50aGlzLl9kZWYuc2hhcGUoKSxcbiAgICAgICAgICAgICAgICAuLi5hdWdtZW50YXRpb24sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByaW9yIHRvIHpvZEAxLjAuMTIgdGhlcmUgd2FzIGEgYnVnIGluIHRoZVxuICAgICAqIGluZmVycmVkIHR5cGUgb2YgbWVyZ2VkIG9iamVjdHMuIFBsZWFzZVxuICAgICAqIHVwZ3JhZGUgaWYgeW91IGFyZSBleHBlcmllbmNpbmcgaXNzdWVzLlxuICAgICAqL1xuICAgIG1lcmdlKG1lcmdpbmcpIHtcbiAgICAgICAgY29uc3QgbWVyZ2VkID0gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICB1bmtub3duS2V5czogbWVyZ2luZy5fZGVmLnVua25vd25LZXlzLFxuICAgICAgICAgICAgY2F0Y2hhbGw6IG1lcmdpbmcuX2RlZi5jYXRjaGFsbCxcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiAoe1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuX2RlZi5zaGFwZSgpLFxuICAgICAgICAgICAgICAgIC4uLm1lcmdpbmcuX2RlZi5zaGFwZSgpLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE9iamVjdCxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBtZXJnZWQ7XG4gICAgfVxuICAgIC8vIG1lcmdlPFxuICAgIC8vICAgSW5jb21pbmcgZXh0ZW5kcyBBbnlab2RPYmplY3QsXG4gICAgLy8gICBBdWdtZW50YXRpb24gZXh0ZW5kcyBJbmNvbWluZ1tcInNoYXBlXCJdLFxuICAgIC8vICAgTmV3T3V0cHV0IGV4dGVuZHMge1xuICAgIC8vICAgICBbayBpbiBrZXlvZiBBdWdtZW50YXRpb24gfCBrZXlvZiBPdXRwdXRdOiBrIGV4dGVuZHMga2V5b2YgQXVnbWVudGF0aW9uXG4gICAgLy8gICAgICAgPyBBdWdtZW50YXRpb25ba11bXCJfb3V0cHV0XCJdXG4gICAgLy8gICAgICAgOiBrIGV4dGVuZHMga2V5b2YgT3V0cHV0XG4gICAgLy8gICAgICAgPyBPdXRwdXRba11cbiAgICAvLyAgICAgICA6IG5ldmVyO1xuICAgIC8vICAgfSxcbiAgICAvLyAgIE5ld0lucHV0IGV4dGVuZHMge1xuICAgIC8vICAgICBbayBpbiBrZXlvZiBBdWdtZW50YXRpb24gfCBrZXlvZiBJbnB1dF06IGsgZXh0ZW5kcyBrZXlvZiBBdWdtZW50YXRpb25cbiAgICAvLyAgICAgICA/IEF1Z21lbnRhdGlvbltrXVtcIl9pbnB1dFwiXVxuICAgIC8vICAgICAgIDogayBleHRlbmRzIGtleW9mIElucHV0XG4gICAgLy8gICAgICAgPyBJbnB1dFtrXVxuICAgIC8vICAgICAgIDogbmV2ZXI7XG4gICAgLy8gICB9XG4gICAgLy8gPihcbiAgICAvLyAgIG1lcmdpbmc6IEluY29taW5nXG4gICAgLy8gKTogWm9kT2JqZWN0PFxuICAgIC8vICAgZXh0ZW5kU2hhcGU8VCwgUmV0dXJuVHlwZTxJbmNvbWluZ1tcIl9kZWZcIl1bXCJzaGFwZVwiXT4+LFxuICAgIC8vICAgSW5jb21pbmdbXCJfZGVmXCJdW1widW5rbm93bktleXNcIl0sXG4gICAgLy8gICBJbmNvbWluZ1tcIl9kZWZcIl1bXCJjYXRjaGFsbFwiXSxcbiAgICAvLyAgIE5ld091dHB1dCxcbiAgICAvLyAgIE5ld0lucHV0XG4gICAgLy8gPiB7XG4gICAgLy8gICBjb25zdCBtZXJnZWQ6IGFueSA9IG5ldyBab2RPYmplY3Qoe1xuICAgIC8vICAgICB1bmtub3duS2V5czogbWVyZ2luZy5fZGVmLnVua25vd25LZXlzLFxuICAgIC8vICAgICBjYXRjaGFsbDogbWVyZ2luZy5fZGVmLmNhdGNoYWxsLFxuICAgIC8vICAgICBzaGFwZTogKCkgPT5cbiAgICAvLyAgICAgICBvYmplY3RVdGlsLm1lcmdlU2hhcGVzKHRoaXMuX2RlZi5zaGFwZSgpLCBtZXJnaW5nLl9kZWYuc2hhcGUoKSksXG4gICAgLy8gICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgIC8vICAgfSkgYXMgYW55O1xuICAgIC8vICAgcmV0dXJuIG1lcmdlZDtcbiAgICAvLyB9XG4gICAgc2V0S2V5KGtleSwgc2NoZW1hKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmF1Z21lbnQoeyBba2V5XTogc2NoZW1hIH0pO1xuICAgIH1cbiAgICAvLyBtZXJnZTxJbmNvbWluZyBleHRlbmRzIEFueVpvZE9iamVjdD4oXG4gICAgLy8gICBtZXJnaW5nOiBJbmNvbWluZ1xuICAgIC8vICk6IC8vWm9kT2JqZWN0PFQgJiBJbmNvbWluZ1tcIl9zaGFwZVwiXSwgVW5rbm93bktleXMsIENhdGNoYWxsPiA9IChtZXJnaW5nKSA9PiB7XG4gICAgLy8gWm9kT2JqZWN0PFxuICAgIC8vICAgZXh0ZW5kU2hhcGU8VCwgUmV0dXJuVHlwZTxJbmNvbWluZ1tcIl9kZWZcIl1bXCJzaGFwZVwiXT4+LFxuICAgIC8vICAgSW5jb21pbmdbXCJfZGVmXCJdW1widW5rbm93bktleXNcIl0sXG4gICAgLy8gICBJbmNvbWluZ1tcIl9kZWZcIl1bXCJjYXRjaGFsbFwiXVxuICAgIC8vID4ge1xuICAgIC8vICAgLy8gY29uc3QgbWVyZ2VkU2hhcGUgPSBvYmplY3RVdGlsLm1lcmdlU2hhcGVzKFxuICAgIC8vICAgLy8gICB0aGlzLl9kZWYuc2hhcGUoKSxcbiAgICAvLyAgIC8vICAgbWVyZ2luZy5fZGVmLnNoYXBlKClcbiAgICAvLyAgIC8vICk7XG4gICAgLy8gICBjb25zdCBtZXJnZWQ6IGFueSA9IG5ldyBab2RPYmplY3Qoe1xuICAgIC8vICAgICB1bmtub3duS2V5czogbWVyZ2luZy5fZGVmLnVua25vd25LZXlzLFxuICAgIC8vICAgICBjYXRjaGFsbDogbWVyZ2luZy5fZGVmLmNhdGNoYWxsLFxuICAgIC8vICAgICBzaGFwZTogKCkgPT5cbiAgICAvLyAgICAgICBvYmplY3RVdGlsLm1lcmdlU2hhcGVzKHRoaXMuX2RlZi5zaGFwZSgpLCBtZXJnaW5nLl9kZWYuc2hhcGUoKSksXG4gICAgLy8gICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgIC8vICAgfSkgYXMgYW55O1xuICAgIC8vICAgcmV0dXJuIG1lcmdlZDtcbiAgICAvLyB9XG4gICAgY2F0Y2hhbGwoaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2F0Y2hhbGw6IGluZGV4LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcGljayhtYXNrKSB7XG4gICAgICAgIGNvbnN0IHNoYXBlID0ge307XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHV0aWwub2JqZWN0S2V5cyhtYXNrKSkge1xuICAgICAgICAgICAgaWYgKG1hc2tba2V5XSAmJiB0aGlzLnNoYXBlW2tleV0pIHtcbiAgICAgICAgICAgICAgICBzaGFwZVtrZXldID0gdGhpcy5zaGFwZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiBzaGFwZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG9taXQobWFzaykge1xuICAgICAgICBjb25zdCBzaGFwZSA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiB1dGlsLm9iamVjdEtleXModGhpcy5zaGFwZSkpIHtcbiAgICAgICAgICAgIGlmICghbWFza1trZXldKSB7XG4gICAgICAgICAgICAgICAgc2hhcGVba2V5XSA9IHRoaXMuc2hhcGVba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBzaGFwZTogKCkgPT4gc2hhcGUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZFxuICAgICAqL1xuICAgIGRlZXBQYXJ0aWFsKCkge1xuICAgICAgICByZXR1cm4gZGVlcFBhcnRpYWxpZnkodGhpcyk7XG4gICAgfVxuICAgIHBhcnRpYWwobWFzaykge1xuICAgICAgICBjb25zdCBuZXdTaGFwZSA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiB1dGlsLm9iamVjdEtleXModGhpcy5zaGFwZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkU2NoZW1hID0gdGhpcy5zaGFwZVtrZXldO1xuICAgICAgICAgICAgaWYgKG1hc2sgJiYgIW1hc2tba2V5XSkge1xuICAgICAgICAgICAgICAgIG5ld1NoYXBlW2tleV0gPSBmaWVsZFNjaGVtYTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ld1NoYXBlW2tleV0gPSBmaWVsZFNjaGVtYS5vcHRpb25hbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiBuZXdTaGFwZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlcXVpcmVkKG1hc2spIHtcbiAgICAgICAgY29uc3QgbmV3U2hhcGUgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgdXRpbC5vYmplY3RLZXlzKHRoaXMuc2hhcGUpKSB7XG4gICAgICAgICAgICBpZiAobWFzayAmJiAhbWFza1trZXldKSB7XG4gICAgICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IHRoaXMuc2hhcGVba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkU2NoZW1hID0gdGhpcy5zaGFwZVtrZXldO1xuICAgICAgICAgICAgICAgIGxldCBuZXdGaWVsZCA9IGZpZWxkU2NoZW1hO1xuICAgICAgICAgICAgICAgIHdoaWxlIChuZXdGaWVsZCBpbnN0YW5jZW9mIFpvZE9wdGlvbmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld0ZpZWxkID0gbmV3RmllbGQuX2RlZi5pbm5lclR5cGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG5ld1NoYXBlW2tleV0gPSBuZXdGaWVsZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBzaGFwZTogKCkgPT4gbmV3U2hhcGUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBrZXlvZigpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVpvZEVudW0odXRpbC5vYmplY3RLZXlzKHRoaXMuc2hhcGUpKTtcbiAgICB9XG59XG5ab2RPYmplY3QuY3JlYXRlID0gKHNoYXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgIHNoYXBlOiAoKSA9PiBzaGFwZSxcbiAgICAgICAgdW5rbm93bktleXM6IFwic3RyaXBcIixcbiAgICAgICAgY2F0Y2hhbGw6IFpvZE5ldmVyLmNyZWF0ZSgpLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE9iamVjdCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcblpvZE9iamVjdC5zdHJpY3RDcmVhdGUgPSAoc2hhcGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgc2hhcGU6ICgpID0+IHNoYXBlLFxuICAgICAgICB1bmtub3duS2V5czogXCJzdHJpY3RcIixcbiAgICAgICAgY2F0Y2hhbGw6IFpvZE5ldmVyLmNyZWF0ZSgpLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE9iamVjdCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcblpvZE9iamVjdC5sYXp5Y3JlYXRlID0gKHNoYXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgIHNoYXBlLFxuICAgICAgICB1bmtub3duS2V5czogXCJzdHJpcFwiLFxuICAgICAgICBjYXRjaGFsbDogWm9kTmV2ZXIuY3JlYXRlKCksXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZFVuaW9uIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5fZGVmLm9wdGlvbnM7XG4gICAgICAgIGZ1bmN0aW9uIGhhbmRsZVJlc3VsdHMocmVzdWx0cykge1xuICAgICAgICAgICAgLy8gcmV0dXJuIGZpcnN0IGlzc3VlLWZyZWUgdmFsaWRhdGlvbiBpZiBpdCBleGlzdHNcbiAgICAgICAgICAgIGZvciAoY29uc3QgcmVzdWx0IG9mIHJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnJlc3VsdC5zdGF0dXMgPT09IFwidmFsaWRcIikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0LnJlc3VsdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHJlc3VsdCBvZiByZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5yZXN1bHQuc3RhdHVzID09PSBcImRpcnR5XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gYWRkIGlzc3VlcyBmcm9tIGRpcnR5IG9wdGlvblxuICAgICAgICAgICAgICAgICAgICBjdHguY29tbW9uLmlzc3Vlcy5wdXNoKC4uLnJlc3VsdC5jdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQucmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHJldHVybiBpbnZhbGlkXG4gICAgICAgICAgICBjb25zdCB1bmlvbkVycm9ycyA9IHJlc3VsdHMubWFwKChyZXN1bHQpID0+IG5ldyBab2RFcnJvcihyZXN1bHQuY3R4LmNvbW1vbi5pc3N1ZXMpKTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3VuaW9uLFxuICAgICAgICAgICAgICAgIHVuaW9uRXJyb3JzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKG9wdGlvbnMubWFwKGFzeW5jIChvcHRpb24pID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZEN0eCA9IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uY3R4LFxuICAgICAgICAgICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN0eC5jb21tb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IG51bGwsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IGF3YWl0IG9wdGlvbi5fcGFyc2VBc3luYyh7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjaGlsZEN0eCxcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIGN0eDogY2hpbGRDdHgsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pKS50aGVuKGhhbmRsZVJlc3VsdHMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IGRpcnR5ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgY29uc3QgaXNzdWVzID0gW107XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG9wdGlvbiBvZiBvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hpbGRDdHggPSB7XG4gICAgICAgICAgICAgICAgICAgIC4uLmN0eCxcbiAgICAgICAgICAgICAgICAgICAgY29tbW9uOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5jdHguY29tbW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBudWxsLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gb3B0aW9uLl9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY2hpbGRDdHgsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwidmFsaWRcIikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChyZXN1bHQuc3RhdHVzID09PSBcImRpcnR5XCIgJiYgIWRpcnR5KSB7XG4gICAgICAgICAgICAgICAgICAgIGRpcnR5ID0geyByZXN1bHQsIGN0eDogY2hpbGRDdHggfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkQ3R4LmNvbW1vbi5pc3N1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlzc3Vlcy5wdXNoKGNoaWxkQ3R4LmNvbW1vbi5pc3N1ZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkaXJ0eSkge1xuICAgICAgICAgICAgICAgIGN0eC5jb21tb24uaXNzdWVzLnB1c2goLi4uZGlydHkuY3R4LmNvbW1vbi5pc3N1ZXMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBkaXJ0eS5yZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1bmlvbkVycm9ycyA9IGlzc3Vlcy5tYXAoKGlzc3VlcykgPT4gbmV3IFpvZEVycm9yKGlzc3VlcykpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdW5pb24sXG4gICAgICAgICAgICAgICAgdW5pb25FcnJvcnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBvcHRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLm9wdGlvbnM7XG4gICAgfVxufVxuWm9kVW5pb24uY3JlYXRlID0gKHR5cGVzLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFVuaW9uKHtcbiAgICAgICAgb3B0aW9uczogdHlwZXMsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVW5pb24sXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLy8vLy8vLy8vXG4vLy8vLy8vLy8vICAgICAgWm9kRGlzY3JpbWluYXRlZFVuaW9uICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuY29uc3QgZ2V0RGlzY3JpbWluYXRvciA9ICh0eXBlKSA9PiB7XG4gICAgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RMYXp5KSB7XG4gICAgICAgIHJldHVybiBnZXREaXNjcmltaW5hdG9yKHR5cGUuc2NoZW1hKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZEVmZmVjdHMpIHtcbiAgICAgICAgcmV0dXJuIGdldERpc2NyaW1pbmF0b3IodHlwZS5pbm5lclR5cGUoKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RMaXRlcmFsKSB7XG4gICAgICAgIHJldHVybiBbdHlwZS52YWx1ZV07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RFbnVtKSB7XG4gICAgICAgIHJldHVybiB0eXBlLm9wdGlvbnM7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2ROYXRpdmVFbnVtKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBiYW4vYmFuXG4gICAgICAgIHJldHVybiB1dGlsLm9iamVjdFZhbHVlcyh0eXBlLmVudW0pO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kRGVmYXVsdCkge1xuICAgICAgICByZXR1cm4gZ2V0RGlzY3JpbWluYXRvcih0eXBlLl9kZWYuaW5uZXJUeXBlKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZFVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gW3VuZGVmaW5lZF07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2ROdWxsKSB7XG4gICAgICAgIHJldHVybiBbbnVsbF07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RPcHRpb25hbCkge1xuICAgICAgICByZXR1cm4gW3VuZGVmaW5lZCwgLi4uZ2V0RGlzY3JpbWluYXRvcih0eXBlLnVud3JhcCgpKV07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2ROdWxsYWJsZSkge1xuICAgICAgICByZXR1cm4gW251bGwsIC4uLmdldERpc2NyaW1pbmF0b3IodHlwZS51bndyYXAoKSldO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kQnJhbmRlZCkge1xuICAgICAgICByZXR1cm4gZ2V0RGlzY3JpbWluYXRvcih0eXBlLnVud3JhcCgpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZFJlYWRvbmx5KSB7XG4gICAgICAgIHJldHVybiBnZXREaXNjcmltaW5hdG9yKHR5cGUudW53cmFwKCkpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kQ2F0Y2gpIHtcbiAgICAgICAgcmV0dXJuIGdldERpc2NyaW1pbmF0b3IodHlwZS5fZGVmLmlubmVyVHlwZSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gW107XG4gICAgfVxufTtcbmV4cG9ydCBjbGFzcyBab2REaXNjcmltaW5hdGVkVW5pb24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5vYmplY3QpIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUub2JqZWN0LFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGlzY3JpbWluYXRvciA9IHRoaXMuZGlzY3JpbWluYXRvcjtcbiAgICAgICAgY29uc3QgZGlzY3JpbWluYXRvclZhbHVlID0gY3R4LmRhdGFbZGlzY3JpbWluYXRvcl07XG4gICAgICAgIGNvbnN0IG9wdGlvbiA9IHRoaXMub3B0aW9uc01hcC5nZXQoZGlzY3JpbWluYXRvclZhbHVlKTtcbiAgICAgICAgaWYgKCFvcHRpb24pIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3VuaW9uX2Rpc2NyaW1pbmF0b3IsXG4gICAgICAgICAgICAgICAgb3B0aW9uczogQXJyYXkuZnJvbSh0aGlzLm9wdGlvbnNNYXAua2V5cygpKSxcbiAgICAgICAgICAgICAgICBwYXRoOiBbZGlzY3JpbWluYXRvcl0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gb3B0aW9uLl9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG9wdGlvbi5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBkaXNjcmltaW5hdG9yKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmRpc2NyaW1pbmF0b3I7XG4gICAgfVxuICAgIGdldCBvcHRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLm9wdGlvbnM7XG4gICAgfVxuICAgIGdldCBvcHRpb25zTWFwKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLm9wdGlvbnNNYXA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjb25zdHJ1Y3RvciBvZiB0aGUgZGlzY3JpbWluYXRlZCB1bmlvbiBzY2hlbWEuIEl0cyBiZWhhdmlvdXIgaXMgdmVyeSBzaW1pbGFyIHRvIHRoYXQgb2YgdGhlIG5vcm1hbCB6LnVuaW9uKCkgY29uc3RydWN0b3IuXG4gICAgICogSG93ZXZlciwgaXQgb25seSBhbGxvd3MgYSB1bmlvbiBvZiBvYmplY3RzLCBhbGwgb2Ygd2hpY2ggbmVlZCB0byBzaGFyZSBhIGRpc2NyaW1pbmF0b3IgcHJvcGVydHkuIFRoaXMgcHJvcGVydHkgbXVzdFxuICAgICAqIGhhdmUgYSBkaWZmZXJlbnQgdmFsdWUgZm9yIGVhY2ggb2JqZWN0IGluIHRoZSB1bmlvbi5cbiAgICAgKiBAcGFyYW0gZGlzY3JpbWluYXRvciB0aGUgbmFtZSBvZiB0aGUgZGlzY3JpbWluYXRvciBwcm9wZXJ0eVxuICAgICAqIEBwYXJhbSB0eXBlcyBhbiBhcnJheSBvZiBvYmplY3Qgc2NoZW1hc1xuICAgICAqIEBwYXJhbSBwYXJhbXNcbiAgICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlKGRpc2NyaW1pbmF0b3IsIG9wdGlvbnMsIHBhcmFtcykge1xuICAgICAgICAvLyBHZXQgYWxsIHRoZSB2YWxpZCBkaXNjcmltaW5hdG9yIHZhbHVlc1xuICAgICAgICBjb25zdCBvcHRpb25zTWFwID0gbmV3IE1hcCgpO1xuICAgICAgICAvLyB0cnkge1xuICAgICAgICBmb3IgKGNvbnN0IHR5cGUgb2Ygb3B0aW9ucykge1xuICAgICAgICAgICAgY29uc3QgZGlzY3JpbWluYXRvclZhbHVlcyA9IGdldERpc2NyaW1pbmF0b3IodHlwZS5zaGFwZVtkaXNjcmltaW5hdG9yXSk7XG4gICAgICAgICAgICBpZiAoIWRpc2NyaW1pbmF0b3JWYWx1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBIGRpc2NyaW1pbmF0b3IgdmFsdWUgZm9yIGtleSBcXGAke2Rpc2NyaW1pbmF0b3J9XFxgIGNvdWxkIG5vdCBiZSBleHRyYWN0ZWQgZnJvbSBhbGwgc2NoZW1hIG9wdGlvbnNgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3QgdmFsdWUgb2YgZGlzY3JpbWluYXRvclZhbHVlcykge1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zTWFwLmhhcyh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBEaXNjcmltaW5hdG9yIHByb3BlcnR5ICR7U3RyaW5nKGRpc2NyaW1pbmF0b3IpfSBoYXMgZHVwbGljYXRlIHZhbHVlICR7U3RyaW5nKHZhbHVlKX1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgb3B0aW9uc01hcC5zZXQodmFsdWUsIHR5cGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kRGlzY3JpbWluYXRlZFVuaW9uKHtcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRGlzY3JpbWluYXRlZFVuaW9uLFxuICAgICAgICAgICAgZGlzY3JpbWluYXRvcixcbiAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICBvcHRpb25zTWFwLFxuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5mdW5jdGlvbiBtZXJnZVZhbHVlcyhhLCBiKSB7XG4gICAgY29uc3QgYVR5cGUgPSBnZXRQYXJzZWRUeXBlKGEpO1xuICAgIGNvbnN0IGJUeXBlID0gZ2V0UGFyc2VkVHlwZShiKTtcbiAgICBpZiAoYSA9PT0gYikge1xuICAgICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZGF0YTogYSB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChhVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5vYmplY3QgJiYgYlR5cGUgPT09IFpvZFBhcnNlZFR5cGUub2JqZWN0KSB7XG4gICAgICAgIGNvbnN0IGJLZXlzID0gdXRpbC5vYmplY3RLZXlzKGIpO1xuICAgICAgICBjb25zdCBzaGFyZWRLZXlzID0gdXRpbC5vYmplY3RLZXlzKGEpLmZpbHRlcigoa2V5KSA9PiBiS2V5cy5pbmRleE9mKGtleSkgIT09IC0xKTtcbiAgICAgICAgY29uc3QgbmV3T2JqID0geyAuLi5hLCAuLi5iIH07XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHNoYXJlZEtleXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHNoYXJlZFZhbHVlID0gbWVyZ2VWYWx1ZXMoYVtrZXldLCBiW2tleV0pO1xuICAgICAgICAgICAgaWYgKCFzaGFyZWRWYWx1ZS52YWxpZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3T2JqW2tleV0gPSBzaGFyZWRWYWx1ZS5kYXRhO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBkYXRhOiBuZXdPYmogfTtcbiAgICB9XG4gICAgZWxzZSBpZiAoYVR5cGUgPT09IFpvZFBhcnNlZFR5cGUuYXJyYXkgJiYgYlR5cGUgPT09IFpvZFBhcnNlZFR5cGUuYXJyYXkpIHtcbiAgICAgICAgaWYgKGEubGVuZ3RoICE9PSBiLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlIH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmV3QXJyYXkgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGEubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICBjb25zdCBpdGVtQSA9IGFbaW5kZXhdO1xuICAgICAgICAgICAgY29uc3QgaXRlbUIgPSBiW2luZGV4XTtcbiAgICAgICAgICAgIGNvbnN0IHNoYXJlZFZhbHVlID0gbWVyZ2VWYWx1ZXMoaXRlbUEsIGl0ZW1CKTtcbiAgICAgICAgICAgIGlmICghc2hhcmVkVmFsdWUudmFsaWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyB2YWxpZDogZmFsc2UgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5ld0FycmF5LnB1c2goc2hhcmVkVmFsdWUuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGRhdGE6IG5ld0FycmF5IH07XG4gICAgfVxuICAgIGVsc2UgaWYgKGFUeXBlID09PSBab2RQYXJzZWRUeXBlLmRhdGUgJiYgYlR5cGUgPT09IFpvZFBhcnNlZFR5cGUuZGF0ZSAmJiArYSA9PT0gK2IpIHtcbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGRhdGE6IGEgfTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSB9O1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBab2RJbnRlcnNlY3Rpb24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgY29uc3QgaGFuZGxlUGFyc2VkID0gKHBhcnNlZExlZnQsIHBhcnNlZFJpZ2h0KSA9PiB7XG4gICAgICAgICAgICBpZiAoaXNBYm9ydGVkKHBhcnNlZExlZnQpIHx8IGlzQWJvcnRlZChwYXJzZWRSaWdodCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG1lcmdlZCA9IG1lcmdlVmFsdWVzKHBhcnNlZExlZnQudmFsdWUsIHBhcnNlZFJpZ2h0LnZhbHVlKTtcbiAgICAgICAgICAgIGlmICghbWVyZ2VkLnZhbGlkKSB7XG4gICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX2ludGVyc2VjdGlvbl90eXBlcyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc0RpcnR5KHBhcnNlZExlZnQpIHx8IGlzRGlydHkocGFyc2VkUmlnaHQpKSB7XG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IG1lcmdlZC5kYXRhIH07XG4gICAgICAgIH07XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoW1xuICAgICAgICAgICAgICAgIHRoaXMuX2RlZi5sZWZ0Ll9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICB0aGlzLl9kZWYucmlnaHQuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgXSkudGhlbigoW2xlZnQsIHJpZ2h0XSkgPT4gaGFuZGxlUGFyc2VkKGxlZnQsIHJpZ2h0KSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlUGFyc2VkKHRoaXMuX2RlZi5sZWZ0Ll9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgfSksIHRoaXMuX2RlZi5yaWdodC5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblpvZEludGVyc2VjdGlvbi5jcmVhdGUgPSAobGVmdCwgcmlnaHQsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kSW50ZXJzZWN0aW9uKHtcbiAgICAgICAgbGVmdDogbGVmdCxcbiAgICAgICAgcmlnaHQ6IHJpZ2h0LFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEludGVyc2VjdGlvbixcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbi8vIHR5cGUgWm9kVHVwbGVJdGVtcyA9IFtab2RUeXBlQW55LCAuLi5ab2RUeXBlQW55W11dO1xuZXhwb3J0IGNsYXNzIFpvZFR1cGxlIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5hcnJheSkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5hcnJheSxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjdHguZGF0YS5sZW5ndGggPCB0aGlzLl9kZWYuaXRlbXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgIG1pbmltdW06IHRoaXMuX2RlZi5pdGVtcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3QgPSB0aGlzLl9kZWYucmVzdDtcbiAgICAgICAgaWYgKCFyZXN0ICYmIGN0eC5kYXRhLmxlbmd0aCA+IHRoaXMuX2RlZi5pdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgIG1heGltdW06IHRoaXMuX2RlZi5pdGVtcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGl0ZW1zID0gWy4uLmN0eC5kYXRhXVxuICAgICAgICAgICAgLm1hcCgoaXRlbSwgaXRlbUluZGV4KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzY2hlbWEgPSB0aGlzLl9kZWYuaXRlbXNbaXRlbUluZGV4XSB8fCB0aGlzLl9kZWYucmVzdDtcbiAgICAgICAgICAgIGlmICghc2NoZW1hKVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgcmV0dXJuIHNjaGVtYS5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGl0ZW0sIGN0eC5wYXRoLCBpdGVtSW5kZXgpKTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5maWx0ZXIoKHgpID0+ICEheCk7IC8vIGZpbHRlciBudWxsc1xuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKGl0ZW1zKS50aGVuKChyZXN1bHRzKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlQXJyYXkoc3RhdHVzLCByZXN1bHRzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlQXJyYXkoc3RhdHVzLCBpdGVtcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGl0ZW1zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLml0ZW1zO1xuICAgIH1cbiAgICByZXN0KHJlc3QpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RUdXBsZSh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICByZXN0LFxuICAgICAgICB9KTtcbiAgICB9XG59XG5ab2RUdXBsZS5jcmVhdGUgPSAoc2NoZW1hcywgcGFyYW1zKSA9PiB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHNjaGVtYXMpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIllvdSBtdXN0IHBhc3MgYW4gYXJyYXkgb2Ygc2NoZW1hcyB0byB6LnR1cGxlKFsgLi4uIF0pXCIpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFpvZFR1cGxlKHtcbiAgICAgICAgaXRlbXM6IHNjaGVtYXMsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVHVwbGUsXG4gICAgICAgIHJlc3Q6IG51bGwsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kUmVjb3JkIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgZ2V0IGtleVNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5rZXlUeXBlO1xuICAgIH1cbiAgICBnZXQgdmFsdWVTY2hlbWEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudmFsdWVUeXBlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm9iamVjdCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5vYmplY3QsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYWlycyA9IFtdO1xuICAgICAgICBjb25zdCBrZXlUeXBlID0gdGhpcy5fZGVmLmtleVR5cGU7XG4gICAgICAgIGNvbnN0IHZhbHVlVHlwZSA9IHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIGN0eC5kYXRhKSB7XG4gICAgICAgICAgICBwYWlycy5wdXNoKHtcbiAgICAgICAgICAgICAgICBrZXk6IGtleVR5cGUuX3BhcnNlKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCBrZXksIGN0eC5wYXRoLCBrZXkpKSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWVUeXBlLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgY3R4LmRhdGFba2V5XSwgY3R4LnBhdGgsIGtleSkpLFxuICAgICAgICAgICAgICAgIGFsd2F5c1NldDoga2V5IGluIGN0eC5kYXRhLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQYXJzZVN0YXR1cy5tZXJnZU9iamVjdEFzeW5jKHN0YXR1cywgcGFpcnMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlT2JqZWN0U3luYyhzdGF0dXMsIHBhaXJzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgZWxlbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgfVxuICAgIHN0YXRpYyBjcmVhdGUoZmlyc3QsIHNlY29uZCwgdGhpcmQpIHtcbiAgICAgICAgaWYgKHNlY29uZCBpbnN0YW5jZW9mIFpvZFR5cGUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgWm9kUmVjb3JkKHtcbiAgICAgICAgICAgICAgICBrZXlUeXBlOiBmaXJzdCxcbiAgICAgICAgICAgICAgICB2YWx1ZVR5cGU6IHNlY29uZCxcbiAgICAgICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFJlY29yZCxcbiAgICAgICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHRoaXJkKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kUmVjb3JkKHtcbiAgICAgICAgICAgIGtleVR5cGU6IFpvZFN0cmluZy5jcmVhdGUoKSxcbiAgICAgICAgICAgIHZhbHVlVHlwZTogZmlyc3QsXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFJlY29yZCxcbiAgICAgICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMoc2Vjb25kKSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFpvZE1hcCBleHRlbmRzIFpvZFR5cGUge1xuICAgIGdldCBrZXlTY2hlbWEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYua2V5VHlwZTtcbiAgICB9XG4gICAgZ2V0IHZhbHVlU2NoZW1hKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlVHlwZTtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5tYXApIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUubWFwLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qga2V5VHlwZSA9IHRoaXMuX2RlZi5rZXlUeXBlO1xuICAgICAgICBjb25zdCB2YWx1ZVR5cGUgPSB0aGlzLl9kZWYudmFsdWVUeXBlO1xuICAgICAgICBjb25zdCBwYWlycyA9IFsuLi5jdHguZGF0YS5lbnRyaWVzKCldLm1hcCgoW2tleSwgdmFsdWVdLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBrZXk6IGtleVR5cGUuX3BhcnNlKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCBrZXksIGN0eC5wYXRoLCBbaW5kZXgsIFwia2V5XCJdKSksXG4gICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlVHlwZS5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIHZhbHVlLCBjdHgucGF0aCwgW2luZGV4LCBcInZhbHVlXCJdKSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpbmFsTWFwID0gbmV3IE1hcCgpO1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcGFpciBvZiBwYWlycykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBhd2FpdCBwYWlyLmtleTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBhd2FpdCBwYWlyLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5LnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIgfHwgdmFsdWUuc3RhdHVzID09PSBcImFib3J0ZWRcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGtleS5zdGF0dXMgPT09IFwiZGlydHlcIiB8fCB2YWx1ZS5zdGF0dXMgPT09IFwiZGlydHlcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZmluYWxNYXAuc2V0KGtleS52YWx1ZSwgdmFsdWUudmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IGZpbmFsTWFwIH07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGZpbmFsTWFwID0gbmV3IE1hcCgpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBwYWlyIG9mIHBhaXJzKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gcGFpci5rZXk7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBwYWlyLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmIChrZXkuc3RhdHVzID09PSBcImFib3J0ZWRcIiB8fCB2YWx1ZS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoa2V5LnN0YXR1cyA9PT0gXCJkaXJ0eVwiIHx8IHZhbHVlLnN0YXR1cyA9PT0gXCJkaXJ0eVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmaW5hbE1hcC5zZXQoa2V5LnZhbHVlLCB2YWx1ZS52YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IGZpbmFsTWFwIH07XG4gICAgICAgIH1cbiAgICB9XG59XG5ab2RNYXAuY3JlYXRlID0gKGtleVR5cGUsIHZhbHVlVHlwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RNYXAoe1xuICAgICAgICB2YWx1ZVR5cGUsXG4gICAgICAgIGtleVR5cGUsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTWFwLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZFNldCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IHN0YXR1cywgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuc2V0KSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnNldCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRlZiA9IHRoaXMuX2RlZjtcbiAgICAgICAgaWYgKGRlZi5taW5TaXplICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoY3R4LmRhdGEuc2l6ZSA8IGRlZi5taW5TaXplLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgIG1pbmltdW06IGRlZi5taW5TaXplLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInNldFwiLFxuICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZGVmLm1pblNpemUubWVzc2FnZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZGVmLm1heFNpemUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChjdHguZGF0YS5zaXplID4gZGVmLm1heFNpemUudmFsdWUpIHtcbiAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgIG1heGltdW06IGRlZi5tYXhTaXplLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInNldFwiLFxuICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZGVmLm1heFNpemUubWVzc2FnZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCB2YWx1ZVR5cGUgPSB0aGlzLl9kZWYudmFsdWVUeXBlO1xuICAgICAgICBmdW5jdGlvbiBmaW5hbGl6ZVNldChlbGVtZW50cykge1xuICAgICAgICAgICAgY29uc3QgcGFyc2VkU2V0ID0gbmV3IFNldCgpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBlbGVtZW50IG9mIGVsZW1lbnRzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIHBhcnNlZFNldC5hZGQoZWxlbWVudC52YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IHBhcnNlZFNldCB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGVsZW1lbnRzID0gWy4uLmN0eC5kYXRhLnZhbHVlcygpXS5tYXAoKGl0ZW0sIGkpID0+IHZhbHVlVHlwZS5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGl0ZW0sIGN0eC5wYXRoLCBpKSkpO1xuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKGVsZW1lbnRzKS50aGVuKChlbGVtZW50cykgPT4gZmluYWxpemVTZXQoZWxlbWVudHMpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmaW5hbGl6ZVNldChlbGVtZW50cyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbWluKG1pblNpemUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RTZXQoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgbWluU2l6ZTogeyB2YWx1ZTogbWluU2l6ZSwgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXgobWF4U2l6ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFNldCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBtYXhTaXplOiB7IHZhbHVlOiBtYXhTaXplLCBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNpemUoc2l6ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5taW4oc2l6ZSwgbWVzc2FnZSkubWF4KHNpemUsIG1lc3NhZ2UpO1xuICAgIH1cbiAgICBub25lbXB0eShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pbigxLCBtZXNzYWdlKTtcbiAgICB9XG59XG5ab2RTZXQuY3JlYXRlID0gKHZhbHVlVHlwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RTZXQoe1xuICAgICAgICB2YWx1ZVR5cGUsXG4gICAgICAgIG1pblNpemU6IG51bGwsXG4gICAgICAgIG1heFNpemU6IG51bGwsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU2V0LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZEZ1bmN0aW9uIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMudmFsaWRhdGUgPSB0aGlzLmltcGxlbWVudDtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuZnVuY3Rpb24pIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUuZnVuY3Rpb24sXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBtYWtlQXJnc0lzc3VlKGFyZ3MsIGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gbWFrZUlzc3VlKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBhcmdzLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIGVycm9yTWFwczogW2N0eC5jb21tb24uY29udGV4dHVhbEVycm9yTWFwLCBjdHguc2NoZW1hRXJyb3JNYXAsIGdldEVycm9yTWFwKCksIGRlZmF1bHRFcnJvck1hcF0uZmlsdGVyKCh4KSA9PiAhIXgpLFxuICAgICAgICAgICAgICAgIGlzc3VlRGF0YToge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9hcmd1bWVudHMsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50c0Vycm9yOiBlcnJvcixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gbWFrZVJldHVybnNJc3N1ZShyZXR1cm5zLCBlcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIG1ha2VJc3N1ZSh7XG4gICAgICAgICAgICAgICAgZGF0YTogcmV0dXJucyxcbiAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICBlcnJvck1hcHM6IFtjdHguY29tbW9uLmNvbnRleHR1YWxFcnJvck1hcCwgY3R4LnNjaGVtYUVycm9yTWFwLCBnZXRFcnJvck1hcCgpLCBkZWZhdWx0RXJyb3JNYXBdLmZpbHRlcigoeCkgPT4gISF4KSxcbiAgICAgICAgICAgICAgICBpc3N1ZURhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfcmV0dXJuX3R5cGUsXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblR5cGVFcnJvcjogZXJyb3IsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHsgZXJyb3JNYXA6IGN0eC5jb21tb24uY29udGV4dHVhbEVycm9yTWFwIH07XG4gICAgICAgIGNvbnN0IGZuID0gY3R4LmRhdGE7XG4gICAgICAgIGlmICh0aGlzLl9kZWYucmV0dXJucyBpbnN0YW5jZW9mIFpvZFByb21pc2UpIHtcbiAgICAgICAgICAgIC8vIFdvdWxkIGxvdmUgYSB3YXkgdG8gYXZvaWQgZGlzYWJsaW5nIHRoaXMgcnVsZSwgYnV0IHdlIG5lZWRcbiAgICAgICAgICAgIC8vIGFuIGFsaWFzICh1c2luZyBhbiBhcnJvdyBmdW5jdGlvbiB3YXMgd2hhdCBjYXVzZWQgMjY1MSkuXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXRoaXMtYWxpYXNcbiAgICAgICAgICAgIGNvbnN0IG1lID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiBPSyhhc3luYyBmdW5jdGlvbiAoLi4uYXJncykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yID0gbmV3IFpvZEVycm9yKFtdKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWRBcmdzID0gYXdhaXQgbWUuX2RlZi5hcmdzLnBhcnNlQXN5bmMoYXJncywgcGFyYW1zKS5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBlcnJvci5hZGRJc3N1ZShtYWtlQXJnc0lzc3VlKGFyZ3MsIGUpKTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgUmVmbGVjdC5hcHBseShmbiwgdGhpcywgcGFyc2VkQXJncyk7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkUmV0dXJucyA9IGF3YWl0IG1lLl9kZWYucmV0dXJucy5fZGVmLnR5cGVcbiAgICAgICAgICAgICAgICAgICAgLnBhcnNlQXN5bmMocmVzdWx0LCBwYXJhbXMpXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBlcnJvci5hZGRJc3N1ZShtYWtlUmV0dXJuc0lzc3VlKHJlc3VsdCwgZSkpO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VkUmV0dXJucztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gV291bGQgbG92ZSBhIHdheSB0byBhdm9pZCBkaXNhYmxpbmcgdGhpcyBydWxlLCBidXQgd2UgbmVlZFxuICAgICAgICAgICAgLy8gYW4gYWxpYXMgKHVzaW5nIGFuIGFycm93IGZ1bmN0aW9uIHdhcyB3aGF0IGNhdXNlZCAyNjUxKS5cbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdGhpcy1hbGlhc1xuICAgICAgICAgICAgY29uc3QgbWUgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIE9LKGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkQXJncyA9IG1lLl9kZWYuYXJncy5zYWZlUGFyc2UoYXJncywgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICBpZiAoIXBhcnNlZEFyZ3Muc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgWm9kRXJyb3IoW21ha2VBcmdzSXNzdWUoYXJncywgcGFyc2VkQXJncy5lcnJvcildKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gUmVmbGVjdC5hcHBseShmbiwgdGhpcywgcGFyc2VkQXJncy5kYXRhKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWRSZXR1cm5zID0gbWUuX2RlZi5yZXR1cm5zLnNhZmVQYXJzZShyZXN1bHQsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgaWYgKCFwYXJzZWRSZXR1cm5zLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFpvZEVycm9yKFttYWtlUmV0dXJuc0lzc3VlKHJlc3VsdCwgcGFyc2VkUmV0dXJucy5lcnJvcildKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlZFJldHVybnMuZGF0YTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHBhcmFtZXRlcnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuYXJncztcbiAgICB9XG4gICAgcmV0dXJuVHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5yZXR1cm5zO1xuICAgIH1cbiAgICBhcmdzKC4uLml0ZW1zKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kRnVuY3Rpb24oe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgYXJnczogWm9kVHVwbGUuY3JlYXRlKGl0ZW1zKS5yZXN0KFpvZFVua25vd24uY3JlYXRlKCkpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJucyhyZXR1cm5UeXBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kRnVuY3Rpb24oe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgcmV0dXJuczogcmV0dXJuVHlwZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGltcGxlbWVudChmdW5jKSB7XG4gICAgICAgIGNvbnN0IHZhbGlkYXRlZEZ1bmMgPSB0aGlzLnBhcnNlKGZ1bmMpO1xuICAgICAgICByZXR1cm4gdmFsaWRhdGVkRnVuYztcbiAgICB9XG4gICAgc3RyaWN0SW1wbGVtZW50KGZ1bmMpIHtcbiAgICAgICAgY29uc3QgdmFsaWRhdGVkRnVuYyA9IHRoaXMucGFyc2UoZnVuYyk7XG4gICAgICAgIHJldHVybiB2YWxpZGF0ZWRGdW5jO1xuICAgIH1cbiAgICBzdGF0aWMgY3JlYXRlKGFyZ3MsIHJldHVybnMsIHBhcmFtcykge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEZ1bmN0aW9uKHtcbiAgICAgICAgICAgIGFyZ3M6IChhcmdzID8gYXJncyA6IFpvZFR1cGxlLmNyZWF0ZShbXSkucmVzdChab2RVbmtub3duLmNyZWF0ZSgpKSksXG4gICAgICAgICAgICByZXR1cm5zOiByZXR1cm5zIHx8IFpvZFVua25vd24uY3JlYXRlKCksXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEZ1bmN0aW9uLFxuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgWm9kTGF6eSBleHRlbmRzIFpvZFR5cGUge1xuICAgIGdldCBzY2hlbWEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuZ2V0dGVyKCk7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgY29uc3QgbGF6eVNjaGVtYSA9IHRoaXMuX2RlZi5nZXR0ZXIoKTtcbiAgICAgICAgcmV0dXJuIGxhenlTY2hlbWEuX3BhcnNlKHsgZGF0YTogY3R4LmRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KTtcbiAgICB9XG59XG5ab2RMYXp5LmNyZWF0ZSA9IChnZXR0ZXIsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTGF6eSh7XG4gICAgICAgIGdldHRlcjogZ2V0dGVyLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZExhenksXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kTGl0ZXJhbCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAoaW5wdXQuZGF0YSAhPT0gdGhpcy5fZGVmLnZhbHVlKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfbGl0ZXJhbCxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogdGhpcy5fZGVmLnZhbHVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzdGF0dXM6IFwidmFsaWRcIiwgdmFsdWU6IGlucHV0LmRhdGEgfTtcbiAgICB9XG4gICAgZ2V0IHZhbHVlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlO1xuICAgIH1cbn1cblpvZExpdGVyYWwuY3JlYXRlID0gKHZhbHVlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZExpdGVyYWwoe1xuICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTGl0ZXJhbCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmZ1bmN0aW9uIGNyZWF0ZVpvZEVudW0odmFsdWVzLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IFpvZEVudW0oe1xuICAgICAgICB2YWx1ZXMsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRW51bSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuZXhwb3J0IGNsYXNzIFpvZEVudW0gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBpbnB1dC5kYXRhICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBjb25zdCBleHBlY3RlZFZhbHVlcyA9IHRoaXMuX2RlZi52YWx1ZXM7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogdXRpbC5qb2luVmFsdWVzKGV4cGVjdGVkVmFsdWVzKSxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9jYWNoZSkge1xuICAgICAgICAgICAgdGhpcy5fY2FjaGUgPSBuZXcgU2V0KHRoaXMuX2RlZi52YWx1ZXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5fY2FjaGUuaGFzKGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBjb25zdCBleHBlY3RlZFZhbHVlcyA9IHRoaXMuX2RlZi52YWx1ZXM7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfZW51bV92YWx1ZSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBleHBlY3RlZFZhbHVlcyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbiAgICBnZXQgb3B0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi52YWx1ZXM7XG4gICAgfVxuICAgIGdldCBlbnVtKCkge1xuICAgICAgICBjb25zdCBlbnVtVmFsdWVzID0ge307XG4gICAgICAgIGZvciAoY29uc3QgdmFsIG9mIHRoaXMuX2RlZi52YWx1ZXMpIHtcbiAgICAgICAgICAgIGVudW1WYWx1ZXNbdmFsXSA9IHZhbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW51bVZhbHVlcztcbiAgICB9XG4gICAgZ2V0IFZhbHVlcygpIHtcbiAgICAgICAgY29uc3QgZW51bVZhbHVlcyA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IHZhbCBvZiB0aGlzLl9kZWYudmFsdWVzKSB7XG4gICAgICAgICAgICBlbnVtVmFsdWVzW3ZhbF0gPSB2YWw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVudW1WYWx1ZXM7XG4gICAgfVxuICAgIGdldCBFbnVtKCkge1xuICAgICAgICBjb25zdCBlbnVtVmFsdWVzID0ge307XG4gICAgICAgIGZvciAoY29uc3QgdmFsIG9mIHRoaXMuX2RlZi52YWx1ZXMpIHtcbiAgICAgICAgICAgIGVudW1WYWx1ZXNbdmFsXSA9IHZhbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW51bVZhbHVlcztcbiAgICB9XG4gICAgZXh0cmFjdCh2YWx1ZXMsIG5ld0RlZiA9IHRoaXMuX2RlZikge1xuICAgICAgICByZXR1cm4gWm9kRW51bS5jcmVhdGUodmFsdWVzLCB7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICAuLi5uZXdEZWYsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBleGNsdWRlKHZhbHVlcywgbmV3RGVmID0gdGhpcy5fZGVmKSB7XG4gICAgICAgIHJldHVybiBab2RFbnVtLmNyZWF0ZSh0aGlzLm9wdGlvbnMuZmlsdGVyKChvcHQpID0+ICF2YWx1ZXMuaW5jbHVkZXMob3B0KSksIHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIC4uLm5ld0RlZixcbiAgICAgICAgfSk7XG4gICAgfVxufVxuWm9kRW51bS5jcmVhdGUgPSBjcmVhdGVab2RFbnVtO1xuZXhwb3J0IGNsYXNzIFpvZE5hdGl2ZUVudW0gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgbmF0aXZlRW51bVZhbHVlcyA9IHV0aWwuZ2V0VmFsaWRFbnVtVmFsdWVzKHRoaXMuX2RlZi52YWx1ZXMpO1xuICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5zdHJpbmcgJiYgY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUubnVtYmVyKSB7XG4gICAgICAgICAgICBjb25zdCBleHBlY3RlZFZhbHVlcyA9IHV0aWwub2JqZWN0VmFsdWVzKG5hdGl2ZUVudW1WYWx1ZXMpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IHV0aWwuam9pblZhbHVlcyhleHBlY3RlZFZhbHVlcyksXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5fY2FjaGUpIHtcbiAgICAgICAgICAgIHRoaXMuX2NhY2hlID0gbmV3IFNldCh1dGlsLmdldFZhbGlkRW51bVZhbHVlcyh0aGlzLl9kZWYudmFsdWVzKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9jYWNoZS5oYXMoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkVmFsdWVzID0gdXRpbC5vYmplY3RWYWx1ZXMobmF0aXZlRW51bVZhbHVlcyk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfZW51bV92YWx1ZSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBleHBlY3RlZFZhbHVlcyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbiAgICBnZXQgZW51bSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi52YWx1ZXM7XG4gICAgfVxufVxuWm9kTmF0aXZlRW51bS5jcmVhdGUgPSAodmFsdWVzLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE5hdGl2ZUVudW0oe1xuICAgICAgICB2YWx1ZXM6IHZhbHVlcyxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROYXRpdmVFbnVtLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZFByb21pc2UgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICB1bndyYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudHlwZTtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUucHJvbWlzZSAmJiBjdHguY29tbW9uLmFzeW5jID09PSBmYWxzZSkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5wcm9taXNlLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcHJvbWlzaWZpZWQgPSBjdHgucGFyc2VkVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5wcm9taXNlID8gY3R4LmRhdGEgOiBQcm9taXNlLnJlc29sdmUoY3R4LmRhdGEpO1xuICAgICAgICByZXR1cm4gT0socHJvbWlzaWZpZWQudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi50eXBlLnBhcnNlQXN5bmMoZGF0YSwge1xuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIGVycm9yTWFwOiBjdHguY29tbW9uLmNvbnRleHR1YWxFcnJvck1hcCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuWm9kUHJvbWlzZS5jcmVhdGUgPSAoc2NoZW1hLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFByb21pc2Uoe1xuICAgICAgICB0eXBlOiBzY2hlbWEsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUHJvbWlzZSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RFZmZlY3RzIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgaW5uZXJUeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnNjaGVtYTtcbiAgICB9XG4gICAgc291cmNlVHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5zY2hlbWEuX2RlZi50eXBlTmFtZSA9PT0gWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEVmZmVjdHNcbiAgICAgICAgICAgID8gdGhpcy5fZGVmLnNjaGVtYS5zb3VyY2VUeXBlKClcbiAgICAgICAgICAgIDogdGhpcy5fZGVmLnNjaGVtYTtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGNvbnN0IGVmZmVjdCA9IHRoaXMuX2RlZi5lZmZlY3QgfHwgbnVsbDtcbiAgICAgICAgY29uc3QgY2hlY2tDdHggPSB7XG4gICAgICAgICAgICBhZGRJc3N1ZTogKGFyZykgPT4ge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwgYXJnKTtcbiAgICAgICAgICAgICAgICBpZiAoYXJnLmZhdGFsKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5hYm9ydCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldCBwYXRoKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjdHgucGF0aDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICAgIGNoZWNrQ3R4LmFkZElzc3VlID0gY2hlY2tDdHguYWRkSXNzdWUuYmluZChjaGVja0N0eCk7XG4gICAgICAgIGlmIChlZmZlY3QudHlwZSA9PT0gXCJwcmVwcm9jZXNzXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IHByb2Nlc3NlZCA9IGVmZmVjdC50cmFuc2Zvcm0oY3R4LmRhdGEsIGNoZWNrQ3R4KTtcbiAgICAgICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShwcm9jZXNzZWQpLnRoZW4oYXN5bmMgKHByb2Nlc3NlZCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdHVzLnZhbHVlID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHByb2Nlc3NlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBESVJUWShyZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdHVzLnZhbHVlID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gRElSVFkocmVzdWx0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChzdGF0dXMudmFsdWUgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBwcm9jZXNzZWQsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBESVJUWShyZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgICAgIGlmIChzdGF0dXMudmFsdWUgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERJUlRZKHJlc3VsdC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZWZmZWN0LnR5cGUgPT09IFwicmVmaW5lbWVudFwiKSB7XG4gICAgICAgICAgICBjb25zdCBleGVjdXRlUmVmaW5lbWVudCA9IChhY2MpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBlZmZlY3QucmVmaW5lbWVudChhY2MsIGNoZWNrQ3R4KTtcbiAgICAgICAgICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkFzeW5jIHJlZmluZW1lbnQgZW5jb3VudGVyZWQgZHVyaW5nIHN5bmNocm9ub3VzIHBhcnNlIG9wZXJhdGlvbi4gVXNlIC5wYXJzZUFzeW5jIGluc3RlYWQuXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGlubmVyID0gdGhpcy5fZGVmLnNjaGVtYS5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoaW5uZXIuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgaWYgKGlubmVyLnN0YXR1cyA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICAvLyByZXR1cm4gdmFsdWUgaXMgaWdub3JlZFxuICAgICAgICAgICAgICAgIGV4ZWN1dGVSZWZpbmVtZW50KGlubmVyLnZhbHVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IGlubmVyLnZhbHVlIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnNjaGVtYS5fcGFyc2VBc3luYyh7IGRhdGE6IGN0eC5kYXRhLCBwYXRoOiBjdHgucGF0aCwgcGFyZW50OiBjdHggfSkudGhlbigoaW5uZXIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlubmVyLnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlubmVyLnN0YXR1cyA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBleGVjdXRlUmVmaW5lbWVudChpbm5lci52YWx1ZSkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IGlubmVyLnZhbHVlIH07XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChlZmZlY3QudHlwZSA9PT0gXCJ0cmFuc2Zvcm1cIikge1xuICAgICAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYmFzZSA9IHRoaXMuX2RlZi5zY2hlbWEuX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKCFpc1ZhbGlkKGJhc2UpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBlZmZlY3QudHJhbnNmb3JtKGJhc2UudmFsdWUsIGNoZWNrQ3R4KTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEFzeW5jaHJvbm91cyB0cmFuc2Zvcm0gZW5jb3VudGVyZWQgZHVyaW5nIHN5bmNocm9ub3VzIHBhcnNlIG9wZXJhdGlvbi4gVXNlIC5wYXJzZUFzeW5jIGluc3RlYWQuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogcmVzdWx0IH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnNjaGVtYS5fcGFyc2VBc3luYyh7IGRhdGE6IGN0eC5kYXRhLCBwYXRoOiBjdHgucGF0aCwgcGFyZW50OiBjdHggfSkudGhlbigoYmFzZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzVmFsaWQoYmFzZSkpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShlZmZlY3QudHJhbnNmb3JtKGJhc2UudmFsdWUsIGNoZWNrQ3R4KSkudGhlbigocmVzdWx0KSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBzdGF0dXMudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcmVzdWx0LFxuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdXRpbC5hc3NlcnROZXZlcihlZmZlY3QpO1xuICAgIH1cbn1cblpvZEVmZmVjdHMuY3JlYXRlID0gKHNjaGVtYSwgZWZmZWN0LCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZEVmZmVjdHMoe1xuICAgICAgICBzY2hlbWEsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRWZmZWN0cyxcbiAgICAgICAgZWZmZWN0LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuWm9kRWZmZWN0cy5jcmVhdGVXaXRoUHJlcHJvY2VzcyA9IChwcmVwcm9jZXNzLCBzY2hlbWEsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kRWZmZWN0cyh7XG4gICAgICAgIHNjaGVtYSxcbiAgICAgICAgZWZmZWN0OiB7IHR5cGU6IFwicHJlcHJvY2Vzc1wiLCB0cmFuc2Zvcm06IHByZXByb2Nlc3MgfSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFZmZlY3RzLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IHsgWm9kRWZmZWN0cyBhcyBab2RUcmFuc2Zvcm1lciB9O1xuZXhwb3J0IGNsYXNzIFpvZE9wdGlvbmFsIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgPT09IFpvZFBhcnNlZFR5cGUudW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gT0sodW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmlubmVyVHlwZS5fcGFyc2UoaW5wdXQpO1xuICAgIH1cbiAgICB1bndyYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlO1xuICAgIH1cbn1cblpvZE9wdGlvbmFsLmNyZWF0ZSA9ICh0eXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE9wdGlvbmFsKHtcbiAgICAgICAgaW5uZXJUeXBlOiB0eXBlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE9wdGlvbmFsLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZE51bGxhYmxlIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgPT09IFpvZFBhcnNlZFR5cGUubnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIE9LKG51bGwpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZShpbnB1dCk7XG4gICAgfVxuICAgIHVud3JhcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5pbm5lclR5cGU7XG4gICAgfVxufVxuWm9kTnVsbGFibGUuY3JlYXRlID0gKHR5cGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTnVsbGFibGUoe1xuICAgICAgICBpbm5lclR5cGU6IHR5cGUsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTnVsbGFibGUsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kRGVmYXVsdCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgbGV0IGRhdGEgPSBjdHguZGF0YTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlID09PSBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZGF0YSA9IHRoaXMuX2RlZi5kZWZhdWx0VmFsdWUoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmlubmVyVHlwZS5fcGFyc2Uoe1xuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZW1vdmVEZWZhdWx0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmlubmVyVHlwZTtcbiAgICB9XG59XG5ab2REZWZhdWx0LmNyZWF0ZSA9ICh0eXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZERlZmF1bHQoe1xuICAgICAgICBpbm5lclR5cGU6IHR5cGUsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRGVmYXVsdCxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiB0eXBlb2YgcGFyYW1zLmRlZmF1bHQgPT09IFwiZnVuY3Rpb25cIiA/IHBhcmFtcy5kZWZhdWx0IDogKCkgPT4gcGFyYW1zLmRlZmF1bHQsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kQ2F0Y2ggZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIC8vIG5ld0N0eCBpcyB1c2VkIHRvIG5vdCBjb2xsZWN0IGlzc3VlcyBmcm9tIGlubmVyIHR5cGVzIGluIGN0eFxuICAgICAgICBjb25zdCBuZXdDdHggPSB7XG4gICAgICAgICAgICAuLi5jdHgsXG4gICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICAuLi5jdHguY29tbW9uLFxuICAgICAgICAgICAgICAgIGlzc3VlczogW10sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZSh7XG4gICAgICAgICAgICBkYXRhOiBuZXdDdHguZGF0YSxcbiAgICAgICAgICAgIHBhdGg6IG5ld0N0eC5wYXRoLFxuICAgICAgICAgICAgcGFyZW50OiB7XG4gICAgICAgICAgICAgICAgLi4ubmV3Q3R4LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChpc0FzeW5jKHJlc3VsdCkpIHtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBcInZhbGlkXCIsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHQuc3RhdHVzID09PSBcInZhbGlkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gcmVzdWx0LnZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMuX2RlZi5jYXRjaFZhbHVlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXQgZXJyb3IoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgWm9kRXJyb3IobmV3Q3R4LmNvbW1vbi5pc3N1ZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IG5ld0N0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6IFwidmFsaWRcIixcbiAgICAgICAgICAgICAgICB2YWx1ZTogcmVzdWx0LnN0YXR1cyA9PT0gXCJ2YWxpZFwiXG4gICAgICAgICAgICAgICAgICAgID8gcmVzdWx0LnZhbHVlXG4gICAgICAgICAgICAgICAgICAgIDogdGhpcy5fZGVmLmNhdGNoVmFsdWUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0IGVycm9yKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgWm9kRXJyb3IobmV3Q3R4LmNvbW1vbi5pc3N1ZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0OiBuZXdDdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlbW92ZUNhdGNoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmlubmVyVHlwZTtcbiAgICB9XG59XG5ab2RDYXRjaC5jcmVhdGUgPSAodHlwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RDYXRjaCh7XG4gICAgICAgIGlubmVyVHlwZTogdHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RDYXRjaCxcbiAgICAgICAgY2F0Y2hWYWx1ZTogdHlwZW9mIHBhcmFtcy5jYXRjaCA9PT0gXCJmdW5jdGlvblwiID8gcGFyYW1zLmNhdGNoIDogKCkgPT4gcGFyYW1zLmNhdGNoLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZE5hTiBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm5hbikge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5uYW4sXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzdGF0dXM6IFwidmFsaWRcIiwgdmFsdWU6IGlucHV0LmRhdGEgfTtcbiAgICB9XG59XG5ab2ROYU4uY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTmFOKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROYU4sXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY29uc3QgQlJBTkQgPSBTeW1ib2woXCJ6b2RfYnJhbmRcIik7XG5leHBvcnQgY2xhc3MgWm9kQnJhbmRlZCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgY29uc3QgZGF0YSA9IGN0eC5kYXRhO1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnR5cGUuX3BhcnNlKHtcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdW53cmFwKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnR5cGU7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFpvZFBpcGVsaW5lIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICBjb25zdCBoYW5kbGVBc3luYyA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpblJlc3VsdCA9IGF3YWl0IHRoaXMuX2RlZi5pbi5fcGFyc2VBc3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKGluUmVzdWx0LnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgIGlmIChpblJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIikge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERJUlRZKGluUmVzdWx0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9kZWYub3V0Ll9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGluUmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVBc3luYygpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgaW5SZXN1bHQgPSB0aGlzLl9kZWYuaW4uX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChpblJlc3VsdC5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgaWYgKGluUmVzdWx0LnN0YXR1cyA9PT0gXCJkaXJ0eVwiKSB7XG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBcImRpcnR5XCIsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBpblJlc3VsdC52YWx1ZSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5vdXQuX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGluUmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZShhLCBiKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kUGlwZWxpbmUoe1xuICAgICAgICAgICAgaW46IGEsXG4gICAgICAgICAgICBvdXQ6IGIsXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFBpcGVsaW5lLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgWm9kUmVhZG9ubHkgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fZGVmLmlubmVyVHlwZS5fcGFyc2UoaW5wdXQpO1xuICAgICAgICBjb25zdCBmcmVlemUgPSAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgaWYgKGlzVmFsaWQoZGF0YSkpIHtcbiAgICAgICAgICAgICAgICBkYXRhLnZhbHVlID0gT2JqZWN0LmZyZWV6ZShkYXRhLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gaXNBc3luYyhyZXN1bHQpID8gcmVzdWx0LnRoZW4oKGRhdGEpID0+IGZyZWV6ZShkYXRhKSkgOiBmcmVlemUocmVzdWx0KTtcbiAgICB9XG4gICAgdW53cmFwKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmlubmVyVHlwZTtcbiAgICB9XG59XG5ab2RSZWFkb25seS5jcmVhdGUgPSAodHlwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RSZWFkb25seSh7XG4gICAgICAgIGlubmVyVHlwZTogdHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RSZWFkb25seSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8gICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy9cbi8vLy8vLy8vLy8gICAgICB6LmN1c3RvbSAgICAgIC8vLy8vLy8vLy9cbi8vLy8vLy8vLy8gICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbmZ1bmN0aW9uIGNsZWFuUGFyYW1zKHBhcmFtcywgZGF0YSkge1xuICAgIGNvbnN0IHAgPSB0eXBlb2YgcGFyYW1zID09PSBcImZ1bmN0aW9uXCIgPyBwYXJhbXMoZGF0YSkgOiB0eXBlb2YgcGFyYW1zID09PSBcInN0cmluZ1wiID8geyBtZXNzYWdlOiBwYXJhbXMgfSA6IHBhcmFtcztcbiAgICBjb25zdCBwMiA9IHR5cGVvZiBwID09PSBcInN0cmluZ1wiID8geyBtZXNzYWdlOiBwIH0gOiBwO1xuICAgIHJldHVybiBwMjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjdXN0b20oY2hlY2ssIF9wYXJhbXMgPSB7fSwgXG4vKipcbiAqIEBkZXByZWNhdGVkXG4gKlxuICogUGFzcyBgZmF0YWxgIGludG8gdGhlIHBhcmFtcyBvYmplY3QgaW5zdGVhZDpcbiAqXG4gKiBgYGB0c1xuICogei5zdHJpbmcoKS5jdXN0b20oKHZhbCkgPT4gdmFsLmxlbmd0aCA+IDUsIHsgZmF0YWw6IGZhbHNlIH0pXG4gKiBgYGBcbiAqXG4gKi9cbmZhdGFsKSB7XG4gICAgaWYgKGNoZWNrKVxuICAgICAgICByZXR1cm4gWm9kQW55LmNyZWF0ZSgpLnN1cGVyUmVmaW5lKChkYXRhLCBjdHgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBjaGVjayhkYXRhKTtcbiAgICAgICAgICAgIGlmIChyIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByLnRoZW4oKHIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJhbXMgPSBjbGVhblBhcmFtcyhfcGFyYW1zLCBkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IF9mYXRhbCA9IHBhcmFtcy5mYXRhbCA/PyBmYXRhbCA/PyB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmFkZElzc3VlKHsgY29kZTogXCJjdXN0b21cIiwgLi4ucGFyYW1zLCBmYXRhbDogX2ZhdGFsIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJhbXMgPSBjbGVhblBhcmFtcyhfcGFyYW1zLCBkYXRhKTtcbiAgICAgICAgICAgICAgICBjb25zdCBfZmF0YWwgPSBwYXJhbXMuZmF0YWwgPz8gZmF0YWwgPz8gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjdHguYWRkSXNzdWUoeyBjb2RlOiBcImN1c3RvbVwiLCAuLi5wYXJhbXMsIGZhdGFsOiBfZmF0YWwgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0pO1xuICAgIHJldHVybiBab2RBbnkuY3JlYXRlKCk7XG59XG5leHBvcnQgeyBab2RUeXBlIGFzIFNjaGVtYSwgWm9kVHlwZSBhcyBab2RTY2hlbWEgfTtcbmV4cG9ydCBjb25zdCBsYXRlID0ge1xuICAgIG9iamVjdDogWm9kT2JqZWN0LmxhenljcmVhdGUsXG59O1xuZXhwb3J0IHZhciBab2RGaXJzdFBhcnR5VHlwZUtpbmQ7XG4oZnVuY3Rpb24gKFpvZEZpcnN0UGFydHlUeXBlS2luZCkge1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFN0cmluZ1wiXSA9IFwiWm9kU3RyaW5nXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTnVtYmVyXCJdID0gXCJab2ROdW1iZXJcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2ROYU5cIl0gPSBcIlpvZE5hTlwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEJpZ0ludFwiXSA9IFwiWm9kQmlnSW50XCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kQm9vbGVhblwiXSA9IFwiWm9kQm9vbGVhblwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZERhdGVcIl0gPSBcIlpvZERhdGVcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RTeW1ib2xcIl0gPSBcIlpvZFN5bWJvbFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFVuZGVmaW5lZFwiXSA9IFwiWm9kVW5kZWZpbmVkXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTnVsbFwiXSA9IFwiWm9kTnVsbFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEFueVwiXSA9IFwiWm9kQW55XCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kVW5rbm93blwiXSA9IFwiWm9kVW5rbm93blwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE5ldmVyXCJdID0gXCJab2ROZXZlclwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFZvaWRcIl0gPSBcIlpvZFZvaWRcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RBcnJheVwiXSA9IFwiWm9kQXJyYXlcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RPYmplY3RcIl0gPSBcIlpvZE9iamVjdFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFVuaW9uXCJdID0gXCJab2RVbmlvblwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZERpc2NyaW1pbmF0ZWRVbmlvblwiXSA9IFwiWm9kRGlzY3JpbWluYXRlZFVuaW9uXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kSW50ZXJzZWN0aW9uXCJdID0gXCJab2RJbnRlcnNlY3Rpb25cIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RUdXBsZVwiXSA9IFwiWm9kVHVwbGVcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RSZWNvcmRcIl0gPSBcIlpvZFJlY29yZFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE1hcFwiXSA9IFwiWm9kTWFwXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kU2V0XCJdID0gXCJab2RTZXRcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RGdW5jdGlvblwiXSA9IFwiWm9kRnVuY3Rpb25cIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RMYXp5XCJdID0gXCJab2RMYXp5XCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTGl0ZXJhbFwiXSA9IFwiWm9kTGl0ZXJhbFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEVudW1cIl0gPSBcIlpvZEVudW1cIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RFZmZlY3RzXCJdID0gXCJab2RFZmZlY3RzXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTmF0aXZlRW51bVwiXSA9IFwiWm9kTmF0aXZlRW51bVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE9wdGlvbmFsXCJdID0gXCJab2RPcHRpb25hbFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE51bGxhYmxlXCJdID0gXCJab2ROdWxsYWJsZVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZERlZmF1bHRcIl0gPSBcIlpvZERlZmF1bHRcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RDYXRjaFwiXSA9IFwiWm9kQ2F0Y2hcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RQcm9taXNlXCJdID0gXCJab2RQcm9taXNlXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kQnJhbmRlZFwiXSA9IFwiWm9kQnJhbmRlZFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFBpcGVsaW5lXCJdID0gXCJab2RQaXBlbGluZVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFJlYWRvbmx5XCJdID0gXCJab2RSZWFkb25seVwiO1xufSkoWm9kRmlyc3RQYXJ0eVR5cGVLaW5kIHx8IChab2RGaXJzdFBhcnR5VHlwZUtpbmQgPSB7fSkpO1xuLy8gcmVxdWlyZXMgVFMgNC40K1xuY2xhc3MgQ2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yKC4uLl8pIHsgfVxufVxuY29uc3QgaW5zdGFuY2VPZlR5cGUgPSAoXG4vLyBjb25zdCBpbnN0YW5jZU9mVHlwZSA9IDxUIGV4dGVuZHMgbmV3ICguLi5hcmdzOiBhbnlbXSkgPT4gYW55PihcbmNscywgcGFyYW1zID0ge1xuICAgIG1lc3NhZ2U6IGBJbnB1dCBub3QgaW5zdGFuY2Ugb2YgJHtjbHMubmFtZX1gLFxufSkgPT4gY3VzdG9tKChkYXRhKSA9PiBkYXRhIGluc3RhbmNlb2YgY2xzLCBwYXJhbXMpO1xuY29uc3Qgc3RyaW5nVHlwZSA9IFpvZFN0cmluZy5jcmVhdGU7XG5jb25zdCBudW1iZXJUeXBlID0gWm9kTnVtYmVyLmNyZWF0ZTtcbmNvbnN0IG5hblR5cGUgPSBab2ROYU4uY3JlYXRlO1xuY29uc3QgYmlnSW50VHlwZSA9IFpvZEJpZ0ludC5jcmVhdGU7XG5jb25zdCBib29sZWFuVHlwZSA9IFpvZEJvb2xlYW4uY3JlYXRlO1xuY29uc3QgZGF0ZVR5cGUgPSBab2REYXRlLmNyZWF0ZTtcbmNvbnN0IHN5bWJvbFR5cGUgPSBab2RTeW1ib2wuY3JlYXRlO1xuY29uc3QgdW5kZWZpbmVkVHlwZSA9IFpvZFVuZGVmaW5lZC5jcmVhdGU7XG5jb25zdCBudWxsVHlwZSA9IFpvZE51bGwuY3JlYXRlO1xuY29uc3QgYW55VHlwZSA9IFpvZEFueS5jcmVhdGU7XG5jb25zdCB1bmtub3duVHlwZSA9IFpvZFVua25vd24uY3JlYXRlO1xuY29uc3QgbmV2ZXJUeXBlID0gWm9kTmV2ZXIuY3JlYXRlO1xuY29uc3Qgdm9pZFR5cGUgPSBab2RWb2lkLmNyZWF0ZTtcbmNvbnN0IGFycmF5VHlwZSA9IFpvZEFycmF5LmNyZWF0ZTtcbmNvbnN0IG9iamVjdFR5cGUgPSBab2RPYmplY3QuY3JlYXRlO1xuY29uc3Qgc3RyaWN0T2JqZWN0VHlwZSA9IFpvZE9iamVjdC5zdHJpY3RDcmVhdGU7XG5jb25zdCB1bmlvblR5cGUgPSBab2RVbmlvbi5jcmVhdGU7XG5jb25zdCBkaXNjcmltaW5hdGVkVW5pb25UeXBlID0gWm9kRGlzY3JpbWluYXRlZFVuaW9uLmNyZWF0ZTtcbmNvbnN0IGludGVyc2VjdGlvblR5cGUgPSBab2RJbnRlcnNlY3Rpb24uY3JlYXRlO1xuY29uc3QgdHVwbGVUeXBlID0gWm9kVHVwbGUuY3JlYXRlO1xuY29uc3QgcmVjb3JkVHlwZSA9IFpvZFJlY29yZC5jcmVhdGU7XG5jb25zdCBtYXBUeXBlID0gWm9kTWFwLmNyZWF0ZTtcbmNvbnN0IHNldFR5cGUgPSBab2RTZXQuY3JlYXRlO1xuY29uc3QgZnVuY3Rpb25UeXBlID0gWm9kRnVuY3Rpb24uY3JlYXRlO1xuY29uc3QgbGF6eVR5cGUgPSBab2RMYXp5LmNyZWF0ZTtcbmNvbnN0IGxpdGVyYWxUeXBlID0gWm9kTGl0ZXJhbC5jcmVhdGU7XG5jb25zdCBlbnVtVHlwZSA9IFpvZEVudW0uY3JlYXRlO1xuY29uc3QgbmF0aXZlRW51bVR5cGUgPSBab2ROYXRpdmVFbnVtLmNyZWF0ZTtcbmNvbnN0IHByb21pc2VUeXBlID0gWm9kUHJvbWlzZS5jcmVhdGU7XG5jb25zdCBlZmZlY3RzVHlwZSA9IFpvZEVmZmVjdHMuY3JlYXRlO1xuY29uc3Qgb3B0aW9uYWxUeXBlID0gWm9kT3B0aW9uYWwuY3JlYXRlO1xuY29uc3QgbnVsbGFibGVUeXBlID0gWm9kTnVsbGFibGUuY3JlYXRlO1xuY29uc3QgcHJlcHJvY2Vzc1R5cGUgPSBab2RFZmZlY3RzLmNyZWF0ZVdpdGhQcmVwcm9jZXNzO1xuY29uc3QgcGlwZWxpbmVUeXBlID0gWm9kUGlwZWxpbmUuY3JlYXRlO1xuY29uc3Qgb3N0cmluZyA9ICgpID0+IHN0cmluZ1R5cGUoKS5vcHRpb25hbCgpO1xuY29uc3Qgb251bWJlciA9ICgpID0+IG51bWJlclR5cGUoKS5vcHRpb25hbCgpO1xuY29uc3Qgb2Jvb2xlYW4gPSAoKSA9PiBib29sZWFuVHlwZSgpLm9wdGlvbmFsKCk7XG5leHBvcnQgY29uc3QgY29lcmNlID0ge1xuICAgIHN0cmluZzogKChhcmcpID0+IFpvZFN0cmluZy5jcmVhdGUoeyAuLi5hcmcsIGNvZXJjZTogdHJ1ZSB9KSksXG4gICAgbnVtYmVyOiAoKGFyZykgPT4gWm9kTnVtYmVyLmNyZWF0ZSh7IC4uLmFyZywgY29lcmNlOiB0cnVlIH0pKSxcbiAgICBib29sZWFuOiAoKGFyZykgPT4gWm9kQm9vbGVhbi5jcmVhdGUoe1xuICAgICAgICAuLi5hcmcsXG4gICAgICAgIGNvZXJjZTogdHJ1ZSxcbiAgICB9KSksXG4gICAgYmlnaW50OiAoKGFyZykgPT4gWm9kQmlnSW50LmNyZWF0ZSh7IC4uLmFyZywgY29lcmNlOiB0cnVlIH0pKSxcbiAgICBkYXRlOiAoKGFyZykgPT4gWm9kRGF0ZS5jcmVhdGUoeyAuLi5hcmcsIGNvZXJjZTogdHJ1ZSB9KSksXG59O1xuZXhwb3J0IHsgYW55VHlwZSBhcyBhbnksIGFycmF5VHlwZSBhcyBhcnJheSwgYmlnSW50VHlwZSBhcyBiaWdpbnQsIGJvb2xlYW5UeXBlIGFzIGJvb2xlYW4sIGRhdGVUeXBlIGFzIGRhdGUsIGRpc2NyaW1pbmF0ZWRVbmlvblR5cGUgYXMgZGlzY3JpbWluYXRlZFVuaW9uLCBlZmZlY3RzVHlwZSBhcyBlZmZlY3QsIGVudW1UeXBlIGFzIGVudW0sIGZ1bmN0aW9uVHlwZSBhcyBmdW5jdGlvbiwgaW5zdGFuY2VPZlR5cGUgYXMgaW5zdGFuY2VvZiwgaW50ZXJzZWN0aW9uVHlwZSBhcyBpbnRlcnNlY3Rpb24sIGxhenlUeXBlIGFzIGxhenksIGxpdGVyYWxUeXBlIGFzIGxpdGVyYWwsIG1hcFR5cGUgYXMgbWFwLCBuYW5UeXBlIGFzIG5hbiwgbmF0aXZlRW51bVR5cGUgYXMgbmF0aXZlRW51bSwgbmV2ZXJUeXBlIGFzIG5ldmVyLCBudWxsVHlwZSBhcyBudWxsLCBudWxsYWJsZVR5cGUgYXMgbnVsbGFibGUsIG51bWJlclR5cGUgYXMgbnVtYmVyLCBvYmplY3RUeXBlIGFzIG9iamVjdCwgb2Jvb2xlYW4sIG9udW1iZXIsIG9wdGlvbmFsVHlwZSBhcyBvcHRpb25hbCwgb3N0cmluZywgcGlwZWxpbmVUeXBlIGFzIHBpcGVsaW5lLCBwcmVwcm9jZXNzVHlwZSBhcyBwcmVwcm9jZXNzLCBwcm9taXNlVHlwZSBhcyBwcm9taXNlLCByZWNvcmRUeXBlIGFzIHJlY29yZCwgc2V0VHlwZSBhcyBzZXQsIHN0cmljdE9iamVjdFR5cGUgYXMgc3RyaWN0T2JqZWN0LCBzdHJpbmdUeXBlIGFzIHN0cmluZywgc3ltYm9sVHlwZSBhcyBzeW1ib2wsIGVmZmVjdHNUeXBlIGFzIHRyYW5zZm9ybWVyLCB0dXBsZVR5cGUgYXMgdHVwbGUsIHVuZGVmaW5lZFR5cGUgYXMgdW5kZWZpbmVkLCB1bmlvblR5cGUgYXMgdW5pb24sIHVua25vd25UeXBlIGFzIHVua25vd24sIHZvaWRUeXBlIGFzIHZvaWQsIH07XG5leHBvcnQgY29uc3QgTkVWRVIgPSBJTlZBTElEO1xuIiwiZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQW55RGVmKCkge1xuICAgIHJldHVybiB7fTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFueS5tanMubWFwIiwiaW1wb3J0IHsgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kIH0gZnJvbSAnem9kL3YzJztcbmltcG9ydCB7IHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMgfSBmcm9tIFwiLi4vZXJyb3JNZXNzYWdlcy5tanNcIjtcbmltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQXJyYXlEZWYoZGVmLCByZWZzKSB7XG4gICAgY29uc3QgcmVzID0ge1xuICAgICAgICB0eXBlOiAnYXJyYXknLFxuICAgIH07XG4gICAgaWYgKGRlZi50eXBlPy5fZGVmPy50eXBlTmFtZSAhPT0gWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEFueSkge1xuICAgICAgICByZXMuaXRlbXMgPSBwYXJzZURlZihkZWYudHlwZS5fZGVmLCB7XG4gICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAnaXRlbXMnXSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChkZWYubWluTGVuZ3RoKSB7XG4gICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWluSXRlbXMnLCBkZWYubWluTGVuZ3RoLnZhbHVlLCBkZWYubWluTGVuZ3RoLm1lc3NhZ2UsIHJlZnMpO1xuICAgIH1cbiAgICBpZiAoZGVmLm1heExlbmd0aCkge1xuICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21heEl0ZW1zJywgZGVmLm1heExlbmd0aC52YWx1ZSwgZGVmLm1heExlbmd0aC5tZXNzYWdlLCByZWZzKTtcbiAgICB9XG4gICAgaWYgKGRlZi5leGFjdExlbmd0aCkge1xuICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21pbkl0ZW1zJywgZGVmLmV4YWN0TGVuZ3RoLnZhbHVlLCBkZWYuZXhhY3RMZW5ndGgubWVzc2FnZSwgcmVmcyk7XG4gICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWF4SXRlbXMnLCBkZWYuZXhhY3RMZW5ndGgudmFsdWUsIGRlZi5leGFjdExlbmd0aC5tZXNzYWdlLCByZWZzKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFycmF5Lm1qcy5tYXAiLCJpbXBvcnQgeyBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzIH0gZnJvbSBcIi4uL2Vycm9yTWVzc2FnZXMubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VCaWdpbnREZWYoZGVmLCByZWZzKSB7XG4gICAgY29uc3QgcmVzID0ge1xuICAgICAgICB0eXBlOiAnaW50ZWdlcicsXG4gICAgICAgIGZvcm1hdDogJ2ludDY0JyxcbiAgICB9O1xuICAgIGlmICghZGVmLmNoZWNrcylcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICBmb3IgKGNvbnN0IGNoZWNrIG9mIGRlZi5jaGVja3MpIHtcbiAgICAgICAgc3dpdGNoIChjaGVjay5raW5kKSB7XG4gICAgICAgICAgICBjYXNlICdtaW4nOlxuICAgICAgICAgICAgICAgIGlmIChyZWZzLnRhcmdldCA9PT0gJ2pzb25TY2hlbWE3Jykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2hlY2suaW5jbHVzaXZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21pbmltdW0nLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ2V4Y2x1c2l2ZU1pbmltdW0nLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghY2hlY2suaW5jbHVzaXZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuZXhjbHVzaXZlTWluaW11bSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtaW5pbXVtJywgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ21heCc6XG4gICAgICAgICAgICAgICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnanNvblNjaGVtYTcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWF4aW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnZXhjbHVzaXZlTWF4aW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5leGNsdXNpdmVNYXhpbXVtID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21heGltdW0nLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnbXVsdGlwbGVPZic6XG4gICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtdWx0aXBsZU9mJywgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXM7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1iaWdpbnQubWpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBwYXJzZUJvb2xlYW5EZWYoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2Jvb2xlYW4nLFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ib29sZWFuLm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUJyYW5kZWREZWYoX2RlZiwgcmVmcykge1xuICAgIHJldHVybiBwYXJzZURlZihfZGVmLnR5cGUuX2RlZiwgcmVmcyk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1icmFuZGVkLm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBjb25zdCBwYXJzZUNhdGNoRGVmID0gKGRlZiwgcmVmcykgPT4ge1xuICAgIHJldHVybiBwYXJzZURlZihkZWYuaW5uZXJUeXBlLl9kZWYsIHJlZnMpO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNhdGNoLm1qcy5tYXAiLCJpbXBvcnQgeyBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzIH0gZnJvbSBcIi4uL2Vycm9yTWVzc2FnZXMubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VEYXRlRGVmKGRlZiwgcmVmcywgb3ZlcnJpZGVEYXRlU3RyYXRlZ3kpIHtcbiAgICBjb25zdCBzdHJhdGVneSA9IG92ZXJyaWRlRGF0ZVN0cmF0ZWd5ID8/IHJlZnMuZGF0ZVN0cmF0ZWd5O1xuICAgIGlmIChBcnJheS5pc0FycmF5KHN0cmF0ZWd5KSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYW55T2Y6IHN0cmF0ZWd5Lm1hcCgoaXRlbSwgaSkgPT4gcGFyc2VEYXRlRGVmKGRlZiwgcmVmcywgaXRlbSkpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBzd2l0Y2ggKHN0cmF0ZWd5KSB7XG4gICAgICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICAgIGNhc2UgJ2Zvcm1hdDpkYXRlLXRpbWUnOlxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgICBmb3JtYXQ6ICdkYXRlLXRpbWUnLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSAnZm9ybWF0OmRhdGUnOlxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgICBmb3JtYXQ6ICdkYXRlJyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgJ2ludGVnZXInOlxuICAgICAgICAgICAgcmV0dXJuIGludGVnZXJEYXRlUGFyc2VyKGRlZiwgcmVmcyk7XG4gICAgfVxufVxuY29uc3QgaW50ZWdlckRhdGVQYXJzZXIgPSAoZGVmLCByZWZzKSA9PiB7XG4gICAgY29uc3QgcmVzID0ge1xuICAgICAgICB0eXBlOiAnaW50ZWdlcicsXG4gICAgICAgIGZvcm1hdDogJ3VuaXgtdGltZScsXG4gICAgfTtcbiAgICBpZiAocmVmcy50YXJnZXQgPT09ICdvcGVuQXBpMycpIHtcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG4gICAgZm9yIChjb25zdCBjaGVjayBvZiBkZWYuY2hlY2tzKSB7XG4gICAgICAgIHN3aXRjaCAoY2hlY2sua2luZCkge1xuICAgICAgICAgICAgY2FzZSAnbWluJzpcbiAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21pbmltdW0nLCBjaGVjay52YWx1ZSwgLy8gVGhpcyBpcyBpbiBtaWxsaXNlY29uZHNcbiAgICAgICAgICAgICAgICBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ21heCc6XG4gICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtYXhpbXVtJywgY2hlY2sudmFsdWUsIC8vIFRoaXMgaXMgaW4gbWlsbGlzZWNvbmRzXG4gICAgICAgICAgICAgICAgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRlLm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZURlZmF1bHREZWYoX2RlZiwgcmVmcykge1xuICAgIHJldHVybiB7XG4gICAgICAgIC4uLnBhcnNlRGVmKF9kZWYuaW5uZXJUeXBlLl9kZWYsIHJlZnMpLFxuICAgICAgICBkZWZhdWx0OiBfZGVmLmRlZmF1bHRWYWx1ZSgpLFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWZhdWx0Lm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUVmZmVjdHNEZWYoX2RlZiwgcmVmcywgZm9yY2VSZXNvbHV0aW9uKSB7XG4gICAgcmV0dXJuIHJlZnMuZWZmZWN0U3RyYXRlZ3kgPT09ICdpbnB1dCcgPyBwYXJzZURlZihfZGVmLnNjaGVtYS5fZGVmLCByZWZzLCBmb3JjZVJlc29sdXRpb24pIDoge307XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lZmZlY3RzLm1qcy5tYXAiLCJleHBvcnQgZnVuY3Rpb24gcGFyc2VFbnVtRGVmKGRlZikge1xuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICBlbnVtOiBbLi4uZGVmLnZhbHVlc10sXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVudW0ubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuY29uc3QgaXNKc29uU2NoZW1hN0FsbE9mVHlwZSA9ICh0eXBlKSA9PiB7XG4gICAgaWYgKCd0eXBlJyBpbiB0eXBlICYmIHR5cGUudHlwZSA9PT0gJ3N0cmluZycpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gJ2FsbE9mJyBpbiB0eXBlO1xufTtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUludGVyc2VjdGlvbkRlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCBhbGxPZiA9IFtcbiAgICAgICAgcGFyc2VEZWYoZGVmLmxlZnQuX2RlZiwge1xuICAgICAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2FsbE9mJywgJzAnXSxcbiAgICAgICAgfSksXG4gICAgICAgIHBhcnNlRGVmKGRlZi5yaWdodC5fZGVmLCB7XG4gICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAnYWxsT2YnLCAnMSddLFxuICAgICAgICB9KSxcbiAgICBdLmZpbHRlcigoeCkgPT4gISF4KTtcbiAgICBsZXQgdW5ldmFsdWF0ZWRQcm9wZXJ0aWVzID0gcmVmcy50YXJnZXQgPT09ICdqc29uU2NoZW1hMjAxOS0wOScgPyB7IHVuZXZhbHVhdGVkUHJvcGVydGllczogZmFsc2UgfSA6IHVuZGVmaW5lZDtcbiAgICBjb25zdCBtZXJnZWRBbGxPZiA9IFtdO1xuICAgIC8vIElmIGVpdGhlciBvZiB0aGUgc2NoZW1hcyBpcyBhbiBhbGxPZiwgbWVyZ2UgdGhlbSBpbnRvIGEgc2luZ2xlIGFsbE9mXG4gICAgYWxsT2YuZm9yRWFjaCgoc2NoZW1hKSA9PiB7XG4gICAgICAgIGlmIChpc0pzb25TY2hlbWE3QWxsT2ZUeXBlKHNjaGVtYSkpIHtcbiAgICAgICAgICAgIG1lcmdlZEFsbE9mLnB1c2goLi4uc2NoZW1hLmFsbE9mKTtcbiAgICAgICAgICAgIGlmIChzY2hlbWEudW5ldmFsdWF0ZWRQcm9wZXJ0aWVzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAvLyBJZiBvbmUgb2YgdGhlIHNjaGVtYXMgaGFzIG5vIHVuZXZhbHVhdGVkUHJvcGVydGllcyBzZXQsXG4gICAgICAgICAgICAgICAgLy8gdGhlIG1lcmdlZCBzY2hlbWEgc2hvdWxkIGFsc28gaGF2ZSBubyB1bmV2YWx1YXRlZFByb3BlcnRpZXMgc2V0XG4gICAgICAgICAgICAgICAgdW5ldmFsdWF0ZWRQcm9wZXJ0aWVzID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IG5lc3RlZFNjaGVtYSA9IHNjaGVtYTtcbiAgICAgICAgICAgIGlmICgnYWRkaXRpb25hbFByb3BlcnRpZXMnIGluIHNjaGVtYSAmJiBzY2hlbWEuYWRkaXRpb25hbFByb3BlcnRpZXMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBhZGRpdGlvbmFsUHJvcGVydGllcywgLi4ucmVzdCB9ID0gc2NoZW1hO1xuICAgICAgICAgICAgICAgIG5lc3RlZFNjaGVtYSA9IHJlc3Q7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBBcyBzb29uIGFzIG9uZSBvZiB0aGUgc2NoZW1hcyBoYXMgYWRkaXRpb25hbFByb3BlcnRpZXMgc2V0IG5vdCB0byBmYWxzZSwgd2UgYWxsb3cgdW5ldmFsdWF0ZWRQcm9wZXJ0aWVzXG4gICAgICAgICAgICAgICAgdW5ldmFsdWF0ZWRQcm9wZXJ0aWVzID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWVyZ2VkQWxsT2YucHVzaChuZXN0ZWRTY2hlbWEpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIG1lcmdlZEFsbE9mLmxlbmd0aCA/XG4gICAgICAgIHtcbiAgICAgICAgICAgIGFsbE9mOiBtZXJnZWRBbGxPZixcbiAgICAgICAgICAgIC4uLnVuZXZhbHVhdGVkUHJvcGVydGllcyxcbiAgICAgICAgfVxuICAgICAgICA6IHVuZGVmaW5lZDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWludGVyc2VjdGlvbi5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIHBhcnNlTGl0ZXJhbERlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCBwYXJzZWRUeXBlID0gdHlwZW9mIGRlZi52YWx1ZTtcbiAgICBpZiAocGFyc2VkVHlwZSAhPT0gJ2JpZ2ludCcgJiZcbiAgICAgICAgcGFyc2VkVHlwZSAhPT0gJ251bWJlcicgJiZcbiAgICAgICAgcGFyc2VkVHlwZSAhPT0gJ2Jvb2xlYW4nICYmXG4gICAgICAgIHBhcnNlZFR5cGUgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBBcnJheS5pc0FycmF5KGRlZi52YWx1ZSkgPyAnYXJyYXknIDogJ29iamVjdCcsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmIChyZWZzLnRhcmdldCA9PT0gJ29wZW5BcGkzJykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogcGFyc2VkVHlwZSA9PT0gJ2JpZ2ludCcgPyAnaW50ZWdlcicgOiBwYXJzZWRUeXBlLFxuICAgICAgICAgICAgZW51bTogW2RlZi52YWx1ZV0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IHBhcnNlZFR5cGUgPT09ICdiaWdpbnQnID8gJ2ludGVnZXInIDogcGFyc2VkVHlwZSxcbiAgICAgICAgY29uc3Q6IGRlZi52YWx1ZSxcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bGl0ZXJhbC5tanMubWFwIiwiaW1wb3J0IHsgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyB9IGZyb20gXCIuLi9lcnJvck1lc3NhZ2VzLm1qc1wiO1xubGV0IGVtb2ppUmVnZXg7XG4vKipcbiAqIEdlbmVyYXRlZCBmcm9tIHRoZSByZWd1bGFyIGV4cHJlc3Npb25zIGZvdW5kIGhlcmUgYXMgb2YgMjAyNC0wNS0yMjpcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9jb2xpbmhhY2tzL3pvZC9ibG9iL21hc3Rlci9zcmMvdHlwZXMudHMuXG4gKlxuICogRXhwcmVzc2lvbnMgd2l0aCAvaSBmbGFnIGhhdmUgYmVlbiBjaGFuZ2VkIGFjY29yZGluZ2x5LlxuICovXG5leHBvcnQgY29uc3Qgem9kUGF0dGVybnMgPSB7XG4gICAgLyoqXG4gICAgICogYGNgIHdhcyBjaGFuZ2VkIHRvIGBbY0NdYCB0byByZXBsaWNhdGUgL2kgZmxhZ1xuICAgICAqL1xuICAgIGN1aWQ6IC9eW2NDXVteXFxzLV17OCx9JC8sXG4gICAgY3VpZDI6IC9eWzAtOWEtel0rJC8sXG4gICAgdWxpZDogL15bMC05QS1ISktNTlAtVFYtWl17MjZ9JC8sXG4gICAgLyoqXG4gICAgICogYGEtemAgd2FzIGFkZGVkIHRvIHJlcGxpY2F0ZSAvaSBmbGFnXG4gICAgICovXG4gICAgZW1haWw6IC9eKD8hXFwuKSg/IS4qXFwuXFwuKShbYS16QS1aMC05XycrXFwtXFwuXSopW2EtekEtWjAtOV8rLV1AKFthLXpBLVowLTldW2EtekEtWjAtOVxcLV0qXFwuKStbYS16QS1aXXsyLH0kLyxcbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RlZCBhIHZhbGlkIFVuaWNvZGUgUmVnRXhwXG4gICAgICpcbiAgICAgKiBMYXppbHkgaW5zdGFudGlhdGUgc2luY2UgdGhpcyB0eXBlIG9mIHJlZ2V4IGlzbid0IHN1cHBvcnRlZFxuICAgICAqIGluIGFsbCBlbnZzIChlLmcuIFJlYWN0IE5hdGl2ZSkuXG4gICAgICpcbiAgICAgKiBTZWU6XG4gICAgICogaHR0cHM6Ly9naXRodWIuY29tL2NvbGluaGFja3Mvem9kL2lzc3Vlcy8yNDMzXG4gICAgICogRml4IGluIFpvZDpcbiAgICAgKiBodHRwczovL2dpdGh1Yi5jb20vY29saW5oYWNrcy96b2QvY29tbWl0LzkzNDBmZDUxZTQ4NTc2YTc1YWRjOTE5YmZmNjVkYmM0YTVkNGM5OWJcbiAgICAgKi9cbiAgICBlbW9qaTogKCkgPT4ge1xuICAgICAgICBpZiAoZW1vamlSZWdleCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBlbW9qaVJlZ2V4ID0gUmVnRXhwKCdeKFxcXFxwe0V4dGVuZGVkX1BpY3RvZ3JhcGhpY318XFxcXHB7RW1vamlfQ29tcG9uZW50fSkrJCcsICd1Jyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVtb2ppUmVnZXg7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBVbnVzZWRcbiAgICAgKi9cbiAgICB1dWlkOiAvXlswLTlhLWZBLUZdezh9XFxiLVswLTlhLWZBLUZdezR9XFxiLVswLTlhLWZBLUZdezR9XFxiLVswLTlhLWZBLUZdezR9XFxiLVswLTlhLWZBLUZdezEyfSQvLFxuICAgIC8qKlxuICAgICAqIFVudXNlZFxuICAgICAqL1xuICAgIGlwdjQ6IC9eKD86KD86MjVbMC01XXwyWzAtNF1bMC05XXwxWzAtOV1bMC05XXxbMS05XVswLTldfFswLTldKVxcLil7M30oPzoyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldWzAtOV18WzAtOV0pJC8sXG4gICAgLyoqXG4gICAgICogVW51c2VkXG4gICAgICovXG4gICAgaXB2NjogL14oKFthLWYwLTldezEsNH06KXs3fXw6OihbYS1mMC05XXsxLDR9Oil7MCw2fXwoW2EtZjAtOV17MSw0fTopezF9OihbYS1mMC05XXsxLDR9Oil7MCw1fXwoW2EtZjAtOV17MSw0fTopezJ9OihbYS1mMC05XXsxLDR9Oil7MCw0fXwoW2EtZjAtOV17MSw0fTopezN9OihbYS1mMC05XXsxLDR9Oil7MCwzfXwoW2EtZjAtOV17MSw0fTopezR9OihbYS1mMC05XXsxLDR9Oil7MCwyfXwoW2EtZjAtOV17MSw0fTopezV9OihbYS1mMC05XXsxLDR9Oil7MCwxfSkoW2EtZjAtOV17MSw0fXwoKCgyNVswLTVdKXwoMlswLTRdWzAtOV0pfCgxWzAtOV17Mn0pfChbMC05XXsxLDJ9KSlcXC4pezN9KCgyNVswLTVdKXwoMlswLTRdWzAtOV0pfCgxWzAtOV17Mn0pfChbMC05XXsxLDJ9KSkpJC8sXG4gICAgYmFzZTY0OiAvXihbMC05YS16QS1aKy9dezR9KSooKFswLTlhLXpBLVorL117Mn09PSl8KFswLTlhLXpBLVorL117M309KSk/JC8sXG4gICAgbmFub2lkOiAvXlthLXpBLVowLTlfLV17MjF9JC8sXG59O1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlU3RyaW5nRGVmKGRlZiwgcmVmcykge1xuICAgIGNvbnN0IHJlcyA9IHtcbiAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgfTtcbiAgICBmdW5jdGlvbiBwcm9jZXNzUGF0dGVybih2YWx1ZSkge1xuICAgICAgICByZXR1cm4gcmVmcy5wYXR0ZXJuU3RyYXRlZ3kgPT09ICdlc2NhcGUnID8gZXNjYXBlTm9uQWxwaGFOdW1lcmljKHZhbHVlKSA6IHZhbHVlO1xuICAgIH1cbiAgICBpZiAoZGVmLmNoZWNrcykge1xuICAgICAgICBmb3IgKGNvbnN0IGNoZWNrIG9mIGRlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoY2hlY2sua2luZCkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ21pbic6XG4gICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWluTGVuZ3RoJywgdHlwZW9mIHJlcy5taW5MZW5ndGggPT09ICdudW1iZXInID8gTWF0aC5tYXgocmVzLm1pbkxlbmd0aCwgY2hlY2sudmFsdWUpIDogY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdtYXgnOlxuICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21heExlbmd0aCcsIHR5cGVvZiByZXMubWF4TGVuZ3RoID09PSAnbnVtYmVyJyA/IE1hdGgubWluKHJlcy5tYXhMZW5ndGgsIGNoZWNrLnZhbHVlKSA6IGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZW1haWwnOlxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHJlZnMuZW1haWxTdHJhdGVneSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZm9ybWF0OmVtYWlsJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRGb3JtYXQocmVzLCAnZW1haWwnLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Zvcm1hdDppZG4tZW1haWwnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICdpZG4tZW1haWwnLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3BhdHRlcm46em9kJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRQYXR0ZXJuKHJlcywgem9kUGF0dGVybnMuZW1haWwsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3VybCc6XG4gICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICd1cmknLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndXVpZCc6XG4gICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICd1dWlkJywgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3JlZ2V4JzpcbiAgICAgICAgICAgICAgICAgICAgYWRkUGF0dGVybihyZXMsIGNoZWNrLnJlZ2V4LCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnY3VpZCc6XG4gICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy5jdWlkLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnY3VpZDInOlxuICAgICAgICAgICAgICAgICAgICBhZGRQYXR0ZXJuKHJlcywgem9kUGF0dGVybnMuY3VpZDIsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdzdGFydHNXaXRoJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkUGF0dGVybihyZXMsIFJlZ0V4cChgXiR7cHJvY2Vzc1BhdHRlcm4oY2hlY2sudmFsdWUpfWApLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZW5kc1dpdGgnOlxuICAgICAgICAgICAgICAgICAgICBhZGRQYXR0ZXJuKHJlcywgUmVnRXhwKGAke3Byb2Nlc3NQYXR0ZXJuKGNoZWNrLnZhbHVlKX0kYCksIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdkYXRldGltZSc6XG4gICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICdkYXRlLXRpbWUnLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZGF0ZSc6XG4gICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICdkYXRlJywgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3RpbWUnOlxuICAgICAgICAgICAgICAgICAgICBhZGRGb3JtYXQocmVzLCAndGltZScsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdkdXJhdGlvbic6XG4gICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICdkdXJhdGlvbicsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdsZW5ndGgnOlxuICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21pbkxlbmd0aCcsIHR5cGVvZiByZXMubWluTGVuZ3RoID09PSAnbnVtYmVyJyA/IE1hdGgubWF4KHJlcy5taW5MZW5ndGgsIGNoZWNrLnZhbHVlKSA6IGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtYXhMZW5ndGgnLCB0eXBlb2YgcmVzLm1heExlbmd0aCA9PT0gJ251bWJlcicgPyBNYXRoLm1pbihyZXMubWF4TGVuZ3RoLCBjaGVjay52YWx1ZSkgOiBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2luY2x1ZGVzJzoge1xuICAgICAgICAgICAgICAgICAgICBhZGRQYXR0ZXJuKHJlcywgUmVnRXhwKHByb2Nlc3NQYXR0ZXJuKGNoZWNrLnZhbHVlKSksIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAnaXAnOiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGVjay52ZXJzaW9uICE9PSAndjYnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRGb3JtYXQocmVzLCAnaXB2NCcsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGVjay52ZXJzaW9uICE9PSAndjQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRGb3JtYXQocmVzLCAnaXB2NicsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlICdlbW9qaSc6XG4gICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy5lbW9qaSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3VsaWQnOiB7XG4gICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy51bGlkLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgJ2Jhc2U2NCc6IHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChyZWZzLmJhc2U2NFN0cmF0ZWd5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdmb3JtYXQ6YmluYXJ5Jzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICdiaW5hcnknLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2NvbnRlbnRFbmNvZGluZzpiYXNlNjQnOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdjb250ZW50RW5jb2RpbmcnLCAnYmFzZTY0JywgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdwYXR0ZXJuOnpvZCc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRQYXR0ZXJuKHJlcywgem9kUGF0dGVybnMuYmFzZTY0LCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAnbmFub2lkJzoge1xuICAgICAgICAgICAgICAgICAgICBhZGRQYXR0ZXJuKHJlcywgem9kUGF0dGVybnMubmFub2lkLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAndG9Mb3dlckNhc2UnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ3RvVXBwZXJDYXNlJzpcbiAgICAgICAgICAgICAgICBjYXNlICd0cmltJzpcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgKChfKSA9PiB7IH0pKGNoZWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzO1xufVxuY29uc3QgZXNjYXBlTm9uQWxwaGFOdW1lcmljID0gKHZhbHVlKSA9PiBBcnJheS5mcm9tKHZhbHVlKVxuICAgIC5tYXAoKGMpID0+ICgvW2EtekEtWjAtOV0vLnRlc3QoYykgPyBjIDogYFxcXFwke2N9YCkpXG4gICAgLmpvaW4oJycpO1xuY29uc3QgYWRkRm9ybWF0ID0gKHNjaGVtYSwgdmFsdWUsIG1lc3NhZ2UsIHJlZnMpID0+IHtcbiAgICBpZiAoc2NoZW1hLmZvcm1hdCB8fCBzY2hlbWEuYW55T2Y/LnNvbWUoKHgpID0+IHguZm9ybWF0KSkge1xuICAgICAgICBpZiAoIXNjaGVtYS5hbnlPZikge1xuICAgICAgICAgICAgc2NoZW1hLmFueU9mID0gW107XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNjaGVtYS5mb3JtYXQpIHtcbiAgICAgICAgICAgIHNjaGVtYS5hbnlPZi5wdXNoKHtcbiAgICAgICAgICAgICAgICBmb3JtYXQ6IHNjaGVtYS5mb3JtYXQsXG4gICAgICAgICAgICAgICAgLi4uKHNjaGVtYS5lcnJvck1lc3NhZ2UgJiZcbiAgICAgICAgICAgICAgICAgICAgcmVmcy5lcnJvck1lc3NhZ2VzICYmIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlOiB7IGZvcm1hdDogc2NoZW1hLmVycm9yTWVzc2FnZS5mb3JtYXQgfSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZGVsZXRlIHNjaGVtYS5mb3JtYXQ7XG4gICAgICAgICAgICBpZiAoc2NoZW1hLmVycm9yTWVzc2FnZSkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBzY2hlbWEuZXJyb3JNZXNzYWdlLmZvcm1hdDtcbiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoc2NoZW1hLmVycm9yTWVzc2FnZSkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBzY2hlbWEuZXJyb3JNZXNzYWdlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzY2hlbWEuYW55T2YucHVzaCh7XG4gICAgICAgICAgICBmb3JtYXQ6IHZhbHVlLFxuICAgICAgICAgICAgLi4uKG1lc3NhZ2UgJiYgcmVmcy5lcnJvck1lc3NhZ2VzICYmIHsgZXJyb3JNZXNzYWdlOiB7IGZvcm1hdDogbWVzc2FnZSB9IH0pLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMoc2NoZW1hLCAnZm9ybWF0JywgdmFsdWUsIG1lc3NhZ2UsIHJlZnMpO1xuICAgIH1cbn07XG5jb25zdCBhZGRQYXR0ZXJuID0gKHNjaGVtYSwgcmVnZXgsIG1lc3NhZ2UsIHJlZnMpID0+IHtcbiAgICBpZiAoc2NoZW1hLnBhdHRlcm4gfHwgc2NoZW1hLmFsbE9mPy5zb21lKCh4KSA9PiB4LnBhdHRlcm4pKSB7XG4gICAgICAgIGlmICghc2NoZW1hLmFsbE9mKSB7XG4gICAgICAgICAgICBzY2hlbWEuYWxsT2YgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2NoZW1hLnBhdHRlcm4pIHtcbiAgICAgICAgICAgIHNjaGVtYS5hbGxPZi5wdXNoKHtcbiAgICAgICAgICAgICAgICBwYXR0ZXJuOiBzY2hlbWEucGF0dGVybixcbiAgICAgICAgICAgICAgICAuLi4oc2NoZW1hLmVycm9yTWVzc2FnZSAmJlxuICAgICAgICAgICAgICAgICAgICByZWZzLmVycm9yTWVzc2FnZXMgJiYge1xuICAgICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6IHsgcGF0dGVybjogc2NoZW1hLmVycm9yTWVzc2FnZS5wYXR0ZXJuIH0sXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGRlbGV0ZSBzY2hlbWEucGF0dGVybjtcbiAgICAgICAgICAgIGlmIChzY2hlbWEuZXJyb3JNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHNjaGVtYS5lcnJvck1lc3NhZ2UucGF0dGVybjtcbiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoc2NoZW1hLmVycm9yTWVzc2FnZSkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBzY2hlbWEuZXJyb3JNZXNzYWdlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzY2hlbWEuYWxsT2YucHVzaCh7XG4gICAgICAgICAgICBwYXR0ZXJuOiBwcm9jZXNzUmVnRXhwKHJlZ2V4LCByZWZzKSxcbiAgICAgICAgICAgIC4uLihtZXNzYWdlICYmIHJlZnMuZXJyb3JNZXNzYWdlcyAmJiB7IGVycm9yTWVzc2FnZTogeyBwYXR0ZXJuOiBtZXNzYWdlIH0gfSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhzY2hlbWEsICdwYXR0ZXJuJywgcHJvY2Vzc1JlZ0V4cChyZWdleCwgcmVmcyksIG1lc3NhZ2UsIHJlZnMpO1xuICAgIH1cbn07XG4vLyBNdXRhdGUgei5zdHJpbmcucmVnZXgoKSBpbiBhIGJlc3QgYXR0ZW1wdCB0byBhY2NvbW1vZGF0ZSBmb3IgcmVnZXggZmxhZ3Mgd2hlbiBhcHBseVJlZ2V4RmxhZ3MgaXMgdHJ1ZVxuY29uc3QgcHJvY2Vzc1JlZ0V4cCA9IChyZWdleE9yRnVuY3Rpb24sIHJlZnMpID0+IHtcbiAgICBjb25zdCByZWdleCA9IHR5cGVvZiByZWdleE9yRnVuY3Rpb24gPT09ICdmdW5jdGlvbicgPyByZWdleE9yRnVuY3Rpb24oKSA6IHJlZ2V4T3JGdW5jdGlvbjtcbiAgICBpZiAoIXJlZnMuYXBwbHlSZWdleEZsYWdzIHx8ICFyZWdleC5mbGFncylcbiAgICAgICAgcmV0dXJuIHJlZ2V4LnNvdXJjZTtcbiAgICAvLyBDdXJyZW50bHkgaGFuZGxlZCBmbGFnc1xuICAgIGNvbnN0IGZsYWdzID0ge1xuICAgICAgICBpOiByZWdleC5mbGFncy5pbmNsdWRlcygnaScpLCAvLyBDYXNlLWluc2Vuc2l0aXZlXG4gICAgICAgIG06IHJlZ2V4LmZsYWdzLmluY2x1ZGVzKCdtJyksIC8vIGBeYCBhbmQgYCRgIG1hdGNoZXMgYWRqYWNlbnQgdG8gbmV3bGluZSBjaGFyYWN0ZXJzXG4gICAgICAgIHM6IHJlZ2V4LmZsYWdzLmluY2x1ZGVzKCdzJyksIC8vIGAuYCBtYXRjaGVzIG5ld2xpbmVzXG4gICAgfTtcbiAgICAvLyBUaGUgZ2VuZXJhbCBwcmluY2lwbGUgaGVyZSBpcyB0byBzdGVwIHRocm91Z2ggZWFjaCBjaGFyYWN0ZXIsIG9uZSBhdCBhIHRpbWUsIGFwcGx5aW5nIG11dGF0aW9ucyBhcyBmbGFncyByZXF1aXJlLiBXZSBrZWVwIHRyYWNrIHdoZW4gdGhlIGN1cnJlbnQgY2hhcmFjdGVyIGlzIGVzY2FwZWQsIGFuZCB3aGVuIGl0J3MgaW5zaWRlIGEgZ3JvdXAgL2xpa2UgW3RoaXNdLyBvciAoYWxzbykgYSByYW5nZSBsaWtlIC9bYS16XS8uIFRoZSBmb2xsb3dpbmcgaXMgZmFpcmx5IGJyaXR0bGUgaW1wZXJhdGl2ZSBjb2RlOyBlZGl0IGF0IHlvdXIgcGVyaWwhXG4gICAgY29uc3Qgc291cmNlID0gZmxhZ3MuaSA/IHJlZ2V4LnNvdXJjZS50b0xvd2VyQ2FzZSgpIDogcmVnZXguc291cmNlO1xuICAgIGxldCBwYXR0ZXJuID0gJyc7XG4gICAgbGV0IGlzRXNjYXBlZCA9IGZhbHNlO1xuICAgIGxldCBpbkNoYXJHcm91cCA9IGZhbHNlO1xuICAgIGxldCBpbkNoYXJSYW5nZSA9IGZhbHNlO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc291cmNlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChpc0VzY2FwZWQpIHtcbiAgICAgICAgICAgIHBhdHRlcm4gKz0gc291cmNlW2ldO1xuICAgICAgICAgICAgaXNFc2NhcGVkID0gZmFsc2U7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZmxhZ3MuaSkge1xuICAgICAgICAgICAgaWYgKGluQ2hhckdyb3VwKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNvdXJjZVtpXS5tYXRjaCgvW2Etel0vKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5DaGFyUmFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdHRlcm4gKz0gc291cmNlW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGF0dGVybiArPSBgJHtzb3VyY2VbaSAtIDJdfS0ke3NvdXJjZVtpXX1gLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbkNoYXJSYW5nZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNvdXJjZVtpICsgMV0gPT09ICctJyAmJiBzb3VyY2VbaSArIDJdPy5tYXRjaCgvW2Etel0vKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGF0dGVybiArPSBzb3VyY2VbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBpbkNoYXJSYW5nZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuICs9IGAke3NvdXJjZVtpXX0ke3NvdXJjZVtpXS50b1VwcGVyQ2FzZSgpfWA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc291cmNlW2ldLm1hdGNoKC9bYS16XS8pKSB7XG4gICAgICAgICAgICAgICAgcGF0dGVybiArPSBgWyR7c291cmNlW2ldfSR7c291cmNlW2ldLnRvVXBwZXJDYXNlKCl9XWA7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZsYWdzLm0pIHtcbiAgICAgICAgICAgIGlmIChzb3VyY2VbaV0gPT09ICdeJykge1xuICAgICAgICAgICAgICAgIHBhdHRlcm4gKz0gYChefCg/PD1bXFxyXFxuXSkpYDtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHNvdXJjZVtpXSA9PT0gJyQnKSB7XG4gICAgICAgICAgICAgICAgcGF0dGVybiArPSBgKCR8KD89W1xcclxcbl0pKWA7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZsYWdzLnMgJiYgc291cmNlW2ldID09PSAnLicpIHtcbiAgICAgICAgICAgIHBhdHRlcm4gKz0gaW5DaGFyR3JvdXAgPyBgJHtzb3VyY2VbaV19XFxyXFxuYCA6IGBbJHtzb3VyY2VbaV19XFxyXFxuXWA7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBwYXR0ZXJuICs9IHNvdXJjZVtpXTtcbiAgICAgICAgaWYgKHNvdXJjZVtpXSA9PT0gJ1xcXFwnKSB7XG4gICAgICAgICAgICBpc0VzY2FwZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGluQ2hhckdyb3VwICYmIHNvdXJjZVtpXSA9PT0gJ10nKSB7XG4gICAgICAgICAgICBpbkNoYXJHcm91cCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFpbkNoYXJHcm91cCAmJiBzb3VyY2VbaV0gPT09ICdbJykge1xuICAgICAgICAgICAgaW5DaGFyR3JvdXAgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlZ2V4VGVzdCA9IG5ldyBSZWdFeHAocGF0dGVybik7XG4gICAgfVxuICAgIGNhdGNoIHtcbiAgICAgICAgY29uc29sZS53YXJuKGBDb3VsZCBub3QgY29udmVydCByZWdleCBwYXR0ZXJuIGF0ICR7cmVmcy5jdXJyZW50UGF0aC5qb2luKCcvJyl9IHRvIGEgZmxhZy1pbmRlcGVuZGVudCBmb3JtISBGYWxsaW5nIGJhY2sgdG8gdGhlIGZsYWctaWdub3JhbnQgc291cmNlYCk7XG4gICAgICAgIHJldHVybiByZWdleC5zb3VyY2U7XG4gICAgfVxuICAgIHJldHVybiBwYXR0ZXJuO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0cmluZy5tanMubWFwIiwiaW1wb3J0IHsgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kIH0gZnJvbSAnem9kL3YzJztcbmltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VTdHJpbmdEZWYgfSBmcm9tIFwiLi9zdHJpbmcubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VSZWNvcmREZWYoZGVmLCByZWZzKSB7XG4gICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnb3BlbkFwaTMnICYmIGRlZi5rZXlUeXBlPy5fZGVmLnR5cGVOYW1lID09PSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRW51bSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgICAgICByZXF1aXJlZDogZGVmLmtleVR5cGUuX2RlZi52YWx1ZXMsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiBkZWYua2V5VHlwZS5fZGVmLnZhbHVlcy5yZWR1Y2UoKGFjYywga2V5KSA9PiAoe1xuICAgICAgICAgICAgICAgIC4uLmFjYyxcbiAgICAgICAgICAgICAgICBba2V5XTogcGFyc2VEZWYoZGVmLnZhbHVlVHlwZS5fZGVmLCB7XG4gICAgICAgICAgICAgICAgICAgIC4uLnJlZnMsXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ3Byb3BlcnRpZXMnLCBrZXldLFxuICAgICAgICAgICAgICAgIH0pID8/IHt9LFxuICAgICAgICAgICAgfSksIHt9KSxcbiAgICAgICAgICAgIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiBmYWxzZSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29uc3Qgc2NoZW1hID0ge1xuICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgYWRkaXRpb25hbFByb3BlcnRpZXM6IHBhcnNlRGVmKGRlZi52YWx1ZVR5cGUuX2RlZiwge1xuICAgICAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2FkZGl0aW9uYWxQcm9wZXJ0aWVzJ10sXG4gICAgICAgIH0pID8/IHt9LFxuICAgIH07XG4gICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnb3BlbkFwaTMnKSB7XG4gICAgICAgIHJldHVybiBzY2hlbWE7XG4gICAgfVxuICAgIGlmIChkZWYua2V5VHlwZT8uX2RlZi50eXBlTmFtZSA9PT0gWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFN0cmluZyAmJiBkZWYua2V5VHlwZS5fZGVmLmNoZWNrcz8ubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IGtleVR5cGUgPSBPYmplY3QuZW50cmllcyhwYXJzZVN0cmluZ0RlZihkZWYua2V5VHlwZS5fZGVmLCByZWZzKSkucmVkdWNlKChhY2MsIFtrZXksIHZhbHVlXSkgPT4gKGtleSA9PT0gJ3R5cGUnID8gYWNjIDogeyAuLi5hY2MsIFtrZXldOiB2YWx1ZSB9KSwge30pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc2NoZW1hLFxuICAgICAgICAgICAgcHJvcGVydHlOYW1lczoga2V5VHlwZSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAoZGVmLmtleVR5cGU/Ll9kZWYudHlwZU5hbWUgPT09IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFbnVtKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zY2hlbWEsXG4gICAgICAgICAgICBwcm9wZXJ0eU5hbWVzOiB7XG4gICAgICAgICAgICAgICAgZW51bTogZGVmLmtleVR5cGUuX2RlZi52YWx1ZXMsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gc2NoZW1hO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVjb3JkLm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmltcG9ydCB7IHBhcnNlUmVjb3JkRGVmIH0gZnJvbSBcIi4vcmVjb3JkLm1qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlTWFwRGVmKGRlZiwgcmVmcykge1xuICAgIGlmIChyZWZzLm1hcFN0cmF0ZWd5ID09PSAncmVjb3JkJykge1xuICAgICAgICByZXR1cm4gcGFyc2VSZWNvcmREZWYoZGVmLCByZWZzKTtcbiAgICB9XG4gICAgY29uc3Qga2V5cyA9IHBhcnNlRGVmKGRlZi5rZXlUeXBlLl9kZWYsIHtcbiAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAnaXRlbXMnLCAnaXRlbXMnLCAnMCddLFxuICAgIH0pIHx8IHt9O1xuICAgIGNvbnN0IHZhbHVlcyA9IHBhcnNlRGVmKGRlZi52YWx1ZVR5cGUuX2RlZiwge1xuICAgICAgICAuLi5yZWZzLFxuICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdpdGVtcycsICdpdGVtcycsICcxJ10sXG4gICAgfSkgfHwge307XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgICAgbWF4SXRlbXM6IDEyNSxcbiAgICAgICAgaXRlbXM6IHtcbiAgICAgICAgICAgIHR5cGU6ICdhcnJheScsXG4gICAgICAgICAgICBpdGVtczogW2tleXMsIHZhbHVlc10sXG4gICAgICAgICAgICBtaW5JdGVtczogMixcbiAgICAgICAgICAgIG1heEl0ZW1zOiAyLFxuICAgICAgICB9LFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tYXAubWpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBwYXJzZU5hdGl2ZUVudW1EZWYoZGVmKSB7XG4gICAgY29uc3Qgb2JqZWN0ID0gZGVmLnZhbHVlcztcbiAgICBjb25zdCBhY3R1YWxLZXlzID0gT2JqZWN0LmtleXMoZGVmLnZhbHVlcykuZmlsdGVyKChrZXkpID0+IHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBvYmplY3Rbb2JqZWN0W2tleV1dICE9PSAnbnVtYmVyJztcbiAgICB9KTtcbiAgICBjb25zdCBhY3R1YWxWYWx1ZXMgPSBhY3R1YWxLZXlzLm1hcCgoa2V5KSA9PiBvYmplY3Rba2V5XSk7XG4gICAgY29uc3QgcGFyc2VkVHlwZXMgPSBBcnJheS5mcm9tKG5ldyBTZXQoYWN0dWFsVmFsdWVzLm1hcCgodmFsdWVzKSA9PiB0eXBlb2YgdmFsdWVzKSkpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IHBhcnNlZFR5cGVzLmxlbmd0aCA9PT0gMSA/XG4gICAgICAgICAgICBwYXJzZWRUeXBlc1swXSA9PT0gJ3N0cmluZycgP1xuICAgICAgICAgICAgICAgICdzdHJpbmcnXG4gICAgICAgICAgICAgICAgOiAnbnVtYmVyJ1xuICAgICAgICAgICAgOiBbJ3N0cmluZycsICdudW1iZXInXSxcbiAgICAgICAgZW51bTogYWN0dWFsVmFsdWVzLFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1uYXRpdmVFbnVtLm1qcy5tYXAiLCJleHBvcnQgZnVuY3Rpb24gcGFyc2VOZXZlckRlZigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBub3Q6IHt9LFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1uZXZlci5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIHBhcnNlTnVsbERlZihyZWZzKSB7XG4gICAgcmV0dXJuIHJlZnMudGFyZ2V0ID09PSAnb3BlbkFwaTMnID9cbiAgICAgICAge1xuICAgICAgICAgICAgZW51bTogWydudWxsJ10sXG4gICAgICAgICAgICBudWxsYWJsZTogdHJ1ZSxcbiAgICAgICAgfVxuICAgICAgICA6IHtcbiAgICAgICAgICAgIHR5cGU6ICdudWxsJyxcbiAgICAgICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW51bGwubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGNvbnN0IHByaW1pdGl2ZU1hcHBpbmdzID0ge1xuICAgIFpvZFN0cmluZzogJ3N0cmluZycsXG4gICAgWm9kTnVtYmVyOiAnbnVtYmVyJyxcbiAgICBab2RCaWdJbnQ6ICdpbnRlZ2VyJyxcbiAgICBab2RCb29sZWFuOiAnYm9vbGVhbicsXG4gICAgWm9kTnVsbDogJ251bGwnLFxufTtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVVuaW9uRGVmKGRlZiwgcmVmcykge1xuICAgIGlmIChyZWZzLnRhcmdldCA9PT0gJ29wZW5BcGkzJylcbiAgICAgICAgcmV0dXJuIGFzQW55T2YoZGVmLCByZWZzKTtcbiAgICBjb25zdCBvcHRpb25zID0gZGVmLm9wdGlvbnMgaW5zdGFuY2VvZiBNYXAgPyBBcnJheS5mcm9tKGRlZi5vcHRpb25zLnZhbHVlcygpKSA6IGRlZi5vcHRpb25zO1xuICAgIC8vIFRoaXMgYmxvY2tzIHRyaWVzIHRvIGxvb2sgYWhlYWQgYSBiaXQgdG8gcHJvZHVjZSBuaWNlciBsb29raW5nIHNjaGVtYXMgd2l0aCB0eXBlIGFycmF5IGluc3RlYWQgb2YgYW55T2YuXG4gICAgaWYgKG9wdGlvbnMuZXZlcnkoKHgpID0+IHguX2RlZi50eXBlTmFtZSBpbiBwcmltaXRpdmVNYXBwaW5ncyAmJiAoIXguX2RlZi5jaGVja3MgfHwgIXguX2RlZi5jaGVja3MubGVuZ3RoKSkpIHtcbiAgICAgICAgLy8gYWxsIHR5cGVzIGluIHVuaW9uIGFyZSBwcmltaXRpdmUgYW5kIGxhY2sgY2hlY2tzLCBzbyBtaWdodCBhcyB3ZWxsIHNxdWFzaCBpbnRvIHt0eXBlOiBbLi4uXX1cbiAgICAgICAgY29uc3QgdHlwZXMgPSBvcHRpb25zLnJlZHVjZSgodHlwZXMsIHgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBwcmltaXRpdmVNYXBwaW5nc1t4Ll9kZWYudHlwZU5hbWVdOyAvL0NhbiBiZSBzYWZlbHkgY2FzdGVkIGR1ZSB0byByb3cgNDNcbiAgICAgICAgICAgIHJldHVybiB0eXBlICYmICF0eXBlcy5pbmNsdWRlcyh0eXBlKSA/IFsuLi50eXBlcywgdHlwZV0gOiB0eXBlcztcbiAgICAgICAgfSwgW10pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogdHlwZXMubGVuZ3RoID4gMSA/IHR5cGVzIDogdHlwZXNbMF0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKG9wdGlvbnMuZXZlcnkoKHgpID0+IHguX2RlZi50eXBlTmFtZSA9PT0gJ1pvZExpdGVyYWwnICYmICF4LmRlc2NyaXB0aW9uKSkge1xuICAgICAgICAvLyBhbGwgb3B0aW9ucyBsaXRlcmFsc1xuICAgICAgICBjb25zdCB0eXBlcyA9IG9wdGlvbnMucmVkdWNlKChhY2MsIHgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHR5cGUgPSB0eXBlb2YgeC5fZGVmLnZhbHVlO1xuICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgICAgICAgICBjYXNlICdudW1iZXInOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2Jvb2xlYW4nOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWy4uLmFjYywgdHlwZV07XG4gICAgICAgICAgICAgICAgY2FzZSAnYmlnaW50JzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsuLi5hY2MsICdpbnRlZ2VyJ107XG4gICAgICAgICAgICAgICAgY2FzZSAnb2JqZWN0JzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHguX2RlZi52YWx1ZSA9PT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbLi4uYWNjLCAnbnVsbCddO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3N5bWJvbCc6XG4gICAgICAgICAgICAgICAgY2FzZSAndW5kZWZpbmVkJzpcbiAgICAgICAgICAgICAgICBjYXNlICdmdW5jdGlvbic6XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgW10pO1xuICAgICAgICBpZiAodHlwZXMubGVuZ3RoID09PSBvcHRpb25zLmxlbmd0aCkge1xuICAgICAgICAgICAgLy8gYWxsIHRoZSBsaXRlcmFscyBhcmUgcHJpbWl0aXZlLCBhcyBmYXIgYXMgbnVsbCBjYW4gYmUgY29uc2lkZXJlZCBwcmltaXRpdmVcbiAgICAgICAgICAgIGNvbnN0IHVuaXF1ZVR5cGVzID0gdHlwZXMuZmlsdGVyKCh4LCBpLCBhKSA9PiBhLmluZGV4T2YoeCkgPT09IGkpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0eXBlOiB1bmlxdWVUeXBlcy5sZW5ndGggPiAxID8gdW5pcXVlVHlwZXMgOiB1bmlxdWVUeXBlc1swXSxcbiAgICAgICAgICAgICAgICBlbnVtOiBvcHRpb25zLnJlZHVjZSgoYWNjLCB4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhY2MuaW5jbHVkZXMoeC5fZGVmLnZhbHVlKSA/IGFjYyA6IFsuLi5hY2MsIHguX2RlZi52YWx1ZV07XG4gICAgICAgICAgICAgICAgfSwgW10pLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChvcHRpb25zLmV2ZXJ5KCh4KSA9PiB4Ll9kZWYudHlwZU5hbWUgPT09ICdab2RFbnVtJykpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgZW51bTogb3B0aW9ucy5yZWR1Y2UoKGFjYywgeCkgPT4gWy4uLmFjYywgLi4ueC5fZGVmLnZhbHVlcy5maWx0ZXIoKHgpID0+ICFhY2MuaW5jbHVkZXMoeCkpXSwgW10pLFxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gYXNBbnlPZihkZWYsIHJlZnMpO1xufVxuY29uc3QgYXNBbnlPZiA9IChkZWYsIHJlZnMpID0+IHtcbiAgICBjb25zdCBhbnlPZiA9IChkZWYub3B0aW9ucyBpbnN0YW5jZW9mIE1hcCA/IEFycmF5LmZyb20oZGVmLm9wdGlvbnMudmFsdWVzKCkpIDogZGVmLm9wdGlvbnMpXG4gICAgICAgIC5tYXAoKHgsIGkpID0+IHBhcnNlRGVmKHguX2RlZiwge1xuICAgICAgICAuLi5yZWZzLFxuICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdhbnlPZicsIGAke2l9YF0sXG4gICAgfSkpXG4gICAgICAgIC5maWx0ZXIoKHgpID0+ICEheCAmJiAoIXJlZnMuc3RyaWN0VW5pb25zIHx8ICh0eXBlb2YgeCA9PT0gJ29iamVjdCcgJiYgT2JqZWN0LmtleXMoeCkubGVuZ3RoID4gMCkpKTtcbiAgICByZXR1cm4gYW55T2YubGVuZ3RoID8geyBhbnlPZiB9IDogdW5kZWZpbmVkO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVuaW9uLm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmltcG9ydCB7IHByaW1pdGl2ZU1hcHBpbmdzIH0gZnJvbSBcIi4vdW5pb24ubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VOdWxsYWJsZURlZihkZWYsIHJlZnMpIHtcbiAgICBpZiAoWydab2RTdHJpbmcnLCAnWm9kTnVtYmVyJywgJ1pvZEJpZ0ludCcsICdab2RCb29sZWFuJywgJ1pvZE51bGwnXS5pbmNsdWRlcyhkZWYuaW5uZXJUeXBlLl9kZWYudHlwZU5hbWUpICYmXG4gICAgICAgICghZGVmLmlubmVyVHlwZS5fZGVmLmNoZWNrcyB8fCAhZGVmLmlubmVyVHlwZS5fZGVmLmNoZWNrcy5sZW5ndGgpKSB7XG4gICAgICAgIGlmIChyZWZzLnRhcmdldCA9PT0gJ29wZW5BcGkzJyB8fCByZWZzLm51bGxhYmxlU3RyYXRlZ3kgPT09ICdwcm9wZXJ0eScpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdHlwZTogcHJpbWl0aXZlTWFwcGluZ3NbZGVmLmlubmVyVHlwZS5fZGVmLnR5cGVOYW1lXSxcbiAgICAgICAgICAgICAgICBudWxsYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IFtwcmltaXRpdmVNYXBwaW5nc1tkZWYuaW5uZXJUeXBlLl9kZWYudHlwZU5hbWVdLCAnbnVsbCddLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAocmVmcy50YXJnZXQgPT09ICdvcGVuQXBpMycpIHtcbiAgICAgICAgY29uc3QgYmFzZSA9IHBhcnNlRGVmKGRlZi5pbm5lclR5cGUuX2RlZiwge1xuICAgICAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aF0sXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoYmFzZSAmJiAnJHJlZicgaW4gYmFzZSlcbiAgICAgICAgICAgIHJldHVybiB7IGFsbE9mOiBbYmFzZV0sIG51bGxhYmxlOiB0cnVlIH07XG4gICAgICAgIHJldHVybiBiYXNlICYmIHsgLi4uYmFzZSwgbnVsbGFibGU6IHRydWUgfTtcbiAgICB9XG4gICAgY29uc3QgYmFzZSA9IHBhcnNlRGVmKGRlZi5pbm5lclR5cGUuX2RlZiwge1xuICAgICAgICAuLi5yZWZzLFxuICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdhbnlPZicsICcwJ10sXG4gICAgfSk7XG4gICAgcmV0dXJuIGJhc2UgJiYgeyBhbnlPZjogW2Jhc2UsIHsgdHlwZTogJ251bGwnIH1dIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1udWxsYWJsZS5tanMubWFwIiwiaW1wb3J0IHsgYWRkRXJyb3JNZXNzYWdlLCBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzIH0gZnJvbSBcIi4uL2Vycm9yTWVzc2FnZXMubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VOdW1iZXJEZWYoZGVmLCByZWZzKSB7XG4gICAgY29uc3QgcmVzID0ge1xuICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICB9O1xuICAgIGlmICghZGVmLmNoZWNrcylcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICBmb3IgKGNvbnN0IGNoZWNrIG9mIGRlZi5jaGVja3MpIHtcbiAgICAgICAgc3dpdGNoIChjaGVjay5raW5kKSB7XG4gICAgICAgICAgICBjYXNlICdpbnQnOlxuICAgICAgICAgICAgICAgIHJlcy50eXBlID0gJ2ludGVnZXInO1xuICAgICAgICAgICAgICAgIGFkZEVycm9yTWVzc2FnZShyZXMsICd0eXBlJywgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdtaW4nOlxuICAgICAgICAgICAgICAgIGlmIChyZWZzLnRhcmdldCA9PT0gJ2pzb25TY2hlbWE3Jykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2hlY2suaW5jbHVzaXZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21pbmltdW0nLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ2V4Y2x1c2l2ZU1pbmltdW0nLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghY2hlY2suaW5jbHVzaXZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuZXhjbHVzaXZlTWluaW11bSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtaW5pbXVtJywgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ21heCc6XG4gICAgICAgICAgICAgICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnanNvblNjaGVtYTcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWF4aW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnZXhjbHVzaXZlTWF4aW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5leGNsdXNpdmVNYXhpbXVtID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21heGltdW0nLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnbXVsdGlwbGVPZic6XG4gICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtdWx0aXBsZU9mJywgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXM7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1udW1iZXIubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZnVuY3Rpb24gZGVjaWRlQWRkaXRpb25hbFByb3BlcnRpZXMoZGVmLCByZWZzKSB7XG4gICAgaWYgKHJlZnMucmVtb3ZlQWRkaXRpb25hbFN0cmF0ZWd5ID09PSAnc3RyaWN0Jykge1xuICAgICAgICByZXR1cm4gZGVmLmNhdGNoYWxsLl9kZWYudHlwZU5hbWUgPT09ICdab2ROZXZlcicgP1xuICAgICAgICAgICAgZGVmLnVua25vd25LZXlzICE9PSAnc3RyaWN0J1xuICAgICAgICAgICAgOiBwYXJzZURlZihkZWYuY2F0Y2hhbGwuX2RlZiwge1xuICAgICAgICAgICAgICAgIC4uLnJlZnMsXG4gICAgICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAnYWRkaXRpb25hbFByb3BlcnRpZXMnXSxcbiAgICAgICAgICAgIH0pID8/IHRydWU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gZGVmLmNhdGNoYWxsLl9kZWYudHlwZU5hbWUgPT09ICdab2ROZXZlcicgP1xuICAgICAgICAgICAgZGVmLnVua25vd25LZXlzID09PSAncGFzc3Rocm91Z2gnXG4gICAgICAgICAgICA6IHBhcnNlRGVmKGRlZi5jYXRjaGFsbC5fZGVmLCB7XG4gICAgICAgICAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdhZGRpdGlvbmFsUHJvcGVydGllcyddLFxuICAgICAgICAgICAgfSkgPz8gdHJ1ZTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VPYmplY3REZWYoZGVmLCByZWZzKSB7XG4gICAgY29uc3QgcmVzdWx0ID0ge1xuICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgLi4uT2JqZWN0LmVudHJpZXMoZGVmLnNoYXBlKCkpLnJlZHVjZSgoYWNjLCBbcHJvcE5hbWUsIHByb3BEZWZdKSA9PiB7XG4gICAgICAgICAgICBpZiAocHJvcERlZiA9PT0gdW5kZWZpbmVkIHx8IHByb3BEZWYuX2RlZiA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgICAgICBjb25zdCBwcm9wZXJ0eVBhdGggPSBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ3Byb3BlcnRpZXMnLCBwcm9wTmFtZV07XG4gICAgICAgICAgICBjb25zdCBwYXJzZWREZWYgPSBwYXJzZURlZihwcm9wRGVmLl9kZWYsIHtcbiAgICAgICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRQYXRoOiBwcm9wZXJ0eVBhdGgsXG4gICAgICAgICAgICAgICAgcHJvcGVydHlQYXRoLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAocGFyc2VkRGVmID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgICAgIGlmIChyZWZzLm9wZW5haVN0cmljdE1vZGUgJiZcbiAgICAgICAgICAgICAgICBwcm9wRGVmLmlzT3B0aW9uYWwoKSAmJlxuICAgICAgICAgICAgICAgICFwcm9wRGVmLmlzTnVsbGFibGUoKSAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiBwcm9wRGVmLl9kZWY/LmRlZmF1bHRWYWx1ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFpvZCBmaWVsZCBhdCBcXGAke3Byb3BlcnR5UGF0aC5qb2luKCcvJyl9XFxgIHVzZXMgXFxgLm9wdGlvbmFsKClcXGAgd2l0aG91dCBcXGAubnVsbGFibGUoKVxcYCB3aGljaCBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoZSBBUEkuIFNlZTogaHR0cHM6Ly9wbGF0Zm9ybS5vcGVuYWkuY29tL2RvY3MvZ3VpZGVzL3N0cnVjdHVyZWQtb3V0cHV0cz9hcGktbW9kZT1yZXNwb25zZXMjYWxsLWZpZWxkcy1tdXN0LWJlLXJlcXVpcmVkYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uYWNjLnByb3BlcnRpZXMsXG4gICAgICAgICAgICAgICAgICAgIFtwcm9wTmFtZV06IHBhcnNlZERlZixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBwcm9wRGVmLmlzT3B0aW9uYWwoKSAmJiAhcmVmcy5vcGVuYWlTdHJpY3RNb2RlID8gYWNjLnJlcXVpcmVkIDogWy4uLmFjYy5yZXF1aXJlZCwgcHJvcE5hbWVdLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSwgeyBwcm9wZXJ0aWVzOiB7fSwgcmVxdWlyZWQ6IFtdIH0pLFxuICAgICAgICBhZGRpdGlvbmFsUHJvcGVydGllczogZGVjaWRlQWRkaXRpb25hbFByb3BlcnRpZXMoZGVmLCByZWZzKSxcbiAgICB9O1xuICAgIGlmICghcmVzdWx0LnJlcXVpcmVkLmxlbmd0aClcbiAgICAgICAgZGVsZXRlIHJlc3VsdC5yZXF1aXJlZDtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b2JqZWN0Lm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBjb25zdCBwYXJzZU9wdGlvbmFsRGVmID0gKGRlZiwgcmVmcykgPT4ge1xuICAgIGlmIChyZWZzLnByb3BlcnR5UGF0aCAmJlxuICAgICAgICByZWZzLmN1cnJlbnRQYXRoLnNsaWNlKDAsIHJlZnMucHJvcGVydHlQYXRoLmxlbmd0aCkudG9TdHJpbmcoKSA9PT0gcmVmcy5wcm9wZXJ0eVBhdGgudG9TdHJpbmcoKSkge1xuICAgICAgICByZXR1cm4gcGFyc2VEZWYoZGVmLmlubmVyVHlwZS5fZGVmLCB7IC4uLnJlZnMsIGN1cnJlbnRQYXRoOiByZWZzLmN1cnJlbnRQYXRoIH0pO1xuICAgIH1cbiAgICBjb25zdCBpbm5lclNjaGVtYSA9IHBhcnNlRGVmKGRlZi5pbm5lclR5cGUuX2RlZiwge1xuICAgICAgICAuLi5yZWZzLFxuICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdhbnlPZicsICcxJ10sXG4gICAgfSk7XG4gICAgcmV0dXJuIGlubmVyU2NoZW1hID9cbiAgICAgICAge1xuICAgICAgICAgICAgYW55T2Y6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5vdDoge30sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBpbm5lclNjaGVtYSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH1cbiAgICAgICAgOiB7fTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vcHRpb25hbC5tanMubWFwIiwiaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5leHBvcnQgY29uc3QgcGFyc2VQaXBlbGluZURlZiA9IChkZWYsIHJlZnMpID0+IHtcbiAgICBpZiAocmVmcy5waXBlU3RyYXRlZ3kgPT09ICdpbnB1dCcpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlRGVmKGRlZi5pbi5fZGVmLCByZWZzKTtcbiAgICB9XG4gICAgZWxzZSBpZiAocmVmcy5waXBlU3RyYXRlZ3kgPT09ICdvdXRwdXQnKSB7XG4gICAgICAgIHJldHVybiBwYXJzZURlZihkZWYub3V0Ll9kZWYsIHJlZnMpO1xuICAgIH1cbiAgICBjb25zdCBhID0gcGFyc2VEZWYoZGVmLmluLl9kZWYsIHtcbiAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAnYWxsT2YnLCAnMCddLFxuICAgIH0pO1xuICAgIGNvbnN0IGIgPSBwYXJzZURlZihkZWYub3V0Ll9kZWYsIHtcbiAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAnYWxsT2YnLCBhID8gJzEnIDogJzAnXSxcbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgICBhbGxPZjogW2EsIGJdLmZpbHRlcigoeCkgPT4geCAhPT0gdW5kZWZpbmVkKSxcbiAgICB9O1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBpcGVsaW5lLm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVByb21pc2VEZWYoZGVmLCByZWZzKSB7XG4gICAgcmV0dXJuIHBhcnNlRGVmKGRlZi50eXBlLl9kZWYsIHJlZnMpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJvbWlzZS5tanMubWFwIiwiaW1wb3J0IHsgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyB9IGZyb20gXCIuLi9lcnJvck1lc3NhZ2VzLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VTZXREZWYoZGVmLCByZWZzKSB7XG4gICAgY29uc3QgaXRlbXMgPSBwYXJzZURlZihkZWYudmFsdWVUeXBlLl9kZWYsIHtcbiAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAnaXRlbXMnXSxcbiAgICB9KTtcbiAgICBjb25zdCBzY2hlbWEgPSB7XG4gICAgICAgIHR5cGU6ICdhcnJheScsXG4gICAgICAgIHVuaXF1ZUl0ZW1zOiB0cnVlLFxuICAgICAgICBpdGVtcyxcbiAgICB9O1xuICAgIGlmIChkZWYubWluU2l6ZSkge1xuICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHNjaGVtYSwgJ21pbkl0ZW1zJywgZGVmLm1pblNpemUudmFsdWUsIGRlZi5taW5TaXplLm1lc3NhZ2UsIHJlZnMpO1xuICAgIH1cbiAgICBpZiAoZGVmLm1heFNpemUpIHtcbiAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhzY2hlbWEsICdtYXhJdGVtcycsIGRlZi5tYXhTaXplLnZhbHVlLCBkZWYubWF4U2l6ZS5tZXNzYWdlLCByZWZzKTtcbiAgICB9XG4gICAgcmV0dXJuIHNjaGVtYTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNldC5tanMubWFwIiwiaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VUdXBsZURlZihkZWYsIHJlZnMpIHtcbiAgICBpZiAoZGVmLnJlc3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdhcnJheScsXG4gICAgICAgICAgICBtaW5JdGVtczogZGVmLml0ZW1zLmxlbmd0aCxcbiAgICAgICAgICAgIGl0ZW1zOiBkZWYuaXRlbXNcbiAgICAgICAgICAgICAgICAubWFwKCh4LCBpKSA9PiBwYXJzZURlZih4Ll9kZWYsIHtcbiAgICAgICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2l0ZW1zJywgYCR7aX1gXSxcbiAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgICAgIC5yZWR1Y2UoKGFjYywgeCkgPT4gKHggPT09IHVuZGVmaW5lZCA/IGFjYyA6IFsuLi5hY2MsIHhdKSwgW10pLFxuICAgICAgICAgICAgYWRkaXRpb25hbEl0ZW1zOiBwYXJzZURlZihkZWYucmVzdC5fZGVmLCB7XG4gICAgICAgICAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdhZGRpdGlvbmFsSXRlbXMnXSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdhcnJheScsXG4gICAgICAgICAgICBtaW5JdGVtczogZGVmLml0ZW1zLmxlbmd0aCxcbiAgICAgICAgICAgIG1heEl0ZW1zOiBkZWYuaXRlbXMubGVuZ3RoLFxuICAgICAgICAgICAgaXRlbXM6IGRlZi5pdGVtc1xuICAgICAgICAgICAgICAgIC5tYXAoKHgsIGkpID0+IHBhcnNlRGVmKHguX2RlZiwge1xuICAgICAgICAgICAgICAgIC4uLnJlZnMsXG4gICAgICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAnaXRlbXMnLCBgJHtpfWBdLFxuICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAgICAgLnJlZHVjZSgoYWNjLCB4KSA9PiAoeCA9PT0gdW5kZWZpbmVkID8gYWNjIDogWy4uLmFjYywgeF0pLCBbXSksXG4gICAgICAgIH07XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHVwbGUubWpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBwYXJzZVVuZGVmaW5lZERlZigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBub3Q6IHt9LFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD11bmRlZmluZWQubWpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBwYXJzZVVua25vd25EZWYoKSB7XG4gICAgcmV0dXJuIHt9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dW5rbm93bi5tanMubWFwIiwiaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5leHBvcnQgY29uc3QgcGFyc2VSZWFkb25seURlZiA9IChkZWYsIHJlZnMpID0+IHtcbiAgICByZXR1cm4gcGFyc2VEZWYoZGVmLmlubmVyVHlwZS5fZGVmLCByZWZzKTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZWFkb25seS5tanMubWFwIiwiaW1wb3J0IHsgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kIH0gZnJvbSAnem9kL3YzJztcbmltcG9ydCB7IHBhcnNlQW55RGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9hbnkubWpzXCI7XG5pbXBvcnQgeyBwYXJzZUFycmF5RGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9hcnJheS5tanNcIjtcbmltcG9ydCB7IHBhcnNlQmlnaW50RGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9iaWdpbnQubWpzXCI7XG5pbXBvcnQgeyBwYXJzZUJvb2xlYW5EZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2Jvb2xlYW4ubWpzXCI7XG5pbXBvcnQgeyBwYXJzZUJyYW5kZWREZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2JyYW5kZWQubWpzXCI7XG5pbXBvcnQgeyBwYXJzZUNhdGNoRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9jYXRjaC5tanNcIjtcbmltcG9ydCB7IHBhcnNlRGF0ZURlZiB9IGZyb20gXCIuL3BhcnNlcnMvZGF0ZS5tanNcIjtcbmltcG9ydCB7IHBhcnNlRGVmYXVsdERlZiB9IGZyb20gXCIuL3BhcnNlcnMvZGVmYXVsdC5tanNcIjtcbmltcG9ydCB7IHBhcnNlRWZmZWN0c0RlZiB9IGZyb20gXCIuL3BhcnNlcnMvZWZmZWN0cy5tanNcIjtcbmltcG9ydCB7IHBhcnNlRW51bURlZiB9IGZyb20gXCIuL3BhcnNlcnMvZW51bS5tanNcIjtcbmltcG9ydCB7IHBhcnNlSW50ZXJzZWN0aW9uRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9pbnRlcnNlY3Rpb24ubWpzXCI7XG5pbXBvcnQgeyBwYXJzZUxpdGVyYWxEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2xpdGVyYWwubWpzXCI7XG5pbXBvcnQgeyBwYXJzZU1hcERlZiB9IGZyb20gXCIuL3BhcnNlcnMvbWFwLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VOYXRpdmVFbnVtRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9uYXRpdmVFbnVtLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VOZXZlckRlZiB9IGZyb20gXCIuL3BhcnNlcnMvbmV2ZXIubWpzXCI7XG5pbXBvcnQgeyBwYXJzZU51bGxEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL251bGwubWpzXCI7XG5pbXBvcnQgeyBwYXJzZU51bGxhYmxlRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9udWxsYWJsZS5tanNcIjtcbmltcG9ydCB7IHBhcnNlTnVtYmVyRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9udW1iZXIubWpzXCI7XG5pbXBvcnQgeyBwYXJzZU9iamVjdERlZiB9IGZyb20gXCIuL3BhcnNlcnMvb2JqZWN0Lm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VPcHRpb25hbERlZiB9IGZyb20gXCIuL3BhcnNlcnMvb3B0aW9uYWwubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVBpcGVsaW5lRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9waXBlbGluZS5tanNcIjtcbmltcG9ydCB7IHBhcnNlUHJvbWlzZURlZiB9IGZyb20gXCIuL3BhcnNlcnMvcHJvbWlzZS5tanNcIjtcbmltcG9ydCB7IHBhcnNlUmVjb3JkRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9yZWNvcmQubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVNldERlZiB9IGZyb20gXCIuL3BhcnNlcnMvc2V0Lm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VTdHJpbmdEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL3N0cmluZy5tanNcIjtcbmltcG9ydCB7IHBhcnNlVHVwbGVEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL3R1cGxlLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VVbmRlZmluZWREZWYgfSBmcm9tIFwiLi9wYXJzZXJzL3VuZGVmaW5lZC5tanNcIjtcbmltcG9ydCB7IHBhcnNlVW5pb25EZWYgfSBmcm9tIFwiLi9wYXJzZXJzL3VuaW9uLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VVbmtub3duRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy91bmtub3duLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VSZWFkb25seURlZiB9IGZyb20gXCIuL3BhcnNlcnMvcmVhZG9ubHkubWpzXCI7XG5pbXBvcnQgeyBpZ25vcmVPdmVycmlkZSB9IGZyb20gXCIuL09wdGlvbnMubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VEZWYoZGVmLCByZWZzLCBmb3JjZVJlc29sdXRpb24gPSBmYWxzZSkge1xuICAgIGNvbnN0IHNlZW5JdGVtID0gcmVmcy5zZWVuLmdldChkZWYpO1xuICAgIGlmIChyZWZzLm92ZXJyaWRlKSB7XG4gICAgICAgIGNvbnN0IG92ZXJyaWRlUmVzdWx0ID0gcmVmcy5vdmVycmlkZT8uKGRlZiwgcmVmcywgc2Vlbkl0ZW0sIGZvcmNlUmVzb2x1dGlvbik7XG4gICAgICAgIGlmIChvdmVycmlkZVJlc3VsdCAhPT0gaWdub3JlT3ZlcnJpZGUpIHtcbiAgICAgICAgICAgIHJldHVybiBvdmVycmlkZVJlc3VsdDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoc2Vlbkl0ZW0gJiYgIWZvcmNlUmVzb2x1dGlvbikge1xuICAgICAgICBjb25zdCBzZWVuU2NoZW1hID0gZ2V0JHJlZihzZWVuSXRlbSwgcmVmcyk7XG4gICAgICAgIGlmIChzZWVuU2NoZW1hICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGlmICgnJHJlZicgaW4gc2VlblNjaGVtYSkge1xuICAgICAgICAgICAgICAgIHJlZnMuc2VlblJlZnMuYWRkKHNlZW5TY2hlbWEuJHJlZik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc2VlblNjaGVtYTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBuZXdJdGVtID0geyBkZWYsIHBhdGg6IHJlZnMuY3VycmVudFBhdGgsIGpzb25TY2hlbWE6IHVuZGVmaW5lZCB9O1xuICAgIHJlZnMuc2Vlbi5zZXQoZGVmLCBuZXdJdGVtKTtcbiAgICBjb25zdCBqc29uU2NoZW1hID0gc2VsZWN0UGFyc2VyKGRlZiwgZGVmLnR5cGVOYW1lLCByZWZzLCBmb3JjZVJlc29sdXRpb24pO1xuICAgIGlmIChqc29uU2NoZW1hKSB7XG4gICAgICAgIGFkZE1ldGEoZGVmLCByZWZzLCBqc29uU2NoZW1hKTtcbiAgICB9XG4gICAgbmV3SXRlbS5qc29uU2NoZW1hID0ganNvblNjaGVtYTtcbiAgICByZXR1cm4ganNvblNjaGVtYTtcbn1cbmNvbnN0IGdldCRyZWYgPSAoaXRlbSwgcmVmcykgPT4ge1xuICAgIHN3aXRjaCAocmVmcy4kcmVmU3RyYXRlZ3kpIHtcbiAgICAgICAgY2FzZSAncm9vdCc6XG4gICAgICAgICAgICByZXR1cm4geyAkcmVmOiBpdGVtLnBhdGguam9pbignLycpIH07XG4gICAgICAgIC8vIHRoaXMgY2FzZSBpcyBuZWVkZWQgYXMgT3BlbkFJIHN0cmljdCBtb2RlIGRvZXNuJ3Qgc3VwcG9ydCB0b3AtbGV2ZWwgYCRyZWZgcywgaS5lLlxuICAgICAgICAvLyB0aGUgdG9wLWxldmVsIHNjaGVtYSAqbXVzdCogYmUgYHtcInR5cGVcIjogXCJvYmplY3RcIiwgXCJwcm9wZXJ0aWVzXCI6IHsuLi59fWAgYnV0IGlmIHdlIGV2ZXJcbiAgICAgICAgLy8gbmVlZCB0byBkZWZpbmUgYSBgJHJlZmAsIHJlbGF0aXZlIGAkcmVmYHMgYXJlbid0IHN1cHBvcnRlZCwgc28gd2UgbmVlZCB0byBleHRyYWN0XG4gICAgICAgIC8vIHRoZSBzY2hlbWEgdG8gYCMvZGVmaW5pdGlvbnMvYCBhbmQgcmVmZXJlbmNlIHRoYXQuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIGUuZy4gaWYgd2UgbmVlZCB0byByZWZlcmVuY2UgYSBzY2hlbWEgYXRcbiAgICAgICAgLy8gYFtcIiNcIixcImRlZmluaXRpb25zXCIsXCJjb250YWN0UGVyc29uXCIsXCJwcm9wZXJ0aWVzXCIsXCJwZXJzb24xXCIsXCJwcm9wZXJ0aWVzXCIsXCJuYW1lXCJdYFxuICAgICAgICAvLyB0aGVuIHdlJ2xsIGV4dHJhY3QgaXQgb3V0IHRvIGBjb250YWN0UGVyc29uX3Byb3BlcnRpZXNfcGVyc29uMV9wcm9wZXJ0aWVzX25hbWVgXG4gICAgICAgIGNhc2UgJ2V4dHJhY3QtdG8tcm9vdCc6XG4gICAgICAgICAgICBjb25zdCBuYW1lID0gaXRlbS5wYXRoLnNsaWNlKHJlZnMuYmFzZVBhdGgubGVuZ3RoICsgMSkuam9pbignXycpO1xuICAgICAgICAgICAgLy8gd2UgZG9uJ3QgbmVlZCB0byBleHRyYWN0IHRoZSByb290IHNjaGVtYSBpbiB0aGlzIGNhc2UsIGFzIGl0J3MgYWxyZWFkeVxuICAgICAgICAgICAgLy8gYmVlbiBhZGRlZCB0byB0aGUgZGVmaW5pdGlvbnNcbiAgICAgICAgICAgIGlmIChuYW1lICE9PSByZWZzLm5hbWUgJiYgcmVmcy5uYW1lU3RyYXRlZ3kgPT09ICdkdXBsaWNhdGUtcmVmJykge1xuICAgICAgICAgICAgICAgIHJlZnMuZGVmaW5pdGlvbnNbbmFtZV0gPSBpdGVtLmRlZjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7ICRyZWY6IFsuLi5yZWZzLmJhc2VQYXRoLCByZWZzLmRlZmluaXRpb25QYXRoLCBuYW1lXS5qb2luKCcvJykgfTtcbiAgICAgICAgY2FzZSAncmVsYXRpdmUnOlxuICAgICAgICAgICAgcmV0dXJuIHsgJHJlZjogZ2V0UmVsYXRpdmVQYXRoKHJlZnMuY3VycmVudFBhdGgsIGl0ZW0ucGF0aCkgfTtcbiAgICAgICAgY2FzZSAnbm9uZSc6XG4gICAgICAgIGNhc2UgJ3NlZW4nOiB7XG4gICAgICAgICAgICBpZiAoaXRlbS5wYXRoLmxlbmd0aCA8IHJlZnMuY3VycmVudFBhdGgubGVuZ3RoICYmXG4gICAgICAgICAgICAgICAgaXRlbS5wYXRoLmV2ZXJ5KCh2YWx1ZSwgaW5kZXgpID0+IHJlZnMuY3VycmVudFBhdGhbaW5kZXhdID09PSB2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFJlY3Vyc2l2ZSByZWZlcmVuY2UgZGV0ZWN0ZWQgYXQgJHtyZWZzLmN1cnJlbnRQYXRoLmpvaW4oJy8nKX0hIERlZmF1bHRpbmcgdG8gYW55YCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlZnMuJHJlZlN0cmF0ZWd5ID09PSAnc2VlbicgPyB7fSA6IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cbn07XG5jb25zdCBnZXRSZWxhdGl2ZVBhdGggPSAocGF0aEEsIHBhdGhCKSA9PiB7XG4gICAgbGV0IGkgPSAwO1xuICAgIGZvciAoOyBpIDwgcGF0aEEubGVuZ3RoICYmIGkgPCBwYXRoQi5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAocGF0aEFbaV0gIT09IHBhdGhCW2ldKVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiBbKHBhdGhBLmxlbmd0aCAtIGkpLnRvU3RyaW5nKCksIC4uLnBhdGhCLnNsaWNlKGkpXS5qb2luKCcvJyk7XG59O1xuY29uc3Qgc2VsZWN0UGFyc2VyID0gKGRlZiwgdHlwZU5hbWUsIHJlZnMsIGZvcmNlUmVzb2x1dGlvbikgPT4ge1xuICAgIHN3aXRjaCAodHlwZU5hbWUpIHtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU3RyaW5nOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlU3RyaW5nRGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE51bWJlcjpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZU51bWJlckRlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPYmplY3Q6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VPYmplY3REZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQmlnSW50OlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlQmlnaW50RGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEJvb2xlYW46XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VCb29sZWFuRGVmKCk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZERhdGU6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VEYXRlRGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFVuZGVmaW5lZDpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZVVuZGVmaW5lZERlZigpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROdWxsOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlTnVsbERlZihyZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQXJyYXk6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VBcnJheURlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmlvbjpcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRGlzY3JpbWluYXRlZFVuaW9uOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlVW5pb25EZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kSW50ZXJzZWN0aW9uOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50ZXJzZWN0aW9uRGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFR1cGxlOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlVHVwbGVEZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUmVjb3JkOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlUmVjb3JkRGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZExpdGVyYWw6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VMaXRlcmFsRGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEVudW06XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VFbnVtRGVmKGRlZik7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5hdGl2ZUVudW06XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VOYXRpdmVFbnVtRGVmKGRlZik7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE51bGxhYmxlOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlTnVsbGFibGVEZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT3B0aW9uYWw6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VPcHRpb25hbERlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RNYXA6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VNYXBEZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU2V0OlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlU2V0RGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZExhenk6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VEZWYoZGVmLmdldHRlcigpLl9kZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RQcm9taXNlOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlUHJvbWlzZURlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROYU46XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5ldmVyOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlTmV2ZXJEZWYoKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRWZmZWN0czpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUVmZmVjdHNEZWYoZGVmLCByZWZzLCBmb3JjZVJlc29sdXRpb24pO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RBbnk6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VBbnlEZWYoKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVW5rbm93bjpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZVVua25vd25EZWYoKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZURlZmF1bHREZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQnJhbmRlZDpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUJyYW5kZWREZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUmVhZG9ubHk6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VSZWFkb25seURlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RDYXRjaDpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUNhdGNoRGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFBpcGVsaW5lOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlUGlwZWxpbmVEZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRnVuY3Rpb246XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFZvaWQ6XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFN5bWJvbDpcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gKChfKSA9PiB1bmRlZmluZWQpKHR5cGVOYW1lKTtcbiAgICB9XG59O1xuY29uc3QgYWRkTWV0YSA9IChkZWYsIHJlZnMsIGpzb25TY2hlbWEpID0+IHtcbiAgICBpZiAoZGVmLmRlc2NyaXB0aW9uKSB7XG4gICAgICAgIGpzb25TY2hlbWEuZGVzY3JpcHRpb24gPSBkZWYuZGVzY3JpcHRpb247XG4gICAgICAgIGlmIChyZWZzLm1hcmtkb3duRGVzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIGpzb25TY2hlbWEubWFya2Rvd25EZXNjcmlwdGlvbiA9IGRlZi5kZXNjcmlwdGlvbjtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ganNvblNjaGVtYTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYXJzZURlZi5tanMubWFwIiwiaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi9wYXJzZURlZi5tanNcIjtcbmltcG9ydCB7IGdldFJlZnMgfSBmcm9tIFwiLi9SZWZzLm1qc1wiO1xuaW1wb3J0IHsgem9kRGVmLCBpc0VtcHR5T2JqIH0gZnJvbSBcIi4vdXRpbC5tanNcIjtcbmNvbnN0IHpvZFRvSnNvblNjaGVtYSA9IChzY2hlbWEsIG9wdGlvbnMpID0+IHtcbiAgICBjb25zdCByZWZzID0gZ2V0UmVmcyhvcHRpb25zKTtcbiAgICBjb25zdCBuYW1lID0gdHlwZW9mIG9wdGlvbnMgPT09ICdzdHJpbmcnID8gb3B0aW9uc1xuICAgICAgICA6IG9wdGlvbnM/Lm5hbWVTdHJhdGVneSA9PT0gJ3RpdGxlJyA/IHVuZGVmaW5lZFxuICAgICAgICAgICAgOiBvcHRpb25zPy5uYW1lO1xuICAgIGNvbnN0IG1haW4gPSBwYXJzZURlZihzY2hlbWEuX2RlZiwgbmFtZSA9PT0gdW5kZWZpbmVkID8gcmVmcyA6ICh7XG4gICAgICAgIC4uLnJlZnMsXG4gICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5iYXNlUGF0aCwgcmVmcy5kZWZpbml0aW9uUGF0aCwgbmFtZV0sXG4gICAgfSksIGZhbHNlKSA/PyB7fTtcbiAgICBjb25zdCB0aXRsZSA9IHR5cGVvZiBvcHRpb25zID09PSAnb2JqZWN0JyAmJiBvcHRpb25zLm5hbWUgIT09IHVuZGVmaW5lZCAmJiBvcHRpb25zLm5hbWVTdHJhdGVneSA9PT0gJ3RpdGxlJyA/XG4gICAgICAgIG9wdGlvbnMubmFtZVxuICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICBpZiAodGl0bGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBtYWluLnRpdGxlID0gdGl0bGU7XG4gICAgfVxuICAgIGNvbnN0IGRlZmluaXRpb25zID0gKCgpID0+IHtcbiAgICAgICAgaWYgKGlzRW1wdHlPYmoocmVmcy5kZWZpbml0aW9ucykpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGVmaW5pdGlvbnMgPSB7fTtcbiAgICAgICAgY29uc3QgcHJvY2Vzc2VkRGVmaW5pdGlvbnMgPSBuZXcgU2V0KCk7XG4gICAgICAgIC8vIHRoZSBjYWxsIHRvIGBwYXJzZURlZigpYCBoZXJlIG1pZ2h0IGl0c2VsZiBhZGQgbW9yZSBlbnRyaWVzIHRvIGAuZGVmaW5pdGlvbnNgXG4gICAgICAgIC8vIHNvIHdlIG5lZWQgdG8gY29udGludWFsbHkgZXZhbHVhdGUgZGVmaW5pdGlvbnMgdW50aWwgd2UndmUgcmVzb2x2ZWQgYWxsIG9mIHRoZW1cbiAgICAgICAgLy9cbiAgICAgICAgLy8gd2UgaGF2ZSBhIGdlbmVyb3VzIGl0ZXJhdGlvbiBsaW1pdCBoZXJlIHRvIGF2b2lkIGJsb3dpbmcgdXAgdGhlIHN0YWNrIGlmIHRoZXJlXG4gICAgICAgIC8vIGFyZSBhbnkgYnVncyB0aGF0IHdvdWxkIG90aGVyd2lzZSByZXN1bHQgaW4gdXMgaXRlcmF0aW5nIGluZGVmaW5pdGVseVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDUwMDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBuZXdEZWZpbml0aW9ucyA9IE9iamVjdC5lbnRyaWVzKHJlZnMuZGVmaW5pdGlvbnMpLmZpbHRlcigoW2tleV0pID0+ICFwcm9jZXNzZWREZWZpbml0aW9ucy5oYXMoa2V5KSk7XG4gICAgICAgICAgICBpZiAobmV3RGVmaW5pdGlvbnMubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZm9yIChjb25zdCBba2V5LCBzY2hlbWFdIG9mIG5ld0RlZmluaXRpb25zKSB7XG4gICAgICAgICAgICAgICAgZGVmaW5pdGlvbnNba2V5XSA9XG4gICAgICAgICAgICAgICAgICAgIHBhcnNlRGVmKHpvZERlZihzY2hlbWEpLCB7IC4uLnJlZnMsIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5iYXNlUGF0aCwgcmVmcy5kZWZpbml0aW9uUGF0aCwga2V5XSB9LCB0cnVlKSA/PyB7fTtcbiAgICAgICAgICAgICAgICBwcm9jZXNzZWREZWZpbml0aW9ucy5hZGQoa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGVmaW5pdGlvbnM7XG4gICAgfSkoKTtcbiAgICBjb25zdCBjb21iaW5lZCA9IG5hbWUgPT09IHVuZGVmaW5lZCA/XG4gICAgICAgIGRlZmluaXRpb25zID9cbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAuLi5tYWluLFxuICAgICAgICAgICAgICAgIFtyZWZzLmRlZmluaXRpb25QYXRoXTogZGVmaW5pdGlvbnMsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA6IG1haW5cbiAgICAgICAgOiByZWZzLm5hbWVTdHJhdGVneSA9PT0gJ2R1cGxpY2F0ZS1yZWYnID9cbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAuLi5tYWluLFxuICAgICAgICAgICAgICAgIC4uLihkZWZpbml0aW9ucyB8fCByZWZzLnNlZW5SZWZzLnNpemUgP1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBbcmVmcy5kZWZpbml0aW9uUGF0aF06IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5kZWZpbml0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvbmx5IGFjdHVhbGx5IGR1cGxpY2F0ZSB0aGUgc2NoZW1hIGRlZmluaXRpb24gaWYgaXQgd2FzIGV2ZXIgcmVmZXJlbmNlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG90aGVyd2lzZSB0aGUgZHVwbGljYXRpb24gaXMgY29tcGxldGVseSBwb2ludGxlc3NcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi4ocmVmcy5zZWVuUmVmcy5zaXplID8geyBbbmFtZV06IG1haW4gfSA6IHVuZGVmaW5lZCksXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkKSxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDoge1xuICAgICAgICAgICAgICAgICRyZWY6IFsuLi4ocmVmcy4kcmVmU3RyYXRlZ3kgPT09ICdyZWxhdGl2ZScgPyBbXSA6IHJlZnMuYmFzZVBhdGgpLCByZWZzLmRlZmluaXRpb25QYXRoLCBuYW1lXS5qb2luKCcvJyksXG4gICAgICAgICAgICAgICAgW3JlZnMuZGVmaW5pdGlvblBhdGhdOiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLmRlZmluaXRpb25zLFxuICAgICAgICAgICAgICAgICAgICBbbmFtZV06IG1haW4sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnanNvblNjaGVtYTcnKSB7XG4gICAgICAgIGNvbWJpbmVkLiRzY2hlbWEgPSAnaHR0cDovL2pzb24tc2NoZW1hLm9yZy9kcmFmdC0wNy9zY2hlbWEjJztcbiAgICB9XG4gICAgZWxzZSBpZiAocmVmcy50YXJnZXQgPT09ICdqc29uU2NoZW1hMjAxOS0wOScpIHtcbiAgICAgICAgY29tYmluZWQuJHNjaGVtYSA9ICdodHRwczovL2pzb24tc2NoZW1hLm9yZy9kcmFmdC8yMDE5LTA5L3NjaGVtYSMnO1xuICAgIH1cbiAgICByZXR1cm4gY29tYmluZWQ7XG59O1xuZXhwb3J0IHsgem9kVG9Kc29uU2NoZW1hIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD16b2RUb0pzb25TY2hlbWEubWpzLm1hcCIsImltcG9ydCB7IE9wZW5BSUVycm9yIH0gZnJvbSBcIi4uL2Vycm9yLm1qc1wiO1xuaW1wb3J0IHsgaXNBdXRvUGFyc2FibGVSZXNwb25zZUZvcm1hdCB9IGZyb20gXCIuLi9saWIvcGFyc2VyLm1qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIG1heWJlUGFyc2VSZXNwb25zZShyZXNwb25zZSwgcGFyYW1zKSB7XG4gICAgaWYgKCFwYXJhbXMgfHwgIWhhc0F1dG9QYXJzZWFibGVJbnB1dChwYXJhbXMpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5yZXNwb25zZSxcbiAgICAgICAgICAgIG91dHB1dF9wYXJzZWQ6IG51bGwsXG4gICAgICAgICAgICBvdXRwdXQ6IHJlc3BvbnNlLm91dHB1dC5tYXAoKGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnZnVuY3Rpb25fY2FsbCcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLml0ZW0sXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZWRfYXJndW1lbnRzOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnbWVzc2FnZScpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLml0ZW0sXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBpdGVtLmNvbnRlbnQubWFwKChjb250ZW50KSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VkOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBwYXJzZVJlc3BvbnNlKHJlc3BvbnNlLCBwYXJhbXMpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlUmVzcG9uc2UocmVzcG9uc2UsIHBhcmFtcykge1xuICAgIGNvbnN0IG91dHB1dCA9IHJlc3BvbnNlLm91dHB1dC5tYXAoKGl0ZW0pID0+IHtcbiAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2Z1bmN0aW9uX2NhbGwnKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIC4uLml0ZW0sXG4gICAgICAgICAgICAgICAgcGFyc2VkX2FyZ3VtZW50czogcGFyc2VUb29sQ2FsbChwYXJhbXMsIGl0ZW0pLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnbWVzc2FnZScpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBpdGVtLmNvbnRlbnQubWFwKChjb250ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQudHlwZSA9PT0gJ291dHB1dF90ZXh0Jykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uY29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlZDogcGFyc2VUZXh0Rm9ybWF0KHBhcmFtcywgY29udGVudC50ZXh0KSxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgICAgICAgICBjb250ZW50LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaXRlbTtcbiAgICB9KTtcbiAgICBjb25zdCBwYXJzZWQgPSBPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZSwgeyBvdXRwdXQgfSk7XG4gICAgaWYgKCFPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHJlc3BvbnNlLCAnb3V0cHV0X3RleHQnKSkge1xuICAgICAgICBhZGRPdXRwdXRUZXh0KHBhcnNlZCk7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwYXJzZWQsICdvdXRwdXRfcGFyc2VkJywge1xuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG91dHB1dCBvZiBwYXJzZWQub3V0cHV0KSB7XG4gICAgICAgICAgICAgICAgaWYgKG91dHB1dC50eXBlICE9PSAnbWVzc2FnZScpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgY29udGVudCBvZiBvdXRwdXQuY29udGVudCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudC50eXBlID09PSAnb3V0cHV0X3RleHQnICYmIGNvbnRlbnQucGFyc2VkICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGVudC5wYXJzZWQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICByZXR1cm4gcGFyc2VkO1xufVxuZnVuY3Rpb24gcGFyc2VUZXh0Rm9ybWF0KHBhcmFtcywgY29udGVudCkge1xuICAgIGlmIChwYXJhbXMudGV4dD8uZm9ybWF0Py50eXBlICE9PSAnanNvbl9zY2hlbWEnKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBpZiAoJyRwYXJzZVJhdycgaW4gcGFyYW1zLnRleHQ/LmZvcm1hdCkge1xuICAgICAgICBjb25zdCB0ZXh0X2Zvcm1hdCA9IHBhcmFtcy50ZXh0Py5mb3JtYXQ7XG4gICAgICAgIHJldHVybiB0ZXh0X2Zvcm1hdC4kcGFyc2VSYXcoY29udGVudCk7XG4gICAgfVxuICAgIHJldHVybiBKU09OLnBhcnNlKGNvbnRlbnQpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGhhc0F1dG9QYXJzZWFibGVJbnB1dChwYXJhbXMpIHtcbiAgICBpZiAoaXNBdXRvUGFyc2FibGVSZXNwb25zZUZvcm1hdChwYXJhbXMudGV4dD8uZm9ybWF0KSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VQYXJzZWFibGVSZXNwb25zZVRvb2wodG9vbCwgeyBwYXJzZXIsIGNhbGxiYWNrLCB9KSB7XG4gICAgY29uc3Qgb2JqID0geyAuLi50b29sIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMob2JqLCB7XG4gICAgICAgICRicmFuZDoge1xuICAgICAgICAgICAgdmFsdWU6ICdhdXRvLXBhcnNlYWJsZS10b29sJyxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgICAkcGFyc2VSYXc6IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZXIsXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgICAgJGNhbGxiYWNrOiB7XG4gICAgICAgICAgICB2YWx1ZTogY2FsbGJhY2ssXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICByZXR1cm4gb2JqO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzQXV0b1BhcnNhYmxlVG9vbCh0b29sKSB7XG4gICAgcmV0dXJuIHRvb2w/LlsnJGJyYW5kJ10gPT09ICdhdXRvLXBhcnNlYWJsZS10b29sJztcbn1cbmZ1bmN0aW9uIGdldElucHV0VG9vbEJ5TmFtZShpbnB1dF90b29scywgbmFtZSkge1xuICAgIHJldHVybiBpbnB1dF90b29scy5maW5kKCh0b29sKSA9PiB0b29sLnR5cGUgPT09ICdmdW5jdGlvbicgJiYgdG9vbC5uYW1lID09PSBuYW1lKTtcbn1cbmZ1bmN0aW9uIHBhcnNlVG9vbENhbGwocGFyYW1zLCB0b29sQ2FsbCkge1xuICAgIGNvbnN0IGlucHV0VG9vbCA9IGdldElucHV0VG9vbEJ5TmFtZShwYXJhbXMudG9vbHMgPz8gW10sIHRvb2xDYWxsLm5hbWUpO1xuICAgIHJldHVybiB7XG4gICAgICAgIC4uLnRvb2xDYWxsLFxuICAgICAgICAuLi50b29sQ2FsbCxcbiAgICAgICAgcGFyc2VkX2FyZ3VtZW50czogaXNBdXRvUGFyc2FibGVUb29sKGlucHV0VG9vbCkgPyBpbnB1dFRvb2wuJHBhcnNlUmF3KHRvb2xDYWxsLmFyZ3VtZW50cylcbiAgICAgICAgICAgIDogaW5wdXRUb29sPy5zdHJpY3QgPyBKU09OLnBhcnNlKHRvb2xDYWxsLmFyZ3VtZW50cylcbiAgICAgICAgICAgICAgICA6IG51bGwsXG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzaG91bGRQYXJzZVRvb2xDYWxsKHBhcmFtcywgdG9vbENhbGwpIHtcbiAgICBpZiAoIXBhcmFtcykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IGlucHV0VG9vbCA9IGdldElucHV0VG9vbEJ5TmFtZShwYXJhbXMudG9vbHMgPz8gW10sIHRvb2xDYWxsLm5hbWUpO1xuICAgIHJldHVybiBpc0F1dG9QYXJzYWJsZVRvb2woaW5wdXRUb29sKSB8fCBpbnB1dFRvb2w/LnN0cmljdCB8fCBmYWxzZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUlucHV0VG9vbHModG9vbHMpIHtcbiAgICBmb3IgKGNvbnN0IHRvb2wgb2YgdG9vbHMgPz8gW10pIHtcbiAgICAgICAgaWYgKHRvb2wudHlwZSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE9wZW5BSUVycm9yKGBDdXJyZW50bHkgb25seSBcXGBmdW5jdGlvblxcYCB0b29sIHR5cGVzIHN1cHBvcnQgYXV0by1wYXJzaW5nOyBSZWNlaXZlZCBcXGAke3Rvb2wudHlwZX1cXGBgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodG9vbC5mdW5jdGlvbi5zdHJpY3QgIT09IHRydWUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBPcGVuQUlFcnJvcihgVGhlIFxcYCR7dG9vbC5mdW5jdGlvbi5uYW1lfVxcYCB0b29sIGlzIG5vdCBtYXJrZWQgd2l0aCBcXGBzdHJpY3Q6IHRydWVcXGAuIE9ubHkgc3RyaWN0IGZ1bmN0aW9uIHRvb2xzIGNhbiBiZSBhdXRvLXBhcnNlZGApO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGFkZE91dHB1dFRleHQocnNwKSB7XG4gICAgY29uc3QgdGV4dHMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IG91dHB1dCBvZiByc3Aub3V0cHV0KSB7XG4gICAgICAgIGlmIChvdXRwdXQudHlwZSAhPT0gJ21lc3NhZ2UnKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGNvbnRlbnQgb2Ygb3V0cHV0LmNvbnRlbnQpIHtcbiAgICAgICAgICAgIGlmIChjb250ZW50LnR5cGUgPT09ICdvdXRwdXRfdGV4dCcpIHtcbiAgICAgICAgICAgICAgICB0ZXh0cy5wdXNoKGNvbnRlbnQudGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcnNwLm91dHB1dF90ZXh0ID0gdGV4dHMuam9pbignJyk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1SZXNwb25zZXNQYXJzZXIubWpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiB0b1N0cmljdEpzb25TY2hlbWEoc2NoZW1hKSB7XG4gICAgaWYgKHNjaGVtYS50eXBlICE9PSAnb2JqZWN0Jykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFJvb3Qgc2NoZW1hIG11c3QgaGF2ZSB0eXBlOiAnb2JqZWN0JyBidXQgZ290IHR5cGU6ICR7c2NoZW1hLnR5cGUgPyBgJyR7c2NoZW1hLnR5cGV9J2AgOiAndW5kZWZpbmVkJ31gKTtcbiAgICB9XG4gICAgY29uc3Qgc2NoZW1hQ29weSA9IHN0cnVjdHVyZWRDbG9uZShzY2hlbWEpO1xuICAgIHJldHVybiBlbnN1cmVTdHJpY3RKc29uU2NoZW1hKHNjaGVtYUNvcHksIFtdLCBzY2hlbWFDb3B5KTtcbn1cbmZ1bmN0aW9uIGlzTnVsbGFibGUoc2NoZW1hKSB7XG4gICAgaWYgKHR5cGVvZiBzY2hlbWEgPT09ICdib29sZWFuJykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChzY2hlbWEudHlwZSA9PT0gJ251bGwnKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IG9uZU9mVmFyaWFudCBvZiBzY2hlbWEub25lT2YgPz8gW10pIHtcbiAgICAgICAgaWYgKGlzTnVsbGFibGUob25lT2ZWYXJpYW50KSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBhbGxPZlZhcmlhbnQgb2Ygc2NoZW1hLmFueU9mID8/IFtdKSB7XG4gICAgICAgIGlmIChpc051bGxhYmxlKGFsbE9mVmFyaWFudCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbi8qKlxuICogTXV0YXRlcyB0aGUgZ2l2ZW4gSlNPTiBzY2hlbWEgdG8gZW5zdXJlIGl0IGNvbmZvcm1zIHRvIHRoZSBgc3RyaWN0YCBzdGFuZGFyZFxuICogdGhhdCB0aGUgQVBJIGV4cGVjdHMuXG4gKi9cbmZ1bmN0aW9uIGVuc3VyZVN0cmljdEpzb25TY2hlbWEoanNvblNjaGVtYSwgcGF0aCwgcm9vdCkge1xuICAgIGlmICh0eXBlb2YganNvblNjaGVtYSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYEV4cGVjdGVkIG9iamVjdCBzY2hlbWEgYnV0IGdvdCBib29sZWFuOyBwYXRoPSR7cGF0aC5qb2luKCcvJyl9YCk7XG4gICAgfVxuICAgIGlmICghaXNPYmplY3QoanNvblNjaGVtYSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgRXhwZWN0ZWQgJHtKU09OLnN0cmluZ2lmeShqc29uU2NoZW1hKX0gdG8gYmUgYW4gb2JqZWN0OyBwYXRoPSR7cGF0aC5qb2luKCcvJyl9YCk7XG4gICAgfVxuICAgIC8vIEhhbmRsZSAkZGVmcyAobm9uLXN0YW5kYXJkIGJ1dCBzb21ldGltZXMgdXNlZClcbiAgICBjb25zdCBkZWZzID0ganNvblNjaGVtYS4kZGVmcztcbiAgICBpZiAoaXNPYmplY3QoZGVmcykpIHtcbiAgICAgICAgZm9yIChjb25zdCBbZGVmTmFtZSwgZGVmU2NoZW1hXSBvZiBPYmplY3QuZW50cmllcyhkZWZzKSkge1xuICAgICAgICAgICAgZW5zdXJlU3RyaWN0SnNvblNjaGVtYShkZWZTY2hlbWEsIFsuLi5wYXRoLCAnJGRlZnMnLCBkZWZOYW1lXSwgcm9vdCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gSGFuZGxlIGRlZmluaXRpb25zIChkcmFmdC0wNCBzdHlsZSwgZGVwcmVjYXRlZCBpbiBkcmFmdC0wNyBidXQgc3RpbGwgdXNlZClcbiAgICBjb25zdCBkZWZpbml0aW9ucyA9IGpzb25TY2hlbWEuZGVmaW5pdGlvbnM7XG4gICAgaWYgKGlzT2JqZWN0KGRlZmluaXRpb25zKSkge1xuICAgICAgICBmb3IgKGNvbnN0IFtkZWZpbml0aW9uTmFtZSwgZGVmaW5pdGlvblNjaGVtYV0gb2YgT2JqZWN0LmVudHJpZXMoZGVmaW5pdGlvbnMpKSB7XG4gICAgICAgICAgICBlbnN1cmVTdHJpY3RKc29uU2NoZW1hKGRlZmluaXRpb25TY2hlbWEsIFsuLi5wYXRoLCAnZGVmaW5pdGlvbnMnLCBkZWZpbml0aW9uTmFtZV0sIHJvb3QpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIEFkZCBhZGRpdGlvbmFsUHJvcGVydGllczogZmFsc2UgdG8gb2JqZWN0IHR5cGVzXG4gICAgY29uc3QgdHlwID0ganNvblNjaGVtYS50eXBlO1xuICAgIGlmICh0eXAgPT09ICdvYmplY3QnICYmICEoJ2FkZGl0aW9uYWxQcm9wZXJ0aWVzJyBpbiBqc29uU2NoZW1hKSkge1xuICAgICAgICBqc29uU2NoZW1hLmFkZGl0aW9uYWxQcm9wZXJ0aWVzID0gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IHJlcXVpcmVkID0ganNvblNjaGVtYS5yZXF1aXJlZCA/PyBbXTtcbiAgICAvLyBIYW5kbGUgb2JqZWN0IHByb3BlcnRpZXNcbiAgICBjb25zdCBwcm9wZXJ0aWVzID0ganNvblNjaGVtYS5wcm9wZXJ0aWVzO1xuICAgIGlmIChpc09iamVjdChwcm9wZXJ0aWVzKSkge1xuICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhwcm9wZXJ0aWVzKSkge1xuICAgICAgICAgICAgaWYgKCFpc051bGxhYmxlKHZhbHVlKSAmJiAhcmVxdWlyZWQuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgWm9kIGZpZWxkIGF0IFxcYCR7Wy4uLnBhdGgsICdwcm9wZXJ0aWVzJywga2V5XS5qb2luKCcvJyl9XFxgIHVzZXMgXFxgLm9wdGlvbmFsKClcXGAgd2l0aG91dCBcXGAubnVsbGFibGUoKVxcYCB3aGljaCBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoZSBBUEkuIFNlZTogaHR0cHM6Ly9wbGF0Zm9ybS5vcGVuYWkuY29tL2RvY3MvZ3VpZGVzL3N0cnVjdHVyZWQtb3V0cHV0cz9hcGktbW9kZT1yZXNwb25zZXMjYWxsLWZpZWxkcy1tdXN0LWJlLXJlcXVpcmVkYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAganNvblNjaGVtYS5yZXF1aXJlZCA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpO1xuICAgICAgICBqc29uU2NoZW1hLnByb3BlcnRpZXMgPSBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMocHJvcGVydGllcykubWFwKChba2V5LCBwcm9wU2NoZW1hXSkgPT4gW1xuICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgZW5zdXJlU3RyaWN0SnNvblNjaGVtYShwcm9wU2NoZW1hLCBbLi4ucGF0aCwgJ3Byb3BlcnRpZXMnLCBrZXldLCByb290KSxcbiAgICAgICAgXSkpO1xuICAgIH1cbiAgICAvLyBIYW5kbGUgYXJyYXlzXG4gICAgY29uc3QgaXRlbXMgPSBqc29uU2NoZW1hLml0ZW1zO1xuICAgIGlmIChpc09iamVjdChpdGVtcykpIHtcbiAgICAgICAganNvblNjaGVtYS5pdGVtcyA9IGVuc3VyZVN0cmljdEpzb25TY2hlbWEoaXRlbXMsIFsuLi5wYXRoLCAnaXRlbXMnXSwgcm9vdCk7XG4gICAgfVxuICAgIC8vIEhhbmRsZSB1bmlvbnMgKGFueU9mKVxuICAgIGNvbnN0IGFueU9mID0ganNvblNjaGVtYS5hbnlPZjtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShhbnlPZikpIHtcbiAgICAgICAganNvblNjaGVtYS5hbnlPZiA9IGFueU9mLm1hcCgodmFyaWFudCwgaSkgPT4gZW5zdXJlU3RyaWN0SnNvblNjaGVtYSh2YXJpYW50LCBbLi4ucGF0aCwgJ2FueU9mJywgU3RyaW5nKGkpXSwgcm9vdCkpO1xuICAgIH1cbiAgICAvLyBIYW5kbGUgaW50ZXJzZWN0aW9ucyAoYWxsT2YpXG4gICAgY29uc3QgYWxsT2YgPSBqc29uU2NoZW1hLmFsbE9mO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGFsbE9mKSkge1xuICAgICAgICBpZiAoYWxsT2YubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICBjb25zdCByZXNvbHZlZCA9IGVuc3VyZVN0cmljdEpzb25TY2hlbWEoYWxsT2ZbMF0sIFsuLi5wYXRoLCAnYWxsT2YnLCAnMCddLCByb290KTtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oanNvblNjaGVtYSwgcmVzb2x2ZWQpO1xuICAgICAgICAgICAgZGVsZXRlIGpzb25TY2hlbWEuYWxsT2Y7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBqc29uU2NoZW1hLmFsbE9mID0gYWxsT2YubWFwKChlbnRyeSwgaSkgPT4gZW5zdXJlU3RyaWN0SnNvblNjaGVtYShlbnRyeSwgWy4uLnBhdGgsICdhbGxPZicsIFN0cmluZyhpKV0sIHJvb3QpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBTdHJpcCBgbnVsbGAgZGVmYXVsdHMgYXMgdGhlcmUncyBubyBtZWFuaW5nZnVsIGRpc3RpbmN0aW9uXG4gICAgaWYgKGpzb25TY2hlbWEuZGVmYXVsdCA9PT0gbnVsbCkge1xuICAgICAgICBkZWxldGUganNvblNjaGVtYS5kZWZhdWx0O1xuICAgIH1cbiAgICAvLyBIYW5kbGUgJHJlZiB3aXRoIGFkZGl0aW9uYWwgcHJvcGVydGllc1xuICAgIGNvbnN0IHJlZiA9IGpzb25TY2hlbWEuJHJlZjtcbiAgICBpZiAocmVmICYmIGhhc01vcmVUaGFuTktleXMoanNvblNjaGVtYSwgMSkpIHtcbiAgICAgICAgaWYgKHR5cGVvZiByZWYgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBSZWNlaXZlZCBub24tc3RyaW5nICRyZWYgLSAke3JlZn07IHBhdGg9JHtwYXRoLmpvaW4oJy8nKX1gKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXNvbHZlZCA9IHJlc29sdmVSZWYocm9vdCwgcmVmKTtcbiAgICAgICAgaWYgKHR5cGVvZiByZXNvbHZlZCA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEV4cGVjdGVkIFxcYCRyZWY6ICR7cmVmfVxcYCB0byByZXNvbHZlIHRvIGFuIG9iamVjdCBzY2hlbWEgYnV0IGdvdCBib29sZWFuYCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpc09iamVjdChyZXNvbHZlZCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRXhwZWN0ZWQgXFxgJHJlZjogJHtyZWZ9XFxgIHRvIHJlc29sdmUgdG8gYW4gb2JqZWN0IGJ1dCBnb3QgJHtKU09OLnN0cmluZ2lmeShyZXNvbHZlZCl9YCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUHJvcGVydGllcyBmcm9tIHRoZSBqc29uIHNjaGVtYSB0YWtlIHByaW9yaXR5IG92ZXIgdGhlIG9uZXMgb24gdGhlIGAkcmVmYFxuICAgICAgICBPYmplY3QuYXNzaWduKGpzb25TY2hlbWEsIHsgLi4ucmVzb2x2ZWQsIC4uLmpzb25TY2hlbWEgfSk7XG4gICAgICAgIGRlbGV0ZSBqc29uU2NoZW1hLiRyZWY7XG4gICAgICAgIC8vIFNpbmNlIHRoZSBzY2hlbWEgZXhwYW5kZWQgZnJvbSBgJHJlZmAgbWlnaHQgbm90IGhhdmUgYGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiBmYWxzZWAgYXBwbGllZCxcbiAgICAgICAgLy8gd2UgY2FsbCBgZW5zdXJlU3RyaWN0SnNvblNjaGVtYWAgYWdhaW4gdG8gZml4IHRoZSBpbmxpbmVkIHNjaGVtYSBhbmQgZW5zdXJlIGl0J3MgdmFsaWQuXG4gICAgICAgIHJldHVybiBlbnN1cmVTdHJpY3RKc29uU2NoZW1hKGpzb25TY2hlbWEsIHBhdGgsIHJvb3QpO1xuICAgIH1cbiAgICByZXR1cm4ganNvblNjaGVtYTtcbn1cbmZ1bmN0aW9uIHJlc29sdmVSZWYocm9vdCwgcmVmKSB7XG4gICAgaWYgKCFyZWYuc3RhcnRzV2l0aCgnIy8nKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuZXhwZWN0ZWQgJHJlZiBmb3JtYXQgJHtKU09OLnN0cmluZ2lmeShyZWYpfTsgRG9lcyBub3Qgc3RhcnQgd2l0aCAjL2ApO1xuICAgIH1cbiAgICBjb25zdCBwYXRoUGFydHMgPSByZWYuc2xpY2UoMikuc3BsaXQoJy8nKTtcbiAgICBsZXQgcmVzb2x2ZWQgPSByb290O1xuICAgIGZvciAoY29uc3Qga2V5IG9mIHBhdGhQYXJ0cykge1xuICAgICAgICBpZiAoIWlzT2JqZWN0KHJlc29sdmVkKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBlbmNvdW50ZXJlZCBub24tb2JqZWN0IGVudHJ5IHdoaWxlIHJlc29sdmluZyAke3JlZn0gLSAke0pTT04uc3RyaW5naWZ5KHJlc29sdmVkKX1gKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB2YWx1ZSA9IHJlc29sdmVkW2tleV07XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEtleSAke2tleX0gbm90IGZvdW5kIHdoaWxlIHJlc29sdmluZyAke3JlZn1gKTtcbiAgICAgICAgfVxuICAgICAgICByZXNvbHZlZCA9IHZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gcmVzb2x2ZWQ7XG59XG5mdW5jdGlvbiBpc09iamVjdChvYmopIHtcbiAgICByZXR1cm4gdHlwZW9mIG9iaiA9PT0gJ29iamVjdCcgJiYgb2JqICE9PSBudWxsICYmICFBcnJheS5pc0FycmF5KG9iaik7XG59XG5mdW5jdGlvbiBoYXNNb3JlVGhhbk5LZXlzKG9iaiwgbikge1xuICAgIGxldCBpID0gMDtcbiAgICBmb3IgKGNvbnN0IF8gaW4gb2JqKSB7XG4gICAgICAgIGkrKztcbiAgICAgICAgaWYgKGkgPiBuKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10cmFuc2Zvcm0ubWpzLm1hcCIsImltcG9ydCAqIGFzIHo0IGZyb20gJ3pvZC92NCc7XG5pbXBvcnQgeyBtYWtlUGFyc2VhYmxlUmVzcG9uc2VGb3JtYXQsIG1ha2VQYXJzZWFibGVUZXh0Rm9ybWF0LCBtYWtlUGFyc2VhYmxlVG9vbCwgfSBmcm9tIFwiLi4vbGliL3BhcnNlci5tanNcIjtcbmltcG9ydCB7IHpvZFRvSnNvblNjaGVtYSBhcyBfem9kVG9Kc29uU2NoZW1hIH0gZnJvbSBcIi4uL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgbWFrZVBhcnNlYWJsZVJlc3BvbnNlVG9vbCB9IGZyb20gXCIuLi9saWIvUmVzcG9uc2VzUGFyc2VyLm1qc1wiO1xuaW1wb3J0IHsgdG9TdHJpY3RKc29uU2NoZW1hIH0gZnJvbSBcIi4uL2xpYi90cmFuc2Zvcm0ubWpzXCI7XG5mdW5jdGlvbiB6b2RWM1RvSnNvblNjaGVtYShzY2hlbWEsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gX3pvZFRvSnNvblNjaGVtYShzY2hlbWEsIHtcbiAgICAgICAgb3BlbmFpU3RyaWN0TW9kZTogdHJ1ZSxcbiAgICAgICAgbmFtZTogb3B0aW9ucy5uYW1lLFxuICAgICAgICBuYW1lU3RyYXRlZ3k6ICdkdXBsaWNhdGUtcmVmJyxcbiAgICAgICAgJHJlZlN0cmF0ZWd5OiAnZXh0cmFjdC10by1yb290JyxcbiAgICAgICAgbnVsbGFibGVTdHJhdGVneTogJ3Byb3BlcnR5JyxcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIHpvZFY0VG9Kc29uU2NoZW1hKHNjaGVtYSkge1xuICAgIHJldHVybiB0b1N0cmljdEpzb25TY2hlbWEoejQudG9KU09OU2NoZW1hKHNjaGVtYSwge1xuICAgICAgICB0YXJnZXQ6ICdkcmFmdC03JyxcbiAgICB9KSk7XG59XG5mdW5jdGlvbiBpc1pvZFY0KHpvZE9iamVjdCkge1xuICAgIHJldHVybiAnX3pvZCcgaW4gem9kT2JqZWN0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgY2hhdCBjb21wbGV0aW9uIGBKU09OU2NoZW1hYCByZXNwb25zZSBmb3JtYXQgb2JqZWN0IGZyb21cbiAqIHRoZSBnaXZlbiBab2Qgc2NoZW1hLlxuICpcbiAqIElmIHRoaXMgaXMgcGFzc2VkIHRvIHRoZSBgLnBhcnNlKClgLCBgLnN0cmVhbSgpYCBvciBgLnJ1blRvb2xzKClgXG4gKiBjaGF0IGNvbXBsZXRpb24gbWV0aG9kcyB0aGVuIHRoZSByZXNwb25zZSBtZXNzYWdlIHdpbGwgY29udGFpbiBhXG4gKiBgLnBhcnNlZGAgcHJvcGVydHkgdGhhdCBpcyB0aGUgcmVzdWx0IG9mIHBhcnNpbmcgdGhlIGNvbnRlbnQgd2l0aFxuICogdGhlIGdpdmVuIFpvZCBvYmplY3QuXG4gKlxuICogYGBgdHNcbiAqIGNvbnN0IGNvbXBsZXRpb24gPSBhd2FpdCBjbGllbnQuY2hhdC5jb21wbGV0aW9ucy5wYXJzZSh7XG4gKiAgICBtb2RlbDogJ2dwdC00by0yMDI0LTA4LTA2JyxcbiAqICAgIG1lc3NhZ2VzOiBbXG4gKiAgICAgIHsgcm9sZTogJ3N5c3RlbScsIGNvbnRlbnQ6ICdZb3UgYXJlIGEgaGVscGZ1bCBtYXRoIHR1dG9yLicgfSxcbiAqICAgICAgeyByb2xlOiAndXNlcicsIGNvbnRlbnQ6ICdzb2x2ZSA4eCArIDMxID0gMicgfSxcbiAqICAgIF0sXG4gKiAgICByZXNwb25zZV9mb3JtYXQ6IHpvZFJlc3BvbnNlRm9ybWF0KFxuICogICAgICB6Lm9iamVjdCh7XG4gKiAgICAgICAgc3RlcHM6IHouYXJyYXkoei5vYmplY3Qoe1xuICogICAgICAgICAgZXhwbGFuYXRpb246IHouc3RyaW5nKCksXG4gKiAgICAgICAgICBhbnN3ZXI6IHouc3RyaW5nKCksXG4gKiAgICAgICAgfSkpLFxuICogICAgICAgIGZpbmFsX2Fuc3dlcjogei5zdHJpbmcoKSxcbiAqICAgICAgfSksXG4gKiAgICAgICdtYXRoX2Fuc3dlcicsXG4gKiAgICApLFxuICogIH0pO1xuICogIGNvbnN0IG1lc3NhZ2UgPSBjb21wbGV0aW9uLmNob2ljZXNbMF0/Lm1lc3NhZ2U7XG4gKiAgaWYgKG1lc3NhZ2U/LnBhcnNlZCkge1xuICogICAgY29uc29sZS5sb2cobWVzc2FnZS5wYXJzZWQpO1xuICogICAgY29uc29sZS5sb2cobWVzc2FnZS5wYXJzZWQuZmluYWxfYW5zd2VyKTtcbiAqIH1cbiAqIGBgYFxuICpcbiAqIFRoaXMgY2FuIGJlIHBhc3NlZCBkaXJlY3RseSB0byB0aGUgYC5jcmVhdGUoKWAgbWV0aG9kIGJ1dCB3aWxsIG5vdFxuICogcmVzdWx0IGluIGFueSBhdXRvbWF0aWMgcGFyc2luZywgeW91J2xsIGhhdmUgdG8gcGFyc2UgdGhlIHJlc3BvbnNlIHlvdXJzZWxmLlxuICovXG5leHBvcnQgZnVuY3Rpb24gem9kUmVzcG9uc2VGb3JtYXQoem9kT2JqZWN0LCBuYW1lLCBwcm9wcykge1xuICAgIHJldHVybiBtYWtlUGFyc2VhYmxlUmVzcG9uc2VGb3JtYXQoe1xuICAgICAgICB0eXBlOiAnanNvbl9zY2hlbWEnLFxuICAgICAgICBqc29uX3NjaGVtYToge1xuICAgICAgICAgICAgLi4ucHJvcHMsXG4gICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgc3RyaWN0OiB0cnVlLFxuICAgICAgICAgICAgc2NoZW1hOiBpc1pvZFY0KHpvZE9iamVjdCkgPyB6b2RWNFRvSnNvblNjaGVtYSh6b2RPYmplY3QpIDogem9kVjNUb0pzb25TY2hlbWEoem9kT2JqZWN0LCB7IG5hbWUgfSksXG4gICAgICAgIH0sXG4gICAgfSwgKGNvbnRlbnQpID0+IHpvZE9iamVjdC5wYXJzZShKU09OLnBhcnNlKGNvbnRlbnQpKSk7XG59XG5leHBvcnQgZnVuY3Rpb24gem9kVGV4dEZvcm1hdCh6b2RPYmplY3QsIG5hbWUsIHByb3BzKSB7XG4gICAgcmV0dXJuIG1ha2VQYXJzZWFibGVUZXh0Rm9ybWF0KHtcbiAgICAgICAgdHlwZTogJ2pzb25fc2NoZW1hJyxcbiAgICAgICAgLi4ucHJvcHMsXG4gICAgICAgIG5hbWUsXG4gICAgICAgIHN0cmljdDogdHJ1ZSxcbiAgICAgICAgc2NoZW1hOiBpc1pvZFY0KHpvZE9iamVjdCkgPyB6b2RWNFRvSnNvblNjaGVtYSh6b2RPYmplY3QpIDogem9kVjNUb0pzb25TY2hlbWEoem9kT2JqZWN0LCB7IG5hbWUgfSksXG4gICAgfSwgKGNvbnRlbnQpID0+IHpvZE9iamVjdC5wYXJzZShKU09OLnBhcnNlKGNvbnRlbnQpKSk7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBjaGF0IGNvbXBsZXRpb24gYGZ1bmN0aW9uYCB0b29sIHRoYXQgY2FuIGJlIGludm9rZWRcbiAqIGF1dG9tYXRpY2FsbHkgYnkgdGhlIGNoYXQgY29tcGxldGlvbiBgLnJ1blRvb2xzKClgIG1ldGhvZCBvciBhdXRvbWF0aWNhbGx5XG4gKiBwYXJzZWQgYnkgYC5wYXJzZSgpYCAvIGAuc3RyZWFtKClgLlxuICovXG5leHBvcnQgZnVuY3Rpb24gem9kRnVuY3Rpb24ob3B0aW9ucykge1xuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVE9ET1xuICAgIHJldHVybiBtYWtlUGFyc2VhYmxlVG9vbCh7XG4gICAgICAgIHR5cGU6ICdmdW5jdGlvbicsXG4gICAgICAgIGZ1bmN0aW9uOiB7XG4gICAgICAgICAgICBuYW1lOiBvcHRpb25zLm5hbWUsXG4gICAgICAgICAgICBwYXJhbWV0ZXJzOiBpc1pvZFY0KG9wdGlvbnMucGFyYW1ldGVycykgP1xuICAgICAgICAgICAgICAgIHpvZFY0VG9Kc29uU2NoZW1hKG9wdGlvbnMucGFyYW1ldGVycylcbiAgICAgICAgICAgICAgICA6IHpvZFYzVG9Kc29uU2NoZW1hKG9wdGlvbnMucGFyYW1ldGVycywgeyBuYW1lOiBvcHRpb25zLm5hbWUgfSksXG4gICAgICAgICAgICBzdHJpY3Q6IHRydWUsXG4gICAgICAgICAgICAuLi4ob3B0aW9ucy5kZXNjcmlwdGlvbiA/IHsgZGVzY3JpcHRpb246IG9wdGlvbnMuZGVzY3JpcHRpb24gfSA6IHVuZGVmaW5lZCksXG4gICAgICAgIH0sXG4gICAgfSwge1xuICAgICAgICBjYWxsYmFjazogb3B0aW9ucy5mdW5jdGlvbixcbiAgICAgICAgcGFyc2VyOiAoYXJncykgPT4gb3B0aW9ucy5wYXJhbWV0ZXJzLnBhcnNlKEpTT04ucGFyc2UoYXJncykpLFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHpvZFJlc3BvbnNlc0Z1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbWFrZVBhcnNlYWJsZVJlc3BvbnNlVG9vbCh7XG4gICAgICAgIHR5cGU6ICdmdW5jdGlvbicsXG4gICAgICAgIG5hbWU6IG9wdGlvbnMubmFtZSxcbiAgICAgICAgcGFyYW1ldGVyczogaXNab2RWNChvcHRpb25zLnBhcmFtZXRlcnMpID9cbiAgICAgICAgICAgIHpvZFY0VG9Kc29uU2NoZW1hKG9wdGlvbnMucGFyYW1ldGVycylcbiAgICAgICAgICAgIDogem9kVjNUb0pzb25TY2hlbWEob3B0aW9ucy5wYXJhbWV0ZXJzLCB7IG5hbWU6IG9wdGlvbnMubmFtZSB9KSxcbiAgICAgICAgc3RyaWN0OiB0cnVlLFxuICAgICAgICAuLi4ob3B0aW9ucy5kZXNjcmlwdGlvbiA/IHsgZGVzY3JpcHRpb246IG9wdGlvbnMuZGVzY3JpcHRpb24gfSA6IHVuZGVmaW5lZCksXG4gICAgfSwge1xuICAgICAgICBjYWxsYmFjazogb3B0aW9ucy5mdW5jdGlvbixcbiAgICAgICAgcGFyc2VyOiAoYXJncykgPT4gb3B0aW9ucy5wYXJhbWV0ZXJzLnBhcnNlKEpTT04ucGFyc2UoYXJncykpLFxuICAgIH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9em9kLm1qcy5tYXAiLCIvKipcbiAqIEJhc2UgY2xhc3MgZm9yIGFsbCBlcnJvcnMgdGhyb3duIGJ5IHRoZSBsaWJyYXJ5LlxuICovXG5leHBvcnQgY2xhc3MgQWdlbnRzRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgc3RhdGU7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgc3RhdGUpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG4gICAgICAgIHRoaXMubmFtZSA9IG5ldy50YXJnZXQubmFtZTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgIH1cbn1cbi8qKlxuICogU3lzdGVtIGVycm9yIHRocm93biB3aGVuIHRoZSBsaWJyYXJ5IGVuY291bnRlcnMgYW4gZXJyb3IgdGhhdCBpcyBub3QgY2F1c2VkIGJ5IHRoZSB1c2VyJ3NcbiAqIG1pc2NvbmZpZ3VyYXRpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBTeXN0ZW1FcnJvciBleHRlbmRzIEFnZW50c0Vycm9yIHtcbn1cbi8qKlxuICogRXJyb3IgdGhyb3duIHdoZW4gdGhlIG1heGltdW0gbnVtYmVyIG9mIHR1cm5zIGlzIGV4Y2VlZGVkLlxuICovXG5leHBvcnQgY2xhc3MgTWF4VHVybnNFeGNlZWRlZEVycm9yIGV4dGVuZHMgQWdlbnRzRXJyb3Ige1xufVxuLyoqXG4gKiBFcnJvciB0aHJvd24gd2hlbiBhIG1vZGVsIGJlaGF2aW9yIGlzIHVuZXhwZWN0ZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBNb2RlbEJlaGF2aW9yRXJyb3IgZXh0ZW5kcyBBZ2VudHNFcnJvciB7XG59XG4vKipcbiAqIEVycm9yIHRocm93biB3aGVuIGEgbW9kZWwgcHJvZHVjZXMgaW52YWxpZCB0b29sIGlucHV0LlxuICovXG5leHBvcnQgY2xhc3MgSW52YWxpZFRvb2xJbnB1dEVycm9yIGV4dGVuZHMgTW9kZWxCZWhhdmlvckVycm9yIHtcbiAgICAvKiogVGhlIG9yaWdpbmFsIGVycm9yIHRocm93biBkdXJpbmcgdmFsaWRhdGlvbiwgaWYgYW55LiAqL1xuICAgIG9yaWdpbmFsRXJyb3I7XG4gICAgLyoqIENvbnRleHQgZnJvbSB0aGUgdG9vbCBpbnZvY2F0aW9uIHRoYXQgZmFpbGVkLiAqL1xuICAgIHRvb2xJbnZvY2F0aW9uO1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIHN0YXRlLCBvcmlnaW5hbEVycm9yLCB0b29sSW52b2NhdGlvbikge1xuICAgICAgICBzdXBlcihtZXNzYWdlLCBzdGF0ZSk7XG4gICAgICAgIHRoaXMub3JpZ2luYWxFcnJvciA9IG9yaWdpbmFsRXJyb3I7XG4gICAgICAgIHRoaXMudG9vbEludm9jYXRpb24gPSB0b29sSW52b2NhdGlvbjtcbiAgICB9XG59XG4vKipcbiAqIEVycm9yIHRocm93biB3aGVuIHRoZSBlcnJvciBpcyBjYXVzZWQgYnkgdGhlIGxpYnJhcnkgdXNlcidzIG1pc2NvbmZpZ3VyYXRpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBVc2VyRXJyb3IgZXh0ZW5kcyBBZ2VudHNFcnJvciB7XG59XG4vKipcbiAqIEVycm9yIHRocm93biB3aGVuIGEgZ3VhcmRyYWlsIGV4ZWN1dGlvbiBmYWlscy5cbiAqL1xuZXhwb3J0IGNsYXNzIEd1YXJkcmFpbEV4ZWN1dGlvbkVycm9yIGV4dGVuZHMgQWdlbnRzRXJyb3Ige1xuICAgIGVycm9yO1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIGVycm9yLCBzdGF0ZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlLCBzdGF0ZSk7XG4gICAgICAgIHRoaXMuZXJyb3IgPSBlcnJvcjtcbiAgICB9XG59XG4vKipcbiAqIEVycm9yIHRocm93biB3aGVuIGEgdG9vbCBjYWxsIGZhaWxzLlxuICovXG5leHBvcnQgY2xhc3MgVG9vbENhbGxFcnJvciBleHRlbmRzIEFnZW50c0Vycm9yIHtcbiAgICBlcnJvcjtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBlcnJvciwgc3RhdGUpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSwgc3RhdGUpO1xuICAgICAgICB0aGlzLmVycm9yID0gZXJyb3I7XG4gICAgfVxufVxuLyoqXG4gKiBFcnJvciB0aHJvd24gd2hlbiBhbiBpbnB1dCBndWFyZHJhaWwgdHJpcHdpcmUgaXMgdHJpZ2dlcmVkLlxuICovXG5leHBvcnQgY2xhc3MgSW5wdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCBleHRlbmRzIEFnZW50c0Vycm9yIHtcbiAgICByZXN1bHQ7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgcmVzdWx0LCBzdGF0ZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlLCBzdGF0ZSk7XG4gICAgICAgIHRoaXMucmVzdWx0ID0gcmVzdWx0O1xuICAgIH1cbn1cbi8qKlxuICogRXJyb3IgdGhyb3duIHdoZW4gYW4gb3V0cHV0IGd1YXJkcmFpbCB0cmlwd2lyZSBpcyB0cmlnZ2VyZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCBleHRlbmRzIEFnZW50c0Vycm9yIHtcbiAgICByZXN1bHQ7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgcmVzdWx0LCBzdGF0ZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlLCBzdGF0ZSk7XG4gICAgICAgIHRoaXMucmVzdWx0ID0gcmVzdWx0O1xuICAgIH1cbn1cbi8qKlxuICogRXJyb3IgdGhyb3duIHdoZW4gYSB0b29sIGlucHV0IGd1YXJkcmFpbCB0cmlwd2lyZSBpcyB0cmlnZ2VyZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBUb29sSW5wdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCBleHRlbmRzIEFnZW50c0Vycm9yIHtcbiAgICByZXN1bHQ7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgcmVzdWx0LCBzdGF0ZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlLCBzdGF0ZSk7XG4gICAgICAgIHRoaXMucmVzdWx0ID0gcmVzdWx0O1xuICAgIH1cbn1cbi8qKlxuICogRXJyb3IgdGhyb3duIHdoZW4gYSB0b29sIG91dHB1dCBndWFyZHJhaWwgdHJpcHdpcmUgaXMgdHJpZ2dlcmVkLlxuICovXG5leHBvcnQgY2xhc3MgVG9vbE91dHB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkIGV4dGVuZHMgQWdlbnRzRXJyb3Ige1xuICAgIHJlc3VsdDtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCByZXN1bHQsIHN0YXRlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsIHN0YXRlKTtcbiAgICAgICAgdGhpcy5yZXN1bHQgPSByZXN1bHQ7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXJyb3JzLm1qcy5tYXAiLCJleHBvcnQgZnVuY3Rpb24gYXNab2RUeXBlKHNjaGVtYSkge1xuICAgIHJldHVybiBzY2hlbWE7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVhZFpvZERlZmluaXRpb24oaW5wdXQpIHtcbiAgICBpZiAodHlwZW9mIGlucHV0ICE9PSAnb2JqZWN0JyB8fCBpbnB1dCA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25zdCBjYW5kaWRhdGUgPSBpbnB1dDtcbiAgICByZXR1cm4gY2FuZGlkYXRlLl96b2Q/LmRlZiB8fCBjYW5kaWRhdGUuX2RlZiB8fCBjYW5kaWRhdGUuZGVmO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlYWRab2RUeXBlKGlucHV0KSB7XG4gICAgY29uc3QgZGVmID0gcmVhZFpvZERlZmluaXRpb24oaW5wdXQpO1xuICAgIGlmICghZGVmKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbnN0IHJhd1R5cGUgPSAodHlwZW9mIGRlZi50eXBlTmFtZSA9PT0gJ3N0cmluZycgJiYgZGVmLnR5cGVOYW1lKSB8fFxuICAgICAgICAodHlwZW9mIGRlZi50eXBlID09PSAnc3RyaW5nJyAmJiBkZWYudHlwZSk7XG4gICAgaWYgKHR5cGVvZiByYXdUeXBlICE9PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25zdCBsb3dlciA9IHJhd1R5cGUudG9Mb3dlckNhc2UoKTtcbiAgICByZXR1cm4gbG93ZXIuc3RhcnRzV2l0aCgnem9kJykgPyBsb3dlci5zbGljZSgzKSA6IGxvd2VyO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9em9kQ29tcGF0Lm1qcy5tYXAiLCJpbXBvcnQgeyByZWFkWm9kRGVmaW5pdGlvbiwgcmVhZFpvZFR5cGUgfSBmcm9tIFwiLi96b2RDb21wYXQubWpzXCI7XG4vKipcbiAqIFZlcmlmaWVzIHRoYXQgYW4gaW5wdXQgaXMgYSBab2RPYmplY3Qgd2l0aG91dCBuZWVkaW5nIHRvIGhhdmUgWm9kIGF0IHJ1bnRpbWUgc2luY2UgaXQncyBhblxuICogb3B0aW9uYWwgZGVwZW5kZW5jeS5cbiAqIEBwYXJhbSBpbnB1dFxuICogQHJldHVybnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzWm9kT2JqZWN0KGlucHV0KSB7XG4gICAgY29uc3QgZGVmaW5pdGlvbiA9IHJlYWRab2REZWZpbml0aW9uKGlucHV0KTtcbiAgICBpZiAoIWRlZmluaXRpb24pIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCB0eXBlID0gcmVhZFpvZFR5cGUoaW5wdXQpO1xuICAgIHJldHVybiB0eXBlID09PSAnb2JqZWN0Jztcbn1cbi8qKlxuICogVmVyaWZpZXMgdGhhdCBhbiBpbnB1dCBpcyBhbiBvYmplY3Qgd2l0aCBhbiBgaW5wdXRgIHByb3BlcnR5LlxuICogQHBhcmFtIGlucHV0XG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gaXNBZ2VudFRvb2xJbnB1dChpbnB1dCkge1xuICAgIHJldHVybiAodHlwZW9mIGlucHV0ID09PSAnb2JqZWN0JyAmJlxuICAgICAgICBpbnB1dCAhPT0gbnVsbCAmJlxuICAgICAgICAnaW5wdXQnIGluIGlucHV0ICYmXG4gICAgICAgIHR5cGVvZiBpbnB1dC5pbnB1dCA9PT0gJ3N0cmluZycpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHlwZUd1YXJkcy5tanMubWFwIiwiaW1wb3J0IHsgcmVhZFpvZERlZmluaXRpb24sIHJlYWRab2RUeXBlIH0gZnJvbSBcIi4vem9kQ29tcGF0Lm1qc1wiO1xuY29uc3QgSlNPTl9TQ0hFTUFfRFJBRlRfMDcgPSAnaHR0cDovL2pzb24tc2NoZW1hLm9yZy9kcmFmdC0wNy9zY2hlbWEjJztcbmNvbnN0IE9QVElPTkFMX1dSQVBQRVJTID0gbmV3IFNldChbJ29wdGlvbmFsJ10pO1xuY29uc3QgREVDT1JBVE9SX1dSQVBQRVJTID0gbmV3IFNldChbXG4gICAgJ2JyYW5kJyxcbiAgICAnYnJhbmRlZCcsXG4gICAgJ2NhdGNoJyxcbiAgICAnZGVmYXVsdCcsXG4gICAgJ2VmZmVjdHMnLFxuICAgICdwaXBlbGluZScsXG4gICAgJ3BpcGUnLFxuICAgICdwcmVmYXVsdCcsXG4gICAgJ3JlYWRvbmx5JyxcbiAgICAncmVmaW5lbWVudCcsXG4gICAgJ3RyYW5zZm9ybScsXG5dKTtcbi8vIFByaW1pdGl2ZSBsZWFmIG5vZGVzIG1hcCAxOjEgdG8gSlNPTiBTY2hlbWEgdHlwZXM7IGV2ZXJ5dGhpbmcgZWxzZSBpcyBoYW5kbGVkXG4vLyBieSB0aGUgc3BlY2lhbGlzZWQgYnVpbGRlcnMgZnVydGhlciBkb3duLlxuY29uc3QgU0lNUExFX1RZUEVfTUFQUElORyA9IHtcbiAgICBzdHJpbmc6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICBudW1iZXI6IHsgdHlwZTogJ251bWJlcicgfSxcbiAgICBiaWdpbnQ6IHsgdHlwZTogJ2ludGVnZXInIH0sXG4gICAgYm9vbGVhbjogeyB0eXBlOiAnYm9vbGVhbicgfSxcbiAgICBkYXRlOiB7IHR5cGU6ICdzdHJpbmcnLCBmb3JtYXQ6ICdkYXRlLXRpbWUnIH0sXG59O1xuZXhwb3J0IGZ1bmN0aW9uIGhhc0pzb25TY2hlbWFPYmplY3RTaGFwZSh2YWx1ZSkge1xuICAgIHJldHVybiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJlxuICAgICAgICB2YWx1ZSAhPT0gbnVsbCAmJlxuICAgICAgICB2YWx1ZS50eXBlID09PSAnb2JqZWN0JyAmJlxuICAgICAgICAncHJvcGVydGllcycgaW4gdmFsdWUgJiZcbiAgICAgICAgJ2FkZGl0aW9uYWxQcm9wZXJ0aWVzJyBpbiB2YWx1ZSk7XG59XG5leHBvcnQgZnVuY3Rpb24gem9kSnNvblNjaGVtYUNvbXBhdChpbnB1dCkge1xuICAgIC8vIEF0dGVtcHQgdG8gYnVpbGQgYW4gb2JqZWN0IHNjaGVtYSBmcm9tIFpvZCdzIGludGVybmFsIHNoYXBlLiBJZiB3ZSBjYW5ub3RcbiAgICAvLyB1bmRlcnN0YW5kIHRoZSBzdHJ1Y3R1cmUgd2UgcmV0dXJuIHVuZGVmaW5lZCwgbGV0dGluZyBjYWxsZXJzIHJhaXNlIGFcbiAgICAvLyBkZXNjcmlwdGl2ZSBlcnJvciBpbnN0ZWFkIG9mIGVtaXR0aW5nIGFuIGludmFsaWQgc2NoZW1hLlxuICAgIGNvbnN0IHNjaGVtYSA9IGJ1aWxkT2JqZWN0U2NoZW1hKGlucHV0KTtcbiAgICBpZiAoIXNjaGVtYSkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoc2NoZW1hLnJlcXVpcmVkKSkge1xuICAgICAgICBzY2hlbWEucmVxdWlyZWQgPSBbXTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBzY2hlbWEuYWRkaXRpb25hbFByb3BlcnRpZXMgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHNjaGVtYS5hZGRpdGlvbmFsUHJvcGVydGllcyA9IGZhbHNlO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHNjaGVtYS4kc2NoZW1hICE9PSAnc3RyaW5nJykge1xuICAgICAgICBzY2hlbWEuJHNjaGVtYSA9IEpTT05fU0NIRU1BX0RSQUZUXzA3O1xuICAgIH1cbiAgICByZXR1cm4gc2NoZW1hO1xufVxuZnVuY3Rpb24gYnVpbGRPYmplY3RTY2hlbWEodmFsdWUpIHtcbiAgICBjb25zdCBzaGFwZSA9IHJlYWRTaGFwZSh2YWx1ZSk7XG4gICAgaWYgKCFzaGFwZSkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25zdCBwcm9wZXJ0aWVzID0ge307XG4gICAgY29uc3QgcmVxdWlyZWQgPSBbXTtcbiAgICBmb3IgKGNvbnN0IFtrZXksIGZpZWxkXSBvZiBPYmplY3QuZW50cmllcyhzaGFwZSkpIHtcbiAgICAgICAgY29uc3QgeyBzY2hlbWEsIG9wdGlvbmFsIH0gPSBjb252ZXJ0UHJvcGVydHkoZmllbGQpO1xuICAgICAgICBpZiAoIXNjaGVtYSkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBwcm9wZXJ0aWVzW2tleV0gPSBzY2hlbWE7XG4gICAgICAgIGlmICghb3B0aW9uYWwpIHtcbiAgICAgICAgICAgIHJlcXVpcmVkLnB1c2goa2V5KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4geyB0eXBlOiAnb2JqZWN0JywgcHJvcGVydGllcywgcmVxdWlyZWQsIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiBmYWxzZSB9O1xufVxuZnVuY3Rpb24gY29udmVydFByb3BlcnR5KHZhbHVlKSB7XG4gICAgLy8gUmVtb3ZlIHdyYXBwZXIgZGVjb3JhdG9ycyAoYnJhbmQsIHRyYW5zZm9ybSwgZXRjLikgYmVmb3JlIGF0dGVtcHRpbmcgdG9cbiAgICAvLyBjbGFzc2lmeSB0aGUgbm9kZSwgdHJhY2tpbmcgd2hldGhlciB3ZSBjcm9zc2VkIGFuIGBvcHRpb25hbGAgYm91bmRhcnkgc28gd2VcbiAgICAvLyBjYW4gcG9wdWxhdGUgdGhlIGByZXF1aXJlZGAgYXJyYXkgbGF0ZXIuXG4gICAgbGV0IGN1cnJlbnQgPSB1bndyYXBEZWNvcmF0b3JzKHZhbHVlKTtcbiAgICBsZXQgb3B0aW9uYWwgPSBmYWxzZTtcbiAgICB3aGlsZSAoT1BUSU9OQUxfV1JBUFBFUlMuaGFzKHJlYWRab2RUeXBlKGN1cnJlbnQpID8/ICcnKSkge1xuICAgICAgICBvcHRpb25hbCA9IHRydWU7XG4gICAgICAgIGNvbnN0IGRlZiA9IHJlYWRab2REZWZpbml0aW9uKGN1cnJlbnQpO1xuICAgICAgICBjb25zdCBuZXh0ID0gdW53cmFwRGVjb3JhdG9ycyhkZWY/LmlubmVyVHlwZSk7XG4gICAgICAgIGlmICghbmV4dCB8fCBuZXh0ID09PSBjdXJyZW50KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjdXJyZW50ID0gbmV4dDtcbiAgICB9XG4gICAgcmV0dXJuIHsgc2NoZW1hOiBjb252ZXJ0U2NoZW1hKGN1cnJlbnQpLCBvcHRpb25hbCB9O1xufVxuZnVuY3Rpb24gY29udmVydFNjaGVtYSh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbnN0IHVud3JhcHBlZCA9IHVud3JhcERlY29yYXRvcnModmFsdWUpO1xuICAgIGNvbnN0IHR5cGUgPSByZWFkWm9kVHlwZSh1bndyYXBwZWQpO1xuICAgIGNvbnN0IGRlZiA9IHJlYWRab2REZWZpbml0aW9uKHVud3JhcHBlZCk7XG4gICAgaWYgKCF0eXBlKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmICh0eXBlIGluIFNJTVBMRV9UWVBFX01BUFBJTkcpIHtcbiAgICAgICAgcmV0dXJuIFNJTVBMRV9UWVBFX01BUFBJTkdbdHlwZV07XG4gICAgfVxuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlICdvYmplY3QnOlxuICAgICAgICAgICAgcmV0dXJuIGJ1aWxkT2JqZWN0U2NoZW1hKHVud3JhcHBlZCk7XG4gICAgICAgIGNhc2UgJ2FycmF5JzpcbiAgICAgICAgICAgIHJldHVybiBidWlsZEFycmF5U2NoZW1hKGRlZik7XG4gICAgICAgIGNhc2UgJ3R1cGxlJzpcbiAgICAgICAgICAgIHJldHVybiBidWlsZFR1cGxlU2NoZW1hKGRlZik7XG4gICAgICAgIGNhc2UgJ3VuaW9uJzpcbiAgICAgICAgICAgIHJldHVybiBidWlsZFVuaW9uU2NoZW1hKGRlZik7XG4gICAgICAgIGNhc2UgJ2ludGVyc2VjdGlvbic6XG4gICAgICAgICAgICByZXR1cm4gYnVpbGRJbnRlcnNlY3Rpb25TY2hlbWEoZGVmKTtcbiAgICAgICAgY2FzZSAnbGl0ZXJhbCc6XG4gICAgICAgICAgICByZXR1cm4gYnVpbGRMaXRlcmFsKGRlZik7XG4gICAgICAgIGNhc2UgJ2VudW0nOlxuICAgICAgICBjYXNlICduYXRpdmVlbnVtJzpcbiAgICAgICAgICAgIHJldHVybiBidWlsZEVudW0oZGVmKTtcbiAgICAgICAgY2FzZSAncmVjb3JkJzpcbiAgICAgICAgICAgIHJldHVybiBidWlsZFJlY29yZFNjaGVtYShkZWYpO1xuICAgICAgICBjYXNlICdtYXAnOlxuICAgICAgICAgICAgcmV0dXJuIGJ1aWxkTWFwU2NoZW1hKGRlZik7XG4gICAgICAgIGNhc2UgJ3NldCc6XG4gICAgICAgICAgICByZXR1cm4gYnVpbGRTZXRTY2hlbWEoZGVmKTtcbiAgICAgICAgY2FzZSAnbnVsbGFibGUnOlxuICAgICAgICAgICAgcmV0dXJuIGJ1aWxkTnVsbGFibGVTY2hlbWEoZGVmKTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxufVxuLy8gLS0tIEpTT04gU2NoZW1hIGJ1aWxkZXJzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmZ1bmN0aW9uIGJ1aWxkQXJyYXlTY2hlbWEoZGVmKSB7XG4gICAgY29uc3QgaXRlbXMgPSBjb252ZXJ0U2NoZW1hKGV4dHJhY3RGaXJzdChkZWYsICdlbGVtZW50JywgJ2l0ZW1zJywgJ3R5cGUnKSk7XG4gICAgcmV0dXJuIGl0ZW1zID8geyB0eXBlOiAnYXJyYXknLCBpdGVtcyB9IDogdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gYnVpbGRUdXBsZVNjaGVtYShkZWYpIHtcbiAgICBjb25zdCBpdGVtcyA9IGNvZXJjZUFycmF5KGRlZj8uaXRlbXMpXG4gICAgICAgIC5tYXAoKGl0ZW0pID0+IGNvbnZlcnRTY2hlbWEoaXRlbSkpXG4gICAgICAgIC5maWx0ZXIoQm9vbGVhbik7XG4gICAgaWYgKCFpdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3Qgc2NoZW1hID0ge1xuICAgICAgICB0eXBlOiAnYXJyYXknLFxuICAgICAgICBpdGVtcyxcbiAgICAgICAgbWluSXRlbXM6IGl0ZW1zLmxlbmd0aCxcbiAgICB9O1xuICAgIGlmICghZGVmPy5yZXN0KSB7XG4gICAgICAgIHNjaGVtYS5tYXhJdGVtcyA9IGl0ZW1zLmxlbmd0aDtcbiAgICB9XG4gICAgcmV0dXJuIHNjaGVtYTtcbn1cbmZ1bmN0aW9uIGJ1aWxkVW5pb25TY2hlbWEoZGVmKSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IGNvZXJjZUFycmF5KGRlZj8ub3B0aW9ucyA/PyBkZWY/LnNjaGVtYXMpXG4gICAgICAgIC5tYXAoKG9wdGlvbikgPT4gY29udmVydFNjaGVtYShvcHRpb24pKVxuICAgICAgICAuZmlsdGVyKEJvb2xlYW4pO1xuICAgIHJldHVybiBvcHRpb25zLmxlbmd0aCA/IHsgYW55T2Y6IG9wdGlvbnMgfSA6IHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIGJ1aWxkSW50ZXJzZWN0aW9uU2NoZW1hKGRlZikge1xuICAgIGNvbnN0IGxlZnQgPSBjb252ZXJ0U2NoZW1hKGRlZj8ubGVmdCk7XG4gICAgY29uc3QgcmlnaHQgPSBjb252ZXJ0U2NoZW1hKGRlZj8ucmlnaHQpO1xuICAgIHJldHVybiBsZWZ0ICYmIHJpZ2h0ID8geyBhbGxPZjogW2xlZnQsIHJpZ2h0XSB9IDogdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gYnVpbGRSZWNvcmRTY2hlbWEoZGVmKSB7XG4gICAgY29uc3QgdmFsdWVTY2hlbWEgPSBjb252ZXJ0U2NoZW1hKGRlZj8udmFsdWVUeXBlID8/IGRlZj8udmFsdWVzKTtcbiAgICByZXR1cm4gdmFsdWVTY2hlbWFcbiAgICAgICAgPyB7IHR5cGU6ICdvYmplY3QnLCBhZGRpdGlvbmFsUHJvcGVydGllczogdmFsdWVTY2hlbWEgfVxuICAgICAgICA6IHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIGJ1aWxkTWFwU2NoZW1hKGRlZikge1xuICAgIGNvbnN0IHZhbHVlU2NoZW1hID0gY29udmVydFNjaGVtYShkZWY/LnZhbHVlVHlwZSA/PyBkZWY/LnZhbHVlcyk7XG4gICAgcmV0dXJuIHZhbHVlU2NoZW1hID8geyB0eXBlOiAnYXJyYXknLCBpdGVtczogdmFsdWVTY2hlbWEgfSA6IHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIGJ1aWxkU2V0U2NoZW1hKGRlZikge1xuICAgIGNvbnN0IHZhbHVlU2NoZW1hID0gY29udmVydFNjaGVtYShkZWY/LnZhbHVlVHlwZSk7XG4gICAgcmV0dXJuIHZhbHVlU2NoZW1hXG4gICAgICAgID8geyB0eXBlOiAnYXJyYXknLCBpdGVtczogdmFsdWVTY2hlbWEsIHVuaXF1ZUl0ZW1zOiB0cnVlIH1cbiAgICAgICAgOiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiBidWlsZE51bGxhYmxlU2NoZW1hKGRlZikge1xuICAgIGNvbnN0IGlubmVyID0gY29udmVydFNjaGVtYShkZWY/LmlubmVyVHlwZSA/PyBkZWY/LnR5cGUpO1xuICAgIHJldHVybiBpbm5lciA/IHsgYW55T2Y6IFtpbm5lciwgeyB0eXBlOiAnbnVsbCcgfV0gfSA6IHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIHVud3JhcERlY29yYXRvcnModmFsdWUpIHtcbiAgICBsZXQgY3VycmVudCA9IHZhbHVlO1xuICAgIHdoaWxlIChERUNPUkFUT1JfV1JBUFBFUlMuaGFzKHJlYWRab2RUeXBlKGN1cnJlbnQpID8/ICcnKSkge1xuICAgICAgICBjb25zdCBkZWYgPSByZWFkWm9kRGVmaW5pdGlvbihjdXJyZW50KTtcbiAgICAgICAgY29uc3QgbmV4dCA9IGRlZj8uaW5uZXJUeXBlID8/XG4gICAgICAgICAgICBkZWY/LnNjaGVtYSA/P1xuICAgICAgICAgICAgZGVmPy5iYXNlID8/XG4gICAgICAgICAgICBkZWY/LnR5cGUgPz9cbiAgICAgICAgICAgIGRlZj8ud3JhcHBlZCA/P1xuICAgICAgICAgICAgZGVmPy51bmRlcmx5aW5nO1xuICAgICAgICBpZiAoIW5leHQgfHwgbmV4dCA9PT0gY3VycmVudCkge1xuICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgY3VycmVudCA9IG5leHQ7XG4gICAgfVxuICAgIHJldHVybiBjdXJyZW50O1xufVxuZnVuY3Rpb24gZXh0cmFjdEZpcnN0KGRlZiwgLi4ua2V5cykge1xuICAgIGlmICghZGVmKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGZvciAoY29uc3Qga2V5IG9mIGtleXMpIHtcbiAgICAgICAgaWYgKGtleSBpbiBkZWYgJiYgZGVmW2tleV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIGRlZltrZXldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiBjb2VyY2VBcnJheSh2YWx1ZSkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZSA9PT0gdW5kZWZpbmVkID8gW10gOiBbdmFsdWVdO1xufVxuZnVuY3Rpb24gYnVpbGRMaXRlcmFsKGRlZikge1xuICAgIGlmICghZGVmKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbnN0IGxpdGVyYWwgPSBleHRyYWN0Rmlyc3QoZGVmLCAndmFsdWUnLCAnbGl0ZXJhbCcpO1xuICAgIGlmIChsaXRlcmFsID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY29uc3Q6IGxpdGVyYWwsXG4gICAgICAgIHR5cGU6IGxpdGVyYWwgPT09IG51bGwgPyAnbnVsbCcgOiB0eXBlb2YgbGl0ZXJhbCxcbiAgICB9O1xufVxuZnVuY3Rpb24gYnVpbGRFbnVtKGRlZikge1xuICAgIGlmICghZGVmKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmIChBcnJheS5pc0FycmF5KGRlZi52YWx1ZXMpKSB7XG4gICAgICAgIHJldHVybiB7IGVudW06IGRlZi52YWx1ZXMgfTtcbiAgICB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZGVmLm9wdGlvbnMpKSB7XG4gICAgICAgIHJldHVybiB7IGVudW06IGRlZi5vcHRpb25zIH07XG4gICAgfVxuICAgIGlmIChkZWYudmFsdWVzICYmIHR5cGVvZiBkZWYudmFsdWVzID09PSAnb2JqZWN0Jykge1xuICAgICAgICByZXR1cm4geyBlbnVtOiBPYmplY3QudmFsdWVzKGRlZi52YWx1ZXMpIH07XG4gICAgfVxuICAgIGlmIChkZWYuZW51bSAmJiB0eXBlb2YgZGVmLmVudW0gPT09ICdvYmplY3QnKSB7XG4gICAgICAgIHJldHVybiB7IGVudW06IE9iamVjdC52YWx1ZXMoZGVmLmVudW0pIH07XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiByZWFkU2hhcGUoaW5wdXQpIHtcbiAgICBpZiAodHlwZW9mIGlucHV0ICE9PSAnb2JqZWN0JyB8fCBpbnB1dCA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25zdCBjYW5kaWRhdGUgPSBpbnB1dDtcbiAgICBpZiAoY2FuZGlkYXRlLnNoYXBlICYmIHR5cGVvZiBjYW5kaWRhdGUuc2hhcGUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIHJldHVybiBjYW5kaWRhdGUuc2hhcGU7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgY2FuZGlkYXRlLnNoYXBlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gY2FuZGlkYXRlLnNoYXBlKCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKF9lcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBkZWYgPSByZWFkWm9kRGVmaW5pdGlvbihjYW5kaWRhdGUpO1xuICAgIGNvbnN0IHNoYXBlID0gZGVmPy5zaGFwZTtcbiAgICBpZiAoc2hhcGUgJiYgdHlwZW9mIHNoYXBlID09PSAnb2JqZWN0Jykge1xuICAgICAgICByZXR1cm4gc2hhcGU7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygc2hhcGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBzaGFwZSgpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChfZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXpvZEpzb25TY2hlbWFDb21wYXQubWpzLm1hcCIsImltcG9ydCB7IHpvZFJlc3BvbnNlc0Z1bmN0aW9uLCB6b2RUZXh0Rm9ybWF0IH0gZnJvbSAnb3BlbmFpL2hlbHBlcnMvem9kJztcbmltcG9ydCB7IFVzZXJFcnJvciB9IGZyb20gXCIuLi9lcnJvcnMubWpzXCI7XG5pbXBvcnQgeyBpc1pvZE9iamVjdCB9IGZyb20gXCIuL3R5cGVHdWFyZHMubWpzXCI7XG5pbXBvcnQgeyB6b2RKc29uU2NoZW1hQ29tcGF0LCBoYXNKc29uU2NoZW1hT2JqZWN0U2hhcGUsIH0gZnJvbSBcIi4vem9kSnNvblNjaGVtYUNvbXBhdC5tanNcIjtcbmltcG9ydCB7IGFzWm9kVHlwZSB9IGZyb20gXCIuL3pvZENvbXBhdC5tanNcIjtcbmNvbnN0IHpvZFJlc3BvbnNlc0Z1bmN0aW9uQ29tcGF0ID0gem9kUmVzcG9uc2VzRnVuY3Rpb247XG4vLyBUaGUgYC5zY2hlbWFgIHBheWxvYWQgaXMgYWxsIHdlIG5lZWQsIHNvIGEgbGlnaHR3ZWlnaHQgc2lnbmF0dXJlIGtlZXBzIHRoZSBjb21waWxlciBoYXBweS5cbmNvbnN0IHpvZFRleHRGb3JtYXRDb21wYXQgPSB6b2RUZXh0Rm9ybWF0O1xuLy8gb3BlbmFpL2hlbHBlcnMvem9kIGNhbm5vdCBlbWl0IHN0cmljdCBzY2hlbWFzIGZvciBldmVyeSBab2QgcnVudGltZVxuLy8gKG5vdGFibHkgWm9kIHY0KSwgc28gd2UgZGVsZWdhdGUgdG8gYSBzbWFsbCBsb2NhbCBjb252ZXJ0ZXIgbGl2aW5nIGluXG4vLyB6b2RKc29uU2NoZW1hQ29tcGF0LnRzIHdoZW5ldmVyIGl0cyBvdXRwdXQgaXMgbWlzc2luZyB0aGUgcmVxdWlyZWQgSlNPTiBTY2hlbWEgYml0cy5cbmZ1bmN0aW9uIGJ1aWxkSnNvblNjaGVtYUZyb21ab2QoaW5wdXRUeXBlKSB7XG4gICAgcmV0dXJuIHpvZEpzb25TY2hlbWFDb21wYXQoaW5wdXRUeXBlKTtcbn1cbi8qKlxuICogQ29udmVydCBhIHN0cmluZyB0byBhIGZ1bmN0aW9uIHRvb2wgbmFtZSBieSByZXBsYWNpbmcgc3BhY2VzIHdpdGggdW5kZXJzY29yZXMgYW5kXG4gKiBub24tYWxwaGFudW1lcmljIGNoYXJhY3RlcnMgd2l0aCB1bmRlcnNjb3Jlcy5cbiAqIEBwYXJhbSBuYW1lIC0gVGhlIG5hbWUgb2YgdGhlIHRvb2wuXG4gKiBAcmV0dXJucyBUaGUgZnVuY3Rpb24gdG9vbCBuYW1lLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9GdW5jdGlvblRvb2xOYW1lKG5hbWUpIHtcbiAgICAvLyBSZXBsYWNlIHNwYWNlcyB3aXRoIHVuZGVyc2NvcmVzXG4gICAgbmFtZSA9IG5hbWUucmVwbGFjZSgvXFxzL2csICdfJyk7XG4gICAgLy8gUmVwbGFjZSBub24tYWxwaGFudW1lcmljIGNoYXJhY3RlcnMgd2l0aCB1bmRlcnNjb3Jlc1xuICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoL1teYS16QS1aMC05XS9nLCAnXycpO1xuICAgIC8vIEVuc3VyZSB0aGUgbmFtZSBpcyBub3QgZW1wdHlcbiAgICBpZiAobmFtZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUb29sIG5hbWUgY2Fubm90IGJlIGVtcHR5Jyk7XG4gICAgfVxuICAgIHJldHVybiBuYW1lO1xufVxuLyoqXG4gKiBHZXQgdGhlIHNjaGVtYSBhbmQgcGFyc2VyIGZyb20gYW4gaW5wdXQgdHlwZS4gSWYgdGhlIGlucHV0IHR5cGUgaXMgYSBab2RPYmplY3QsIHdlIHdpbGwgY29udmVydFxuICogaXQgaW50byBhIEpTT04gU2NoZW1hIGFuZCB1c2UgWm9kIGFzIHBhcnNlci4gSWYgdGhlIGlucHV0IHR5cGUgaXMgYSBKU09OIHNjaGVtYSwgd2UgdXNlIHRoZVxuICogSlNPTi5wYXJzZSBmdW5jdGlvbiB0byBnZXQgdGhlIHBhcnNlci5cbiAqIEBwYXJhbSBpbnB1dFR5cGUgLSBUaGUgaW5wdXQgdHlwZSB0byBnZXQgdGhlIHNjaGVtYSBhbmQgcGFyc2VyIGZyb20uXG4gKiBAcGFyYW0gbmFtZSAtIFRoZSBuYW1lIG9mIHRoZSB0b29sLlxuICogQHJldHVybnMgVGhlIHNjaGVtYSBhbmQgcGFyc2VyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2NoZW1hQW5kUGFyc2VyRnJvbUlucHV0VHlwZShpbnB1dFR5cGUsIG5hbWUpIHtcbiAgICBjb25zdCBwYXJzZXIgPSAoaW5wdXQpID0+IEpTT04ucGFyc2UoaW5wdXQpO1xuICAgIGlmIChpc1pvZE9iamVjdChpbnB1dFR5cGUpKSB7XG4gICAgICAgIGNvbnN0IHVzZUZhbGxiYWNrID0gKG9yaWdpbmFsRXJyb3IpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGZhbGxiYWNrU2NoZW1hID0gYnVpbGRKc29uU2NoZW1hRnJvbVpvZChpbnB1dFR5cGUpO1xuICAgICAgICAgICAgaWYgKGZhbGxiYWNrU2NoZW1hKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc2NoZW1hOiBmYWxsYmFja1NjaGVtYSxcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VyOiAocmF3SW5wdXQpID0+IGlucHV0VHlwZS5wYXJzZShKU09OLnBhcnNlKHJhd0lucHV0KSksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IG9yaWdpbmFsRXJyb3IgaW5zdGFuY2VvZiBFcnJvclxuICAgICAgICAgICAgICAgID8gYCBVcHN0cmVhbSBoZWxwZXIgZXJyb3I6ICR7b3JpZ2luYWxFcnJvci5tZXNzYWdlfWBcbiAgICAgICAgICAgICAgICA6ICcnO1xuICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcihgVW5hYmxlIHRvIGNvbnZlcnQgdGhlIHByb3ZpZGVkIFpvZCBzY2hlbWEgdG8gSlNPTiBTY2hlbWEuIEVuc3VyZSB0aGF0IHRoZSBcXGB6b2RcXGAgcGFja2FnZSBpcyBhdmFpbGFibGUgYXQgcnVudGltZSBvciBwcm92aWRlIGEgSlNPTiBzY2hlbWEgb2JqZWN0IGluc3RlYWQuJHtlcnJvck1lc3NhZ2V9YCk7XG4gICAgICAgIH07XG4gICAgICAgIGxldCBmb3JtYXR0ZWRGdW5jdGlvbjtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZvcm1hdHRlZEZ1bmN0aW9uID0gem9kUmVzcG9uc2VzRnVuY3Rpb25Db21wYXQoe1xuICAgICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVyczogYXNab2RUeXBlKGlucHV0VHlwZSksXG4gICAgICAgICAgICAgICAgZnVuY3Rpb246ICgpID0+IHsgfSwgLy8gZW1wdHkgZnVuY3Rpb24gaGVyZSB0byBzYXRpc2Z5IHRoZSBPcGVuQUkgaGVscGVyXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICcnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gdXNlRmFsbGJhY2soZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChoYXNKc29uU2NoZW1hT2JqZWN0U2hhcGUoZm9ybWF0dGVkRnVuY3Rpb24ucGFyYW1ldGVycykpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc2NoZW1hOiBmb3JtYXR0ZWRGdW5jdGlvbi5wYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHBhcnNlcjogZm9ybWF0dGVkRnVuY3Rpb24uJHBhcnNlUmF3LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdXNlRmFsbGJhY2soKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGlucHV0VHlwZSA9PT0gJ29iamVjdCcgJiYgaW5wdXRUeXBlICE9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzY2hlbWE6IGlucHV0VHlwZSxcbiAgICAgICAgICAgIHBhcnNlcixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IFVzZXJFcnJvcignSW5wdXQgdHlwZSBpcyBub3QgYSBab2RPYmplY3Qgb3IgYSB2YWxpZCBKU09OIHNjaGVtYScpO1xufVxuLyoqXG4gKiBDb252ZXJ0cyB0aGUgYWdlbnQgb3V0cHV0IHR5cGUgcHJvdmlkZWQgdG8gYSBzZXJpYWxpemFibGUgdmVyc2lvblxuICovXG5leHBvcnQgZnVuY3Rpb24gY29udmVydEFnZW50T3V0cHV0VHlwZVRvU2VyaWFsaXphYmxlKG91dHB1dFR5cGUpIHtcbiAgICBpZiAob3V0cHV0VHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgIHJldHVybiAndGV4dCc7XG4gICAgfVxuICAgIGlmIChpc1pvZE9iamVjdChvdXRwdXRUeXBlKSkge1xuICAgICAgICBjb25zdCB1c2VGYWxsYmFjayA9IChleGlzdGluZywgb3JpZ2luYWxFcnJvcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgZmFsbGJhY2tTY2hlbWEgPSBidWlsZEpzb25TY2hlbWFGcm9tWm9kKG91dHB1dFR5cGUpO1xuICAgICAgICAgICAgaWYgKGZhbGxiYWNrU2NoZW1hKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogZXhpc3Rpbmc/LnR5cGUgPz8gJ2pzb25fc2NoZW1hJyxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogZXhpc3Rpbmc/Lm5hbWUgPz8gJ291dHB1dCcsXG4gICAgICAgICAgICAgICAgICAgIHN0cmljdDogZXhpc3Rpbmc/LnN0cmljdCA/PyBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgc2NoZW1hOiBmYWxsYmFja1NjaGVtYSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gb3JpZ2luYWxFcnJvciBpbnN0YW5jZW9mIEVycm9yXG4gICAgICAgICAgICAgICAgPyBgIFVwc3RyZWFtIGhlbHBlciBlcnJvcjogJHtvcmlnaW5hbEVycm9yLm1lc3NhZ2V9YFxuICAgICAgICAgICAgICAgIDogJyc7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKGBVbmFibGUgdG8gY29udmVydCB0aGUgcHJvdmlkZWQgWm9kIHNjaGVtYSB0byBKU09OIFNjaGVtYS4gRW5zdXJlIHRoYXQgdGhlIFxcYHpvZFxcYCBwYWNrYWdlIGlzIGF2YWlsYWJsZSBhdCBydW50aW1lIG9yIHByb3ZpZGUgYSBKU09OIHNjaGVtYSBvYmplY3QgaW5zdGVhZC4ke2Vycm9yTWVzc2FnZX1gKTtcbiAgICAgICAgfTtcbiAgICAgICAgbGV0IG91dHB1dDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIG91dHB1dCA9IHpvZFRleHRGb3JtYXRDb21wYXQoYXNab2RUeXBlKG91dHB1dFR5cGUpLCAnb3V0cHV0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gdXNlRmFsbGJhY2sodW5kZWZpbmVkLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhhc0pzb25TY2hlbWFPYmplY3RTaGFwZShvdXRwdXQuc2NoZW1hKSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0eXBlOiBvdXRwdXQudHlwZSxcbiAgICAgICAgICAgICAgICBuYW1lOiBvdXRwdXQubmFtZSxcbiAgICAgICAgICAgICAgICBzdHJpY3Q6IG91dHB1dC5zdHJpY3QgfHwgZmFsc2UsXG4gICAgICAgICAgICAgICAgc2NoZW1hOiBvdXRwdXQuc2NoZW1hLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdXNlRmFsbGJhY2sob3V0cHV0KTtcbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dFR5cGU7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10b29scy5tanMubWFwIiwiLyoqXG4gKiBIZWxwZXJzLlxuICovXG5cbnZhciBzID0gMTAwMDtcbnZhciBtID0gcyAqIDYwO1xudmFyIGggPSBtICogNjA7XG52YXIgZCA9IGggKiAyNDtcbnZhciB3ID0gZCAqIDc7XG52YXIgeSA9IGQgKiAzNjUuMjU7XG5cbi8qKlxuICogUGFyc2Ugb3IgZm9ybWF0IHRoZSBnaXZlbiBgdmFsYC5cbiAqXG4gKiBPcHRpb25zOlxuICpcbiAqICAtIGBsb25nYCB2ZXJib3NlIGZvcm1hdHRpbmcgW2ZhbHNlXVxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfE51bWJlcn0gdmFsXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gKiBAdGhyb3dzIHtFcnJvcn0gdGhyb3cgYW4gZXJyb3IgaWYgdmFsIGlzIG5vdCBhIG5vbi1lbXB0eSBzdHJpbmcgb3IgYSBudW1iZXJcbiAqIEByZXR1cm4ge1N0cmluZ3xOdW1iZXJ9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHZhbCwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsO1xuICBpZiAodHlwZSA9PT0gJ3N0cmluZycgJiYgdmFsLmxlbmd0aCA+IDApIHtcbiAgICByZXR1cm4gcGFyc2UodmFsKTtcbiAgfSBlbHNlIGlmICh0eXBlID09PSAnbnVtYmVyJyAmJiBpc0Zpbml0ZSh2YWwpKSB7XG4gICAgcmV0dXJuIG9wdGlvbnMubG9uZyA/IGZtdExvbmcodmFsKSA6IGZtdFNob3J0KHZhbCk7XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKFxuICAgICd2YWwgaXMgbm90IGEgbm9uLWVtcHR5IHN0cmluZyBvciBhIHZhbGlkIG51bWJlci4gdmFsPScgK1xuICAgICAgSlNPTi5zdHJpbmdpZnkodmFsKVxuICApO1xufTtcblxuLyoqXG4gKiBQYXJzZSB0aGUgZ2l2ZW4gYHN0cmAgYW5kIHJldHVybiBtaWxsaXNlY29uZHMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybiB7TnVtYmVyfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gcGFyc2Uoc3RyKSB7XG4gIHN0ciA9IFN0cmluZyhzdHIpO1xuICBpZiAoc3RyLmxlbmd0aCA+IDEwMCkge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgbWF0Y2ggPSAvXigtPyg/OlxcZCspP1xcLj9cXGQrKSAqKG1pbGxpc2Vjb25kcz98bXNlY3M/fG1zfHNlY29uZHM/fHNlY3M/fHN8bWludXRlcz98bWlucz98bXxob3Vycz98aHJzP3xofGRheXM/fGR8d2Vla3M/fHd8eWVhcnM/fHlycz98eSk/JC9pLmV4ZWMoXG4gICAgc3RyXG4gICk7XG4gIGlmICghbWF0Y2gpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIG4gPSBwYXJzZUZsb2F0KG1hdGNoWzFdKTtcbiAgdmFyIHR5cGUgPSAobWF0Y2hbMl0gfHwgJ21zJykudG9Mb3dlckNhc2UoKTtcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSAneWVhcnMnOlxuICAgIGNhc2UgJ3llYXInOlxuICAgIGNhc2UgJ3lycyc6XG4gICAgY2FzZSAneXInOlxuICAgIGNhc2UgJ3knOlxuICAgICAgcmV0dXJuIG4gKiB5O1xuICAgIGNhc2UgJ3dlZWtzJzpcbiAgICBjYXNlICd3ZWVrJzpcbiAgICBjYXNlICd3JzpcbiAgICAgIHJldHVybiBuICogdztcbiAgICBjYXNlICdkYXlzJzpcbiAgICBjYXNlICdkYXknOlxuICAgIGNhc2UgJ2QnOlxuICAgICAgcmV0dXJuIG4gKiBkO1xuICAgIGNhc2UgJ2hvdXJzJzpcbiAgICBjYXNlICdob3VyJzpcbiAgICBjYXNlICdocnMnOlxuICAgIGNhc2UgJ2hyJzpcbiAgICBjYXNlICdoJzpcbiAgICAgIHJldHVybiBuICogaDtcbiAgICBjYXNlICdtaW51dGVzJzpcbiAgICBjYXNlICdtaW51dGUnOlxuICAgIGNhc2UgJ21pbnMnOlxuICAgIGNhc2UgJ21pbic6XG4gICAgY2FzZSAnbSc6XG4gICAgICByZXR1cm4gbiAqIG07XG4gICAgY2FzZSAnc2Vjb25kcyc6XG4gICAgY2FzZSAnc2Vjb25kJzpcbiAgICBjYXNlICdzZWNzJzpcbiAgICBjYXNlICdzZWMnOlxuICAgIGNhc2UgJ3MnOlxuICAgICAgcmV0dXJuIG4gKiBzO1xuICAgIGNhc2UgJ21pbGxpc2Vjb25kcyc6XG4gICAgY2FzZSAnbWlsbGlzZWNvbmQnOlxuICAgIGNhc2UgJ21zZWNzJzpcbiAgICBjYXNlICdtc2VjJzpcbiAgICBjYXNlICdtcyc6XG4gICAgICByZXR1cm4gbjtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxufVxuXG4vKipcbiAqIFNob3J0IGZvcm1hdCBmb3IgYG1zYC5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gbXNcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIGZtdFNob3J0KG1zKSB7XG4gIHZhciBtc0FicyA9IE1hdGguYWJzKG1zKTtcbiAgaWYgKG1zQWJzID49IGQpIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChtcyAvIGQpICsgJ2QnO1xuICB9XG4gIGlmIChtc0FicyA+PSBoKSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQobXMgLyBoKSArICdoJztcbiAgfVxuICBpZiAobXNBYnMgPj0gbSkge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKG1zIC8gbSkgKyAnbSc7XG4gIH1cbiAgaWYgKG1zQWJzID49IHMpIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChtcyAvIHMpICsgJ3MnO1xuICB9XG4gIHJldHVybiBtcyArICdtcyc7XG59XG5cbi8qKlxuICogTG9uZyBmb3JtYXQgZm9yIGBtc2AuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IG1zXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBmbXRMb25nKG1zKSB7XG4gIHZhciBtc0FicyA9IE1hdGguYWJzKG1zKTtcbiAgaWYgKG1zQWJzID49IGQpIHtcbiAgICByZXR1cm4gcGx1cmFsKG1zLCBtc0FicywgZCwgJ2RheScpO1xuICB9XG4gIGlmIChtc0FicyA+PSBoKSB7XG4gICAgcmV0dXJuIHBsdXJhbChtcywgbXNBYnMsIGgsICdob3VyJyk7XG4gIH1cbiAgaWYgKG1zQWJzID49IG0pIHtcbiAgICByZXR1cm4gcGx1cmFsKG1zLCBtc0FicywgbSwgJ21pbnV0ZScpO1xuICB9XG4gIGlmIChtc0FicyA+PSBzKSB7XG4gICAgcmV0dXJuIHBsdXJhbChtcywgbXNBYnMsIHMsICdzZWNvbmQnKTtcbiAgfVxuICByZXR1cm4gbXMgKyAnIG1zJztcbn1cblxuLyoqXG4gKiBQbHVyYWxpemF0aW9uIGhlbHBlci5cbiAqL1xuXG5mdW5jdGlvbiBwbHVyYWwobXMsIG1zQWJzLCBuLCBuYW1lKSB7XG4gIHZhciBpc1BsdXJhbCA9IG1zQWJzID49IG4gKiAxLjU7XG4gIHJldHVybiBNYXRoLnJvdW5kKG1zIC8gbikgKyAnICcgKyBuYW1lICsgKGlzUGx1cmFsID8gJ3MnIDogJycpO1xufVxuIiwiXG4vKipcbiAqIFRoaXMgaXMgdGhlIGNvbW1vbiBsb2dpYyBmb3IgYm90aCB0aGUgTm9kZS5qcyBhbmQgd2ViIGJyb3dzZXJcbiAqIGltcGxlbWVudGF0aW9ucyBvZiBgZGVidWcoKWAuXG4gKi9cblxuZnVuY3Rpb24gc2V0dXAoZW52KSB7XG5cdGNyZWF0ZURlYnVnLmRlYnVnID0gY3JlYXRlRGVidWc7XG5cdGNyZWF0ZURlYnVnLmRlZmF1bHQgPSBjcmVhdGVEZWJ1Zztcblx0Y3JlYXRlRGVidWcuY29lcmNlID0gY29lcmNlO1xuXHRjcmVhdGVEZWJ1Zy5kaXNhYmxlID0gZGlzYWJsZTtcblx0Y3JlYXRlRGVidWcuZW5hYmxlID0gZW5hYmxlO1xuXHRjcmVhdGVEZWJ1Zy5lbmFibGVkID0gZW5hYmxlZDtcblx0Y3JlYXRlRGVidWcuaHVtYW5pemUgPSByZXF1aXJlKCdtcycpO1xuXHRjcmVhdGVEZWJ1Zy5kZXN0cm95ID0gZGVzdHJveTtcblxuXHRPYmplY3Qua2V5cyhlbnYpLmZvckVhY2goa2V5ID0+IHtcblx0XHRjcmVhdGVEZWJ1Z1trZXldID0gZW52W2tleV07XG5cdH0pO1xuXG5cdC8qKlxuXHQqIFRoZSBjdXJyZW50bHkgYWN0aXZlIGRlYnVnIG1vZGUgbmFtZXMsIGFuZCBuYW1lcyB0byBza2lwLlxuXHQqL1xuXG5cdGNyZWF0ZURlYnVnLm5hbWVzID0gW107XG5cdGNyZWF0ZURlYnVnLnNraXBzID0gW107XG5cblx0LyoqXG5cdCogTWFwIG9mIHNwZWNpYWwgXCIlblwiIGhhbmRsaW5nIGZ1bmN0aW9ucywgZm9yIHRoZSBkZWJ1ZyBcImZvcm1hdFwiIGFyZ3VtZW50LlxuXHQqXG5cdCogVmFsaWQga2V5IG5hbWVzIGFyZSBhIHNpbmdsZSwgbG93ZXIgb3IgdXBwZXItY2FzZSBsZXR0ZXIsIGkuZS4gXCJuXCIgYW5kIFwiTlwiLlxuXHQqL1xuXHRjcmVhdGVEZWJ1Zy5mb3JtYXR0ZXJzID0ge307XG5cblx0LyoqXG5cdCogU2VsZWN0cyBhIGNvbG9yIGZvciBhIGRlYnVnIG5hbWVzcGFjZVxuXHQqIEBwYXJhbSB7U3RyaW5nfSBuYW1lc3BhY2UgVGhlIG5hbWVzcGFjZSBzdHJpbmcgZm9yIHRoZSBkZWJ1ZyBpbnN0YW5jZSB0byBiZSBjb2xvcmVkXG5cdCogQHJldHVybiB7TnVtYmVyfFN0cmluZ30gQW4gQU5TSSBjb2xvciBjb2RlIGZvciB0aGUgZ2l2ZW4gbmFtZXNwYWNlXG5cdCogQGFwaSBwcml2YXRlXG5cdCovXG5cdGZ1bmN0aW9uIHNlbGVjdENvbG9yKG5hbWVzcGFjZSkge1xuXHRcdGxldCBoYXNoID0gMDtcblxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgbmFtZXNwYWNlLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRoYXNoID0gKChoYXNoIDw8IDUpIC0gaGFzaCkgKyBuYW1lc3BhY2UuY2hhckNvZGVBdChpKTtcblx0XHRcdGhhc2ggfD0gMDsgLy8gQ29udmVydCB0byAzMmJpdCBpbnRlZ2VyXG5cdFx0fVxuXG5cdFx0cmV0dXJuIGNyZWF0ZURlYnVnLmNvbG9yc1tNYXRoLmFicyhoYXNoKSAlIGNyZWF0ZURlYnVnLmNvbG9ycy5sZW5ndGhdO1xuXHR9XG5cdGNyZWF0ZURlYnVnLnNlbGVjdENvbG9yID0gc2VsZWN0Q29sb3I7XG5cblx0LyoqXG5cdCogQ3JlYXRlIGEgZGVidWdnZXIgd2l0aCB0aGUgZ2l2ZW4gYG5hbWVzcGFjZWAuXG5cdCpcblx0KiBAcGFyYW0ge1N0cmluZ30gbmFtZXNwYWNlXG5cdCogQHJldHVybiB7RnVuY3Rpb259XG5cdCogQGFwaSBwdWJsaWNcblx0Ki9cblx0ZnVuY3Rpb24gY3JlYXRlRGVidWcobmFtZXNwYWNlKSB7XG5cdFx0bGV0IHByZXZUaW1lO1xuXHRcdGxldCBlbmFibGVPdmVycmlkZSA9IG51bGw7XG5cdFx0bGV0IG5hbWVzcGFjZXNDYWNoZTtcblx0XHRsZXQgZW5hYmxlZENhY2hlO1xuXG5cdFx0ZnVuY3Rpb24gZGVidWcoLi4uYXJncykge1xuXHRcdFx0Ly8gRGlzYWJsZWQ/XG5cdFx0XHRpZiAoIWRlYnVnLmVuYWJsZWQpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCBzZWxmID0gZGVidWc7XG5cblx0XHRcdC8vIFNldCBgZGlmZmAgdGltZXN0YW1wXG5cdFx0XHRjb25zdCBjdXJyID0gTnVtYmVyKG5ldyBEYXRlKCkpO1xuXHRcdFx0Y29uc3QgbXMgPSBjdXJyIC0gKHByZXZUaW1lIHx8IGN1cnIpO1xuXHRcdFx0c2VsZi5kaWZmID0gbXM7XG5cdFx0XHRzZWxmLnByZXYgPSBwcmV2VGltZTtcblx0XHRcdHNlbGYuY3VyciA9IGN1cnI7XG5cdFx0XHRwcmV2VGltZSA9IGN1cnI7XG5cblx0XHRcdGFyZ3NbMF0gPSBjcmVhdGVEZWJ1Zy5jb2VyY2UoYXJnc1swXSk7XG5cblx0XHRcdGlmICh0eXBlb2YgYXJnc1swXSAhPT0gJ3N0cmluZycpIHtcblx0XHRcdFx0Ly8gQW55dGhpbmcgZWxzZSBsZXQncyBpbnNwZWN0IHdpdGggJU9cblx0XHRcdFx0YXJncy51bnNoaWZ0KCclTycpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBBcHBseSBhbnkgYGZvcm1hdHRlcnNgIHRyYW5zZm9ybWF0aW9uc1xuXHRcdFx0bGV0IGluZGV4ID0gMDtcblx0XHRcdGFyZ3NbMF0gPSBhcmdzWzBdLnJlcGxhY2UoLyUoW2EtekEtWiVdKS9nLCAobWF0Y2gsIGZvcm1hdCkgPT4ge1xuXHRcdFx0XHQvLyBJZiB3ZSBlbmNvdW50ZXIgYW4gZXNjYXBlZCAlIHRoZW4gZG9uJ3QgaW5jcmVhc2UgdGhlIGFycmF5IGluZGV4XG5cdFx0XHRcdGlmIChtYXRjaCA9PT0gJyUlJykge1xuXHRcdFx0XHRcdHJldHVybiAnJSc7XG5cdFx0XHRcdH1cblx0XHRcdFx0aW5kZXgrKztcblx0XHRcdFx0Y29uc3QgZm9ybWF0dGVyID0gY3JlYXRlRGVidWcuZm9ybWF0dGVyc1tmb3JtYXRdO1xuXHRcdFx0XHRpZiAodHlwZW9mIGZvcm1hdHRlciA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHRcdGNvbnN0IHZhbCA9IGFyZ3NbaW5kZXhdO1xuXHRcdFx0XHRcdG1hdGNoID0gZm9ybWF0dGVyLmNhbGwoc2VsZiwgdmFsKTtcblxuXHRcdFx0XHRcdC8vIE5vdyB3ZSBuZWVkIHRvIHJlbW92ZSBgYXJnc1tpbmRleF1gIHNpbmNlIGl0J3MgaW5saW5lZCBpbiB0aGUgYGZvcm1hdGBcblx0XHRcdFx0XHRhcmdzLnNwbGljZShpbmRleCwgMSk7XG5cdFx0XHRcdFx0aW5kZXgtLTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gbWF0Y2g7XG5cdFx0XHR9KTtcblxuXHRcdFx0Ly8gQXBwbHkgZW52LXNwZWNpZmljIGZvcm1hdHRpbmcgKGNvbG9ycywgZXRjLilcblx0XHRcdGNyZWF0ZURlYnVnLmZvcm1hdEFyZ3MuY2FsbChzZWxmLCBhcmdzKTtcblxuXHRcdFx0Y29uc3QgbG9nRm4gPSBzZWxmLmxvZyB8fCBjcmVhdGVEZWJ1Zy5sb2c7XG5cdFx0XHRsb2dGbi5hcHBseShzZWxmLCBhcmdzKTtcblx0XHR9XG5cblx0XHRkZWJ1Zy5uYW1lc3BhY2UgPSBuYW1lc3BhY2U7XG5cdFx0ZGVidWcudXNlQ29sb3JzID0gY3JlYXRlRGVidWcudXNlQ29sb3JzKCk7XG5cdFx0ZGVidWcuY29sb3IgPSBjcmVhdGVEZWJ1Zy5zZWxlY3RDb2xvcihuYW1lc3BhY2UpO1xuXHRcdGRlYnVnLmV4dGVuZCA9IGV4dGVuZDtcblx0XHRkZWJ1Zy5kZXN0cm95ID0gY3JlYXRlRGVidWcuZGVzdHJveTsgLy8gWFhYIFRlbXBvcmFyeS4gV2lsbCBiZSByZW1vdmVkIGluIHRoZSBuZXh0IG1ham9yIHJlbGVhc2UuXG5cblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZGVidWcsICdlbmFibGVkJywge1xuXHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcblx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG5cdFx0XHRnZXQ6ICgpID0+IHtcblx0XHRcdFx0aWYgKGVuYWJsZU92ZXJyaWRlICE9PSBudWxsKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGVuYWJsZU92ZXJyaWRlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChuYW1lc3BhY2VzQ2FjaGUgIT09IGNyZWF0ZURlYnVnLm5hbWVzcGFjZXMpIHtcblx0XHRcdFx0XHRuYW1lc3BhY2VzQ2FjaGUgPSBjcmVhdGVEZWJ1Zy5uYW1lc3BhY2VzO1xuXHRcdFx0XHRcdGVuYWJsZWRDYWNoZSA9IGNyZWF0ZURlYnVnLmVuYWJsZWQobmFtZXNwYWNlKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiBlbmFibGVkQ2FjaGU7XG5cdFx0XHR9LFxuXHRcdFx0c2V0OiB2ID0+IHtcblx0XHRcdFx0ZW5hYmxlT3ZlcnJpZGUgPSB2O1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0Ly8gRW52LXNwZWNpZmljIGluaXRpYWxpemF0aW9uIGxvZ2ljIGZvciBkZWJ1ZyBpbnN0YW5jZXNcblx0XHRpZiAodHlwZW9mIGNyZWF0ZURlYnVnLmluaXQgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdGNyZWF0ZURlYnVnLmluaXQoZGVidWcpO1xuXHRcdH1cblxuXHRcdHJldHVybiBkZWJ1Zztcblx0fVxuXG5cdGZ1bmN0aW9uIGV4dGVuZChuYW1lc3BhY2UsIGRlbGltaXRlcikge1xuXHRcdGNvbnN0IG5ld0RlYnVnID0gY3JlYXRlRGVidWcodGhpcy5uYW1lc3BhY2UgKyAodHlwZW9mIGRlbGltaXRlciA9PT0gJ3VuZGVmaW5lZCcgPyAnOicgOiBkZWxpbWl0ZXIpICsgbmFtZXNwYWNlKTtcblx0XHRuZXdEZWJ1Zy5sb2cgPSB0aGlzLmxvZztcblx0XHRyZXR1cm4gbmV3RGVidWc7XG5cdH1cblxuXHQvKipcblx0KiBFbmFibGVzIGEgZGVidWcgbW9kZSBieSBuYW1lc3BhY2VzLiBUaGlzIGNhbiBpbmNsdWRlIG1vZGVzXG5cdCogc2VwYXJhdGVkIGJ5IGEgY29sb24gYW5kIHdpbGRjYXJkcy5cblx0KlxuXHQqIEBwYXJhbSB7U3RyaW5nfSBuYW1lc3BhY2VzXG5cdCogQGFwaSBwdWJsaWNcblx0Ki9cblx0ZnVuY3Rpb24gZW5hYmxlKG5hbWVzcGFjZXMpIHtcblx0XHRjcmVhdGVEZWJ1Zy5zYXZlKG5hbWVzcGFjZXMpO1xuXHRcdGNyZWF0ZURlYnVnLm5hbWVzcGFjZXMgPSBuYW1lc3BhY2VzO1xuXG5cdFx0Y3JlYXRlRGVidWcubmFtZXMgPSBbXTtcblx0XHRjcmVhdGVEZWJ1Zy5za2lwcyA9IFtdO1xuXG5cdFx0Y29uc3Qgc3BsaXQgPSAodHlwZW9mIG5hbWVzcGFjZXMgPT09ICdzdHJpbmcnID8gbmFtZXNwYWNlcyA6ICcnKVxuXHRcdFx0LnRyaW0oKVxuXHRcdFx0LnJlcGxhY2UoL1xccysvZywgJywnKVxuXHRcdFx0LnNwbGl0KCcsJylcblx0XHRcdC5maWx0ZXIoQm9vbGVhbik7XG5cblx0XHRmb3IgKGNvbnN0IG5zIG9mIHNwbGl0KSB7XG5cdFx0XHRpZiAobnNbMF0gPT09ICctJykge1xuXHRcdFx0XHRjcmVhdGVEZWJ1Zy5za2lwcy5wdXNoKG5zLnNsaWNlKDEpKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNyZWF0ZURlYnVnLm5hbWVzLnB1c2gobnMpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgdGhlIGdpdmVuIHN0cmluZyBtYXRjaGVzIGEgbmFtZXNwYWNlIHRlbXBsYXRlLCBob25vcmluZ1xuXHQgKiBhc3Rlcmlza3MgYXMgd2lsZGNhcmRzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc2VhcmNoXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSB0ZW1wbGF0ZVxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0ZnVuY3Rpb24gbWF0Y2hlc1RlbXBsYXRlKHNlYXJjaCwgdGVtcGxhdGUpIHtcblx0XHRsZXQgc2VhcmNoSW5kZXggPSAwO1xuXHRcdGxldCB0ZW1wbGF0ZUluZGV4ID0gMDtcblx0XHRsZXQgc3RhckluZGV4ID0gLTE7XG5cdFx0bGV0IG1hdGNoSW5kZXggPSAwO1xuXG5cdFx0d2hpbGUgKHNlYXJjaEluZGV4IDwgc2VhcmNoLmxlbmd0aCkge1xuXHRcdFx0aWYgKHRlbXBsYXRlSW5kZXggPCB0ZW1wbGF0ZS5sZW5ndGggJiYgKHRlbXBsYXRlW3RlbXBsYXRlSW5kZXhdID09PSBzZWFyY2hbc2VhcmNoSW5kZXhdIHx8IHRlbXBsYXRlW3RlbXBsYXRlSW5kZXhdID09PSAnKicpKSB7XG5cdFx0XHRcdC8vIE1hdGNoIGNoYXJhY3RlciBvciBwcm9jZWVkIHdpdGggd2lsZGNhcmRcblx0XHRcdFx0aWYgKHRlbXBsYXRlW3RlbXBsYXRlSW5kZXhdID09PSAnKicpIHtcblx0XHRcdFx0XHRzdGFySW5kZXggPSB0ZW1wbGF0ZUluZGV4O1xuXHRcdFx0XHRcdG1hdGNoSW5kZXggPSBzZWFyY2hJbmRleDtcblx0XHRcdFx0XHR0ZW1wbGF0ZUluZGV4Kys7IC8vIFNraXAgdGhlICcqJ1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHNlYXJjaEluZGV4Kys7XG5cdFx0XHRcdFx0dGVtcGxhdGVJbmRleCsrO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYgKHN0YXJJbmRleCAhPT0gLTEpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1uZWdhdGVkLWNvbmRpdGlvblxuXHRcdFx0XHQvLyBCYWNrdHJhY2sgdG8gdGhlIGxhc3QgJyonIGFuZCB0cnkgdG8gbWF0Y2ggbW9yZSBjaGFyYWN0ZXJzXG5cdFx0XHRcdHRlbXBsYXRlSW5kZXggPSBzdGFySW5kZXggKyAxO1xuXHRcdFx0XHRtYXRjaEluZGV4Kys7XG5cdFx0XHRcdHNlYXJjaEluZGV4ID0gbWF0Y2hJbmRleDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTsgLy8gTm8gbWF0Y2hcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBIYW5kbGUgdHJhaWxpbmcgJyonIGluIHRlbXBsYXRlXG5cdFx0d2hpbGUgKHRlbXBsYXRlSW5kZXggPCB0ZW1wbGF0ZS5sZW5ndGggJiYgdGVtcGxhdGVbdGVtcGxhdGVJbmRleF0gPT09ICcqJykge1xuXHRcdFx0dGVtcGxhdGVJbmRleCsrO1xuXHRcdH1cblxuXHRcdHJldHVybiB0ZW1wbGF0ZUluZGV4ID09PSB0ZW1wbGF0ZS5sZW5ndGg7XG5cdH1cblxuXHQvKipcblx0KiBEaXNhYmxlIGRlYnVnIG91dHB1dC5cblx0KlxuXHQqIEByZXR1cm4ge1N0cmluZ30gbmFtZXNwYWNlc1xuXHQqIEBhcGkgcHVibGljXG5cdCovXG5cdGZ1bmN0aW9uIGRpc2FibGUoKSB7XG5cdFx0Y29uc3QgbmFtZXNwYWNlcyA9IFtcblx0XHRcdC4uLmNyZWF0ZURlYnVnLm5hbWVzLFxuXHRcdFx0Li4uY3JlYXRlRGVidWcuc2tpcHMubWFwKG5hbWVzcGFjZSA9PiAnLScgKyBuYW1lc3BhY2UpXG5cdFx0XS5qb2luKCcsJyk7XG5cdFx0Y3JlYXRlRGVidWcuZW5hYmxlKCcnKTtcblx0XHRyZXR1cm4gbmFtZXNwYWNlcztcblx0fVxuXG5cdC8qKlxuXHQqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gbW9kZSBuYW1lIGlzIGVuYWJsZWQsIGZhbHNlIG90aGVyd2lzZS5cblx0KlxuXHQqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG5cdCogQHJldHVybiB7Qm9vbGVhbn1cblx0KiBAYXBpIHB1YmxpY1xuXHQqL1xuXHRmdW5jdGlvbiBlbmFibGVkKG5hbWUpIHtcblx0XHRmb3IgKGNvbnN0IHNraXAgb2YgY3JlYXRlRGVidWcuc2tpcHMpIHtcblx0XHRcdGlmIChtYXRjaGVzVGVtcGxhdGUobmFtZSwgc2tpcCkpIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGZvciAoY29uc3QgbnMgb2YgY3JlYXRlRGVidWcubmFtZXMpIHtcblx0XHRcdGlmIChtYXRjaGVzVGVtcGxhdGUobmFtZSwgbnMpKSB7XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdC8qKlxuXHQqIENvZXJjZSBgdmFsYC5cblx0KlxuXHQqIEBwYXJhbSB7TWl4ZWR9IHZhbFxuXHQqIEByZXR1cm4ge01peGVkfVxuXHQqIEBhcGkgcHJpdmF0ZVxuXHQqL1xuXHRmdW5jdGlvbiBjb2VyY2UodmFsKSB7XG5cdFx0aWYgKHZhbCBpbnN0YW5jZW9mIEVycm9yKSB7XG5cdFx0XHRyZXR1cm4gdmFsLnN0YWNrIHx8IHZhbC5tZXNzYWdlO1xuXHRcdH1cblx0XHRyZXR1cm4gdmFsO1xuXHR9XG5cblx0LyoqXG5cdCogWFhYIERPIE5PVCBVU0UuIFRoaXMgaXMgYSB0ZW1wb3Jhcnkgc3R1YiBmdW5jdGlvbi5cblx0KiBYWFggSXQgV0lMTCBiZSByZW1vdmVkIGluIHRoZSBuZXh0IG1ham9yIHJlbGVhc2UuXG5cdCovXG5cdGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG5cdFx0Y29uc29sZS53YXJuKCdJbnN0YW5jZSBtZXRob2QgYGRlYnVnLmRlc3Ryb3koKWAgaXMgZGVwcmVjYXRlZCBhbmQgbm8gbG9uZ2VyIGRvZXMgYW55dGhpbmcuIEl0IHdpbGwgYmUgcmVtb3ZlZCBpbiB0aGUgbmV4dCBtYWpvciB2ZXJzaW9uIG9mIGBkZWJ1Z2AuJyk7XG5cdH1cblxuXHRjcmVhdGVEZWJ1Zy5lbmFibGUoY3JlYXRlRGVidWcubG9hZCgpKTtcblxuXHRyZXR1cm4gY3JlYXRlRGVidWc7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc2V0dXA7XG4iLCIvKiBlc2xpbnQtZW52IGJyb3dzZXIgKi9cblxuLyoqXG4gKiBUaGlzIGlzIHRoZSB3ZWIgYnJvd3NlciBpbXBsZW1lbnRhdGlvbiBvZiBgZGVidWcoKWAuXG4gKi9cblxuZXhwb3J0cy5mb3JtYXRBcmdzID0gZm9ybWF0QXJncztcbmV4cG9ydHMuc2F2ZSA9IHNhdmU7XG5leHBvcnRzLmxvYWQgPSBsb2FkO1xuZXhwb3J0cy51c2VDb2xvcnMgPSB1c2VDb2xvcnM7XG5leHBvcnRzLnN0b3JhZ2UgPSBsb2NhbHN0b3JhZ2UoKTtcbmV4cG9ydHMuZGVzdHJveSA9ICgoKSA9PiB7XG5cdGxldCB3YXJuZWQgPSBmYWxzZTtcblxuXHRyZXR1cm4gKCkgPT4ge1xuXHRcdGlmICghd2FybmVkKSB7XG5cdFx0XHR3YXJuZWQgPSB0cnVlO1xuXHRcdFx0Y29uc29sZS53YXJuKCdJbnN0YW5jZSBtZXRob2QgYGRlYnVnLmRlc3Ryb3koKWAgaXMgZGVwcmVjYXRlZCBhbmQgbm8gbG9uZ2VyIGRvZXMgYW55dGhpbmcuIEl0IHdpbGwgYmUgcmVtb3ZlZCBpbiB0aGUgbmV4dCBtYWpvciB2ZXJzaW9uIG9mIGBkZWJ1Z2AuJyk7XG5cdFx0fVxuXHR9O1xufSkoKTtcblxuLyoqXG4gKiBDb2xvcnMuXG4gKi9cblxuZXhwb3J0cy5jb2xvcnMgPSBbXG5cdCcjMDAwMENDJyxcblx0JyMwMDAwRkYnLFxuXHQnIzAwMzNDQycsXG5cdCcjMDAzM0ZGJyxcblx0JyMwMDY2Q0MnLFxuXHQnIzAwNjZGRicsXG5cdCcjMDA5OUNDJyxcblx0JyMwMDk5RkYnLFxuXHQnIzAwQ0MwMCcsXG5cdCcjMDBDQzMzJyxcblx0JyMwMENDNjYnLFxuXHQnIzAwQ0M5OScsXG5cdCcjMDBDQ0NDJyxcblx0JyMwMENDRkYnLFxuXHQnIzMzMDBDQycsXG5cdCcjMzMwMEZGJyxcblx0JyMzMzMzQ0MnLFxuXHQnIzMzMzNGRicsXG5cdCcjMzM2NkNDJyxcblx0JyMzMzY2RkYnLFxuXHQnIzMzOTlDQycsXG5cdCcjMzM5OUZGJyxcblx0JyMzM0NDMDAnLFxuXHQnIzMzQ0MzMycsXG5cdCcjMzNDQzY2Jyxcblx0JyMzM0NDOTknLFxuXHQnIzMzQ0NDQycsXG5cdCcjMzNDQ0ZGJyxcblx0JyM2NjAwQ0MnLFxuXHQnIzY2MDBGRicsXG5cdCcjNjYzM0NDJyxcblx0JyM2NjMzRkYnLFxuXHQnIzY2Q0MwMCcsXG5cdCcjNjZDQzMzJyxcblx0JyM5OTAwQ0MnLFxuXHQnIzk5MDBGRicsXG5cdCcjOTkzM0NDJyxcblx0JyM5OTMzRkYnLFxuXHQnIzk5Q0MwMCcsXG5cdCcjOTlDQzMzJyxcblx0JyNDQzAwMDAnLFxuXHQnI0NDMDAzMycsXG5cdCcjQ0MwMDY2Jyxcblx0JyNDQzAwOTknLFxuXHQnI0NDMDBDQycsXG5cdCcjQ0MwMEZGJyxcblx0JyNDQzMzMDAnLFxuXHQnI0NDMzMzMycsXG5cdCcjQ0MzMzY2Jyxcblx0JyNDQzMzOTknLFxuXHQnI0NDMzNDQycsXG5cdCcjQ0MzM0ZGJyxcblx0JyNDQzY2MDAnLFxuXHQnI0NDNjYzMycsXG5cdCcjQ0M5OTAwJyxcblx0JyNDQzk5MzMnLFxuXHQnI0NDQ0MwMCcsXG5cdCcjQ0NDQzMzJyxcblx0JyNGRjAwMDAnLFxuXHQnI0ZGMDAzMycsXG5cdCcjRkYwMDY2Jyxcblx0JyNGRjAwOTknLFxuXHQnI0ZGMDBDQycsXG5cdCcjRkYwMEZGJyxcblx0JyNGRjMzMDAnLFxuXHQnI0ZGMzMzMycsXG5cdCcjRkYzMzY2Jyxcblx0JyNGRjMzOTknLFxuXHQnI0ZGMzNDQycsXG5cdCcjRkYzM0ZGJyxcblx0JyNGRjY2MDAnLFxuXHQnI0ZGNjYzMycsXG5cdCcjRkY5OTAwJyxcblx0JyNGRjk5MzMnLFxuXHQnI0ZGQ0MwMCcsXG5cdCcjRkZDQzMzJ1xuXTtcblxuLyoqXG4gKiBDdXJyZW50bHkgb25seSBXZWJLaXQtYmFzZWQgV2ViIEluc3BlY3RvcnMsIEZpcmVmb3ggPj0gdjMxLFxuICogYW5kIHRoZSBGaXJlYnVnIGV4dGVuc2lvbiAoYW55IEZpcmVmb3ggdmVyc2lvbikgYXJlIGtub3duXG4gKiB0byBzdXBwb3J0IFwiJWNcIiBDU1MgY3VzdG9taXphdGlvbnMuXG4gKlxuICogVE9ETzogYWRkIGEgYGxvY2FsU3RvcmFnZWAgdmFyaWFibGUgdG8gZXhwbGljaXRseSBlbmFibGUvZGlzYWJsZSBjb2xvcnNcbiAqL1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29tcGxleGl0eVxuZnVuY3Rpb24gdXNlQ29sb3JzKCkge1xuXHQvLyBOQjogSW4gYW4gRWxlY3Ryb24gcHJlbG9hZCBzY3JpcHQsIGRvY3VtZW50IHdpbGwgYmUgZGVmaW5lZCBidXQgbm90IGZ1bGx5XG5cdC8vIGluaXRpYWxpemVkLiBTaW5jZSB3ZSBrbm93IHdlJ3JlIGluIENocm9tZSwgd2UnbGwganVzdCBkZXRlY3QgdGhpcyBjYXNlXG5cdC8vIGV4cGxpY2l0bHlcblx0aWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5wcm9jZXNzICYmICh3aW5kb3cucHJvY2Vzcy50eXBlID09PSAncmVuZGVyZXInIHx8IHdpbmRvdy5wcm9jZXNzLl9fbndqcykpIHtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXG5cdC8vIEludGVybmV0IEV4cGxvcmVyIGFuZCBFZGdlIGRvIG5vdCBzdXBwb3J0IGNvbG9ycy5cblx0aWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIG5hdmlnYXRvci51c2VyQWdlbnQgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLm1hdGNoKC8oZWRnZXx0cmlkZW50KVxcLyhcXGQrKS8pKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0bGV0IG07XG5cblx0Ly8gSXMgd2Via2l0PyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xNjQ1OTYwNi8zNzY3NzNcblx0Ly8gZG9jdW1lbnQgaXMgdW5kZWZpbmVkIGluIHJlYWN0LW5hdGl2ZTogaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlYWN0LW5hdGl2ZS9wdWxsLzE2MzJcblx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJldHVybi1hc3NpZ25cblx0cmV0dXJuICh0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLldlYmtpdEFwcGVhcmFuY2UpIHx8XG5cdFx0Ly8gSXMgZmlyZWJ1Zz8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMzk4MTIwLzM3Njc3M1xuXHRcdCh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuY29uc29sZSAmJiAod2luZG93LmNvbnNvbGUuZmlyZWJ1ZyB8fCAod2luZG93LmNvbnNvbGUuZXhjZXB0aW9uICYmIHdpbmRvdy5jb25zb2xlLnRhYmxlKSkpIHx8XG5cdFx0Ly8gSXMgZmlyZWZveCA+PSB2MzE/XG5cdFx0Ly8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9Ub29scy9XZWJfQ29uc29sZSNTdHlsaW5nX21lc3NhZ2VzXG5cdFx0KHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIG5hdmlnYXRvci51c2VyQWdlbnQgJiYgKG0gPSBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkubWF0Y2goL2ZpcmVmb3hcXC8oXFxkKykvKSkgJiYgcGFyc2VJbnQobVsxXSwgMTApID49IDMxKSB8fFxuXHRcdC8vIERvdWJsZSBjaGVjayB3ZWJraXQgaW4gdXNlckFnZW50IGp1c3QgaW4gY2FzZSB3ZSBhcmUgaW4gYSB3b3JrZXJcblx0XHQodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudCAmJiBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkubWF0Y2goL2FwcGxld2Via2l0XFwvKFxcZCspLykpO1xufVxuXG4vKipcbiAqIENvbG9yaXplIGxvZyBhcmd1bWVudHMgaWYgZW5hYmxlZC5cbiAqXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmZ1bmN0aW9uIGZvcm1hdEFyZ3MoYXJncykge1xuXHRhcmdzWzBdID0gKHRoaXMudXNlQ29sb3JzID8gJyVjJyA6ICcnKSArXG5cdFx0dGhpcy5uYW1lc3BhY2UgK1xuXHRcdCh0aGlzLnVzZUNvbG9ycyA/ICcgJWMnIDogJyAnKSArXG5cdFx0YXJnc1swXSArXG5cdFx0KHRoaXMudXNlQ29sb3JzID8gJyVjICcgOiAnICcpICtcblx0XHQnKycgKyBtb2R1bGUuZXhwb3J0cy5odW1hbml6ZSh0aGlzLmRpZmYpO1xuXG5cdGlmICghdGhpcy51c2VDb2xvcnMpIHtcblx0XHRyZXR1cm47XG5cdH1cblxuXHRjb25zdCBjID0gJ2NvbG9yOiAnICsgdGhpcy5jb2xvcjtcblx0YXJncy5zcGxpY2UoMSwgMCwgYywgJ2NvbG9yOiBpbmhlcml0Jyk7XG5cblx0Ly8gVGhlIGZpbmFsIFwiJWNcIiBpcyBzb21ld2hhdCB0cmlja3ksIGJlY2F1c2UgdGhlcmUgY291bGQgYmUgb3RoZXJcblx0Ly8gYXJndW1lbnRzIHBhc3NlZCBlaXRoZXIgYmVmb3JlIG9yIGFmdGVyIHRoZSAlYywgc28gd2UgbmVlZCB0b1xuXHQvLyBmaWd1cmUgb3V0IHRoZSBjb3JyZWN0IGluZGV4IHRvIGluc2VydCB0aGUgQ1NTIGludG9cblx0bGV0IGluZGV4ID0gMDtcblx0bGV0IGxhc3RDID0gMDtcblx0YXJnc1swXS5yZXBsYWNlKC8lW2EtekEtWiVdL2csIG1hdGNoID0+IHtcblx0XHRpZiAobWF0Y2ggPT09ICclJScpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0aW5kZXgrKztcblx0XHRpZiAobWF0Y2ggPT09ICclYycpIHtcblx0XHRcdC8vIFdlIG9ubHkgYXJlIGludGVyZXN0ZWQgaW4gdGhlICpsYXN0KiAlY1xuXHRcdFx0Ly8gKHRoZSB1c2VyIG1heSBoYXZlIHByb3ZpZGVkIHRoZWlyIG93bilcblx0XHRcdGxhc3RDID0gaW5kZXg7XG5cdFx0fVxuXHR9KTtcblxuXHRhcmdzLnNwbGljZShsYXN0QywgMCwgYyk7XG59XG5cbi8qKlxuICogSW52b2tlcyBgY29uc29sZS5kZWJ1ZygpYCB3aGVuIGF2YWlsYWJsZS5cbiAqIE5vLW9wIHdoZW4gYGNvbnNvbGUuZGVidWdgIGlzIG5vdCBhIFwiZnVuY3Rpb25cIi5cbiAqIElmIGBjb25zb2xlLmRlYnVnYCBpcyBub3QgYXZhaWxhYmxlLCBmYWxscyBiYWNrXG4gKiB0byBgY29uc29sZS5sb2dgLlxuICpcbiAqIEBhcGkgcHVibGljXG4gKi9cbmV4cG9ydHMubG9nID0gY29uc29sZS5kZWJ1ZyB8fCBjb25zb2xlLmxvZyB8fCAoKCkgPT4ge30pO1xuXG4vKipcbiAqIFNhdmUgYG5hbWVzcGFjZXNgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lc3BhY2VzXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gc2F2ZShuYW1lc3BhY2VzKSB7XG5cdHRyeSB7XG5cdFx0aWYgKG5hbWVzcGFjZXMpIHtcblx0XHRcdGV4cG9ydHMuc3RvcmFnZS5zZXRJdGVtKCdkZWJ1ZycsIG5hbWVzcGFjZXMpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRleHBvcnRzLnN0b3JhZ2UucmVtb3ZlSXRlbSgnZGVidWcnKTtcblx0XHR9XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0Ly8gU3dhbGxvd1xuXHRcdC8vIFhYWCAoQFFpeC0pIHNob3VsZCB3ZSBiZSBsb2dnaW5nIHRoZXNlP1xuXHR9XG59XG5cbi8qKlxuICogTG9hZCBgbmFtZXNwYWNlc2AuXG4gKlxuICogQHJldHVybiB7U3RyaW5nfSByZXR1cm5zIHRoZSBwcmV2aW91c2x5IHBlcnNpc3RlZCBkZWJ1ZyBtb2Rlc1xuICogQGFwaSBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGxvYWQoKSB7XG5cdGxldCByO1xuXHR0cnkge1xuXHRcdHIgPSBleHBvcnRzLnN0b3JhZ2UuZ2V0SXRlbSgnZGVidWcnKSB8fCBleHBvcnRzLnN0b3JhZ2UuZ2V0SXRlbSgnREVCVUcnKSA7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0Ly8gU3dhbGxvd1xuXHRcdC8vIFhYWCAoQFFpeC0pIHNob3VsZCB3ZSBiZSBsb2dnaW5nIHRoZXNlP1xuXHR9XG5cblx0Ly8gSWYgZGVidWcgaXNuJ3Qgc2V0IGluIExTLCBhbmQgd2UncmUgaW4gRWxlY3Ryb24sIHRyeSB0byBsb2FkICRERUJVR1xuXHRpZiAoIXIgJiYgdHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmICdlbnYnIGluIHByb2Nlc3MpIHtcblx0XHRyID0gcHJvY2Vzcy5lbnYuREVCVUc7XG5cdH1cblxuXHRyZXR1cm4gcjtcbn1cblxuLyoqXG4gKiBMb2NhbHN0b3JhZ2UgYXR0ZW1wdHMgdG8gcmV0dXJuIHRoZSBsb2NhbHN0b3JhZ2UuXG4gKlxuICogVGhpcyBpcyBuZWNlc3NhcnkgYmVjYXVzZSBzYWZhcmkgdGhyb3dzXG4gKiB3aGVuIGEgdXNlciBkaXNhYmxlcyBjb29raWVzL2xvY2Fsc3RvcmFnZVxuICogYW5kIHlvdSBhdHRlbXB0IHRvIGFjY2VzcyBpdC5cbiAqXG4gKiBAcmV0dXJuIHtMb2NhbFN0b3JhZ2V9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBsb2NhbHN0b3JhZ2UoKSB7XG5cdHRyeSB7XG5cdFx0Ly8gVFZNTEtpdCAoQXBwbGUgVFYgSlMgUnVudGltZSkgZG9lcyBub3QgaGF2ZSBhIHdpbmRvdyBvYmplY3QsIGp1c3QgbG9jYWxTdG9yYWdlIGluIHRoZSBnbG9iYWwgY29udGV4dFxuXHRcdC8vIFRoZSBCcm93c2VyIGFsc28gaGFzIGxvY2FsU3RvcmFnZSBpbiB0aGUgZ2xvYmFsIGNvbnRleHQuXG5cdFx0cmV0dXJuIGxvY2FsU3RvcmFnZTtcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHQvLyBTd2FsbG93XG5cdFx0Ly8gWFhYIChAUWl4LSkgc2hvdWxkIHdlIGJlIGxvZ2dpbmcgdGhlc2U/XG5cdH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2NvbW1vbicpKGV4cG9ydHMpO1xuXG5jb25zdCB7Zm9ybWF0dGVyc30gPSBtb2R1bGUuZXhwb3J0cztcblxuLyoqXG4gKiBNYXAgJWogdG8gYEpTT04uc3RyaW5naWZ5KClgLCBzaW5jZSBubyBXZWIgSW5zcGVjdG9ycyBkbyB0aGF0IGJ5IGRlZmF1bHQuXG4gKi9cblxuZm9ybWF0dGVycy5qID0gZnVuY3Rpb24gKHYpIHtcblx0dHJ5IHtcblx0XHRyZXR1cm4gSlNPTi5zdHJpbmdpZnkodik7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0cmV0dXJuICdbVW5leHBlY3RlZEpTT05QYXJzZUVycm9yXTogJyArIGVycm9yLm1lc3NhZ2U7XG5cdH1cbn07XG4iLCJpbXBvcnQgeyBsb2FkRW52IGFzIF9sb2FkRW52LCBpc0Jyb3dzZXJFbnZpcm9ubWVudCwgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlL19zaGltcyc7XG4vKipcbiAqIExvYWRzIGVudmlyb25tZW50IHZhcmlhYmxlcyBmcm9tIHRoZSBwcm9jZXNzIGVudmlyb25tZW50LlxuICpcbiAqIEByZXR1cm5zIEFuIG9iamVjdCBjb250YWluaW5nIHRoZSBlbnZpcm9ubWVudCB2YXJpYWJsZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsb2FkRW52KCkge1xuICAgIHJldHVybiBfbG9hZEVudigpO1xufVxuLyoqXG4gKiBDaGVja3MgaWYgYSBmbGFnIGlzIGVuYWJsZWQgaW4gdGhlIGVudmlyb25tZW50LlxuICpcbiAqIEBwYXJhbSBmbGFnTmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBmbGFnIHRvIGNoZWNrLlxuICogQHJldHVybnMgYHRydWVgIGlmIHRoZSBmbGFnIGlzIGVuYWJsZWQsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICovXG5mdW5jdGlvbiBpc0VuYWJsZWQoZmxhZ05hbWUpIHtcbiAgICBjb25zdCBlbnYgPSBsb2FkRW52KCk7XG4gICAgcmV0dXJuICh0eXBlb2YgZW52ICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAoZW52W2ZsYWdOYW1lXSA9PT0gJ3RydWUnIHx8IGVudltmbGFnTmFtZV0gPT09ICcxJykpO1xufVxuLyoqXG4gKiBHbG9iYWwgY29uZmlndXJhdGlvbiBmb3IgdHJhY2luZy5cbiAqL1xuZXhwb3J0IGNvbnN0IHRyYWNpbmcgPSB7XG4gICAgZ2V0IGRpc2FibGVkKCkge1xuICAgICAgICBpZiAoaXNCcm93c2VyRW52aXJvbm1lbnQoKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobG9hZEVudigpLk5PREVfRU5WID09PSAndGVzdCcpIHtcbiAgICAgICAgICAgIC8vIGRpc2FibGluZyBieSBkZWZhdWx0IGluIHRlc3RzXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaXNFbmFibGVkKCdPUEVOQUlfQUdFTlRTX0RJU0FCTEVfVFJBQ0lORycpO1xuICAgIH0sXG59O1xuLyoqXG4gKiBHbG9iYWwgY29uZmlndXJhdGlvbiBmb3IgbG9nZ2luZy5cbiAqL1xuZXhwb3J0IGNvbnN0IGxvZ2dpbmcgPSB7XG4gICAgZ2V0IGRvbnRMb2dNb2RlbERhdGEoKSB7XG4gICAgICAgIHJldHVybiBpc0VuYWJsZWQoJ09QRU5BSV9BR0VOVFNfRE9OVF9MT0dfTU9ERUxfREFUQScpO1xuICAgIH0sXG4gICAgZ2V0IGRvbnRMb2dUb29sRGF0YSgpIHtcbiAgICAgICAgcmV0dXJuIGlzRW5hYmxlZCgnT1BFTkFJX0FHRU5UU19ET05UX0xPR19UT09MX0RBVEEnKTtcbiAgICB9LFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbmZpZy5tanMubWFwIiwiaW1wb3J0IGRlYnVnIGZyb20gJ2RlYnVnJztcbmltcG9ydCB7IGxvZ2dpbmcgfSBmcm9tIFwiLi9jb25maWcubWpzXCI7XG4vKipcbiAqIEJ5IGRlZmF1bHQgd2UgZG9uJ3QgbG9nIExMTSBpbnB1dHMvb3V0cHV0cywgdG8gcHJldmVudCBleHBvc2luZyBzZW5zaXRpdmUgZGF0YS4gU2V0IHRoaXMgZmxhZ1xuICogdG8gZW5hYmxlIGxvZ2dpbmcgdGhlbS5cbiAqL1xuY29uc3QgZG9udExvZ01vZGVsRGF0YSA9IGxvZ2dpbmcuZG9udExvZ01vZGVsRGF0YTtcbi8qKlxuICogQnkgZGVmYXVsdCB3ZSBkb24ndCBsb2cgdG9vbCBpbnB1dHMvb3V0cHV0cywgdG8gcHJldmVudCBleHBvc2luZyBzZW5zaXRpdmUgZGF0YS4gU2V0IHRoaXMgZmxhZ1xuICogdG8gZW5hYmxlIGxvZ2dpbmcgdGhlbS5cbiAqL1xuY29uc3QgZG9udExvZ1Rvb2xEYXRhID0gbG9nZ2luZy5kb250TG9nVG9vbERhdGE7XG4vKipcbiAqIEdldCBhIGxvZ2dlciBmb3IgYSBnaXZlbiBwYWNrYWdlLlxuICpcbiAqIEBwYXJhbSBuYW1lc3BhY2UgLSB0aGUgbmFtZXNwYWNlIHRvIHVzZSBmb3IgdGhlIGxvZ2dlci5cbiAqIEByZXR1cm5zIEEgbG9nZ2VyIG9iamVjdCB3aXRoIGBkZWJ1Z2AgYW5kIGBlcnJvcmAgbWV0aG9kcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldExvZ2dlcihuYW1lc3BhY2UgPSAnb3BlbmFpLWFnZW50cycpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgIGRlYnVnOiBkZWJ1ZyhuYW1lc3BhY2UpLFxuICAgICAgICBlcnJvcjogY29uc29sZS5lcnJvcixcbiAgICAgICAgd2FybjogY29uc29sZS53YXJuLFxuICAgICAgICBkb250TG9nTW9kZWxEYXRhLFxuICAgICAgICBkb250TG9nVG9vbERhdGEsXG4gICAgfTtcbn1cbmV4cG9ydCBjb25zdCBsb2dnZXIgPSBnZXRMb2dnZXIoJ29wZW5haS1hZ2VudHM6Y29yZScpO1xuZXhwb3J0IGRlZmF1bHQgbG9nZ2VyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bG9nZ2VyLm1qcy5tYXAiLCJjb25zdCBCWVRFX1BSRVZJRVdfTElNSVQgPSAyMDtcbmV4cG9ydCBmdW5jdGlvbiB0b1NtYXJ0U3RyaW5nKHZhbHVlKSB7XG4gICAgLy8gUHJvZHVjZSBhIGh1bWFuLWZyaWVuZGx5IHN0cmluZyByZXByZXNlbnRhdGlvbiB3aGlsZSBwcmVzZXJ2aW5nIGVub3VnaCBkZXRhaWwgZm9yIGRlYnVnZ2luZyB3b3JrZmxvd3MuXG4gICAgaWYgKHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIFN0cmluZyh2YWx1ZSk7XG4gICAgfVxuICAgIGlmIChpc0FycmF5QnVmZmVyTGlrZSh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIGZvcm1hdEJ5dGVBcnJheShuZXcgVWludDhBcnJheSh2YWx1ZSkpO1xuICAgIH1cbiAgICBpZiAoaXNBcnJheUJ1ZmZlclZpZXcodmFsdWUpKSB7XG4gICAgICAgIGNvbnN0IHZpZXcgPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIGZvcm1hdEJ5dGVBcnJheShuZXcgVWludDhBcnJheSh2aWV3LmJ1ZmZlciwgdmlldy5ieXRlT2Zmc2V0LCB2aWV3LmJ5dGVMZW5ndGgpKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0Jykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHZhbHVlLCBzbWFydFN0cmluZ1JlcGxhY2VyKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoX2UpIHtcbiAgICAgICAgICAgIHJldHVybiAnW29iamVjdCB3aXRoIGNpcmN1bGFyIHJlZmVyZW5jZXNdJztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gU3RyaW5nKHZhbHVlKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0FycmF5QnVmZmVyTGlrZSh2YWx1ZSkge1xuICAgIC8vIERldGVjdCByYXcgQXJyYXlCdWZmZXItYmFja2VkIHBheWxvYWRzIHNvIGNhbGxlcnMgY2FuIGdlbmVyYXRlIGZ1bGwgcHJldmlld3MgcmF0aGVyIHRoYW4gdHJ1bmNhdGVkIGhhc2hlcy5cbiAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgY29uc3Qgc2hhcmVkQXJyYXlCdWZmZXJDdG9yID0gZ2xvYmFsVGhpcy5TaGFyZWRBcnJheUJ1ZmZlcjtcbiAgICByZXR1cm4gQm9vbGVhbihzaGFyZWRBcnJheUJ1ZmZlckN0b3IgJiYgdmFsdWUgaW5zdGFuY2VvZiBzaGFyZWRBcnJheUJ1ZmZlckN0b3IpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzQXJyYXlCdWZmZXJWaWV3KHZhbHVlKSB7XG4gICAgLy8gVHJlYXQgdHlwZWQgYXJyYXkgdmlld3MgYXMgYmluYXJ5IGRhdGEgZm9yIGNvbnNpc3RlbnQgc2VyaWFsaXphdGlvbi5cbiAgICByZXR1cm4gdHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJiBBcnJheUJ1ZmZlci5pc1ZpZXcodmFsdWUpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzU2VyaWFsaXplZEJ1ZmZlclNuYXBzaG90KHZhbHVlKSB7XG4gICAgLy8gU3VwcG9ydCBzZXJpYWxpemVkIEJ1ZmZlciBzbmFwc2hvdHMgKGUuZy4sIGZyb20gSlNPTi5wYXJzZSkgZW1pdHRlZCBieSBzb21lIHRvb2wgb3V0cHV0cy5cbiAgICByZXR1cm4gKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgdmFsdWUgIT09IG51bGwgJiZcbiAgICAgICAgdmFsdWUudHlwZSA9PT0gJ0J1ZmZlcicgJiZcbiAgICAgICAgQXJyYXkuaXNBcnJheSh2YWx1ZS5kYXRhKSk7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNOb2RlQnVmZmVyKHZhbHVlKSB7XG4gICAgLy8gRGV0ZWN0IHJ1bnRpbWUgQnVmZmVycyB3aXRob3V0IGltcG9ydGluZyBub2RlLXNwZWNpZmljIHNoaW1zLCBoYW5kbGluZyBicm93c2VyIGJ1aWxkcyBncmFjZWZ1bGx5LlxuICAgIGNvbnN0IGJ1ZmZlckN0b3IgPSBnbG9iYWxUaGlzLkJ1ZmZlcjtcbiAgICByZXR1cm4gQm9vbGVhbihidWZmZXJDdG9yICYmXG4gICAgICAgIHR5cGVvZiBidWZmZXJDdG9yLmlzQnVmZmVyID09PSAnZnVuY3Rpb24nICYmXG4gICAgICAgIGJ1ZmZlckN0b3IuaXNCdWZmZXIodmFsdWUpKTtcbn1cbmZ1bmN0aW9uIGZvcm1hdEJ5dGVBcnJheShieXRlcykge1xuICAgIGlmIChieXRlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuICdbYnl0ZSBhcnJheSAoMCBieXRlcyldJztcbiAgICB9XG4gICAgY29uc3QgcHJldmlld0xlbmd0aCA9IE1hdGgubWluKGJ5dGVzLmxlbmd0aCwgQllURV9QUkVWSUVXX0xJTUlUKTtcbiAgICBjb25zdCBwcmV2aWV3UGFydHMgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHByZXZpZXdMZW5ndGg7IGkrKykge1xuICAgICAgICBwcmV2aWV3UGFydHMucHVzaChmb3JtYXRCeXRlKGJ5dGVzW2ldKSk7XG4gICAgfVxuICAgIGNvbnN0IGVsbGlwc2lzID0gYnl0ZXMubGVuZ3RoID4gQllURV9QUkVWSUVXX0xJTUlUID8gJyDigKYnIDogJyc7XG4gICAgY29uc3QgcHJldmlldyA9IHByZXZpZXdQYXJ0cy5qb2luKCcgJyk7XG4gICAgcmV0dXJuIGBbYnl0ZSBhcnJheSAke3ByZXZpZXd9JHtlbGxpcHNpc30gKCR7Ynl0ZXMubGVuZ3RofSBieXRlcyldYDtcbn1cbmZ1bmN0aW9uIGZvcm1hdEJ5dGUoYnl0ZSkge1xuICAgIHJldHVybiBgMHgke2J5dGUudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsICcwJyl9YDtcbn1cbmZ1bmN0aW9uIHNtYXJ0U3RyaW5nUmVwbGFjZXIoX2tleSwgbmVzdGVkVmFsdWUpIHtcbiAgICBpZiAoaXNBcnJheUJ1ZmZlckxpa2UobmVzdGVkVmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBmb3JtYXRCeXRlQXJyYXkobmV3IFVpbnQ4QXJyYXkobmVzdGVkVmFsdWUpKTtcbiAgICB9XG4gICAgaWYgKGlzQXJyYXlCdWZmZXJWaWV3KG5lc3RlZFZhbHVlKSkge1xuICAgICAgICBjb25zdCB2aWV3ID0gbmVzdGVkVmFsdWU7XG4gICAgICAgIHJldHVybiBmb3JtYXRCeXRlQXJyYXkobmV3IFVpbnQ4QXJyYXkodmlldy5idWZmZXIsIHZpZXcuYnl0ZU9mZnNldCwgdmlldy5ieXRlTGVuZ3RoKSk7XG4gICAgfVxuICAgIGlmIChpc1NlcmlhbGl6ZWRCdWZmZXJTbmFwc2hvdChuZXN0ZWRWYWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIGZvcm1hdEJ5dGVBcnJheShVaW50OEFycmF5LmZyb20obmVzdGVkVmFsdWUuZGF0YSkpO1xuICAgIH1cbiAgICByZXR1cm4gbmVzdGVkVmFsdWU7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zbWFydFN0cmluZy5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIGRlZmluZVRvb2xJbnB1dEd1YXJkcmFpbChhcmdzKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ3Rvb2xfaW5wdXQnLFxuICAgICAgICBuYW1lOiBhcmdzLm5hbWUsXG4gICAgICAgIHJ1bjogYXJncy5ydW4sXG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBkZWZpbmVUb29sT3V0cHV0R3VhcmRyYWlsKGFyZ3MpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAndG9vbF9vdXRwdXQnLFxuICAgICAgICBuYW1lOiBhcmdzLm5hbWUsXG4gICAgICAgIHJ1bjogYXJncy5ydW4sXG4gICAgfTtcbn1cbmV4cG9ydCBjb25zdCBUb29sR3VhcmRyYWlsRnVuY3Rpb25PdXRwdXRGYWN0b3J5ID0ge1xuICAgIGFsbG93KG91dHB1dEluZm8pIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGJlaGF2aW9yOiB7IHR5cGU6ICdhbGxvdycgfSxcbiAgICAgICAgICAgIG91dHB1dEluZm8sXG4gICAgICAgIH07XG4gICAgfSxcbiAgICByZWplY3RDb250ZW50KG1lc3NhZ2UsIG91dHB1dEluZm8pIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGJlaGF2aW9yOiB7IHR5cGU6ICdyZWplY3RDb250ZW50JywgbWVzc2FnZSB9LFxuICAgICAgICAgICAgb3V0cHV0SW5mbyxcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHRocm93RXhjZXB0aW9uKG91dHB1dEluZm8pIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGJlaGF2aW9yOiB7IHR5cGU6ICd0aHJvd0V4Y2VwdGlvbicgfSxcbiAgICAgICAgICAgIG91dHB1dEluZm8sXG4gICAgICAgIH07XG4gICAgfSxcbn07XG5leHBvcnQgZnVuY3Rpb24gcmVzb2x2ZVRvb2xJbnB1dEd1YXJkcmFpbHMoZ3VhcmRyYWlscykge1xuICAgIGlmICghZ3VhcmRyYWlscykge1xuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIHJldHVybiBndWFyZHJhaWxzLm1hcCgoZ3IpID0+ICd0eXBlJyBpbiBnciAmJiBnci50eXBlID09PSAndG9vbF9pbnB1dCdcbiAgICAgICAgPyBnclxuICAgICAgICA6IGRlZmluZVRvb2xJbnB1dEd1YXJkcmFpbChncikpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlc29sdmVUb29sT3V0cHV0R3VhcmRyYWlscyhndWFyZHJhaWxzKSB7XG4gICAgaWYgKCFndWFyZHJhaWxzKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgcmV0dXJuIGd1YXJkcmFpbHMubWFwKChncikgPT4gJ3R5cGUnIGluIGdyICYmIGdyLnR5cGUgPT09ICd0b29sX291dHB1dCdcbiAgICAgICAgPyBnclxuICAgICAgICA6IGRlZmluZVRvb2xPdXRwdXRHdWFyZHJhaWwoZ3IpKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRvb2xHdWFyZHJhaWwubWpzLm1hcCIsImltcG9ydCB7IHNhZmVFeGVjdXRlIH0gZnJvbSBcIi4vdXRpbHMvc2FmZUV4ZWN1dGUubWpzXCI7XG5pbXBvcnQgeyB0b0Z1bmN0aW9uVG9vbE5hbWUgfSBmcm9tIFwiLi91dGlscy90b29scy5tanNcIjtcbmltcG9ydCB7IGdldFNjaGVtYUFuZFBhcnNlckZyb21JbnB1dFR5cGUgfSBmcm9tIFwiLi91dGlscy90b29scy5tanNcIjtcbmltcG9ydCB7IGlzWm9kT2JqZWN0IH0gZnJvbSBcIi4vdXRpbHMvdHlwZUd1YXJkcy5tanNcIjtcbmltcG9ydCB7IEludmFsaWRUb29sSW5wdXRFcnJvciwgVXNlckVycm9yIH0gZnJvbSBcIi4vZXJyb3JzLm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBnZXRDdXJyZW50U3BhbiB9IGZyb20gXCIuL3RyYWNpbmcvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyB0b1NtYXJ0U3RyaW5nIH0gZnJvbSBcIi4vdXRpbHMvc21hcnRTdHJpbmcubWpzXCI7XG5pbXBvcnQgeyByZXNvbHZlVG9vbElucHV0R3VhcmRyYWlscywgcmVzb2x2ZVRvb2xPdXRwdXRHdWFyZHJhaWxzLCB9IGZyb20gXCIuL3Rvb2xHdWFyZHJhaWwubWpzXCI7XG5mdW5jdGlvbiBpc0NvbXB1dGVyUHJvdmlkZXIoY2FuZGlkYXRlKSB7XG4gICAgcmV0dXJuICghIWNhbmRpZGF0ZSAmJlxuICAgICAgICB0eXBlb2YgY2FuZGlkYXRlID09PSAnb2JqZWN0JyAmJlxuICAgICAgICB0eXBlb2YgY2FuZGlkYXRlLmNyZWF0ZSA9PT0gJ2Z1bmN0aW9uJyk7XG59XG4vKipcbiAqIEV4cG9zZXMgYSBjb21wdXRlciB0byB0aGUgYWdlbnQgYXMgYSB0b29sIHRvIGJlIGNhbGxlZC5cbiAqXG4gKiBAcGFyYW0gb3B0aW9ucyBBZGRpdGlvbmFsIGNvbmZpZ3VyYXRpb24gZm9yIHRoZSBjb21wdXRlciB0b29sIGxpa2Ugc3BlY2lmeWluZyB0aGUgbG9jYXRpb24gb2YgeW91ciBhZ2VudFxuICogQHJldHVybnMgYSBjb21wdXRlciB0b29sIGRlZmluaXRpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbXB1dGVyVG9vbChvcHRpb25zKSB7XG4gICAgaWYgKCFvcHRpb25zLmNvbXB1dGVyKSB7XG4gICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ2NvbXB1dGVyVG9vbCByZXF1aXJlcyBhIGNvbXB1dGVyIGluc3RhbmNlIG9yIGFuIGluaXRpYWxpemVyIGZ1bmN0aW9uLicpO1xuICAgIH1cbiAgICBjb25zdCB0b29sID0ge1xuICAgICAgICB0eXBlOiAnY29tcHV0ZXInLFxuICAgICAgICBuYW1lOiBvcHRpb25zLm5hbWUgPz8gJ2NvbXB1dGVyX3VzZV9wcmV2aWV3JyxcbiAgICAgICAgY29tcHV0ZXI6IG9wdGlvbnMuY29tcHV0ZXIsXG4gICAgfTtcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMuY29tcHV0ZXIgPT09ICdmdW5jdGlvbicgfHxcbiAgICAgICAgaXNDb21wdXRlclByb3ZpZGVyKG9wdGlvbnMuY29tcHV0ZXIpKSB7XG4gICAgICAgIGNvbXB1dGVySW5pdGlhbGl6ZXJNYXAuc2V0KHRvb2wsIG9wdGlvbnMuY29tcHV0ZXIpO1xuICAgIH1cbiAgICByZXR1cm4gdG9vbDtcbn1cbi8vIEtlZXBzIHBlci10b29sIGNhY2hlIG9mIGNvbXB1dGVyIGluc3RhbmNlcyBrZXllZCBieSBSdW5Db250ZXh0IHNvIGVhY2ggcnVuIGdldHMgaXRzIG93biBpbnN0YW5jZS5cbmNvbnN0IGNvbXB1dGVyQ2FjaGUgPSBuZXcgV2Vha01hcCgpO1xuLy8gVHJhY2tzIHRoZSBpbml0aWFsaXplciBzbyB3ZSBkbyBub3Qgb3ZlcndyaXRlIHRoZSBjYWxsYWJsZSBvbiB0aGUgdG9vbCB3aGVuIHdlIG1lbW9pemUgdGhlIHJlc29sdmVkIGluc3RhbmNlLlxuY29uc3QgY29tcHV0ZXJJbml0aWFsaXplck1hcCA9IG5ldyBXZWFrTWFwKCk7XG4vLyBBbGxvd3MgY2xlYW51cCByb3V0aW5lcyB0byBmaW5kIGFsbCByZXNvbHZlZCBjb21wdXRlciBpbnN0YW5jZXMgZm9yIGEgZ2l2ZW4gcnVuIGNvbnRleHQuXG5jb25zdCBjb21wdXRlcnNCeVJ1bkNvbnRleHQgPSBuZXcgV2Vha01hcCgpO1xuZnVuY3Rpb24gZ2V0Q29tcHV0ZXJJbml0aWFsaXplcih0b29sKSB7XG4gICAgY29uc3QgaW5pdGlhbGl6ZXIgPSBjb21wdXRlckluaXRpYWxpemVyTWFwLmdldCh0b29sKTtcbiAgICBpZiAoaW5pdGlhbGl6ZXIpIHtcbiAgICAgICAgcmV0dXJuIGluaXRpYWxpemVyO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHRvb2wuY29tcHV0ZXIgPT09ICdmdW5jdGlvbicgfHxcbiAgICAgICAgaXNDb21wdXRlclByb3ZpZGVyKHRvb2wuY29tcHV0ZXIpKSB7XG4gICAgICAgIHJldHVybiB0b29sLmNvbXB1dGVyO1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gdHJhY2tSZXNvbHZlZENvbXB1dGVyKHRvb2wsIHJ1bkNvbnRleHQsIHJlc29sdmVkKSB7XG4gICAgbGV0IHJlc29sdmVkQnlSdW4gPSBjb21wdXRlcnNCeVJ1bkNvbnRleHQuZ2V0KHJ1bkNvbnRleHQpO1xuICAgIGlmICghcmVzb2x2ZWRCeVJ1bikge1xuICAgICAgICByZXNvbHZlZEJ5UnVuID0gbmV3IE1hcCgpO1xuICAgICAgICBjb21wdXRlcnNCeVJ1bkNvbnRleHQuc2V0KHJ1bkNvbnRleHQsIHJlc29sdmVkQnlSdW4pO1xuICAgIH1cbiAgICByZXNvbHZlZEJ5UnVuLnNldCh0b29sLCByZXNvbHZlZCk7XG59XG4vKipcbiAqIFJldHVybnMgYSBjb21wdXRlciBpbnN0YW5jZSBmb3IgdGhlIHByb3ZpZGVkIHJ1biBjb250ZXh0LiBDYWNoZXMgcGVyIHJ1biB0byBhdm9pZCBzaGFyaW5nIGFjcm9zcyBydW5zLlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXNvbHZlQ29tcHV0ZXIoYXJncykge1xuICAgIGNvbnN0IHsgdG9vbCwgcnVuQ29udGV4dCB9ID0gYXJncztcbiAgICAvLyBDYWNoZSBpbnN0YW5jZXMgcGVyIFJ1bkNvbnRleHQgc28gYSBzaW5nbGUgQ29tcHV0ZXIgaXMgbm90IHNoYXJlZCBhY3Jvc3Mgc2ltdWx0YW5lb3VzIHJ1bnMuXG4gICAgY29uc3QgdG9vbEtleSA9IHRvb2w7XG4gICAgbGV0IHBlckNvbnRleHQgPSBjb21wdXRlckNhY2hlLmdldCh0b29sS2V5KTtcbiAgICBpZiAoIXBlckNvbnRleHQpIHtcbiAgICAgICAgcGVyQ29udGV4dCA9IG5ldyBXZWFrTWFwKCk7XG4gICAgICAgIGNvbXB1dGVyQ2FjaGUuc2V0KHRvb2xLZXksIHBlckNvbnRleHQpO1xuICAgIH1cbiAgICBjb25zdCBjYWNoZWQgPSBwZXJDb250ZXh0LmdldChydW5Db250ZXh0KTtcbiAgICBpZiAoY2FjaGVkKSB7XG4gICAgICAgIHRyYWNrUmVzb2x2ZWRDb21wdXRlcih0b29sLCBydW5Db250ZXh0LCBjYWNoZWQpO1xuICAgICAgICByZXR1cm4gY2FjaGVkLmNvbXB1dGVyO1xuICAgIH1cbiAgICBjb25zdCBpbml0aWFsaXplckNvbmZpZyA9IGdldENvbXB1dGVySW5pdGlhbGl6ZXIodG9vbCk7XG4gICAgY29uc3QgbGlmZWN5Y2xlID0gaW5pdGlhbGl6ZXJDb25maWcgJiYgaXNDb21wdXRlclByb3ZpZGVyKGluaXRpYWxpemVyQ29uZmlnKVxuICAgICAgICA/IGluaXRpYWxpemVyQ29uZmlnXG4gICAgICAgIDogaXNDb21wdXRlclByb3ZpZGVyKHRvb2wuY29tcHV0ZXIpXG4gICAgICAgICAgICA/IHRvb2wuY29tcHV0ZXJcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgIGNvbnN0IGluaXRpYWxpemVyID0gdHlwZW9mIGluaXRpYWxpemVyQ29uZmlnID09PSAnZnVuY3Rpb24nXG4gICAgICAgID8gaW5pdGlhbGl6ZXJDb25maWdcbiAgICAgICAgOiAobGlmZWN5Y2xlPy5jcmVhdGUgPz9cbiAgICAgICAgICAgICh0eXBlb2YgdG9vbC5jb21wdXRlciA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICAgICAgICAgID8gdG9vbC5jb21wdXRlclxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkKSk7XG4gICAgY29uc3QgZGlzcG9zZXIgPSBsaWZlY3ljbGU/LmRpc3Bvc2U7XG4gICAgY29uc3QgY29tcHV0ZXIgPSBpbml0aWFsaXplciAmJiB0eXBlb2YgaW5pdGlhbGl6ZXIgPT09ICdmdW5jdGlvbidcbiAgICAgICAgPyBhd2FpdCBpbml0aWFsaXplcih7IHJ1bkNvbnRleHQgfSlcbiAgICAgICAgOiB0b29sLmNvbXB1dGVyO1xuICAgIGlmICghY29tcHV0ZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcignVGhlIGNvbXB1dGVyIHRvb2wgZGlkIG5vdCBwcm92aWRlIGEgY29tcHV0ZXIgaW5zdGFuY2UuJyk7XG4gICAgfVxuICAgIGNvbnN0IHJlc29sdmVkID0ge1xuICAgICAgICBjb21wdXRlcixcbiAgICAgICAgZGlzcG9zZTogZGlzcG9zZXIsXG4gICAgfTtcbiAgICBwZXJDb250ZXh0LnNldChydW5Db250ZXh0LCByZXNvbHZlZCk7XG4gICAgdHJhY2tSZXNvbHZlZENvbXB1dGVyKHRvb2wsIHJ1bkNvbnRleHQsIHJlc29sdmVkKTtcbiAgICB0b29sLmNvbXB1dGVyID0gY29tcHV0ZXI7XG4gICAgcmV0dXJuIGNvbXB1dGVyO1xufVxuLyoqXG4gKiBEaXNwb3NlcyBhbnkgY29tcHV0ZXIgaW5zdGFuY2VzIGNyZWF0ZWQgZm9yIHRoZSBwcm92aWRlZCBydW4gY29udGV4dC5cbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGlzcG9zZVJlc29sdmVkQ29tcHV0ZXJzKHsgcnVuQ29udGV4dCwgfSkge1xuICAgIGNvbnN0IHJlc29sdmVkQnlSdW4gPSBjb21wdXRlcnNCeVJ1bkNvbnRleHQuZ2V0KHJ1bkNvbnRleHQpO1xuICAgIGlmICghcmVzb2x2ZWRCeVJ1bikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbXB1dGVyc0J5UnVuQ29udGV4dC5kZWxldGUocnVuQ29udGV4dCk7XG4gICAgY29uc3QgZGlzcG9zZXJzID0gW107XG4gICAgZm9yIChjb25zdCBbdG9vbCwgcmVzb2x2ZWRdIG9mIHJlc29sdmVkQnlSdW4uZW50cmllcygpKSB7XG4gICAgICAgIGNvbnN0IHBlckNvbnRleHQgPSBjb21wdXRlckNhY2hlLmdldCh0b29sKTtcbiAgICAgICAgcGVyQ29udGV4dD8uZGVsZXRlKHJ1bkNvbnRleHQpO1xuICAgICAgICBjb25zdCBzdG9yZWRJbml0aWFsaXplciA9IGdldENvbXB1dGVySW5pdGlhbGl6ZXIodG9vbCk7XG4gICAgICAgIGlmIChzdG9yZWRJbml0aWFsaXplcikge1xuICAgICAgICAgICAgdG9vbC5jb21wdXRlciA9IHN0b3JlZEluaXRpYWxpemVyO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXNvbHZlZC5kaXNwb3NlKSB7XG4gICAgICAgICAgICBkaXNwb3NlcnMucHVzaChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgcmVzb2x2ZWQuZGlzcG9zZT8uKHsgcnVuQ29udGV4dCwgY29tcHV0ZXI6IHJlc29sdmVkLmNvbXB1dGVyIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBkaXNwb3NlIG9mIGRpc3Bvc2Vycykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgZGlzcG9zZSgpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oYEZhaWxlZCB0byBkaXNwb3NlIGNvbXB1dGVyIGZvciBydW4gY29udGV4dDogJHtlcnJvcn1gKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBzaGVsbFRvb2wob3B0aW9ucykge1xuICAgIGNvbnN0IG5lZWRzQXBwcm92YWwgPSB0eXBlb2Ygb3B0aW9ucy5uZWVkc0FwcHJvdmFsID09PSAnZnVuY3Rpb24nXG4gICAgICAgID8gb3B0aW9ucy5uZWVkc0FwcHJvdmFsXG4gICAgICAgIDogYXN5bmMgKCkgPT4gdHlwZW9mIG9wdGlvbnMubmVlZHNBcHByb3ZhbCA9PT0gJ2Jvb2xlYW4nXG4gICAgICAgICAgICA/IG9wdGlvbnMubmVlZHNBcHByb3ZhbFxuICAgICAgICAgICAgOiBmYWxzZTtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnc2hlbGwnLFxuICAgICAgICBuYW1lOiBvcHRpb25zLm5hbWUgPz8gJ3NoZWxsJyxcbiAgICAgICAgc2hlbGw6IG9wdGlvbnMuc2hlbGwsXG4gICAgICAgIG5lZWRzQXBwcm92YWwsXG4gICAgICAgIG9uQXBwcm92YWw6IG9wdGlvbnMub25BcHByb3ZhbCxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5UGF0Y2hUb29sKG9wdGlvbnMpIHtcbiAgICBjb25zdCBuZWVkc0FwcHJvdmFsID0gdHlwZW9mIG9wdGlvbnMubmVlZHNBcHByb3ZhbCA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICA/IG9wdGlvbnMubmVlZHNBcHByb3ZhbFxuICAgICAgICA6IGFzeW5jICgpID0+IHR5cGVvZiBvcHRpb25zLm5lZWRzQXBwcm92YWwgPT09ICdib29sZWFuJ1xuICAgICAgICAgICAgPyBvcHRpb25zLm5lZWRzQXBwcm92YWxcbiAgICAgICAgICAgIDogZmFsc2U7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2FwcGx5X3BhdGNoJyxcbiAgICAgICAgbmFtZTogb3B0aW9ucy5uYW1lID8/ICdhcHBseV9wYXRjaCcsXG4gICAgICAgIGVkaXRvcjogb3B0aW9ucy5lZGl0b3IsXG4gICAgICAgIG5lZWRzQXBwcm92YWwsXG4gICAgICAgIG9uQXBwcm92YWw6IG9wdGlvbnMub25BcHByb3ZhbCxcbiAgICB9O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgaG9zdGVkIE1DUCB0b29sIGRlZmluaXRpb24uXG4gKlxuICogQHBhcmFtIG9wdGlvbnMgLSBDb25maWd1cmF0aW9uIGZvciB0aGUgaG9zdGVkIE1DUCB0b29sLCBpbmNsdWRpbmcgc2VydmVyIGNvbm5lY3Rpb24gZGV0YWlsc1xuICogYW5kIGFwcHJvdmFsIHJlcXVpcmVtZW50cy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhvc3RlZE1jcFRvb2wob3B0aW9ucykge1xuICAgIGlmICgnc2VydmVyVXJsJyBpbiBvcHRpb25zKSB7XG4gICAgICAgIC8vIHRoZSBNQ1Agc2VydmVycyBjb21hcHRpYmxlIHdpdGggdGhlIHNwZWNpZmljYXRpb25cbiAgICAgICAgY29uc3QgcHJvdmlkZXJEYXRhID0gdHlwZW9mIG9wdGlvbnMucmVxdWlyZUFwcHJvdmFsID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICAgICAgb3B0aW9ucy5yZXF1aXJlQXBwcm92YWwgPT09ICduZXZlcidcbiAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdtY3AnLFxuICAgICAgICAgICAgICAgIHNlcnZlcl9sYWJlbDogb3B0aW9ucy5zZXJ2ZXJMYWJlbCxcbiAgICAgICAgICAgICAgICBzZXJ2ZXJfdXJsOiBvcHRpb25zLnNlcnZlclVybCxcbiAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiBvcHRpb25zLmF1dGhvcml6YXRpb24sXG4gICAgICAgICAgICAgICAgcmVxdWlyZV9hcHByb3ZhbDogJ25ldmVyJyxcbiAgICAgICAgICAgICAgICBhbGxvd2VkX3Rvb2xzOiB0b01jcEFsbG93ZWRUb29sc0ZpbHRlcihvcHRpb25zLmFsbG93ZWRUb29scyksXG4gICAgICAgICAgICAgICAgaGVhZGVyczogb3B0aW9ucy5oZWFkZXJzLFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ21jcCcsXG4gICAgICAgICAgICAgICAgc2VydmVyX2xhYmVsOiBvcHRpb25zLnNlcnZlckxhYmVsLFxuICAgICAgICAgICAgICAgIHNlcnZlcl91cmw6IG9wdGlvbnMuc2VydmVyVXJsLFxuICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246IG9wdGlvbnMuYXV0aG9yaXphdGlvbixcbiAgICAgICAgICAgICAgICBhbGxvd2VkX3Rvb2xzOiB0b01jcEFsbG93ZWRUb29sc0ZpbHRlcihvcHRpb25zLmFsbG93ZWRUb29scyksXG4gICAgICAgICAgICAgICAgaGVhZGVyczogb3B0aW9ucy5oZWFkZXJzLFxuICAgICAgICAgICAgICAgIHJlcXVpcmVfYXBwcm92YWw6IHR5cGVvZiBvcHRpb25zLnJlcXVpcmVBcHByb3ZhbCA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgICAgICAgICAgPyAnYWx3YXlzJ1xuICAgICAgICAgICAgICAgICAgICA6IGJ1aWxkUmVxdWlyZUFwcHJvdmFsKG9wdGlvbnMucmVxdWlyZUFwcHJvdmFsKSxcbiAgICAgICAgICAgICAgICBvbl9hcHByb3ZhbDogb3B0aW9ucy5vbkFwcHJvdmFsLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdob3N0ZWRfdG9vbCcsXG4gICAgICAgICAgICBuYW1lOiAnaG9zdGVkX21jcCcsXG4gICAgICAgICAgICBwcm92aWRlckRhdGEsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKCdjb25uZWN0b3JJZCcgaW4gb3B0aW9ucykge1xuICAgICAgICAvLyBPcGVuQUkncyBjb25uZWN0b3JzXG4gICAgICAgIGNvbnN0IHByb3ZpZGVyRGF0YSA9IHR5cGVvZiBvcHRpb25zLnJlcXVpcmVBcHByb3ZhbCA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgICAgIG9wdGlvbnMucmVxdWlyZUFwcHJvdmFsID09PSAnbmV2ZXInXG4gICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnbWNwJyxcbiAgICAgICAgICAgICAgICBzZXJ2ZXJfbGFiZWw6IG9wdGlvbnMuc2VydmVyTGFiZWwsXG4gICAgICAgICAgICAgICAgY29ubmVjdG9yX2lkOiBvcHRpb25zLmNvbm5lY3RvcklkLFxuICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246IG9wdGlvbnMuYXV0aG9yaXphdGlvbixcbiAgICAgICAgICAgICAgICByZXF1aXJlX2FwcHJvdmFsOiAnbmV2ZXInLFxuICAgICAgICAgICAgICAgIGFsbG93ZWRfdG9vbHM6IHRvTWNwQWxsb3dlZFRvb2xzRmlsdGVyKG9wdGlvbnMuYWxsb3dlZFRvb2xzKSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBvcHRpb25zLmhlYWRlcnMsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnbWNwJyxcbiAgICAgICAgICAgICAgICBzZXJ2ZXJfbGFiZWw6IG9wdGlvbnMuc2VydmVyTGFiZWwsXG4gICAgICAgICAgICAgICAgY29ubmVjdG9yX2lkOiBvcHRpb25zLmNvbm5lY3RvcklkLFxuICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246IG9wdGlvbnMuYXV0aG9yaXphdGlvbixcbiAgICAgICAgICAgICAgICBhbGxvd2VkX3Rvb2xzOiB0b01jcEFsbG93ZWRUb29sc0ZpbHRlcihvcHRpb25zLmFsbG93ZWRUb29scyksXG4gICAgICAgICAgICAgICAgaGVhZGVyczogb3B0aW9ucy5oZWFkZXJzLFxuICAgICAgICAgICAgICAgIHJlcXVpcmVfYXBwcm92YWw6IHR5cGVvZiBvcHRpb25zLnJlcXVpcmVBcHByb3ZhbCA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgICAgICAgICAgPyAnYWx3YXlzJ1xuICAgICAgICAgICAgICAgICAgICA6IGJ1aWxkUmVxdWlyZUFwcHJvdmFsKG9wdGlvbnMucmVxdWlyZUFwcHJvdmFsKSxcbiAgICAgICAgICAgICAgICBvbl9hcHByb3ZhbDogb3B0aW9ucy5vbkFwcHJvdmFsLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdob3N0ZWRfdG9vbCcsXG4gICAgICAgICAgICBuYW1lOiAnaG9zdGVkX21jcCcsXG4gICAgICAgICAgICBwcm92aWRlckRhdGEsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyB0aGUgTUNQIHNlcnZlcnMgY29tYXB0aWJsZSB3aXRoIHRoZSBzcGVjaWZpY2F0aW9uXG4gICAgICAgIGNvbnN0IHByb3ZpZGVyRGF0YSA9IHR5cGVvZiBvcHRpb25zLnJlcXVpcmVBcHByb3ZhbCA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgICAgIG9wdGlvbnMucmVxdWlyZUFwcHJvdmFsID09PSAnbmV2ZXInXG4gICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnbWNwJyxcbiAgICAgICAgICAgICAgICBzZXJ2ZXJfbGFiZWw6IG9wdGlvbnMuc2VydmVyTGFiZWwsXG4gICAgICAgICAgICAgICAgcmVxdWlyZV9hcHByb3ZhbDogJ25ldmVyJyxcbiAgICAgICAgICAgICAgICBhbGxvd2VkX3Rvb2xzOiB0b01jcEFsbG93ZWRUb29sc0ZpbHRlcihvcHRpb25zLmFsbG93ZWRUb29scyksXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnbWNwJyxcbiAgICAgICAgICAgICAgICBzZXJ2ZXJfbGFiZWw6IG9wdGlvbnMuc2VydmVyTGFiZWwsXG4gICAgICAgICAgICAgICAgYWxsb3dlZF90b29sczogdG9NY3BBbGxvd2VkVG9vbHNGaWx0ZXIob3B0aW9ucy5hbGxvd2VkVG9vbHMpLFxuICAgICAgICAgICAgICAgIHJlcXVpcmVfYXBwcm92YWw6IHR5cGVvZiBvcHRpb25zLnJlcXVpcmVBcHByb3ZhbCA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgICAgICAgICAgPyAnYWx3YXlzJ1xuICAgICAgICAgICAgICAgICAgICA6IGJ1aWxkUmVxdWlyZUFwcHJvdmFsKG9wdGlvbnMucmVxdWlyZUFwcHJvdmFsKSxcbiAgICAgICAgICAgICAgICBvbl9hcHByb3ZhbDogb3B0aW9ucy5vbkFwcHJvdmFsLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdob3N0ZWRfdG9vbCcsXG4gICAgICAgICAgICBuYW1lOiAnaG9zdGVkX21jcCcsXG4gICAgICAgICAgICBwcm92aWRlckRhdGEsXG4gICAgICAgIH07XG4gICAgfVxufVxuLyoqXG4gKiBUaGUgZGVmYXVsdCBmdW5jdGlvbiB0byBpbnZva2Ugd2hlbiBhbiBlcnJvciBvY2N1cnMgd2hpbGUgcnVubmluZyB0aGUgdG9vbC5cbiAqXG4gKiBBbHdheXMgcmV0dXJucyBgQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgcnVubmluZyB0aGUgdG9vbC4gUGxlYXNlIHRyeSBhZ2Fpbi4gRXJyb3I6IDxlcnJvciBkZXRhaWxzPmBcbiAqXG4gKiBAcGFyYW0gY29udGV4dCBBbiBpbnN0YW5jZSBvZiB0aGUgY3VycmVudCBSdW5Db250ZXh0XG4gKiBAcGFyYW0gZXJyb3IgVGhlIGVycm9yIHRoYXQgb2NjdXJyZWRcbiAqL1xuZnVuY3Rpb24gZGVmYXVsdFRvb2xFcnJvckZ1bmN0aW9uKGNvbnRleHQsIGVycm9yKSB7XG4gICAgY29uc3QgZGV0YWlscyA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci50b1N0cmluZygpIDogU3RyaW5nKGVycm9yKTtcbiAgICByZXR1cm4gYEFuIGVycm9yIG9jY3VycmVkIHdoaWxlIHJ1bm5pbmcgdGhlIHRvb2wuIFBsZWFzZSB0cnkgYWdhaW4uIEVycm9yOiAke2RldGFpbHN9YDtcbn1cbi8qKlxuICogRXhwb3NlcyBhIGZ1bmN0aW9uIHRvIHRoZSBhZ2VudCBhcyBhIHRvb2wgdG8gYmUgY2FsbGVkXG4gKlxuICogQHBhcmFtIG9wdGlvbnMgVGhlIG9wdGlvbnMgZm9yIHRoZSB0b29sXG4gKiBAcmV0dXJucyBBIG5ldyB0b29sXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b29sKG9wdGlvbnMpIHtcbiAgICBjb25zdCBuYW1lID0gb3B0aW9ucy5uYW1lXG4gICAgICAgID8gdG9GdW5jdGlvblRvb2xOYW1lKG9wdGlvbnMubmFtZSlcbiAgICAgICAgOiB0b0Z1bmN0aW9uVG9vbE5hbWUob3B0aW9ucy5leGVjdXRlLm5hbWUpO1xuICAgIGNvbnN0IHRvb2xFcnJvckZ1bmN0aW9uID0gdHlwZW9mIG9wdGlvbnMuZXJyb3JGdW5jdGlvbiA9PT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgPyBkZWZhdWx0VG9vbEVycm9yRnVuY3Rpb25cbiAgICAgICAgOiBvcHRpb25zLmVycm9yRnVuY3Rpb247XG4gICAgaWYgKCFuYW1lKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVG9vbCBuYW1lIGNhbm5vdCBiZSBlbXB0eS4gRWl0aGVyIG5hbWUgeW91ciBmdW5jdGlvbiBvciBwcm92aWRlIGEgbmFtZSBpbiB0aGUgb3B0aW9ucy4nKTtcbiAgICB9XG4gICAgY29uc3Qgc3RyaWN0TW9kZSA9IG9wdGlvbnMuc3RyaWN0ID8/IHRydWU7XG4gICAgaWYgKCFzdHJpY3RNb2RlICYmIGlzWm9kT2JqZWN0KG9wdGlvbnMucGFyYW1ldGVycykpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcignU3RyaWN0IG1vZGUgaXMgcmVxdWlyZWQgZm9yIFpvZCBwYXJhbWV0ZXJzJyk7XG4gICAgfVxuICAgIGNvbnN0IHsgcGFyc2VyLCBzY2hlbWE6IHBhcmFtZXRlcnMgfSA9IGdldFNjaGVtYUFuZFBhcnNlckZyb21JbnB1dFR5cGUob3B0aW9ucy5wYXJhbWV0ZXJzLCBuYW1lKTtcbiAgICBhc3luYyBmdW5jdGlvbiBfaW52b2tlKHJ1bkNvbnRleHQsIGlucHV0LCBkZXRhaWxzKSB7XG4gICAgICAgIGNvbnN0IFtlcnJvciwgcGFyc2VkXSA9IGF3YWl0IHNhZmVFeGVjdXRlKCgpID0+IHBhcnNlcihpbnB1dCkpO1xuICAgICAgICBpZiAoZXJyb3IgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChsb2dnZXIuZG9udExvZ1Rvb2xEYXRhKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBJbnZhbGlkIEpTT04gaW5wdXQgZm9yIHRvb2wgJHtuYW1lfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBJbnZhbGlkIEpTT04gaW5wdXQgZm9yIHRvb2wgJHtuYW1lfTogJHtpbnB1dH1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHN1cHBseSB0aGUgc2FtZSBjb250ZXh0IGFzIG9wdGlvbnMuZXhlY3V0ZSBmb3IgY29uc3VtaW5nXG4gICAgICAgICAgICAvLyBkb3duc3RyZWFtIGNvZGUgdG8gaW1wbGVtZW50IHNlbGYtaGVhbGluZyBhbmQvb3IgdHJhY2luZ1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRUb29sSW5wdXRFcnJvcignSW52YWxpZCBKU09OIGlucHV0IGZvciB0b29sJywgdW5kZWZpbmVkLCAvLyBubyBSdW5TdGF0ZSBhdmFpbGFibGUgaW4gdGhpcyBjb250ZXh0XG4gICAgICAgICAgICBlcnJvciwgeyBydW5Db250ZXh0LCBpbnB1dCwgZGV0YWlscyB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobG9nZ2VyLmRvbnRMb2dUb29sRGF0YSkge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBJbnZva2luZyB0b29sICR7bmFtZX1gKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgSW52b2tpbmcgdG9vbCAke25hbWV9IHdpdGggaW5wdXQgJHtpbnB1dH1gKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBvcHRpb25zLmV4ZWN1dGUocGFyc2VkLCBydW5Db250ZXh0LCBkZXRhaWxzKTtcbiAgICAgICAgY29uc3Qgc3RyaW5nUmVzdWx0ID0gdG9TbWFydFN0cmluZyhyZXN1bHQpO1xuICAgICAgICBpZiAobG9nZ2VyLmRvbnRMb2dUb29sRGF0YSkge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBUb29sICR7bmFtZX0gY29tcGxldGVkYCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoYFRvb2wgJHtuYW1lfSByZXR1cm5lZDogJHtzdHJpbmdSZXN1bHR9YCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgYXN5bmMgZnVuY3Rpb24gaW52b2tlKHJ1bkNvbnRleHQsIGlucHV0LCBkZXRhaWxzKSB7XG4gICAgICAgIHJldHVybiBfaW52b2tlKHJ1bkNvbnRleHQsIGlucHV0LCBkZXRhaWxzKS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIGlmICh0b29sRXJyb3JGdW5jdGlvbikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRTcGFuID0gZ2V0Q3VycmVudFNwYW4oKTtcbiAgICAgICAgICAgICAgICBjdXJyZW50U3Bhbj8uc2V0RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnRXJyb3IgcnVubmluZyB0b29sIChub24tZmF0YWwpJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbF9uYW1lOiBuYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yLnRvU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRvb2xFcnJvckZ1bmN0aW9uKHJ1bkNvbnRleHQsIGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgbmVlZHNBcHByb3ZhbCA9IHR5cGVvZiBvcHRpb25zLm5lZWRzQXBwcm92YWwgPT09ICdmdW5jdGlvbidcbiAgICAgICAgPyBvcHRpb25zLm5lZWRzQXBwcm92YWxcbiAgICAgICAgOiBhc3luYyAoKSA9PiB0eXBlb2Ygb3B0aW9ucy5uZWVkc0FwcHJvdmFsID09PSAnYm9vbGVhbidcbiAgICAgICAgICAgID8gb3B0aW9ucy5uZWVkc0FwcHJvdmFsXG4gICAgICAgICAgICA6IGZhbHNlO1xuICAgIGNvbnN0IGlzRW5hYmxlZCA9IHR5cGVvZiBvcHRpb25zLmlzRW5hYmxlZCA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICA/IGFzeW5jIChydW5Db250ZXh0LCBhZ2VudCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcHJlZGljYXRlID0gb3B0aW9ucy5pc0VuYWJsZWQ7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwcmVkaWNhdGUoeyBydW5Db250ZXh0LCBhZ2VudCB9KTtcbiAgICAgICAgICAgIHJldHVybiBCb29sZWFuKHJlc3VsdCk7XG4gICAgICAgIH1cbiAgICAgICAgOiBhc3luYyAoKSA9PiB0eXBlb2Ygb3B0aW9ucy5pc0VuYWJsZWQgPT09ICdib29sZWFuJyA/IG9wdGlvbnMuaXNFbmFibGVkIDogdHJ1ZTtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnZnVuY3Rpb24nLFxuICAgICAgICBuYW1lLFxuICAgICAgICBkZXNjcmlwdGlvbjogb3B0aW9ucy5kZXNjcmlwdGlvbixcbiAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgc3RyaWN0OiBzdHJpY3RNb2RlLFxuICAgICAgICBpbnZva2UsXG4gICAgICAgIG5lZWRzQXBwcm92YWwsXG4gICAgICAgIGlzRW5hYmxlZCxcbiAgICAgICAgaW5wdXRHdWFyZHJhaWxzOiByZXNvbHZlVG9vbElucHV0R3VhcmRyYWlscyhvcHRpb25zLmlucHV0R3VhcmRyYWlscyksXG4gICAgICAgIG91dHB1dEd1YXJkcmFpbHM6IHJlc29sdmVUb29sT3V0cHV0R3VhcmRyYWlscyhvcHRpb25zLm91dHB1dEd1YXJkcmFpbHMpLFxuICAgIH07XG59XG5mdW5jdGlvbiBidWlsZFJlcXVpcmVBcHByb3ZhbChyZXF1aXJlQXBwcm92YWwpIHtcbiAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICBpZiAocmVxdWlyZUFwcHJvdmFsLmFsd2F5cykge1xuICAgICAgICByZXN1bHQuYWx3YXlzID0geyB0b29sX25hbWVzOiByZXF1aXJlQXBwcm92YWwuYWx3YXlzLnRvb2xOYW1lcyB9O1xuICAgIH1cbiAgICBpZiAocmVxdWlyZUFwcHJvdmFsLm5ldmVyKSB7XG4gICAgICAgIHJlc3VsdC5uZXZlciA9IHsgdG9vbF9uYW1lczogcmVxdWlyZUFwcHJvdmFsLm5ldmVyLnRvb2xOYW1lcyB9O1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gdG9NY3BBbGxvd2VkVG9vbHNGaWx0ZXIoYWxsb3dlZFRvb2xzKSB7XG4gICAgaWYgKHR5cGVvZiBhbGxvd2VkVG9vbHMgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmIChBcnJheS5pc0FycmF5KGFsbG93ZWRUb29scykpIHtcbiAgICAgICAgcmV0dXJuIHsgdG9vbF9uYW1lczogYWxsb3dlZFRvb2xzIH07XG4gICAgfVxuICAgIHJldHVybiB7IHRvb2xfbmFtZXM6IGFsbG93ZWRUb29scz8udG9vbE5hbWVzID8/IFtdIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10b29sLm1qcy5tYXAiLCJleHBvcnQgdmFyIHV0aWw7XG4oZnVuY3Rpb24gKHV0aWwpIHtcbiAgICB1dGlsLmFzc2VydEVxdWFsID0gKF8pID0+IHsgfTtcbiAgICBmdW5jdGlvbiBhc3NlcnRJcyhfYXJnKSB7IH1cbiAgICB1dGlsLmFzc2VydElzID0gYXNzZXJ0SXM7XG4gICAgZnVuY3Rpb24gYXNzZXJ0TmV2ZXIoX3gpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgfVxuICAgIHV0aWwuYXNzZXJ0TmV2ZXIgPSBhc3NlcnROZXZlcjtcbiAgICB1dGlsLmFycmF5VG9FbnVtID0gKGl0ZW1zKSA9PiB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHtcbiAgICAgICAgICAgIG9ialtpdGVtXSA9IGl0ZW07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9O1xuICAgIHV0aWwuZ2V0VmFsaWRFbnVtVmFsdWVzID0gKG9iaikgPT4ge1xuICAgICAgICBjb25zdCB2YWxpZEtleXMgPSB1dGlsLm9iamVjdEtleXMob2JqKS5maWx0ZXIoKGspID0+IHR5cGVvZiBvYmpbb2JqW2tdXSAhPT0gXCJudW1iZXJcIik7XG4gICAgICAgIGNvbnN0IGZpbHRlcmVkID0ge307XG4gICAgICAgIGZvciAoY29uc3QgayBvZiB2YWxpZEtleXMpIHtcbiAgICAgICAgICAgIGZpbHRlcmVkW2tdID0gb2JqW2tdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1dGlsLm9iamVjdFZhbHVlcyhmaWx0ZXJlZCk7XG4gICAgfTtcbiAgICB1dGlsLm9iamVjdFZhbHVlcyA9IChvYmopID0+IHtcbiAgICAgICAgcmV0dXJuIHV0aWwub2JqZWN0S2V5cyhvYmopLm1hcChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIG9ialtlXTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICB1dGlsLm9iamVjdEtleXMgPSB0eXBlb2YgT2JqZWN0LmtleXMgPT09IFwiZnVuY3Rpb25cIiAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGJhbi9iYW5cbiAgICAgICAgPyAob2JqKSA9PiBPYmplY3Qua2V5cyhvYmopIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgYmFuL2JhblxuICAgICAgICA6IChvYmplY3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGtleXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIG9iamVjdCkge1xuICAgICAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGtleXMucHVzaChrZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBrZXlzO1xuICAgICAgICB9O1xuICAgIHV0aWwuZmluZCA9IChhcnIsIGNoZWNrZXIpID0+IHtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGFycikge1xuICAgICAgICAgICAgaWYgKGNoZWNrZXIoaXRlbSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIHV0aWwuaXNJbnRlZ2VyID0gdHlwZW9mIE51bWJlci5pc0ludGVnZXIgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICA/ICh2YWwpID0+IE51bWJlci5pc0ludGVnZXIodmFsKSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGJhbi9iYW5cbiAgICAgICAgOiAodmFsKSA9PiB0eXBlb2YgdmFsID09PSBcIm51bWJlclwiICYmIE51bWJlci5pc0Zpbml0ZSh2YWwpICYmIE1hdGguZmxvb3IodmFsKSA9PT0gdmFsO1xuICAgIGZ1bmN0aW9uIGpvaW5WYWx1ZXMoYXJyYXksIHNlcGFyYXRvciA9IFwiIHwgXCIpIHtcbiAgICAgICAgcmV0dXJuIGFycmF5Lm1hcCgodmFsKSA9PiAodHlwZW9mIHZhbCA9PT0gXCJzdHJpbmdcIiA/IGAnJHt2YWx9J2AgOiB2YWwpKS5qb2luKHNlcGFyYXRvcik7XG4gICAgfVxuICAgIHV0aWwuam9pblZhbHVlcyA9IGpvaW5WYWx1ZXM7XG4gICAgdXRpbC5qc29uU3RyaW5naWZ5UmVwbGFjZXIgPSAoXywgdmFsdWUpID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJiaWdpbnRcIikge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH07XG59KSh1dGlsIHx8ICh1dGlsID0ge30pKTtcbmV4cG9ydCB2YXIgb2JqZWN0VXRpbDtcbihmdW5jdGlvbiAob2JqZWN0VXRpbCkge1xuICAgIG9iamVjdFV0aWwubWVyZ2VTaGFwZXMgPSAoZmlyc3QsIHNlY29uZCkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uZmlyc3QsXG4gICAgICAgICAgICAuLi5zZWNvbmQsIC8vIHNlY29uZCBvdmVyd3JpdGVzIGZpcnN0XG4gICAgICAgIH07XG4gICAgfTtcbn0pKG9iamVjdFV0aWwgfHwgKG9iamVjdFV0aWwgPSB7fSkpO1xuZXhwb3J0IGNvbnN0IFpvZFBhcnNlZFR5cGUgPSB1dGlsLmFycmF5VG9FbnVtKFtcbiAgICBcInN0cmluZ1wiLFxuICAgIFwibmFuXCIsXG4gICAgXCJudW1iZXJcIixcbiAgICBcImludGVnZXJcIixcbiAgICBcImZsb2F0XCIsXG4gICAgXCJib29sZWFuXCIsXG4gICAgXCJkYXRlXCIsXG4gICAgXCJiaWdpbnRcIixcbiAgICBcInN5bWJvbFwiLFxuICAgIFwiZnVuY3Rpb25cIixcbiAgICBcInVuZGVmaW5lZFwiLFxuICAgIFwibnVsbFwiLFxuICAgIFwiYXJyYXlcIixcbiAgICBcIm9iamVjdFwiLFxuICAgIFwidW5rbm93blwiLFxuICAgIFwicHJvbWlzZVwiLFxuICAgIFwidm9pZFwiLFxuICAgIFwibmV2ZXJcIixcbiAgICBcIm1hcFwiLFxuICAgIFwic2V0XCIsXG5dKTtcbmV4cG9ydCBjb25zdCBnZXRQYXJzZWRUeXBlID0gKGRhdGEpID0+IHtcbiAgICBjb25zdCB0ID0gdHlwZW9mIGRhdGE7XG4gICAgc3dpdGNoICh0KSB7XG4gICAgICAgIGNhc2UgXCJ1bmRlZmluZWRcIjpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZDtcbiAgICAgICAgY2FzZSBcInN0cmluZ1wiOlxuICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuc3RyaW5nO1xuICAgICAgICBjYXNlIFwibnVtYmVyXCI6XG4gICAgICAgICAgICByZXR1cm4gTnVtYmVyLmlzTmFOKGRhdGEpID8gWm9kUGFyc2VkVHlwZS5uYW4gOiBab2RQYXJzZWRUeXBlLm51bWJlcjtcbiAgICAgICAgY2FzZSBcImJvb2xlYW5cIjpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLmJvb2xlYW47XG4gICAgICAgIGNhc2UgXCJmdW5jdGlvblwiOlxuICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuZnVuY3Rpb247XG4gICAgICAgIGNhc2UgXCJiaWdpbnRcIjpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLmJpZ2ludDtcbiAgICAgICAgY2FzZSBcInN5bWJvbFwiOlxuICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuc3ltYm9sO1xuICAgICAgICBjYXNlIFwib2JqZWN0XCI6XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLmFycmF5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRhdGEgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5udWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRhdGEudGhlbiAmJiB0eXBlb2YgZGF0YS50aGVuID09PSBcImZ1bmN0aW9uXCIgJiYgZGF0YS5jYXRjaCAmJiB0eXBlb2YgZGF0YS5jYXRjaCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUucHJvbWlzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgTWFwICE9PSBcInVuZGVmaW5lZFwiICYmIGRhdGEgaW5zdGFuY2VvZiBNYXApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5tYXA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIFNldCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkYXRhIGluc3RhbmNlb2YgU2V0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuc2V0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBEYXRlICE9PSBcInVuZGVmaW5lZFwiICYmIGRhdGEgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuZGF0ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLm9iamVjdDtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnVua25vd247XG4gICAgfVxufTtcbiIsImltcG9ydCB7IHV0aWwgfSBmcm9tIFwiLi9oZWxwZXJzL3V0aWwuanNcIjtcbmV4cG9ydCBjb25zdCBab2RJc3N1ZUNvZGUgPSB1dGlsLmFycmF5VG9FbnVtKFtcbiAgICBcImludmFsaWRfdHlwZVwiLFxuICAgIFwiaW52YWxpZF9saXRlcmFsXCIsXG4gICAgXCJjdXN0b21cIixcbiAgICBcImludmFsaWRfdW5pb25cIixcbiAgICBcImludmFsaWRfdW5pb25fZGlzY3JpbWluYXRvclwiLFxuICAgIFwiaW52YWxpZF9lbnVtX3ZhbHVlXCIsXG4gICAgXCJ1bnJlY29nbml6ZWRfa2V5c1wiLFxuICAgIFwiaW52YWxpZF9hcmd1bWVudHNcIixcbiAgICBcImludmFsaWRfcmV0dXJuX3R5cGVcIixcbiAgICBcImludmFsaWRfZGF0ZVwiLFxuICAgIFwiaW52YWxpZF9zdHJpbmdcIixcbiAgICBcInRvb19zbWFsbFwiLFxuICAgIFwidG9vX2JpZ1wiLFxuICAgIFwiaW52YWxpZF9pbnRlcnNlY3Rpb25fdHlwZXNcIixcbiAgICBcIm5vdF9tdWx0aXBsZV9vZlwiLFxuICAgIFwibm90X2Zpbml0ZVwiLFxuXSk7XG5leHBvcnQgY29uc3QgcXVvdGVsZXNzSnNvbiA9IChvYmopID0+IHtcbiAgICBjb25zdCBqc29uID0gSlNPTi5zdHJpbmdpZnkob2JqLCBudWxsLCAyKTtcbiAgICByZXR1cm4ganNvbi5yZXBsYWNlKC9cIihbXlwiXSspXCI6L2csIFwiJDE6XCIpO1xufTtcbmV4cG9ydCBjbGFzcyBab2RFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBnZXQgZXJyb3JzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc3N1ZXM7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGlzc3Vlcykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmlzc3VlcyA9IFtdO1xuICAgICAgICB0aGlzLmFkZElzc3VlID0gKHN1YikgPT4ge1xuICAgICAgICAgICAgdGhpcy5pc3N1ZXMgPSBbLi4udGhpcy5pc3N1ZXMsIHN1Yl07XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuYWRkSXNzdWVzID0gKHN1YnMgPSBbXSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5pc3N1ZXMgPSBbLi4udGhpcy5pc3N1ZXMsIC4uLnN1YnNdO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBhY3R1YWxQcm90byA9IG5ldy50YXJnZXQucHJvdG90eXBlO1xuICAgICAgICBpZiAoT2JqZWN0LnNldFByb3RvdHlwZU9mKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgYmFuL2JhblxuICAgICAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIGFjdHVhbFByb3RvKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX19wcm90b19fID0gYWN0dWFsUHJvdG87XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5uYW1lID0gXCJab2RFcnJvclwiO1xuICAgICAgICB0aGlzLmlzc3VlcyA9IGlzc3VlcztcbiAgICB9XG4gICAgZm9ybWF0KF9tYXBwZXIpIHtcbiAgICAgICAgY29uc3QgbWFwcGVyID0gX21hcHBlciB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGlzc3VlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlzc3VlLm1lc3NhZ2U7XG4gICAgICAgICAgICB9O1xuICAgICAgICBjb25zdCBmaWVsZEVycm9ycyA9IHsgX2Vycm9yczogW10gfTtcbiAgICAgICAgY29uc3QgcHJvY2Vzc0Vycm9yID0gKGVycm9yKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGlzc3VlIG9mIGVycm9yLmlzc3Vlcykge1xuICAgICAgICAgICAgICAgIGlmIChpc3N1ZS5jb2RlID09PSBcImludmFsaWRfdW5pb25cIikge1xuICAgICAgICAgICAgICAgICAgICBpc3N1ZS51bmlvbkVycm9ycy5tYXAocHJvY2Vzc0Vycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUuY29kZSA9PT0gXCJpbnZhbGlkX3JldHVybl90eXBlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc0Vycm9yKGlzc3VlLnJldHVyblR5cGVFcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLmNvZGUgPT09IFwiaW52YWxpZF9hcmd1bWVudHNcIikge1xuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzRXJyb3IoaXNzdWUuYXJndW1lbnRzRXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS5wYXRoLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZEVycm9ycy5fZXJyb3JzLnB1c2gobWFwcGVyKGlzc3VlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsZXQgY3VyciA9IGZpZWxkRXJyb3JzO1xuICAgICAgICAgICAgICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChpIDwgaXNzdWUucGF0aC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVsID0gaXNzdWUucGF0aFtpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlcm1pbmFsID0gaSA9PT0gaXNzdWUucGF0aC5sZW5ndGggLSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0ZXJtaW5hbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJbZWxdID0gY3VycltlbF0gfHwgeyBfZXJyb3JzOiBbXSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmICh0eXBlb2YgZWwgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIGN1cnJbZWxdID0gY3VycltlbF0gfHwgeyBfZXJyb3JzOiBbXSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIH0gZWxzZSBpZiAodHlwZW9mIGVsID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBjb25zdCBlcnJvckFycmF5OiBhbnkgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIGVycm9yQXJyYXkuX2Vycm9ycyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgY3VycltlbF0gPSBjdXJyW2VsXSB8fCBlcnJvckFycmF5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJbZWxdID0gY3VycltlbF0gfHwgeyBfZXJyb3JzOiBbXSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJbZWxdLl9lcnJvcnMucHVzaChtYXBwZXIoaXNzdWUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnIgPSBjdXJyW2VsXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcHJvY2Vzc0Vycm9yKHRoaXMpO1xuICAgICAgICByZXR1cm4gZmllbGRFcnJvcnM7XG4gICAgfVxuICAgIHN0YXRpYyBhc3NlcnQodmFsdWUpIHtcbiAgICAgICAgaWYgKCEodmFsdWUgaW5zdGFuY2VvZiBab2RFcnJvcikpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgTm90IGEgWm9kRXJyb3I6ICR7dmFsdWV9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1lc3NhZ2U7XG4gICAgfVxuICAgIGdldCBtZXNzYWdlKCkge1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcy5pc3N1ZXMsIHV0aWwuanNvblN0cmluZ2lmeVJlcGxhY2VyLCAyKTtcbiAgICB9XG4gICAgZ2V0IGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzc3Vlcy5sZW5ndGggPT09IDA7XG4gICAgfVxuICAgIGZsYXR0ZW4obWFwcGVyID0gKGlzc3VlKSA9PiBpc3N1ZS5tZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IGZpZWxkRXJyb3JzID0ge307XG4gICAgICAgIGNvbnN0IGZvcm1FcnJvcnMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBzdWIgb2YgdGhpcy5pc3N1ZXMpIHtcbiAgICAgICAgICAgIGlmIChzdWIucGF0aC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmlyc3RFbCA9IHN1Yi5wYXRoWzBdO1xuICAgICAgICAgICAgICAgIGZpZWxkRXJyb3JzW2ZpcnN0RWxdID0gZmllbGRFcnJvcnNbZmlyc3RFbF0gfHwgW107XG4gICAgICAgICAgICAgICAgZmllbGRFcnJvcnNbZmlyc3RFbF0ucHVzaChtYXBwZXIoc3ViKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3JtRXJyb3JzLnB1c2gobWFwcGVyKHN1YikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGZvcm1FcnJvcnMsIGZpZWxkRXJyb3JzIH07XG4gICAgfVxuICAgIGdldCBmb3JtRXJyb3JzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5mbGF0dGVuKCk7XG4gICAgfVxufVxuWm9kRXJyb3IuY3JlYXRlID0gKGlzc3VlcykgPT4ge1xuICAgIGNvbnN0IGVycm9yID0gbmV3IFpvZEVycm9yKGlzc3Vlcyk7XG4gICAgcmV0dXJuIGVycm9yO1xufTtcbiIsImltcG9ydCB7IFpvZElzc3VlQ29kZSB9IGZyb20gXCIuLi9ab2RFcnJvci5qc1wiO1xuaW1wb3J0IHsgdXRpbCwgWm9kUGFyc2VkVHlwZSB9IGZyb20gXCIuLi9oZWxwZXJzL3V0aWwuanNcIjtcbmNvbnN0IGVycm9yTWFwID0gKGlzc3VlLCBfY3R4KSA9PiB7XG4gICAgbGV0IG1lc3NhZ2U7XG4gICAgc3dpdGNoIChpc3N1ZS5jb2RlKSB7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZTpcbiAgICAgICAgICAgIGlmIChpc3N1ZS5yZWNlaXZlZCA9PT0gWm9kUGFyc2VkVHlwZS51bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gXCJSZXF1aXJlZFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBFeHBlY3RlZCAke2lzc3VlLmV4cGVjdGVkfSwgcmVjZWl2ZWQgJHtpc3N1ZS5yZWNlaXZlZH1gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLmludmFsaWRfbGl0ZXJhbDpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBsaXRlcmFsIHZhbHVlLCBleHBlY3RlZCAke0pTT04uc3RyaW5naWZ5KGlzc3VlLmV4cGVjdGVkLCB1dGlsLmpzb25TdHJpbmdpZnlSZXBsYWNlcil9YDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS51bnJlY29nbml6ZWRfa2V5czpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgVW5yZWNvZ25pemVkIGtleShzKSBpbiBvYmplY3Q6ICR7dXRpbC5qb2luVmFsdWVzKGlzc3VlLmtleXMsIFwiLCBcIil9YDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX3VuaW9uOlxuICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGlucHV0YDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX3VuaW9uX2Rpc2NyaW1pbmF0b3I6XG4gICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgZGlzY3JpbWluYXRvciB2YWx1ZS4gRXhwZWN0ZWQgJHt1dGlsLmpvaW5WYWx1ZXMoaXNzdWUub3B0aW9ucyl9YDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX2VudW1fdmFsdWU6XG4gICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgZW51bSB2YWx1ZS4gRXhwZWN0ZWQgJHt1dGlsLmpvaW5WYWx1ZXMoaXNzdWUub3B0aW9ucyl9LCByZWNlaXZlZCAnJHtpc3N1ZS5yZWNlaXZlZH0nYDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX2FyZ3VtZW50czpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBmdW5jdGlvbiBhcmd1bWVudHNgO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLmludmFsaWRfcmV0dXJuX3R5cGU6XG4gICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgZnVuY3Rpb24gcmV0dXJuIHR5cGVgO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLmludmFsaWRfZGF0ZTpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBkYXRlYDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZzpcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaXNzdWUudmFsaWRhdGlvbiA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgICAgIGlmIChcImluY2x1ZGVzXCIgaW4gaXNzdWUudmFsaWRhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgaW5wdXQ6IG11c3QgaW5jbHVkZSBcIiR7aXNzdWUudmFsaWRhdGlvbi5pbmNsdWRlc31cImA7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgaXNzdWUudmFsaWRhdGlvbi5wb3NpdGlvbiA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IGAke21lc3NhZ2V9IGF0IG9uZSBvciBtb3JlIHBvc2l0aW9ucyBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gJHtpc3N1ZS52YWxpZGF0aW9uLnBvc2l0aW9ufWA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoXCJzdGFydHNXaXRoXCIgaW4gaXNzdWUudmFsaWRhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgaW5wdXQ6IG11c3Qgc3RhcnQgd2l0aCBcIiR7aXNzdWUudmFsaWRhdGlvbi5zdGFydHNXaXRofVwiYDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoXCJlbmRzV2l0aFwiIGluIGlzc3VlLnZhbGlkYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGlucHV0OiBtdXN0IGVuZCB3aXRoIFwiJHtpc3N1ZS52YWxpZGF0aW9uLmVuZHNXaXRofVwiYDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHV0aWwuYXNzZXJ0TmV2ZXIoaXNzdWUudmFsaWRhdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUudmFsaWRhdGlvbiAhPT0gXCJyZWdleFwiKSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkICR7aXNzdWUudmFsaWRhdGlvbn1gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IFwiSW52YWxpZFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLnRvb19zbWFsbDpcbiAgICAgICAgICAgIGlmIChpc3N1ZS50eXBlID09PSBcImFycmF5XCIpXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBBcnJheSBtdXN0IGNvbnRhaW4gJHtpc3N1ZS5leGFjdCA/IFwiZXhhY3RseVwiIDogaXNzdWUuaW5jbHVzaXZlID8gYGF0IGxlYXN0YCA6IGBtb3JlIHRoYW5gfSAke2lzc3VlLm1pbmltdW19IGVsZW1lbnQocylgO1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUudHlwZSA9PT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYFN0cmluZyBtdXN0IGNvbnRhaW4gJHtpc3N1ZS5leGFjdCA/IFwiZXhhY3RseVwiIDogaXNzdWUuaW5jbHVzaXZlID8gYGF0IGxlYXN0YCA6IGBvdmVyYH0gJHtpc3N1ZS5taW5pbXVtfSBjaGFyYWN0ZXIocylgO1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUudHlwZSA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYE51bWJlciBtdXN0IGJlICR7aXNzdWUuZXhhY3QgPyBgZXhhY3RseSBlcXVhbCB0byBgIDogaXNzdWUuaW5jbHVzaXZlID8gYGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byBgIDogYGdyZWF0ZXIgdGhhbiBgfSR7aXNzdWUubWluaW11bX1gO1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUudHlwZSA9PT0gXCJiaWdpbnRcIilcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYE51bWJlciBtdXN0IGJlICR7aXNzdWUuZXhhY3QgPyBgZXhhY3RseSBlcXVhbCB0byBgIDogaXNzdWUuaW5jbHVzaXZlID8gYGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byBgIDogYGdyZWF0ZXIgdGhhbiBgfSR7aXNzdWUubWluaW11bX1gO1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUudHlwZSA9PT0gXCJkYXRlXCIpXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBEYXRlIG11c3QgYmUgJHtpc3N1ZS5leGFjdCA/IGBleGFjdGx5IGVxdWFsIHRvIGAgOiBpc3N1ZS5pbmNsdXNpdmUgPyBgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIGAgOiBgZ3JlYXRlciB0aGFuIGB9JHtuZXcgRGF0ZShOdW1iZXIoaXNzdWUubWluaW11bSkpfWA7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IFwiSW52YWxpZCBpbnB1dFwiO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLnRvb19iaWc6XG4gICAgICAgICAgICBpZiAoaXNzdWUudHlwZSA9PT0gXCJhcnJheVwiKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgQXJyYXkgbXVzdCBjb250YWluICR7aXNzdWUuZXhhY3QgPyBgZXhhY3RseWAgOiBpc3N1ZS5pbmNsdXNpdmUgPyBgYXQgbW9zdGAgOiBgbGVzcyB0aGFuYH0gJHtpc3N1ZS5tYXhpbXVtfSBlbGVtZW50KHMpYDtcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnR5cGUgPT09IFwic3RyaW5nXCIpXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBTdHJpbmcgbXVzdCBjb250YWluICR7aXNzdWUuZXhhY3QgPyBgZXhhY3RseWAgOiBpc3N1ZS5pbmNsdXNpdmUgPyBgYXQgbW9zdGAgOiBgdW5kZXJgfSAke2lzc3VlLm1heGltdW19IGNoYXJhY3RlcihzKWA7XG4gICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS50eXBlID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgTnVtYmVyIG11c3QgYmUgJHtpc3N1ZS5leGFjdCA/IGBleGFjdGx5YCA6IGlzc3VlLmluY2x1c2l2ZSA/IGBsZXNzIHRoYW4gb3IgZXF1YWwgdG9gIDogYGxlc3MgdGhhbmB9ICR7aXNzdWUubWF4aW11bX1gO1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUudHlwZSA9PT0gXCJiaWdpbnRcIilcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYEJpZ0ludCBtdXN0IGJlICR7aXNzdWUuZXhhY3QgPyBgZXhhY3RseWAgOiBpc3N1ZS5pbmNsdXNpdmUgPyBgbGVzcyB0aGFuIG9yIGVxdWFsIHRvYCA6IGBsZXNzIHRoYW5gfSAke2lzc3VlLm1heGltdW19YDtcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnR5cGUgPT09IFwiZGF0ZVwiKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgRGF0ZSBtdXN0IGJlICR7aXNzdWUuZXhhY3QgPyBgZXhhY3RseWAgOiBpc3N1ZS5pbmNsdXNpdmUgPyBgc21hbGxlciB0aGFuIG9yIGVxdWFsIHRvYCA6IGBzbWFsbGVyIHRoYW5gfSAke25ldyBEYXRlKE51bWJlcihpc3N1ZS5tYXhpbXVtKSl9YDtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gXCJJbnZhbGlkIGlucHV0XCI7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuY3VzdG9tOlxuICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGlucHV0YDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX2ludGVyc2VjdGlvbl90eXBlczpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW50ZXJzZWN0aW9uIHJlc3VsdHMgY291bGQgbm90IGJlIG1lcmdlZGA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUubm90X211bHRpcGxlX29mOlxuICAgICAgICAgICAgbWVzc2FnZSA9IGBOdW1iZXIgbXVzdCBiZSBhIG11bHRpcGxlIG9mICR7aXNzdWUubXVsdGlwbGVPZn1gO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLm5vdF9maW5pdGU6XG4gICAgICAgICAgICBtZXNzYWdlID0gXCJOdW1iZXIgbXVzdCBiZSBmaW5pdGVcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgbWVzc2FnZSA9IF9jdHguZGVmYXVsdEVycm9yO1xuICAgICAgICAgICAgdXRpbC5hc3NlcnROZXZlcihpc3N1ZSk7XG4gICAgfVxuICAgIHJldHVybiB7IG1lc3NhZ2UgfTtcbn07XG5leHBvcnQgZGVmYXVsdCBlcnJvck1hcDtcbiIsImltcG9ydCBkZWZhdWx0RXJyb3JNYXAgZnJvbSBcIi4vbG9jYWxlcy9lbi5qc1wiO1xubGV0IG92ZXJyaWRlRXJyb3JNYXAgPSBkZWZhdWx0RXJyb3JNYXA7XG5leHBvcnQgeyBkZWZhdWx0RXJyb3JNYXAgfTtcbmV4cG9ydCBmdW5jdGlvbiBzZXRFcnJvck1hcChtYXApIHtcbiAgICBvdmVycmlkZUVycm9yTWFwID0gbWFwO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEVycm9yTWFwKCkge1xuICAgIHJldHVybiBvdmVycmlkZUVycm9yTWFwO1xufVxuIiwiaW1wb3J0IHsgZ2V0RXJyb3JNYXAgfSBmcm9tIFwiLi4vZXJyb3JzLmpzXCI7XG5pbXBvcnQgZGVmYXVsdEVycm9yTWFwIGZyb20gXCIuLi9sb2NhbGVzL2VuLmpzXCI7XG5leHBvcnQgY29uc3QgbWFrZUlzc3VlID0gKHBhcmFtcykgPT4ge1xuICAgIGNvbnN0IHsgZGF0YSwgcGF0aCwgZXJyb3JNYXBzLCBpc3N1ZURhdGEgfSA9IHBhcmFtcztcbiAgICBjb25zdCBmdWxsUGF0aCA9IFsuLi5wYXRoLCAuLi4oaXNzdWVEYXRhLnBhdGggfHwgW10pXTtcbiAgICBjb25zdCBmdWxsSXNzdWUgPSB7XG4gICAgICAgIC4uLmlzc3VlRGF0YSxcbiAgICAgICAgcGF0aDogZnVsbFBhdGgsXG4gICAgfTtcbiAgICBpZiAoaXNzdWVEYXRhLm1lc3NhZ2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uaXNzdWVEYXRhLFxuICAgICAgICAgICAgcGF0aDogZnVsbFBhdGgsXG4gICAgICAgICAgICBtZXNzYWdlOiBpc3N1ZURhdGEubWVzc2FnZSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgbGV0IGVycm9yTWVzc2FnZSA9IFwiXCI7XG4gICAgY29uc3QgbWFwcyA9IGVycm9yTWFwc1xuICAgICAgICAuZmlsdGVyKChtKSA9PiAhIW0pXG4gICAgICAgIC5zbGljZSgpXG4gICAgICAgIC5yZXZlcnNlKCk7XG4gICAgZm9yIChjb25zdCBtYXAgb2YgbWFwcykge1xuICAgICAgICBlcnJvck1lc3NhZ2UgPSBtYXAoZnVsbElzc3VlLCB7IGRhdGEsIGRlZmF1bHRFcnJvcjogZXJyb3JNZXNzYWdlIH0pLm1lc3NhZ2U7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIC4uLmlzc3VlRGF0YSxcbiAgICAgICAgcGF0aDogZnVsbFBhdGgsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yTWVzc2FnZSxcbiAgICB9O1xufTtcbmV4cG9ydCBjb25zdCBFTVBUWV9QQVRIID0gW107XG5leHBvcnQgZnVuY3Rpb24gYWRkSXNzdWVUb0NvbnRleHQoY3R4LCBpc3N1ZURhdGEpIHtcbiAgICBjb25zdCBvdmVycmlkZU1hcCA9IGdldEVycm9yTWFwKCk7XG4gICAgY29uc3QgaXNzdWUgPSBtYWtlSXNzdWUoe1xuICAgICAgICBpc3N1ZURhdGE6IGlzc3VlRGF0YSxcbiAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICBlcnJvck1hcHM6IFtcbiAgICAgICAgICAgIGN0eC5jb21tb24uY29udGV4dHVhbEVycm9yTWFwLCAvLyBjb250ZXh0dWFsIGVycm9yIG1hcCBpcyBmaXJzdCBwcmlvcml0eVxuICAgICAgICAgICAgY3R4LnNjaGVtYUVycm9yTWFwLCAvLyB0aGVuIHNjaGVtYS1ib3VuZCBtYXAgaWYgYXZhaWxhYmxlXG4gICAgICAgICAgICBvdmVycmlkZU1hcCwgLy8gdGhlbiBnbG9iYWwgb3ZlcnJpZGUgbWFwXG4gICAgICAgICAgICBvdmVycmlkZU1hcCA9PT0gZGVmYXVsdEVycm9yTWFwID8gdW5kZWZpbmVkIDogZGVmYXVsdEVycm9yTWFwLCAvLyB0aGVuIGdsb2JhbCBkZWZhdWx0IG1hcFxuICAgICAgICBdLmZpbHRlcigoeCkgPT4gISF4KSxcbiAgICB9KTtcbiAgICBjdHguY29tbW9uLmlzc3Vlcy5wdXNoKGlzc3VlKTtcbn1cbmV4cG9ydCBjbGFzcyBQYXJzZVN0YXR1cyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSBcInZhbGlkXCI7XG4gICAgfVxuICAgIGRpcnR5KCkge1xuICAgICAgICBpZiAodGhpcy52YWx1ZSA9PT0gXCJ2YWxpZFwiKVxuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IFwiZGlydHlcIjtcbiAgICB9XG4gICAgYWJvcnQoKSB7XG4gICAgICAgIGlmICh0aGlzLnZhbHVlICE9PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBcImFib3J0ZWRcIjtcbiAgICB9XG4gICAgc3RhdGljIG1lcmdlQXJyYXkoc3RhdHVzLCByZXN1bHRzKSB7XG4gICAgICAgIGNvbnN0IGFycmF5VmFsdWUgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBzIG9mIHJlc3VsdHMpIHtcbiAgICAgICAgICAgIGlmIChzLnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICBpZiAocy5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIGFycmF5VmFsdWUucHVzaChzLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IGFycmF5VmFsdWUgfTtcbiAgICB9XG4gICAgc3RhdGljIGFzeW5jIG1lcmdlT2JqZWN0QXN5bmMoc3RhdHVzLCBwYWlycykge1xuICAgICAgICBjb25zdCBzeW5jUGFpcnMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBwYWlyIG9mIHBhaXJzKSB7XG4gICAgICAgICAgICBjb25zdCBrZXkgPSBhd2FpdCBwYWlyLmtleTtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgcGFpci52YWx1ZTtcbiAgICAgICAgICAgIHN5bmNQYWlycy5wdXNoKHtcbiAgICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VPYmplY3RTeW5jKHN0YXR1cywgc3luY1BhaXJzKTtcbiAgICB9XG4gICAgc3RhdGljIG1lcmdlT2JqZWN0U3luYyhzdGF0dXMsIHBhaXJzKSB7XG4gICAgICAgIGNvbnN0IGZpbmFsT2JqZWN0ID0ge307XG4gICAgICAgIGZvciAoY29uc3QgcGFpciBvZiBwYWlycykge1xuICAgICAgICAgICAgY29uc3QgeyBrZXksIHZhbHVlIH0gPSBwYWlyO1xuICAgICAgICAgICAgaWYgKGtleS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgaWYgKHZhbHVlLnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICBpZiAoa2V5LnN0YXR1cyA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgaWYgKHZhbHVlLnN0YXR1cyA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgaWYgKGtleS52YWx1ZSAhPT0gXCJfX3Byb3RvX19cIiAmJiAodHlwZW9mIHZhbHVlLnZhbHVlICE9PSBcInVuZGVmaW5lZFwiIHx8IHBhaXIuYWx3YXlzU2V0KSkge1xuICAgICAgICAgICAgICAgIGZpbmFsT2JqZWN0W2tleS52YWx1ZV0gPSB2YWx1ZS52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IGZpbmFsT2JqZWN0IH07XG4gICAgfVxufVxuZXhwb3J0IGNvbnN0IElOVkFMSUQgPSBPYmplY3QuZnJlZXplKHtcbiAgICBzdGF0dXM6IFwiYWJvcnRlZFwiLFxufSk7XG5leHBvcnQgY29uc3QgRElSVFkgPSAodmFsdWUpID0+ICh7IHN0YXR1czogXCJkaXJ0eVwiLCB2YWx1ZSB9KTtcbmV4cG9ydCBjb25zdCBPSyA9ICh2YWx1ZSkgPT4gKHsgc3RhdHVzOiBcInZhbGlkXCIsIHZhbHVlIH0pO1xuZXhwb3J0IGNvbnN0IGlzQWJvcnRlZCA9ICh4KSA9PiB4LnN0YXR1cyA9PT0gXCJhYm9ydGVkXCI7XG5leHBvcnQgY29uc3QgaXNEaXJ0eSA9ICh4KSA9PiB4LnN0YXR1cyA9PT0gXCJkaXJ0eVwiO1xuZXhwb3J0IGNvbnN0IGlzVmFsaWQgPSAoeCkgPT4geC5zdGF0dXMgPT09IFwidmFsaWRcIjtcbmV4cG9ydCBjb25zdCBpc0FzeW5jID0gKHgpID0+IHR5cGVvZiBQcm9taXNlICE9PSBcInVuZGVmaW5lZFwiICYmIHggaW5zdGFuY2VvZiBQcm9taXNlO1xuIiwiZXhwb3J0IHZhciBlcnJvclV0aWw7XG4oZnVuY3Rpb24gKGVycm9yVXRpbCkge1xuICAgIGVycm9yVXRpbC5lcnJUb09iaiA9IChtZXNzYWdlKSA9PiB0eXBlb2YgbWVzc2FnZSA9PT0gXCJzdHJpbmdcIiA/IHsgbWVzc2FnZSB9IDogbWVzc2FnZSB8fCB7fTtcbiAgICAvLyBiaW9tZS1pZ25vcmUgbGludDpcbiAgICBlcnJvclV0aWwudG9TdHJpbmcgPSAobWVzc2FnZSkgPT4gdHlwZW9mIG1lc3NhZ2UgPT09IFwic3RyaW5nXCIgPyBtZXNzYWdlIDogbWVzc2FnZT8ubWVzc2FnZTtcbn0pKGVycm9yVXRpbCB8fCAoZXJyb3JVdGlsID0ge30pKTtcbiIsImltcG9ydCB7IFpvZEVycm9yLCBab2RJc3N1ZUNvZGUsIH0gZnJvbSBcIi4vWm9kRXJyb3IuanNcIjtcbmltcG9ydCB7IGRlZmF1bHRFcnJvck1hcCwgZ2V0RXJyb3JNYXAgfSBmcm9tIFwiLi9lcnJvcnMuanNcIjtcbmltcG9ydCB7IGVycm9yVXRpbCB9IGZyb20gXCIuL2hlbHBlcnMvZXJyb3JVdGlsLmpzXCI7XG5pbXBvcnQgeyBESVJUWSwgSU5WQUxJRCwgT0ssIFBhcnNlU3RhdHVzLCBhZGRJc3N1ZVRvQ29udGV4dCwgaXNBYm9ydGVkLCBpc0FzeW5jLCBpc0RpcnR5LCBpc1ZhbGlkLCBtYWtlSXNzdWUsIH0gZnJvbSBcIi4vaGVscGVycy9wYXJzZVV0aWwuanNcIjtcbmltcG9ydCB7IHV0aWwsIFpvZFBhcnNlZFR5cGUsIGdldFBhcnNlZFR5cGUgfSBmcm9tIFwiLi9oZWxwZXJzL3V0aWwuanNcIjtcbmNsYXNzIFBhcnNlSW5wdXRMYXp5UGF0aCB7XG4gICAgY29uc3RydWN0b3IocGFyZW50LCB2YWx1ZSwgcGF0aCwga2V5KSB7XG4gICAgICAgIHRoaXMuX2NhY2hlZFBhdGggPSBbXTtcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIHRoaXMuZGF0YSA9IHZhbHVlO1xuICAgICAgICB0aGlzLl9wYXRoID0gcGF0aDtcbiAgICAgICAgdGhpcy5fa2V5ID0ga2V5O1xuICAgIH1cbiAgICBnZXQgcGF0aCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9jYWNoZWRQYXRoLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodGhpcy5fa2V5KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2NhY2hlZFBhdGgucHVzaCguLi50aGlzLl9wYXRoLCAuLi50aGlzLl9rZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY2FjaGVkUGF0aC5wdXNoKC4uLnRoaXMuX3BhdGgsIHRoaXMuX2tleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZFBhdGg7XG4gICAgfVxufVxuY29uc3QgaGFuZGxlUmVzdWx0ID0gKGN0eCwgcmVzdWx0KSA9PiB7XG4gICAgaWYgKGlzVmFsaWQocmVzdWx0KSkge1xuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQudmFsdWUgfTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmICghY3R4LmNvbW1vbi5pc3N1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJWYWxpZGF0aW9uIGZhaWxlZCBidXQgbm8gaXNzdWVzIGRldGVjdGVkLlwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICBnZXQgZXJyb3IoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2Vycm9yKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZXJyb3I7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgWm9kRXJyb3IoY3R4LmNvbW1vbi5pc3N1ZXMpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2Vycm9yID0gZXJyb3I7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2Vycm9yO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG59O1xuZnVuY3Rpb24gcHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpIHtcbiAgICBpZiAoIXBhcmFtcylcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIGNvbnN0IHsgZXJyb3JNYXAsIGludmFsaWRfdHlwZV9lcnJvciwgcmVxdWlyZWRfZXJyb3IsIGRlc2NyaXB0aW9uIH0gPSBwYXJhbXM7XG4gICAgaWYgKGVycm9yTWFwICYmIChpbnZhbGlkX3R5cGVfZXJyb3IgfHwgcmVxdWlyZWRfZXJyb3IpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2FuJ3QgdXNlIFwiaW52YWxpZF90eXBlX2Vycm9yXCIgb3IgXCJyZXF1aXJlZF9lcnJvclwiIGluIGNvbmp1bmN0aW9uIHdpdGggY3VzdG9tIGVycm9yIG1hcC5gKTtcbiAgICB9XG4gICAgaWYgKGVycm9yTWFwKVxuICAgICAgICByZXR1cm4geyBlcnJvck1hcDogZXJyb3JNYXAsIGRlc2NyaXB0aW9uIH07XG4gICAgY29uc3QgY3VzdG9tTWFwID0gKGlzcywgY3R4KSA9PiB7XG4gICAgICAgIGNvbnN0IHsgbWVzc2FnZSB9ID0gcGFyYW1zO1xuICAgICAgICBpZiAoaXNzLmNvZGUgPT09IFwiaW52YWxpZF9lbnVtX3ZhbHVlXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB7IG1lc3NhZ2U6IG1lc3NhZ2UgPz8gY3R4LmRlZmF1bHRFcnJvciB9O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgY3R4LmRhdGEgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB7IG1lc3NhZ2U6IG1lc3NhZ2UgPz8gcmVxdWlyZWRfZXJyb3IgPz8gY3R4LmRlZmF1bHRFcnJvciB9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc3MuY29kZSAhPT0gXCJpbnZhbGlkX3R5cGVcIilcbiAgICAgICAgICAgIHJldHVybiB7IG1lc3NhZ2U6IGN0eC5kZWZhdWx0RXJyb3IgfTtcbiAgICAgICAgcmV0dXJuIHsgbWVzc2FnZTogbWVzc2FnZSA/PyBpbnZhbGlkX3R5cGVfZXJyb3IgPz8gY3R4LmRlZmF1bHRFcnJvciB9O1xuICAgIH07XG4gICAgcmV0dXJuIHsgZXJyb3JNYXA6IGN1c3RvbU1hcCwgZGVzY3JpcHRpb24gfTtcbn1cbmV4cG9ydCBjbGFzcyBab2RUeXBlIHtcbiAgICBnZXQgZGVzY3JpcHRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuZGVzY3JpcHRpb247XG4gICAgfVxuICAgIF9nZXRUeXBlKGlucHV0KSB7XG4gICAgICAgIHJldHVybiBnZXRQYXJzZWRUeXBlKGlucHV0LmRhdGEpO1xuICAgIH1cbiAgICBfZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCkge1xuICAgICAgICByZXR1cm4gKGN0eCB8fCB7XG4gICAgICAgICAgICBjb21tb246IGlucHV0LnBhcmVudC5jb21tb24sXG4gICAgICAgICAgICBkYXRhOiBpbnB1dC5kYXRhLFxuICAgICAgICAgICAgcGFyc2VkVHlwZTogZ2V0UGFyc2VkVHlwZShpbnB1dC5kYXRhKSxcbiAgICAgICAgICAgIHNjaGVtYUVycm9yTWFwOiB0aGlzLl9kZWYuZXJyb3JNYXAsXG4gICAgICAgICAgICBwYXRoOiBpbnB1dC5wYXRoLFxuICAgICAgICAgICAgcGFyZW50OiBpbnB1dC5wYXJlbnQsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdGF0dXM6IG5ldyBQYXJzZVN0YXR1cygpLFxuICAgICAgICAgICAgY3R4OiB7XG4gICAgICAgICAgICAgICAgY29tbW9uOiBpbnB1dC5wYXJlbnQuY29tbW9uLFxuICAgICAgICAgICAgICAgIGRhdGE6IGlucHV0LmRhdGEsXG4gICAgICAgICAgICAgICAgcGFyc2VkVHlwZTogZ2V0UGFyc2VkVHlwZShpbnB1dC5kYXRhKSxcbiAgICAgICAgICAgICAgICBzY2hlbWFFcnJvck1hcDogdGhpcy5fZGVmLmVycm9yTWFwLFxuICAgICAgICAgICAgICAgIHBhdGg6IGlucHV0LnBhdGgsXG4gICAgICAgICAgICAgICAgcGFyZW50OiBpbnB1dC5wYXJlbnQsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBfcGFyc2VTeW5jKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX3BhcnNlKGlucHV0KTtcbiAgICAgICAgaWYgKGlzQXN5bmMocmVzdWx0KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU3luY2hyb25vdXMgcGFyc2UgZW5jb3VudGVyZWQgcHJvbWlzZS5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgX3BhcnNlQXN5bmMoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fcGFyc2UoaW5wdXQpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdCk7XG4gICAgfVxuICAgIHBhcnNlKGRhdGEsIHBhcmFtcykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnNhZmVQYXJzZShkYXRhLCBwYXJhbXMpO1xuICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0LmRhdGE7XG4gICAgICAgIHRocm93IHJlc3VsdC5lcnJvcjtcbiAgICB9XG4gICAgc2FmZVBhcnNlKGRhdGEsIHBhcmFtcykge1xuICAgICAgICBjb25zdCBjdHggPSB7XG4gICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgIGFzeW5jOiBwYXJhbXM/LmFzeW5jID8/IGZhbHNlLFxuICAgICAgICAgICAgICAgIGNvbnRleHR1YWxFcnJvck1hcDogcGFyYW1zPy5lcnJvck1hcCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwYXRoOiBwYXJhbXM/LnBhdGggfHwgW10sXG4gICAgICAgICAgICBzY2hlbWFFcnJvck1hcDogdGhpcy5fZGVmLmVycm9yTWFwLFxuICAgICAgICAgICAgcGFyZW50OiBudWxsLFxuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHBhcnNlZFR5cGU6IGdldFBhcnNlZFR5cGUoZGF0YSksXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX3BhcnNlU3luYyh7IGRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KTtcbiAgICAgICAgcmV0dXJuIGhhbmRsZVJlc3VsdChjdHgsIHJlc3VsdCk7XG4gICAgfVxuICAgIFwifnZhbGlkYXRlXCIoZGF0YSkge1xuICAgICAgICBjb25zdCBjdHggPSB7XG4gICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgIGFzeW5jOiAhIXRoaXNbXCJ+c3RhbmRhcmRcIl0uYXN5bmMsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGF0aDogW10sXG4gICAgICAgICAgICBzY2hlbWFFcnJvck1hcDogdGhpcy5fZGVmLmVycm9yTWFwLFxuICAgICAgICAgICAgcGFyZW50OiBudWxsLFxuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHBhcnNlZFR5cGU6IGdldFBhcnNlZFR5cGUoZGF0YSksXG4gICAgICAgIH07XG4gICAgICAgIGlmICghdGhpc1tcIn5zdGFuZGFyZFwiXS5hc3luYykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9wYXJzZVN5bmMoeyBkYXRhLCBwYXRoOiBbXSwgcGFyZW50OiBjdHggfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlzVmFsaWQocmVzdWx0KVxuICAgICAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpc3N1ZXM6IGN0eC5jb21tb24uaXNzdWVzLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGlmIChlcnI/Lm1lc3NhZ2U/LnRvTG93ZXJDYXNlKCk/LmluY2x1ZGVzKFwiZW5jb3VudGVyZWRcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpc1tcIn5zdGFuZGFyZFwiXS5hc3luYyA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGN0eC5jb21tb24gPSB7XG4gICAgICAgICAgICAgICAgICAgIGlzc3VlczogW10sXG4gICAgICAgICAgICAgICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX3BhcnNlQXN5bmMoeyBkYXRhLCBwYXRoOiBbXSwgcGFyZW50OiBjdHggfSkudGhlbigocmVzdWx0KSA9PiBpc1ZhbGlkKHJlc3VsdClcbiAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHQudmFsdWUsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICBpc3N1ZXM6IGN0eC5jb21tb24uaXNzdWVzLFxuICAgICAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIHBhcnNlQXN5bmMoZGF0YSwgcGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuc2FmZVBhcnNlQXN5bmMoZGF0YSwgcGFyYW1zKTtcbiAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5kYXRhO1xuICAgICAgICB0aHJvdyByZXN1bHQuZXJyb3I7XG4gICAgfVxuICAgIGFzeW5jIHNhZmVQYXJzZUFzeW5jKGRhdGEsIHBhcmFtcykge1xuICAgICAgICBjb25zdCBjdHggPSB7XG4gICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgIGNvbnRleHR1YWxFcnJvck1hcDogcGFyYW1zPy5lcnJvck1hcCxcbiAgICAgICAgICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwYXRoOiBwYXJhbXM/LnBhdGggfHwgW10sXG4gICAgICAgICAgICBzY2hlbWFFcnJvck1hcDogdGhpcy5fZGVmLmVycm9yTWFwLFxuICAgICAgICAgICAgcGFyZW50OiBudWxsLFxuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHBhcnNlZFR5cGU6IGdldFBhcnNlZFR5cGUoZGF0YSksXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IG1heWJlQXN5bmNSZXN1bHQgPSB0aGlzLl9wYXJzZSh7IGRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgKGlzQXN5bmMobWF5YmVBc3luY1Jlc3VsdCkgPyBtYXliZUFzeW5jUmVzdWx0IDogUHJvbWlzZS5yZXNvbHZlKG1heWJlQXN5bmNSZXN1bHQpKTtcbiAgICAgICAgcmV0dXJuIGhhbmRsZVJlc3VsdChjdHgsIHJlc3VsdCk7XG4gICAgfVxuICAgIHJlZmluZShjaGVjaywgbWVzc2FnZSkge1xuICAgICAgICBjb25zdCBnZXRJc3N1ZVByb3BlcnRpZXMgPSAodmFsKSA9PiB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgPT09IFwic3RyaW5nXCIgfHwgdHlwZW9mIG1lc3NhZ2UgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBtZXNzYWdlIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgbWVzc2FnZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2UodmFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVmaW5lbWVudCgodmFsLCBjdHgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGNoZWNrKHZhbCk7XG4gICAgICAgICAgICBjb25zdCBzZXRFcnJvciA9ICgpID0+IGN0eC5hZGRJc3N1ZSh7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmN1c3RvbSxcbiAgICAgICAgICAgICAgICAuLi5nZXRJc3N1ZVByb3BlcnRpZXModmFsKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBQcm9taXNlICE9PSBcInVuZGVmaW5lZFwiICYmIHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0LnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRFcnJvcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghcmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgc2V0RXJyb3IoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlZmluZW1lbnQoY2hlY2ssIHJlZmluZW1lbnREYXRhKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZWZpbmVtZW50KCh2YWwsIGN0eCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFjaGVjayh2YWwpKSB7XG4gICAgICAgICAgICAgICAgY3R4LmFkZElzc3VlKHR5cGVvZiByZWZpbmVtZW50RGF0YSA9PT0gXCJmdW5jdGlvblwiID8gcmVmaW5lbWVudERhdGEodmFsLCBjdHgpIDogcmVmaW5lbWVudERhdGEpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX3JlZmluZW1lbnQocmVmaW5lbWVudCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEVmZmVjdHMoe1xuICAgICAgICAgICAgc2NoZW1hOiB0aGlzLFxuICAgICAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFZmZlY3RzLFxuICAgICAgICAgICAgZWZmZWN0OiB7IHR5cGU6IFwicmVmaW5lbWVudFwiLCByZWZpbmVtZW50IH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdXBlclJlZmluZShyZWZpbmVtZW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZWZpbmVtZW50KHJlZmluZW1lbnQpO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihkZWYpIHtcbiAgICAgICAgLyoqIEFsaWFzIG9mIHNhZmVQYXJzZUFzeW5jICovXG4gICAgICAgIHRoaXMuc3BhID0gdGhpcy5zYWZlUGFyc2VBc3luYztcbiAgICAgICAgdGhpcy5fZGVmID0gZGVmO1xuICAgICAgICB0aGlzLnBhcnNlID0gdGhpcy5wYXJzZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnNhZmVQYXJzZSA9IHRoaXMuc2FmZVBhcnNlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucGFyc2VBc3luYyA9IHRoaXMucGFyc2VBc3luYy5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnNhZmVQYXJzZUFzeW5jID0gdGhpcy5zYWZlUGFyc2VBc3luYy5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnNwYSA9IHRoaXMuc3BhLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucmVmaW5lID0gdGhpcy5yZWZpbmUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5yZWZpbmVtZW50ID0gdGhpcy5yZWZpbmVtZW50LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuc3VwZXJSZWZpbmUgPSB0aGlzLnN1cGVyUmVmaW5lLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub3B0aW9uYWwgPSB0aGlzLm9wdGlvbmFsLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMubnVsbGFibGUgPSB0aGlzLm51bGxhYmxlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMubnVsbGlzaCA9IHRoaXMubnVsbGlzaC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmFycmF5ID0gdGhpcy5hcnJheS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnByb21pc2UgPSB0aGlzLnByb21pc2UuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5vciA9IHRoaXMub3IuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5hbmQgPSB0aGlzLmFuZC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnRyYW5zZm9ybSA9IHRoaXMudHJhbnNmb3JtLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuYnJhbmQgPSB0aGlzLmJyYW5kLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuZGVmYXVsdCA9IHRoaXMuZGVmYXVsdC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmNhdGNoID0gdGhpcy5jYXRjaC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmRlc2NyaWJlID0gdGhpcy5kZXNjcmliZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnBpcGUgPSB0aGlzLnBpcGUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5yZWFkb25seSA9IHRoaXMucmVhZG9ubHkuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5pc051bGxhYmxlID0gdGhpcy5pc051bGxhYmxlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaXNPcHRpb25hbCA9IHRoaXMuaXNPcHRpb25hbC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzW1wifnN0YW5kYXJkXCJdID0ge1xuICAgICAgICAgICAgdmVyc2lvbjogMSxcbiAgICAgICAgICAgIHZlbmRvcjogXCJ6b2RcIixcbiAgICAgICAgICAgIHZhbGlkYXRlOiAoZGF0YSkgPT4gdGhpc1tcIn52YWxpZGF0ZVwiXShkYXRhKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgb3B0aW9uYWwoKSB7XG4gICAgICAgIHJldHVybiBab2RPcHRpb25hbC5jcmVhdGUodGhpcywgdGhpcy5fZGVmKTtcbiAgICB9XG4gICAgbnVsbGFibGUoKSB7XG4gICAgICAgIHJldHVybiBab2ROdWxsYWJsZS5jcmVhdGUodGhpcywgdGhpcy5fZGVmKTtcbiAgICB9XG4gICAgbnVsbGlzaCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubnVsbGFibGUoKS5vcHRpb25hbCgpO1xuICAgIH1cbiAgICBhcnJheSgpIHtcbiAgICAgICAgcmV0dXJuIFpvZEFycmF5LmNyZWF0ZSh0aGlzKTtcbiAgICB9XG4gICAgcHJvbWlzZSgpIHtcbiAgICAgICAgcmV0dXJuIFpvZFByb21pc2UuY3JlYXRlKHRoaXMsIHRoaXMuX2RlZik7XG4gICAgfVxuICAgIG9yKG9wdGlvbikge1xuICAgICAgICByZXR1cm4gWm9kVW5pb24uY3JlYXRlKFt0aGlzLCBvcHRpb25dLCB0aGlzLl9kZWYpO1xuICAgIH1cbiAgICBhbmQoaW5jb21pbmcpIHtcbiAgICAgICAgcmV0dXJuIFpvZEludGVyc2VjdGlvbi5jcmVhdGUodGhpcywgaW5jb21pbmcsIHRoaXMuX2RlZik7XG4gICAgfVxuICAgIHRyYW5zZm9ybSh0cmFuc2Zvcm0pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RFZmZlY3RzKHtcbiAgICAgICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXModGhpcy5fZGVmKSxcbiAgICAgICAgICAgIHNjaGVtYTogdGhpcyxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRWZmZWN0cyxcbiAgICAgICAgICAgIGVmZmVjdDogeyB0eXBlOiBcInRyYW5zZm9ybVwiLCB0cmFuc2Zvcm0gfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGRlZmF1bHQoZGVmKSB7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRWYWx1ZUZ1bmMgPSB0eXBlb2YgZGVmID09PSBcImZ1bmN0aW9uXCIgPyBkZWYgOiAoKSA9PiBkZWY7XG4gICAgICAgIHJldHVybiBuZXcgWm9kRGVmYXVsdCh7XG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHRoaXMuX2RlZiksXG4gICAgICAgICAgICBpbm5lclR5cGU6IHRoaXMsXG4gICAgICAgICAgICBkZWZhdWx0VmFsdWU6IGRlZmF1bHRWYWx1ZUZ1bmMsXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZERlZmF1bHQsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBicmFuZCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RCcmFuZGVkKHtcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQnJhbmRlZCxcbiAgICAgICAgICAgIHR5cGU6IHRoaXMsXG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHRoaXMuX2RlZiksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjYXRjaChkZWYpIHtcbiAgICAgICAgY29uc3QgY2F0Y2hWYWx1ZUZ1bmMgPSB0eXBlb2YgZGVmID09PSBcImZ1bmN0aW9uXCIgPyBkZWYgOiAoKSA9PiBkZWY7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQ2F0Y2goe1xuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyh0aGlzLl9kZWYpLFxuICAgICAgICAgICAgaW5uZXJUeXBlOiB0aGlzLFxuICAgICAgICAgICAgY2F0Y2hWYWx1ZTogY2F0Y2hWYWx1ZUZ1bmMsXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZENhdGNoLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZGVzY3JpYmUoZGVzY3JpcHRpb24pIHtcbiAgICAgICAgY29uc3QgVGhpcyA9IHRoaXMuY29uc3RydWN0b3I7XG4gICAgICAgIHJldHVybiBuZXcgVGhpcyh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHBpcGUodGFyZ2V0KSB7XG4gICAgICAgIHJldHVybiBab2RQaXBlbGluZS5jcmVhdGUodGhpcywgdGFyZ2V0KTtcbiAgICB9XG4gICAgcmVhZG9ubHkoKSB7XG4gICAgICAgIHJldHVybiBab2RSZWFkb25seS5jcmVhdGUodGhpcyk7XG4gICAgfVxuICAgIGlzT3B0aW9uYWwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNhZmVQYXJzZSh1bmRlZmluZWQpLnN1Y2Nlc3M7XG4gICAgfVxuICAgIGlzTnVsbGFibGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNhZmVQYXJzZShudWxsKS5zdWNjZXNzO1xuICAgIH1cbn1cbmNvbnN0IGN1aWRSZWdleCA9IC9eY1teXFxzLV17OCx9JC9pO1xuY29uc3QgY3VpZDJSZWdleCA9IC9eWzAtOWEtel0rJC87XG5jb25zdCB1bGlkUmVnZXggPSAvXlswLTlBLUhKS01OUC1UVi1aXXsyNn0kL2k7XG4vLyBjb25zdCB1dWlkUmVnZXggPVxuLy8gICAvXihbYS1mMC05XXs4fS1bYS1mMC05XXs0fS1bMS01XVthLWYwLTldezN9LVthLWYwLTldezR9LVthLWYwLTldezEyfXwwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDApJC9pO1xuY29uc3QgdXVpZFJlZ2V4ID0gL15bMC05YS1mQS1GXXs4fVxcYi1bMC05YS1mQS1GXXs0fVxcYi1bMC05YS1mQS1GXXs0fVxcYi1bMC05YS1mQS1GXXs0fVxcYi1bMC05YS1mQS1GXXsxMn0kL2k7XG5jb25zdCBuYW5vaWRSZWdleCA9IC9eW2EtejAtOV8tXXsyMX0kL2k7XG5jb25zdCBqd3RSZWdleCA9IC9eW0EtWmEtejAtOS1fXStcXC5bQS1aYS16MC05LV9dK1xcLltBLVphLXowLTktX10qJC87XG5jb25zdCBkdXJhdGlvblJlZ2V4ID0gL15bLStdP1AoPyEkKSg/Oig/OlstK10/XFxkK1kpfCg/OlstK10/XFxkK1suLF1cXGQrWSQpKT8oPzooPzpbLStdP1xcZCtNKXwoPzpbLStdP1xcZCtbLixdXFxkK00kKSk/KD86KD86Wy0rXT9cXGQrVyl8KD86Wy0rXT9cXGQrWy4sXVxcZCtXJCkpPyg/Oig/OlstK10/XFxkK0QpfCg/OlstK10/XFxkK1suLF1cXGQrRCQpKT8oPzpUKD89W1xcZCstXSkoPzooPzpbLStdP1xcZCtIKXwoPzpbLStdP1xcZCtbLixdXFxkK0gkKSk/KD86KD86Wy0rXT9cXGQrTSl8KD86Wy0rXT9cXGQrWy4sXVxcZCtNJCkpPyg/OlstK10/XFxkKyg/OlsuLF1cXGQrKT9TKT8pPz8kLztcbi8vIGZyb20gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzQ2MTgxLzE1NTAxNTVcbi8vIG9sZCB2ZXJzaW9uOiB0b28gc2xvdywgZGlkbid0IHN1cHBvcnQgdW5pY29kZVxuLy8gY29uc3QgZW1haWxSZWdleCA9IC9eKCgoW2Etel18XFxkfFshI1xcJCUmJ1xcKlxcK1xcLVxcLz1cXD9cXF5fYHtcXHx9fl18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKyhcXC4oW2Etel18XFxkfFshI1xcJCUmJ1xcKlxcK1xcLVxcLz1cXD9cXF5fYHtcXHx9fl18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKykqKXwoKFxceDIyKSgoKChcXHgyMHxcXHgwOSkqKFxceDBkXFx4MGEpKT8oXFx4MjB8XFx4MDkpKyk/KChbXFx4MDEtXFx4MDhcXHgwYlxceDBjXFx4MGUtXFx4MWZcXHg3Zl18XFx4MjF8W1xceDIzLVxceDViXXxbXFx4NWQtXFx4N2VdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoXFxcXChbXFx4MDEtXFx4MDlcXHgwYlxceDBjXFx4MGQtXFx4N2ZdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpKSooKChcXHgyMHxcXHgwOSkqKFxceDBkXFx4MGEpKT8oXFx4MjB8XFx4MDkpKyk/KFxceDIyKSkpQCgoKFthLXpdfFxcZHxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KChbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKihbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSlcXC4pKygoW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCgoW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKihbYS16XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKSQvaTtcbi8vb2xkIGVtYWlsIHJlZ2V4XG4vLyBjb25zdCBlbWFpbFJlZ2V4ID0gL14oKFtePD4oKVtcXF0uLDs6XFxzQFwiXSsoXFwuW148PigpW1xcXS4sOzpcXHNAXCJdKykqKXwoXCIuK1wiKSlAKCg/IS0pKFtePD4oKVtcXF0uLDs6XFxzQFwiXStcXC4pK1tePD4oKVtcXF0uLDs6XFxzQFwiXXsxLH0pW14tPD4oKVtcXF0uLDs6XFxzQFwiXSQvaTtcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuLy8gY29uc3QgZW1haWxSZWdleCA9XG4vLyAgIC9eKChbXjw+KClbXFxdXFxcXC4sOzpcXHNAXFxcIl0rKFxcLltePD4oKVtcXF1cXFxcLiw7Olxcc0BcXFwiXSspKil8KFxcXCIuK1xcXCIpKUAoKFxcWygoKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKVxcLil7M30oKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKVxcXSl8KFxcW0lQdjY6KChbYS1mMC05XXsxLDR9Oil7N318OjooW2EtZjAtOV17MSw0fTopezAsNn18KFthLWYwLTldezEsNH06KXsxfTooW2EtZjAtOV17MSw0fTopezAsNX18KFthLWYwLTldezEsNH06KXsyfTooW2EtZjAtOV17MSw0fTopezAsNH18KFthLWYwLTldezEsNH06KXszfTooW2EtZjAtOV17MSw0fTopezAsM318KFthLWYwLTldezEsNH06KXs0fTooW2EtZjAtOV17MSw0fTopezAsMn18KFthLWYwLTldezEsNH06KXs1fTooW2EtZjAtOV17MSw0fTopezAsMX0pKFthLWYwLTldezEsNH18KCgoMjVbMC01XSl8KDJbMC00XVswLTldKXwoMVswLTldezJ9KXwoWzAtOV17MSwyfSkpXFwuKXszfSgoMjVbMC01XSl8KDJbMC00XVswLTldKXwoMVswLTldezJ9KXwoWzAtOV17MSwyfSkpKVxcXSl8KFtBLVphLXowLTldKFtBLVphLXowLTktXSpbQS1aYS16MC05XSkqKFxcLltBLVphLXpdezIsfSkrKSkkLztcbi8vIGNvbnN0IGVtYWlsUmVnZXggPVxuLy8gICAvXlthLXpBLVowLTlcXC5cXCFcXCNcXCRcXCVcXCZcXCdcXCpcXCtcXC9cXD1cXD9cXF5cXF9cXGBcXHtcXHxcXH1cXH5cXC1dK0BbYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8oPzpcXC5bYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8pKiQvO1xuLy8gY29uc3QgZW1haWxSZWdleCA9XG4vLyAgIC9eKD86W2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKyg/OlxcLlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSspKnxcIig/OltcXHgwMS1cXHgwOFxceDBiXFx4MGNcXHgwZS1cXHgxZlxceDIxXFx4MjMtXFx4NWJcXHg1ZC1cXHg3Zl18XFxcXFtcXHgwMS1cXHgwOVxceDBiXFx4MGNcXHgwZS1cXHg3Zl0pKlwiKUAoPzooPzpbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XFwuKStbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/fFxcWyg/Oig/OjI1WzAtNV18MlswLTRdWzAtOV18WzAxXT9bMC05XVswLTldPylcXC4pezN9KD86MjVbMC01XXwyWzAtNF1bMC05XXxbMDFdP1swLTldWzAtOV0/fFthLXowLTktXSpbYS16MC05XTooPzpbXFx4MDEtXFx4MDhcXHgwYlxceDBjXFx4MGUtXFx4MWZcXHgyMS1cXHg1YVxceDUzLVxceDdmXXxcXFxcW1xceDAxLVxceDA5XFx4MGJcXHgwY1xceDBlLVxceDdmXSkrKVxcXSkkL2k7XG5jb25zdCBlbWFpbFJlZ2V4ID0gL14oPyFcXC4pKD8hLipcXC5cXC4pKFtBLVowLTlfJytcXC1cXC5dKilbQS1aMC05XystXUAoW0EtWjAtOV1bQS1aMC05XFwtXSpcXC4pK1tBLVpdezIsfSQvaTtcbi8vIGNvbnN0IGVtYWlsUmVnZXggPVxuLy8gICAvXlthLXowLTkuISMkJSbigJkqKy89P15fYHt8fX4tXStAW2EtejAtOS1dKyg/OlxcLlthLXowLTlcXC1dKykqJC9pO1xuLy8gZnJvbSBodHRwczovL3RoZWtldmluc2NvdHQuY29tL2Vtb2ppcy1pbi1qYXZhc2NyaXB0LyN3cml0aW5nLWEtcmVndWxhci1leHByZXNzaW9uXG5jb25zdCBfZW1vamlSZWdleCA9IGBeKFxcXFxwe0V4dGVuZGVkX1BpY3RvZ3JhcGhpY318XFxcXHB7RW1vamlfQ29tcG9uZW50fSkrJGA7XG5sZXQgZW1vamlSZWdleDtcbi8vIGZhc3Rlciwgc2ltcGxlciwgc2FmZXJcbmNvbnN0IGlwdjRSZWdleCA9IC9eKD86KD86MjVbMC01XXwyWzAtNF1bMC05XXwxWzAtOV1bMC05XXxbMS05XVswLTldfFswLTldKVxcLil7M30oPzoyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldWzAtOV18WzAtOV0pJC87XG5jb25zdCBpcHY0Q2lkclJlZ2V4ID0gL14oPzooPzoyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldWzAtOV18WzAtOV0pXFwuKXszfSg/OjI1WzAtNV18MlswLTRdWzAtOV18MVswLTldWzAtOV18WzEtOV1bMC05XXxbMC05XSlcXC8oM1swLTJdfFsxMl0/WzAtOV0pJC87XG4vLyBjb25zdCBpcHY2UmVnZXggPVxuLy8gL14oKFthLWYwLTldezEsNH06KXs3fXw6OihbYS1mMC05XXsxLDR9Oil7MCw2fXwoW2EtZjAtOV17MSw0fTopezF9OihbYS1mMC05XXsxLDR9Oil7MCw1fXwoW2EtZjAtOV17MSw0fTopezJ9OihbYS1mMC05XXsxLDR9Oil7MCw0fXwoW2EtZjAtOV17MSw0fTopezN9OihbYS1mMC05XXsxLDR9Oil7MCwzfXwoW2EtZjAtOV17MSw0fTopezR9OihbYS1mMC05XXsxLDR9Oil7MCwyfXwoW2EtZjAtOV17MSw0fTopezV9OihbYS1mMC05XXsxLDR9Oil7MCwxfSkoW2EtZjAtOV17MSw0fXwoKCgyNVswLTVdKXwoMlswLTRdWzAtOV0pfCgxWzAtOV17Mn0pfChbMC05XXsxLDJ9KSlcXC4pezN9KCgyNVswLTVdKXwoMlswLTRdWzAtOV0pfCgxWzAtOV17Mn0pfChbMC05XXsxLDJ9KSkpJC87XG5jb25zdCBpcHY2UmVnZXggPSAvXigoWzAtOWEtZkEtRl17MSw0fTopezcsN31bMC05YS1mQS1GXXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw3fTp8KFswLTlhLWZBLUZdezEsNH06KXsxLDZ9OlswLTlhLWZBLUZdezEsNH18KFswLTlhLWZBLUZdezEsNH06KXsxLDV9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDJ9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw0fSg6WzAtOWEtZkEtRl17MSw0fSl7MSwzfXwoWzAtOWEtZkEtRl17MSw0fTopezEsM30oOlswLTlhLWZBLUZdezEsNH0pezEsNH18KFswLTlhLWZBLUZdezEsNH06KXsxLDJ9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDV9fFswLTlhLWZBLUZdezEsNH06KCg6WzAtOWEtZkEtRl17MSw0fSl7MSw2fSl8OigoOlswLTlhLWZBLUZdezEsNH0pezEsN318Oil8ZmU4MDooOlswLTlhLWZBLUZdezAsNH0pezAsNH0lWzAtOWEtekEtWl17MSx9fDo6KGZmZmYoOjB7MSw0fSl7MCwxfTopezAsMX0oKDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKVxcLil7MywzfSgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSl8KFswLTlhLWZBLUZdezEsNH06KXsxLDR9OigoMjVbMC01XXwoMlswLTRdfDF7MCwxfVswLTldKXswLDF9WzAtOV0pXFwuKXszLDN9KDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKSkkLztcbmNvbnN0IGlwdjZDaWRyUmVnZXggPSAvXigoWzAtOWEtZkEtRl17MSw0fTopezcsN31bMC05YS1mQS1GXXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw3fTp8KFswLTlhLWZBLUZdezEsNH06KXsxLDZ9OlswLTlhLWZBLUZdezEsNH18KFswLTlhLWZBLUZdezEsNH06KXsxLDV9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDJ9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw0fSg6WzAtOWEtZkEtRl17MSw0fSl7MSwzfXwoWzAtOWEtZkEtRl17MSw0fTopezEsM30oOlswLTlhLWZBLUZdezEsNH0pezEsNH18KFswLTlhLWZBLUZdezEsNH06KXsxLDJ9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDV9fFswLTlhLWZBLUZdezEsNH06KCg6WzAtOWEtZkEtRl17MSw0fSl7MSw2fSl8OigoOlswLTlhLWZBLUZdezEsNH0pezEsN318Oil8ZmU4MDooOlswLTlhLWZBLUZdezAsNH0pezAsNH0lWzAtOWEtekEtWl17MSx9fDo6KGZmZmYoOjB7MSw0fSl7MCwxfTopezAsMX0oKDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKVxcLil7MywzfSgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSl8KFswLTlhLWZBLUZdezEsNH06KXsxLDR9OigoMjVbMC01XXwoMlswLTRdfDF7MCwxfVswLTldKXswLDF9WzAtOV0pXFwuKXszLDN9KDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKSlcXC8oMTJbMC04XXwxWzAxXVswLTldfFsxLTldP1swLTldKSQvO1xuLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNzg2MDM5Mi9kZXRlcm1pbmUtaWYtc3RyaW5nLWlzLWluLWJhc2U2NC11c2luZy1qYXZhc2NyaXB0XG5jb25zdCBiYXNlNjRSZWdleCA9IC9eKFswLTlhLXpBLVorL117NH0pKigoWzAtOWEtekEtWisvXXsyfT09KXwoWzAtOWEtekEtWisvXXszfT0pKT8kLztcbi8vIGh0dHBzOi8vYmFzZTY0Lmd1cnUvc3RhbmRhcmRzL2Jhc2U2NHVybFxuY29uc3QgYmFzZTY0dXJsUmVnZXggPSAvXihbMC05YS16QS1aLV9dezR9KSooKFswLTlhLXpBLVotX117Mn0oPT0pPyl8KFswLTlhLXpBLVotX117M30oPSk/KSk/JC87XG4vLyBzaW1wbGVcbi8vIGNvbnN0IGRhdGVSZWdleFNvdXJjZSA9IGBcXFxcZHs0fS1cXFxcZHsyfS1cXFxcZHsyfWA7XG4vLyBubyBsZWFwIHllYXIgdmFsaWRhdGlvblxuLy8gY29uc3QgZGF0ZVJlZ2V4U291cmNlID0gYFxcXFxkezR9LSgoMFsxMzU3OF18MTB8MTIpLTMxfCgwWzEzLTldfDFbMC0yXSktMzB8KDBbMS05XXwxWzAtMl0pLSgwWzEtOV18MVxcXFxkfDJcXFxcZCkpYDtcbi8vIHdpdGggbGVhcCB5ZWFyIHZhbGlkYXRpb25cbmNvbnN0IGRhdGVSZWdleFNvdXJjZSA9IGAoKFxcXFxkXFxcXGRbMjQ2OF1bMDQ4XXxcXFxcZFxcXFxkWzEzNTc5XVsyNl18XFxcXGRcXFxcZDBbNDhdfFswMjQ2OF1bMDQ4XTAwfFsxMzU3OV1bMjZdMDApLTAyLTI5fFxcXFxkezR9LSgoMFsxMzU3OF18MVswMl0pLSgwWzEtOV18WzEyXVxcXFxkfDNbMDFdKXwoMFs0NjldfDExKS0oMFsxLTldfFsxMl1cXFxcZHwzMCl8KDAyKS0oMFsxLTldfDFcXFxcZHwyWzAtOF0pKSlgO1xuY29uc3QgZGF0ZVJlZ2V4ID0gbmV3IFJlZ0V4cChgXiR7ZGF0ZVJlZ2V4U291cmNlfSRgKTtcbmZ1bmN0aW9uIHRpbWVSZWdleFNvdXJjZShhcmdzKSB7XG4gICAgbGV0IHNlY29uZHNSZWdleFNvdXJjZSA9IGBbMC01XVxcXFxkYDtcbiAgICBpZiAoYXJncy5wcmVjaXNpb24pIHtcbiAgICAgICAgc2Vjb25kc1JlZ2V4U291cmNlID0gYCR7c2Vjb25kc1JlZ2V4U291cmNlfVxcXFwuXFxcXGR7JHthcmdzLnByZWNpc2lvbn19YDtcbiAgICB9XG4gICAgZWxzZSBpZiAoYXJncy5wcmVjaXNpb24gPT0gbnVsbCkge1xuICAgICAgICBzZWNvbmRzUmVnZXhTb3VyY2UgPSBgJHtzZWNvbmRzUmVnZXhTb3VyY2V9KFxcXFwuXFxcXGQrKT9gO1xuICAgIH1cbiAgICBjb25zdCBzZWNvbmRzUXVhbnRpZmllciA9IGFyZ3MucHJlY2lzaW9uID8gXCIrXCIgOiBcIj9cIjsgLy8gcmVxdWlyZSBzZWNvbmRzIGlmIHByZWNpc2lvbiBpcyBub256ZXJvXG4gICAgcmV0dXJuIGAoWzAxXVxcXFxkfDJbMC0zXSk6WzAtNV1cXFxcZCg6JHtzZWNvbmRzUmVnZXhTb3VyY2V9KSR7c2Vjb25kc1F1YW50aWZpZXJ9YDtcbn1cbmZ1bmN0aW9uIHRpbWVSZWdleChhcmdzKSB7XG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoYF4ke3RpbWVSZWdleFNvdXJjZShhcmdzKX0kYCk7XG59XG4vLyBBZGFwdGVkIGZyb20gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzMxNDMyMzFcbmV4cG9ydCBmdW5jdGlvbiBkYXRldGltZVJlZ2V4KGFyZ3MpIHtcbiAgICBsZXQgcmVnZXggPSBgJHtkYXRlUmVnZXhTb3VyY2V9VCR7dGltZVJlZ2V4U291cmNlKGFyZ3MpfWA7XG4gICAgY29uc3Qgb3B0cyA9IFtdO1xuICAgIG9wdHMucHVzaChhcmdzLmxvY2FsID8gYFo/YCA6IGBaYCk7XG4gICAgaWYgKGFyZ3Mub2Zmc2V0KVxuICAgICAgICBvcHRzLnB1c2goYChbKy1dXFxcXGR7Mn06P1xcXFxkezJ9KWApO1xuICAgIHJlZ2V4ID0gYCR7cmVnZXh9KCR7b3B0cy5qb2luKFwifFwiKX0pYDtcbiAgICByZXR1cm4gbmV3IFJlZ0V4cChgXiR7cmVnZXh9JGApO1xufVxuZnVuY3Rpb24gaXNWYWxpZElQKGlwLCB2ZXJzaW9uKSB7XG4gICAgaWYgKCh2ZXJzaW9uID09PSBcInY0XCIgfHwgIXZlcnNpb24pICYmIGlwdjRSZWdleC50ZXN0KGlwKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKCh2ZXJzaW9uID09PSBcInY2XCIgfHwgIXZlcnNpb24pICYmIGlwdjZSZWdleC50ZXN0KGlwKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gaXNWYWxpZEpXVChqd3QsIGFsZykge1xuICAgIGlmICghand0UmVnZXgudGVzdChqd3QpKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgW2hlYWRlcl0gPSBqd3Quc3BsaXQoXCIuXCIpO1xuICAgICAgICBpZiAoIWhlYWRlcilcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgLy8gQ29udmVydCBiYXNlNjR1cmwgdG8gYmFzZTY0XG4gICAgICAgIGNvbnN0IGJhc2U2NCA9IGhlYWRlclxuICAgICAgICAgICAgLnJlcGxhY2UoLy0vZywgXCIrXCIpXG4gICAgICAgICAgICAucmVwbGFjZSgvXy9nLCBcIi9cIilcbiAgICAgICAgICAgIC5wYWRFbmQoaGVhZGVyLmxlbmd0aCArICgoNCAtIChoZWFkZXIubGVuZ3RoICUgNCkpICUgNCksIFwiPVwiKTtcbiAgICAgICAgY29uc3QgZGVjb2RlZCA9IEpTT04ucGFyc2UoYXRvYihiYXNlNjQpKTtcbiAgICAgICAgaWYgKHR5cGVvZiBkZWNvZGVkICE9PSBcIm9iamVjdFwiIHx8IGRlY29kZWQgPT09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmIChcInR5cFwiIGluIGRlY29kZWQgJiYgZGVjb2RlZD8udHlwICE9PSBcIkpXVFwiKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoIWRlY29kZWQuYWxnKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoYWxnICYmIGRlY29kZWQuYWxnICE9PSBhbGcpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjYXRjaCB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5mdW5jdGlvbiBpc1ZhbGlkQ2lkcihpcCwgdmVyc2lvbikge1xuICAgIGlmICgodmVyc2lvbiA9PT0gXCJ2NFwiIHx8ICF2ZXJzaW9uKSAmJiBpcHY0Q2lkclJlZ2V4LnRlc3QoaXApKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoKHZlcnNpb24gPT09IFwidjZcIiB8fCAhdmVyc2lvbikgJiYgaXB2NkNpZHJSZWdleC50ZXN0KGlwKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZXhwb3J0IGNsYXNzIFpvZFN0cmluZyBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5fZGVmLmNvZXJjZSkge1xuICAgICAgICAgICAgaW5wdXQuZGF0YSA9IFN0cmluZyhpbnB1dC5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnN0cmluZykge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5zdHJpbmcsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdGF0dXMgPSBuZXcgUGFyc2VTdGF0dXMoKTtcbiAgICAgICAgbGV0IGN0eCA9IHVuZGVmaW5lZDtcbiAgICAgICAgZm9yIChjb25zdCBjaGVjayBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2sua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhLmxlbmd0aCA8IGNoZWNrLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBleGFjdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhLmxlbmd0aCA+IGNoZWNrLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibGVuZ3RoXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29CaWcgPSBpbnB1dC5kYXRhLmxlbmd0aCA+IGNoZWNrLnZhbHVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gaW5wdXQuZGF0YS5sZW5ndGggPCBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vQmlnIHx8IHRvb1NtYWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodG9vQmlnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX2JpZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGFjdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluaW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiZW1haWxcIikge1xuICAgICAgICAgICAgICAgIGlmICghZW1haWxSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiZW1haWxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImVtb2ppXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVtb2ppUmVnZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgZW1vamlSZWdleCA9IG5ldyBSZWdFeHAoX2Vtb2ppUmVnZXgsIFwidVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFlbW9qaVJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJlbW9qaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidXVpZFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF1dWlkUmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcInV1aWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm5hbm9pZFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFuYW5vaWRSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwibmFub2lkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJjdWlkXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWN1aWRSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiY3VpZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiY3VpZDJcIikge1xuICAgICAgICAgICAgICAgIGlmICghY3VpZDJSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiY3VpZDJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInVsaWRcIikge1xuICAgICAgICAgICAgICAgIGlmICghdWxpZFJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJ1bGlkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ1cmxcIikge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBVUkwoaW5wdXQuZGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJ1cmxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInJlZ2V4XCIpIHtcbiAgICAgICAgICAgICAgICBjaGVjay5yZWdleC5sYXN0SW5kZXggPSAwO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRlc3RSZXN1bHQgPSBjaGVjay5yZWdleC50ZXN0KGlucHV0LmRhdGEpO1xuICAgICAgICAgICAgICAgIGlmICghdGVzdFJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcInJlZ2V4XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ0cmltXCIpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC5kYXRhID0gaW5wdXQuZGF0YS50cmltKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImluY2x1ZGVzXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlucHV0LmRhdGEuaW5jbHVkZXMoY2hlY2sudmFsdWUsIGNoZWNrLnBvc2l0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiB7IGluY2x1ZGVzOiBjaGVjay52YWx1ZSwgcG9zaXRpb246IGNoZWNrLnBvc2l0aW9uIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ0b0xvd2VyQ2FzZVwiKSB7XG4gICAgICAgICAgICAgICAgaW5wdXQuZGF0YSA9IGlucHV0LmRhdGEudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidG9VcHBlckNhc2VcIikge1xuICAgICAgICAgICAgICAgIGlucHV0LmRhdGEgPSBpbnB1dC5kYXRhLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInN0YXJ0c1dpdGhcIikge1xuICAgICAgICAgICAgICAgIGlmICghaW5wdXQuZGF0YS5zdGFydHNXaXRoKGNoZWNrLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiB7IHN0YXJ0c1dpdGg6IGNoZWNrLnZhbHVlIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJlbmRzV2l0aFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpbnB1dC5kYXRhLmVuZHNXaXRoKGNoZWNrLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiB7IGVuZHNXaXRoOiBjaGVjay52YWx1ZSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiZGF0ZXRpbWVcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gZGF0ZXRpbWVSZWdleChjaGVjayk7XG4gICAgICAgICAgICAgICAgaWYgKCFyZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiZGF0ZXRpbWVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImRhdGVcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gZGF0ZVJlZ2V4O1xuICAgICAgICAgICAgICAgIGlmICghcmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImRhdGVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInRpbWVcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gdGltZVJlZ2V4KGNoZWNrKTtcbiAgICAgICAgICAgICAgICBpZiAoIXJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJ0aW1lXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJkdXJhdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFkdXJhdGlvblJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJkdXJhdGlvblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiaXBcIikge1xuICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZElQKGlucHV0LmRhdGEsIGNoZWNrLnZlcnNpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiaXBcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImp3dFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpc1ZhbGlkSldUKGlucHV0LmRhdGEsIGNoZWNrLmFsZykpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJqd3RcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImNpZHJcIikge1xuICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZENpZHIoaW5wdXQuZGF0YSwgY2hlY2sudmVyc2lvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJjaWRyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJiYXNlNjRcIikge1xuICAgICAgICAgICAgICAgIGlmICghYmFzZTY0UmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImJhc2U2NFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiYmFzZTY0dXJsXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWJhc2U2NHVybFJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJiYXNlNjR1cmxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB1dGlsLmFzc2VydE5ldmVyKGNoZWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IGlucHV0LmRhdGEgfTtcbiAgICB9XG4gICAgX3JlZ2V4KHJlZ2V4LCB2YWxpZGF0aW9uLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZmluZW1lbnQoKGRhdGEpID0+IHJlZ2V4LnRlc3QoZGF0YSksIHtcbiAgICAgICAgICAgIHZhbGlkYXRpb24sXG4gICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfYWRkQ2hlY2soY2hlY2spIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RTdHJpbmcoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgY2hlY2tdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZW1haWwobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImVtYWlsXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgdXJsKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJ1cmxcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICBlbW9qaShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiZW1vamlcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICB1dWlkKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJ1dWlkXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgbmFub2lkKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJuYW5vaWRcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICBjdWlkKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJjdWlkXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgY3VpZDIobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImN1aWQyXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgdWxpZChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwidWxpZFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIGJhc2U2NChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiYmFzZTY0XCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgYmFzZTY0dXJsKG1lc3NhZ2UpIHtcbiAgICAgICAgLy8gYmFzZTY0dXJsIGVuY29kaW5nIGlzIGEgbW9kaWZpY2F0aW9uIG9mIGJhc2U2NCB0aGF0IGNhbiBzYWZlbHkgYmUgdXNlZCBpbiBVUkxzIGFuZCBmaWxlbmFtZXNcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwiYmFzZTY0dXJsXCIsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBqd3Qob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImp3dFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoob3B0aW9ucykgfSk7XG4gICAgfVxuICAgIGlwKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJpcFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoob3B0aW9ucykgfSk7XG4gICAgfVxuICAgIGNpZHIob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImNpZHJcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnMpIH0pO1xuICAgIH1cbiAgICBkYXRldGltZShvcHRpb25zKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgICAgICBraW5kOiBcImRhdGV0aW1lXCIsXG4gICAgICAgICAgICAgICAgcHJlY2lzaW9uOiBudWxsLFxuICAgICAgICAgICAgICAgIG9mZnNldDogZmFsc2UsXG4gICAgICAgICAgICAgICAgbG9jYWw6IGZhbHNlLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG9wdGlvbnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJkYXRldGltZVwiLFxuICAgICAgICAgICAgcHJlY2lzaW9uOiB0eXBlb2Ygb3B0aW9ucz8ucHJlY2lzaW9uID09PSBcInVuZGVmaW5lZFwiID8gbnVsbCA6IG9wdGlvbnM/LnByZWNpc2lvbixcbiAgICAgICAgICAgIG9mZnNldDogb3B0aW9ucz8ub2Zmc2V0ID8/IGZhbHNlLFxuICAgICAgICAgICAgbG9jYWw6IG9wdGlvbnM/LmxvY2FsID8/IGZhbHNlLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnM/Lm1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZGF0ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiZGF0ZVwiLCBtZXNzYWdlIH0pO1xuICAgIH1cbiAgICB0aW1lKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAgICAgIGtpbmQ6IFwidGltZVwiLFxuICAgICAgICAgICAgICAgIHByZWNpc2lvbjogbnVsbCxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBvcHRpb25zLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwidGltZVwiLFxuICAgICAgICAgICAgcHJlY2lzaW9uOiB0eXBlb2Ygb3B0aW9ucz8ucHJlY2lzaW9uID09PSBcInVuZGVmaW5lZFwiID8gbnVsbCA6IG9wdGlvbnM/LnByZWNpc2lvbixcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihvcHRpb25zPy5tZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGR1cmF0aW9uKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJkdXJhdGlvblwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIHJlZ2V4KHJlZ2V4LCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcInJlZ2V4XCIsXG4gICAgICAgICAgICByZWdleDogcmVnZXgsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpbmNsdWRlcyh2YWx1ZSwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJpbmNsdWRlc1wiLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgcG9zaXRpb246IG9wdGlvbnM/LnBvc2l0aW9uLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnM/Lm1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhcnRzV2l0aCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJzdGFydHNXaXRoXCIsXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbmRzV2l0aCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJlbmRzV2l0aFwiLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWluKG1pbkxlbmd0aCwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiBtaW5MZW5ndGgsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXgobWF4TGVuZ3RoLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1heFwiLFxuICAgICAgICAgICAgdmFsdWU6IG1heExlbmd0aCxcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGxlbmd0aChsZW4sIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibGVuZ3RoXCIsXG4gICAgICAgICAgICB2YWx1ZTogbGVuLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXF1aXZhbGVudCB0byBgLm1pbigxKWBcbiAgICAgKi9cbiAgICBub25lbXB0eShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pbigxLCBlcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkpO1xuICAgIH1cbiAgICB0cmltKCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFN0cmluZyh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFsuLi50aGlzLl9kZWYuY2hlY2tzLCB7IGtpbmQ6IFwidHJpbVwiIH1dLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdG9Mb3dlckNhc2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU3RyaW5nKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIHsga2luZDogXCJ0b0xvd2VyQ2FzZVwiIH1dLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdG9VcHBlckNhc2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU3RyaW5nKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIHsga2luZDogXCJ0b1VwcGVyQ2FzZVwiIH1dLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0IGlzRGF0ZXRpbWUoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZGF0ZXRpbWVcIik7XG4gICAgfVxuICAgIGdldCBpc0RhdGUoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZGF0ZVwiKTtcbiAgICB9XG4gICAgZ2V0IGlzVGltZSgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJ0aW1lXCIpO1xuICAgIH1cbiAgICBnZXQgaXNEdXJhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJkdXJhdGlvblwiKTtcbiAgICB9XG4gICAgZ2V0IGlzRW1haWwoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZW1haWxcIik7XG4gICAgfVxuICAgIGdldCBpc1VSTCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJ1cmxcIik7XG4gICAgfVxuICAgIGdldCBpc0Vtb2ppKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImVtb2ppXCIpO1xuICAgIH1cbiAgICBnZXQgaXNVVUlEKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcInV1aWRcIik7XG4gICAgfVxuICAgIGdldCBpc05BTk9JRCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJuYW5vaWRcIik7XG4gICAgfVxuICAgIGdldCBpc0NVSUQoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiY3VpZFwiKTtcbiAgICB9XG4gICAgZ2V0IGlzQ1VJRDIoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiY3VpZDJcIik7XG4gICAgfVxuICAgIGdldCBpc1VMSUQoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwidWxpZFwiKTtcbiAgICB9XG4gICAgZ2V0IGlzSVAoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiaXBcIik7XG4gICAgfVxuICAgIGdldCBpc0NJRFIoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiY2lkclwiKTtcbiAgICB9XG4gICAgZ2V0IGlzQmFzZTY0KCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImJhc2U2NFwiKTtcbiAgICB9XG4gICAgZ2V0IGlzQmFzZTY0dXJsKCkge1xuICAgICAgICAvLyBiYXNlNjR1cmwgZW5jb2RpbmcgaXMgYSBtb2RpZmljYXRpb24gb2YgYmFzZTY0IHRoYXQgY2FuIHNhZmVseSBiZSB1c2VkIGluIFVSTHMgYW5kIGZpbGVuYW1lc1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImJhc2U2NHVybFwiKTtcbiAgICB9XG4gICAgZ2V0IG1pbkxlbmd0aCgpIHtcbiAgICAgICAgbGV0IG1pbiA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWluID09PSBudWxsIHx8IGNoLnZhbHVlID4gbWluKVxuICAgICAgICAgICAgICAgICAgICBtaW4gPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWluO1xuICAgIH1cbiAgICBnZXQgbWF4TGVuZ3RoKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXg7XG4gICAgfVxufVxuWm9kU3RyaW5nLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFN0cmluZyh7XG4gICAgICAgIGNoZWNrczogW10sXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU3RyaW5nLFxuICAgICAgICBjb2VyY2U6IHBhcmFtcz8uY29lcmNlID8/IGZhbHNlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzk2NjQ4NC93aHktZG9lcy1tb2R1bHVzLW9wZXJhdG9yLXJldHVybi1mcmFjdGlvbmFsLW51bWJlci1pbi1qYXZhc2NyaXB0LzMxNzExMDM0IzMxNzExMDM0XG5mdW5jdGlvbiBmbG9hdFNhZmVSZW1haW5kZXIodmFsLCBzdGVwKSB7XG4gICAgY29uc3QgdmFsRGVjQ291bnQgPSAodmFsLnRvU3RyaW5nKCkuc3BsaXQoXCIuXCIpWzFdIHx8IFwiXCIpLmxlbmd0aDtcbiAgICBjb25zdCBzdGVwRGVjQ291bnQgPSAoc3RlcC50b1N0cmluZygpLnNwbGl0KFwiLlwiKVsxXSB8fCBcIlwiKS5sZW5ndGg7XG4gICAgY29uc3QgZGVjQ291bnQgPSB2YWxEZWNDb3VudCA+IHN0ZXBEZWNDb3VudCA/IHZhbERlY0NvdW50IDogc3RlcERlY0NvdW50O1xuICAgIGNvbnN0IHZhbEludCA9IE51bWJlci5wYXJzZUludCh2YWwudG9GaXhlZChkZWNDb3VudCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xuICAgIGNvbnN0IHN0ZXBJbnQgPSBOdW1iZXIucGFyc2VJbnQoc3RlcC50b0ZpeGVkKGRlY0NvdW50KS5yZXBsYWNlKFwiLlwiLCBcIlwiKSk7XG4gICAgcmV0dXJuICh2YWxJbnQgJSBzdGVwSW50KSAvIDEwICoqIGRlY0NvdW50O1xufVxuZXhwb3J0IGNsYXNzIFpvZE51bWJlciBleHRlbmRzIFpvZFR5cGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLm1pbiA9IHRoaXMuZ3RlO1xuICAgICAgICB0aGlzLm1heCA9IHRoaXMubHRlO1xuICAgICAgICB0aGlzLnN0ZXAgPSB0aGlzLm11bHRpcGxlT2Y7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5fZGVmLmNvZXJjZSkge1xuICAgICAgICAgICAgaW5wdXQuZGF0YSA9IE51bWJlcihpbnB1dC5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm51bWJlcikge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5udW1iZXIsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY3R4ID0gdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBzdGF0dXMgPSBuZXcgUGFyc2VTdGF0dXMoKTtcbiAgICAgICAgZm9yIChjb25zdCBjaGVjayBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2sua2luZCA9PT0gXCJpbnRcIikge1xuICAgICAgICAgICAgICAgIGlmICghdXRpbC5pc0ludGVnZXIoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBcImludGVnZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBcImZsb2F0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gY2hlY2suaW5jbHVzaXZlID8gaW5wdXQuZGF0YSA8IGNoZWNrLnZhbHVlIDogaW5wdXQuZGF0YSA8PSBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJudW1iZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogY2hlY2suaW5jbHVzaXZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29CaWcgPSBjaGVjay5pbmNsdXNpdmUgPyBpbnB1dC5kYXRhID4gY2hlY2sudmFsdWUgOiBpbnB1dC5kYXRhID49IGNoZWNrLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmICh0b29CaWcpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwibnVtYmVyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IGNoZWNrLmluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm11bHRpcGxlT2ZcIikge1xuICAgICAgICAgICAgICAgIGlmIChmbG9hdFNhZmVSZW1haW5kZXIoaW5wdXQuZGF0YSwgY2hlY2sudmFsdWUpICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5ub3RfbXVsdGlwbGVfb2YsXG4gICAgICAgICAgICAgICAgICAgICAgICBtdWx0aXBsZU9mOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImZpbml0ZVwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLm5vdF9maW5pdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdXRpbC5hc3NlcnROZXZlcihjaGVjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBpbnB1dC5kYXRhIH07XG4gICAgfVxuICAgIGd0ZSh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1pblwiLCB2YWx1ZSwgdHJ1ZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgZ3QodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtaW5cIiwgdmFsdWUsIGZhbHNlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBsdGUodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtYXhcIiwgdmFsdWUsIHRydWUsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gICAgfVxuICAgIGx0KHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWF4XCIsIHZhbHVlLCBmYWxzZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgc2V0TGltaXQoa2luZCwgdmFsdWUsIGluY2x1c2l2ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZE51bWJlcih7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFtcbiAgICAgICAgICAgICAgICAuLi50aGlzLl9kZWYuY2hlY2tzLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2luZCxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX2FkZENoZWNrKGNoZWNrKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kTnVtYmVyKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIGNoZWNrXSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGludChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcImludFwiLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiAwLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiBmYWxzZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG5lZ2F0aXZlKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWF4XCIsXG4gICAgICAgICAgICB2YWx1ZTogMCxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogZmFsc2UsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBub25wb3NpdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1heFwiLFxuICAgICAgICAgICAgdmFsdWU6IDAsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBub25uZWdhdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgdmFsdWU6IDAsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtdWx0aXBsZU9mKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm11bHRpcGxlT2ZcIixcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZpbml0ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcImZpbml0ZVwiLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2FmZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IE51bWJlci5NSU5fU0FGRV9JTlRFR0VSLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KS5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUixcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldCBtaW5WYWx1ZSgpIHtcbiAgICAgICAgbGV0IG1pbiA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWluID09PSBudWxsIHx8IGNoLnZhbHVlID4gbWluKVxuICAgICAgICAgICAgICAgICAgICBtaW4gPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWluO1xuICAgIH1cbiAgICBnZXQgbWF4VmFsdWUoKSB7XG4gICAgICAgIGxldCBtYXggPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1heFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1heCA9PT0gbnVsbCB8fCBjaC52YWx1ZSA8IG1heClcbiAgICAgICAgICAgICAgICAgICAgbWF4ID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1heDtcbiAgICB9XG4gICAgZ2V0IGlzSW50KCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImludFwiIHx8IChjaC5raW5kID09PSBcIm11bHRpcGxlT2ZcIiAmJiB1dGlsLmlzSW50ZWdlcihjaC52YWx1ZSkpKTtcbiAgICB9XG4gICAgZ2V0IGlzRmluaXRlKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgbGV0IG1pbiA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwiZmluaXRlXCIgfHwgY2gua2luZCA9PT0gXCJpbnRcIiB8fCBjaC5raW5kID09PSBcIm11bHRpcGxlT2ZcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2gua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChtaW4gPT09IG51bGwgfHwgY2gudmFsdWUgPiBtaW4pXG4gICAgICAgICAgICAgICAgICAgIG1pbiA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBOdW1iZXIuaXNGaW5pdGUobWluKSAmJiBOdW1iZXIuaXNGaW5pdGUobWF4KTtcbiAgICB9XG59XG5ab2ROdW1iZXIuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTnVtYmVyKHtcbiAgICAgICAgY2hlY2tzOiBbXSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROdW1iZXIsXG4gICAgICAgIGNvZXJjZTogcGFyYW1zPy5jb2VyY2UgfHwgZmFsc2UsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kQmlnSW50IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMubWluID0gdGhpcy5ndGU7XG4gICAgICAgIHRoaXMubWF4ID0gdGhpcy5sdGU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5fZGVmLmNvZXJjZSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpbnB1dC5kYXRhID0gQmlnSW50KGlucHV0LmRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZXRJbnZhbGlkSW5wdXQoaW5wdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuYmlnaW50KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0SW52YWxpZElucHV0KGlucHV0KTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY3R4ID0gdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBzdGF0dXMgPSBuZXcgUGFyc2VTdGF0dXMoKTtcbiAgICAgICAgZm9yIChjb25zdCBjaGVjayBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2sua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gY2hlY2suaW5jbHVzaXZlID8gaW5wdXQuZGF0YSA8IGNoZWNrLnZhbHVlIDogaW5wdXQuZGF0YSA8PSBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiYmlnaW50XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogY2hlY2suaW5jbHVzaXZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29CaWcgPSBjaGVjay5pbmNsdXNpdmUgPyBpbnB1dC5kYXRhID4gY2hlY2sudmFsdWUgOiBpbnB1dC5kYXRhID49IGNoZWNrLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmICh0b29CaWcpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImJpZ2ludFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IGNoZWNrLmluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm11bHRpcGxlT2ZcIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhICUgY2hlY2sudmFsdWUgIT09IEJpZ0ludCgwKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUubm90X211bHRpcGxlX29mLFxuICAgICAgICAgICAgICAgICAgICAgICAgbXVsdGlwbGVPZjogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdXRpbC5hc3NlcnROZXZlcihjaGVjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBpbnB1dC5kYXRhIH07XG4gICAgfVxuICAgIF9nZXRJbnZhbGlkSW5wdXQoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5iaWdpbnQsXG4gICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICB9XG4gICAgZ3RlKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWluXCIsIHZhbHVlLCB0cnVlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBndCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1pblwiLCB2YWx1ZSwgZmFsc2UsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gICAgfVxuICAgIGx0ZSh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1heFwiLCB2YWx1ZSwgdHJ1ZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgbHQodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtYXhcIiwgdmFsdWUsIGZhbHNlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBzZXRMaW1pdChraW5kLCB2YWx1ZSwgaW5jbHVzaXZlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQmlnSW50KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogW1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuX2RlZi5jaGVja3MsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBraW5kLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfYWRkQ2hlY2soY2hlY2spIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RCaWdJbnQoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgY2hlY2tdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbmVnYXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm9ucG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBub25uZWdhdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgdmFsdWU6IEJpZ0ludCgwKSxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG11bHRpcGxlT2YodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibXVsdGlwbGVPZlwiLFxuICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXQgbWluVmFsdWUoKSB7XG4gICAgICAgIGxldCBtaW4gPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1pblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1pbiA9PT0gbnVsbCB8fCBjaC52YWx1ZSA+IG1pbilcbiAgICAgICAgICAgICAgICAgICAgbWluID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1pbjtcbiAgICB9XG4gICAgZ2V0IG1heFZhbHVlKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXg7XG4gICAgfVxufVxuWm9kQmlnSW50LmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZEJpZ0ludCh7XG4gICAgICAgIGNoZWNrczogW10sXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQmlnSW50LFxuICAgICAgICBjb2VyY2U6IHBhcmFtcz8uY29lcmNlID8/IGZhbHNlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZEJvb2xlYW4gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi5jb2VyY2UpIHtcbiAgICAgICAgICAgIGlucHV0LmRhdGEgPSBCb29sZWFuKGlucHV0LmRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuYm9vbGVhbikge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5ib29sZWFuLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbn1cblpvZEJvb2xlYW4uY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kQm9vbGVhbih7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQm9vbGVhbixcbiAgICAgICAgY29lcmNlOiBwYXJhbXM/LmNvZXJjZSB8fCBmYWxzZSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2REYXRlIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGlmICh0aGlzLl9kZWYuY29lcmNlKSB7XG4gICAgICAgICAgICBpbnB1dC5kYXRhID0gbmV3IERhdGUoaW5wdXQuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5kYXRlKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLmRhdGUsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoTnVtYmVyLmlzTmFOKGlucHV0LmRhdGEuZ2V0VGltZSgpKSkge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfZGF0ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RhdHVzID0gbmV3IFBhcnNlU3RhdHVzKCk7XG4gICAgICAgIGxldCBjdHggPSB1bmRlZmluZWQ7XG4gICAgICAgIGZvciAoY29uc3QgY2hlY2sgb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoZWNrLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuZGF0YS5nZXRUaW1lKCkgPCBjaGVjay52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJkYXRlXCIsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm1heFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0LmRhdGEuZ2V0VGltZSgpID4gY2hlY2sudmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImRhdGVcIixcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHV0aWwuYXNzZXJ0TmV2ZXIoY2hlY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdGF0dXM6IHN0YXR1cy52YWx1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBuZXcgRGF0ZShpbnB1dC5kYXRhLmdldFRpbWUoKSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIF9hZGRDaGVjayhjaGVjaykge1xuICAgICAgICByZXR1cm4gbmV3IFpvZERhdGUoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgY2hlY2tdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWluKG1pbkRhdGUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWluXCIsXG4gICAgICAgICAgICB2YWx1ZTogbWluRGF0ZS5nZXRUaW1lKCksXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXgobWF4RGF0ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBtYXhEYXRlLmdldFRpbWUoKSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldCBtaW5EYXRlKCkge1xuICAgICAgICBsZXQgbWluID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChtaW4gPT09IG51bGwgfHwgY2gudmFsdWUgPiBtaW4pXG4gICAgICAgICAgICAgICAgICAgIG1pbiA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtaW4gIT0gbnVsbCA/IG5ldyBEYXRlKG1pbikgOiBudWxsO1xuICAgIH1cbiAgICBnZXQgbWF4RGF0ZSgpIHtcbiAgICAgICAgbGV0IG1heCA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWF4ID09PSBudWxsIHx8IGNoLnZhbHVlIDwgbWF4KVxuICAgICAgICAgICAgICAgICAgICBtYXggPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWF4ICE9IG51bGwgPyBuZXcgRGF0ZShtYXgpIDogbnVsbDtcbiAgICB9XG59XG5ab2REYXRlLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZERhdGUoe1xuICAgICAgICBjaGVja3M6IFtdLFxuICAgICAgICBjb2VyY2U6IHBhcmFtcz8uY29lcmNlIHx8IGZhbHNlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZERhdGUsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kU3ltYm9sIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuc3ltYm9sKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnN5bWJvbCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2RTeW1ib2wuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kU3ltYm9sKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RTeW1ib2wsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kVW5kZWZpbmVkIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUudW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2RVbmRlZmluZWQuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kVW5kZWZpbmVkKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmRlZmluZWQsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kTnVsbCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUubnVsbCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2ROdWxsLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE51bGwoe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE51bGwsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kQW55IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIC8vIHRvIHByZXZlbnQgaW5zdGFuY2VzIG9mIG90aGVyIGNsYXNzZXMgZnJvbSBleHRlbmRpbmcgWm9kQW55LiB0aGlzIGNhdXNlcyBpc3N1ZXMgd2l0aCBjYXRjaGFsbCBpbiBab2RPYmplY3QuXG4gICAgICAgIHRoaXMuX2FueSA9IHRydWU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxufVxuWm9kQW55LmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZEFueSh7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQW55LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZFVua25vd24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgLy8gcmVxdWlyZWRcbiAgICAgICAgdGhpcy5fdW5rbm93biA9IHRydWU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxufVxuWm9kVW5rbm93bi5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RVbmtub3duKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmtub3duLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZE5ldmVyIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUubmV2ZXIsXG4gICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICB9XG59XG5ab2ROZXZlci5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROZXZlcih7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTmV2ZXIsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kVm9pZCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS52b2lkLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbn1cblpvZFZvaWQuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kVm9pZCh7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVm9pZCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RBcnJheSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCwgc3RhdHVzIH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBkZWYgPSB0aGlzLl9kZWY7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5hcnJheSkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5hcnJheSxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYuZXhhY3RMZW5ndGggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IHRvb0JpZyA9IGN0eC5kYXRhLmxlbmd0aCA+IGRlZi5leGFjdExlbmd0aC52YWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gY3R4LmRhdGEubGVuZ3RoIDwgZGVmLmV4YWN0TGVuZ3RoLnZhbHVlO1xuICAgICAgICAgICAgaWYgKHRvb0JpZyB8fCB0b29TbWFsbCkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiB0b29CaWcgPyBab2RJc3N1ZUNvZGUudG9vX2JpZyA6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgIG1pbmltdW06ICh0b29TbWFsbCA/IGRlZi5leGFjdExlbmd0aC52YWx1ZSA6IHVuZGVmaW5lZCksXG4gICAgICAgICAgICAgICAgICAgIG1heGltdW06ICh0b29CaWcgPyBkZWYuZXhhY3RMZW5ndGgudmFsdWUgOiB1bmRlZmluZWQpLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGRlZi5leGFjdExlbmd0aC5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYubWluTGVuZ3RoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoY3R4LmRhdGEubGVuZ3RoIDwgZGVmLm1pbkxlbmd0aC52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBkZWYubWluTGVuZ3RoLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWluTGVuZ3RoLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRlZi5tYXhMZW5ndGggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChjdHguZGF0YS5sZW5ndGggPiBkZWYubWF4TGVuZ3RoLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBkZWYubWF4TGVuZ3RoLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWF4TGVuZ3RoLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbLi4uY3R4LmRhdGFdLm1hcCgoaXRlbSwgaSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBkZWYudHlwZS5fcGFyc2VBc3luYyhuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgaXRlbSwgY3R4LnBhdGgsIGkpKTtcbiAgICAgICAgICAgIH0pKS50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIHJlc3VsdCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXN1bHQgPSBbLi4uY3R4LmRhdGFdLm1hcCgoaXRlbSwgaSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGRlZi50eXBlLl9wYXJzZVN5bmMobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGl0ZW0sIGN0eC5wYXRoLCBpKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIHJlc3VsdCk7XG4gICAgfVxuICAgIGdldCBlbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnR5cGU7XG4gICAgfVxuICAgIG1pbihtaW5MZW5ndGgsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RBcnJheSh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBtaW5MZW5ndGg6IHsgdmFsdWU6IG1pbkxlbmd0aCwgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXgobWF4TGVuZ3RoLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQXJyYXkoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgbWF4TGVuZ3RoOiB7IHZhbHVlOiBtYXhMZW5ndGgsIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbGVuZ3RoKGxlbiwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEFycmF5KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGV4YWN0TGVuZ3RoOiB7IHZhbHVlOiBsZW4sIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm9uZW1wdHkobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5taW4oMSwgbWVzc2FnZSk7XG4gICAgfVxufVxuWm9kQXJyYXkuY3JlYXRlID0gKHNjaGVtYSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RBcnJheSh7XG4gICAgICAgIHR5cGU6IHNjaGVtYSxcbiAgICAgICAgbWluTGVuZ3RoOiBudWxsLFxuICAgICAgICBtYXhMZW5ndGg6IG51bGwsXG4gICAgICAgIGV4YWN0TGVuZ3RoOiBudWxsLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEFycmF5LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZnVuY3Rpb24gZGVlcFBhcnRpYWxpZnkoc2NoZW1hKSB7XG4gICAgaWYgKHNjaGVtYSBpbnN0YW5jZW9mIFpvZE9iamVjdCkge1xuICAgICAgICBjb25zdCBuZXdTaGFwZSA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBzY2hlbWEuc2hhcGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkU2NoZW1hID0gc2NoZW1hLnNoYXBlW2tleV07XG4gICAgICAgICAgICBuZXdTaGFwZVtrZXldID0gWm9kT3B0aW9uYWwuY3JlYXRlKGRlZXBQYXJ0aWFsaWZ5KGZpZWxkU2NoZW1hKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4uc2NoZW1hLl9kZWYsXG4gICAgICAgICAgICBzaGFwZTogKCkgPT4gbmV3U2hhcGUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmIChzY2hlbWEgaW5zdGFuY2VvZiBab2RBcnJheSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEFycmF5KHtcbiAgICAgICAgICAgIC4uLnNjaGVtYS5fZGVmLFxuICAgICAgICAgICAgdHlwZTogZGVlcFBhcnRpYWxpZnkoc2NoZW1hLmVsZW1lbnQpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2NoZW1hIGluc3RhbmNlb2YgWm9kT3B0aW9uYWwpIHtcbiAgICAgICAgcmV0dXJuIFpvZE9wdGlvbmFsLmNyZWF0ZShkZWVwUGFydGlhbGlmeShzY2hlbWEudW53cmFwKCkpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2NoZW1hIGluc3RhbmNlb2YgWm9kTnVsbGFibGUpIHtcbiAgICAgICAgcmV0dXJuIFpvZE51bGxhYmxlLmNyZWF0ZShkZWVwUGFydGlhbGlmeShzY2hlbWEudW53cmFwKCkpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2NoZW1hIGluc3RhbmNlb2YgWm9kVHVwbGUpIHtcbiAgICAgICAgcmV0dXJuIFpvZFR1cGxlLmNyZWF0ZShzY2hlbWEuaXRlbXMubWFwKChpdGVtKSA9PiBkZWVwUGFydGlhbGlmeShpdGVtKSkpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHNjaGVtYTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgWm9kT2JqZWN0IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuX2NhY2hlZCA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBJbiBtb3N0IGNhc2VzLCB0aGlzIGlzIG5vIGxvbmdlciBuZWVkZWQgLSB1bmtub3duIHByb3BlcnRpZXMgYXJlIG5vdyBzaWxlbnRseSBzdHJpcHBlZC5cbiAgICAgICAgICogSWYgeW91IHdhbnQgdG8gcGFzcyB0aHJvdWdoIHVua25vd24gcHJvcGVydGllcywgdXNlIGAucGFzc3Rocm91Z2goKWAgaW5zdGVhZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubm9uc3RyaWN0ID0gdGhpcy5wYXNzdGhyb3VnaDtcbiAgICAgICAgLy8gZXh0ZW5kPFxuICAgICAgICAvLyAgIEF1Z21lbnRhdGlvbiBleHRlbmRzIFpvZFJhd1NoYXBlLFxuICAgICAgICAvLyAgIE5ld091dHB1dCBleHRlbmRzIHV0aWwuZmxhdHRlbjx7XG4gICAgICAgIC8vICAgICBbayBpbiBrZXlvZiBBdWdtZW50YXRpb24gfCBrZXlvZiBPdXRwdXRdOiBrIGV4dGVuZHMga2V5b2YgQXVnbWVudGF0aW9uXG4gICAgICAgIC8vICAgICAgID8gQXVnbWVudGF0aW9uW2tdW1wiX291dHB1dFwiXVxuICAgICAgICAvLyAgICAgICA6IGsgZXh0ZW5kcyBrZXlvZiBPdXRwdXRcbiAgICAgICAgLy8gICAgICAgPyBPdXRwdXRba11cbiAgICAgICAgLy8gICAgICAgOiBuZXZlcjtcbiAgICAgICAgLy8gICB9PixcbiAgICAgICAgLy8gICBOZXdJbnB1dCBleHRlbmRzIHV0aWwuZmxhdHRlbjx7XG4gICAgICAgIC8vICAgICBbayBpbiBrZXlvZiBBdWdtZW50YXRpb24gfCBrZXlvZiBJbnB1dF06IGsgZXh0ZW5kcyBrZXlvZiBBdWdtZW50YXRpb25cbiAgICAgICAgLy8gICAgICAgPyBBdWdtZW50YXRpb25ba11bXCJfaW5wdXRcIl1cbiAgICAgICAgLy8gICAgICAgOiBrIGV4dGVuZHMga2V5b2YgSW5wdXRcbiAgICAgICAgLy8gICAgICAgPyBJbnB1dFtrXVxuICAgICAgICAvLyAgICAgICA6IG5ldmVyO1xuICAgICAgICAvLyAgIH0+XG4gICAgICAgIC8vID4oXG4gICAgICAgIC8vICAgYXVnbWVudGF0aW9uOiBBdWdtZW50YXRpb25cbiAgICAgICAgLy8gKTogWm9kT2JqZWN0PFxuICAgICAgICAvLyAgIGV4dGVuZFNoYXBlPFQsIEF1Z21lbnRhdGlvbj4sXG4gICAgICAgIC8vICAgVW5rbm93bktleXMsXG4gICAgICAgIC8vICAgQ2F0Y2hhbGwsXG4gICAgICAgIC8vICAgTmV3T3V0cHV0LFxuICAgICAgICAvLyAgIE5ld0lucHV0XG4gICAgICAgIC8vID4ge1xuICAgICAgICAvLyAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgLy8gICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgLy8gICAgIHNoYXBlOiAoKSA9PiAoe1xuICAgICAgICAvLyAgICAgICAuLi50aGlzLl9kZWYuc2hhcGUoKSxcbiAgICAgICAgLy8gICAgICAgLi4uYXVnbWVudGF0aW9uLFxuICAgICAgICAvLyAgICAgfSksXG4gICAgICAgIC8vICAgfSkgYXMgYW55O1xuICAgICAgICAvLyB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBVc2UgYC5leHRlbmRgIGluc3RlYWRcbiAgICAgICAgICogICovXG4gICAgICAgIHRoaXMuYXVnbWVudCA9IHRoaXMuZXh0ZW5kO1xuICAgIH1cbiAgICBfZ2V0Q2FjaGVkKCkge1xuICAgICAgICBpZiAodGhpcy5fY2FjaGVkICE9PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZDtcbiAgICAgICAgY29uc3Qgc2hhcGUgPSB0aGlzLl9kZWYuc2hhcGUoKTtcbiAgICAgICAgY29uc3Qga2V5cyA9IHV0aWwub2JqZWN0S2V5cyhzaGFwZSk7XG4gICAgICAgIHRoaXMuX2NhY2hlZCA9IHsgc2hhcGUsIGtleXMgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZDtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUub2JqZWN0KSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm9iamVjdCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGNvbnN0IHsgc2hhcGUsIGtleXM6IHNoYXBlS2V5cyB9ID0gdGhpcy5fZ2V0Q2FjaGVkKCk7XG4gICAgICAgIGNvbnN0IGV4dHJhS2V5cyA9IFtdO1xuICAgICAgICBpZiAoISh0aGlzLl9kZWYuY2F0Y2hhbGwgaW5zdGFuY2VvZiBab2ROZXZlciAmJiB0aGlzLl9kZWYudW5rbm93bktleXMgPT09IFwic3RyaXBcIikpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIGN0eC5kYXRhKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFzaGFwZUtleXMuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBleHRyYUtleXMucHVzaChrZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYWlycyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBzaGFwZUtleXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGtleVZhbGlkYXRvciA9IHNoYXBlW2tleV07XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGN0eC5kYXRhW2tleV07XG4gICAgICAgICAgICBwYWlycy5wdXNoKHtcbiAgICAgICAgICAgICAgICBrZXk6IHsgc3RhdHVzOiBcInZhbGlkXCIsIHZhbHVlOiBrZXkgfSxcbiAgICAgICAgICAgICAgICB2YWx1ZToga2V5VmFsaWRhdG9yLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgdmFsdWUsIGN0eC5wYXRoLCBrZXkpKSxcbiAgICAgICAgICAgICAgICBhbHdheXNTZXQ6IGtleSBpbiBjdHguZGF0YSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9kZWYuY2F0Y2hhbGwgaW5zdGFuY2VvZiBab2ROZXZlcikge1xuICAgICAgICAgICAgY29uc3QgdW5rbm93bktleXMgPSB0aGlzLl9kZWYudW5rbm93bktleXM7XG4gICAgICAgICAgICBpZiAodW5rbm93bktleXMgPT09IFwicGFzc3Rocm91Z2hcIikge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIGV4dHJhS2V5cykge1xuICAgICAgICAgICAgICAgICAgICBwYWlycy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogeyBzdGF0dXM6IFwidmFsaWRcIiwgdmFsdWU6IGtleSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHsgc3RhdHVzOiBcInZhbGlkXCIsIHZhbHVlOiBjdHguZGF0YVtrZXldIH0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHVua25vd25LZXlzID09PSBcInN0cmljdFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKGV4dHJhS2V5cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnVucmVjb2duaXplZF9rZXlzLFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5czogZXh0cmFLZXlzLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodW5rbm93bktleXMgPT09IFwic3RyaXBcIikge1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnRlcm5hbCBab2RPYmplY3QgZXJyb3I6IGludmFsaWQgdW5rbm93bktleXMgdmFsdWUuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBydW4gY2F0Y2hhbGwgdmFsaWRhdGlvblxuICAgICAgICAgICAgY29uc3QgY2F0Y2hhbGwgPSB0aGlzLl9kZWYuY2F0Y2hhbGw7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBleHRyYUtleXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGN0eC5kYXRhW2tleV07XG4gICAgICAgICAgICAgICAgcGFpcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGtleTogeyBzdGF0dXM6IFwidmFsaWRcIiwgdmFsdWU6IGtleSB9LFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogY2F0Y2hhbGwuX3BhcnNlKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCB2YWx1ZSwgY3R4LnBhdGgsIGtleSkgLy8sIGN0eC5jaGlsZChrZXkpLCB2YWx1ZSwgZ2V0UGFyc2VkVHlwZSh2YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgYWx3YXlzU2V0OiBrZXkgaW4gY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKVxuICAgICAgICAgICAgICAgIC50aGVuKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzeW5jUGFpcnMgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHBhaXIgb2YgcGFpcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gYXdhaXQgcGFpci5rZXk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgcGFpci52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgc3luY1BhaXJzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBhbHdheXNTZXQ6IHBhaXIuYWx3YXlzU2V0LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN5bmNQYWlycztcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oKHN5bmNQYWlycykgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBQYXJzZVN0YXR1cy5tZXJnZU9iamVjdFN5bmMoc3RhdHVzLCBzeW5jUGFpcnMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VPYmplY3RTeW5jKHN0YXR1cywgcGFpcnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBzaGFwZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5zaGFwZSgpO1xuICAgIH1cbiAgICBzdHJpY3QobWVzc2FnZSkge1xuICAgICAgICBlcnJvclV0aWwuZXJyVG9PYmo7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHVua25vd25LZXlzOiBcInN0cmljdFwiLFxuICAgICAgICAgICAgLi4uKG1lc3NhZ2UgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICBlcnJvck1hcDogKGlzc3VlLCBjdHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRFcnJvciA9IHRoaXMuX2RlZi5lcnJvck1hcD8uKGlzc3VlLCBjdHgpLm1lc3NhZ2UgPz8gY3R4LmRlZmF1bHRFcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc3N1ZS5jb2RlID09PSBcInVucmVjb2duaXplZF9rZXlzXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLm1lc3NhZ2UgPz8gZGVmYXVsdEVycm9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGRlZmF1bHRFcnJvcixcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDoge30pLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RyaXAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHVua25vd25LZXlzOiBcInN0cmlwXCIsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwYXNzdGhyb3VnaCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgdW5rbm93bktleXM6IFwicGFzc3Rocm91Z2hcIixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIGNvbnN0IEF1Z21lbnRGYWN0b3J5ID1cbiAgICAvLyAgIDxEZWYgZXh0ZW5kcyBab2RPYmplY3REZWY+KGRlZjogRGVmKSA9PlxuICAgIC8vICAgPEF1Z21lbnRhdGlvbiBleHRlbmRzIFpvZFJhd1NoYXBlPihcbiAgICAvLyAgICAgYXVnbWVudGF0aW9uOiBBdWdtZW50YXRpb25cbiAgICAvLyAgICk6IFpvZE9iamVjdDxcbiAgICAvLyAgICAgZXh0ZW5kU2hhcGU8UmV0dXJuVHlwZTxEZWZbXCJzaGFwZVwiXT4sIEF1Z21lbnRhdGlvbj4sXG4gICAgLy8gICAgIERlZltcInVua25vd25LZXlzXCJdLFxuICAgIC8vICAgICBEZWZbXCJjYXRjaGFsbFwiXVxuICAgIC8vICAgPiA9PiB7XG4gICAgLy8gICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAvLyAgICAgICAuLi5kZWYsXG4gICAgLy8gICAgICAgc2hhcGU6ICgpID0+ICh7XG4gICAgLy8gICAgICAgICAuLi5kZWYuc2hhcGUoKSxcbiAgICAvLyAgICAgICAgIC4uLmF1Z21lbnRhdGlvbixcbiAgICAvLyAgICAgICB9KSxcbiAgICAvLyAgICAgfSkgYXMgYW55O1xuICAgIC8vICAgfTtcbiAgICBleHRlbmQoYXVnbWVudGF0aW9uKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiAoe1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuX2RlZi5zaGFwZSgpLFxuICAgICAgICAgICAgICAgIC4uLmF1Z21lbnRhdGlvbixcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJpb3IgdG8gem9kQDEuMC4xMiB0aGVyZSB3YXMgYSBidWcgaW4gdGhlXG4gICAgICogaW5mZXJyZWQgdHlwZSBvZiBtZXJnZWQgb2JqZWN0cy4gUGxlYXNlXG4gICAgICogdXBncmFkZSBpZiB5b3UgYXJlIGV4cGVyaWVuY2luZyBpc3N1ZXMuXG4gICAgICovXG4gICAgbWVyZ2UobWVyZ2luZykge1xuICAgICAgICBjb25zdCBtZXJnZWQgPSBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIHVua25vd25LZXlzOiBtZXJnaW5nLl9kZWYudW5rbm93bktleXMsXG4gICAgICAgICAgICBjYXRjaGFsbDogbWVyZ2luZy5fZGVmLmNhdGNoYWxsLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+ICh7XG4gICAgICAgICAgICAgICAgLi4udGhpcy5fZGVmLnNoYXBlKCksXG4gICAgICAgICAgICAgICAgLi4ubWVyZ2luZy5fZGVmLnNoYXBlKCksXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG1lcmdlZDtcbiAgICB9XG4gICAgLy8gbWVyZ2U8XG4gICAgLy8gICBJbmNvbWluZyBleHRlbmRzIEFueVpvZE9iamVjdCxcbiAgICAvLyAgIEF1Z21lbnRhdGlvbiBleHRlbmRzIEluY29taW5nW1wic2hhcGVcIl0sXG4gICAgLy8gICBOZXdPdXRwdXQgZXh0ZW5kcyB7XG4gICAgLy8gICAgIFtrIGluIGtleW9mIEF1Z21lbnRhdGlvbiB8IGtleW9mIE91dHB1dF06IGsgZXh0ZW5kcyBrZXlvZiBBdWdtZW50YXRpb25cbiAgICAvLyAgICAgICA/IEF1Z21lbnRhdGlvbltrXVtcIl9vdXRwdXRcIl1cbiAgICAvLyAgICAgICA6IGsgZXh0ZW5kcyBrZXlvZiBPdXRwdXRcbiAgICAvLyAgICAgICA/IE91dHB1dFtrXVxuICAgIC8vICAgICAgIDogbmV2ZXI7XG4gICAgLy8gICB9LFxuICAgIC8vICAgTmV3SW5wdXQgZXh0ZW5kcyB7XG4gICAgLy8gICAgIFtrIGluIGtleW9mIEF1Z21lbnRhdGlvbiB8IGtleW9mIElucHV0XTogayBleHRlbmRzIGtleW9mIEF1Z21lbnRhdGlvblxuICAgIC8vICAgICAgID8gQXVnbWVudGF0aW9uW2tdW1wiX2lucHV0XCJdXG4gICAgLy8gICAgICAgOiBrIGV4dGVuZHMga2V5b2YgSW5wdXRcbiAgICAvLyAgICAgICA/IElucHV0W2tdXG4gICAgLy8gICAgICAgOiBuZXZlcjtcbiAgICAvLyAgIH1cbiAgICAvLyA+KFxuICAgIC8vICAgbWVyZ2luZzogSW5jb21pbmdcbiAgICAvLyApOiBab2RPYmplY3Q8XG4gICAgLy8gICBleHRlbmRTaGFwZTxULCBSZXR1cm5UeXBlPEluY29taW5nW1wiX2RlZlwiXVtcInNoYXBlXCJdPj4sXG4gICAgLy8gICBJbmNvbWluZ1tcIl9kZWZcIl1bXCJ1bmtub3duS2V5c1wiXSxcbiAgICAvLyAgIEluY29taW5nW1wiX2RlZlwiXVtcImNhdGNoYWxsXCJdLFxuICAgIC8vICAgTmV3T3V0cHV0LFxuICAgIC8vICAgTmV3SW5wdXRcbiAgICAvLyA+IHtcbiAgICAvLyAgIGNvbnN0IG1lcmdlZDogYW55ID0gbmV3IFpvZE9iamVjdCh7XG4gICAgLy8gICAgIHVua25vd25LZXlzOiBtZXJnaW5nLl9kZWYudW5rbm93bktleXMsXG4gICAgLy8gICAgIGNhdGNoYWxsOiBtZXJnaW5nLl9kZWYuY2F0Y2hhbGwsXG4gICAgLy8gICAgIHNoYXBlOiAoKSA9PlxuICAgIC8vICAgICAgIG9iamVjdFV0aWwubWVyZ2VTaGFwZXModGhpcy5fZGVmLnNoYXBlKCksIG1lcmdpbmcuX2RlZi5zaGFwZSgpKSxcbiAgICAvLyAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPYmplY3QsXG4gICAgLy8gICB9KSBhcyBhbnk7XG4gICAgLy8gICByZXR1cm4gbWVyZ2VkO1xuICAgIC8vIH1cbiAgICBzZXRLZXkoa2V5LCBzY2hlbWEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXVnbWVudCh7IFtrZXldOiBzY2hlbWEgfSk7XG4gICAgfVxuICAgIC8vIG1lcmdlPEluY29taW5nIGV4dGVuZHMgQW55Wm9kT2JqZWN0PihcbiAgICAvLyAgIG1lcmdpbmc6IEluY29taW5nXG4gICAgLy8gKTogLy9ab2RPYmplY3Q8VCAmIEluY29taW5nW1wiX3NoYXBlXCJdLCBVbmtub3duS2V5cywgQ2F0Y2hhbGw+ID0gKG1lcmdpbmcpID0+IHtcbiAgICAvLyBab2RPYmplY3Q8XG4gICAgLy8gICBleHRlbmRTaGFwZTxULCBSZXR1cm5UeXBlPEluY29taW5nW1wiX2RlZlwiXVtcInNoYXBlXCJdPj4sXG4gICAgLy8gICBJbmNvbWluZ1tcIl9kZWZcIl1bXCJ1bmtub3duS2V5c1wiXSxcbiAgICAvLyAgIEluY29taW5nW1wiX2RlZlwiXVtcImNhdGNoYWxsXCJdXG4gICAgLy8gPiB7XG4gICAgLy8gICAvLyBjb25zdCBtZXJnZWRTaGFwZSA9IG9iamVjdFV0aWwubWVyZ2VTaGFwZXMoXG4gICAgLy8gICAvLyAgIHRoaXMuX2RlZi5zaGFwZSgpLFxuICAgIC8vICAgLy8gICBtZXJnaW5nLl9kZWYuc2hhcGUoKVxuICAgIC8vICAgLy8gKTtcbiAgICAvLyAgIGNvbnN0IG1lcmdlZDogYW55ID0gbmV3IFpvZE9iamVjdCh7XG4gICAgLy8gICAgIHVua25vd25LZXlzOiBtZXJnaW5nLl9kZWYudW5rbm93bktleXMsXG4gICAgLy8gICAgIGNhdGNoYWxsOiBtZXJnaW5nLl9kZWYuY2F0Y2hhbGwsXG4gICAgLy8gICAgIHNoYXBlOiAoKSA9PlxuICAgIC8vICAgICAgIG9iamVjdFV0aWwubWVyZ2VTaGFwZXModGhpcy5fZGVmLnNoYXBlKCksIG1lcmdpbmcuX2RlZi5zaGFwZSgpKSxcbiAgICAvLyAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPYmplY3QsXG4gICAgLy8gICB9KSBhcyBhbnk7XG4gICAgLy8gICByZXR1cm4gbWVyZ2VkO1xuICAgIC8vIH1cbiAgICBjYXRjaGFsbChpbmRleCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjYXRjaGFsbDogaW5kZXgsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwaWNrKG1hc2spIHtcbiAgICAgICAgY29uc3Qgc2hhcGUgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgdXRpbC5vYmplY3RLZXlzKG1hc2spKSB7XG4gICAgICAgICAgICBpZiAobWFza1trZXldICYmIHRoaXMuc2hhcGVba2V5XSkge1xuICAgICAgICAgICAgICAgIHNoYXBlW2tleV0gPSB0aGlzLnNoYXBlW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+IHNoYXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgb21pdChtYXNrKSB7XG4gICAgICAgIGNvbnN0IHNoYXBlID0ge307XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHV0aWwub2JqZWN0S2V5cyh0aGlzLnNoYXBlKSkge1xuICAgICAgICAgICAgaWYgKCFtYXNrW2tleV0pIHtcbiAgICAgICAgICAgICAgICBzaGFwZVtrZXldID0gdGhpcy5zaGFwZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiBzaGFwZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkXG4gICAgICovXG4gICAgZGVlcFBhcnRpYWwoKSB7XG4gICAgICAgIHJldHVybiBkZWVwUGFydGlhbGlmeSh0aGlzKTtcbiAgICB9XG4gICAgcGFydGlhbChtYXNrKSB7XG4gICAgICAgIGNvbnN0IG5ld1NoYXBlID0ge307XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHV0aWwub2JqZWN0S2V5cyh0aGlzLnNoYXBlKSkge1xuICAgICAgICAgICAgY29uc3QgZmllbGRTY2hlbWEgPSB0aGlzLnNoYXBlW2tleV07XG4gICAgICAgICAgICBpZiAobWFzayAmJiAhbWFza1trZXldKSB7XG4gICAgICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IGZpZWxkU2NoZW1hO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IGZpZWxkU2NoZW1hLm9wdGlvbmFsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+IG5ld1NoYXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmVxdWlyZWQobWFzaykge1xuICAgICAgICBjb25zdCBuZXdTaGFwZSA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiB1dGlsLm9iamVjdEtleXModGhpcy5zaGFwZSkpIHtcbiAgICAgICAgICAgIGlmIChtYXNrICYmICFtYXNrW2tleV0pIHtcbiAgICAgICAgICAgICAgICBuZXdTaGFwZVtrZXldID0gdGhpcy5zaGFwZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmllbGRTY2hlbWEgPSB0aGlzLnNoYXBlW2tleV07XG4gICAgICAgICAgICAgICAgbGV0IG5ld0ZpZWxkID0gZmllbGRTY2hlbWE7XG4gICAgICAgICAgICAgICAgd2hpbGUgKG5ld0ZpZWxkIGluc3RhbmNlb2YgWm9kT3B0aW9uYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3RmllbGQgPSBuZXdGaWVsZC5fZGVmLmlubmVyVHlwZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IG5ld0ZpZWxkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiBuZXdTaGFwZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGtleW9mKCkge1xuICAgICAgICByZXR1cm4gY3JlYXRlWm9kRW51bSh1dGlsLm9iamVjdEtleXModGhpcy5zaGFwZSkpO1xuICAgIH1cbn1cblpvZE9iamVjdC5jcmVhdGUgPSAoc2hhcGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgc2hhcGU6ICgpID0+IHNoYXBlLFxuICAgICAgICB1bmtub3duS2V5czogXCJzdHJpcFwiLFxuICAgICAgICBjYXRjaGFsbDogWm9kTmV2ZXIuY3JlYXRlKCksXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuWm9kT2JqZWN0LnN0cmljdENyZWF0ZSA9IChzaGFwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICBzaGFwZTogKCkgPT4gc2hhcGUsXG4gICAgICAgIHVua25vd25LZXlzOiBcInN0cmljdFwiLFxuICAgICAgICBjYXRjaGFsbDogWm9kTmV2ZXIuY3JlYXRlKCksXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuWm9kT2JqZWN0LmxhenljcmVhdGUgPSAoc2hhcGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgc2hhcGUsXG4gICAgICAgIHVua25vd25LZXlzOiBcInN0cmlwXCIsXG4gICAgICAgIGNhdGNoYWxsOiBab2ROZXZlci5jcmVhdGUoKSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPYmplY3QsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kVW5pb24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLl9kZWYub3B0aW9ucztcbiAgICAgICAgZnVuY3Rpb24gaGFuZGxlUmVzdWx0cyhyZXN1bHRzKSB7XG4gICAgICAgICAgICAvLyByZXR1cm4gZmlyc3QgaXNzdWUtZnJlZSB2YWxpZGF0aW9uIGlmIGl0IGV4aXN0c1xuICAgICAgICAgICAgZm9yIChjb25zdCByZXN1bHQgb2YgcmVzdWx0cykge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQucmVzdWx0LnN0YXR1cyA9PT0gXCJ2YWxpZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQucmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3QgcmVzdWx0IG9mIHJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIikge1xuICAgICAgICAgICAgICAgICAgICAvLyBhZGQgaXNzdWVzIGZyb20gZGlydHkgb3B0aW9uXG4gICAgICAgICAgICAgICAgICAgIGN0eC5jb21tb24uaXNzdWVzLnB1c2goLi4ucmVzdWx0LmN0eC5jb21tb24uaXNzdWVzKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gcmV0dXJuIGludmFsaWRcbiAgICAgICAgICAgIGNvbnN0IHVuaW9uRXJyb3JzID0gcmVzdWx0cy5tYXAoKHJlc3VsdCkgPT4gbmV3IFpvZEVycm9yKHJlc3VsdC5jdHguY29tbW9uLmlzc3VlcykpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdW5pb24sXG4gICAgICAgICAgICAgICAgdW5pb25FcnJvcnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwob3B0aW9ucy5tYXAoYXN5bmMgKG9wdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkQ3R4ID0ge1xuICAgICAgICAgICAgICAgICAgICAuLi5jdHgsXG4gICAgICAgICAgICAgICAgICAgIGNvbW1vbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3R4LmNvbW1vbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlczogW10sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdDogYXdhaXQgb3B0aW9uLl9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGNoaWxkQ3R4LFxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgY3R4OiBjaGlsZEN0eCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSkpLnRoZW4oaGFuZGxlUmVzdWx0cyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgZGlydHkgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBjb25zdCBpc3N1ZXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgb3B0aW9uIG9mIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZEN0eCA9IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uY3R4LFxuICAgICAgICAgICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN0eC5jb21tb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IG51bGwsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBvcHRpb24uX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjaGlsZEN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJ2YWxpZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIiAmJiAhZGlydHkpIHtcbiAgICAgICAgICAgICAgICAgICAgZGlydHkgPSB7IHJlc3VsdCwgY3R4OiBjaGlsZEN0eCB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY2hpbGRDdHguY29tbW9uLmlzc3Vlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNzdWVzLnB1c2goY2hpbGRDdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRpcnR5KSB7XG4gICAgICAgICAgICAgICAgY3R4LmNvbW1vbi5pc3N1ZXMucHVzaCguLi5kaXJ0eS5jdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRpcnR5LnJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVuaW9uRXJyb3JzID0gaXNzdWVzLm1hcCgoaXNzdWVzKSA9PiBuZXcgWm9kRXJyb3IoaXNzdWVzKSk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF91bmlvbixcbiAgICAgICAgICAgICAgICB1bmlvbkVycm9ycyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IG9wdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYub3B0aW9ucztcbiAgICB9XG59XG5ab2RVbmlvbi5jcmVhdGUgPSAodHlwZXMsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kVW5pb24oe1xuICAgICAgICBvcHRpb25zOiB0eXBlcyxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmlvbixcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy9cbi8vLy8vLy8vLy8gICAgICBab2REaXNjcmltaW5hdGVkVW5pb24gICAgICAvLy8vLy8vLy8vXG4vLy8vLy8vLy8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5jb25zdCBnZXREaXNjcmltaW5hdG9yID0gKHR5cGUpID0+IHtcbiAgICBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZExhenkpIHtcbiAgICAgICAgcmV0dXJuIGdldERpc2NyaW1pbmF0b3IodHlwZS5zY2hlbWEpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kRWZmZWN0cykge1xuICAgICAgICByZXR1cm4gZ2V0RGlzY3JpbWluYXRvcih0eXBlLmlubmVyVHlwZSgpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZExpdGVyYWwpIHtcbiAgICAgICAgcmV0dXJuIFt0eXBlLnZhbHVlXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZEVudW0pIHtcbiAgICAgICAgcmV0dXJuIHR5cGUub3B0aW9ucztcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE5hdGl2ZUVudW0pIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGJhbi9iYW5cbiAgICAgICAgcmV0dXJuIHV0aWwub2JqZWN0VmFsdWVzKHR5cGUuZW51bSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2REZWZhdWx0KSB7XG4gICAgICAgIHJldHVybiBnZXREaXNjcmltaW5hdG9yKHR5cGUuX2RlZi5pbm5lclR5cGUpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kVW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBbdW5kZWZpbmVkXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE51bGwpIHtcbiAgICAgICAgcmV0dXJuIFtudWxsXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE9wdGlvbmFsKSB7XG4gICAgICAgIHJldHVybiBbdW5kZWZpbmVkLCAuLi5nZXREaXNjcmltaW5hdG9yKHR5cGUudW53cmFwKCkpXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE51bGxhYmxlKSB7XG4gICAgICAgIHJldHVybiBbbnVsbCwgLi4uZ2V0RGlzY3JpbWluYXRvcih0eXBlLnVud3JhcCgpKV07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RCcmFuZGVkKSB7XG4gICAgICAgIHJldHVybiBnZXREaXNjcmltaW5hdG9yKHR5cGUudW53cmFwKCkpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kUmVhZG9ubHkpIHtcbiAgICAgICAgcmV0dXJuIGdldERpc2NyaW1pbmF0b3IodHlwZS51bndyYXAoKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RDYXRjaCkge1xuICAgICAgICByZXR1cm4gZ2V0RGlzY3JpbWluYXRvcih0eXBlLl9kZWYuaW5uZXJUeXBlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG59O1xuZXhwb3J0IGNsYXNzIFpvZERpc2NyaW1pbmF0ZWRVbmlvbiBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm9iamVjdCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5vYmplY3QsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkaXNjcmltaW5hdG9yID0gdGhpcy5kaXNjcmltaW5hdG9yO1xuICAgICAgICBjb25zdCBkaXNjcmltaW5hdG9yVmFsdWUgPSBjdHguZGF0YVtkaXNjcmltaW5hdG9yXTtcbiAgICAgICAgY29uc3Qgb3B0aW9uID0gdGhpcy5vcHRpb25zTWFwLmdldChkaXNjcmltaW5hdG9yVmFsdWUpO1xuICAgICAgICBpZiAoIW9wdGlvbikge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdW5pb25fZGlzY3JpbWluYXRvcixcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBBcnJheS5mcm9tKHRoaXMub3B0aW9uc01hcC5rZXlzKCkpLFxuICAgICAgICAgICAgICAgIHBhdGg6IFtkaXNjcmltaW5hdG9yXSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBvcHRpb24uX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gb3B0aW9uLl9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGRpc2NyaW1pbmF0b3IoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuZGlzY3JpbWluYXRvcjtcbiAgICB9XG4gICAgZ2V0IG9wdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYub3B0aW9ucztcbiAgICB9XG4gICAgZ2V0IG9wdGlvbnNNYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYub3B0aW9uc01hcDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGNvbnN0cnVjdG9yIG9mIHRoZSBkaXNjcmltaW5hdGVkIHVuaW9uIHNjaGVtYS4gSXRzIGJlaGF2aW91ciBpcyB2ZXJ5IHNpbWlsYXIgdG8gdGhhdCBvZiB0aGUgbm9ybWFsIHoudW5pb24oKSBjb25zdHJ1Y3Rvci5cbiAgICAgKiBIb3dldmVyLCBpdCBvbmx5IGFsbG93cyBhIHVuaW9uIG9mIG9iamVjdHMsIGFsbCBvZiB3aGljaCBuZWVkIHRvIHNoYXJlIGEgZGlzY3JpbWluYXRvciBwcm9wZXJ0eS4gVGhpcyBwcm9wZXJ0eSBtdXN0XG4gICAgICogaGF2ZSBhIGRpZmZlcmVudCB2YWx1ZSBmb3IgZWFjaCBvYmplY3QgaW4gdGhlIHVuaW9uLlxuICAgICAqIEBwYXJhbSBkaXNjcmltaW5hdG9yIHRoZSBuYW1lIG9mIHRoZSBkaXNjcmltaW5hdG9yIHByb3BlcnR5XG4gICAgICogQHBhcmFtIHR5cGVzIGFuIGFycmF5IG9mIG9iamVjdCBzY2hlbWFzXG4gICAgICogQHBhcmFtIHBhcmFtc1xuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGUoZGlzY3JpbWluYXRvciwgb3B0aW9ucywgcGFyYW1zKSB7XG4gICAgICAgIC8vIEdldCBhbGwgdGhlIHZhbGlkIGRpc2NyaW1pbmF0b3IgdmFsdWVzXG4gICAgICAgIGNvbnN0IG9wdGlvbnNNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIC8vIHRyeSB7XG4gICAgICAgIGZvciAoY29uc3QgdHlwZSBvZiBvcHRpb25zKSB7XG4gICAgICAgICAgICBjb25zdCBkaXNjcmltaW5hdG9yVmFsdWVzID0gZ2V0RGlzY3JpbWluYXRvcih0eXBlLnNoYXBlW2Rpc2NyaW1pbmF0b3JdKTtcbiAgICAgICAgICAgIGlmICghZGlzY3JpbWluYXRvclZhbHVlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEEgZGlzY3JpbWluYXRvciB2YWx1ZSBmb3Iga2V5IFxcYCR7ZGlzY3JpbWluYXRvcn1cXGAgY291bGQgbm90IGJlIGV4dHJhY3RlZCBmcm9tIGFsbCBzY2hlbWEgb3B0aW9uc2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCB2YWx1ZSBvZiBkaXNjcmltaW5hdG9yVmFsdWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnNNYXAuaGFzKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYERpc2NyaW1pbmF0b3IgcHJvcGVydHkgJHtTdHJpbmcoZGlzY3JpbWluYXRvcil9IGhhcyBkdXBsaWNhdGUgdmFsdWUgJHtTdHJpbmcodmFsdWUpfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvcHRpb25zTWFwLnNldCh2YWx1ZSwgdHlwZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2REaXNjcmltaW5hdGVkVW5pb24oe1xuICAgICAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REaXNjcmltaW5hdGVkVW5pb24sXG4gICAgICAgICAgICBkaXNjcmltaW5hdG9yLFxuICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgIG9wdGlvbnNNYXAsXG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIG1lcmdlVmFsdWVzKGEsIGIpIHtcbiAgICBjb25zdCBhVHlwZSA9IGdldFBhcnNlZFR5cGUoYSk7XG4gICAgY29uc3QgYlR5cGUgPSBnZXRQYXJzZWRUeXBlKGIpO1xuICAgIGlmIChhID09PSBiKSB7XG4gICAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBkYXRhOiBhIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKGFUeXBlID09PSBab2RQYXJzZWRUeXBlLm9iamVjdCAmJiBiVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5vYmplY3QpIHtcbiAgICAgICAgY29uc3QgYktleXMgPSB1dGlsLm9iamVjdEtleXMoYik7XG4gICAgICAgIGNvbnN0IHNoYXJlZEtleXMgPSB1dGlsLm9iamVjdEtleXMoYSkuZmlsdGVyKChrZXkpID0+IGJLZXlzLmluZGV4T2Yoa2V5KSAhPT0gLTEpO1xuICAgICAgICBjb25zdCBuZXdPYmogPSB7IC4uLmEsIC4uLmIgfTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2Ygc2hhcmVkS2V5cykge1xuICAgICAgICAgICAgY29uc3Qgc2hhcmVkVmFsdWUgPSBtZXJnZVZhbHVlcyhhW2tleV0sIGJba2V5XSk7XG4gICAgICAgICAgICBpZiAoIXNoYXJlZFZhbHVlLnZhbGlkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXdPYmpba2V5XSA9IHNoYXJlZFZhbHVlLmRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGRhdGE6IG5ld09iaiB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChhVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5hcnJheSAmJiBiVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5hcnJheSkge1xuICAgICAgICBpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4geyB2YWxpZDogZmFsc2UgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXdBcnJheSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgYS5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1BID0gYVtpbmRleF07XG4gICAgICAgICAgICBjb25zdCBpdGVtQiA9IGJbaW5kZXhdO1xuICAgICAgICAgICAgY29uc3Qgc2hhcmVkVmFsdWUgPSBtZXJnZVZhbHVlcyhpdGVtQSwgaXRlbUIpO1xuICAgICAgICAgICAgaWYgKCFzaGFyZWRWYWx1ZS52YWxpZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3QXJyYXkucHVzaChzaGFyZWRWYWx1ZS5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZGF0YTogbmV3QXJyYXkgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAoYVR5cGUgPT09IFpvZFBhcnNlZFR5cGUuZGF0ZSAmJiBiVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5kYXRlICYmICthID09PSArYikge1xuICAgICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZGF0YTogYSB9O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFpvZEludGVyc2VjdGlvbiBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IHN0YXR1cywgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBoYW5kbGVQYXJzZWQgPSAocGFyc2VkTGVmdCwgcGFyc2VkUmlnaHQpID0+IHtcbiAgICAgICAgICAgIGlmIChpc0Fib3J0ZWQocGFyc2VkTGVmdCkgfHwgaXNBYm9ydGVkKHBhcnNlZFJpZ2h0KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbWVyZ2VkID0gbWVyZ2VWYWx1ZXMocGFyc2VkTGVmdC52YWx1ZSwgcGFyc2VkUmlnaHQudmFsdWUpO1xuICAgICAgICAgICAgaWYgKCFtZXJnZWQudmFsaWQpIHtcbiAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfaW50ZXJzZWN0aW9uX3R5cGVzLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzRGlydHkocGFyc2VkTGVmdCkgfHwgaXNEaXJ0eShwYXJzZWRSaWdodCkpIHtcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogbWVyZ2VkLmRhdGEgfTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICAgICAgdGhpcy5fZGVmLmxlZnQuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHRoaXMuX2RlZi5yaWdodC5fcGFyc2VBc3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBdKS50aGVuKChbbGVmdCwgcmlnaHRdKSA9PiBoYW5kbGVQYXJzZWQobGVmdCwgcmlnaHQpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVQYXJzZWQodGhpcy5fZGVmLmxlZnQuX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICB9KSwgdGhpcy5fZGVmLnJpZ2h0Ll9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgfVxufVxuWm9kSW50ZXJzZWN0aW9uLmNyZWF0ZSA9IChsZWZ0LCByaWdodCwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RJbnRlcnNlY3Rpb24oe1xuICAgICAgICBsZWZ0OiBsZWZ0LFxuICAgICAgICByaWdodDogcmlnaHQsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kSW50ZXJzZWN0aW9uLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuLy8gdHlwZSBab2RUdXBsZUl0ZW1zID0gW1pvZFR5cGVBbnksIC4uLlpvZFR5cGVBbnlbXV07XG5leHBvcnQgY2xhc3MgWm9kVHVwbGUgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLmFycmF5KSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLmFycmF5LFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5kYXRhLmxlbmd0aCA8IHRoaXMuX2RlZi5pdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgbWluaW11bTogdGhpcy5fZGVmLml0ZW1zLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiYXJyYXlcIixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdCA9IHRoaXMuX2RlZi5yZXN0O1xuICAgICAgICBpZiAoIXJlc3QgJiYgY3R4LmRhdGEubGVuZ3RoID4gdGhpcy5fZGVmLml0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgbWF4aW11bTogdGhpcy5fZGVmLml0ZW1zLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiYXJyYXlcIixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaXRlbXMgPSBbLi4uY3R4LmRhdGFdXG4gICAgICAgICAgICAubWFwKChpdGVtLCBpdGVtSW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNjaGVtYSA9IHRoaXMuX2RlZi5pdGVtc1tpdGVtSW5kZXhdIHx8IHRoaXMuX2RlZi5yZXN0O1xuICAgICAgICAgICAgaWYgKCFzY2hlbWEpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICByZXR1cm4gc2NoZW1hLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgaXRlbSwgY3R4LnBhdGgsIGl0ZW1JbmRleCkpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLmZpbHRlcigoeCkgPT4gISF4KTsgLy8gZmlsdGVyIG51bGxzXG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoaXRlbXMpLnRoZW4oKHJlc3VsdHMpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIHJlc3VsdHMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIGl0ZW1zKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgaXRlbXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaXRlbXM7XG4gICAgfVxuICAgIHJlc3QocmVzdCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFR1cGxlKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHJlc3QsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cblpvZFR1cGxlLmNyZWF0ZSA9IChzY2hlbWFzLCBwYXJhbXMpID0+IHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoc2NoZW1hcykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiWW91IG11c3QgcGFzcyBhbiBhcnJheSBvZiBzY2hlbWFzIHRvIHoudHVwbGUoWyAuLi4gXSlcIik7XG4gICAgfVxuICAgIHJldHVybiBuZXcgWm9kVHVwbGUoe1xuICAgICAgICBpdGVtczogc2NoZW1hcyxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RUdXBsZSxcbiAgICAgICAgcmVzdDogbnVsbCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RSZWNvcmQgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBnZXQga2V5U2NoZW1hKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmtleVR5cGU7XG4gICAgfVxuICAgIGdldCB2YWx1ZVNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IHN0YXR1cywgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUub2JqZWN0KSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm9iamVjdCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhaXJzID0gW107XG4gICAgICAgIGNvbnN0IGtleVR5cGUgPSB0aGlzLl9kZWYua2V5VHlwZTtcbiAgICAgICAgY29uc3QgdmFsdWVUeXBlID0gdGhpcy5fZGVmLnZhbHVlVHlwZTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gY3R4LmRhdGEpIHtcbiAgICAgICAgICAgIHBhaXJzLnB1c2goe1xuICAgICAgICAgICAgICAgIGtleToga2V5VHlwZS5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGtleSwgY3R4LnBhdGgsIGtleSkpLFxuICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZVR5cGUuX3BhcnNlKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCBjdHguZGF0YVtrZXldLCBjdHgucGF0aCwga2V5KSksXG4gICAgICAgICAgICAgICAgYWx3YXlzU2V0OiBrZXkgaW4gY3R4LmRhdGEsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlT2JqZWN0QXN5bmMoc3RhdHVzLCBwYWlycyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VPYmplY3RTeW5jKHN0YXR1cywgcGFpcnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBlbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlVHlwZTtcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZShmaXJzdCwgc2Vjb25kLCB0aGlyZCkge1xuICAgICAgICBpZiAoc2Vjb25kIGluc3RhbmNlb2YgWm9kVHlwZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBab2RSZWNvcmQoe1xuICAgICAgICAgICAgICAgIGtleVR5cGU6IGZpcnN0LFxuICAgICAgICAgICAgICAgIHZhbHVlVHlwZTogc2Vjb25kLFxuICAgICAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUmVjb3JkLFxuICAgICAgICAgICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXModGhpcmQpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RSZWNvcmQoe1xuICAgICAgICAgICAga2V5VHlwZTogWm9kU3RyaW5nLmNyZWF0ZSgpLFxuICAgICAgICAgICAgdmFsdWVUeXBlOiBmaXJzdCxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUmVjb3JkLFxuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhzZWNvbmQpLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgWm9kTWFwIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgZ2V0IGtleVNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5rZXlUeXBlO1xuICAgIH1cbiAgICBnZXQgdmFsdWVTY2hlbWEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudmFsdWVUeXBlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm1hcCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5tYXAsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBrZXlUeXBlID0gdGhpcy5fZGVmLmtleVR5cGU7XG4gICAgICAgIGNvbnN0IHZhbHVlVHlwZSA9IHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgICAgIGNvbnN0IHBhaXJzID0gWy4uLmN0eC5kYXRhLmVudHJpZXMoKV0ubWFwKChba2V5LCB2YWx1ZV0sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGtleToga2V5VHlwZS5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGtleSwgY3R4LnBhdGgsIFtpbmRleCwgXCJrZXlcIl0pKSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWVUeXBlLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgdmFsdWUsIGN0eC5wYXRoLCBbaW5kZXgsIFwidmFsdWVcIl0pKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgY29uc3QgZmluYWxNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCkudGhlbihhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBwYWlyIG9mIHBhaXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGF3YWl0IHBhaXIua2V5O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IHBhaXIudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkuc3RhdHVzID09PSBcImFib3J0ZWRcIiB8fCB2YWx1ZS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5LnN0YXR1cyA9PT0gXCJkaXJ0eVwiIHx8IHZhbHVlLnN0YXR1cyA9PT0gXCJkaXJ0eVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmaW5hbE1hcC5zZXQoa2V5LnZhbHVlLCB2YWx1ZS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogZmluYWxNYXAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZmluYWxNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHBhaXIgb2YgcGFpcnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBwYWlyLmtleTtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHBhaXIudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKGtleS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiIHx8IHZhbHVlLnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChrZXkuc3RhdHVzID09PSBcImRpcnR5XCIgfHwgdmFsdWUuc3RhdHVzID09PSBcImRpcnR5XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZpbmFsTWFwLnNldChrZXkudmFsdWUsIHZhbHVlLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogZmluYWxNYXAgfTtcbiAgICAgICAgfVxuICAgIH1cbn1cblpvZE1hcC5jcmVhdGUgPSAoa2V5VHlwZSwgdmFsdWVUeXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE1hcCh7XG4gICAgICAgIHZhbHVlVHlwZSxcbiAgICAgICAga2V5VHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RNYXAsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kU2V0IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5zZXQpIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUuc2V0LFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGVmID0gdGhpcy5fZGVmO1xuICAgICAgICBpZiAoZGVmLm1pblNpemUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChjdHguZGF0YS5zaXplIDwgZGVmLm1pblNpemUudmFsdWUpIHtcbiAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgbWluaW11bTogZGVmLm1pblNpemUudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic2V0XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWluU2l6ZS5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYubWF4U2l6ZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKGN0eC5kYXRhLnNpemUgPiBkZWYubWF4U2l6ZS52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX2JpZyxcbiAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogZGVmLm1heFNpemUudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic2V0XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWF4U2l6ZS5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHZhbHVlVHlwZSA9IHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgICAgIGZ1bmN0aW9uIGZpbmFsaXplU2V0KGVsZW1lbnRzKSB7XG4gICAgICAgICAgICBjb25zdCBwYXJzZWRTZXQgPSBuZXcgU2V0KCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgZWxlbWVudHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgcGFyc2VkU2V0LmFkZChlbGVtZW50LnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogcGFyc2VkU2V0IH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZWxlbWVudHMgPSBbLi4uY3R4LmRhdGEudmFsdWVzKCldLm1hcCgoaXRlbSwgaSkgPT4gdmFsdWVUeXBlLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgaXRlbSwgY3R4LnBhdGgsIGkpKSk7XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoZWxlbWVudHMpLnRoZW4oKGVsZW1lbnRzKSA9PiBmaW5hbGl6ZVNldChlbGVtZW50cykpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZpbmFsaXplU2V0KGVsZW1lbnRzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBtaW4obWluU2l6ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFNldCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBtaW5TaXplOiB7IHZhbHVlOiBtaW5TaXplLCBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG1heChtYXhTaXplLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU2V0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIG1heFNpemU6IHsgdmFsdWU6IG1heFNpemUsIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2l6ZShzaXplLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pbihzaXplLCBtZXNzYWdlKS5tYXgoc2l6ZSwgbWVzc2FnZSk7XG4gICAgfVxuICAgIG5vbmVtcHR5KG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWluKDEsIG1lc3NhZ2UpO1xuICAgIH1cbn1cblpvZFNldC5jcmVhdGUgPSAodmFsdWVUeXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFNldCh7XG4gICAgICAgIHZhbHVlVHlwZSxcbiAgICAgICAgbWluU2l6ZTogbnVsbCxcbiAgICAgICAgbWF4U2l6ZTogbnVsbCxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RTZXQsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kRnVuY3Rpb24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy52YWxpZGF0ZSA9IHRoaXMuaW1wbGVtZW50O1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5mdW5jdGlvbikge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5mdW5jdGlvbixcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIG1ha2VBcmdzSXNzdWUoYXJncywgZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBtYWtlSXNzdWUoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGFyZ3MsXG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgZXJyb3JNYXBzOiBbY3R4LmNvbW1vbi5jb250ZXh0dWFsRXJyb3JNYXAsIGN0eC5zY2hlbWFFcnJvck1hcCwgZ2V0RXJyb3JNYXAoKSwgZGVmYXVsdEVycm9yTWFwXS5maWx0ZXIoKHgpID0+ICEheCksXG4gICAgICAgICAgICAgICAgaXNzdWVEYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX2FyZ3VtZW50cyxcbiAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzRXJyb3I6IGVycm9yLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBtYWtlUmV0dXJuc0lzc3VlKHJldHVybnMsIGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gbWFrZUlzc3VlKHtcbiAgICAgICAgICAgICAgICBkYXRhOiByZXR1cm5zLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIGVycm9yTWFwczogW2N0eC5jb21tb24uY29udGV4dHVhbEVycm9yTWFwLCBjdHguc2NoZW1hRXJyb3JNYXAsIGdldEVycm9yTWFwKCksIGRlZmF1bHRFcnJvck1hcF0uZmlsdGVyKCh4KSA9PiAhIXgpLFxuICAgICAgICAgICAgICAgIGlzc3VlRGF0YToge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9yZXR1cm5fdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuVHlwZUVycm9yOiBlcnJvcixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyYW1zID0geyBlcnJvck1hcDogY3R4LmNvbW1vbi5jb250ZXh0dWFsRXJyb3JNYXAgfTtcbiAgICAgICAgY29uc3QgZm4gPSBjdHguZGF0YTtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi5yZXR1cm5zIGluc3RhbmNlb2YgWm9kUHJvbWlzZSkge1xuICAgICAgICAgICAgLy8gV291bGQgbG92ZSBhIHdheSB0byBhdm9pZCBkaXNhYmxpbmcgdGhpcyBydWxlLCBidXQgd2UgbmVlZFxuICAgICAgICAgICAgLy8gYW4gYWxpYXMgKHVzaW5nIGFuIGFycm93IGZ1bmN0aW9uIHdhcyB3aGF0IGNhdXNlZCAyNjUxKS5cbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdGhpcy1hbGlhc1xuICAgICAgICAgICAgY29uc3QgbWUgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIE9LKGFzeW5jIGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgWm9kRXJyb3IoW10pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZEFyZ3MgPSBhd2FpdCBtZS5fZGVmLmFyZ3MucGFyc2VBc3luYyhhcmdzLCBwYXJhbXMpLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yLmFkZElzc3VlKG1ha2VBcmdzSXNzdWUoYXJncywgZSkpO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBSZWZsZWN0LmFwcGx5KGZuLCB0aGlzLCBwYXJzZWRBcmdzKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWRSZXR1cm5zID0gYXdhaXQgbWUuX2RlZi5yZXR1cm5zLl9kZWYudHlwZVxuICAgICAgICAgICAgICAgICAgICAucGFyc2VBc3luYyhyZXN1bHQsIHBhcmFtcylcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yLmFkZElzc3VlKG1ha2VSZXR1cm5zSXNzdWUocmVzdWx0LCBlKSk7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZWRSZXR1cm5zO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBXb3VsZCBsb3ZlIGEgd2F5IHRvIGF2b2lkIGRpc2FibGluZyB0aGlzIHJ1bGUsIGJ1dCB3ZSBuZWVkXG4gICAgICAgICAgICAvLyBhbiBhbGlhcyAodXNpbmcgYW4gYXJyb3cgZnVuY3Rpb24gd2FzIHdoYXQgY2F1c2VkIDI2NTEpLlxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby10aGlzLWFsaWFzXG4gICAgICAgICAgICBjb25zdCBtZSA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gT0soZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWRBcmdzID0gbWUuX2RlZi5hcmdzLnNhZmVQYXJzZShhcmdzLCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgIGlmICghcGFyc2VkQXJncy5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBab2RFcnJvcihbbWFrZUFyZ3NJc3N1ZShhcmdzLCBwYXJzZWRBcmdzLmVycm9yKV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBSZWZsZWN0LmFwcGx5KGZuLCB0aGlzLCBwYXJzZWRBcmdzLmRhdGEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZFJldHVybnMgPSBtZS5fZGVmLnJldHVybnMuc2FmZVBhcnNlKHJlc3VsdCwgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICBpZiAoIXBhcnNlZFJldHVybnMuc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgWm9kRXJyb3IoW21ha2VSZXR1cm5zSXNzdWUocmVzdWx0LCBwYXJzZWRSZXR1cm5zLmVycm9yKV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VkUmV0dXJucy5kYXRhO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcGFyYW1ldGVycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5hcmdzO1xuICAgIH1cbiAgICByZXR1cm5UeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnJldHVybnM7XG4gICAgfVxuICAgIGFyZ3MoLi4uaXRlbXMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RGdW5jdGlvbih7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBhcmdzOiBab2RUdXBsZS5jcmVhdGUoaXRlbXMpLnJlc3QoWm9kVW5rbm93bi5jcmVhdGUoKSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm5zKHJldHVyblR5cGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RGdW5jdGlvbih7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICByZXR1cm5zOiByZXR1cm5UeXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaW1wbGVtZW50KGZ1bmMpIHtcbiAgICAgICAgY29uc3QgdmFsaWRhdGVkRnVuYyA9IHRoaXMucGFyc2UoZnVuYyk7XG4gICAgICAgIHJldHVybiB2YWxpZGF0ZWRGdW5jO1xuICAgIH1cbiAgICBzdHJpY3RJbXBsZW1lbnQoZnVuYykge1xuICAgICAgICBjb25zdCB2YWxpZGF0ZWRGdW5jID0gdGhpcy5wYXJzZShmdW5jKTtcbiAgICAgICAgcmV0dXJuIHZhbGlkYXRlZEZ1bmM7XG4gICAgfVxuICAgIHN0YXRpYyBjcmVhdGUoYXJncywgcmV0dXJucywgcGFyYW1zKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kRnVuY3Rpb24oe1xuICAgICAgICAgICAgYXJnczogKGFyZ3MgPyBhcmdzIDogWm9kVHVwbGUuY3JlYXRlKFtdKS5yZXN0KFpvZFVua25vd24uY3JlYXRlKCkpKSxcbiAgICAgICAgICAgIHJldHVybnM6IHJldHVybnMgfHwgWm9kVW5rbm93bi5jcmVhdGUoKSxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRnVuY3Rpb24sXG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBab2RMYXp5IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgZ2V0IHNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5nZXR0ZXIoKTtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBsYXp5U2NoZW1hID0gdGhpcy5fZGVmLmdldHRlcigpO1xuICAgICAgICByZXR1cm4gbGF6eVNjaGVtYS5fcGFyc2UoeyBkYXRhOiBjdHguZGF0YSwgcGF0aDogY3R4LnBhdGgsIHBhcmVudDogY3R4IH0pO1xuICAgIH1cbn1cblpvZExhenkuY3JlYXRlID0gKGdldHRlciwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RMYXp5KHtcbiAgICAgICAgZ2V0dGVyOiBnZXR0ZXIsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTGF6eSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RMaXRlcmFsIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGlmIChpbnB1dC5kYXRhICE9PSB0aGlzLl9kZWYudmFsdWUpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9saXRlcmFsLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiB0aGlzLl9kZWYudmFsdWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZTogaW5wdXQuZGF0YSB9O1xuICAgIH1cbiAgICBnZXQgdmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudmFsdWU7XG4gICAgfVxufVxuWm9kTGl0ZXJhbC5jcmVhdGUgPSAodmFsdWUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTGl0ZXJhbCh7XG4gICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RMaXRlcmFsLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZnVuY3Rpb24gY3JlYXRlWm9kRW51bSh2YWx1ZXMsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgWm9kRW51bSh7XG4gICAgICAgIHZhbHVlcyxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFbnVtLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG5leHBvcnQgY2xhc3MgWm9kRW51bSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodHlwZW9mIGlucHV0LmRhdGEgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkVmFsdWVzID0gdGhpcy5fZGVmLnZhbHVlcztcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiB1dGlsLmpvaW5WYWx1ZXMoZXhwZWN0ZWRWYWx1ZXMpLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX2NhY2hlKSB7XG4gICAgICAgICAgICB0aGlzLl9jYWNoZSA9IG5ldyBTZXQodGhpcy5fZGVmLnZhbHVlcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9jYWNoZS5oYXMoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkVmFsdWVzID0gdGhpcy5fZGVmLnZhbHVlcztcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9lbnVtX3ZhbHVlLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGV4cGVjdGVkVmFsdWVzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxuICAgIGdldCBvcHRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlcztcbiAgICB9XG4gICAgZ2V0IGVudW0oKSB7XG4gICAgICAgIGNvbnN0IGVudW1WYWx1ZXMgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCB2YWwgb2YgdGhpcy5fZGVmLnZhbHVlcykge1xuICAgICAgICAgICAgZW51bVZhbHVlc1t2YWxdID0gdmFsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbnVtVmFsdWVzO1xuICAgIH1cbiAgICBnZXQgVmFsdWVzKCkge1xuICAgICAgICBjb25zdCBlbnVtVmFsdWVzID0ge307XG4gICAgICAgIGZvciAoY29uc3QgdmFsIG9mIHRoaXMuX2RlZi52YWx1ZXMpIHtcbiAgICAgICAgICAgIGVudW1WYWx1ZXNbdmFsXSA9IHZhbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW51bVZhbHVlcztcbiAgICB9XG4gICAgZ2V0IEVudW0oKSB7XG4gICAgICAgIGNvbnN0IGVudW1WYWx1ZXMgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCB2YWwgb2YgdGhpcy5fZGVmLnZhbHVlcykge1xuICAgICAgICAgICAgZW51bVZhbHVlc1t2YWxdID0gdmFsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbnVtVmFsdWVzO1xuICAgIH1cbiAgICBleHRyYWN0KHZhbHVlcywgbmV3RGVmID0gdGhpcy5fZGVmKSB7XG4gICAgICAgIHJldHVybiBab2RFbnVtLmNyZWF0ZSh2YWx1ZXMsIHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIC4uLm5ld0RlZixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGV4Y2x1ZGUodmFsdWVzLCBuZXdEZWYgPSB0aGlzLl9kZWYpIHtcbiAgICAgICAgcmV0dXJuIFpvZEVudW0uY3JlYXRlKHRoaXMub3B0aW9ucy5maWx0ZXIoKG9wdCkgPT4gIXZhbHVlcy5pbmNsdWRlcyhvcHQpKSwge1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgLi4ubmV3RGVmLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5ab2RFbnVtLmNyZWF0ZSA9IGNyZWF0ZVpvZEVudW07XG5leHBvcnQgY2xhc3MgWm9kTmF0aXZlRW51bSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBuYXRpdmVFbnVtVmFsdWVzID0gdXRpbC5nZXRWYWxpZEVudW1WYWx1ZXModGhpcy5fZGVmLnZhbHVlcyk7XG4gICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnN0cmluZyAmJiBjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5udW1iZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkVmFsdWVzID0gdXRpbC5vYmplY3RWYWx1ZXMobmF0aXZlRW51bVZhbHVlcyk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogdXRpbC5qb2luVmFsdWVzKGV4cGVjdGVkVmFsdWVzKSxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9jYWNoZSkge1xuICAgICAgICAgICAgdGhpcy5fY2FjaGUgPSBuZXcgU2V0KHV0aWwuZ2V0VmFsaWRFbnVtVmFsdWVzKHRoaXMuX2RlZi52YWx1ZXMpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX2NhY2hlLmhhcyhpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgY29uc3QgZXhwZWN0ZWRWYWx1ZXMgPSB1dGlsLm9iamVjdFZhbHVlcyhuYXRpdmVFbnVtVmFsdWVzKTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9lbnVtX3ZhbHVlLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGV4cGVjdGVkVmFsdWVzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxuICAgIGdldCBlbnVtKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlcztcbiAgICB9XG59XG5ab2ROYXRpdmVFbnVtLmNyZWF0ZSA9ICh2YWx1ZXMsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTmF0aXZlRW51bSh7XG4gICAgICAgIHZhbHVlczogdmFsdWVzLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5hdGl2ZUVudW0sXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kUHJvbWlzZSBleHRlbmRzIFpvZFR5cGUge1xuICAgIHVud3JhcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi50eXBlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5wcm9taXNlICYmIGN0eC5jb21tb24uYXN5bmMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnByb21pc2UsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcm9taXNpZmllZCA9IGN0eC5wYXJzZWRUeXBlID09PSBab2RQYXJzZWRUeXBlLnByb21pc2UgPyBjdHguZGF0YSA6IFByb21pc2UucmVzb2x2ZShjdHguZGF0YSk7XG4gICAgICAgIHJldHVybiBPSyhwcm9taXNpZmllZC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnR5cGUucGFyc2VBc3luYyhkYXRhLCB7XG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgZXJyb3JNYXA6IGN0eC5jb21tb24uY29udGV4dHVhbEVycm9yTWFwLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5ab2RQcm9taXNlLmNyZWF0ZSA9IChzY2hlbWEsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kUHJvbWlzZSh7XG4gICAgICAgIHR5cGU6IHNjaGVtYSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RQcm9taXNlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZEVmZmVjdHMgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBpbm5lclR5cGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2NoZW1hO1xuICAgIH1cbiAgICBzb3VyY2VUeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnNjaGVtYS5fZGVmLnR5cGVOYW1lID09PSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRWZmZWN0c1xuICAgICAgICAgICAgPyB0aGlzLl9kZWYuc2NoZW1hLnNvdXJjZVR5cGUoKVxuICAgICAgICAgICAgOiB0aGlzLl9kZWYuc2NoZW1hO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgY29uc3QgZWZmZWN0ID0gdGhpcy5fZGVmLmVmZmVjdCB8fCBudWxsO1xuICAgICAgICBjb25zdCBjaGVja0N0eCA9IHtcbiAgICAgICAgICAgIGFkZElzc3VlOiAoYXJnKSA9PiB7XG4gICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCBhcmcpO1xuICAgICAgICAgICAgICAgIGlmIChhcmcuZmF0YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmFib3J0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0IHBhdGgoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN0eC5wYXRoO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICAgICAgY2hlY2tDdHguYWRkSXNzdWUgPSBjaGVja0N0eC5hZGRJc3N1ZS5iaW5kKGNoZWNrQ3R4KTtcbiAgICAgICAgaWYgKGVmZmVjdC50eXBlID09PSBcInByZXByb2Nlc3NcIikge1xuICAgICAgICAgICAgY29uc3QgcHJvY2Vzc2VkID0gZWZmZWN0LnRyYW5zZm9ybShjdHguZGF0YSwgY2hlY2tDdHgpO1xuICAgICAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHByb2Nlc3NlZCkudGhlbihhc3luYyAocHJvY2Vzc2VkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0dXMudmFsdWUgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuX2RlZi5zY2hlbWEuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogcHJvY2Vzc2VkLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERJUlRZKHJlc3VsdC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0dXMudmFsdWUgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBESVJUWShyZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXR1cy52YWx1ZSA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX2RlZi5zY2hlbWEuX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHByb2Nlc3NlZCxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERJUlRZKHJlc3VsdC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXR1cy52YWx1ZSA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRElSVFkocmVzdWx0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChlZmZlY3QudHlwZSA9PT0gXCJyZWZpbmVtZW50XCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4ZWN1dGVSZWZpbmVtZW50ID0gKGFjYykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGVmZmVjdC5yZWZpbmVtZW50KGFjYywgY2hlY2tDdHgpO1xuICAgICAgICAgICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQXN5bmMgcmVmaW5lbWVudCBlbmNvdW50ZXJlZCBkdXJpbmcgc3luY2hyb25vdXMgcGFyc2Ugb3BlcmF0aW9uLiBVc2UgLnBhcnNlQXN5bmMgaW5zdGVhZC5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5uZXIgPSB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChpbm5lci5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICBpZiAoaW5uZXIuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIC8vIHJldHVybiB2YWx1ZSBpcyBpZ25vcmVkXG4gICAgICAgICAgICAgICAgZXhlY3V0ZVJlZmluZW1lbnQoaW5uZXIudmFsdWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogaW5uZXIudmFsdWUgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZUFzeW5jKHsgZGF0YTogY3R4LmRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KS50aGVuKChpbm5lcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5uZXIuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5uZXIuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV4ZWN1dGVSZWZpbmVtZW50KGlubmVyLnZhbHVlKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogaW5uZXIudmFsdWUgfTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVmZmVjdC50eXBlID09PSBcInRyYW5zZm9ybVwiKSB7XG4gICAgICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBiYXNlID0gdGhpcy5fZGVmLnNjaGVtYS5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoIWlzVmFsaWQoYmFzZSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGVmZmVjdC50cmFuc2Zvcm0oYmFzZS52YWx1ZSwgY2hlY2tDdHgpO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQXN5bmNocm9ub3VzIHRyYW5zZm9ybSBlbmNvdW50ZXJlZCBkdXJpbmcgc3luY2hyb25vdXMgcGFyc2Ugb3BlcmF0aW9uLiBVc2UgLnBhcnNlQXN5bmMgaW5zdGVhZC5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiByZXN1bHQgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZUFzeW5jKHsgZGF0YTogY3R4LmRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KS50aGVuKChiYXNlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZChiYXNlKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGVmZmVjdC50cmFuc2Zvcm0oYmFzZS52YWx1ZSwgY2hlY2tDdHgpKS50aGVuKChyZXN1bHQpID0+ICh7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHN0YXR1cy52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHQsXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB1dGlsLmFzc2VydE5ldmVyKGVmZmVjdCk7XG4gICAgfVxufVxuWm9kRWZmZWN0cy5jcmVhdGUgPSAoc2NoZW1hLCBlZmZlY3QsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kRWZmZWN0cyh7XG4gICAgICAgIHNjaGVtYSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFZmZlY3RzLFxuICAgICAgICBlZmZlY3QsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5ab2RFZmZlY3RzLmNyZWF0ZVdpdGhQcmVwcm9jZXNzID0gKHByZXByb2Nlc3MsIHNjaGVtYSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RFZmZlY3RzKHtcbiAgICAgICAgc2NoZW1hLFxuICAgICAgICBlZmZlY3Q6IHsgdHlwZTogXCJwcmVwcm9jZXNzXCIsIHRyYW5zZm9ybTogcHJlcHJvY2VzcyB9LFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEVmZmVjdHMsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgeyBab2RFZmZlY3RzIGFzIFpvZFRyYW5zZm9ybWVyIH07XG5leHBvcnQgY2xhc3MgWm9kT3B0aW9uYWwgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS51bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBPSyh1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZShpbnB1dCk7XG4gICAgfVxuICAgIHVud3JhcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5pbm5lclR5cGU7XG4gICAgfVxufVxuWm9kT3B0aW9uYWwuY3JlYXRlID0gKHR5cGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kT3B0aW9uYWwoe1xuICAgICAgICBpbm5lclR5cGU6IHR5cGUsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT3B0aW9uYWwsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kTnVsbGFibGUgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5udWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gT0sobnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5pbm5lclR5cGUuX3BhcnNlKGlucHV0KTtcbiAgICB9XG4gICAgdW53cmFwKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmlubmVyVHlwZTtcbiAgICB9XG59XG5ab2ROdWxsYWJsZS5jcmVhdGUgPSAodHlwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROdWxsYWJsZSh7XG4gICAgICAgIGlubmVyVHlwZTogdHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROdWxsYWJsZSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2REZWZhdWx0IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBsZXQgZGF0YSA9IGN0eC5kYXRhO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgPT09IFpvZFBhcnNlZFR5cGUudW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBkYXRhID0gdGhpcy5fZGVmLmRlZmF1bHRWYWx1ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZSh7XG4gICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlbW92ZURlZmF1bHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlO1xuICAgIH1cbn1cblpvZERlZmF1bHQuY3JlYXRlID0gKHR5cGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kRGVmYXVsdCh7XG4gICAgICAgIGlubmVyVHlwZTogdHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REZWZhdWx0LFxuICAgICAgICBkZWZhdWx0VmFsdWU6IHR5cGVvZiBwYXJhbXMuZGVmYXVsdCA9PT0gXCJmdW5jdGlvblwiID8gcGFyYW1zLmRlZmF1bHQgOiAoKSA9PiBwYXJhbXMuZGVmYXVsdCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RDYXRjaCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgLy8gbmV3Q3R4IGlzIHVzZWQgdG8gbm90IGNvbGxlY3QgaXNzdWVzIGZyb20gaW5uZXIgdHlwZXMgaW4gY3R4XG4gICAgICAgIGNvbnN0IG5ld0N0eCA9IHtcbiAgICAgICAgICAgIC4uLmN0eCxcbiAgICAgICAgICAgIGNvbW1vbjoge1xuICAgICAgICAgICAgICAgIC4uLmN0eC5jb21tb24sXG4gICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX2RlZi5pbm5lclR5cGUuX3BhcnNlKHtcbiAgICAgICAgICAgIGRhdGE6IG5ld0N0eC5kYXRhLFxuICAgICAgICAgICAgcGF0aDogbmV3Q3R4LnBhdGgsXG4gICAgICAgICAgICBwYXJlbnQ6IHtcbiAgICAgICAgICAgICAgICAuLi5uZXdDdHgsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGlzQXN5bmMocmVzdWx0KSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFwidmFsaWRcIixcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHJlc3VsdC5zdGF0dXMgPT09IFwidmFsaWRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgPyByZXN1bHQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgIDogdGhpcy5fZGVmLmNhdGNoVmFsdWUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldCBlcnJvcigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBab2RFcnJvcihuZXdDdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dDogbmV3Q3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogXCJ2YWxpZFwiLFxuICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHQuc3RhdHVzID09PSBcInZhbGlkXCJcbiAgICAgICAgICAgICAgICAgICAgPyByZXN1bHQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgOiB0aGlzLl9kZWYuY2F0Y2hWYWx1ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBnZXQgZXJyb3IoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBab2RFcnJvcihuZXdDdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IG5ld0N0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVtb3ZlQ2F0Y2goKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlO1xuICAgIH1cbn1cblpvZENhdGNoLmNyZWF0ZSA9ICh0eXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZENhdGNoKHtcbiAgICAgICAgaW5uZXJUeXBlOiB0eXBlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZENhdGNoLFxuICAgICAgICBjYXRjaFZhbHVlOiB0eXBlb2YgcGFyYW1zLmNhdGNoID09PSBcImZ1bmN0aW9uXCIgPyBwYXJhbXMuY2F0Y2ggOiAoKSA9PiBwYXJhbXMuY2F0Y2gsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kTmFOIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUubmFuKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm5hbixcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZTogaW5wdXQuZGF0YSB9O1xuICAgIH1cbn1cblpvZE5hTi5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROYU4oe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5hTixcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjb25zdCBCUkFORCA9IFN5bWJvbChcInpvZF9icmFuZFwiKTtcbmV4cG9ydCBjbGFzcyBab2RCcmFuZGVkIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBkYXRhID0gY3R4LmRhdGE7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudHlwZS5fcGFyc2Uoe1xuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB1bndyYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudHlwZTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgWm9kUGlwZWxpbmUgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZUFzeW5jID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGluUmVzdWx0ID0gYXdhaXQgdGhpcy5fZGVmLmluLl9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoaW5SZXN1bHQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgaWYgKGluUmVzdWx0LnN0YXR1cyA9PT0gXCJkaXJ0eVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRElSVFkoaW5SZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5vdXQuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogaW5SZXN1bHQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZUFzeW5jKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBpblJlc3VsdCA9IHRoaXMuX2RlZi5pbi5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGluUmVzdWx0LnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICBpZiAoaW5SZXN1bHQuc3RhdHVzID09PSBcImRpcnR5XCIpIHtcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFwiZGlydHlcIixcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGluUmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZGVmLm91dC5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogaW5SZXN1bHQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgY3JlYXRlKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RQaXBlbGluZSh7XG4gICAgICAgICAgICBpbjogYSxcbiAgICAgICAgICAgIG91dDogYixcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUGlwZWxpbmUsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBab2RSZWFkb25seSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZShpbnB1dCk7XG4gICAgICAgIGNvbnN0IGZyZWV6ZSA9IChkYXRhKSA9PiB7XG4gICAgICAgICAgICBpZiAoaXNWYWxpZChkYXRhKSkge1xuICAgICAgICAgICAgICAgIGRhdGEudmFsdWUgPSBPYmplY3QuZnJlZXplKGRhdGEudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBpc0FzeW5jKHJlc3VsdCkgPyByZXN1bHQudGhlbigoZGF0YSkgPT4gZnJlZXplKGRhdGEpKSA6IGZyZWV6ZShyZXN1bHQpO1xuICAgIH1cbiAgICB1bndyYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlO1xuICAgIH1cbn1cblpvZFJlYWRvbmx5LmNyZWF0ZSA9ICh0eXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFJlYWRvbmx5KHtcbiAgICAgICAgaW5uZXJUeXBlOiB0eXBlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFJlYWRvbmx5LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgIHouY3VzdG9tICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuZnVuY3Rpb24gY2xlYW5QYXJhbXMocGFyYW1zLCBkYXRhKSB7XG4gICAgY29uc3QgcCA9IHR5cGVvZiBwYXJhbXMgPT09IFwiZnVuY3Rpb25cIiA/IHBhcmFtcyhkYXRhKSA6IHR5cGVvZiBwYXJhbXMgPT09IFwic3RyaW5nXCIgPyB7IG1lc3NhZ2U6IHBhcmFtcyB9IDogcGFyYW1zO1xuICAgIGNvbnN0IHAyID0gdHlwZW9mIHAgPT09IFwic3RyaW5nXCIgPyB7IG1lc3NhZ2U6IHAgfSA6IHA7XG4gICAgcmV0dXJuIHAyO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGN1c3RvbShjaGVjaywgX3BhcmFtcyA9IHt9LCBcbi8qKlxuICogQGRlcHJlY2F0ZWRcbiAqXG4gKiBQYXNzIGBmYXRhbGAgaW50byB0aGUgcGFyYW1zIG9iamVjdCBpbnN0ZWFkOlxuICpcbiAqIGBgYHRzXG4gKiB6LnN0cmluZygpLmN1c3RvbSgodmFsKSA9PiB2YWwubGVuZ3RoID4gNSwgeyBmYXRhbDogZmFsc2UgfSlcbiAqIGBgYFxuICpcbiAqL1xuZmF0YWwpIHtcbiAgICBpZiAoY2hlY2spXG4gICAgICAgIHJldHVybiBab2RBbnkuY3JlYXRlKCkuc3VwZXJSZWZpbmUoKGRhdGEsIGN0eCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IGNoZWNrKGRhdGEpO1xuICAgICAgICAgICAgaWYgKHIgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHIudGhlbigocikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IGNsZWFuUGFyYW1zKF9wYXJhbXMsIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgX2ZhdGFsID0gcGFyYW1zLmZhdGFsID8/IGZhdGFsID8/IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguYWRkSXNzdWUoeyBjb2RlOiBcImN1c3RvbVwiLCAuLi5wYXJhbXMsIGZhdGFsOiBfZmF0YWwgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IGNsZWFuUGFyYW1zKF9wYXJhbXMsIGRhdGEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IF9mYXRhbCA9IHBhcmFtcy5mYXRhbCA/PyBmYXRhbCA/PyB0cnVlO1xuICAgICAgICAgICAgICAgIGN0eC5hZGRJc3N1ZSh7IGNvZGU6IFwiY3VzdG9tXCIsIC4uLnBhcmFtcywgZmF0YWw6IF9mYXRhbCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSk7XG4gICAgcmV0dXJuIFpvZEFueS5jcmVhdGUoKTtcbn1cbmV4cG9ydCB7IFpvZFR5cGUgYXMgU2NoZW1hLCBab2RUeXBlIGFzIFpvZFNjaGVtYSB9O1xuZXhwb3J0IGNvbnN0IGxhdGUgPSB7XG4gICAgb2JqZWN0OiBab2RPYmplY3QubGF6eWNyZWF0ZSxcbn07XG5leHBvcnQgdmFyIFpvZEZpcnN0UGFydHlUeXBlS2luZDtcbihmdW5jdGlvbiAoWm9kRmlyc3RQYXJ0eVR5cGVLaW5kKSB7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kU3RyaW5nXCJdID0gXCJab2RTdHJpbmdcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2ROdW1iZXJcIl0gPSBcIlpvZE51bWJlclwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE5hTlwiXSA9IFwiWm9kTmFOXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kQmlnSW50XCJdID0gXCJab2RCaWdJbnRcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RCb29sZWFuXCJdID0gXCJab2RCb29sZWFuXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRGF0ZVwiXSA9IFwiWm9kRGF0ZVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFN5bWJvbFwiXSA9IFwiWm9kU3ltYm9sXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kVW5kZWZpbmVkXCJdID0gXCJab2RVbmRlZmluZWRcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2ROdWxsXCJdID0gXCJab2ROdWxsXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kQW55XCJdID0gXCJab2RBbnlcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RVbmtub3duXCJdID0gXCJab2RVbmtub3duXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTmV2ZXJcIl0gPSBcIlpvZE5ldmVyXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kVm9pZFwiXSA9IFwiWm9kVm9pZFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEFycmF5XCJdID0gXCJab2RBcnJheVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE9iamVjdFwiXSA9IFwiWm9kT2JqZWN0XCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kVW5pb25cIl0gPSBcIlpvZFVuaW9uXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRGlzY3JpbWluYXRlZFVuaW9uXCJdID0gXCJab2REaXNjcmltaW5hdGVkVW5pb25cIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RJbnRlcnNlY3Rpb25cIl0gPSBcIlpvZEludGVyc2VjdGlvblwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFR1cGxlXCJdID0gXCJab2RUdXBsZVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFJlY29yZFwiXSA9IFwiWm9kUmVjb3JkXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTWFwXCJdID0gXCJab2RNYXBcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RTZXRcIl0gPSBcIlpvZFNldFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEZ1bmN0aW9uXCJdID0gXCJab2RGdW5jdGlvblwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZExhenlcIl0gPSBcIlpvZExhenlcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RMaXRlcmFsXCJdID0gXCJab2RMaXRlcmFsXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRW51bVwiXSA9IFwiWm9kRW51bVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEVmZmVjdHNcIl0gPSBcIlpvZEVmZmVjdHNcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2ROYXRpdmVFbnVtXCJdID0gXCJab2ROYXRpdmVFbnVtXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kT3B0aW9uYWxcIl0gPSBcIlpvZE9wdGlvbmFsXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTnVsbGFibGVcIl0gPSBcIlpvZE51bGxhYmxlXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRGVmYXVsdFwiXSA9IFwiWm9kRGVmYXVsdFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZENhdGNoXCJdID0gXCJab2RDYXRjaFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFByb21pc2VcIl0gPSBcIlpvZFByb21pc2VcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RCcmFuZGVkXCJdID0gXCJab2RCcmFuZGVkXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kUGlwZWxpbmVcIl0gPSBcIlpvZFBpcGVsaW5lXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kUmVhZG9ubHlcIl0gPSBcIlpvZFJlYWRvbmx5XCI7XG59KShab2RGaXJzdFBhcnR5VHlwZUtpbmQgfHwgKFpvZEZpcnN0UGFydHlUeXBlS2luZCA9IHt9KSk7XG4vLyByZXF1aXJlcyBUUyA0LjQrXG5jbGFzcyBDbGFzcyB7XG4gICAgY29uc3RydWN0b3IoLi4uXykgeyB9XG59XG5jb25zdCBpbnN0YW5jZU9mVHlwZSA9IChcbi8vIGNvbnN0IGluc3RhbmNlT2ZUeXBlID0gPFQgZXh0ZW5kcyBuZXcgKC4uLmFyZ3M6IGFueVtdKSA9PiBhbnk+KFxuY2xzLCBwYXJhbXMgPSB7XG4gICAgbWVzc2FnZTogYElucHV0IG5vdCBpbnN0YW5jZSBvZiAke2Nscy5uYW1lfWAsXG59KSA9PiBjdXN0b20oKGRhdGEpID0+IGRhdGEgaW5zdGFuY2VvZiBjbHMsIHBhcmFtcyk7XG5jb25zdCBzdHJpbmdUeXBlID0gWm9kU3RyaW5nLmNyZWF0ZTtcbmNvbnN0IG51bWJlclR5cGUgPSBab2ROdW1iZXIuY3JlYXRlO1xuY29uc3QgbmFuVHlwZSA9IFpvZE5hTi5jcmVhdGU7XG5jb25zdCBiaWdJbnRUeXBlID0gWm9kQmlnSW50LmNyZWF0ZTtcbmNvbnN0IGJvb2xlYW5UeXBlID0gWm9kQm9vbGVhbi5jcmVhdGU7XG5jb25zdCBkYXRlVHlwZSA9IFpvZERhdGUuY3JlYXRlO1xuY29uc3Qgc3ltYm9sVHlwZSA9IFpvZFN5bWJvbC5jcmVhdGU7XG5jb25zdCB1bmRlZmluZWRUeXBlID0gWm9kVW5kZWZpbmVkLmNyZWF0ZTtcbmNvbnN0IG51bGxUeXBlID0gWm9kTnVsbC5jcmVhdGU7XG5jb25zdCBhbnlUeXBlID0gWm9kQW55LmNyZWF0ZTtcbmNvbnN0IHVua25vd25UeXBlID0gWm9kVW5rbm93bi5jcmVhdGU7XG5jb25zdCBuZXZlclR5cGUgPSBab2ROZXZlci5jcmVhdGU7XG5jb25zdCB2b2lkVHlwZSA9IFpvZFZvaWQuY3JlYXRlO1xuY29uc3QgYXJyYXlUeXBlID0gWm9kQXJyYXkuY3JlYXRlO1xuY29uc3Qgb2JqZWN0VHlwZSA9IFpvZE9iamVjdC5jcmVhdGU7XG5jb25zdCBzdHJpY3RPYmplY3RUeXBlID0gWm9kT2JqZWN0LnN0cmljdENyZWF0ZTtcbmNvbnN0IHVuaW9uVHlwZSA9IFpvZFVuaW9uLmNyZWF0ZTtcbmNvbnN0IGRpc2NyaW1pbmF0ZWRVbmlvblR5cGUgPSBab2REaXNjcmltaW5hdGVkVW5pb24uY3JlYXRlO1xuY29uc3QgaW50ZXJzZWN0aW9uVHlwZSA9IFpvZEludGVyc2VjdGlvbi5jcmVhdGU7XG5jb25zdCB0dXBsZVR5cGUgPSBab2RUdXBsZS5jcmVhdGU7XG5jb25zdCByZWNvcmRUeXBlID0gWm9kUmVjb3JkLmNyZWF0ZTtcbmNvbnN0IG1hcFR5cGUgPSBab2RNYXAuY3JlYXRlO1xuY29uc3Qgc2V0VHlwZSA9IFpvZFNldC5jcmVhdGU7XG5jb25zdCBmdW5jdGlvblR5cGUgPSBab2RGdW5jdGlvbi5jcmVhdGU7XG5jb25zdCBsYXp5VHlwZSA9IFpvZExhenkuY3JlYXRlO1xuY29uc3QgbGl0ZXJhbFR5cGUgPSBab2RMaXRlcmFsLmNyZWF0ZTtcbmNvbnN0IGVudW1UeXBlID0gWm9kRW51bS5jcmVhdGU7XG5jb25zdCBuYXRpdmVFbnVtVHlwZSA9IFpvZE5hdGl2ZUVudW0uY3JlYXRlO1xuY29uc3QgcHJvbWlzZVR5cGUgPSBab2RQcm9taXNlLmNyZWF0ZTtcbmNvbnN0IGVmZmVjdHNUeXBlID0gWm9kRWZmZWN0cy5jcmVhdGU7XG5jb25zdCBvcHRpb25hbFR5cGUgPSBab2RPcHRpb25hbC5jcmVhdGU7XG5jb25zdCBudWxsYWJsZVR5cGUgPSBab2ROdWxsYWJsZS5jcmVhdGU7XG5jb25zdCBwcmVwcm9jZXNzVHlwZSA9IFpvZEVmZmVjdHMuY3JlYXRlV2l0aFByZXByb2Nlc3M7XG5jb25zdCBwaXBlbGluZVR5cGUgPSBab2RQaXBlbGluZS5jcmVhdGU7XG5jb25zdCBvc3RyaW5nID0gKCkgPT4gc3RyaW5nVHlwZSgpLm9wdGlvbmFsKCk7XG5jb25zdCBvbnVtYmVyID0gKCkgPT4gbnVtYmVyVHlwZSgpLm9wdGlvbmFsKCk7XG5jb25zdCBvYm9vbGVhbiA9ICgpID0+IGJvb2xlYW5UeXBlKCkub3B0aW9uYWwoKTtcbmV4cG9ydCBjb25zdCBjb2VyY2UgPSB7XG4gICAgc3RyaW5nOiAoKGFyZykgPT4gWm9kU3RyaW5nLmNyZWF0ZSh7IC4uLmFyZywgY29lcmNlOiB0cnVlIH0pKSxcbiAgICBudW1iZXI6ICgoYXJnKSA9PiBab2ROdW1iZXIuY3JlYXRlKHsgLi4uYXJnLCBjb2VyY2U6IHRydWUgfSkpLFxuICAgIGJvb2xlYW46ICgoYXJnKSA9PiBab2RCb29sZWFuLmNyZWF0ZSh7XG4gICAgICAgIC4uLmFyZyxcbiAgICAgICAgY29lcmNlOiB0cnVlLFxuICAgIH0pKSxcbiAgICBiaWdpbnQ6ICgoYXJnKSA9PiBab2RCaWdJbnQuY3JlYXRlKHsgLi4uYXJnLCBjb2VyY2U6IHRydWUgfSkpLFxuICAgIGRhdGU6ICgoYXJnKSA9PiBab2REYXRlLmNyZWF0ZSh7IC4uLmFyZywgY29lcmNlOiB0cnVlIH0pKSxcbn07XG5leHBvcnQgeyBhbnlUeXBlIGFzIGFueSwgYXJyYXlUeXBlIGFzIGFycmF5LCBiaWdJbnRUeXBlIGFzIGJpZ2ludCwgYm9vbGVhblR5cGUgYXMgYm9vbGVhbiwgZGF0ZVR5cGUgYXMgZGF0ZSwgZGlzY3JpbWluYXRlZFVuaW9uVHlwZSBhcyBkaXNjcmltaW5hdGVkVW5pb24sIGVmZmVjdHNUeXBlIGFzIGVmZmVjdCwgZW51bVR5cGUgYXMgZW51bSwgZnVuY3Rpb25UeXBlIGFzIGZ1bmN0aW9uLCBpbnN0YW5jZU9mVHlwZSBhcyBpbnN0YW5jZW9mLCBpbnRlcnNlY3Rpb25UeXBlIGFzIGludGVyc2VjdGlvbiwgbGF6eVR5cGUgYXMgbGF6eSwgbGl0ZXJhbFR5cGUgYXMgbGl0ZXJhbCwgbWFwVHlwZSBhcyBtYXAsIG5hblR5cGUgYXMgbmFuLCBuYXRpdmVFbnVtVHlwZSBhcyBuYXRpdmVFbnVtLCBuZXZlclR5cGUgYXMgbmV2ZXIsIG51bGxUeXBlIGFzIG51bGwsIG51bGxhYmxlVHlwZSBhcyBudWxsYWJsZSwgbnVtYmVyVHlwZSBhcyBudW1iZXIsIG9iamVjdFR5cGUgYXMgb2JqZWN0LCBvYm9vbGVhbiwgb251bWJlciwgb3B0aW9uYWxUeXBlIGFzIG9wdGlvbmFsLCBvc3RyaW5nLCBwaXBlbGluZVR5cGUgYXMgcGlwZWxpbmUsIHByZXByb2Nlc3NUeXBlIGFzIHByZXByb2Nlc3MsIHByb21pc2VUeXBlIGFzIHByb21pc2UsIHJlY29yZFR5cGUgYXMgcmVjb3JkLCBzZXRUeXBlIGFzIHNldCwgc3RyaWN0T2JqZWN0VHlwZSBhcyBzdHJpY3RPYmplY3QsIHN0cmluZ1R5cGUgYXMgc3RyaW5nLCBzeW1ib2xUeXBlIGFzIHN5bWJvbCwgZWZmZWN0c1R5cGUgYXMgdHJhbnNmb3JtZXIsIHR1cGxlVHlwZSBhcyB0dXBsZSwgdW5kZWZpbmVkVHlwZSBhcyB1bmRlZmluZWQsIHVuaW9uVHlwZSBhcyB1bmlvbiwgdW5rbm93blR5cGUgYXMgdW5rbm93biwgdm9pZFR5cGUgYXMgdm9pZCwgfTtcbmV4cG9ydCBjb25zdCBORVZFUiA9IElOVkFMSUQ7XG4iLCJpbXBvcnQgeyB0b29sIH0gZnJvbSBcIi4vdG9vbC5tanNcIjtcbmltcG9ydCB7IFVzZXJFcnJvciB9IGZyb20gXCIuL2Vycm9ycy5tanNcIjtcbmltcG9ydCB7IE1DUFNlcnZlclN0ZGlvIGFzIFVuZGVybHlpbmdNQ1BTZXJ2ZXJTdGRpbywgTUNQU2VydmVyU3RyZWFtYWJsZUh0dHAgYXMgVW5kZXJseWluZ01DUFNlcnZlclN0cmVhbWFibGVIdHRwLCBNQ1BTZXJ2ZXJTU0UgYXMgVW5kZXJseWluZ01DUFNlcnZlclNTRSwgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlL19zaGltcyc7XG5pbXBvcnQgeyBnZXRDdXJyZW50U3BhbiwgZ2V0Q3VycmVudFRyYWNlLCB3aXRoTUNQTGlzdFRvb2xzU3BhbiwgfSBmcm9tIFwiLi90cmFjaW5nL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgbG9nZ2VyIGFzIGdsb2JhbExvZ2dlciwgZ2V0TG9nZ2VyIH0gZnJvbSBcIi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IGRlYnVnIGZyb20gJ2RlYnVnJztcbmltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfU1RESU9fTUNQX0NMSUVOVF9MT0dHRVJfTkFNRSA9ICdvcGVuYWktYWdlbnRzOnN0ZGlvLW1jcC1jbGllbnQnO1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfU1RSRUFNQUJMRV9IVFRQX01DUF9DTElFTlRfTE9HR0VSX05BTUUgPSAnb3BlbmFpLWFnZW50czpzdHJlYW1hYmxlLWh0dHAtbWNwLWNsaWVudCc7XG5leHBvcnQgY29uc3QgREVGQVVMVF9TU0VfTUNQX0NMSUVOVF9MT0dHRVJfTkFNRSA9ICdvcGVuYWktYWdlbnRzOnNzZS1tY3AtY2xpZW50JztcbmV4cG9ydCBjbGFzcyBCYXNlTUNQU2VydmVyU3RkaW8ge1xuICAgIGNhY2hlVG9vbHNMaXN0O1xuICAgIF9jYWNoZWRUb29scyA9IHVuZGVmaW5lZDtcbiAgICB0b29sRmlsdGVyO1xuICAgIGxvZ2dlcjtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyID1cbiAgICAgICAgICAgIG9wdGlvbnMubG9nZ2VyID8/IGdldExvZ2dlcihERUZBVUxUX1NURElPX01DUF9DTElFTlRfTE9HR0VSX05BTUUpO1xuICAgICAgICB0aGlzLmNhY2hlVG9vbHNMaXN0ID0gb3B0aW9ucy5jYWNoZVRvb2xzTGlzdCA/PyBmYWxzZTtcbiAgICAgICAgdGhpcy50b29sRmlsdGVyID0gb3B0aW9ucy50b29sRmlsdGVyO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb2dzIGEgZGVidWcgbWVzc2FnZSB3aGVuIGRlYnVnIGxvZ2dpbmcgaXMgZW5hYmxlZC5cbiAgICAgKiBAcGFyYW0gYnVpbGRNZXNzYWdlIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBtZXNzYWdlIHRvIGxvZy5cbiAgICAgKi9cbiAgICBkZWJ1Z0xvZyhidWlsZE1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKGRlYnVnLmVuYWJsZWQodGhpcy5sb2dnZXIubmFtZXNwYWNlKSkge1xuICAgICAgICAgICAgLy8gb25seSB3aGVuIHRoaXMgaXMgdHJ1ZSwgdGhlIGZ1bmN0aW9uIHRvIGJ1aWxkIHRoZSBzdHJpbmcgaXMgY2FsbGVkXG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhidWlsZE1lc3NhZ2UoKSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQmFzZU1DUFNlcnZlclN0cmVhbWFibGVIdHRwIHtcbiAgICBjYWNoZVRvb2xzTGlzdDtcbiAgICBfY2FjaGVkVG9vbHMgPSB1bmRlZmluZWQ7XG4gICAgdG9vbEZpbHRlcjtcbiAgICBsb2dnZXI7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICB0aGlzLmxvZ2dlciA9XG4gICAgICAgICAgICBvcHRpb25zLmxvZ2dlciA/P1xuICAgICAgICAgICAgICAgIGdldExvZ2dlcihERUZBVUxUX1NUUkVBTUFCTEVfSFRUUF9NQ1BfQ0xJRU5UX0xPR0dFUl9OQU1FKTtcbiAgICAgICAgdGhpcy5jYWNoZVRvb2xzTGlzdCA9IG9wdGlvbnMuY2FjaGVUb29sc0xpc3QgPz8gZmFsc2U7XG4gICAgICAgIHRoaXMudG9vbEZpbHRlciA9IG9wdGlvbnMudG9vbEZpbHRlcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9ncyBhIGRlYnVnIG1lc3NhZ2Ugd2hlbiBkZWJ1ZyBsb2dnaW5nIGlzIGVuYWJsZWQuXG4gICAgICogQHBhcmFtIGJ1aWxkTWVzc2FnZSBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgbWVzc2FnZSB0byBsb2cuXG4gICAgICovXG4gICAgZGVidWdMb2coYnVpbGRNZXNzYWdlKSB7XG4gICAgICAgIGlmIChkZWJ1Zy5lbmFibGVkKHRoaXMubG9nZ2VyLm5hbWVzcGFjZSkpIHtcbiAgICAgICAgICAgIC8vIG9ubHkgd2hlbiB0aGlzIGlzIHRydWUsIHRoZSBmdW5jdGlvbiB0byBidWlsZCB0aGUgc3RyaW5nIGlzIGNhbGxlZFxuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZGVidWcoYnVpbGRNZXNzYWdlKCkpO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEJhc2VNQ1BTZXJ2ZXJTU0Uge1xuICAgIGNhY2hlVG9vbHNMaXN0O1xuICAgIF9jYWNoZWRUb29scyA9IHVuZGVmaW5lZDtcbiAgICB0b29sRmlsdGVyO1xuICAgIGxvZ2dlcjtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyID1cbiAgICAgICAgICAgIG9wdGlvbnMubG9nZ2VyID8/IGdldExvZ2dlcihERUZBVUxUX1NTRV9NQ1BfQ0xJRU5UX0xPR0dFUl9OQU1FKTtcbiAgICAgICAgdGhpcy5jYWNoZVRvb2xzTGlzdCA9IG9wdGlvbnMuY2FjaGVUb29sc0xpc3QgPz8gZmFsc2U7XG4gICAgICAgIHRoaXMudG9vbEZpbHRlciA9IG9wdGlvbnMudG9vbEZpbHRlcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9ncyBhIGRlYnVnIG1lc3NhZ2Ugd2hlbiBkZWJ1ZyBsb2dnaW5nIGlzIGVuYWJsZWQuXG4gICAgICogQHBhcmFtIGJ1aWxkTWVzc2FnZSBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgbWVzc2FnZSB0byBsb2cuXG4gICAgICovXG4gICAgZGVidWdMb2coYnVpbGRNZXNzYWdlKSB7XG4gICAgICAgIGlmIChkZWJ1Zy5lbmFibGVkKHRoaXMubG9nZ2VyLm5hbWVzcGFjZSkpIHtcbiAgICAgICAgICAgIC8vIG9ubHkgd2hlbiB0aGlzIGlzIHRydWUsIHRoZSBmdW5jdGlvbiB0byBidWlsZCB0aGUgc3RyaW5nIGlzIGNhbGxlZFxuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZGVidWcoYnVpbGRNZXNzYWdlKCkpO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBNaW5pbXVtIE1DUCB0b29sIGRhdGEgZGVmaW5pdGlvbi5cbiAqIFRoaXMgdHlwZSBkZWZpbml0aW9uIGRvZXMgbm90IGludGVuZCB0byBjb3ZlciBhbGwgcG9zc2libGUgcHJvcGVydGllcy5cbiAqIEl0IHN1cHBvcnRzIHRoZSBwcm9wZXJ0aWVzIHRoYXQgYXJlIHVzZWQgaW4gdGhpcyBTREsuXG4gKi9cbmV4cG9ydCBjb25zdCBNQ1BUb29sID0gei5vYmplY3Qoe1xuICAgIG5hbWU6IHouc3RyaW5nKCksXG4gICAgZGVzY3JpcHRpb246IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBpbnB1dFNjaGVtYTogei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ29iamVjdCcpLFxuICAgICAgICBwcm9wZXJ0aWVzOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKSxcbiAgICAgICAgcmVxdWlyZWQ6IHouYXJyYXkoei5zdHJpbmcoKSksXG4gICAgICAgIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiB6LmJvb2xlYW4oKSxcbiAgICB9KSxcbn0pO1xuLyoqXG4gKiBQdWJsaWMgaW50ZXJmYWNlIG9mIGFuIE1DUCBzZXJ2ZXIgdGhhdCBwcm92aWRlcyB0b29scy5cbiAqIFlvdSBjYW4gdXNlIHRoaXMgY2xhc3MgdG8gcGFzcyBNQ1Agc2VydmVyIHNldHRpbmdzIHRvIHlvdXIgYWdlbnQuXG4gKi9cbmV4cG9ydCBjbGFzcyBNQ1BTZXJ2ZXJTdGRpbyBleHRlbmRzIEJhc2VNQ1BTZXJ2ZXJTdGRpbyB7XG4gICAgdW5kZXJseWluZztcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKG9wdGlvbnMpO1xuICAgICAgICB0aGlzLnVuZGVybHlpbmcgPSBuZXcgVW5kZXJseWluZ01DUFNlcnZlclN0ZGlvKG9wdGlvbnMpO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5uYW1lO1xuICAgIH1cbiAgICBjb25uZWN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmRlcmx5aW5nLmNvbm5lY3QoKTtcbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuZGVybHlpbmcuY2xvc2UoKTtcbiAgICB9XG4gICAgYXN5bmMgbGlzdFRvb2xzKCkge1xuICAgICAgICBpZiAodGhpcy5jYWNoZVRvb2xzTGlzdCAmJiB0aGlzLl9jYWNoZWRUb29scykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZFRvb2xzO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRvb2xzID0gYXdhaXQgdGhpcy51bmRlcmx5aW5nLmxpc3RUb29scygpO1xuICAgICAgICBpZiAodGhpcy5jYWNoZVRvb2xzTGlzdCkge1xuICAgICAgICAgICAgdGhpcy5fY2FjaGVkVG9vbHMgPSB0b29scztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdG9vbHM7XG4gICAgfVxuICAgIGNhbGxUb29sKHRvb2xOYW1lLCBhcmdzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuZGVybHlpbmcuY2FsbFRvb2wodG9vbE5hbWUsIGFyZ3MpO1xuICAgIH1cbiAgICBpbnZhbGlkYXRlVG9vbHNDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5pbnZhbGlkYXRlVG9vbHNDYWNoZSgpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBNQ1BTZXJ2ZXJTdHJlYW1hYmxlSHR0cCBleHRlbmRzIEJhc2VNQ1BTZXJ2ZXJTdHJlYW1hYmxlSHR0cCB7XG4gICAgdW5kZXJseWluZztcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKG9wdGlvbnMpO1xuICAgICAgICB0aGlzLnVuZGVybHlpbmcgPSBuZXcgVW5kZXJseWluZ01DUFNlcnZlclN0cmVhbWFibGVIdHRwKG9wdGlvbnMpO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5uYW1lO1xuICAgIH1cbiAgICBjb25uZWN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmRlcmx5aW5nLmNvbm5lY3QoKTtcbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuZGVybHlpbmcuY2xvc2UoKTtcbiAgICB9XG4gICAgYXN5bmMgbGlzdFRvb2xzKCkge1xuICAgICAgICBpZiAodGhpcy5jYWNoZVRvb2xzTGlzdCAmJiB0aGlzLl9jYWNoZWRUb29scykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZFRvb2xzO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRvb2xzID0gYXdhaXQgdGhpcy51bmRlcmx5aW5nLmxpc3RUb29scygpO1xuICAgICAgICBpZiAodGhpcy5jYWNoZVRvb2xzTGlzdCkge1xuICAgICAgICAgICAgdGhpcy5fY2FjaGVkVG9vbHMgPSB0b29scztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdG9vbHM7XG4gICAgfVxuICAgIGNhbGxUb29sKHRvb2xOYW1lLCBhcmdzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuZGVybHlpbmcuY2FsbFRvb2wodG9vbE5hbWUsIGFyZ3MpO1xuICAgIH1cbiAgICBpbnZhbGlkYXRlVG9vbHNDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5pbnZhbGlkYXRlVG9vbHNDYWNoZSgpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBNQ1BTZXJ2ZXJTU0UgZXh0ZW5kcyBCYXNlTUNQU2VydmVyU1NFIHtcbiAgICB1bmRlcmx5aW5nO1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XG4gICAgICAgIHRoaXMudW5kZXJseWluZyA9IG5ldyBVbmRlcmx5aW5nTUNQU2VydmVyU1NFKG9wdGlvbnMpO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5uYW1lO1xuICAgIH1cbiAgICBjb25uZWN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmRlcmx5aW5nLmNvbm5lY3QoKTtcbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuZGVybHlpbmcuY2xvc2UoKTtcbiAgICB9XG4gICAgYXN5bmMgbGlzdFRvb2xzKCkge1xuICAgICAgICBpZiAodGhpcy5jYWNoZVRvb2xzTGlzdCAmJiB0aGlzLl9jYWNoZWRUb29scykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZFRvb2xzO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRvb2xzID0gYXdhaXQgdGhpcy51bmRlcmx5aW5nLmxpc3RUb29scygpO1xuICAgICAgICBpZiAodGhpcy5jYWNoZVRvb2xzTGlzdCkge1xuICAgICAgICAgICAgdGhpcy5fY2FjaGVkVG9vbHMgPSB0b29scztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdG9vbHM7XG4gICAgfVxuICAgIGNhbGxUb29sKHRvb2xOYW1lLCBhcmdzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuZGVybHlpbmcuY2FsbFRvb2wodG9vbE5hbWUsIGFyZ3MpO1xuICAgIH1cbiAgICBpbnZhbGlkYXRlVG9vbHNDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5pbnZhbGlkYXRlVG9vbHNDYWNoZSgpO1xuICAgIH1cbn1cbi8qKlxuICogRmV0Y2hlcyBhbmQgZmxhdHRlbnMgYWxsIHRvb2xzIGZyb20gbXVsdGlwbGUgTUNQIHNlcnZlcnMuXG4gKiBMb2dzIGFuZCBza2lwcyBhbnkgc2VydmVycyB0aGF0IGZhaWwgdG8gcmVzcG9uZC5cbiAqL1xuY29uc3QgX2NhY2hlZFRvb2xzID0ge307XG5jb25zdCBfY2FjaGVkVG9vbEtleXNCeVNlcnZlciA9IHt9O1xuLyoqXG4gKiBSZW1vdmUgY2FjaGVkIHRvb2xzIGZvciB0aGUgZ2l2ZW4gc2VydmVyIHNvIHRoZSBuZXh0IGxvb2t1cCBmZXRjaGVzIGZyZXNoIGRhdGEuXG4gKlxuICogQHBhcmFtIHNlcnZlck5hbWUgLSBOYW1lIG9mIHRoZSBNQ1Agc2VydmVyIHdob3NlIGNhY2hlIHNob3VsZCBiZSBjbGVhcmVkLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW52YWxpZGF0ZVNlcnZlclRvb2xzQ2FjaGUoc2VydmVyTmFtZSkge1xuICAgIGNvbnN0IGNhY2hlZEtleXMgPSBfY2FjaGVkVG9vbEtleXNCeVNlcnZlcltzZXJ2ZXJOYW1lXTtcbiAgICBpZiAoY2FjaGVkS2V5cykge1xuICAgICAgICBmb3IgKGNvbnN0IGNhY2hlS2V5IG9mIGNhY2hlZEtleXMpIHtcbiAgICAgICAgICAgIGRlbGV0ZSBfY2FjaGVkVG9vbHNbY2FjaGVLZXldO1xuICAgICAgICB9XG4gICAgICAgIGRlbGV0ZSBfY2FjaGVkVG9vbEtleXNCeVNlcnZlcltzZXJ2ZXJOYW1lXTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkZWxldGUgX2NhY2hlZFRvb2xzW3NlcnZlck5hbWVdO1xuICAgIGZvciAoY29uc3QgY2FjaGVLZXkgb2YgT2JqZWN0LmtleXMoX2NhY2hlZFRvb2xzKSkge1xuICAgICAgICBpZiAoY2FjaGVLZXkuc3RhcnRzV2l0aChgJHtzZXJ2ZXJOYW1lfTpgKSkge1xuICAgICAgICAgICAgZGVsZXRlIF9jYWNoZWRUb29sc1tjYWNoZUtleV07XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIERlZmF1bHQgY2FjaGUga2V5IGdlbmVyYXRvciBmb3IgTUNQIHRvb2xzLlxuICogVXNlcyBzZXJ2ZXIgbmFtZSwgb3Igc2VydmVyK2FnZW50IGlmIHVzaW5nIGNhbGxhYmxlIGZpbHRlci5cbiAqL1xuZXhwb3J0IGNvbnN0IGRlZmF1bHRNQ1BUb29sQ2FjaGVLZXkgPSAoeyBzZXJ2ZXIsIGFnZW50LCB9KSA9PiB7XG4gICAgaWYgKHNlcnZlci50b29sRmlsdGVyICYmIHR5cGVvZiBzZXJ2ZXIudG9vbEZpbHRlciA9PT0gJ2Z1bmN0aW9uJyAmJiBhZ2VudCkge1xuICAgICAgICByZXR1cm4gYCR7c2VydmVyLm5hbWV9OiR7YWdlbnQubmFtZX1gO1xuICAgIH1cbiAgICByZXR1cm4gc2VydmVyLm5hbWU7XG59O1xuLyoqXG4gKiBGZXRjaGVzIGFsbCBmdW5jdGlvbiB0b29scyBmcm9tIGEgc2luZ2xlIE1DUCBzZXJ2ZXIuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGdldEZ1bmN0aW9uVG9vbHNGcm9tU2VydmVyKHsgc2VydmVyLCBjb252ZXJ0U2NoZW1hc1RvU3RyaWN0LCBydW5Db250ZXh0LCBhZ2VudCwgZ2VuZXJhdGVNQ1BUb29sQ2FjaGVLZXksIH0pIHtcbiAgICBjb25zdCBjYWNoZUtleSA9IChnZW5lcmF0ZU1DUFRvb2xDYWNoZUtleSB8fCBkZWZhdWx0TUNQVG9vbENhY2hlS2V5KSh7XG4gICAgICAgIHNlcnZlcixcbiAgICAgICAgYWdlbnQsXG4gICAgICAgIHJ1bkNvbnRleHQsXG4gICAgfSk7XG4gICAgLy8gVXNlIGNhY2hlIGtleSBnZW5lcmF0b3IgaW5qZWN0ZWQgZnJvbSB0aGUgb3V0c2lkZSwgb3IgdGhlIGRlZmF1bHQgaWYgYWJzZW50LlxuICAgIGlmIChzZXJ2ZXIuY2FjaGVUb29sc0xpc3QgJiYgX2NhY2hlZFRvb2xzW2NhY2hlS2V5XSkge1xuICAgICAgICByZXR1cm4gX2NhY2hlZFRvb2xzW2NhY2hlS2V5XS5tYXAoKHQpID0+IG1jcFRvRnVuY3Rpb25Ub29sKHQsIHNlcnZlciwgY29udmVydFNjaGVtYXNUb1N0cmljdCkpO1xuICAgIH1cbiAgICBjb25zdCBsaXN0VG9vbHNGb3JTZXJ2ZXIgPSBhc3luYyAoc3BhbikgPT4ge1xuICAgICAgICBjb25zdCBmZXRjaGVkTWNwVG9vbHMgPSBhd2FpdCBzZXJ2ZXIubGlzdFRvb2xzKCk7XG4gICAgICAgIGxldCBtY3BUb29scyA9IGZldGNoZWRNY3BUb29scztcbiAgICAgICAgaWYgKHJ1bkNvbnRleHQgJiYgYWdlbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRleHQgPSB7IHJ1bkNvbnRleHQsIGFnZW50LCBzZXJ2ZXJOYW1lOiBzZXJ2ZXIubmFtZSB9O1xuICAgICAgICAgICAgY29uc3QgZmlsdGVyZWRUb29scyA9IFtdO1xuICAgICAgICAgICAgZm9yIChjb25zdCB0b29sIG9mIGZldGNoZWRNY3BUb29scykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpbHRlciA9IHNlcnZlci50b29sRmlsdGVyO1xuICAgICAgICAgICAgICAgIGlmIChmaWx0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBmaWx0ZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkID0gYXdhaXQgZmlsdGVyKGNvbnRleHQsIHRvb2wpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmaWx0ZXJlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdsb2JhbExvZ2dlci5kZWJ1ZyhgTUNQIFRvb2wgKHNlcnZlcjogJHtzZXJ2ZXIubmFtZX0sIHRvb2w6ICR7dG9vbC5uYW1lfSkgaXMgYmxvY2tlZCBieSB0aGUgY2FsbGFibGUgZmlsdGVyLmApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWxsb3dlZFRvb2xOYW1lcyA9IGZpbHRlci5hbGxvd2VkVG9vbE5hbWVzID8/IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvY2tlZFRvb2xOYW1lcyA9IGZpbHRlci5ibG9ja2VkVG9vbE5hbWVzID8/IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFsbG93ZWRUb29sTmFtZXMubGVuZ3RoID4gMCB8fCBibG9ja2VkVG9vbE5hbWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbGxvd2VkID0gYWxsb3dlZFRvb2xOYW1lcy5sZW5ndGggPiAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYWxsb3dlZFRvb2xOYW1lcy5pbmNsdWRlcyh0b29sLm5hbWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBibG9ja2VkID0gYmxvY2tlZFRvb2xOYW1lcy5sZW5ndGggPiAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYmxvY2tlZFRvb2xOYW1lcy5pbmNsdWRlcyh0b29sLm5hbWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFhbGxvd2VkIHx8IGJsb2NrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJsb2NrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdsb2JhbExvZ2dlci5kZWJ1ZyhgTUNQIFRvb2wgKHNlcnZlcjogJHtzZXJ2ZXIubmFtZX0sIHRvb2w6ICR7dG9vbC5uYW1lfSkgaXMgYmxvY2tlZCBieSB0aGUgc3RhdGljIGZpbHRlci5gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICghYWxsb3dlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2xvYmFsTG9nZ2VyLmRlYnVnKGBNQ1AgVG9vbCAoc2VydmVyOiAke3NlcnZlci5uYW1lfSwgdG9vbDogJHt0b29sLm5hbWV9KSBpcyBub3QgYWxsb3dlZCBieSB0aGUgc3RhdGljIGZpbHRlci5gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZmlsdGVyZWRUb29scy5wdXNoKHRvb2wpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWNwVG9vbHMgPSBmaWx0ZXJlZFRvb2xzO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzcGFuKSB7XG4gICAgICAgICAgICBzcGFuLnNwYW5EYXRhLnJlc3VsdCA9IG1jcFRvb2xzLm1hcCgodCkgPT4gdC5uYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0b29scyA9IG1jcFRvb2xzLm1hcCgodCkgPT4gbWNwVG9GdW5jdGlvblRvb2wodCwgc2VydmVyLCBjb252ZXJ0U2NoZW1hc1RvU3RyaWN0KSk7XG4gICAgICAgIC8vIENhY2hlIHN0b3JlXG4gICAgICAgIGlmIChzZXJ2ZXIuY2FjaGVUb29sc0xpc3QpIHtcbiAgICAgICAgICAgIF9jYWNoZWRUb29sc1tjYWNoZUtleV0gPSBtY3BUb29scztcbiAgICAgICAgICAgIGlmICghX2NhY2hlZFRvb2xLZXlzQnlTZXJ2ZXJbc2VydmVyLm5hbWVdKSB7XG4gICAgICAgICAgICAgICAgX2NhY2hlZFRvb2xLZXlzQnlTZXJ2ZXJbc2VydmVyLm5hbWVdID0gbmV3IFNldCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX2NhY2hlZFRvb2xLZXlzQnlTZXJ2ZXJbc2VydmVyLm5hbWVdLmFkZChjYWNoZUtleSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRvb2xzO1xuICAgIH07XG4gICAgaWYgKCFnZXRDdXJyZW50VHJhY2UoKSkge1xuICAgICAgICByZXR1cm4gbGlzdFRvb2xzRm9yU2VydmVyKCk7XG4gICAgfVxuICAgIHJldHVybiB3aXRoTUNQTGlzdFRvb2xzU3BhbihsaXN0VG9vbHNGb3JTZXJ2ZXIsIHtcbiAgICAgICAgZGF0YTogeyBzZXJ2ZXI6IHNlcnZlci5uYW1lIH0sXG4gICAgfSk7XG59XG4vKipcbiAqIFJldHVybnMgYWxsIE1DUCB0b29scyBmcm9tIHRoZSBwcm92aWRlZCBzZXJ2ZXJzLCB1c2luZyB0aGUgZnVuY3Rpb24gdG9vbCBjb252ZXJzaW9uLlxuICogSWYgcnVuQ29udGV4dCBhbmQgYWdlbnQgYXJlIHByb3ZpZGVkLCBjYWxsYWJsZSB0b29sIGZpbHRlcnMgd2lsbCBiZSBhcHBsaWVkLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWxsTWNwVG9vbHMobWNwU2VydmVyc09yT3B0cywgcnVuQ29udGV4dCwgYWdlbnQsIGNvbnZlcnRTY2hlbWFzVG9TdHJpY3QgPSBmYWxzZSkge1xuICAgIGNvbnN0IG9wdHMgPSBBcnJheS5pc0FycmF5KG1jcFNlcnZlcnNPck9wdHMpXG4gICAgICAgID8ge1xuICAgICAgICAgICAgbWNwU2VydmVyczogbWNwU2VydmVyc09yT3B0cyxcbiAgICAgICAgICAgIHJ1bkNvbnRleHQsXG4gICAgICAgICAgICBhZ2VudCxcbiAgICAgICAgICAgIGNvbnZlcnRTY2hlbWFzVG9TdHJpY3QsXG4gICAgICAgIH1cbiAgICAgICAgOiBtY3BTZXJ2ZXJzT3JPcHRzO1xuICAgIGNvbnN0IHsgbWNwU2VydmVycywgY29udmVydFNjaGVtYXNUb1N0cmljdDogY29udmVydFNjaGVtYXNUb1N0cmljdEZyb21PcHRzID0gZmFsc2UsIHJ1bkNvbnRleHQ6IHJ1bkNvbnRleHRGcm9tT3B0cywgYWdlbnQ6IGFnZW50RnJvbU9wdHMsIGdlbmVyYXRlTUNQVG9vbENhY2hlS2V5LCB9ID0gb3B0cztcbiAgICBjb25zdCBhbGxUb29scyA9IFtdO1xuICAgIGNvbnN0IHRvb2xOYW1lcyA9IG5ldyBTZXQoKTtcbiAgICBmb3IgKGNvbnN0IHNlcnZlciBvZiBtY3BTZXJ2ZXJzKSB7XG4gICAgICAgIGNvbnN0IHNlcnZlclRvb2xzID0gYXdhaXQgZ2V0RnVuY3Rpb25Ub29sc0Zyb21TZXJ2ZXIoe1xuICAgICAgICAgICAgc2VydmVyLFxuICAgICAgICAgICAgY29udmVydFNjaGVtYXNUb1N0cmljdDogY29udmVydFNjaGVtYXNUb1N0cmljdEZyb21PcHRzLFxuICAgICAgICAgICAgcnVuQ29udGV4dDogcnVuQ29udGV4dEZyb21PcHRzLFxuICAgICAgICAgICAgYWdlbnQ6IGFnZW50RnJvbU9wdHMsXG4gICAgICAgICAgICBnZW5lcmF0ZU1DUFRvb2xDYWNoZUtleSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHNlcnZlclRvb2xOYW1lcyA9IG5ldyBTZXQoc2VydmVyVG9vbHMubWFwKCh0KSA9PiB0Lm5hbWUpKTtcbiAgICAgICAgY29uc3QgaW50ZXJzZWN0aW9uID0gWy4uLnNlcnZlclRvb2xOYW1lc10uZmlsdGVyKChuKSA9PiB0b29sTmFtZXMuaGFzKG4pKTtcbiAgICAgICAgaWYgKGludGVyc2VjdGlvbi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKGBEdXBsaWNhdGUgdG9vbCBuYW1lcyBmb3VuZCBhY3Jvc3MgTUNQIHNlcnZlcnM6ICR7aW50ZXJzZWN0aW9uLmpvaW4oJywgJyl9YCk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCB0IG9mIHNlcnZlclRvb2xzKSB7XG4gICAgICAgICAgICB0b29sTmFtZXMuYWRkKHQubmFtZSk7XG4gICAgICAgICAgICBhbGxUb29scy5wdXNoKHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhbGxUb29scztcbn1cbi8qKlxuICogQ29udmVydHMgYW4gTUNQIHRvb2wgZGVmaW5pdGlvbiB0byBhIGZ1bmN0aW9uIHRvb2wgZm9yIHRoZSBBZ2VudHMgU0RLLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbWNwVG9GdW5jdGlvblRvb2wobWNwVG9vbCwgc2VydmVyLCBjb252ZXJ0U2NoZW1hc1RvU3RyaWN0KSB7XG4gICAgYXN5bmMgZnVuY3Rpb24gaW52b2tlKGlucHV0LCBfY29udGV4dCkge1xuICAgICAgICBsZXQgYXJncyA9IHt9O1xuICAgICAgICBpZiAodHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJyAmJiBpbnB1dCkge1xuICAgICAgICAgICAgYXJncyA9IEpTT04ucGFyc2UoaW5wdXQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ29iamVjdCcgJiYgaW5wdXQgIT0gbnVsbCkge1xuICAgICAgICAgICAgYXJncyA9IGlucHV0O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGN1cnJlbnRTcGFuID0gZ2V0Q3VycmVudFNwYW4oKTtcbiAgICAgICAgaWYgKGN1cnJlbnRTcGFuKSB7XG4gICAgICAgICAgICBjdXJyZW50U3Bhbi5zcGFuRGF0YVsnbWNwX2RhdGEnXSA9IHsgc2VydmVyOiBzZXJ2ZXIubmFtZSB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCBzZXJ2ZXIuY2FsbFRvb2wobWNwVG9vbC5uYW1lLCBhcmdzKTtcbiAgICAgICAgcmV0dXJuIGNvbnRlbnQubGVuZ3RoID09PSAxID8gY29udGVudFswXSA6IGNvbnRlbnQ7XG4gICAgfVxuICAgIGNvbnN0IHNjaGVtYSA9IHtcbiAgICAgICAgLi4ubWNwVG9vbC5pbnB1dFNjaGVtYSxcbiAgICAgICAgdHlwZTogbWNwVG9vbC5pbnB1dFNjaGVtYT8udHlwZSA/PyAnb2JqZWN0JyxcbiAgICAgICAgcHJvcGVydGllczogbWNwVG9vbC5pbnB1dFNjaGVtYT8ucHJvcGVydGllcyA/PyB7fSxcbiAgICAgICAgcmVxdWlyZWQ6IG1jcFRvb2wuaW5wdXRTY2hlbWE/LnJlcXVpcmVkID8/IFtdLFxuICAgICAgICBhZGRpdGlvbmFsUHJvcGVydGllczogbWNwVG9vbC5pbnB1dFNjaGVtYT8uYWRkaXRpb25hbFByb3BlcnRpZXMgPz8gZmFsc2UsXG4gICAgfTtcbiAgICBpZiAoY29udmVydFNjaGVtYXNUb1N0cmljdCB8fCBzY2hlbWEuYWRkaXRpb25hbFByb3BlcnRpZXMgPT09IHRydWUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHN0cmljdFNjaGVtYSA9IGVuc3VyZVN0cmljdEpzb25TY2hlbWEoc2NoZW1hKTtcbiAgICAgICAgICAgIHJldHVybiB0b29sKHtcbiAgICAgICAgICAgICAgICBuYW1lOiBtY3BUb29sLm5hbWUsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG1jcFRvb2wuZGVzY3JpcHRpb24gfHwgJycsXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVyczogc3RyaWN0U2NoZW1hLFxuICAgICAgICAgICAgICAgIHN0cmljdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBleGVjdXRlOiBpbnZva2UsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgZ2xvYmFsTG9nZ2VyLndhcm4oYEVycm9yIGNvbnZlcnRpbmcgTUNQIHNjaGVtYSB0byBzdHJpY3QgbW9kZTogJHtlfWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IG5vblN0cmljdFNjaGVtYSA9IHtcbiAgICAgICAgLi4uc2NoZW1hLFxuICAgICAgICBhZGRpdGlvbmFsUHJvcGVydGllczogdHJ1ZSxcbiAgICB9O1xuICAgIHJldHVybiB0b29sKHtcbiAgICAgICAgbmFtZTogbWNwVG9vbC5uYW1lLFxuICAgICAgICBkZXNjcmlwdGlvbjogbWNwVG9vbC5kZXNjcmlwdGlvbiB8fCAnJyxcbiAgICAgICAgcGFyYW1ldGVyczogbm9uU3RyaWN0U2NoZW1hLFxuICAgICAgICBzdHJpY3Q6IGZhbHNlLFxuICAgICAgICBleGVjdXRlOiBpbnZva2UsXG4gICAgfSk7XG59XG4vKipcbiAqIEVuc3VyZXMgdGhlIGdpdmVuIEpTT04gc2NoZW1hIGlzIHN0cmljdCAobm8gYWRkaXRpb25hbCBwcm9wZXJ0aWVzLCByZXF1aXJlZCBmaWVsZHMgc2V0KS5cbiAqL1xuZnVuY3Rpb24gZW5zdXJlU3RyaWN0SnNvblNjaGVtYShzY2hlbWEpIHtcbiAgICBjb25zdCBvdXQgPSB7XG4gICAgICAgIC4uLnNjaGVtYSxcbiAgICAgICAgYWRkaXRpb25hbFByb3BlcnRpZXM6IGZhbHNlLFxuICAgIH07XG4gICAgaWYgKCFvdXQucmVxdWlyZWQpXG4gICAgICAgIG91dC5yZXF1aXJlZCA9IFtdO1xuICAgIHJldHVybiBvdXQ7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tY3AubWpzLm1hcCIsIi8vLyA8cmVmZXJlbmNlIGxpYj1cImRvbVwiIC8+XG4vLyBVc2UgZnVuY3Rpb24gaW5zdGVhZCBvZiBleHBvcnRpbmcgdGhlIHZhbHVlIHRvIHByZXZlbnRcbi8vIGNpcmN1bGFyIGRlcGVuZGVuY3kgcmVzb2x1dGlvbiBpc3N1ZXMgY2F1c2VkIGJ5IG90aGVyIGV4cG9ydHMgaW4gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvX3NoaW1zJ1xuZXhwb3J0IGZ1bmN0aW9uIGxvYWRFbnYoKSB7XG4gICAgcmV0dXJuIHt9O1xufVxuZXhwb3J0IGNsYXNzIEJyb3dzZXJFdmVudEVtaXR0ZXIge1xuICAgICN0YXJnZXQgPSBuZXcgRXZlbnRUYXJnZXQoKTtcbiAgICAjbGlzdGVuZXJXcmFwcGVycyA9IG5ldyBNYXAoKTtcbiAgICBvbih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICBjb25zdCBldmVudFR5cGUgPSB0eXBlO1xuICAgICAgICBsZXQgbGlzdGVuZXJzRm9yVHlwZSA9IHRoaXMuI2xpc3RlbmVyV3JhcHBlcnMuZ2V0KGV2ZW50VHlwZSk7XG4gICAgICAgIGlmICghbGlzdGVuZXJzRm9yVHlwZSkge1xuICAgICAgICAgICAgbGlzdGVuZXJzRm9yVHlwZSA9IG5ldyBNYXAoKTtcbiAgICAgICAgICAgIHRoaXMuI2xpc3RlbmVyV3JhcHBlcnMuc2V0KGV2ZW50VHlwZSwgbGlzdGVuZXJzRm9yVHlwZSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHdyYXBwZXJzID0gbGlzdGVuZXJzRm9yVHlwZS5nZXQobGlzdGVuZXIpO1xuICAgICAgICBpZiAoIXdyYXBwZXJzKSB7XG4gICAgICAgICAgICB3cmFwcGVycyA9IG5ldyBTZXQoKTtcbiAgICAgICAgICAgIGxpc3RlbmVyc0ZvclR5cGUuc2V0KGxpc3RlbmVyLCB3cmFwcGVycyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgd3JhcHBlciA9ICgoZXZlbnQpID0+IGxpc3RlbmVyKC4uLihldmVudC5kZXRhaWwgPz8gW10pKSk7XG4gICAgICAgIHdyYXBwZXJzLmFkZCh3cmFwcGVyKTtcbiAgICAgICAgdGhpcy4jdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCB3cmFwcGVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIG9mZih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICBjb25zdCBldmVudFR5cGUgPSB0eXBlO1xuICAgICAgICBjb25zdCBsaXN0ZW5lcnNGb3JUeXBlID0gdGhpcy4jbGlzdGVuZXJXcmFwcGVycy5nZXQoZXZlbnRUeXBlKTtcbiAgICAgICAgY29uc3Qgd3JhcHBlcnMgPSBsaXN0ZW5lcnNGb3JUeXBlPy5nZXQobGlzdGVuZXIpO1xuICAgICAgICBpZiAod3JhcHBlcnM/LnNpemUpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgd3JhcHBlciBvZiB3cmFwcGVycykge1xuICAgICAgICAgICAgICAgIHRoaXMuI3RhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgd3JhcHBlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsaXN0ZW5lcnNGb3JUeXBlPy5kZWxldGUobGlzdGVuZXIpO1xuICAgICAgICAgICAgaWYgKGxpc3RlbmVyc0ZvclR5cGU/LnNpemUgPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLiNsaXN0ZW5lcldyYXBwZXJzLmRlbGV0ZShldmVudFR5cGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBlbWl0KHR5cGUsIC4uLmFyZ3MpIHtcbiAgICAgICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQodHlwZSwgeyBkZXRhaWw6IGFyZ3MgfSk7XG4gICAgICAgIHJldHVybiB0aGlzLiN0YXJnZXQuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgfVxuICAgIG9uY2UodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgY29uc3QgaGFuZGxlciA9ICguLi5hcmdzKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm9mZih0eXBlLCBoYW5kbGVyKTtcbiAgICAgICAgICAgIGxpc3RlbmVyKC4uLmFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uKHR5cGUsIGhhbmRsZXIpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG59XG5leHBvcnQgeyBCcm93c2VyRXZlbnRFbWl0dGVyIGFzIFJ1bnRpbWVFdmVudEVtaXR0ZXIgfTtcbmV4cG9ydCBjb25zdCByYW5kb21VVUlEID0gKCkgPT4ge1xuICAgIGlmICh0eXBlb2YgY3J5cHRvICE9PSAndW5kZWZpbmVkJyAmJiBjcnlwdG8ucmFuZG9tVVVJRCkge1xuICAgICAgICByZXR1cm4gY3J5cHRvLnJhbmRvbVVVSUQoKTtcbiAgICB9XG4gICAgcmV0dXJuICd4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHgnLnJlcGxhY2UoL1t4eV0vZywgZnVuY3Rpb24gKGMpIHtcbiAgICAgICAgY29uc3QgciA9IChNYXRoLnJhbmRvbSgpICogMTYpIHwgMDtcbiAgICAgICAgY29uc3QgdiA9IGMgPT09ICd4JyA/IHIgOiAociAmIDB4MykgfCAweDg7XG4gICAgICAgIHJldHVybiB2LnRvU3RyaW5nKDE2KTtcbiAgICB9KTtcbn07XG5leHBvcnQgY29uc3QgUmVhZGFibGUgPSBjbGFzcyBSZWFkYWJsZSB7XG4gICAgY29uc3RydWN0b3IoKSB7IH1cbiAgICBwaXBlVG8oX2Rlc3RpbmF0aW9uLCBfb3B0aW9ucykgeyB9XG4gICAgcGlwZVRocm91Z2goX3RyYW5zZm9ybSwgX29wdGlvbnMpIHsgfVxufTtcbmV4cG9ydCBjb25zdCBSZWFkYWJsZVN0cmVhbSA9IGdsb2JhbFRoaXMuUmVhZGFibGVTdHJlYW07XG5leHBvcnQgY29uc3QgUmVhZGFibGVTdHJlYW1Db250cm9sbGVyID0gZ2xvYmFsVGhpcy5SZWFkYWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyO1xuZXhwb3J0IGNvbnN0IFRyYW5zZm9ybVN0cmVhbSA9IGdsb2JhbFRoaXMuVHJhbnNmb3JtU3RyZWFtO1xuZXhwb3J0IGNsYXNzIEFzeW5jTG9jYWxTdG9yYWdlIHtcbiAgICBjb250ZXh0ID0gbnVsbDtcbiAgICBjb25zdHJ1Y3RvcigpIHsgfVxuICAgIHJ1bihjb250ZXh0LCBmbikge1xuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICByZXR1cm4gZm4oKTtcbiAgICB9XG4gICAgZ2V0U3RvcmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRleHQ7XG4gICAgfVxuICAgIGVudGVyV2l0aChjb250ZXh0KSB7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGlzQnJvd3NlckVudmlyb25tZW50KCkge1xuICAgIHJldHVybiB0cnVlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzVHJhY2luZ0xvb3BSdW5uaW5nQnlEZWZhdWx0KCkge1xuICAgIHJldHVybiBmYWxzZTtcbn1cbmV4cG9ydCB7IE1DUFNlcnZlclN0ZGlvLCBNQ1BTZXJ2ZXJTdHJlYW1hYmxlSHR0cCwgTUNQU2VydmVyU1NFLCB9IGZyb20gXCIuL21jcC1zZXJ2ZXIvYnJvd3Nlci5tanNcIjtcbmNsYXNzIEJyb3dzZXJUaW1lciB7XG4gICAgY29uc3RydWN0b3IoKSB7IH1cbiAgICBzZXRUaW1lb3V0KGNhbGxiYWNrLCBtcykge1xuICAgICAgICBjb25zdCB0aW1lb3V0ID0gc2V0VGltZW91dChjYWxsYmFjaywgbXMpO1xuICAgICAgICB0aW1lb3V0LnJlZiA9XG4gICAgICAgICAgICB0eXBlb2YgdGltZW91dC5yZWYgPT09ICdmdW5jdGlvbicgPyB0aW1lb3V0LnJlZiA6ICgpID0+IHRpbWVvdXQ7XG4gICAgICAgIHRpbWVvdXQudW5yZWYgPVxuICAgICAgICAgICAgdHlwZW9mIHRpbWVvdXQudW5yZWYgPT09ICdmdW5jdGlvbicgPyB0aW1lb3V0LnVucmVmIDogKCkgPT4gdGltZW91dDtcbiAgICAgICAgdGltZW91dC5oYXNSZWYgPVxuICAgICAgICAgICAgdHlwZW9mIHRpbWVvdXQuaGFzUmVmID09PSAnZnVuY3Rpb24nID8gdGltZW91dC5oYXNSZWYgOiAoKSA9PiB0cnVlO1xuICAgICAgICB0aW1lb3V0LnJlZnJlc2ggPVxuICAgICAgICAgICAgdHlwZW9mIHRpbWVvdXQucmVmcmVzaCA9PT0gJ2Z1bmN0aW9uJyA/IHRpbWVvdXQucmVmcmVzaCA6ICgpID0+IHRpbWVvdXQ7XG4gICAgICAgIHJldHVybiB0aW1lb3V0O1xuICAgIH1cbiAgICBjbGVhclRpbWVvdXQodGltZW91dElkKSB7XG4gICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICB9XG59XG5jb25zdCB0aW1lciA9IG5ldyBCcm93c2VyVGltZXIoKTtcbmV4cG9ydCB7IHRpbWVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zaGltcy1icm93c2VyLm1qcy5tYXAiLCIvKipcbiAqIEVuY29kZSBhIFVpbnQ4QXJyYXkgaW50byBhIGJhc2U2NCBzdHJpbmcgaW4gYm90aCBOb2RlIGFuZCBicm93c2VyIGVudmlyb25tZW50cy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVuY29kZVVpbnQ4QXJyYXlUb0Jhc2U2NChkYXRhKSB7XG4gICAgaWYgKGRhdGEubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICB9XG4gICAgY29uc3QgZ2xvYmFsQnVmZmVyID0gdHlwZW9mIGdsb2JhbFRoaXMgIT09ICd1bmRlZmluZWQnICYmIGdsb2JhbFRoaXMuQnVmZmVyXG4gICAgICAgID8gZ2xvYmFsVGhpcy5CdWZmZXJcbiAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgaWYgKGdsb2JhbEJ1ZmZlcikge1xuICAgICAgICByZXR1cm4gZ2xvYmFsQnVmZmVyLmZyb20oZGF0YSkudG9TdHJpbmcoJ2Jhc2U2NCcpO1xuICAgIH1cbiAgICBsZXQgYmluYXJ5ID0gJyc7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGJpbmFyeSArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGRhdGFbaV0pO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGdsb2JhbFRoaXMuYnRvYSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gZ2xvYmFsVGhpcy5idG9hKGJpbmFyeSk7XG4gICAgfVxuICAgIGNvbnN0IGNoYXJzID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89JztcbiAgICBsZXQgcmVzdWx0ID0gJyc7XG4gICAgbGV0IGkgPSAwO1xuICAgIHdoaWxlIChpIDwgYmluYXJ5Lmxlbmd0aCkge1xuICAgICAgICBjb25zdCBjMSA9IGJpbmFyeS5jaGFyQ29kZUF0KGkrKyk7XG4gICAgICAgIGNvbnN0IGMyID0gYmluYXJ5LmNoYXJDb2RlQXQoaSsrKTtcbiAgICAgICAgY29uc3QgYzMgPSBiaW5hcnkuY2hhckNvZGVBdChpKyspO1xuICAgICAgICBjb25zdCBlbmMxID0gYzEgPj4gMjtcbiAgICAgICAgY29uc3QgZW5jMiA9ICgoYzEgJiAweDMpIDw8IDQpIHwgKGMyID4+IDQpO1xuICAgICAgICBjb25zdCBlbmMzID0gaXNOYU4oYzIpID8gNjQgOiAoKGMyICYgMHhmKSA8PCAyKSB8IChjMyA+PiA2KTtcbiAgICAgICAgY29uc3QgZW5jNCA9IGlzTmFOKGMzKSA/IDY0IDogYzMgJiAweDNmO1xuICAgICAgICByZXN1bHQgKz1cbiAgICAgICAgICAgIGNoYXJzLmNoYXJBdChlbmMxKSArXG4gICAgICAgICAgICAgICAgY2hhcnMuY2hhckF0KGVuYzIpICtcbiAgICAgICAgICAgICAgICBjaGFycy5jaGFyQXQoZW5jMykgK1xuICAgICAgICAgICAgICAgIGNoYXJzLmNoYXJBdChlbmM0KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJhc2U2NC5tanMubWFwIiwiaW1wb3J0IHsgZW5jb2RlVWludDhBcnJheVRvQmFzZTY0IH0gZnJvbSBcIi4vYmFzZTY0Lm1qc1wiO1xuaW1wb3J0IHsgaXNBcnJheUJ1ZmZlclZpZXcsIGlzTm9kZUJ1ZmZlciwgaXNTZXJpYWxpemVkQnVmZmVyU25hcHNob3QsIH0gZnJvbSBcIi4vc21hcnRTdHJpbmcubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gc2VyaWFsaXplQmluYXJ5KHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIF9fdHlwZTogJ0FycmF5QnVmZmVyJyxcbiAgICAgICAgICAgIGRhdGE6IGVuY29kZVVpbnQ4QXJyYXlUb0Jhc2U2NChuZXcgVWludDhBcnJheSh2YWx1ZSkpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAoaXNBcnJheUJ1ZmZlclZpZXcodmFsdWUpKSB7XG4gICAgICAgIGNvbnN0IHZpZXcgPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIF9fdHlwZTogdmlldy5jb25zdHJ1Y3Rvci5uYW1lLFxuICAgICAgICAgICAgZGF0YTogZW5jb2RlVWludDhBcnJheVRvQmFzZTY0KG5ldyBVaW50OEFycmF5KHZpZXcuYnVmZmVyLCB2aWV3LmJ5dGVPZmZzZXQsIHZpZXcuYnl0ZUxlbmd0aCkpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAoaXNOb2RlQnVmZmVyKHZhbHVlKSkge1xuICAgICAgICBjb25zdCB2aWV3ID0gdmFsdWU7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBfX3R5cGU6ICdCdWZmZXInLFxuICAgICAgICAgICAgZGF0YTogZW5jb2RlVWludDhBcnJheVRvQmFzZTY0KG5ldyBVaW50OEFycmF5KHZpZXcuYnVmZmVyLCB2aWV3LmJ5dGVPZmZzZXQsIHZpZXcuYnl0ZUxlbmd0aCkpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAoaXNTZXJpYWxpemVkQnVmZmVyU25hcHNob3QodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBfX3R5cGU6ICdCdWZmZXInLFxuICAgICAgICAgICAgZGF0YTogZW5jb2RlVWludDhBcnJheVRvQmFzZTY0KFVpbnQ4QXJyYXkuZnJvbSh2YWx1ZS5kYXRhKSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59XG5leHBvcnQgZnVuY3Rpb24gdG9VaW50OEFycmF5RnJvbUJpbmFyeSh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSh2YWx1ZSk7XG4gICAgfVxuICAgIGlmIChpc0FycmF5QnVmZmVyVmlldyh2YWx1ZSkpIHtcbiAgICAgICAgY29uc3QgdmlldyA9IHZhbHVlO1xuICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkodmlldy5idWZmZXIsIHZpZXcuYnl0ZU9mZnNldCwgdmlldy5ieXRlTGVuZ3RoKTtcbiAgICB9XG4gICAgaWYgKGlzTm9kZUJ1ZmZlcih2YWx1ZSkpIHtcbiAgICAgICAgY29uc3QgdmlldyA9IHZhbHVlO1xuICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkodmlldy5idWZmZXIsIHZpZXcuYnl0ZU9mZnNldCwgdmlldy5ieXRlTGVuZ3RoKTtcbiAgICB9XG4gICAgaWYgKGlzU2VyaWFsaXplZEJ1ZmZlclNuYXBzaG90KHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gVWludDhBcnJheS5mcm9tKHZhbHVlLmRhdGEpO1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YmluYXJ5Lm1qcy5tYXAiLCJpbXBvcnQgeyBzZXJpYWxpemVCaW5hcnkgfSBmcm9tIFwiLi4vdXRpbHMvYmluYXJ5Lm1qc1wiO1xuLy8gTm9ybWFsaXplcyB1c2VyLXByb3ZpZGVkIGlucHV0IGludG8gdGhlIHN0cnVjdHVyZSB0aGUgbW9kZWwgZXhwZWN0cy4gU3RyaW5ncyBiZWNvbWUgdXNlciBtZXNzYWdlcyxcbi8vIGFycmF5cyBhcmUga2VwdCBhcy1pcyBzbyBkb3duc3RyZWFtIGxvb3BzIGNhbiB0cmVhdCBib3RoIHNjZW5hcmlvcyB1bmlmb3JtbHkuXG5leHBvcnQgZnVuY3Rpb24gdG9BZ2VudElucHV0TGlzdChvcmlnaW5hbElucHV0KSB7XG4gICAgaWYgKHR5cGVvZiBvcmlnaW5hbElucHV0ID09PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gW3sgdHlwZTogJ21lc3NhZ2UnLCByb2xlOiAndXNlcicsIGNvbnRlbnQ6IG9yaWdpbmFsSW5wdXQgfV07XG4gICAgfVxuICAgIHJldHVybiBbLi4ub3JpZ2luYWxJbnB1dF07XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0QWdlbnRJbnB1dEl0ZW1LZXkoaXRlbSkge1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShpdGVtLCBhZ2VudElucHV0U2VyaWFsaXphdGlvblJlcGxhY2VyKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBidWlsZEFnZW50SW5wdXRQb29sKGl0ZW1zKSB7XG4gICAgY29uc3QgcG9vbCA9IG5ldyBNYXAoKTtcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHtcbiAgICAgICAgY29uc3Qga2V5ID0gZ2V0QWdlbnRJbnB1dEl0ZW1LZXkoaXRlbSk7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nID0gcG9vbC5nZXQoa2V5KTtcbiAgICAgICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICAgICAgICBleGlzdGluZy5wdXNoKGl0ZW0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcG9vbC5zZXQoa2V5LCBbaXRlbV0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwb29sO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHRha2VBZ2VudElucHV0RnJvbVBvb2wocG9vbCwga2V5KSB7XG4gICAgY29uc3QgY2FuZGlkYXRlcyA9IHBvb2wuZ2V0KGtleSk7XG4gICAgaWYgKCFjYW5kaWRhdGVzIHx8IGNhbmRpZGF0ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbnN0IFtmaXJzdF0gPSBjYW5kaWRhdGVzO1xuICAgIGNhbmRpZGF0ZXMuc2hpZnQoKTtcbiAgICBpZiAoY2FuZGlkYXRlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcG9vbC5kZWxldGUoa2V5KTtcbiAgICB9XG4gICAgcmV0dXJuIGZpcnN0O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUFnZW50SW5wdXRGcm9tUG9vbChwb29sLCBpdGVtKSB7XG4gICAgY29uc3Qga2V5ID0gZ2V0QWdlbnRJbnB1dEl0ZW1LZXkoaXRlbSk7XG4gICAgY29uc3QgY2FuZGlkYXRlcyA9IHBvb2wuZ2V0KGtleSk7XG4gICAgaWYgKCFjYW5kaWRhdGVzIHx8IGNhbmRpZGF0ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgaW5kZXggPSBjYW5kaWRhdGVzLmZpbmRJbmRleCgoY2FuZGlkYXRlKSA9PiBjYW5kaWRhdGUgPT09IGl0ZW0pO1xuICAgIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjYW5kaWRhdGVzLnNwbGljZShpbmRleCwgMSk7XG4gICAgaWYgKGNhbmRpZGF0ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHBvb2wuZGVsZXRlKGtleSk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGFnZW50SW5wdXRTZXJpYWxpemF0aW9uUmVwbGFjZXIoX2tleSwgdmFsdWUpIHtcbiAgICBjb25zdCBzZXJpYWxpemVkID0gc2VyaWFsaXplQmluYXJ5KHZhbHVlKTtcbiAgICBpZiAoc2VyaWFsaXplZCkge1xuICAgICAgICByZXR1cm4gc2VyaWFsaXplZDtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xufVxuLy8gRXh0cmFjdHMgbW9kZWwtcmVhZHkgb3V0cHV0IGl0ZW1zIGZyb20gcnVuIGl0ZW1zLCBleGNsdWRpbmcgYXBwcm92YWwgcGxhY2Vob2xkZXJzLlxuZXhwb3J0IGZ1bmN0aW9uIGV4dHJhY3RPdXRwdXRJdGVtc0Zyb21SdW5JdGVtcyhpdGVtcykge1xuICAgIHJldHVybiBpdGVtc1xuICAgICAgICAuZmlsdGVyKChpdGVtKSA9PiBpdGVtLnR5cGUgIT09ICd0b29sX2FwcHJvdmFsX2l0ZW0nKVxuICAgICAgICAubWFwKChpdGVtKSA9PiBpdGVtLnJhd0l0ZW0pO1xufVxuLyoqXG4gKiBDb25zdHJ1Y3RzIHRoZSBtb2RlbCBpbnB1dCBhcnJheSBmb3IgdGhlIGN1cnJlbnQgdHVybiBieSBjb21iaW5pbmcgdGhlIG9yaWdpbmFsIHR1cm4gaW5wdXQgd2l0aFxuICogYW55IG5ldyBydW4gaXRlbXMgKGV4Y2x1ZGluZyB0b29sIGFwcHJvdmFsIHBsYWNlaG9sZGVycykuIFRoaXMgaGVscHMgZW5zdXJlIHRoYXQgcmVwZWF0ZWQgY2FsbHNcbiAqIHRvIHRoZSBSZXNwb25zZXMgQVBJIG9ubHkgc2VuZCBuZXdseSBnZW5lcmF0ZWQgY29udGVudC5cbiAqXG4gKiBTZWU6IGh0dHBzOi8vcGxhdGZvcm0ub3BlbmFpLmNvbS9kb2NzL2d1aWRlcy9jb252ZXJzYXRpb24tc3RhdGU/YXBpLW1vZGU9cmVzcG9uc2VzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHVybklucHV0KG9yaWdpbmFsSW5wdXQsIGdlbmVyYXRlZEl0ZW1zKSB7XG4gICAgY29uc3Qgb3V0cHV0SXRlbXMgPSBleHRyYWN0T3V0cHV0SXRlbXNGcm9tUnVuSXRlbXMoZ2VuZXJhdGVkSXRlbXMpO1xuICAgIHJldHVybiBbLi4udG9BZ2VudElucHV0TGlzdChvcmlnaW5hbElucHV0KSwgLi4ub3V0cHV0SXRlbXNdO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXRlbXMubWpzLm1hcCIsImltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gU2hhcmVkIGJhc2UgdHlwZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogRXZlcnkgaXRlbSBpbiB0aGUgcHJvdG9jb2wgcHJvdmlkZXMgYSBgcHJvdmlkZXJEYXRhYCBmaWVsZCB0byBhY2NvbW1vZGF0ZSBjdXN0b20gZnVuY3Rpb25hbGl0eVxuICogb3IgbmV3IGZpZWxkc1xuICovXG5leHBvcnQgY29uc3QgU2hhcmVkQmFzZSA9IHoub2JqZWN0KHtcbiAgICAvKipcbiAgICAgKiBBZGRpdGlvbmFsIG9wdGlvbmFsIHByb3ZpZGVyIHNwZWNpZmljIGRhdGEuIFVzZWQgZm9yIGN1c3RvbSBmdW5jdGlvbmFsaXR5IG9yIG1vZGVsIHByb3ZpZGVyXG4gICAgICogc3BlY2lmaWMgZmllbGRzLlxuICAgICAqL1xuICAgIHByb3ZpZGVyRGF0YTogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSkub3B0aW9uYWwoKSxcbn0pO1xuLyoqXG4gKiBFdmVyeSBpdGVtIGhhcyBhIHNoYXJlZCBvZiBzaGFyZWQgaXRlbSBkYXRhIGluY2x1ZGluZyBhbiBvcHRpb25hbCBJRC5cbiAqL1xuZXhwb3J0IGNvbnN0IEl0ZW1CYXNlID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIC8qKlxuICAgICAqIEFuIElEIHRvIGlkZW50aWZ5IHRoZSBpdGVtLiBUaGlzIGlzIG9wdGlvbmFsIGJ5IGRlZmF1bHQuIElmIGEgbW9kZWwgcHJvdmlkZXIgYWJzb2x1dGVseVxuICAgICAqIHJlcXVpcmVzIHRoaXMgZmllbGQsIGl0IHdpbGwgYmUgdmFsaWRhdGVkIG9uIHRoZSBtb2RlbCBsZXZlbC5cbiAgICAgKi9cbiAgICBpZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBDb250ZW50IHR5cGVzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5leHBvcnQgY29uc3QgUmVmdXNhbCA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3JlZnVzYWwnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgcmVmdXNhbCBleHBsYW5hdGlvbiBmcm9tIHRoZSBtb2RlbC5cbiAgICAgKi9cbiAgICByZWZ1c2FsOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgT3V0cHV0VGV4dCA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ291dHB1dF90ZXh0JyksXG4gICAgLyoqXG4gICAgICogVGhlIHRleHQgb3V0cHV0IGZyb20gdGhlIG1vZGVsLlxuICAgICAqL1xuICAgIHRleHQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCBJbnB1dFRleHQgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdpbnB1dF90ZXh0JyksXG4gICAgLyoqXG4gICAgICogQSB0ZXh0IGlucHV0IGZvciBleGFtcGxlIGEgbWVzc2FnZSBmcm9tIGEgdXNlclxuICAgICAqL1xuICAgIHRleHQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCBSZWFzb25pbmdUZXh0ID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVhc29uaW5nX3RleHQnKSxcbiAgICAvKipcbiAgICAgKiBBIHRleHQgaW5wdXQgZm9yIGV4YW1wbGUgYSBtZXNzYWdlIGZyb20gYSB1c2VyXG4gICAgICovXG4gICAgdGV4dDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IElucHV0SW1hZ2UgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdpbnB1dF9pbWFnZScpLFxuICAgIC8qKlxuICAgICAqIFRoZSBpbWFnZSBpbnB1dCB0byB0aGUgbW9kZWwuIENvdWxkIGJlIHByb3ZpZGVkIGlubGluZSAoYGltYWdlYCksIGFzIGEgVVJMLCBvciBieSByZWZlcmVuY2UgdG8gYVxuICAgICAqIHByZXZpb3VzbHkgdXBsb2FkZWQgT3BlbkFJIGZpbGUuXG4gICAgICovXG4gICAgaW1hZ2U6IHpcbiAgICAgICAgLy8gMS4gaW1hZ2UgZGF0YVxuICAgICAgICAuc3RyaW5nKClcbiAgICAgICAgLy8gMi5maWxlIElEIGZvciB0aGUgaW1hZ2VcbiAgICAgICAgLm9yKHoub2JqZWN0KHsgaWQ6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ09wZW5BSSBmaWxlIElEJykgfSkpXG4gICAgICAgIC5kZXNjcmliZSgnRWl0aGVyIGJhc2U2NCBlbmNvZGVkIGltYWdlIGRhdGEsIGEgZGF0YSBVUkwsIG9yIGFuIG9iamVjdCB3aXRoIGEgZmlsZSBJRC4nKVxuICAgICAgICAub3B0aW9uYWwoKSxcbiAgICAvKipcbiAgICAgKiBDb250cm9scyB0aGUgbGV2ZWwgb2YgZGV0YWlsIHJlcXVlc3RlZCBmb3IgaW1hZ2UgdW5kZXJzdGFuZGluZyB0YXNrcy5cbiAgICAgKiBGdXR1cmUgbW9kZWxzIG1heSBhZGQgbmV3IHZhbHVlcywgdGhlcmVmb3JlIHRoaXMgYWNjZXB0cyBhbnkgc3RyaW5nLlxuICAgICAqL1xuICAgIGRldGFpbDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgSW5wdXRGaWxlID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfZmlsZScpLFxuICAgIC8qKlxuICAgICAqIFRoZSBmaWxlIGlucHV0IHRvIHRoZSBtb2RlbC4gQ291bGQgYmUgcmF3IGRhdGEsIGEgVVJMLCBvciBhbiBPcGVuQUkgZmlsZSBJRC5cbiAgICAgKiBXaGVuIHBhc3NpbmcgYSBzdHJpbmcsIGl0IGlzIGludGVycHJldGVkIGFzIGlubGluZSBkYXRhIG9yIGEgVVJMOyB1c2UgYHsgaWQgfWAgZm9yIGZpbGUgSURzLlxuICAgICAqL1xuICAgIGZpbGU6IHpcbiAgICAgICAgLy8gMS4gZmlsZSBkYXRhXG4gICAgICAgIC5zdHJpbmcoKVxuICAgICAgICAuZGVzY3JpYmUoJ0VpdGhlciBiYXNlNjQgZW5jb2RlZCBmaWxlIGRhdGEgb3IgYSBwdWJsaWNseSBhY2Nlc3NpYmxlIGZpbGUgVVJMJylcbiAgICAgICAgLy8gMi4gZmlsZSBJRFxuICAgICAgICAub3Ioei5vYmplY3QoeyBpZDogei5zdHJpbmcoKS5kZXNjcmliZSgnT3BlbkFJIGZpbGUgSUQnKSB9KSlcbiAgICAgICAgLy8gMy4gcHVibGljbHkgYWNjZXNzaWJsZSBmaWxlIFVSTFxuICAgICAgICAub3Ioei5vYmplY3QoeyB1cmw6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ1B1YmxpY2x5IGFjY2Vzc2libGUgZmlsZSBVUkwnKSB9KSlcbiAgICAgICAgLmRlc2NyaWJlKCdDb250ZW50cyBvZiB0aGUgZmlsZSBvciBhbiBvYmplY3Qgd2l0aCBhIGZpbGUgSUQuJylcbiAgICAgICAgLm9wdGlvbmFsKCksXG4gICAgLyoqXG4gICAgICogT3B0aW9uYWwgZmlsZW5hbWUgbWV0YWRhdGEgd2hlbiB1cGxvYWRpbmcgZmlsZSBkYXRhIGlubGluZS5cbiAgICAgKi9cbiAgICBmaWxlbmFtZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgQXVkaW9Db250ZW50ID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnYXVkaW8nKSxcbiAgICAvKipcbiAgICAgKiBUaGUgYXVkaW8gaW5wdXQgdG8gdGhlIG1vZGVsLiBDb3VsZCBiZSBiYXNlNjQgZW5jb2RlZCBhdWRpbyBkYXRhIG9yIGFuIG9iamVjdCB3aXRoIGEgZmlsZSBJRC5cbiAgICAgKi9cbiAgICBhdWRpbzogelxuICAgICAgICAuc3RyaW5nKClcbiAgICAgICAgLm9yKHoub2JqZWN0KHtcbiAgICAgICAgaWQ6IHouc3RyaW5nKCksXG4gICAgfSkpXG4gICAgICAgIC5kZXNjcmliZSgnQmFzZTY0IGVuY29kZWQgYXVkaW8gZGF0YSBvciBmaWxlIGlkJyksXG4gICAgLyoqXG4gICAgICogVGhlIGZvcm1hdCBvZiB0aGUgYXVkaW8uXG4gICAgICovXG4gICAgZm9ybWF0OiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICAvKipcbiAgICAgKiBUaGUgdHJhbnNjcmlwdCBvZiB0aGUgYXVkaW8uXG4gICAgICovXG4gICAgdHJhbnNjcmlwdDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBJbWFnZUNvbnRlbnQgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdpbWFnZScpLFxuICAgIC8qKlxuICAgICAqIFRoZSBpbWFnZSBpbnB1dCB0byB0aGUgbW9kZWwuIENvdWxkIGJlIGJhc2U2NCBlbmNvZGVkIGltYWdlIGRhdGEgb3IgYW4gb2JqZWN0IHdpdGggYSBmaWxlIElELlxuICAgICAqL1xuICAgIGltYWdlOiB6LnN0cmluZygpLmRlc2NyaWJlKCdCYXNlNjQgZW5jb2RlZCBpbWFnZSBkYXRhJyksXG59KTtcbmV4cG9ydCBjb25zdCBUb29sT3V0cHV0VGV4dCA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3RleHQnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgdGV4dCBvdXRwdXQgZnJvbSB0aGUgbW9kZWwuXG4gICAgICovXG4gICAgdGV4dDogei5zdHJpbmcoKSxcbn0pO1xuY29uc3QgSW1hZ2VEYXRhT2JqZWN0U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIGRhdGE6IHpcbiAgICAgICAgLnVuaW9uKFt6LnN0cmluZygpLCB6Lmluc3RhbmNlb2YoVWludDhBcnJheSldKVxuICAgICAgICAuZGVzY3JpYmUoJ0Jhc2U2NCBpbWFnZSBkYXRhLCBvciByYXcgYnl0ZXMgdGhhdCB3aWxsIGJlIGJhc2U2NCBlbmNvZGVkIGF1dG9tYXRpY2FsbHkuJyksXG4gICAgbWVkaWFUeXBlOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmNvbnN0IEltYWdlVXJsT2JqZWN0U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHVybDogelxuICAgICAgICAuc3RyaW5nKClcbiAgICAgICAgLmRlc2NyaWJlKCdQdWJsaWNseSBhY2Nlc3NpYmxlIFVSTCBwb2ludGluZyB0byB0aGUgaW1hZ2UgY29udGVudCcpLFxufSk7XG5jb25zdCBJbWFnZUZpbGVJZE9iamVjdFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICBmaWxlSWQ6IHpcbiAgICAgICAgLnN0cmluZygpXG4gICAgICAgIC5kZXNjcmliZSgnT3BlbkFJIGZpbGUgSUQgcmVmZXJlbmNpbmcgdXBsb2FkZWQgaW1hZ2UgY29udGVudCcpLFxufSk7XG5jb25zdCBJbWFnZU9iamVjdFNjaGVtYSA9IHpcbiAgICAudW5pb24oW0ltYWdlRGF0YU9iamVjdFNjaGVtYSwgSW1hZ2VVcmxPYmplY3RTY2hlbWEsIEltYWdlRmlsZUlkT2JqZWN0U2NoZW1hXSlcbiAgICAuZGVzY3JpYmUoJ0lubGluZSBpbWFnZSBkYXRhIG9yIHJlZmVyZW5jZXMgdG8gdXBsb2FkZWQgY29udGVudC4nKTtcbmNvbnN0IEZpbGVEYXRhT2JqZWN0U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIGRhdGE6IHpcbiAgICAgICAgLnVuaW9uKFt6LnN0cmluZygpLCB6Lmluc3RhbmNlb2YoVWludDhBcnJheSldKVxuICAgICAgICAuZGVzY3JpYmUoJ0Jhc2U2NCBlbmNvZGVkIGZpbGUgZGF0YSwgb3IgcmF3IGJ5dGVzIHRoYXQgd2lsbCBiZSBlbmNvZGVkIGF1dG9tYXRpY2FsbHkuJyksXG4gICAgbWVkaWFUeXBlOiB6XG4gICAgICAgIC5zdHJpbmcoKVxuICAgICAgICAuZGVzY3JpYmUoJ0lBTkEgbWVkaWEgdHlwZSBkZXNjcmliaW5nIHRoZSBmaWxlIGNvbnRlbnRzJyksXG4gICAgZmlsZW5hbWU6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ0ZpbGVuYW1lIGFzc29jaWF0ZWQgd2l0aCB0aGUgaW5saW5lIGRhdGEnKSxcbn0pO1xuY29uc3QgRmlsZVVybE9iamVjdFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB1cmw6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ1B1YmxpY2x5IGFjY2Vzc2libGUgVVJMIGZvciB0aGUgZmlsZSBjb250ZW50JyksXG4gICAgZmlsZW5hbWU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuY29uc3QgRmlsZUlkT2JqZWN0U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIGlkOiB6LnN0cmluZygpLmRlc2NyaWJlKCdPcGVuQUkgZmlsZSBJRCByZWZlcmVuY2luZyB1cGxvYWRlZCBjb250ZW50JyksXG4gICAgZmlsZW5hbWU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuY29uc3QgRmlsZVJlZmVyZW5jZVNjaGVtYSA9IHpcbiAgICAudW5pb24oW1xuICAgIHouc3RyaW5nKCkuZGVzY3JpYmUoJ0V4aXN0aW5nIGRhdGEgVVJMIG9yIGJhc2U2NCBzdHJpbmcnKSxcbiAgICBGaWxlRGF0YU9iamVjdFNjaGVtYSxcbiAgICBGaWxlVXJsT2JqZWN0U2NoZW1hLFxuICAgIEZpbGVJZE9iamVjdFNjaGVtYSxcbl0pXG4gICAgLmRlc2NyaWJlKCdJbmxpbmUgZGF0YSAod2l0aCBtZXRhZGF0YSkgb3IgcmVmZXJlbmNlcyBwb2ludGluZyB0byBmaWxlIGNvbnRlbnRzLicpO1xuY29uc3QgelN0cmluZ1dpdGhIaW50cyA9ICguLi5faGludHMpID0+IHouc3RyaW5nKCk7XG5leHBvcnQgY29uc3QgVG9vbE91dHB1dEltYWdlID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaW1hZ2UnKSxcbiAgICAvKipcbiAgICAgKiBJbmxpbmUgaW1hZ2UgY29udGVudCBvciBhIHJlZmVyZW5jZSB0byBhbiB1cGxvYWRlZCBmaWxlLiBBY2NlcHRzIGEgVVJML2RhdGEgVVJMIHN0cmluZyBvciBhblxuICAgICAqIG9iamVjdCBkZXNjcmliaW5nIHRoZSBkYXRhL3VybC9maWxlSWQgc291cmNlLlxuICAgICAqL1xuICAgIGltYWdlOiB6LnN0cmluZygpLm9yKEltYWdlT2JqZWN0U2NoZW1hKS5vcHRpb25hbCgpLFxuICAgIC8qKlxuICAgICAqIENvbnRyb2xzIHRoZSByZXF1ZXN0ZWQgbGV2ZWwgb2YgZGV0YWlsIGZvciB2aXNpb24gbW9kZWxzLlxuICAgICAqIFVzZSBhIHN0cmluZyB0byBhdm9pZCBjb25zdHJhaW5pbmcgZnV0dXJlIG1vZGVsIGNhcGFiaWxpdGllcy5cbiAgICAgKi9cbiAgICBkZXRhaWw6IHpTdHJpbmdXaXRoSGludHMoJ2xvdycsICdoaWdoJywgJ2F1dG8nKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgVG9vbE91dHB1dEZpbGVDb250ZW50ID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnZmlsZScpLFxuICAgIC8qKlxuICAgICAqIEZpbGUgb3V0cHV0IHJlZmVyZW5jZS4gUHJvdmlkZSBlaXRoZXIgYSBzdHJpbmcgKGRhdGEgVVJMIC8gYmFzZTY0KSwgYSBkYXRhIG9iamVjdCAocmVxdWlyZXNcbiAgICAgKiBtZWRpYVR5cGUgKyBmaWxlbmFtZSksIG9yIGFuIG9iamVjdCBwb2ludGluZyB0byBhbiB1cGxvYWRlZCBmaWxlL1VSTC5cbiAgICAgKi9cbiAgICBmaWxlOiBGaWxlUmVmZXJlbmNlU2NoZW1hLFxufSk7XG5leHBvcnQgY29uc3QgQ29tcHV0ZXJUb29sT3V0cHV0ID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29tcHV0ZXJfc2NyZWVuc2hvdCcpLFxuICAgIC8qKlxuICAgICAqIEEgYmFzZTY0IGVuY29kZWQgaW1hZ2UgZGF0YSBvciBhIFVSTCByZXByZXNlbnRpbmcgdGhlIHNjcmVlbnNob3QuXG4gICAgICovXG4gICAgZGF0YTogei5zdHJpbmcoKS5kZXNjcmliZSgnQmFzZTY0IGVuY29kZWQgaW1hZ2UgZGF0YSBvciBVUkwnKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbXB1dGVyQWN0aW9ucyA9IHouZGlzY3JpbWluYXRlZFVuaW9uKCd0eXBlJywgW1xuICAgIHoub2JqZWN0KHsgdHlwZTogei5saXRlcmFsKCdzY3JlZW5zaG90JykgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ2NsaWNrJyksXG4gICAgICAgIHg6IHoubnVtYmVyKCksXG4gICAgICAgIHk6IHoubnVtYmVyKCksXG4gICAgICAgIGJ1dHRvbjogei5lbnVtKFsnbGVmdCcsICdyaWdodCcsICd3aGVlbCcsICdiYWNrJywgJ2ZvcndhcmQnXSksXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ2RvdWJsZV9jbGljaycpLFxuICAgICAgICB4OiB6Lm51bWJlcigpLFxuICAgICAgICB5OiB6Lm51bWJlcigpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdzY3JvbGwnKSxcbiAgICAgICAgeDogei5udW1iZXIoKSxcbiAgICAgICAgeTogei5udW1iZXIoKSxcbiAgICAgICAgc2Nyb2xsX3g6IHoubnVtYmVyKCksXG4gICAgICAgIHNjcm9sbF95OiB6Lm51bWJlcigpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCd0eXBlJyksXG4gICAgICAgIHRleHQ6IHouc3RyaW5nKCksXG4gICAgfSksXG4gICAgei5vYmplY3QoeyB0eXBlOiB6LmxpdGVyYWwoJ3dhaXQnKSB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnbW92ZScpLFxuICAgICAgICB4OiB6Lm51bWJlcigpLFxuICAgICAgICB5OiB6Lm51bWJlcigpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdrZXlwcmVzcycpLFxuICAgICAgICBrZXlzOiB6LmFycmF5KHouc3RyaW5nKCkpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdkcmFnJyksXG4gICAgICAgIHBhdGg6IHouYXJyYXkoei5vYmplY3QoeyB4OiB6Lm51bWJlcigpLCB5OiB6Lm51bWJlcigpIH0pKSxcbiAgICB9KSxcbl0pO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gTWVzc2FnZSB0eXBlc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuZXhwb3J0IGNvbnN0IEFzc2lzdGFudENvbnRlbnQgPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigndHlwZScsIFtcbiAgICBPdXRwdXRUZXh0LFxuICAgIFJlZnVzYWwsXG4gICAgQXVkaW9Db250ZW50LFxuICAgIEltYWdlQ29udGVudCxcbl0pO1xuY29uc3QgTWVzc2FnZUJhc2UgPSBJdGVtQmFzZS5leHRlbmQoe1xuICAgIC8qKlxuICAgICAqIEFueSBpdGVtIHdpdGhvdXQgYSB0eXBlIGlzIHRyZWF0ZWQgYXMgYSBtZXNzYWdlXG4gICAgICovXG4gICAgdHlwZTogei5saXRlcmFsKCdtZXNzYWdlJykub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IEFzc2lzdGFudE1lc3NhZ2VJdGVtID0gTWVzc2FnZUJhc2UuZXh0ZW5kKHtcbiAgICAvKipcbiAgICAgKiBSZXByZXNlbnRpbmcgYSBtZXNzYWdlIGZyb20gdGhlIGFzc2lzdGFudCAoaS5lLiB0aGUgbW9kZWwpXG4gICAgICovXG4gICAgcm9sZTogei5saXRlcmFsKCdhc3Npc3RhbnQnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgc3RhdHVzIG9mIHRoZSBtZXNzYWdlLlxuICAgICAqL1xuICAgIHN0YXR1czogei5lbnVtKFsnaW5fcHJvZ3Jlc3MnLCAnY29tcGxldGVkJywgJ2luY29tcGxldGUnXSksXG4gICAgLyoqXG4gICAgICogVGhlIGNvbnRlbnQgb2YgdGhlIG1lc3NhZ2UuXG4gICAgICovXG4gICAgY29udGVudDogei5hcnJheShBc3Npc3RhbnRDb250ZW50KSxcbn0pO1xuZXhwb3J0IGNvbnN0IFVzZXJDb250ZW50ID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgSW5wdXRUZXh0LFxuICAgIElucHV0SW1hZ2UsXG4gICAgSW5wdXRGaWxlLFxuICAgIEF1ZGlvQ29udGVudCxcbl0pO1xuZXhwb3J0IGNvbnN0IFVzZXJNZXNzYWdlSXRlbSA9IE1lc3NhZ2VCYXNlLmV4dGVuZCh7XG4gICAgLy8gdHlwZTogei5saXRlcmFsKCdtZXNzYWdlJyksXG4gICAgLyoqXG4gICAgICogUmVwcmVzZW50aW5nIGEgbWVzc2FnZSBmcm9tIHRoZSB1c2VyXG4gICAgICovXG4gICAgcm9sZTogei5saXRlcmFsKCd1c2VyJyksXG4gICAgLyoqXG4gICAgICogVGhlIGNvbnRlbnQgb2YgdGhlIG1lc3NhZ2UuXG4gICAgICovXG4gICAgY29udGVudDogei5hcnJheShVc2VyQ29udGVudCkub3Ioei5zdHJpbmcoKSksXG59KTtcbmNvbnN0IFN5c3RlbU1lc3NhZ2VJdGVtID0gTWVzc2FnZUJhc2UuZXh0ZW5kKHtcbiAgICAvLyB0eXBlOiB6LmxpdGVyYWwoJ21lc3NhZ2UnKSxcbiAgICAvKipcbiAgICAgKiBSZXByZXNlbnRpbmcgYSBzeXN0ZW0gbWVzc2FnZSB0byB0aGUgdXNlclxuICAgICAqL1xuICAgIHJvbGU6IHoubGl0ZXJhbCgnc3lzdGVtJyksXG4gICAgLyoqXG4gICAgICogVGhlIGNvbnRlbnQgb2YgdGhlIG1lc3NhZ2UuXG4gICAgICovXG4gICAgY29udGVudDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IE1lc3NhZ2VJdGVtID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3JvbGUnLCBbXG4gICAgU3lzdGVtTWVzc2FnZUl0ZW0sXG4gICAgQXNzaXN0YW50TWVzc2FnZUl0ZW0sXG4gICAgVXNlck1lc3NhZ2VJdGVtLFxuXSk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBUb29sIGNhbGwgdHlwZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmV4cG9ydCBjb25zdCBIb3N0ZWRUb29sQ2FsbEl0ZW0gPSBJdGVtQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaG9zdGVkX3Rvb2xfY2FsbCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSBuYW1lIG9mIHRoZSBob3N0ZWQgdG9vbC4gRm9yIGV4YW1wbGUgYHdlYl9zZWFyY2hfY2FsbGAgb3IgYGZpbGVfc2VhcmNoX2NhbGxgXG4gICAgICovXG4gICAgbmFtZTogei5zdHJpbmcoKS5kZXNjcmliZSgnVGhlIG5hbWUgb2YgdGhlIGhvc3RlZCB0b29sJyksXG4gICAgLyoqXG4gICAgICogVGhlIGFyZ3VtZW50cyBvZiB0aGUgaG9zdGVkIHRvb2wgY2FsbC5cbiAgICAgKi9cbiAgICBhcmd1bWVudHM6IHpcbiAgICAgICAgLnN0cmluZygpXG4gICAgICAgIC5kZXNjcmliZSgnVGhlIGFyZ3VtZW50cyBvZiB0aGUgaG9zdGVkIHRvb2wgY2FsbCcpXG4gICAgICAgIC5vcHRpb25hbCgpLFxuICAgIC8qKlxuICAgICAqIFRoZSBzdGF0dXMgb2YgdGhlIHRvb2wgY2FsbC5cbiAgICAgKi9cbiAgICBzdGF0dXM6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAvKipcbiAgICAgKiBUaGUgcHJpbWFyeSBvdXRwdXQgb2YgdGhlIHRvb2wgY2FsbC4gQWRkaXRpb25hbCBvdXRwdXQgbWlnaHQgYmUgaW4gdGhlIGBwcm92aWRlckRhdGFgIGZpZWxkLlxuICAgICAqL1xuICAgIG91dHB1dDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgRnVuY3Rpb25DYWxsSXRlbSA9IEl0ZW1CYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdmdW5jdGlvbl9jYWxsJyksXG4gICAgLyoqXG4gICAgICogVGhlIElEIG9mIHRoZSB0b29sIGNhbGwuIFJlcXVpcmVkIHRvIG1hdGNoIHVwIHRoZSByZXNwZWN0aXZlIHRvb2wgY2FsbCByZXN1bHQuXG4gICAgICovXG4gICAgY2FsbElkOiB6LnN0cmluZygpLmRlc2NyaWJlKCdUaGUgSUQgb2YgdGhlIHRvb2wgY2FsbCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSBuYW1lIG9mIHRoZSBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBuYW1lOiB6LnN0cmluZygpLmRlc2NyaWJlKCdUaGUgbmFtZSBvZiB0aGUgZnVuY3Rpb24nKSxcbiAgICAvKipcbiAgICAgKiBUaGUgc3RhdHVzIG9mIHRoZSBmdW5jdGlvbiBjYWxsLlxuICAgICAqL1xuICAgIHN0YXR1czogei5lbnVtKFsnaW5fcHJvZ3Jlc3MnLCAnY29tcGxldGVkJywgJ2luY29tcGxldGUnXSkub3B0aW9uYWwoKSxcbiAgICAvKipcbiAgICAgKiBUaGUgYXJndW1lbnRzIG9mIHRoZSBmdW5jdGlvbiBjYWxsLlxuICAgICAqL1xuICAgIGFyZ3VtZW50czogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IFRvb2xDYWxsT3V0cHV0Q29udGVudCA9IHouZGlzY3JpbWluYXRlZFVuaW9uKCd0eXBlJywgW1xuICAgIFRvb2xPdXRwdXRUZXh0LFxuICAgIFRvb2xPdXRwdXRJbWFnZSxcbiAgICBUb29sT3V0cHV0RmlsZUNvbnRlbnQsXG5dKTtcbmV4cG9ydCBjb25zdCBUb29sQ2FsbFN0cnVjdHVyZWRPdXRwdXQgPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigndHlwZScsIFtcbiAgICBJbnB1dFRleHQsXG4gICAgSW5wdXRJbWFnZSxcbiAgICBJbnB1dEZpbGUsXG5dKTtcbmV4cG9ydCBjb25zdCBGdW5jdGlvbkNhbGxSZXN1bHRJdGVtID0gSXRlbUJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2Z1bmN0aW9uX2NhbGxfcmVzdWx0JyksXG4gICAgLyoqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIHRvb2wgdGhhdCB3YXMgY2FsbGVkXG4gICAgICovXG4gICAgbmFtZTogei5zdHJpbmcoKS5kZXNjcmliZSgnVGhlIG5hbWUgb2YgdGhlIHRvb2wnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgSUQgb2YgdGhlIHRvb2wgY2FsbC4gUmVxdWlyZWQgdG8gbWF0Y2ggdXAgdGhlIHJlc3BlY3RpdmUgdG9vbCBjYWxsIHJlc3VsdC5cbiAgICAgKi9cbiAgICBjYWxsSWQ6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ1RoZSBJRCBvZiB0aGUgdG9vbCBjYWxsJyksXG4gICAgLyoqXG4gICAgICogVGhlIHN0YXR1cyBvZiB0aGUgdG9vbCBjYWxsLlxuICAgICAqL1xuICAgIHN0YXR1czogei5lbnVtKFsnaW5fcHJvZ3Jlc3MnLCAnY29tcGxldGVkJywgJ2luY29tcGxldGUnXSksXG4gICAgLyoqXG4gICAgICogVGhlIG91dHB1dCBvZiB0aGUgdG9vbCBjYWxsLlxuICAgICAqL1xuICAgIG91dHB1dDogelxuICAgICAgICAudW5pb24oW1xuICAgICAgICB6LnN0cmluZygpLFxuICAgICAgICBUb29sQ2FsbE91dHB1dENvbnRlbnQsXG4gICAgICAgIHouYXJyYXkoVG9vbENhbGxTdHJ1Y3R1cmVkT3V0cHV0KSxcbiAgICBdKVxuICAgICAgICAuZGVzY3JpYmUoJ091dHB1dCByZXR1cm5lZCBieSB0aGUgdG9vbCBjYWxsLiBTdXBwb3J0cyBwbGFpbiBzdHJpbmdzLCBsZWdhY3kgVG9vbE91dHB1dCBpdGVtcywgb3Igc3RydWN0dXJlZCBpbnB1dF8qIGl0ZW1zLicpLFxufSk7XG5leHBvcnQgY29uc3QgQ29tcHV0ZXJVc2VDYWxsSXRlbSA9IEl0ZW1CYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb21wdXRlcl9jYWxsJyksXG4gICAgLyoqXG4gICAgICogVGhlIElEIG9mIHRoZSBjb21wdXRlciBjYWxsLiBSZXF1aXJlZCB0byBtYXRjaCB1cCB0aGUgcmVzcGVjdGl2ZSBjb21wdXRlciBjYWxsIHJlc3VsdC5cbiAgICAgKi9cbiAgICBjYWxsSWQ6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ1RoZSBJRCBvZiB0aGUgY29tcHV0ZXIgY2FsbCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSBzdGF0dXMgb2YgdGhlIGNvbXB1dGVyIGNhbGwuXG4gICAgICovXG4gICAgc3RhdHVzOiB6LmVudW0oWydpbl9wcm9ncmVzcycsICdjb21wbGV0ZWQnLCAnaW5jb21wbGV0ZSddKSxcbiAgICAvKipcbiAgICAgKiBUaGUgYWN0aW9uIHRvIGJlIHBlcmZvcm1lZCBieSB0aGUgY29tcHV0ZXIuXG4gICAgICovXG4gICAgYWN0aW9uOiBjb21wdXRlckFjdGlvbnMsXG59KTtcbmV4cG9ydCBjb25zdCBDb21wdXRlckNhbGxSZXN1bHRJdGVtID0gSXRlbUJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbXB1dGVyX2NhbGxfcmVzdWx0JyksXG4gICAgLyoqXG4gICAgICogVGhlIElEIG9mIHRoZSBjb21wdXRlciBjYWxsLiBSZXF1aXJlZCB0byBtYXRjaCB1cCB0aGUgcmVzcGVjdGl2ZSBjb21wdXRlciBjYWxsIHJlc3VsdC5cbiAgICAgKi9cbiAgICBjYWxsSWQ6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ1RoZSBJRCBvZiB0aGUgY29tcHV0ZXIgY2FsbCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSBvdXRwdXQgb2YgdGhlIGNvbXB1dGVyIGNhbGwuXG4gICAgICovXG4gICAgb3V0cHV0OiBDb21wdXRlclRvb2xPdXRwdXQsXG59KTtcbmV4cG9ydCBjb25zdCBTaGVsbEFjdGlvbiA9IHoub2JqZWN0KHtcbiAgICBjb21tYW5kczogei5hcnJheSh6LnN0cmluZygpKSxcbiAgICB0aW1lb3V0TXM6IHoubnVtYmVyKCkuaW50KCkubWluKDApLm9wdGlvbmFsKCksXG4gICAgbWF4T3V0cHV0TGVuZ3RoOiB6Lm51bWJlcigpLmludCgpLm1pbigwKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgU2hlbGxDYWxsSXRlbSA9IEl0ZW1CYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdzaGVsbF9jYWxsJyksXG4gICAgY2FsbElkOiB6LnN0cmluZygpLFxuICAgIHN0YXR1czogei5lbnVtKFsnaW5fcHJvZ3Jlc3MnLCAnY29tcGxldGVkJywgJ2luY29tcGxldGUnXSkub3B0aW9uYWwoKSxcbiAgICBhY3Rpb246IFNoZWxsQWN0aW9uLFxufSk7XG5leHBvcnQgY29uc3QgU2hlbGxDYWxsT3V0Y29tZSA9IHouZGlzY3JpbWluYXRlZFVuaW9uKCd0eXBlJywgW1xuICAgIHoub2JqZWN0KHsgdHlwZTogei5saXRlcmFsKCd0aW1lb3V0JykgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ2V4aXQnKSxcbiAgICAgICAgZXhpdENvZGU6IHoubnVtYmVyKCkuaW50KCkubnVsbGFibGUoKSxcbiAgICB9KSxcbl0pO1xuZXhwb3J0IGNvbnN0IFNoZWxsQ2FsbE91dHB1dENvbnRlbnQgPSB6XG4gICAgLm9iamVjdCh7XG4gICAgc3Rkb3V0OiB6LnN0cmluZygpLFxuICAgIHN0ZGVycjogei5zdHJpbmcoKSxcbiAgICBvdXRjb21lOiBTaGVsbENhbGxPdXRjb21lLFxufSlcbiAgICAucGFzc3Rocm91Z2goKTtcbmV4cG9ydCBjb25zdCBTaGVsbENhbGxSZXN1bHRJdGVtID0gSXRlbUJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3NoZWxsX2NhbGxfb3V0cHV0JyksXG4gICAgY2FsbElkOiB6LnN0cmluZygpLFxuICAgIG1heE91dHB1dExlbmd0aDogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgIG91dHB1dDogei5hcnJheShTaGVsbENhbGxPdXRwdXRDb250ZW50KSxcbn0pO1xuZXhwb3J0IGNvbnN0IEFwcGx5UGF0Y2hPcGVyYXRpb25DcmVhdGVGaWxlID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY3JlYXRlX2ZpbGUnKSxcbiAgICBwYXRoOiB6LnN0cmluZygpLFxuICAgIGRpZmY6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCBBcHBseVBhdGNoT3BlcmF0aW9uVXBkYXRlRmlsZSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3VwZGF0ZV9maWxlJyksXG4gICAgcGF0aDogei5zdHJpbmcoKSxcbiAgICBkaWZmOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgQXBwbHlQYXRjaE9wZXJhdGlvbkRlbGV0ZUZpbGUgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdkZWxldGVfZmlsZScpLFxuICAgIHBhdGg6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCBBcHBseVBhdGNoT3BlcmF0aW9uID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgQXBwbHlQYXRjaE9wZXJhdGlvbkNyZWF0ZUZpbGUsXG4gICAgQXBwbHlQYXRjaE9wZXJhdGlvblVwZGF0ZUZpbGUsXG4gICAgQXBwbHlQYXRjaE9wZXJhdGlvbkRlbGV0ZUZpbGUsXG5dKTtcbmV4cG9ydCBjb25zdCBBcHBseVBhdGNoQ2FsbEl0ZW0gPSBJdGVtQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnYXBwbHlfcGF0Y2hfY2FsbCcpLFxuICAgIGNhbGxJZDogei5zdHJpbmcoKSxcbiAgICBzdGF0dXM6IHouZW51bShbJ2luX3Byb2dyZXNzJywgJ2NvbXBsZXRlZCddKSxcbiAgICBvcGVyYXRpb246IEFwcGx5UGF0Y2hPcGVyYXRpb24sXG59KTtcbmV4cG9ydCBjb25zdCBBcHBseVBhdGNoQ2FsbFJlc3VsdEl0ZW0gPSBJdGVtQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnYXBwbHlfcGF0Y2hfY2FsbF9vdXRwdXQnKSxcbiAgICBjYWxsSWQ6IHouc3RyaW5nKCksXG4gICAgc3RhdHVzOiB6LmVudW0oWydjb21wbGV0ZWQnLCAnZmFpbGVkJ10pLFxuICAgIG91dHB1dDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgVG9vbENhbGxJdGVtID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgQ29tcHV0ZXJVc2VDYWxsSXRlbSxcbiAgICBTaGVsbENhbGxJdGVtLFxuICAgIEFwcGx5UGF0Y2hDYWxsSXRlbSxcbiAgICBGdW5jdGlvbkNhbGxJdGVtLFxuICAgIEhvc3RlZFRvb2xDYWxsSXRlbSxcbl0pO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gU3BlY2lhbCBpdGVtIHR5cGVzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5leHBvcnQgY29uc3QgUmVhc29uaW5nSXRlbSA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICBpZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVhc29uaW5nJyksXG4gICAgLyoqXG4gICAgICogVGhlIHVzZXIgZmFjaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSByZWFzb25pbmcuIEFkZGl0aW9uYWwgaW5mb3JtYXRpb24gbWlnaHQgYmUgaW4gdGhlIGBwcm92aWRlckRhdGFgIGZpZWxkLlxuICAgICAqL1xuICAgIGNvbnRlbnQ6IHouYXJyYXkoSW5wdXRUZXh0KSxcbiAgICAvKipcbiAgICAgKiBUaGUgcmF3IHJlYXNvbmluZyB0ZXh0IGZyb20gdGhlIG1vZGVsLlxuICAgICAqL1xuICAgIHJhd0NvbnRlbnQ6IHouYXJyYXkoUmVhc29uaW5nVGV4dCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IENvbXBhY3Rpb25JdGVtID0gSXRlbUJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbXBhY3Rpb24nKSxcbiAgICAvKipcbiAgICAgKiBFbmNyeXB0ZWQgcGF5bG9hZCByZXR1cm5lZCBieSB0aGUgY29tcGFjdGlvbiBlbmRwb2ludC5cbiAgICAgKi9cbiAgICBlbmNyeXB0ZWRfY29udGVudDogei5zdHJpbmcoKSxcbiAgICAvKipcbiAgICAgKiBJZGVudGlmaWVyIGZvciB0aGUgY29tcGFjdGlvbiBpdGVtLlxuICAgICAqL1xuICAgIGlkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgLyoqXG4gICAgICogSWRlbnRpZmllciBmb3IgdGhlIGdlbmVyYXRvciBvZiB0aGlzIGNvbXBhY3Rpb24gaXRlbS5cbiAgICAgKi9cbiAgICBjcmVhdGVkX2J5OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbi8qKlxuICogVGhpcyBpcyBhIGNhdGNoIGFsbCBmb3IgaXRlbXMgdGhhdCBhcmUgbm90IHBhcnQgb2YgdGhlIHByb3RvY29sLlxuICpcbiAqIEZvciBleGFtcGxlLCBhIG1vZGVsIG1pZ2h0IHJldHVybiBhbiBpdGVtIHRoYXQgaXMgbm90IHBhcnQgb2YgdGhlIHByb3RvY29sIHVzaW5nIHRoaXMgdHlwZS5cbiAqXG4gKiBJbiB0aGF0IGNhc2UgZXZlcnl0aGluZyByZXR1cm5lZCBmcm9tIHRoZSBtb2RlbCBzaG91bGQgYmUgcGFzc2VkIGluIHRoZSBgcHJvdmlkZXJEYXRhYCBmaWVsZC5cbiAqXG4gKiBUaGlzIGVuYWJsZXMgbmV3IGZlYXR1cmVzIHRvIGJlIGFkZGVkIHRvIGJlIGFkZGVkIGJ5IGEgbW9kZWwgcHJvdmlkZXIgd2l0aG91dCBicmVha2luZyB0aGUgcHJvdG9jb2wuXG4gKi9cbmV4cG9ydCBjb25zdCBVbmtub3duSXRlbSA9IEl0ZW1CYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCd1bmtub3duJyksXG59KTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEpvaW5lZCBpdGVtIHR5cGVzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5leHBvcnQgY29uc3QgT3V0cHV0TW9kZWxJdGVtID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgQXNzaXN0YW50TWVzc2FnZUl0ZW0sXG4gICAgSG9zdGVkVG9vbENhbGxJdGVtLFxuICAgIEZ1bmN0aW9uQ2FsbEl0ZW0sXG4gICAgQ29tcHV0ZXJVc2VDYWxsSXRlbSxcbiAgICBTaGVsbENhbGxJdGVtLFxuICAgIEFwcGx5UGF0Y2hDYWxsSXRlbSxcbiAgICBGdW5jdGlvbkNhbGxSZXN1bHRJdGVtLFxuICAgIFNoZWxsQ2FsbFJlc3VsdEl0ZW0sXG4gICAgQXBwbHlQYXRjaENhbGxSZXN1bHRJdGVtLFxuICAgIFJlYXNvbmluZ0l0ZW0sXG4gICAgQ29tcGFjdGlvbkl0ZW0sXG4gICAgVW5rbm93bkl0ZW0sXG5dKTtcbmV4cG9ydCBjb25zdCBNb2RlbEl0ZW0gPSB6LnVuaW9uKFtcbiAgICBVc2VyTWVzc2FnZUl0ZW0sXG4gICAgQXNzaXN0YW50TWVzc2FnZUl0ZW0sXG4gICAgU3lzdGVtTWVzc2FnZUl0ZW0sXG4gICAgSG9zdGVkVG9vbENhbGxJdGVtLFxuICAgIEZ1bmN0aW9uQ2FsbEl0ZW0sXG4gICAgQ29tcHV0ZXJVc2VDYWxsSXRlbSxcbiAgICBTaGVsbENhbGxJdGVtLFxuICAgIEFwcGx5UGF0Y2hDYWxsSXRlbSxcbiAgICBGdW5jdGlvbkNhbGxSZXN1bHRJdGVtLFxuICAgIENvbXB1dGVyQ2FsbFJlc3VsdEl0ZW0sXG4gICAgU2hlbGxDYWxsUmVzdWx0SXRlbSxcbiAgICBBcHBseVBhdGNoQ2FsbFJlc3VsdEl0ZW0sXG4gICAgUmVhc29uaW5nSXRlbSxcbiAgICBDb21wYWN0aW9uSXRlbSxcbiAgICBVbmtub3duSXRlbSxcbl0pO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gTWV0YSBkYXRhIHR5cGVzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5leHBvcnQgY29uc3QgUmVxdWVzdFVzYWdlRGF0YSA9IHoub2JqZWN0KHtcbiAgICBpbnB1dFRva2Vuczogei5udW1iZXIoKSxcbiAgICBvdXRwdXRUb2tlbnM6IHoubnVtYmVyKCksXG4gICAgdG90YWxUb2tlbnM6IHoubnVtYmVyKCksXG4gICAgaW5wdXRUb2tlbnNEZXRhaWxzOiB6LnJlY29yZCh6LnN0cmluZygpLCB6Lm51bWJlcigpKS5vcHRpb25hbCgpLFxuICAgIG91dHB1dFRva2Vuc0RldGFpbHM6IHoucmVjb3JkKHouc3RyaW5nKCksIHoubnVtYmVyKCkpLm9wdGlvbmFsKCksXG4gICAgZW5kcG9pbnQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IFVzYWdlRGF0YSA9IHoub2JqZWN0KHtcbiAgICByZXF1ZXN0czogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgIGlucHV0VG9rZW5zOiB6Lm51bWJlcigpLFxuICAgIG91dHB1dFRva2Vuczogei5udW1iZXIoKSxcbiAgICB0b3RhbFRva2Vuczogei5udW1iZXIoKSxcbiAgICBpbnB1dFRva2Vuc0RldGFpbHM6IHpcbiAgICAgICAgLnVuaW9uKFtcbiAgICAgICAgei5yZWNvcmQoei5zdHJpbmcoKSwgei5udW1iZXIoKSksXG4gICAgICAgIHouYXJyYXkoei5yZWNvcmQoei5zdHJpbmcoKSwgei5udW1iZXIoKSkpLFxuICAgIF0pXG4gICAgICAgIC5vcHRpb25hbCgpLFxuICAgIG91dHB1dFRva2Vuc0RldGFpbHM6IHpcbiAgICAgICAgLnVuaW9uKFtcbiAgICAgICAgei5yZWNvcmQoei5zdHJpbmcoKSwgei5udW1iZXIoKSksXG4gICAgICAgIHouYXJyYXkoei5yZWNvcmQoei5zdHJpbmcoKSwgei5udW1iZXIoKSkpLFxuICAgIF0pXG4gICAgICAgIC5vcHRpb25hbCgpLFxuICAgIHJlcXVlc3RVc2FnZUVudHJpZXM6IHouYXJyYXkoUmVxdWVzdFVzYWdlRGF0YSkub3B0aW9uYWwoKSxcbn0pO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gU3RyZWFtIGV2ZW50IHR5cGVzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEV2ZW50IHJldHVybmVkIGJ5IHRoZSBtb2RlbCB3aGVuIG5ldyBvdXRwdXQgdGV4dCBpcyBhdmFpbGFibGUgdG8gc3RyZWFtIHRvIHRoZSB1c2VyLlxuICovXG5leHBvcnQgY29uc3QgU3RyZWFtRXZlbnRUZXh0U3RyZWFtID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnb3V0cHV0X3RleHRfZGVsdGEnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgZGVsdGEgdGV4dCB0aGF0IHdhcyBzdHJlYW1lZCBieSB0aGUgbW9kZWx0byB0aGUgdXNlci5cbiAgICAgKi9cbiAgICBkZWx0YTogei5zdHJpbmcoKSxcbn0pO1xuLyoqXG4gKiBFdmVudCByZXR1cm5lZCBieSB0aGUgbW9kZWwgd2hlbiBhIG5ldyByZXNwb25zZSBpcyBzdGFydGVkLlxuICovXG5leHBvcnQgY29uc3QgU3RyZWFtRXZlbnRSZXNwb25zZVN0YXJ0ZWQgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZV9zdGFydGVkJyksXG59KTtcbi8qKlxuICogRXZlbnQgcmV0dXJuZWQgYnkgdGhlIG1vZGVsIHdoZW4gYSByZXNwb25zZSBpcyBjb21wbGV0ZWQuXG4gKi9cbmV4cG9ydCBjb25zdCBTdHJlYW1FdmVudFJlc3BvbnNlQ29tcGxldGVkID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2VfZG9uZScpLFxuICAgIC8qKlxuICAgICAqIFRoZSByZXNwb25zZSBmcm9tIHRoZSBtb2RlbC5cbiAgICAgKi9cbiAgICByZXNwb25zZTogU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIElEIG9mIHRoZSByZXNwb25zZS5cbiAgICAgICAgICovXG4gICAgICAgIGlkOiB6LnN0cmluZygpLFxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHVzYWdlIGRhdGEgZm9yIHRoZSByZXNwb25zZS5cbiAgICAgICAgICovXG4gICAgICAgIHVzYWdlOiBVc2FnZURhdGEsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgb3V0cHV0IGZyb20gdGhlIG1vZGVsLlxuICAgICAgICAgKi9cbiAgICAgICAgb3V0cHV0OiB6LmFycmF5KE91dHB1dE1vZGVsSXRlbSksXG4gICAgfSksXG59KTtcbi8qKlxuICogRXZlbnQgcmV0dXJuZWQgZm9yIGV2ZXJ5IGl0ZW0gdGhhdCBnZXRzIHN0cmVhbWVkIHRvIHRoZSBtb2RlbC4gVXNlZCB0byBleHBvc2UgdGhlIHJhdyBldmVudHNcbiAqIGZyb20gdGhlIG1vZGVsLlxuICovXG5leHBvcnQgY29uc3QgU3RyZWFtRXZlbnRHZW5lcmljSXRlbSA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ21vZGVsJyksXG4gICAgZXZlbnQ6IHouYW55KCkuZGVzY3JpYmUoJ1RoZSBldmVudCBmcm9tIHRoZSBtb2RlbCcpLFxufSk7XG5leHBvcnQgY29uc3QgU3RyZWFtRXZlbnQgPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigndHlwZScsIFtcbiAgICBTdHJlYW1FdmVudFRleHRTdHJlYW0sXG4gICAgU3RyZWFtRXZlbnRSZXNwb25zZUNvbXBsZXRlZCxcbiAgICBTdHJlYW1FdmVudFJlc3BvbnNlU3RhcnRlZCxcbiAgICBTdHJlYW1FdmVudEdlbmVyaWNJdGVtLFxuXSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcm90b2NvbC5tanMubWFwIiwiaW1wb3J0IHsgUmVhZGFibGVTdHJlYW0gYXMgX1JlYWRhYmxlU3RyZWFtLCBUcmFuc2Zvcm1TdHJlYW0sIFJlYWRhYmxlLCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvX3NoaW1zJztcbmltcG9ydCB7IGdldFR1cm5JbnB1dCB9IGZyb20gXCIuL3J1bm5lci9pdGVtcy5tanNcIjtcbmltcG9ydCBsb2dnZXIgZnJvbSBcIi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IHsgU3RyZWFtRXZlbnRUZXh0U3RyZWFtIH0gZnJvbSBcIi4vdHlwZXMvcHJvdG9jb2wubWpzXCI7XG5mdW5jdGlvbiBjb21iaW5lQWJvcnRTaWduYWxzKC4uLnNpZ25hbHMpIHtcbiAgICBjb25zdCBhY3RpdmUgPSBzaWduYWxzLmZpbHRlcihCb29sZWFuKTtcbiAgICBpZiAoYWN0aXZlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25zdCBhbnlGbiA9IEFib3J0U2lnbmFsLmFueTtcbiAgICBpZiAodHlwZW9mIGFueUZuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gYW55Rm4oYWN0aXZlKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgQWJvcnRTaWduYWwuYW55IGZhaWxlZCwgZmFsbGluZyBiYWNrOiAke2Vycm9yfWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGNvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gICAgY29uc3QgYWJvcnRDb21iaW5lZCA9IChyZWFzb24pID0+IHtcbiAgICAgICAgaWYgKCFjb250cm9sbGVyLnNpZ25hbC5hYm9ydGVkKSB7XG4gICAgICAgICAgICBjb250cm9sbGVyLmFib3J0KHJlYXNvbik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGZvciAoY29uc3Qgc2lnbmFsIG9mIGFjdGl2ZSkge1xuICAgICAgICBpZiAoc2lnbmFsLmFib3J0ZWQpIHtcbiAgICAgICAgICAgIGFib3J0Q29tYmluZWQoc2lnbmFsLnJlYXNvbik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBzaWduYWwuYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCAoKSA9PiBhYm9ydENvbWJpbmVkKHNpZ25hbC5yZWFzb24pLCB7XG4gICAgICAgICAgICBvbmNlOiB0cnVlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbnRyb2xsZXIuc2lnbmFsO1xufVxuY2xhc3MgUnVuUmVzdWx0QmFzZSB7XG4gICAgc3RhdGU7XG4gICAgY29uc3RydWN0b3Ioc3RhdGUpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgaGlzdG9yeSBvZiB0aGUgYWdlbnQgcnVuLiBUaGlzIGluY2x1ZGVzIHRoZSBpbnB1dCBpdGVtcyBhbmQgdGhlIG5ldyBpdGVtcyBnZW5lcmF0ZWQgZHVyaW5nXG4gICAgICogdGhlIGFnZW50IHJ1bi5cbiAgICAgKlxuICAgICAqIFRoaXMgY2FuIGJlIHVzZWQgYXMgaW5wdXRzIGZvciB0aGUgbmV4dCBhZ2VudCBydW4uXG4gICAgICovXG4gICAgZ2V0IGhpc3RvcnkoKSB7XG4gICAgICAgIHJldHVybiBnZXRUdXJuSW5wdXQodGhpcy5pbnB1dCwgdGhpcy5uZXdJdGVtcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBuZXcgaXRlbXMgZ2VuZXJhdGVkIGR1cmluZyB0aGUgYWdlbnQgcnVuLiBUaGVzZSBpbmNsdWRlIHRoaW5ncyBsaWtlIG5ldyBtZXNzYWdlcywgdG9vbFxuICAgICAqIGNhbGxzIGFuZCB0aGVpciBvdXRwdXRzLCBldGMuXG4gICAgICpcbiAgICAgKiBJdCBkb2VzIG5vdCBpbmNsdWRlIGluZm9ybWF0aW9uIGFib3V0IHRoZSBhZ2VudHMgYW5kIGluc3RlYWQgcmVwcmVzZW50cyB0aGUgbW9kZWwgZGF0YS5cbiAgICAgKlxuICAgICAqIEZvciB0aGUgb3V0cHV0IGluY2x1ZGluZyB0aGUgYWdlbnRzLCB1c2UgdGhlIGBuZXdJdGVtc2AgcHJvcGVydHkuXG4gICAgICovXG4gICAgZ2V0IG91dHB1dCgpIHtcbiAgICAgICAgcmV0dXJuIGdldFR1cm5JbnB1dChbXSwgdGhpcy5uZXdJdGVtcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgY29weSBvZiB0aGUgb3JpZ2luYWwgaW5wdXQgaXRlbXMuXG4gICAgICovXG4gICAgZ2V0IGlucHV0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5fb3JpZ2luYWxJbnB1dDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHJ1biBpdGVtcyBnZW5lcmF0ZWQgZHVyaW5nIHRoZSBhZ2VudCBydW4uIFRoaXMgYXNzb2NpYXRlcyB0aGUgbW9kZWwgZGF0YSB3aXRoIHRoZSBhZ2VudHMuXG4gICAgICpcbiAgICAgKiBGb3IgdGhlIG1vZGVsIGRhdGEgdGhhdCBjYW4gYmUgdXNlZCBhcyBpbnB1dHMgZm9yIHRoZSBuZXh0IGFnZW50IHJ1biwgdXNlIHRoZSBgb3V0cHV0YCBwcm9wZXJ0eS5cbiAgICAgKi9cbiAgICBnZXQgbmV3SXRlbXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlLl9nZW5lcmF0ZWRJdGVtcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHJhdyBMTE0gcmVzcG9uc2VzIGdlbmVyYXRlZCBieSB0aGUgbW9kZWwgZHVyaW5nIHRoZSBhZ2VudCBydW4uXG4gICAgICovXG4gICAgZ2V0IHJhd1Jlc3BvbnNlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuX21vZGVsUmVzcG9uc2VzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgbGFzdCByZXNwb25zZSBJRCBnZW5lcmF0ZWQgYnkgdGhlIG1vZGVsIGR1cmluZyB0aGUgYWdlbnQgcnVuLlxuICAgICAqL1xuICAgIGdldCBsYXN0UmVzcG9uc2VJZCgpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2VzID0gdGhpcy5yYXdSZXNwb25zZXM7XG4gICAgICAgIHJldHVybiByZXNwb25zZXMgJiYgcmVzcG9uc2VzLmxlbmd0aCA+IDBcbiAgICAgICAgICAgID8gcmVzcG9uc2VzW3Jlc3BvbnNlcy5sZW5ndGggLSAxXS5yZXNwb25zZUlkXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGxhc3QgYWdlbnQgdGhhdCB3YXMgcnVuXG4gICAgICovXG4gICAgZ2V0IGxhc3RBZ2VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuX2N1cnJlbnRBZ2VudDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR3VhcmRyYWlsIHJlc3VsdHMgZm9yIHRoZSBpbnB1dCBtZXNzYWdlcy5cbiAgICAgKi9cbiAgICBnZXQgaW5wdXRHdWFyZHJhaWxSZXN1bHRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5faW5wdXRHdWFyZHJhaWxSZXN1bHRzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHdWFyZHJhaWwgcmVzdWx0cyBmb3IgdGhlIGZpbmFsIG91dHB1dCBvZiB0aGUgYWdlbnQuXG4gICAgICovXG4gICAgZ2V0IG91dHB1dEd1YXJkcmFpbFJlc3VsdHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlLl9vdXRwdXRHdWFyZHJhaWxSZXN1bHRzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHdWFyZHJhaWwgcmVzdWx0cyBmb3IgdG9vbCBpbnB1dHMuXG4gICAgICovXG4gICAgZ2V0IHRvb2xJbnB1dEd1YXJkcmFpbFJlc3VsdHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlLl90b29sSW5wdXRHdWFyZHJhaWxSZXN1bHRzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHdWFyZHJhaWwgcmVzdWx0cyBmb3IgdG9vbCBvdXRwdXRzLlxuICAgICAqL1xuICAgIGdldCB0b29sT3V0cHV0R3VhcmRyYWlsUmVzdWx0cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuX3Rvb2xPdXRwdXRHdWFyZHJhaWxSZXN1bHRzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBbnkgaW50ZXJydXB0aW9ucyB0aGF0IG9jY3VycmVkIGR1cmluZyB0aGUgYWdlbnQgcnVuIGZvciBleGFtcGxlIGZvciB0b29sIGFwcHJvdmFscy5cbiAgICAgKi9cbiAgICBnZXQgaW50ZXJydXB0aW9ucygpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuX2N1cnJlbnRTdGVwPy50eXBlID09PSAnbmV4dF9zdGVwX2ludGVycnVwdGlvbicpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXRlLl9jdXJyZW50U3RlcC5kYXRhLmludGVycnVwdGlvbnM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgZmluYWwgb3V0cHV0IG9mIHRoZSBhZ2VudC4gSWYgdGhlIG91dHB1dCB0eXBlIHdhcyBzZXQgdG8gYW55dGhpbmcgb3RoZXIgdGhhbiBgdGV4dGAsXG4gICAgICogdGhpcyB3aWxsIGJlIHBhcnNlZCBlaXRoZXIgYXMgSlNPTiBvciB1c2luZyB0aGUgWm9kIHNjaGVtYSB5b3UgcHJvdmlkZWQuXG4gICAgICovXG4gICAgZ2V0IGZpbmFsT3V0cHV0KCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5fY3VycmVudFN0ZXA/LnR5cGUgPT09ICduZXh0X3N0ZXBfZmluYWxfb3V0cHV0Jykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuX2N1cnJlbnRBZ2VudC5wcm9jZXNzRmluYWxPdXRwdXQodGhpcy5zdGF0ZS5fY3VycmVudFN0ZXAub3V0cHV0KTtcbiAgICAgICAgfVxuICAgICAgICBsb2dnZXIud2FybignQWNjZXNzZWQgZmluYWxPdXRwdXQgYmVmb3JlIGFnZW50IHJ1biBpcyBjb21wbGV0ZWQuJyk7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxufVxuLyoqXG4gKiBUaGUgcmVzdWx0IG9mIGFuIGFnZW50IHJ1bi5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1blJlc3VsdCBleHRlbmRzIFJ1blJlc3VsdEJhc2Uge1xuICAgIGNvbnN0cnVjdG9yKHN0YXRlKSB7XG4gICAgICAgIHN1cGVyKHN0YXRlKTtcbiAgICB9XG59XG4vKipcbiAqIFRoZSByZXN1bHQgb2YgYW4gYWdlbnQgcnVuIGluIHN0cmVhbWluZyBtb2RlLlxuICovXG5leHBvcnQgY2xhc3MgU3RyZWFtZWRSdW5SZXN1bHQgZXh0ZW5kcyBSdW5SZXN1bHRCYXNlIHtcbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCBhZ2VudCB0aGF0IGlzIHJ1bm5pbmdcbiAgICAgKi9cbiAgICBnZXQgY3VycmVudEFnZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sYXN0QWdlbnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IHR1cm4gbnVtYmVyXG4gICAgICovXG4gICAgY3VycmVudFR1cm4gPSAwO1xuICAgIC8qKlxuICAgICAqIFRoZSBtYXhpbXVtIG51bWJlciBvZiB0dXJucyB0aGF0IGNhbiBiZSBydW5cbiAgICAgKi9cbiAgICBtYXhUdXJucztcbiAgICAjZXJyb3IgPSBudWxsO1xuICAgICNjb21iaW5lZFNpZ25hbDtcbiAgICAjYWJvcnRDb250cm9sbGVyO1xuICAgICNyZWFkYWJsZUNvbnRyb2xsZXI7XG4gICAgI3JlYWRhYmxlU3RyZWFtO1xuICAgICNjb21wbGV0ZWRQcm9taXNlO1xuICAgICNjb21wbGV0ZWRQcm9taXNlUmVzb2x2ZTtcbiAgICAjY29tcGxldGVkUHJvbWlzZVJlamVjdDtcbiAgICAjY2FuY2VsbGVkID0gZmFsc2U7XG4gICAgI3N0cmVhbUxvb3BQcm9taXNlO1xuICAgIGNvbnN0cnVjdG9yKHJlc3VsdCA9IHt9KSB7XG4gICAgICAgIHN1cGVyKHJlc3VsdC5zdGF0ZSk7XG4gICAgICAgIHRoaXMuI2Fib3J0Q29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICAgICAgdGhpcy4jY29tYmluZWRTaWduYWwgPSBjb21iaW5lQWJvcnRTaWduYWxzKHJlc3VsdC5zaWduYWwsIHRoaXMuI2Fib3J0Q29udHJvbGxlci5zaWduYWwpO1xuICAgICAgICB0aGlzLiNyZWFkYWJsZVN0cmVhbSA9IG5ldyBfUmVhZGFibGVTdHJlYW0oe1xuICAgICAgICAgICAgc3RhcnQ6IChjb250cm9sbGVyKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy4jcmVhZGFibGVDb250cm9sbGVyID0gY29udHJvbGxlcjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjYW5jZWw6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuI2Fib3J0Q29udHJvbGxlci5zaWduYWwuYWJvcnRlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiNhYm9ydENvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jY29tcGxldGVkUHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRoaXMuI2NvbXBsZXRlZFByb21pc2VSZXNvbHZlID0gcmVzb2x2ZTtcbiAgICAgICAgICAgIHRoaXMuI2NvbXBsZXRlZFByb21pc2VSZWplY3QgPSByZWplY3Q7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodGhpcy4jY29tYmluZWRTaWduYWwpIHtcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZUFib3J0ID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLiNjYW5jZWxsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLiNjYW5jZWxsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRyb2xsZXIgPSB0aGlzLiNyZWFkYWJsZUNvbnRyb2xsZXI7XG4gICAgICAgICAgICAgICAgdGhpcy4jcmVhZGFibGVDb250cm9sbGVyID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGlmIChjb250cm9sbGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBGYWlsZWQgdG8gY2xvc2UgcmVhZGFibGUgc3RyZWFtIG9uIGFib3J0OiAke2Vycn1gKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLiNjb21wbGV0ZWRQcm9taXNlUmVzb2x2ZT8uKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKHRoaXMuI2NvbWJpbmVkU2lnbmFsLmFib3J0ZWQpIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVBYm9ydCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jY29tYmluZWRTaWduYWwuYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBoYW5kbGVBYm9ydCwge1xuICAgICAgICAgICAgICAgICAgICBvbmNlOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEFkZHMgYW4gaXRlbSB0byB0aGUgc3RyZWFtIG9mIG91dHB1dCBpdGVtc1xuICAgICAqL1xuICAgIF9hZGRJdGVtKGl0ZW0pIHtcbiAgICAgICAgaWYgKCF0aGlzLmNhbmNlbGxlZCkge1xuICAgICAgICAgICAgdGhpcy4jcmVhZGFibGVDb250cm9sbGVyPy5lbnF1ZXVlKGl0ZW0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEluZGljYXRlcyB0aGF0IHRoZSBzdHJlYW0gaGFzIGJlZW4gY29tcGxldGVkXG4gICAgICovXG4gICAgX2RvbmUoKSB7XG4gICAgICAgIGlmICghdGhpcy5jYW5jZWxsZWQgJiYgdGhpcy4jcmVhZGFibGVDb250cm9sbGVyKSB7XG4gICAgICAgICAgICB0aGlzLiNyZWFkYWJsZUNvbnRyb2xsZXIuY2xvc2UoKTtcbiAgICAgICAgICAgIHRoaXMuI3JlYWRhYmxlQ29udHJvbGxlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMuI2NvbXBsZXRlZFByb21pc2VSZXNvbHZlPy4oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBIYW5kbGVzIGFuIGVycm9yIGluIHRoZSBzdHJlYW0gbG9vcC5cbiAgICAgKi9cbiAgICBfcmFpc2VFcnJvcihlcnIpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNhbmNlbGxlZCAmJiB0aGlzLiNyZWFkYWJsZUNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgIHRoaXMuI3JlYWRhYmxlQ29udHJvbGxlci5lcnJvcihlcnIpO1xuICAgICAgICAgICAgdGhpcy4jcmVhZGFibGVDb250cm9sbGVyID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI2Vycm9yID0gZXJyO1xuICAgICAgICB0aGlzLiNjb21wbGV0ZWRQcm9taXNlUmVqZWN0Py4oZXJyKTtcbiAgICAgICAgdGhpcy4jY29tcGxldGVkUHJvbWlzZS5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBSZXN1bHRlZCBpbiBhbiBlcnJvcjogJHtlfWApO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBzdHJlYW0gaGFzIGJlZW4gY2FuY2VsbGVkLlxuICAgICAqL1xuICAgIGdldCBjYW5jZWxsZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNjYW5jZWxsZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHVuZGVybHlpbmcgcmVhZGFibGUgc3RyZWFtLlxuICAgICAqIEByZXR1cm5zIEEgcmVhZGFibGUgc3RyZWFtIG9mIHRoZSBhZ2VudCBydW4uXG4gICAgICovXG4gICAgdG9TdHJlYW0oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNyZWFkYWJsZVN0cmVhbTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXdhaXQgdGhpcyBwcm9taXNlIHRvIGVuc3VyZSB0aGF0IHRoZSBzdHJlYW0gaGFzIGJlZW4gY29tcGxldGVkIGlmIHlvdSBhcmUgbm90IGNvbnN1bWluZyB0aGVcbiAgICAgKiBzdHJlYW0gZGlyZWN0bHkuXG4gICAgICovXG4gICAgZ2V0IGNvbXBsZXRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2NvbXBsZXRlZFByb21pc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVycm9yIHRocm93biBkdXJpbmcgdGhlIHJ1biwgaWYgYW55LlxuICAgICAqL1xuICAgIGdldCBlcnJvcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2Vycm9yO1xuICAgIH1cbiAgICB0b1RleHRTdHJlYW0ob3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IHN0cmVhbSA9IHRoaXMuI3JlYWRhYmxlU3RyZWFtLnBpcGVUaHJvdWdoKG5ldyBUcmFuc2Zvcm1TdHJlYW0oe1xuICAgICAgICAgICAgdHJhbnNmb3JtKGV2ZW50LCBjb250cm9sbGVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT09ICdyYXdfbW9kZWxfc3RyZWFtX2V2ZW50JyAmJlxuICAgICAgICAgICAgICAgICAgICBldmVudC5kYXRhLnR5cGUgPT09ICdvdXRwdXRfdGV4dF9kZWx0YScpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXRlbSA9IFN0cmVhbUV2ZW50VGV4dFN0cmVhbS5wYXJzZShldmVudC5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKGl0ZW0uZGVsdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pKTtcbiAgICAgICAgaWYgKG9wdGlvbnMuY29tcGF0aWJsZVdpdGhOb2RlU3RyZWFtcykge1xuICAgICAgICAgICAgcmV0dXJuIFJlYWRhYmxlLmZyb21XZWIoc3RyZWFtKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RyZWFtO1xuICAgIH1cbiAgICBbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jcmVhZGFibGVTdHJlYW1bU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIFNldHMgdGhlIHN0cmVhbSBsb29wIHByb21pc2UgdGhhdCBjb21wbGV0ZXMgd2hlbiB0aGUgaW50ZXJuYWwgc3RyZWFtIGxvb3AgZmluaXNoZXMuXG4gICAgICogVGhpcyBpcyB1c2VkIHRvIGRlZmVyIHRyYWNlIGVuZCB1bnRpbCBhbGwgYWdlbnQgd29yayBpcyBjb21wbGV0ZS5cbiAgICAgKi9cbiAgICBfc2V0U3RyZWFtTG9vcFByb21pc2UocHJvbWlzZSkge1xuICAgICAgICB0aGlzLiNzdHJlYW1Mb29wUHJvbWlzZSA9IHByb21pc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIFJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgc3RyZWFtIGxvb3AgY29tcGxldGVzLlxuICAgICAqIFRoaXMgaXMgdXNlZCBieSB0aGUgdHJhY2luZyBzeXN0ZW0gdG8gd2FpdCBmb3IgYWxsIGFnZW50IHdvcmsgYmVmb3JlIGVuZGluZyB0aGUgdHJhY2UuXG4gICAgICovXG4gICAgX2dldFN0cmVhbUxvb3BQcm9taXNlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jc3RyZWFtTG9vcFByb21pc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIFJldHVybnMgdGhlIGFib3J0IHNpZ25hbCB0aGF0IHNob3VsZCBiZSB1c2VkIHRvIGNhbmNlbCB0aGUgc3RyZWFtaW5nIHJ1bi5cbiAgICAgKi9cbiAgICBfZ2V0QWJvcnRTaWduYWwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNjb21iaW5lZFNpZ25hbDtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZXN1bHQubWpzLm1hcCIsImltcG9ydCB7IEFzeW5jTG9jYWxTdG9yYWdlIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZS9fc2hpbXMnO1xuaW1wb3J0IHsgZ2V0R2xvYmFsVHJhY2VQcm92aWRlciB9IGZyb20gXCIuL3Byb3ZpZGVyLm1qc1wiO1xuaW1wb3J0IHsgU3RyZWFtZWRSdW5SZXN1bHQgfSBmcm9tIFwiLi4vcmVzdWx0Lm1qc1wiO1xuY29uc3QgQUxTX1NZTUJPTCA9IFN5bWJvbC5mb3IoJ29wZW5haS5hZ2VudHMuY29yZS5hc3luY0xvY2FsU3RvcmFnZScpO1xubGV0IGxvY2FsRmFsbGJhY2tBbHM7XG4vLyBHbG9iYWwgc3ltYm9scyBlbnN1cmUgdGhhdCBpZiBtdWx0aXBsZSBjb3BpZXMgb2YgYWdlbnRzLWNvcmUgYXJlIGxvYWRlZFxuLy8gKGUuZy4sIHZpYSBkaWZmZXJlbnQgbnBtIHJlc29sdXRpb24gcGF0aHMgb3IgYnVuZGxlcnMpLCB0aGV5IGFsbCBzaGFyZSB0aGVcbi8vIHNhbWUgQXN5bmNMb2NhbFN0b3JhZ2UgaW5zdGFuY2UuIFRoaXMgcHJldmVudHMgbG9zaW5nIHRyYWNlL3NwYW4gc3RhdGUgd2hlbiBhXG4vLyBkb3duc3RyZWFtIHBhY2thZ2UgcHVsbHMgaW4gYSBkdXBsaWNhdGUgY29weS5cbmZ1bmN0aW9uIGdldENvbnRleHRBc3luY0xvY2FsU3RvcmFnZSgpIHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBnbG9iYWxTY29wZSA9IGdsb2JhbFRoaXM7XG4gICAgICAgIGNvbnN0IGdsb2JhbEFMUyA9IGdsb2JhbFNjb3BlW0FMU19TWU1CT0xdO1xuICAgICAgICBpZiAoZ2xvYmFsQUxTKSB7XG4gICAgICAgICAgICByZXR1cm4gZ2xvYmFsQUxTO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5ld0FMUyA9IG5ldyBBc3luY0xvY2FsU3RvcmFnZSgpO1xuICAgICAgICBnbG9iYWxTY29wZVtBTFNfU1lNQk9MXSA9IG5ld0FMUztcbiAgICAgICAgcmV0dXJuIG5ld0FMUztcbiAgICB9XG4gICAgY2F0Y2gge1xuICAgICAgICAvLyBBcyBhIGRlZmVuc2l2ZSBmYWxsYmFjayAoZS5nLiwgaWYgZ2xvYmFsVGhpcyBpcyBsb2NrZWQgZG93biBvciBBTFNcbiAgICAgICAgLy8gY29uc3RydWN0aW9uIHRocm93cyBpbiBhIGNvbnN0cmFpbmVkIHJ1bnRpbWUpLCBrZWVwIGEgbW9kdWxlLWxvY2FsIEFMUyBzb1xuICAgICAgICAvLyB0cmFjaW5nIHN0aWxsIGZ1bmN0aW9ucyBpbnN0ZWFkIG9mIGNyYXNoaW5nIGNhbGxlcnMuXG4gICAgICAgIGlmICghbG9jYWxGYWxsYmFja0Fscykge1xuICAgICAgICAgICAgbG9jYWxGYWxsYmFja0FscyA9IG5ldyBBc3luY0xvY2FsU3RvcmFnZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBsb2NhbEZhbGxiYWNrQWxzO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGdldEFjdGl2ZUNvbnRleHQoKSB7XG4gICAgY29uc3Qgc3RvcmUgPSBnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UoKS5nZXRTdG9yZSgpO1xuICAgIGlmIChzdG9yZT8uYWN0aXZlID09PSB0cnVlKSB7XG4gICAgICAgIHJldHVybiBzdG9yZTtcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiB3aWxsIGdldCB0aGUgY3VycmVudCB0cmFjZSBmcm9tIHRoZSBleGVjdXRpb24gY29udGV4dC5cbiAqXG4gKiBAcmV0dXJucyBUaGUgY3VycmVudCB0cmFjZSBvciBudWxsIGlmIHRoZXJlIGlzIG5vIHRyYWNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q3VycmVudFRyYWNlKCkge1xuICAgIGNvbnN0IGN1cnJlbnRUcmFjZSA9IGdldEFjdGl2ZUNvbnRleHQoKTtcbiAgICBpZiAoY3VycmVudFRyYWNlPy50cmFjZSkge1xuICAgICAgICByZXR1cm4gY3VycmVudFRyYWNlLnRyYWNlO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiB3aWxsIGdldCB0aGUgY3VycmVudCBzcGFuIGZyb20gdGhlIGV4ZWN1dGlvbiBjb250ZXh0LlxuICpcbiAqIEByZXR1cm5zIFRoZSBjdXJyZW50IHNwYW4gb3IgbnVsbCBpZiB0aGVyZSBpcyBubyBzcGFuLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q3VycmVudFNwYW4oKSB7XG4gICAgY29uc3QgY3VycmVudFNwYW4gPSBnZXRBY3RpdmVDb250ZXh0KCk7XG4gICAgaWYgKGN1cnJlbnRTcGFuPy5zcGFuKSB7XG4gICAgICAgIHJldHVybiBjdXJyZW50U3Bhbi5zcGFuO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbi8qKlxuICogVGhpcyBpcyBhbiBBc3luY0xvY2FsU3RvcmFnZSBpbnN0YW5jZSB0aGF0IHN0b3JlcyB0aGUgY3VycmVudCB0cmFjZS5cbiAqIEl0IHdpbGwgYXV0b21hdGljYWxseSBoYW5kbGUgdGhlIGV4ZWN1dGlvbiBjb250ZXh0IG9mIGRpZmZlcmVudCBldmVudCBsb29wIGV4ZWN1dGlvbnMuXG4gKlxuICogVGhlIGZ1bmN0aW9ucyBiZWxvdyBzaG91bGQgYmUgdGhlIG9ubHkgd2F5IHRoYXQgdGhpcyBjb250ZXh0IGdldHMgaW50ZXJmYWNlZCB3aXRoLlxuICovXG5mdW5jdGlvbiBfd3JhcEZ1bmN0aW9uV2l0aFRyYWNlTGlmZWN5Y2xlKGZuLCBjdXJyZW50Q29udGV4dCwgcHJldmlvdXNBbHNTdG9yZSkge1xuICAgIHJldHVybiBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHRyYWNlID0gZ2V0Q3VycmVudFRyYWNlKCk7XG4gICAgICAgIGlmICghdHJhY2UpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gdHJhY2UgZm91bmQnKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY2xlYW51cERlZmVycmVkID0gZmFsc2U7XG4gICAgICAgIGxldCBzdGFydGVkID0gZmFsc2U7XG4gICAgICAgIGNvbnN0IGNsZWFudXBDb250ZXh0ID0gKCkgPT4ge1xuICAgICAgICAgICAgY3VycmVudENvbnRleHQuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICBjdXJyZW50Q29udGV4dC50cmFjZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGN1cnJlbnRDb250ZXh0LnNwYW4gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBjdXJyZW50Q29udGV4dC5wcmV2aW91c1NwYW4gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UoKS5lbnRlcldpdGgocHJldmlvdXNBbHNTdG9yZSk7XG4gICAgICAgIH07XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0cmFjZS5zdGFydCgpO1xuICAgICAgICAgICAgc3RhcnRlZCA9IHRydWU7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBmbih0cmFjZSk7XG4gICAgICAgICAgICAvLyBJZiByZXN1bHQgaXMgYSBTdHJlYW1lZFJ1blJlc3VsdCwgZGVmZXIgdHJhY2UgZW5kIHVudGlsIHN0cmVhbSBsb29wIGNvbXBsZXRlc1xuICAgICAgICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFN0cmVhbWVkUnVuUmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RyZWFtTG9vcFByb21pc2UgPSByZXN1bHQuX2dldFN0cmVhbUxvb3BQcm9taXNlKCk7XG4gICAgICAgICAgICAgICAgaWYgKHN0cmVhbUxvb3BQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFudXBEZWZlcnJlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHN0cmVhbUxvb3BQcm9taXNlLmZpbmFsbHkoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhcnRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0cmFjZS5lbmQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhbnVwQ29udGV4dCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBGb3Igbm9uLXN0cmVhbWluZyByZXN1bHRzLCBlbmQgdHJhY2Ugc3luY2hyb25vdXNseVxuICAgICAgICAgICAgaWYgKHN0YXJ0ZWQpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0cmFjZS5lbmQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAvLyBJZiBjbGVhbnVwIHdhcyBkZWZlcnJlZCB0byB0aGUgc3RyZWFtaW5nIGxvb3AsIGtlZXAgdGhlIGNvbnRleHQgbWFya2VkXG4gICAgICAgICAgICAvLyBhY3RpdmUgc28gY29uY3VycmVudCB0cmFjZXMgZG8gbm90IGNsZWFyIGl0IHByZW1hdHVyZWx5LiBPdGhlcndpc2UsXG4gICAgICAgICAgICAvLyBtYXJrIGluYWN0aXZlIGFuZCByZXN0b3JlIG5vdy5cbiAgICAgICAgICAgIGlmICghY2xlYW51cERlZmVycmVkKSB7XG4gICAgICAgICAgICAgICAgY2xlYW51cENvbnRleHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCBjcmVhdGUgYSBuZXcgdHJhY2UgYW5kIGFzc2lnbiBpdCB0byB0aGUgZXhlY3V0aW9uIGNvbnRleHQgb2YgdGhlIGZ1bmN0aW9uXG4gKiBwYXNzZWQgdG8gaXQuXG4gKlxuICogQHBhcmFtIGZuIC0gVGhlIGZ1bmN0aW9uIHRvIHJ1biBhbmQgYXNzaWduIHRoZSB0cmFjZSBjb250ZXh0IHRvLlxuICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25zIGZvciB0aGUgY3JlYXRpb24gb2YgdGhlIHRyYWNlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB3aXRoVHJhY2UodHJhY2UsIGZuLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBuZXdUcmFjZSA9IHR5cGVvZiB0cmFjZSA9PT0gJ3N0cmluZydcbiAgICAgICAgPyBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlVHJhY2Uoe1xuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICAgIG5hbWU6IHRyYWNlLFxuICAgICAgICB9KVxuICAgICAgICA6IHRyYWNlO1xuICAgIGNvbnN0IGNvbnRleHQgPSB7XG4gICAgICAgIHRyYWNlOiBuZXdUcmFjZSxcbiAgICAgICAgYWN0aXZlOiB0cnVlLFxuICAgIH07XG4gICAgY29uc3QgcHJldmlvdXNBbHNTdG9yZSA9IGdldENvbnRleHRBc3luY0xvY2FsU3RvcmFnZSgpLmdldFN0b3JlKCk7XG4gICAgcmV0dXJuIGdldENvbnRleHRBc3luY0xvY2FsU3RvcmFnZSgpLnJ1bihjb250ZXh0LCBfd3JhcEZ1bmN0aW9uV2l0aFRyYWNlTGlmZWN5Y2xlKGZuLCBjb250ZXh0LCBwcmV2aW91c0Fsc1N0b3JlKSk7XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCBjaGVjayBpZiB0aGVyZSBpcyBhbiBleGlzdGluZyBhY3RpdmUgdHJhY2UgaW4gdGhlIGV4ZWN1dGlvbiBjb250ZXh0LiBJZiB0aGVyZVxuICogaXMsIGl0IHdpbGwgcnVuIHRoZSBnaXZlbiBmdW5jdGlvbiB3aXRoIHRoZSBleGlzdGluZyB0cmFjZS4gSWYgdGhlcmUgaXMgbm8gdHJhY2UsIGl0IHdpbGwgY3JlYXRlXG4gKiBhIG5ldyBvbmUgYW5kIGFzc2lnbiBpdCB0byB0aGUgZXhlY3V0aW9uIGNvbnRleHQgb2YgdGhlIGZ1bmN0aW9uLlxuICpcbiAqIEBwYXJhbSBmbiAtIFRoZSBmenVuY3Rpb24gdG8gcnVuIGFuZCBhc3NpZ24gdGhlIHRyYWNlIGNvbnRleHQgdG8uXG4gKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbnMgZm9yIHRoZSBjcmVhdGlvbiBvZiB0aGUgdHJhY2VcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldE9yQ3JlYXRlVHJhY2UoZm4sIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IGN1cnJlbnRUcmFjZSA9IGdldEN1cnJlbnRUcmFjZSgpO1xuICAgIGlmIChjdXJyZW50VHJhY2UpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IGZuKCk7XG4gICAgfVxuICAgIGNvbnN0IG5ld1RyYWNlID0gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVRyYWNlKG9wdGlvbnMpO1xuICAgIGNvbnN0IG5ld0NvbnRleHQgPSB7XG4gICAgICAgIHRyYWNlOiBuZXdUcmFjZSxcbiAgICAgICAgYWN0aXZlOiB0cnVlLFxuICAgIH07XG4gICAgY29uc3QgcHJldmlvdXNBbHNTdG9yZSA9IGdldENvbnRleHRBc3luY0xvY2FsU3RvcmFnZSgpLmdldFN0b3JlKCk7XG4gICAgcmV0dXJuIGdldENvbnRleHRBc3luY0xvY2FsU3RvcmFnZSgpLnJ1bihuZXdDb250ZXh0LCBfd3JhcEZ1bmN0aW9uV2l0aFRyYWNlTGlmZWN5Y2xlKGZuLCBuZXdDb250ZXh0LCBwcmV2aW91c0Fsc1N0b3JlKSk7XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCBzZXQgdGhlIGN1cnJlbnQgc3BhbiBpbiB0aGUgZXhlY3V0aW9uIGNvbnRleHQuXG4gKlxuICogQHBhcmFtIHNwYW4gLSBUaGUgc3BhbiB0byBzZXQgYXMgdGhlIGN1cnJlbnQgc3Bhbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldEN1cnJlbnRTcGFuKHNwYW4pIHtcbiAgICBjb25zdCBjb250ZXh0ID0gZ2V0QWN0aXZlQ29udGV4dCgpO1xuICAgIGlmICghY29udGV4dCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGV4aXN0aW5nIHRyYWNlIGZvdW5kJyk7XG4gICAgfVxuICAgIGlmIChjb250ZXh0LnNwYW4pIHtcbiAgICAgICAgY29udGV4dC5zcGFuLnByZXZpb3VzU3BhbiA9IGNvbnRleHQucHJldmlvdXNTcGFuO1xuICAgICAgICBjb250ZXh0LnByZXZpb3VzU3BhbiA9IGNvbnRleHQuc3BhbjtcbiAgICB9XG4gICAgc3Bhbi5wcmV2aW91c1NwYW4gPSBjb250ZXh0LnNwYW4gPz8gY29udGV4dC5wcmV2aW91c1NwYW47XG4gICAgY29udGV4dC5zcGFuID0gc3BhbjtcbiAgICBnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UoKS5lbnRlcldpdGgoY29udGV4dCk7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVzZXRDdXJyZW50U3BhbigpIHtcbiAgICBjb25zdCBjb250ZXh0ID0gZ2V0QWN0aXZlQ29udGV4dCgpO1xuICAgIGlmIChjb250ZXh0KSB7XG4gICAgICAgIGNvbnRleHQuc3BhbiA9IGNvbnRleHQucHJldmlvdXNTcGFuO1xuICAgICAgICBjb250ZXh0LnByZXZpb3VzU3BhbiA9IGNvbnRleHQucHJldmlvdXNTcGFuPy5wcmV2aW91c1NwYW47XG4gICAgICAgIGdldENvbnRleHRBc3luY0xvY2FsU3RvcmFnZSgpLmVudGVyV2l0aChjb250ZXh0KTtcbiAgICB9XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCBhZGQgYW4gZXJyb3IgdG8gdGhlIGN1cnJlbnQgc3Bhbi5cbiAqXG4gKiBAcGFyYW0gc3BhbkVycm9yIC0gVGhlIGVycm9yIHRvIGFkZCB0byB0aGUgY3VycmVudCBzcGFuLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkRXJyb3JUb0N1cnJlbnRTcGFuKHNwYW5FcnJvcikge1xuICAgIGNvbnN0IGN1cnJlbnRTcGFuID0gZ2V0Q3VycmVudFNwYW4oKTtcbiAgICBpZiAoY3VycmVudFNwYW4pIHtcbiAgICAgICAgY3VycmVudFNwYW4uc2V0RXJyb3Ioc3BhbkVycm9yKTtcbiAgICB9XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCBjbG9uZSB0aGUgY3VycmVudCBjb250ZXh0IGJ5IGNyZWF0aW5nIG5ldyBpbnN0YW5jZXMgb2YgdGhlIHRyYWNlLCBzcGFuLCBhbmRcbiAqIHByZXZpb3VzIHNwYW4uXG4gKlxuICogQHBhcmFtIGNvbnRleHQgLSBUaGUgY29udGV4dCB0byBjbG9uZS5cbiAqIEByZXR1cm5zIEEgY2xvbmUgb2YgdGhlIGNvbnRleHQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZUN1cnJlbnRDb250ZXh0KGNvbnRleHQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0cmFjZTogY29udGV4dC50cmFjZT8uY2xvbmUoKSxcbiAgICAgICAgc3BhbjogY29udGV4dC5zcGFuPy5jbG9uZSgpLFxuICAgICAgICBwcmV2aW91c1NwYW46IGNvbnRleHQucHJldmlvdXNTcGFuPy5jbG9uZSgpLFxuICAgICAgICBhY3RpdmU6IGNvbnRleHQuYWN0aXZlLFxuICAgIH07XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCBydW4gdGhlIGdpdmVuIGZ1bmN0aW9uIHdpdGggYSBuZXcgc3BhbiBjb250ZXh0LlxuICpcbiAqIEBwYXJhbSBmbiAtIFRoZSBmdW5jdGlvbiB0byBydW4gd2l0aCB0aGUgbmV3IHNwYW4gY29udGV4dC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdpdGhOZXdTcGFuQ29udGV4dChmbikge1xuICAgIGNvbnN0IGN1cnJlbnRDb250ZXh0ID0gZ2V0QWN0aXZlQ29udGV4dCgpO1xuICAgIGlmICghY3VycmVudENvbnRleHQpIHtcbiAgICAgICAgcmV0dXJuIGZuKCk7XG4gICAgfVxuICAgIGNvbnN0IGNvcHlPZkNvbnRleHQgPSBjbG9uZUN1cnJlbnRDb250ZXh0KGN1cnJlbnRDb250ZXh0KTtcbiAgICByZXR1cm4gZ2V0Q29udGV4dEFzeW5jTG9jYWxTdG9yYWdlKCkucnVuKGNvcHlPZkNvbnRleHQsIGZuKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbnRleHQubWpzLm1hcCIsImltcG9ydCBsb2dnZXIgZnJvbSBcIi4uL2xvZ2dlci5tanNcIjtcbmltcG9ydCB7IHRpbWVyIGFzIF90aW1lciwgaXNUcmFjaW5nTG9vcFJ1bm5pbmdCeURlZmF1bHQsIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZS9fc2hpbXMnO1xuaW1wb3J0IHsgdHJhY2luZyB9IGZyb20gXCIuLi9jb25maWcubWpzXCI7XG4vKipcbiAqIFByaW50cyB0aGUgdHJhY2VzIGFuZCBzcGFucyB0byB0aGUgY29uc29sZVxuICovXG5leHBvcnQgY2xhc3MgQ29uc29sZVNwYW5FeHBvcnRlciB7XG4gICAgYXN5bmMgZXhwb3J0KGl0ZW1zKSB7XG4gICAgICAgIGlmICh0cmFjaW5nLmRpc2FibGVkKSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1RyYWNpbmcgaXMgZGlzYWJsZWQuIFNraXBwaW5nIGV4cG9ydCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtcykge1xuICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3RyYWNlJykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbRXhwb3J0ZXJdIEV4cG9ydCB0cmFjZSB0cmFjZUlkPSR7aXRlbS50cmFjZUlkfSBuYW1lPSR7aXRlbS5uYW1lfSR7aXRlbS5ncm91cElkID8gYCBncm91cElkPSR7aXRlbS5ncm91cElkfWAgOiAnJ31gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbRXhwb3J0ZXJdIEV4cG9ydCBzcGFuOiAke0pTT04uc3RyaW5naWZ5KGl0ZW0pfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEJhdGNoVHJhY2VQcm9jZXNzb3Ige1xuICAgICNtYXhRdWV1ZVNpemU7XG4gICAgI21heEJhdGNoU2l6ZTtcbiAgICAjc2NoZWR1bGVEZWxheTtcbiAgICAjZXhwb3J0VHJpZ2dlclNpemU7XG4gICAgI2V4cG9ydGVyO1xuICAgICNidWZmZXIgPSBbXTtcbiAgICAjdGltZXI7XG4gICAgI3RpbWVvdXQgPSBudWxsO1xuICAgICNleHBvcnRJblByb2dyZXNzID0gZmFsc2U7XG4gICAgI3RpbWVvdXRBYm9ydENvbnRyb2xsZXIgPSBudWxsO1xuICAgIGNvbnN0cnVjdG9yKGV4cG9ydGVyLCB7IG1heFF1ZXVlU2l6ZSA9IDEwMDAsIG1heEJhdGNoU2l6ZSA9IDEwMCwgc2NoZWR1bGVEZWxheSA9IDUwMDAsIC8vIDUgc2Vjb25kc1xuICAgIGV4cG9ydFRyaWdnZXJSYXRpbyA9IDAuOCwgfSA9IHt9KSB7XG4gICAgICAgIHRoaXMuI21heFF1ZXVlU2l6ZSA9IG1heFF1ZXVlU2l6ZTtcbiAgICAgICAgdGhpcy4jbWF4QmF0Y2hTaXplID0gbWF4QmF0Y2hTaXplO1xuICAgICAgICB0aGlzLiNzY2hlZHVsZURlbGF5ID0gc2NoZWR1bGVEZWxheTtcbiAgICAgICAgdGhpcy4jZXhwb3J0VHJpZ2dlclNpemUgPSBtYXhRdWV1ZVNpemUgKiBleHBvcnRUcmlnZ2VyUmF0aW87XG4gICAgICAgIHRoaXMuI2V4cG9ydGVyID0gZXhwb3J0ZXI7XG4gICAgICAgIHRoaXMuI3RpbWVyID0gX3RpbWVyO1xuICAgICAgICBpZiAoaXNUcmFjaW5nTG9vcFJ1bm5pbmdCeURlZmF1bHQoKSkge1xuICAgICAgICAgICAgdGhpcy5zdGFydCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdBdXRvbWF0aWMgdHJhY2UgZXhwb3J0IGxvb3AgaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGVudmlyb25tZW50LiBZb3UgbmVlZCB0byBtYW51YWxseSBjYWxsIGBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuZm9yY2VGbHVzaCgpYCB0byBleHBvcnQgdHJhY2VzLicpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLiN0aW1lb3V0QWJvcnRDb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgICAgICB0aGlzLiNydW5FeHBvcnRMb29wKCk7XG4gICAgfVxuICAgIGFzeW5jICNzYWZlQWRkSXRlbShpdGVtKSB7XG4gICAgICAgIGlmICh0aGlzLiNidWZmZXIubGVuZ3RoICsgMSA+IHRoaXMuI21heFF1ZXVlU2l6ZSkge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdEcm9wcGluZyB0cmFjZSBiZWNhdXNlIGJ1ZmZlciBpcyBmdWxsJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gYWRkIHRoZSBpdGVtIHRvIHRoZSBidWZmZXJcbiAgICAgICAgdGhpcy4jYnVmZmVyLnB1c2goaXRlbSk7XG4gICAgICAgIGlmICh0aGlzLiNidWZmZXIubGVuZ3RoID4gdGhpcy4jZXhwb3J0VHJpZ2dlclNpemUpIHtcbiAgICAgICAgICAgIC8vIHN0YXJ0IGV4cG9ydGluZyBpbW1lZGlhdGVseVxuICAgICAgICAgICAgYXdhaXQgdGhpcy4jZXhwb3J0QmF0Y2hlcygpO1xuICAgICAgICB9XG4gICAgfVxuICAgICNydW5FeHBvcnRMb29wKCkge1xuICAgICAgICB0aGlzLiN0aW1lb3V0ID0gdGhpcy4jdGltZXIuc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAvLyBzY2hlZHVsZWQgZXhwb3J0XG4gICAgICAgICAgICBhd2FpdCB0aGlzLiNleHBvcnRCYXRjaGVzKCk7XG4gICAgICAgICAgICB0aGlzLiNydW5FeHBvcnRMb29wKCk7XG4gICAgICAgIH0sIHRoaXMuI3NjaGVkdWxlRGVsYXkpO1xuICAgICAgICAvLyBXZSBzZXQgdGhpcyBzbyB0aGF0IE5vZGUgbm8gbG9uZ2VyIGNvbnNpZGVycyB0aGlzIHBhcnQgb2YgdGhlIGV2ZW50IGxvb3AgYW5kIGtlZXBzIHRoZVxuICAgICAgICAvLyBwcm9jZXNzIGFsaXZlIHVudGlsIHRoZSB0aW1lciBpcyBkb25lLlxuICAgICAgICBpZiAodHlwZW9mIHRoaXMuI3RpbWVvdXQudW5yZWYgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRoaXMuI3RpbWVvdXQudW5yZWYoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyAjZXhwb3J0QmF0Y2hlcyhmb3JjZSA9IGZhbHNlKSB7XG4gICAgICAgIGlmICh0aGlzLiNidWZmZXIubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbG9nZ2VyLmRlYnVnKGBFeHBvcnRpbmcgYmF0Y2hlcy4gRm9yY2U6ICR7Zm9yY2V9LiBCdWZmZXIgc2l6ZTogJHt0aGlzLiNidWZmZXIubGVuZ3RofWApO1xuICAgICAgICBpZiAoZm9yY2UgfHwgdGhpcy4jYnVmZmVyLmxlbmd0aCA8IHRoaXMuI21heEJhdGNoU2l6ZSkge1xuICAgICAgICAgICAgY29uc3QgdG9FeHBvcnQgPSBbLi4udGhpcy4jYnVmZmVyXTtcbiAgICAgICAgICAgIHRoaXMuI2J1ZmZlciA9IFtdO1xuICAgICAgICAgICAgdGhpcy4jZXhwb3J0SW5Qcm9ncmVzcyA9IHRydWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLiNleHBvcnRlci5leHBvcnQodG9FeHBvcnQpO1xuICAgICAgICAgICAgdGhpcy4jZXhwb3J0SW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuI2J1ZmZlci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBiYXRjaCA9IHRoaXMuI2J1ZmZlci5zcGxpY2UoMCwgdGhpcy4jbWF4QmF0Y2hTaXplKTtcbiAgICAgICAgICAgIHRoaXMuI2V4cG9ydEluUHJvZ3Jlc3MgPSB0cnVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy4jZXhwb3J0ZXIuZXhwb3J0KGJhdGNoKTtcbiAgICAgICAgICAgIHRoaXMuI2V4cG9ydEluUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBvblRyYWNlU3RhcnQodHJhY2UpIHtcbiAgICAgICAgYXdhaXQgdGhpcy4jc2FmZUFkZEl0ZW0odHJhY2UpO1xuICAgIH1cbiAgICBhc3luYyBvblRyYWNlRW5kKF90cmFjZSkge1xuICAgICAgICAvLyBXZSBkb24ndCBzZW5kIHRyYWNlcyBvbiBlbmQgYmVjYXVzZSB3ZSBhbHJlYWR5IHNlbmQgdGhlbSBvbiBzdGFydFxuICAgIH1cbiAgICBhc3luYyBvblNwYW5TdGFydChfc3Bhbikge1xuICAgICAgICAvLyBXZSBkb24ndCBzZW5kIHNwYW5zIG9uIHN0YXJ0IGJlY2F1c2Ugd2Ugc2VuZCB0aGVtIGF0IHRoZSBlbmRcbiAgICB9XG4gICAgYXN5bmMgb25TcGFuRW5kKHNwYW4pIHtcbiAgICAgICAgYXdhaXQgdGhpcy4jc2FmZUFkZEl0ZW0oc3Bhbik7XG4gICAgfVxuICAgIGFzeW5jIHNodXRkb3duKHRpbWVvdXQpIHtcbiAgICAgICAgaWYgKHRpbWVvdXQpIHtcbiAgICAgICAgICAgIHRoaXMuI3RpbWVyLnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIGZvcmNlIHNodXRkb3duIHRoZSBIVFRQIHJlcXVlc3RcbiAgICAgICAgICAgICAgICB0aGlzLiN0aW1lb3V0QWJvcnRDb250cm9sbGVyPy5hYm9ydCgpO1xuICAgICAgICAgICAgfSwgdGltZW91dCk7XG4gICAgICAgIH1cbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdTaHV0dGluZyBkb3duIGdyYWNlZnVsbHknKTtcbiAgICAgICAgd2hpbGUgKHRoaXMuI2J1ZmZlci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoYFdhaXRpbmcgZm9yIGJ1ZmZlciB0byBlbXB0eS4gSXRlbXMgbGVmdDogJHt0aGlzLiNidWZmZXIubGVuZ3RofWApO1xuICAgICAgICAgICAgaWYgKCF0aGlzLiNleHBvcnRJblByb2dyZXNzKSB7XG4gICAgICAgICAgICAgICAgLy8gbm8gY3VycmVudCBleHBvcnQgaW4gcHJvZ3Jlc3MuIEZvcmNpbmcgYWxsIGl0ZW1zIHRvIGJlIGV4cG9ydGVkXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy4jZXhwb3J0QmF0Y2hlcyh0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLiN0aW1lb3V0QWJvcnRDb250cm9sbGVyPy5zaWduYWwuYWJvcnRlZCkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnVGltZW91dCByZWFjaGVkLCBmb3JjZSBmbHVzaGluZycpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuI2V4cG9ydEJhdGNoZXModHJ1ZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyB1c2luZyBzZXRUaW1lb3V0IHRvIGFkZCB0byB0aGUgZXZlbnQgbG9vcCBhbmQga2VlcCB0aGlzIGFsaXZlIHVudGlsIGRvbmVcbiAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB0aGlzLiN0aW1lci5zZXRUaW1lb3V0KHJlc29sdmUsIDUwMCkpO1xuICAgICAgICB9XG4gICAgICAgIGxvZ2dlci5kZWJ1ZygnQnVmZmVyIGVtcHR5LiBFeGl0aW5nJyk7XG4gICAgICAgIGlmICh0aGlzLiN0aW1lciAmJiB0aGlzLiN0aW1lb3V0KSB7XG4gICAgICAgICAgICAvLyBtYWtpbmcgc3VyZSB0aGVyZSBhcmUgbm8gbW9yZSByZXF1ZXN0c1xuICAgICAgICAgICAgdGhpcy4jdGltZXIuY2xlYXJUaW1lb3V0KHRoaXMuI3RpbWVvdXQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGZvcmNlRmx1c2goKSB7XG4gICAgICAgIGlmICh0aGlzLiNidWZmZXIubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy4jZXhwb3J0QmF0Y2hlcyh0cnVlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBNdWx0aVRyYWNpbmdQcm9jZXNzb3Ige1xuICAgICNwcm9jZXNzb3JzID0gW107XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIGZvciAoY29uc3QgcHJvY2Vzc29yIG9mIHRoaXMuI3Byb2Nlc3NvcnMpIHtcbiAgICAgICAgICAgIGlmIChwcm9jZXNzb3Iuc3RhcnQpIHtcbiAgICAgICAgICAgICAgICBwcm9jZXNzb3Iuc3RhcnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBhZGRUcmFjZVByb2Nlc3Nvcihwcm9jZXNzb3IpIHtcbiAgICAgICAgdGhpcy4jcHJvY2Vzc29ycy5wdXNoKHByb2Nlc3Nvcik7XG4gICAgfVxuICAgIHNldFByb2Nlc3NvcnMocHJvY2Vzc29ycykge1xuICAgICAgICBsb2dnZXIuZGVidWcoJ1NodXR0aW5nIGRvd24gb2xkIHByb2Nlc3NvcnMnKTtcbiAgICAgICAgZm9yIChjb25zdCBwcm9jZXNzb3Igb2YgdGhpcy4jcHJvY2Vzc29ycykge1xuICAgICAgICAgICAgcHJvY2Vzc29yLnNodXRkb3duKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jcHJvY2Vzc29ycyA9IHByb2Nlc3NvcnM7XG4gICAgfVxuICAgIGFzeW5jIG9uVHJhY2VTdGFydCh0cmFjZSkge1xuICAgICAgICBmb3IgKGNvbnN0IHByb2Nlc3NvciBvZiB0aGlzLiNwcm9jZXNzb3JzKSB7XG4gICAgICAgICAgICBhd2FpdCBwcm9jZXNzb3Iub25UcmFjZVN0YXJ0KHRyYWNlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBvblRyYWNlRW5kKHRyYWNlKSB7XG4gICAgICAgIGZvciAoY29uc3QgcHJvY2Vzc29yIG9mIHRoaXMuI3Byb2Nlc3NvcnMpIHtcbiAgICAgICAgICAgIGF3YWl0IHByb2Nlc3Nvci5vblRyYWNlRW5kKHRyYWNlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBvblNwYW5TdGFydChzcGFuKSB7XG4gICAgICAgIGZvciAoY29uc3QgcHJvY2Vzc29yIG9mIHRoaXMuI3Byb2Nlc3NvcnMpIHtcbiAgICAgICAgICAgIGF3YWl0IHByb2Nlc3Nvci5vblNwYW5TdGFydChzcGFuKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBvblNwYW5FbmQoc3Bhbikge1xuICAgICAgICBmb3IgKGNvbnN0IHByb2Nlc3NvciBvZiB0aGlzLiNwcm9jZXNzb3JzKSB7XG4gICAgICAgICAgICBhd2FpdCBwcm9jZXNzb3Iub25TcGFuRW5kKHNwYW4pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHNodXRkb3duKHRpbWVvdXQpIHtcbiAgICAgICAgZm9yIChjb25zdCBwcm9jZXNzb3Igb2YgdGhpcy4jcHJvY2Vzc29ycykge1xuICAgICAgICAgICAgYXdhaXQgcHJvY2Vzc29yLnNodXRkb3duKHRpbWVvdXQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGZvcmNlRmx1c2goKSB7XG4gICAgICAgIGZvciAoY29uc3QgcHJvY2Vzc29yIG9mIHRoaXMuI3Byb2Nlc3NvcnMpIHtcbiAgICAgICAgICAgIGF3YWl0IHByb2Nlc3Nvci5mb3JjZUZsdXNoKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5sZXQgX2RlZmF1bHRFeHBvcnRlciA9IG51bGw7XG5sZXQgX2RlZmF1bHRQcm9jZXNzb3IgPSBudWxsO1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHRFeHBvcnRlcigpIHtcbiAgICBpZiAoIV9kZWZhdWx0RXhwb3J0ZXIpIHtcbiAgICAgICAgX2RlZmF1bHRFeHBvcnRlciA9IG5ldyBDb25zb2xlU3BhbkV4cG9ydGVyKCk7XG4gICAgfVxuICAgIHJldHVybiBfZGVmYXVsdEV4cG9ydGVyO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHRQcm9jZXNzb3IoKSB7XG4gICAgaWYgKCFfZGVmYXVsdFByb2Nlc3Nvcikge1xuICAgICAgICBfZGVmYXVsdFByb2Nlc3NvciA9IG5ldyBCYXRjaFRyYWNlUHJvY2Vzc29yKGRlZmF1bHRFeHBvcnRlcigpKTtcbiAgICB9XG4gICAgcmV0dXJuIF9kZWZhdWx0UHJvY2Vzc29yO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJvY2Vzc29yLm1qcy5tYXAiLCJpbXBvcnQgeyByYW5kb21VVUlEIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZS9fc2hpbXMnO1xuLyoqXG4gKiBHZW5lcmF0ZSBhbiBJU08gODYwMSB0aW1lc3RhbXAgb2YgdGhlIGN1cnJlbnQgdGltZS5cbiAqIEByZXR1cm5zIEFuIElTTyA4NjAxIHRpbWVzdGFtcC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRpbWVJc28oKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbn1cbi8qKlxuICogR2VuZXJhdGUgYSB0cmFjZSBJRCBieSBjcmVhdGluZyBhIHJhbmRvbSBVVUlEIHY0IGFuZCByZW1vdmluZyB0aGUgZGFzaGVzLiBUaGlzIGlzIHRoZSBlcXVpdmFsZW50XG4gKiBvZiBgdXVpZDQoKS5oZXhgIGluIFB5dGhvbiBhbmQgcHJlZml4aW5nIGl0IHdpdGggYHRyYWNlX2AuXG4gKiBAcmV0dXJucyBBIHRyYWNlIElELlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVUcmFjZUlkKCkge1xuICAgIHJldHVybiBgdHJhY2VfJHtyYW5kb21VVUlEKCkucmVwbGFjZSgvLS9nLCAnJyl9YDtcbn1cbi8qKlxuICogR2VuZXJhdGUgYSBzcGFuIElEIGJ5IGNyZWF0aW5nIGEgcmFuZG9tIFVVSUQgdjQgYW5kIHJlbW92aW5nIHRoZSBkYXNoZXMuIFRoaXMgaXMgdGhlIGVxdWl2YWxlbnRcbiAqIG9mIGB1dWlkNCgpLmhleGAgaW4gUHl0aG9uIGFuZCBwcmVmaXhpbmcgaXQgd2l0aCBgc3Bhbl9gLlxuICogQHJldHVybnMgQSBzcGFuIElELlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVTcGFuSWQoKSB7XG4gICAgcmV0dXJuIGBzcGFuXyR7cmFuZG9tVVVJRCgpLnJlcGxhY2UoLy0vZywgJycpLnNsaWNlKDAsIDI0KX1gO1xufVxuLyoqXG4gKiBHZW5lcmF0ZSBhIGdyb3VwIElEIGJ5IGNyZWF0aW5nIGEgcmFuZG9tIFVVSUQgdjQgYW5kIHJlbW92aW5nIHRoZSBkYXNoZXMuIFRoaXMgaXMgdGhlIGVxdWl2YWxlbnRcbiAqIG9mIGB1dWlkNCgpLmhleGAgaW4gUHl0aG9uIGFuZCBwcmVmaXhpbmcgaXQgd2l0aCBgZ3JvdXBfYC5cbiAqIEByZXR1cm5zIEEgZ3JvdXAgSUQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZUdyb3VwSWQoKSB7XG4gICAgcmV0dXJuIGBncm91cF8ke3JhbmRvbVVVSUQoKS5yZXBsYWNlKC8tL2csICcnKS5zbGljZSgwLCAyNCl9YDtcbn1cbi8qKlxuICogUmVtb3ZlIGZpZWxkcyB0aGF0IHN0YXJ0IHdpdGggYW4gdW5kZXJzY29yZSBmcm9tIGFuIG9iamVjdC5cbiAqIEBwYXJhbSBvYmogLSBUaGUgb2JqZWN0IHRvIHJlbW92ZSBwcml2YXRlIGZpZWxkcyBmcm9tLlxuICogQHJldHVybnMgQSBuZXcgb2JqZWN0IHdpdGggcHJpdmF0ZSBmaWVsZHMgcmVtb3ZlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZVByaXZhdGVGaWVsZHMob2JqKSB7XG4gICAgcmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyhvYmopLmZpbHRlcigoW2tleV0pID0+ICFrZXkuc3RhcnRzV2l0aCgnXycpKSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD11dGlscy5tanMubWFwIiwiaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IHsgZ2VuZXJhdGVTcGFuSWQsIHJlbW92ZVByaXZhdGVGaWVsZHMsIHRpbWVJc28gfSBmcm9tIFwiLi91dGlscy5tanNcIjtcbmV4cG9ydCBjbGFzcyBTcGFuIHtcbiAgICB0eXBlID0gJ3RyYWNlLnNwYW4nO1xuICAgICNkYXRhO1xuICAgICN0cmFjZUlkO1xuICAgICNzcGFuSWQ7XG4gICAgI3BhcmVudElkO1xuICAgICNwcm9jZXNzb3I7XG4gICAgI3N0YXJ0ZWRBdDtcbiAgICAjZW5kZWRBdDtcbiAgICAjZXJyb3I7XG4gICAgI3RyYWNpbmdBcGlLZXk7XG4gICAgI3ByZXZpb3VzU3BhbjtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zLCBwcm9jZXNzb3IpIHtcbiAgICAgICAgdGhpcy4jdHJhY2VJZCA9IG9wdGlvbnMudHJhY2VJZDtcbiAgICAgICAgdGhpcy4jc3BhbklkID0gb3B0aW9ucy5zcGFuSWQgPz8gZ2VuZXJhdGVTcGFuSWQoKTtcbiAgICAgICAgdGhpcy4jZGF0YSA9IG9wdGlvbnMuZGF0YTtcbiAgICAgICAgdGhpcy4jcHJvY2Vzc29yID0gcHJvY2Vzc29yO1xuICAgICAgICB0aGlzLiNwYXJlbnRJZCA9IG9wdGlvbnMucGFyZW50SWQgPz8gbnVsbDtcbiAgICAgICAgdGhpcy4jZXJyb3IgPSBvcHRpb25zLmVycm9yID8/IG51bGw7XG4gICAgICAgIHRoaXMuI3N0YXJ0ZWRBdCA9IG9wdGlvbnMuc3RhcnRlZEF0ID8/IG51bGw7XG4gICAgICAgIHRoaXMuI2VuZGVkQXQgPSBvcHRpb25zLmVuZGVkQXQgPz8gbnVsbDtcbiAgICAgICAgdGhpcy4jdHJhY2luZ0FwaUtleSA9IG9wdGlvbnMudHJhY2luZ0FwaUtleTtcbiAgICB9XG4gICAgZ2V0IHRyYWNlSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiN0cmFjZUlkO1xuICAgIH1cbiAgICBnZXQgc3BhbkRhdGEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNkYXRhO1xuICAgIH1cbiAgICBnZXQgc3BhbklkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jc3BhbklkO1xuICAgIH1cbiAgICBnZXQgcGFyZW50SWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNwYXJlbnRJZDtcbiAgICB9XG4gICAgZ2V0IHByZXZpb3VzU3BhbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3ByZXZpb3VzU3BhbjtcbiAgICB9XG4gICAgc2V0IHByZXZpb3VzU3BhbihzcGFuKSB7XG4gICAgICAgIHRoaXMuI3ByZXZpb3VzU3BhbiA9IHNwYW47XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICBpZiAodGhpcy4jc3RhcnRlZEF0KSB7XG4gICAgICAgICAgICBsb2dnZXIud2FybignU3BhbiBhbHJlYWR5IHN0YXJ0ZWQnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNzdGFydGVkQXQgPSB0aW1lSXNvKCk7XG4gICAgICAgIHRoaXMuI3Byb2Nlc3Nvci5vblNwYW5TdGFydCh0aGlzKTtcbiAgICB9XG4gICAgZW5kKCkge1xuICAgICAgICBpZiAodGhpcy4jZW5kZWRBdCkge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdTcGFuIGFscmVhZHkgZmluaXNoZWQnLCB0aGlzLnNwYW5EYXRhKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNlbmRlZEF0ID0gdGltZUlzbygpO1xuICAgICAgICB0aGlzLiNwcm9jZXNzb3Iub25TcGFuRW5kKHRoaXMpO1xuICAgIH1cbiAgICBzZXRFcnJvcihlcnJvcikge1xuICAgICAgICB0aGlzLiNlcnJvciA9IGVycm9yO1xuICAgIH1cbiAgICBnZXQgZXJyb3IoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNlcnJvcjtcbiAgICB9XG4gICAgZ2V0IHN0YXJ0ZWRBdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3N0YXJ0ZWRBdDtcbiAgICB9XG4gICAgZ2V0IGVuZGVkQXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNlbmRlZEF0O1xuICAgIH1cbiAgICBnZXQgdHJhY2luZ0FwaUtleSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3RyYWNpbmdBcGlLZXk7XG4gICAgfVxuICAgIGNsb25lKCkge1xuICAgICAgICBjb25zdCBzcGFuID0gbmV3IFNwYW4oe1xuICAgICAgICAgICAgdHJhY2VJZDogdGhpcy50cmFjZUlkLFxuICAgICAgICAgICAgc3BhbklkOiB0aGlzLnNwYW5JZCxcbiAgICAgICAgICAgIHBhcmVudElkOiB0aGlzLnBhcmVudElkID8/IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGRhdGE6IHRoaXMuc3BhbkRhdGEsXG4gICAgICAgICAgICBzdGFydGVkQXQ6IHRoaXMuI3N0YXJ0ZWRBdCA/PyB1bmRlZmluZWQsXG4gICAgICAgICAgICBlbmRlZEF0OiB0aGlzLiNlbmRlZEF0ID8/IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGVycm9yOiB0aGlzLiNlcnJvciA/PyB1bmRlZmluZWQsXG4gICAgICAgICAgICB0cmFjaW5nQXBpS2V5OiB0aGlzLiN0cmFjaW5nQXBpS2V5LFxuICAgICAgICB9LCB0aGlzLiNwcm9jZXNzb3IpO1xuICAgICAgICBzcGFuLnByZXZpb3VzU3BhbiA9IHRoaXMucHJldmlvdXNTcGFuPy5jbG9uZSgpO1xuICAgICAgICByZXR1cm4gc3BhbjtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb2JqZWN0OiB0aGlzLnR5cGUsXG4gICAgICAgICAgICBpZDogdGhpcy5zcGFuSWQsXG4gICAgICAgICAgICB0cmFjZV9pZDogdGhpcy50cmFjZUlkLFxuICAgICAgICAgICAgcGFyZW50X2lkOiB0aGlzLnBhcmVudElkLFxuICAgICAgICAgICAgc3RhcnRlZF9hdDogdGhpcy5zdGFydGVkQXQsXG4gICAgICAgICAgICBlbmRlZF9hdDogdGhpcy5lbmRlZEF0LFxuICAgICAgICAgICAgc3Bhbl9kYXRhOiByZW1vdmVQcml2YXRlRmllbGRzKHRoaXMuc3BhbkRhdGEpLFxuICAgICAgICAgICAgZXJyb3I6IHRoaXMuZXJyb3IsXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIE5vb3BTcGFuIGV4dGVuZHMgU3BhbiB7XG4gICAgY29uc3RydWN0b3IoZGF0YSwgcHJvY2Vzc29yKSB7XG4gICAgICAgIHN1cGVyKHsgdHJhY2VJZDogJ25vLW9wJywgc3BhbklkOiAnbm8tb3AnLCBkYXRhIH0sIHByb2Nlc3Nvcik7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGVuZCgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzZXRFcnJvcigpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNwYW5zLm1qcy5tYXAiLCJpbXBvcnQgeyBkZWZhdWx0UHJvY2Vzc29yIH0gZnJvbSBcIi4vcHJvY2Vzc29yLm1qc1wiO1xuaW1wb3J0IHsgZ2VuZXJhdGVUcmFjZUlkIH0gZnJvbSBcIi4vdXRpbHMubWpzXCI7XG5leHBvcnQgY2xhc3MgVHJhY2Uge1xuICAgIHR5cGUgPSAndHJhY2UnO1xuICAgIHRyYWNlSWQ7XG4gICAgbmFtZTtcbiAgICBncm91cElkID0gbnVsbDtcbiAgICBtZXRhZGF0YTtcbiAgICB0cmFjaW5nQXBpS2V5O1xuICAgICNwcm9jZXNzb3I7XG4gICAgI3N0YXJ0ZWQ7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucywgcHJvY2Vzc29yKSB7XG4gICAgICAgIHRoaXMudHJhY2VJZCA9IG9wdGlvbnMudHJhY2VJZCA/PyBnZW5lcmF0ZVRyYWNlSWQoKTtcbiAgICAgICAgdGhpcy5uYW1lID0gb3B0aW9ucy5uYW1lID8/ICdBZ2VudCB3b3JrZmxvdyc7XG4gICAgICAgIHRoaXMuZ3JvdXBJZCA9IG9wdGlvbnMuZ3JvdXBJZCA/PyBudWxsO1xuICAgICAgICB0aGlzLm1ldGFkYXRhID0gb3B0aW9ucy5tZXRhZGF0YSA/PyB7fTtcbiAgICAgICAgdGhpcy50cmFjaW5nQXBpS2V5ID0gb3B0aW9ucy50cmFjaW5nQXBpS2V5O1xuICAgICAgICB0aGlzLiNwcm9jZXNzb3IgPSBwcm9jZXNzb3IgPz8gZGVmYXVsdFByb2Nlc3NvcigpO1xuICAgICAgICB0aGlzLiNzdGFydGVkID0gb3B0aW9ucy5zdGFydGVkID8/IGZhbHNlO1xuICAgIH1cbiAgICBhc3luYyBzdGFydCgpIHtcbiAgICAgICAgaWYgKHRoaXMuI3N0YXJ0ZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNzdGFydGVkID0gdHJ1ZTtcbiAgICAgICAgYXdhaXQgdGhpcy4jcHJvY2Vzc29yLm9uVHJhY2VTdGFydCh0aGlzKTtcbiAgICB9XG4gICAgYXN5bmMgZW5kKCkge1xuICAgICAgICBpZiAoIXRoaXMuI3N0YXJ0ZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNzdGFydGVkID0gZmFsc2U7XG4gICAgICAgIGF3YWl0IHRoaXMuI3Byb2Nlc3Nvci5vblRyYWNlRW5kKHRoaXMpO1xuICAgIH1cbiAgICBjbG9uZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUcmFjZSh7XG4gICAgICAgICAgICB0cmFjZUlkOiB0aGlzLnRyYWNlSWQsXG4gICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgICAgICBncm91cElkOiB0aGlzLmdyb3VwSWQgPz8gdW5kZWZpbmVkLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHRoaXMubWV0YWRhdGEsXG4gICAgICAgICAgICBzdGFydGVkOiB0aGlzLiNzdGFydGVkLFxuICAgICAgICAgICAgdHJhY2luZ0FwaUtleTogdGhpcy50cmFjaW5nQXBpS2V5LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VyaWFsaXplcyB0aGUgdHJhY2UgZm9yIGV4cG9ydCBvciBwZXJzaXN0ZW5jZS5cbiAgICAgKiBTZXQgYGluY2x1ZGVUcmFjaW5nQXBpS2V5YCB0byB0cnVlIG9ubHkgd2hlbiB5b3UgaW50ZW50aW9uYWxseSBuZWVkIHRvIHBlcnNpc3QgdGhlXG4gICAgICogZXhwb3J0ZXIgY3JlZGVudGlhbHMgKGZvciBleGFtcGxlLCB3aGVuIGhhbmRpbmcgb2ZmIGEgcnVuIHRvIGFub3RoZXIgcHJvY2VzcyB0aGF0XG4gICAgICogY2Fubm90IGFjY2VzcyB0aGUgb3JpZ2luYWwgZW52aXJvbm1lbnQpLiBEZWZhdWx0cyB0byBmYWxzZSB0byBhdm9pZCBsZWFraW5nIHNlY3JldHMuXG4gICAgICovXG4gICAgdG9KU09OKG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgYmFzZSA9IHtcbiAgICAgICAgICAgIG9iamVjdDogdGhpcy50eXBlLFxuICAgICAgICAgICAgaWQ6IHRoaXMudHJhY2VJZCxcbiAgICAgICAgICAgIHdvcmtmbG93X25hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgICAgIGdyb3VwX2lkOiB0aGlzLmdyb3VwSWQsXG4gICAgICAgICAgICBtZXRhZGF0YTogdGhpcy5tZXRhZGF0YSxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKG9wdGlvbnM/LmluY2x1ZGVUcmFjaW5nQXBpS2V5ICYmIHRoaXMudHJhY2luZ0FwaUtleSkge1xuICAgICAgICAgICAgYmFzZS50cmFjaW5nX2FwaV9rZXkgPSB0aGlzLnRyYWNpbmdBcGlLZXk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJhc2U7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIE5vb3BUcmFjZSBleHRlbmRzIFRyYWNlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoe30pO1xuICAgIH1cbiAgICBhc3luYyBzdGFydCgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhc3luYyBlbmQoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10cmFjZXMubWpzLm1hcCIsImltcG9ydCB7IGdldEN1cnJlbnRTcGFuLCBnZXRDdXJyZW50VHJhY2UgfSBmcm9tIFwiLi9jb250ZXh0Lm1qc1wiO1xuaW1wb3J0IHsgdHJhY2luZyB9IGZyb20gXCIuLi9jb25maWcubWpzXCI7XG5pbXBvcnQgbG9nZ2VyIGZyb20gXCIuLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBNdWx0aVRyYWNpbmdQcm9jZXNzb3IgfSBmcm9tIFwiLi9wcm9jZXNzb3IubWpzXCI7XG5pbXBvcnQgeyBOb29wU3BhbiwgU3BhbiB9IGZyb20gXCIuL3NwYW5zLm1qc1wiO1xuaW1wb3J0IHsgTm9vcFRyYWNlLCBUcmFjZSB9IGZyb20gXCIuL3RyYWNlcy5tanNcIjtcbmltcG9ydCB7IGdlbmVyYXRlVHJhY2VJZCB9IGZyb20gXCIuL3V0aWxzLm1qc1wiO1xuZXhwb3J0IGNsYXNzIFRyYWNlUHJvdmlkZXIge1xuICAgICNtdWx0aVByb2Nlc3NvcjtcbiAgICAjZGlzYWJsZWQ7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuI211bHRpUHJvY2Vzc29yID0gbmV3IE11bHRpVHJhY2luZ1Byb2Nlc3NvcigpO1xuICAgICAgICB0aGlzLiNkaXNhYmxlZCA9IHRyYWNpbmcuZGlzYWJsZWQ7XG4gICAgICAgIHRoaXMuI2FkZENsZWFudXBMaXN0ZW5lcnMoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkIGEgcHJvY2Vzc29yIHRvIHRoZSBsaXN0IG9mIHByb2Nlc3NvcnMuIEVhY2ggcHJvY2Vzc29yIHdpbGwgcmVjZWl2ZSBhbGwgdHJhY2VzL3NwYW5zLlxuICAgICAqXG4gICAgICogQHBhcmFtIHByb2Nlc3NvciAtIFRoZSBwcm9jZXNzb3IgdG8gYWRkLlxuICAgICAqL1xuICAgIHJlZ2lzdGVyUHJvY2Vzc29yKHByb2Nlc3Nvcikge1xuICAgICAgICB0aGlzLiNtdWx0aVByb2Nlc3Nvci5hZGRUcmFjZVByb2Nlc3Nvcihwcm9jZXNzb3IpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGxpc3Qgb2YgcHJvY2Vzc29ycy4gVGhpcyB3aWxsIHJlcGxhY2UgYW55IGV4aXN0aW5nIHByb2Nlc3NvcnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcHJvY2Vzc29ycyAtIFRoZSBsaXN0IG9mIHByb2Nlc3NvcnMgdG8gc2V0LlxuICAgICAqL1xuICAgIHNldFByb2Nlc3NvcnMocHJvY2Vzc29ycykge1xuICAgICAgICB0aGlzLiNtdWx0aVByb2Nlc3Nvci5zZXRQcm9jZXNzb3JzKHByb2Nlc3NvcnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGN1cnJlbnQgdHJhY2UuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgY3VycmVudCB0cmFjZS5cbiAgICAgKi9cbiAgICBnZXRDdXJyZW50VHJhY2UoKSB7XG4gICAgICAgIHJldHVybiBnZXRDdXJyZW50VHJhY2UoKTtcbiAgICB9XG4gICAgZ2V0Q3VycmVudFNwYW4oKSB7XG4gICAgICAgIHJldHVybiBnZXRDdXJyZW50U3BhbigpO1xuICAgIH1cbiAgICBzZXREaXNhYmxlZChkaXNhYmxlZCkge1xuICAgICAgICB0aGlzLiNkaXNhYmxlZCA9IGRpc2FibGVkO1xuICAgIH1cbiAgICBzdGFydEV4cG9ydExvb3AoKSB7XG4gICAgICAgIHRoaXMuI211bHRpUHJvY2Vzc29yLnN0YXJ0KCk7XG4gICAgfVxuICAgIGNyZWF0ZVRyYWNlKHRyYWNlT3B0aW9ucykge1xuICAgICAgICBpZiAodGhpcy4jZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnVHJhY2luZyBpcyBkaXNhYmxlZCwgTm90IGNyZWF0aW5nIHRyYWNlICVvJywgdHJhY2VPcHRpb25zKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgTm9vcFRyYWNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdHJhY2VJZCA9IHRyYWNlT3B0aW9ucy50cmFjZUlkID8/IGdlbmVyYXRlVHJhY2VJZCgpO1xuICAgICAgICBjb25zdCBuYW1lID0gdHJhY2VPcHRpb25zLm5hbWUgPz8gJ0FnZW50IHdvcmtmbG93JztcbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdDcmVhdGluZyB0cmFjZSAlcyB3aXRoIG5hbWUgJXMnLCB0cmFjZUlkLCBuYW1lKTtcbiAgICAgICAgcmV0dXJuIG5ldyBUcmFjZSh7IC4uLnRyYWNlT3B0aW9ucywgbmFtZSwgdHJhY2VJZCB9LCB0aGlzLiNtdWx0aVByb2Nlc3Nvcik7XG4gICAgfVxuICAgIGNyZWF0ZVNwYW4oc3Bhbk9wdGlvbnMsIHBhcmVudCkge1xuICAgICAgICBpZiAodGhpcy4jZGlzYWJsZWQgfHwgc3Bhbk9wdGlvbnMuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnVHJhY2luZyBpcyBkaXNhYmxlZCwgTm90IGNyZWF0aW5nIHNwYW4gJW8nLCBzcGFuT3B0aW9ucyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE5vb3BTcGFuKHNwYW5PcHRpb25zLmRhdGEsIHRoaXMuI211bHRpUHJvY2Vzc29yKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgcGFyZW50SWQ7XG4gICAgICAgIGxldCB0cmFjZUlkO1xuICAgICAgICBsZXQgdHJhY2luZ0FwaUtleTtcbiAgICAgICAgaWYgKCFwYXJlbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRUcmFjZSA9IGdldEN1cnJlbnRUcmFjZSgpO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFNwYW4gPSBnZXRDdXJyZW50U3BhbigpO1xuICAgICAgICAgICAgaWYgKCFjdXJyZW50VHJhY2UpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ05vIGFjdGl2ZSB0cmFjZS4gTWFrZSBzdXJlIHRvIHN0YXJ0IGEgdHJhY2Ugd2l0aCBgd2l0aFRyYWNlKClgIGZpcnN0LiBSZXR1cm5pbmcgTm9vcFNwYW4uJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBOb29wU3BhbihzcGFuT3B0aW9ucy5kYXRhLCB0aGlzLiNtdWx0aVByb2Nlc3Nvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY3VycmVudFNwYW4gaW5zdGFuY2VvZiBOb29wU3BhbiB8fFxuICAgICAgICAgICAgICAgIGN1cnJlbnRUcmFjZSBpbnN0YW5jZW9mIE5vb3BUcmFjZSkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgUGFyZW50ICR7Y3VycmVudFNwYW59IG9yICR7Y3VycmVudFRyYWNlfSBpcyBuby1vcCwgcmV0dXJuaW5nIE5vb3BTcGFuYCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBOb29wU3BhbihzcGFuT3B0aW9ucy5kYXRhLCB0aGlzLiNtdWx0aVByb2Nlc3Nvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cmFjZUlkID0gY3VycmVudFRyYWNlLnRyYWNlSWQ7XG4gICAgICAgICAgICB0cmFjaW5nQXBpS2V5ID0gY3VycmVudFRyYWNlLnRyYWNpbmdBcGlLZXk7XG4gICAgICAgICAgICBpZiAoY3VycmVudFNwYW4pIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1VzaW5nIHBhcmVudCBzcGFuICVzJywgY3VycmVudFNwYW4uc3BhbklkKTtcbiAgICAgICAgICAgICAgICBwYXJlbnRJZCA9IGN1cnJlbnRTcGFuLnNwYW5JZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnTm8gcGFyZW50IHNwYW4sIHVzaW5nIGN1cnJlbnQgdHJhY2UgJXMnLCBjdXJyZW50VHJhY2UudHJhY2VJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocGFyZW50IGluc3RhbmNlb2YgVHJhY2UpIHtcbiAgICAgICAgICAgIGlmIChwYXJlbnQgaW5zdGFuY2VvZiBOb29wVHJhY2UpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1BhcmVudCB0cmFjZSBpcyBuby1vcCwgcmV0dXJuaW5nIE5vb3BTcGFuJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBOb29wU3BhbihzcGFuT3B0aW9ucy5kYXRhLCB0aGlzLiNtdWx0aVByb2Nlc3Nvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cmFjZUlkID0gcGFyZW50LnRyYWNlSWQ7XG4gICAgICAgICAgICB0cmFjaW5nQXBpS2V5ID0gcGFyZW50LnRyYWNpbmdBcGlLZXk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocGFyZW50IGluc3RhbmNlb2YgU3Bhbikge1xuICAgICAgICAgICAgaWYgKHBhcmVudCBpbnN0YW5jZW9mIE5vb3BTcGFuKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdQYXJlbnQgc3BhbiBpcyBuby1vcCwgcmV0dXJuaW5nIE5vb3BTcGFuJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBOb29wU3BhbihzcGFuT3B0aW9ucy5kYXRhLCB0aGlzLiNtdWx0aVByb2Nlc3Nvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXJlbnRJZCA9IHBhcmVudC5zcGFuSWQ7XG4gICAgICAgICAgICB0cmFjZUlkID0gcGFyZW50LnRyYWNlSWQ7XG4gICAgICAgICAgICB0cmFjaW5nQXBpS2V5ID0gcGFyZW50LnRyYWNpbmdBcGlLZXk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0cmFjZUlkKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ05vIHRyYWNlSWQgZm91bmQuIE1ha2Ugc3VyZSB0byBzdGFydCBhIHRyYWNlIHdpdGggYHdpdGhUcmFjZSgpYCBmaXJzdC4gUmV0dXJuaW5nIE5vb3BTcGFuLicpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBOb29wU3BhbihzcGFuT3B0aW9ucy5kYXRhLCB0aGlzLiNtdWx0aVByb2Nlc3Nvcik7XG4gICAgICAgIH1cbiAgICAgICAgbG9nZ2VyLmRlYnVnKGBDcmVhdGluZyBzcGFuICR7SlNPTi5zdHJpbmdpZnkoc3Bhbk9wdGlvbnMuZGF0YSl9IHdpdGggaWQgJHtzcGFuT3B0aW9ucy5zcGFuSWQgPz8gdHJhY2VJZH1gKTtcbiAgICAgICAgcmV0dXJuIG5ldyBTcGFuKHtcbiAgICAgICAgICAgIC4uLnNwYW5PcHRpb25zLFxuICAgICAgICAgICAgdHJhY2VJZCxcbiAgICAgICAgICAgIHBhcmVudElkLFxuICAgICAgICAgICAgdHJhY2luZ0FwaUtleTogdHJhY2luZ0FwaUtleSA/PyBzcGFuT3B0aW9ucy50cmFjaW5nQXBpS2V5LFxuICAgICAgICB9LCB0aGlzLiNtdWx0aVByb2Nlc3Nvcik7XG4gICAgfVxuICAgIGFzeW5jIHNodXRkb3duKHRpbWVvdXQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnU2h1dHRpbmcgZG93biB0cmFjaW5nIHByb3ZpZGVyJyk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLiNtdWx0aVByb2Nlc3Nvci5zaHV0ZG93bih0aW1lb3V0KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignRXJyb3Igc2h1dHRpbmcgZG93biB0cmFjaW5nIHByb3ZpZGVyICVvJywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKiBBZGRzIGxpc3RlbmVycyB0byBgcHJvY2Vzc2AgdG8gZW5zdXJlIGBzaHV0ZG93bmAgb2NjdXJzIGJlZm9yZSBleGl0LiAqL1xuICAgICNhZGRDbGVhbnVwTGlzdGVuZXJzKCkge1xuICAgICAgICBpZiAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBwcm9jZXNzLm9uID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAvLyBoYW5kbGluZyBOb2RlLmpzIHByb2Nlc3MgdGVybWluYXRpb25cbiAgICAgICAgICAgIGNvbnN0IGNsZWFudXAgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0NsZWFudXAgdGltZW91dCwgZm9yY2luZyBleGl0Jyk7XG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICAgICAgICAgICAgICB9LCA1MDAwKTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNodXRkb3duKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8vIEhhbmRsZSBub3JtYWwgdGVybWluYXRpb25cbiAgICAgICAgICAgIHByb2Nlc3Mub24oJ2JlZm9yZUV4aXQnLCBjbGVhbnVwKTtcbiAgICAgICAgICAgIC8vIEhhbmRsZSBDVFJMK0MgKFNJR0lOVClcbiAgICAgICAgICAgIHByb2Nlc3Mub24oJ1NJR0lOVCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBjbGVhbnVwKCk7XG4gICAgICAgICAgICAgICAgaWYgKCFoYXNPdGhlckxpc3RlbmVyc0ZvclNpZ25hbHMoJ1NJR0lOVCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIE9ubHkgd2hlbiB0aGVyZSBhcmUgbm8gb3RoZXIgbGlzdGVuZXJzLCBleGl0IHRoZSBwcm9jZXNzIG9uIHRoaXMgU0RLIHNpZGVcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzcy5leGl0KDEzMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBIYW5kbGUgdGVybWluYXRpb24gKFNJR1RFUk0pXG4gICAgICAgICAgICBwcm9jZXNzLm9uKCdTSUdURVJNJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGF3YWl0IGNsZWFudXAoKTtcbiAgICAgICAgICAgICAgICBpZiAoIWhhc090aGVyTGlzdGVuZXJzRm9yU2lnbmFscygnU0lHVEVSTScpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIE9ubHkgd2hlbiB0aGVyZSBhcmUgbm8gb3RoZXIgbGlzdGVuZXJzLCBleGl0IHRoZSBwcm9jZXNzIG9uIHRoaXMgU0RLIHNpZGVcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzcy5leGl0KDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcHJvY2Vzcy5vbigndW5oYW5kbGVkUmVqZWN0aW9uJywgYXN5bmMgKHJlYXNvbiwgcHJvbWlzZSkgPT4ge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcignVW5oYW5kbGVkIHJlamVjdGlvbicsIHJlYXNvbiwgcHJvbWlzZSk7XG4gICAgICAgICAgICAgICAgYXdhaXQgY2xlYW51cCgpO1xuICAgICAgICAgICAgICAgIGlmICghaGFzT3RoZXJMaXN0ZW5lcnNGb3JFdmVudHMoJ3VuaGFuZGxlZFJlamVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIE9ubHkgd2hlbiB0aGVyZSBhcmUgbm8gb3RoZXIgbGlzdGVuZXJzLCBleGl0IHRoZSBwcm9jZXNzIG9uIHRoaXMgU0RLIHNpZGVcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGZvcmNlRmx1c2goKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuI211bHRpUHJvY2Vzc29yLmZvcmNlRmx1c2goKTtcbiAgICB9XG59XG5sZXQgbW9kdWxlVHJhY2VQcm92aWRlcjtcbmZ1bmN0aW9uIGhhc090aGVyTGlzdGVuZXJzRm9yU2lnbmFscyhldmVudCkge1xuICAgIHJldHVybiBwcm9jZXNzLmxpc3RlbmVycyhldmVudCkubGVuZ3RoID4gMTtcbn1cbmZ1bmN0aW9uIGhhc090aGVyTGlzdGVuZXJzRm9yRXZlbnRzKGV2ZW50KSB7XG4gICAgcmV0dXJuIHByb2Nlc3MubGlzdGVuZXJzKGV2ZW50KS5sZW5ndGggPiAxO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKSB7XG4gICAgY29uc3Qgc3ltYm9sID0gU3ltYm9sLmZvcignb3BlbmFpLmFnZW50cy5jb3JlLnRyYWNlUHJvdmlkZXInKTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBnbG9iYWxIb2xkZXIgPSBnbG9iYWxUaGlzO1xuICAgICAgICAvLyBBdm9pZCBjb25zdHJ1Y3RpbmcgZXh0cmEgcHJvdmlkZXJzIHdoZW4gZ2xvYmFsVGhpcyBpcyBmcm96ZW4vc2VhbGVkLiBXZVxuICAgICAgICAvLyBmaXJzdCBzaG9ydC1jaXJjdWl0IG9uIGV4aXN0aW5nIGluc3RhbmNlcywgdGhlbiBjaGVjayB3cml0YWJpbGl0eSBiZWZvcmVcbiAgICAgICAgLy8gaW5zdGFudGlhdGlvbiBzbyBoYXJkZW5lZCBydW50aW1lcyBkbyBub3QgbGVhayBjb25zdHJ1Y3RvcnMgb3IgbGlzdGVuZXJzLlxuICAgICAgICBjb25zdCBleGlzdGluZyA9IGdsb2JhbEhvbGRlcltzeW1ib2xdO1xuICAgICAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgICAgICAgIHJldHVybiBleGlzdGluZztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkZXNjcmlwdG9yID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihnbG9iYWxIb2xkZXIsIHN5bWJvbCk7XG4gICAgICAgIGlmIChkZXNjcmlwdG9yICYmXG4gICAgICAgICAgICBkZXNjcmlwdG9yLndyaXRhYmxlID09PSBmYWxzZSAmJlxuICAgICAgICAgICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPT09IGZhbHNlICYmXG4gICAgICAgICAgICAhZGVzY3JpcHRvci5zZXQpIHtcbiAgICAgICAgICAgIHJldHVybiBnZXRNb2R1bGVUcmFjZVByb3ZpZGVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFkZXNjcmlwdG9yKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShnbG9iYWxIb2xkZXIsIHN5bWJvbCwge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgICAgIHJldHVybiBnZXRNb2R1bGVUcmFjZVByb3ZpZGVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHByb3ZpZGVyID0gbmV3IFRyYWNlUHJvdmlkZXIoKTtcbiAgICAgICAgICAgIGdsb2JhbEhvbGRlcltzeW1ib2xdID0gcHJvdmlkZXI7XG4gICAgICAgICAgICByZXR1cm4gcHJvdmlkZXI7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgcmV0dXJuIGdldE1vZHVsZVRyYWNlUHJvdmlkZXIoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCB7XG4gICAgICAgIC8vIEhhcmRlbmVkIHJ1bnRpbWVzIGNhbiBmcmVlemUgb3Igc2VhbCBnbG9iYWxUaGlzOyBmYWxsIGJhY2sgdG8gYVxuICAgICAgICAvLyBtb2R1bGUtbG9jYWwgc2luZ2xldG9uIGluc3RlYWQgb2YgdGhyb3dpbmcgc28gdHJhY2luZyBzdGlsbCB3b3Jrcy5cbiAgICAgICAgcmV0dXJuIGdldE1vZHVsZVRyYWNlUHJvdmlkZXIoKTtcbiAgICB9XG59XG5mdW5jdGlvbiBnZXRNb2R1bGVUcmFjZVByb3ZpZGVyKCkge1xuICAgIGlmICghbW9kdWxlVHJhY2VQcm92aWRlcikge1xuICAgICAgICBtb2R1bGVUcmFjZVByb3ZpZGVyID0gbmV3IFRyYWNlUHJvdmlkZXIoKTtcbiAgICB9XG4gICAgcmV0dXJuIG1vZHVsZVRyYWNlUHJvdmlkZXI7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcm92aWRlci5tanMubWFwIiwiaW1wb3J0IHsgcmVzZXRDdXJyZW50U3Bhbiwgc2V0Q3VycmVudFNwYW4sIHdpdGhOZXdTcGFuQ29udGV4dCwgfSBmcm9tIFwiLi9jb250ZXh0Lm1qc1wiO1xuaW1wb3J0IHsgZ2V0R2xvYmFsVHJhY2VQcm92aWRlciB9IGZyb20gXCIuL3Byb3ZpZGVyLm1qc1wiO1xuZnVuY3Rpb24gX3dpdGhTcGFuRmFjdG9yeShjcmVhdGVTcGFuKSB7XG4gICAgcmV0dXJuIGFzeW5jIChmbiwgLi4uYXJncykgPT4ge1xuICAgICAgICAvLyBDcmVhdGluZyBhIG5ldyBzcGFuIGNvbnRleHQgdG8gbWFrZSBzdXJlIHRoYXQgdGhlIHByZXZpb3VzIHNwYW4gaXMgY29ycmVjdGx5IHJlc2V0XG4gICAgICAgIHJldHVybiB3aXRoTmV3U3BhbkNvbnRleHQoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc3BhbiA9IGNyZWF0ZVNwYW4oLi4uYXJncyk7XG4gICAgICAgICAgICBzZXRDdXJyZW50U3BhbihzcGFuKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgc3Bhbi5zdGFydCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCBmbihzcGFuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHNwYW4uc2V0RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiBlcnJvci5kYXRhLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgc3Bhbi5lbmQoKTtcbiAgICAgICAgICAgICAgICByZXNldEN1cnJlbnRTcGFuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG59XG4vKipcbiAqIENyZWF0ZSBhIG5ldyByZXNwb25zZSBzcGFuLiBUaGUgc3BhbiB3aWxsIG5vdCBiZSBzdGFydGVkIGF1dG9tYXRpY2FsbHksIHlvdSBzaG91bGQgZWl0aGVyXG4gKiB1c2UgYHdpdGhSZXNwb25zZVNwYW4oKWAgb3IgY2FsbCBgc3Bhbi5zdGFydCgpYCBhbmQgYHNwYW4uZW5kKClgIG1hbnVhbGx5LlxuICpcbiAqIFRoaXMgc3BhbiBjYXB0dXJlcyB0aGUgZGV0YWlscyBvZiBhIG1vZGVsIHJlc3BvbnNlLCBwcmltYXJpbHkgdGhlIHJlc3BvbnNlIGlkZW50aWZpZXIuXG4gKiBJZiB5b3UgbmVlZCB0byBjYXB0dXJlIGRldGFpbGVkIGdlbmVyYXRpb24gaW5mb3JtYXRpb24gc3VjaCBhcyBpbnB1dC9vdXRwdXQgbWVzc2FnZXMsXG4gKiBtb2RlbCBjb25maWd1cmF0aW9uLCBvciB1c2FnZSBkYXRhLCB1c2UgYGNyZWF0ZUdlbmVyYXRpb25TcGFuKClgIGluc3RlYWQuXG4gKlxuICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzcGFuIGNyZWF0aW9uIG9wdGlvbnMsIGluY2x1ZGluZyBzcGFuIGRhdGEgYW5kIGlkZW50aWZpZXJzLlxuICogQHBhcmFtIHBhcmVudCAtIFRoZSBwYXJlbnQgc3BhbiBvciB0cmFjZS4gSWYgbm90IHByb3ZpZGVkLCB0aGUgY3VycmVudCB0cmFjZS9zcGFuIHdpbGwgYmUgdXNlZFxuICogYXV0b21hdGljYWxseS5cbiAqXG4gKiBAcmV0dXJucyBUaGUgbmV3bHkgY3JlYXRlZCByZXNwb25zZSBzcGFuLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUmVzcG9uc2VTcGFuKG9wdGlvbnMsIHBhcmVudCkge1xuICAgIG9wdGlvbnMgPSB7fTtcbiAgICByZXR1cm4gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVNwYW4oe1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB0eXBlOiAncmVzcG9uc2UnLFxuICAgICAgICAgICAgLi4ub3B0aW9ucy5kYXRhLFxuICAgICAgICB9LFxuICAgIH0sIHBhcmVudCk7XG59XG4vKipcbiAqIENyZWF0ZSBhIG5ldyByZXNwb25zZSBzcGFuIGFuZCBhdXRvbWF0aWNhbGx5IHN0YXJ0IGFuZCBlbmQgaXQuXG4gKlxuICogVGhpcyBzcGFuIGNhcHR1cmVzIHRoZSBkZXRhaWxzIG9mIGEgbW9kZWwgcmVzcG9uc2UsIHByaW1hcmlseSB0aGUgcmVzcG9uc2UgaWRlbnRpZmllci5cbiAqIElmIHlvdSBuZWVkIHRvIGNhcHR1cmUgZGV0YWlsZWQgZ2VuZXJhdGlvbiBpbmZvcm1hdGlvbiBzdWNoIGFzIGlucHV0L291dHB1dCBtZXNzYWdlcyxcbiAqIG1vZGVsIGNvbmZpZ3VyYXRpb24sIG9yIHVzYWdlIGRhdGEsIHVzZSBgZ2VuZXJhdGlvblNwYW4oKWAgaW5zdGVhZC5cbiAqL1xuZXhwb3J0IGNvbnN0IHdpdGhSZXNwb25zZVNwYW4gPSBfd2l0aFNwYW5GYWN0b3J5KGNyZWF0ZVJlc3BvbnNlU3Bhbik7XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBhZ2VudCBzcGFuLiBUaGUgc3BhbiB3aWxsIG5vdCBiZSBzdGFydGVkIGF1dG9tYXRpY2FsbHksIHlvdSBzaG91bGQgZWl0aGVyXG4gKiB1c2UgYHdpdGhBZ2VudFNwYW4oKWAgb3IgY2FsbCBgc3Bhbi5zdGFydCgpYCBhbmQgYHNwYW4uZW5kKClgIG1hbnVhbGx5LlxuICpcbiAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc3BhbiBjcmVhdGlvbiBvcHRpb25zLCBpbmNsdWRpbmcgc3BhbiBkYXRhIGFuZCBpZGVudGlmaWVycy5cbiAqIEBwYXJhbSBwYXJlbnQgLSBUaGUgcGFyZW50IHNwYW4gb3IgdHJhY2UuIElmIG5vdCBwcm92aWRlZCwgdGhlIGN1cnJlbnQgdHJhY2Uvc3BhbiB3aWxsIGJlIHVzZWRcbiAqIGF1dG9tYXRpY2FsbHkuXG4gKlxuICogQHJldHVybnMgVGhlIG5ld2x5IGNyZWF0ZWQgYWdlbnQgc3Bhbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUFnZW50U3BhbihvcHRpb25zLCBwYXJlbnQpIHtcbiAgICByZXR1cm4gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVNwYW4oe1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB0eXBlOiAnYWdlbnQnLFxuICAgICAgICAgICAgbmFtZTogb3B0aW9ucz8uZGF0YT8ubmFtZSA/PyAnQWdlbnQnLFxuICAgICAgICAgICAgLi4ub3B0aW9ucz8uZGF0YSxcbiAgICAgICAgfSxcbiAgICB9LCBwYXJlbnQpO1xufVxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgYWdlbnQgc3BhbiBhbmQgYXV0b21hdGljYWxseSBzdGFydCBhbmQgZW5kIGl0LlxuICovXG5leHBvcnQgY29uc3Qgd2l0aEFnZW50U3BhbiA9IF93aXRoU3BhbkZhY3RvcnkoY3JlYXRlQWdlbnRTcGFuKTtcbi8qKlxuICogQ3JlYXRlIGEgbmV3IGZ1bmN0aW9uIHNwYW4uIFRoZSBzcGFuIHdpbGwgbm90IGJlIHN0YXJ0ZWQgYXV0b21hdGljYWxseSwgeW91IHNob3VsZCBlaXRoZXJcbiAqIHVzZSBgd2l0aEZ1bmN0aW9uU3BhbigpYCBvciBjYWxsIGBzcGFuLnN0YXJ0KClgIGFuZCBgc3Bhbi5lbmQoKWAgbWFudWFsbHkuXG4gKlxuICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzcGFuIGNyZWF0aW9uIG9wdGlvbnMsIGluY2x1ZGluZyBzcGFuIGRhdGEgYW5kIGlkZW50aWZpZXJzLlxuICogQHBhcmFtIHBhcmVudCAtIFRoZSBwYXJlbnQgc3BhbiBvciB0cmFjZS4gSWYgbm90IHByb3ZpZGVkLCB0aGUgY3VycmVudCB0cmFjZS9zcGFuIHdpbGwgYmUgdXNlZFxuICogYXV0b21hdGljYWxseS5cbiAqXG4gKiBAcmV0dXJucyBUaGUgbmV3bHkgY3JlYXRlZCBmdW5jdGlvbiBzcGFuLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRnVuY3Rpb25TcGFuKG9wdGlvbnMsIHBhcmVudCkge1xuICAgIHJldHVybiBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlU3Bhbih7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbicsXG4gICAgICAgICAgICBpbnB1dDogb3B0aW9ucz8uZGF0YT8uaW5wdXQgPz8gJycsXG4gICAgICAgICAgICBvdXRwdXQ6IG9wdGlvbnM/LmRhdGE/Lm91dHB1dCA/PyAnJyxcbiAgICAgICAgICAgIC4uLm9wdGlvbnM/LmRhdGEsXG4gICAgICAgIH0sXG4gICAgfSwgcGFyZW50KTtcbn1cbi8qKlxuICogQ3JlYXRlIGEgbmV3IGZ1bmN0aW9uIHNwYW4gYW5kIGF1dG9tYXRpY2FsbHkgc3RhcnQgYW5kIGVuZCBpdC5cbiAqL1xuZXhwb3J0IGNvbnN0IHdpdGhGdW5jdGlvblNwYW4gPSBfd2l0aFNwYW5GYWN0b3J5KGNyZWF0ZUZ1bmN0aW9uU3Bhbik7XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBoYW5kb2ZmIHNwYW4uIFRoZSBzcGFuIHdpbGwgbm90IGJlIHN0YXJ0ZWQgYXV0b21hdGljYWxseSwgeW91IHNob3VsZCBlaXRoZXJcbiAqIHVzZSBgd2l0aEhhbmRvZmZTcGFuKClgIG9yIGNhbGwgYHNwYW4uc3RhcnQoKWAgYW5kIGBzcGFuLmVuZCgpYCBtYW51YWxseS5cbiAqXG4gKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsIHNwYW4gY3JlYXRpb24gb3B0aW9ucywgaW5jbHVkaW5nIHNwYW4gZGF0YSBhbmQgaWRlbnRpZmllcnMuXG4gKiBAcGFyYW0gcGFyZW50IC0gVGhlIHBhcmVudCBzcGFuIG9yIHRyYWNlLiBJZiBub3QgcHJvdmlkZWQsIHRoZSBjdXJyZW50IHRyYWNlL3NwYW4gd2lsbCBiZSB1c2VkXG4gKiBhdXRvbWF0aWNhbGx5LlxuICpcbiAqIEByZXR1cm5zIFRoZSBuZXdseSBjcmVhdGVkIGhhbmRvZmYgc3Bhbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUhhbmRvZmZTcGFuKG9wdGlvbnMsIHBhcmVudCkge1xuICAgIHJldHVybiBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlU3Bhbih7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIGRhdGE6IHsgdHlwZTogJ2hhbmRvZmYnLCAuLi5vcHRpb25zPy5kYXRhIH0sXG4gICAgfSwgcGFyZW50KTtcbn1cbi8qKlxuICogQ3JlYXRlIGEgbmV3IGhhbmRvZmYgc3BhbiBhbmQgYXV0b21hdGljYWxseSBzdGFydCBhbmQgZW5kIGl0LlxuICovXG5leHBvcnQgY29uc3Qgd2l0aEhhbmRvZmZTcGFuID0gX3dpdGhTcGFuRmFjdG9yeShjcmVhdGVIYW5kb2ZmU3Bhbik7XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBnZW5lcmF0aW9uIHNwYW4uIFRoZSBzcGFuIHdpbGwgbm90IGJlIHN0YXJ0ZWQgYXV0b21hdGljYWxseSwgeW91IHNob3VsZCBlaXRoZXJcbiAqIHVzZSBgd2l0aEdlbmVyYXRpb25TcGFuKClgIG9yIGNhbGwgYHNwYW4uc3RhcnQoKWAgYW5kIGBzcGFuLmVuZCgpYCBtYW51YWxseS5cbiAqXG4gKiBUaGlzIHNwYW4gY2FwdHVyZXMgdGhlIGRldGFpbHMgb2YgYSBtb2RlbCBnZW5lcmF0aW9uLCBpbmNsdWRpbmcgaW5wdXQvb3V0cHV0IG1lc3NhZ2VcbiAqIHNlcXVlbmNlcywgbW9kZWwgaW5mb3JtYXRpb24sIGFuZCB1c2FnZSBkYXRhLiBJZiB5b3Ugb25seSBuZWVkIHRvIGNhcHR1cmUgYSBtb2RlbCByZXNwb25zZVxuICogaWRlbnRpZmllciwgY29uc2lkZXIgdXNpbmcgYGNyZWF0ZVJlc3BvbnNlU3BhbigpYCBpbnN0ZWFkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlR2VuZXJhdGlvblNwYW4ob3B0aW9ucywgcGFyZW50KSB7XG4gICAgcmV0dXJuIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdHlwZTogJ2dlbmVyYXRpb24nLFxuICAgICAgICAgICAgLi4ub3B0aW9ucz8uZGF0YSxcbiAgICAgICAgfSxcbiAgICB9LCBwYXJlbnQpO1xufVxuLyoqIEF1dG9tYXRpY2FsbHkgY3JlYXRlIGEgZ2VuZXJhdGlvbiBzcGFuLCBydW4gZm4gYW5kIGNsb3NlIHRoZSBzcGFuICovXG5leHBvcnQgY29uc3Qgd2l0aEdlbmVyYXRpb25TcGFuID0gX3dpdGhTcGFuRmFjdG9yeShjcmVhdGVHZW5lcmF0aW9uU3Bhbik7XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBjdXN0b20gc3Bhbi4gVGhlIHNwYW4gd2lsbCBub3QgYmUgc3RhcnRlZCBhdXRvbWF0aWNhbGx5LCB5b3Ugc2hvdWxkIGVpdGhlciB1c2VcbiAqIGB3aXRoQ3VzdG9tU3BhbigpYCBvciBjYWxsIGBzcGFuLnN0YXJ0KClgIGFuZCBgc3Bhbi5lbmQoKWAgbWFudWFsbHkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDdXN0b21TcGFuKG9wdGlvbnMsIHBhcmVudCkge1xuICAgIHJldHVybiBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlU3Bhbih7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHR5cGU6ICdjdXN0b20nLFxuICAgICAgICAgICAgZGF0YToge30sXG4gICAgICAgICAgICAuLi5vcHRpb25zPy5kYXRhLFxuICAgICAgICB9LFxuICAgIH0sIHBhcmVudCk7XG59XG5leHBvcnQgY29uc3Qgd2l0aEN1c3RvbVNwYW4gPSBfd2l0aFNwYW5GYWN0b3J5KGNyZWF0ZUN1c3RvbVNwYW4pO1xuLyoqXG4gKiBDcmVhdGUgYSBuZXcgZ3VhcmRyYWlsIHNwYW4uIFRoZSBzcGFuIHdpbGwgbm90IGJlIHN0YXJ0ZWQgYXV0b21hdGljYWxseSwgeW91IHNob3VsZCBlaXRoZXIgdXNlXG4gKiBgd2l0aEd1YXJkcmFpbFNwYW4oKWAgb3IgY2FsbCBgc3Bhbi5zdGFydCgpYCBhbmQgYHNwYW4uZW5kKClgIG1hbnVhbGx5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlR3VhcmRyYWlsU3BhbihvcHRpb25zLCBwYXJlbnQpIHtcbiAgICByZXR1cm4gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVNwYW4oe1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB0eXBlOiAnZ3VhcmRyYWlsJyxcbiAgICAgICAgICAgIHRyaWdnZXJlZDogZmFsc2UsXG4gICAgICAgICAgICAuLi5vcHRpb25zPy5kYXRhLFxuICAgICAgICB9LFxuICAgIH0sIHBhcmVudCk7XG59XG5leHBvcnQgY29uc3Qgd2l0aEd1YXJkcmFpbFNwYW4gPSBfd2l0aFNwYW5GYWN0b3J5KGNyZWF0ZUd1YXJkcmFpbFNwYW4pO1xuLyoqXG4gKiBDcmVhdGUgYSBuZXcgdHJhbnNjcmlwdGlvbiBzcGFuLiBUaGUgc3BhbiB3aWxsIG5vdCBiZSBzdGFydGVkIGF1dG9tYXRpY2FsbHkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVUcmFuc2NyaXB0aW9uU3BhbihvcHRpb25zLCBwYXJlbnQpIHtcbiAgICByZXR1cm4gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVNwYW4oe1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB0eXBlOiAndHJhbnNjcmlwdGlvbicsXG4gICAgICAgICAgICAuLi5vcHRpb25zLmRhdGEsXG4gICAgICAgIH0sXG4gICAgfSwgcGFyZW50KTtcbn1cbmV4cG9ydCBjb25zdCB3aXRoVHJhbnNjcmlwdGlvblNwYW4gPSBfd2l0aFNwYW5GYWN0b3J5KGNyZWF0ZVRyYW5zY3JpcHRpb25TcGFuKTtcbi8qKlxuICogQ3JlYXRlIGEgbmV3IHNwZWVjaCBzcGFuLiBUaGUgc3BhbiB3aWxsIG5vdCBiZSBzdGFydGVkIGF1dG9tYXRpY2FsbHkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTcGVlY2hTcGFuKG9wdGlvbnMsIHBhcmVudCkge1xuICAgIHJldHVybiBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlU3Bhbih7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHR5cGU6ICdzcGVlY2gnLFxuICAgICAgICAgICAgLi4ub3B0aW9ucy5kYXRhLFxuICAgICAgICB9LFxuICAgIH0sIHBhcmVudCk7XG59XG5leHBvcnQgY29uc3Qgd2l0aFNwZWVjaFNwYW4gPSBfd2l0aFNwYW5GYWN0b3J5KGNyZWF0ZVNwZWVjaFNwYW4pO1xuLyoqXG4gKiBDcmVhdGUgYSBuZXcgc3BlZWNoIGdyb3VwIHNwYW4uIFRoZSBzcGFuIHdpbGwgbm90IGJlIHN0YXJ0ZWQgYXV0b21hdGljYWxseS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNwZWVjaEdyb3VwU3BhbihvcHRpb25zLCBwYXJlbnQpIHtcbiAgICByZXR1cm4gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVNwYW4oe1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB0eXBlOiAnc3BlZWNoX2dyb3VwJyxcbiAgICAgICAgICAgIC4uLm9wdGlvbnM/LmRhdGEsXG4gICAgICAgIH0sXG4gICAgfSwgcGFyZW50KTtcbn1cbmV4cG9ydCBjb25zdCB3aXRoU3BlZWNoR3JvdXBTcGFuID0gX3dpdGhTcGFuRmFjdG9yeShjcmVhdGVTcGVlY2hHcm91cFNwYW4pO1xuLyoqXG4gKiBDcmVhdGUgYSBuZXcgTUNQIGxpc3QgdG9vbHMgc3Bhbi4gVGhlIHNwYW4gd2lsbCBub3QgYmUgc3RhcnRlZCBhdXRvbWF0aWNhbGx5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlTUNQTGlzdFRvb2xzU3BhbihvcHRpb25zLCBwYXJlbnQpIHtcbiAgICByZXR1cm4gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVNwYW4oe1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB0eXBlOiAnbWNwX3Rvb2xzJyxcbiAgICAgICAgICAgIC4uLm9wdGlvbnM/LmRhdGEsXG4gICAgICAgIH0sXG4gICAgfSwgcGFyZW50KTtcbn1cbmV4cG9ydCBjb25zdCB3aXRoTUNQTGlzdFRvb2xzU3BhbiA9IF93aXRoU3BhbkZhY3RvcnkoY3JlYXRlTUNQTGlzdFRvb2xzU3Bhbik7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jcmVhdGVTcGFucy5tanMubWFwIiwiaW1wb3J0IHsgZ2V0R2xvYmFsVHJhY2VQcm92aWRlciB9IGZyb20gXCIuL3Byb3ZpZGVyLm1qc1wiO1xuZXhwb3J0IHsgZ2V0Q3VycmVudFNwYW4sIGdldEN1cnJlbnRUcmFjZSwgZ2V0T3JDcmVhdGVUcmFjZSwgcmVzZXRDdXJyZW50U3Bhbiwgc2V0Q3VycmVudFNwYW4sIHdpdGhUcmFjZSwgfSBmcm9tIFwiLi9jb250ZXh0Lm1qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vY3JlYXRlU3BhbnMubWpzXCI7XG5leHBvcnQgeyBCYXRjaFRyYWNlUHJvY2Vzc29yLCBDb25zb2xlU3BhbkV4cG9ydGVyLCB9IGZyb20gXCIuL3Byb2Nlc3Nvci5tanNcIjtcbmV4cG9ydCB7IE5vb3BTcGFuLCBTcGFuIH0gZnJvbSBcIi4vc3BhbnMubWpzXCI7XG5leHBvcnQgeyBOb29wVHJhY2UsIFRyYWNlIH0gZnJvbSBcIi4vdHJhY2VzLm1qc1wiO1xuZXhwb3J0IHsgZ2VuZXJhdGVHcm91cElkLCBnZW5lcmF0ZVNwYW5JZCwgZ2VuZXJhdGVUcmFjZUlkIH0gZnJvbSBcIi4vdXRpbHMubWpzXCI7XG4vKipcbiAqIEFkZCBhIHByb2Nlc3NvciB0byB0aGUgbGlzdCBvZiBwcm9jZXNzb3JzLiBFYWNoIHByb2Nlc3NvciB3aWxsIHJlY2VpdmUgYWxsIHRyYWNlcy9zcGFucy5cbiAqXG4gKiBAcGFyYW0gcHJvY2Vzc29yIC0gVGhlIHByb2Nlc3NvciB0byBhZGQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRUcmFjZVByb2Nlc3Nvcihwcm9jZXNzb3IpIHtcbiAgICBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkucmVnaXN0ZXJQcm9jZXNzb3IocHJvY2Vzc29yKTtcbn1cbi8qKlxuICogU2V0IHRoZSBsaXN0IG9mIHByb2Nlc3NvcnMuIFRoaXMgd2lsbCByZXBsYWNlIGFueSBleGlzdGluZyBwcm9jZXNzb3JzLlxuICpcbiAqIEBwYXJhbSBwcm9jZXNzb3JzIC0gVGhlIGxpc3Qgb2YgcHJvY2Vzc29ycyB0byBzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRUcmFjZVByb2Nlc3NvcnMocHJvY2Vzc29ycykge1xuICAgIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5zZXRQcm9jZXNzb3JzKHByb2Nlc3NvcnMpO1xufVxuLyoqXG4gKiBTZXQgdGhlIGRpc2FibGVkIHN0YXRlIG9mIHRoZSB0cmFjaW5nIHByb3ZpZGVyLlxuICpcbiAqIEBwYXJhbSBkaXNhYmxlZCAtIFdoZXRoZXIgdG8gZGlzYWJsZSB0cmFjaW5nLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0VHJhY2luZ0Rpc2FibGVkKGRpc2FibGVkKSB7XG4gICAgZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLnNldERpc2FibGVkKGRpc2FibGVkKTtcbn1cbi8qKlxuICogU3RhcnQgdGhlIHRyYWNlIGV4cG9ydCBsb29wLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc3RhcnRUcmFjZUV4cG9ydExvb3AoKSB7XG4gICAgZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLnN0YXJ0RXhwb3J0TG9vcCgpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCIsImltcG9ydCB7IFJ1bnRpbWVFdmVudEVtaXR0ZXIsIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZS9fc2hpbXMnO1xuZXhwb3J0IGNsYXNzIEV2ZW50RW1pdHRlckRlbGVnYXRlIHtcbiAgICBvbih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICB0aGlzLmV2ZW50RW1pdHRlci5vbih0eXBlLCBsaXN0ZW5lcik7XG4gICAgICAgIHJldHVybiB0aGlzLmV2ZW50RW1pdHRlcjtcbiAgICB9XG4gICAgb2ZmKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICAgIHRoaXMuZXZlbnRFbWl0dGVyLm9mZih0eXBlLCBsaXN0ZW5lcik7XG4gICAgICAgIHJldHVybiB0aGlzLmV2ZW50RW1pdHRlcjtcbiAgICB9XG4gICAgZW1pdCh0eXBlLCAuLi5hcmdzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmV2ZW50RW1pdHRlci5lbWl0KHR5cGUsIC4uLmFyZ3MpO1xuICAgIH1cbiAgICBvbmNlKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICAgIHRoaXMuZXZlbnRFbWl0dGVyLm9uY2UodHlwZSwgbGlzdGVuZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5ldmVudEVtaXR0ZXI7XG4gICAgfVxufVxuLyoqXG4gKiBFdmVudCBlbWl0dGVyIHRoYXQgZXZlcnkgQWdlbnQgaW5zdGFuY2UgaW5oZXJpdHMgZnJvbSBhbmQgdGhhdCBlbWl0cyBldmVudHMgZm9yIHRoZSBsaWZlY3ljbGVcbiAqIG9mIHRoZSBhZ2VudC5cbiAqL1xuZXhwb3J0IGNsYXNzIEFnZW50SG9va3MgZXh0ZW5kcyBFdmVudEVtaXR0ZXJEZWxlZ2F0ZSB7XG4gICAgZXZlbnRFbWl0dGVyID0gbmV3IFJ1bnRpbWVFdmVudEVtaXR0ZXIoKTtcbn1cbi8qKlxuICogRXZlbnQgZW1pdHRlciB0aGF0IGV2ZXJ5IFJ1bm5lciBpbnN0YW5jZSBpbmhlcml0cyBmcm9tIGFuZCB0aGF0IGVtaXRzIGV2ZW50cyBmb3IgdGhlIGxpZmVjeWNsZVxuICogb2YgdGhlIG92ZXJhbGwgcnVuLlxuICovXG5leHBvcnQgY2xhc3MgUnVuSG9va3MgZXh0ZW5kcyBFdmVudEVtaXR0ZXJEZWxlZ2F0ZSB7XG4gICAgZXZlbnRFbWl0dGVyID0gbmV3IFJ1bnRpbWVFdmVudEVtaXR0ZXIoKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxpZmVjeWNsZS5tanMubWFwIiwiaW1wb3J0IHsgbG9hZEVudiB9IGZyb20gXCIuL2NvbmZpZy5tanNcIjtcbmV4cG9ydCBjb25zdCBPUEVOQUlfREVGQVVMVF9NT0RFTF9FTlZfVkFSSUFCTEVfTkFNRSA9ICdPUEVOQUlfREVGQVVMVF9NT0RFTCc7XG4vKipcbiAqIFJldHVybnMgVHJ1ZSBpZiB0aGUgbW9kZWwgbmFtZSBpcyBhIEdQVC01IG1vZGVsIGFuZCByZWFzb25pbmcgc2V0dGluZ3MgYXJlIHJlcXVpcmVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ3B0NVJlYXNvbmluZ1NldHRpbmdzUmVxdWlyZWQobW9kZWxOYW1lKSB7XG4gICAgaWYgKG1vZGVsTmFtZS5zdGFydHNXaXRoKCdncHQtNS1jaGF0JykpIHtcbiAgICAgICAgLy8gZ3B0LTUtY2hhdC1sYXRlc3QgZG9lcyBub3QgcmVxdWlyZSByZWFzb25pbmcgc2V0dGluZ3NcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvLyBtYXRjaGVzIGFueSBvZiBncHQtNSBtb2RlbHNcbiAgICByZXR1cm4gbW9kZWxOYW1lLnN0YXJ0c1dpdGgoJ2dwdC01Jyk7XG59XG4vKipcbiAqIFJldHVybnMgVHJ1ZSBpZiB0aGUgZGVmYXVsdCBtb2RlbCBpcyBhIEdQVC01IG1vZGVsLlxuICogVGhpcyBpcyB1c2VkIHRvIGRldGVybWluZSBpZiB0aGUgZGVmYXVsdCBtb2RlbCBzZXR0aW5ncyBhcmUgY29tcGF0aWJsZSB3aXRoIEdQVC01IG1vZGVscy5cbiAqIElmIHRoZSBkZWZhdWx0IG1vZGVsIGlzIG5vdCBhIEdQVC01IG1vZGVsLCB0aGUgbW9kZWwgc2V0dGluZ3MgYXJlIGNvbXBhdGlibGUgd2l0aCBvdGhlciBtb2RlbHMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0dwdDVEZWZhdWx0KCkge1xuICAgIHJldHVybiBncHQ1UmVhc29uaW5nU2V0dGluZ3NSZXF1aXJlZChnZXREZWZhdWx0TW9kZWwoKSk7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIGRlZmF1bHQgbW9kZWwgbmFtZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldERlZmF1bHRNb2RlbCgpIHtcbiAgICBjb25zdCBlbnYgPSBsb2FkRW52KCk7XG4gICAgcmV0dXJuIChlbnZbT1BFTkFJX0RFRkFVTFRfTU9ERUxfRU5WX1ZBUklBQkxFX05BTUVdPy50b0xvd2VyQ2FzZSgpID8/ICdncHQtNC4xJyk7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIGRlZmF1bHQgbW9kZWwgc2V0dGluZ3MuXG4gKiBJZiB0aGUgZGVmYXVsdCBtb2RlbCBpcyBhIEdQVC01IG1vZGVsLCByZXR1cm5zIHRoZSBHUFQtNSBkZWZhdWx0IG1vZGVsIHNldHRpbmdzLlxuICogT3RoZXJ3aXNlLCByZXR1cm5zIHRoZSBsZWdhY3kgZGVmYXVsdCBtb2RlbCBzZXR0aW5ncy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldERlZmF1bHRNb2RlbFNldHRpbmdzKG1vZGVsKSB7XG4gICAgY29uc3QgX21vZGVsID0gbW9kZWwgPz8gZ2V0RGVmYXVsdE1vZGVsKCk7XG4gICAgaWYgKGdwdDVSZWFzb25pbmdTZXR0aW5nc1JlcXVpcmVkKF9tb2RlbCkpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC8vIFdlIGNob3NlIFwibG93XCIgaW5zdGVhZCBvZiBcIm1pbmltYWxcIiBiZWNhdXNlIHNvbWUgb2YgdGhlIGJ1aWx0LWluIHRvb2xzXG4gICAgICAgICAgICAvLyAoZS5nLiwgZmlsZSBzZWFyY2gsIGltYWdlIGdlbmVyYXRpb24sIGV0Yy4pIGRvIG5vdCBzdXBwb3J0IFwibWluaW1hbFwiXG4gICAgICAgICAgICAvLyBJZiB5b3Ugd2FudCB0byB1c2UgXCJtaW5pbWFsXCIgcmVhc29uaW5nIGVmZm9ydCwgeW91IGNhbiBwYXNzIHlvdXIgb3duIG1vZGVsIHNldHRpbmdzXG4gICAgICAgICAgICByZWFzb25pbmc6IHsgZWZmb3J0OiAnbG93JyB9LFxuICAgICAgICAgICAgdGV4dDogeyB2ZXJib3NpdHk6ICdsb3cnIH0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7fTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlZmF1bHRNb2RlbC5tanMubWFwIiwiaW1wb3J0IHsgTW9kZWxCZWhhdmlvckVycm9yLCBVc2VyRXJyb3IgfSBmcm9tIFwiLi9lcnJvcnMubWpzXCI7XG5pbXBvcnQgeyB0b0Z1bmN0aW9uVG9vbE5hbWUgfSBmcm9tIFwiLi91dGlscy90b29scy5tanNcIjtcbmltcG9ydCB7IGdldFNjaGVtYUFuZFBhcnNlckZyb21JbnB1dFR5cGUgfSBmcm9tIFwiLi91dGlscy90b29scy5tanNcIjtcbmltcG9ydCB7IGFkZEVycm9yVG9DdXJyZW50U3BhbiB9IGZyb20gXCIuL3RyYWNpbmcvY29udGV4dC5tanNcIjtcbmltcG9ydCBsb2dnZXIgZnJvbSBcIi4vbG9nZ2VyLm1qc1wiO1xuLyoqXG4gKiBHZW5lcmF0ZXMgdGhlIG1lc3NhZ2UgdGhhdCB3aWxsIGJlIGdpdmVuIGFzIHRvb2wgb3V0cHV0IHRvIHRoZSBtb2RlbCB0aGF0IHJlcXVlc3RlZCB0aGUgaGFuZG9mZi5cbiAqXG4gKiBAcGFyYW0gYWdlbnQgVGhlIGFnZW50IHRvIHRyYW5zZmVyIHRvXG4gKiBAcmV0dXJucyBUaGUgbWVzc2FnZSB0aGF0IHdpbGwgYmUgZ2l2ZW4gYXMgdG9vbCBvdXRwdXQgdG8gdGhlIG1vZGVsIHRoYXQgcmVxdWVzdGVkIHRoZSBoYW5kb2ZmXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUcmFuc2Zlck1lc3NhZ2UoYWdlbnQpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoeyBhc3Npc3RhbnQ6IGFnZW50Lm5hbWUgfSk7XG59XG4vKipcbiAqIFRoZSBkZWZhdWx0IG5hbWUgb2YgdGhlIHRvb2wgdGhhdCByZXByZXNlbnRzIHRoZSBoYW5kb2ZmLlxuICpcbiAqIEBwYXJhbSBhZ2VudCBUaGUgYWdlbnQgdG8gdHJhbnNmZXIgdG9cbiAqIEByZXR1cm5zIFRoZSBuYW1lIG9mIHRoZSB0b29sIHRoYXQgcmVwcmVzZW50cyB0aGUgaGFuZG9mZlxuICovXG5mdW5jdGlvbiBkZWZhdWx0SGFuZG9mZlRvb2xOYW1lKGFnZW50KSB7XG4gICAgcmV0dXJuIGB0cmFuc2Zlcl90b18ke3RvRnVuY3Rpb25Ub29sTmFtZShhZ2VudC5uYW1lKX1gO1xufVxuLyoqXG4gKiBHZW5lcmF0ZXMgdGhlIGRlc2NyaXB0aW9uIG9mIHRoZSB0b29sIHRoYXQgcmVwcmVzZW50cyB0aGUgaGFuZG9mZi5cbiAqXG4gKiBAcGFyYW0gYWdlbnQgVGhlIGFnZW50IHRvIHRyYW5zZmVyIHRvXG4gKiBAcmV0dXJucyBUaGUgZGVzY3JpcHRpb24gb2YgdGhlIHRvb2wgdGhhdCByZXByZXNlbnRzIHRoZSBoYW5kb2ZmXG4gKi9cbmZ1bmN0aW9uIGRlZmF1bHRIYW5kb2ZmVG9vbERlc2NyaXB0aW9uKGFnZW50KSB7XG4gICAgcmV0dXJuIGBIYW5kb2ZmIHRvIHRoZSAke2FnZW50Lm5hbWV9IGFnZW50IHRvIGhhbmRsZSB0aGUgcmVxdWVzdC4gJHthZ2VudC5oYW5kb2ZmRGVzY3JpcHRpb24gPz8gJyd9YDtcbn1cbmV4cG9ydCBjbGFzcyBIYW5kb2ZmIHtcbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgdG9vbCB0aGF0IHJlcHJlc2VudHMgdGhlIGhhbmRvZmYuXG4gICAgICovXG4gICAgdG9vbE5hbWU7XG4gICAgLyoqXG4gICAgICogVGhlIGRlc2NyaXB0aW9uIG9mIHRoZSB0b29sIHRoYXQgcmVwcmVzZW50cyB0aGUgaGFuZG9mZi5cbiAgICAgKi9cbiAgICB0b29sRGVzY3JpcHRpb247XG4gICAgLyoqXG4gICAgICogVGhlIEpTT04gc2NoZW1hIGZvciB0aGUgaGFuZG9mZiBpbnB1dC4gQ2FuIGJlIGVtcHR5IGlmIHRoZSBoYW5kb2ZmIGRvZXMgbm90IHRha2UgYW4gaW5wdXRcbiAgICAgKi9cbiAgICBpbnB1dEpzb25TY2hlbWEgPSB7XG4gICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICBwcm9wZXJ0aWVzOiB7fSxcbiAgICAgICAgcmVxdWlyZWQ6IFtdLFxuICAgICAgICBhZGRpdGlvbmFsUHJvcGVydGllczogZmFsc2UsXG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoZSBpbnB1dCBKU09OIHNjaGVtYSBpcyBpbiBzdHJpY3QgbW9kZS4gV2UgKipzdHJvbmdseSoqIHJlY29tbWVuZCBzZXR0aW5nIHRoaXMgdG9cbiAgICAgKiB0cnVlLCBhcyBpdCBpbmNyZWFzZXMgdGhlIGxpa2VsaWhvb2Qgb2YgY29ycmVjdCBKU09OIGlucHV0LlxuICAgICAqL1xuICAgIHN0cmljdEpzb25TY2hlbWEgPSB0cnVlO1xuICAgIC8qKlxuICAgICAqIFRoZSBmdW5jdGlvbiB0aGF0IGludm9rZXMgdGhlIGhhbmRvZmYuIFRoZSBwYXJhbWV0ZXJzIHBhc3NlZCBhcmU6XG4gICAgICogMS4gVGhlIGhhbmRvZmYgcnVuIGNvbnRleHRcbiAgICAgKiAyLiBUaGUgYXJndW1lbnRzIGZyb20gdGhlIExMTSwgYXMgYSBKU09OIHN0cmluZy4gRW1wdHkgc3RyaW5nIGlmIGlucHV0SnNvblNjaGVtYSBpcyBlbXB0eS5cbiAgICAgKlxuICAgICAqIE11c3QgcmV0dXJuIGFuIGFnZW50XG4gICAgICovXG4gICAgb25JbnZva2VIYW5kb2ZmO1xuICAgIC8qKlxuICAgICAqIFRoZSBuYW1lIG9mIHRoZSBhZ2VudCB0aGF0IGlzIGJlaW5nIGhhbmRlZCBvZmYgdG8uXG4gICAgICovXG4gICAgYWdlbnROYW1lO1xuICAgIC8qKlxuICAgICAqIEEgZnVuY3Rpb24gdGhhdCBmaWx0ZXJzIHRoZSBpbnB1dHMgdGhhdCBhcmUgcGFzc2VkIHRvIHRoZSBuZXh0IGFnZW50LiBCeSBkZWZhdWx0LCB0aGUgbmV3IGFnZW50XG4gICAgICogc2VlcyB0aGUgZW50aXJlIGNvbnZlcnNhdGlvbiBoaXN0b3J5LiBJbiBzb21lIGNhc2VzLCB5b3UgbWF5IHdhbnQgdG8gZmlsdGVyIGlucHV0cyBlLmcuIHRvXG4gICAgICogcmVtb3ZlIG9sZGVyIGlucHV0cywgb3IgcmVtb3ZlIHRvb2xzIGZyb20gZXhpc3RpbmcgaW5wdXRzLlxuICAgICAqXG4gICAgICogVGhlIGZ1bmN0aW9uIHdpbGwgcmVjZWl2ZSB0aGUgZW50aXJlIGNvbnZlcnNhdGlvbiBoaXNzdG9yeSBzbyBmYXIsIGluY2x1ZGluZyB0aGUgaW5wdXQgaXRlbVxuICAgICAqIHRoYXQgdHJpZ2dlcmVkIHRoZSBoYW5kb2ZmIGFuZCBhIHRvb2wgY2FsbCBvdXRwdXQgaXRlbSByZXByZXNlbnRpbmcgdGhlIGhhbmRvZmYgdG9vbCdzIG91dHB1dC5cbiAgICAgKlxuICAgICAqIFlvdSBhcmUgZnJlZSB0byBtb2RpZnkgdGhlIGlucHV0IGhpc3Rvcnkgb3IgbmV3IGl0ZW1zIGFzIHlvdSBzZWUgZml0LiBUaGUgbmV4dCBhZ2VudCB0aGF0IHJ1bnNcbiAgICAgKiB3aWxsIHJlY2VpdmUgYGhhbmRvZmZJbnB1dERhdGEuYWxsSXRlbXNcbiAgICAgKi9cbiAgICBpbnB1dEZpbHRlcjtcbiAgICAvKipcbiAgICAgKiBUaGUgYWdlbnQgdGhhdCBpcyBiZWluZyBoYW5kZWQgb2ZmIHRvLlxuICAgICAqL1xuICAgIGFnZW50O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBmdW5jdGlvbiB0b29sIGRlZmluaXRpb24gdGhhdCBjYW4gYmUgdXNlZCB0byBpbnZva2UgdGhlIGhhbmRvZmYuXG4gICAgICovXG4gICAgZ2V0SGFuZG9mZkFzRnVuY3Rpb25Ub29sKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ2Z1bmN0aW9uJyxcbiAgICAgICAgICAgIG5hbWU6IHRoaXMudG9vbE5hbWUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy50b29sRGVzY3JpcHRpb24sXG4gICAgICAgICAgICBwYXJhbWV0ZXJzOiB0aGlzLmlucHV0SnNvblNjaGVtYSxcbiAgICAgICAgICAgIHN0cmljdDogdGhpcy5zdHJpY3RKc29uU2NoZW1hLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBpc0VuYWJsZWQgPSBhc3luYyAoKSA9PiB0cnVlO1xuICAgIGNvbnN0cnVjdG9yKGFnZW50LCBvbkludm9rZUhhbmRvZmYpIHtcbiAgICAgICAgdGhpcy5hZ2VudE5hbWUgPSBhZ2VudC5uYW1lO1xuICAgICAgICB0aGlzLm9uSW52b2tlSGFuZG9mZiA9IG9uSW52b2tlSGFuZG9mZjtcbiAgICAgICAgdGhpcy50b29sTmFtZSA9IGRlZmF1bHRIYW5kb2ZmVG9vbE5hbWUoYWdlbnQpO1xuICAgICAgICB0aGlzLnRvb2xEZXNjcmlwdGlvbiA9IGRlZmF1bHRIYW5kb2ZmVG9vbERlc2NyaXB0aW9uKGFnZW50KTtcbiAgICAgICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICAgIH1cbn1cbi8qKlxuICogQ3JlYXRlcyBhIGhhbmRvZmYgZnJvbSBhbiBhZ2VudC4gSGFuZG9mZnMgYXJlIGF1dG9tYXRpY2FsbHkgY3JlYXRlZCB3aGVuIHlvdSBwYXNzIGFuIGFnZW50XG4gKiBpbnRvIHRoZSBgaGFuZG9mZnNgIG9wdGlvbiBvZiB0aGUgYEFnZW50YCBjb25zdHJ1Y3Rvci4gQWx0ZXJuYXRpdmVseSwgeW91IGNhbiB1c2UgdGhpcyBmdW5jdGlvblxuICogdG8gY3JlYXRlIGEgaGFuZG9mZiBtYW51YWxseSwgZ2l2aW5nIHlvdSBtb3JlIGNvbnRyb2wgb3ZlciBjb25maWd1cmF0aW9uLlxuICpcbiAqIEB0ZW1wbGF0ZSBUQ29udGV4dCBUaGUgY29udGV4dCBvZiB0aGUgaGFuZG9mZlxuICogQHRlbXBsYXRlIFRPdXRwdXQgVGhlIG91dHB1dCB0eXBlIG9mIHRoZSBoYW5kb2ZmXG4gKiBAdGVtcGxhdGUgVElucHV0VHlwZSBUaGUgaW5wdXQgdHlwZSBvZiB0aGUgaGFuZG9mZlxuICovXG5leHBvcnQgZnVuY3Rpb24gaGFuZG9mZihhZ2VudCwgY29uZmlnID0ge30pIHtcbiAgICBsZXQgcGFyc2VyID0gdW5kZWZpbmVkO1xuICAgIGNvbnN0IGhhc09uSGFuZG9mZiA9ICEhY29uZmlnLm9uSGFuZG9mZjtcbiAgICBjb25zdCBoYXNJbnB1dFR5cGUgPSAhIWNvbmZpZy5pbnB1dFR5cGU7XG4gICAgY29uc3QgaGFzQm90aE9yTmVpdGhlckhhbmRvZmZBbmRJbnB1dFR5cGUgPSBoYXNPbkhhbmRvZmYgPT09IGhhc0lucHV0VHlwZTtcbiAgICBpZiAoIWhhc0JvdGhPck5laXRoZXJIYW5kb2ZmQW5kSW5wdXRUeXBlKSB7XG4gICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ1lvdSBtdXN0IHByb3ZpZGUgZWl0aGVyIGJvdGggYG9uSGFuZG9mZmAgYW5kIGBpbnB1dFR5cGVgIG9yIG5laXRoZXIuJyk7XG4gICAgfVxuICAgIGFzeW5jIGZ1bmN0aW9uIG9uSW52b2tlSGFuZG9mZihjb250ZXh0LCBpbnB1dEpzb25TdHJpbmcpIHtcbiAgICAgICAgaWYgKHBhcnNlcikge1xuICAgICAgICAgICAgaWYgKCFpbnB1dEpzb25TdHJpbmcpIHtcbiAgICAgICAgICAgICAgICBhZGRFcnJvclRvQ3VycmVudFNwYW4oe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBgSGFuZG9mZiBmdW5jdGlvbiBleHBlY3RlZCBub24gZW1wdHkgaW5wdXQgYnV0IGdvdDogJHtpbnB1dEpzb25TdHJpbmd9YCxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsczogYGlucHV0IGlzIGVtcHR5YCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKCdIYW5kb2ZmIGZ1bmN0aW9uIGV4cGVjdGVkIG5vbiBlbXB0eSBpbnB1dCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyB2ZXJpZnkgdGhhdCBpdCdzIHZhbGlkIGlucHV0IGJ1dCB3ZSBkb24ndCBjYXJlIGFib3V0IHRoZSByZXN1bHRcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWQgPSBhd2FpdCBwYXJzZXIoaW5wdXRKc29uU3RyaW5nKTtcbiAgICAgICAgICAgICAgICBpZiAoY29uZmlnLm9uSGFuZG9mZikge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBjb25maWcub25IYW5kb2ZmKGNvbnRleHQsIHBhcnNlZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgYWRkRXJyb3JUb0N1cnJlbnRTcGFuKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogYEludmFsaWQgSlNPTiBwcm92aWRlZGAsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHt9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmICghbG9nZ2VyLmRvbnRMb2dUb29sRGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoYEludmFsaWQgSlNPTiB3aGVuIHBhcnNpbmc6ICR7aW5wdXRKc29uU3RyaW5nfS4gRXJyb3I6ICR7ZXJyb3J9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBNb2RlbEJlaGF2aW9yRXJyb3IoJ0ludmFsaWQgSlNPTiBwcm92aWRlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgY29uZmlnLm9uSGFuZG9mZj8uKGNvbnRleHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhZ2VudDtcbiAgICB9XG4gICAgY29uc3QgaGFuZG9mZiA9IG5ldyBIYW5kb2ZmKGFnZW50LCBvbkludm9rZUhhbmRvZmYpO1xuICAgIGlmICh0eXBlb2YgY29uZmlnLmlzRW5hYmxlZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBjb25zdCBwcmVkaWNhdGUgPSBjb25maWcuaXNFbmFibGVkO1xuICAgICAgICBoYW5kb2ZmLmlzRW5hYmxlZCA9IGFzeW5jICh7IHJ1bkNvbnRleHQsIGFnZW50IH0pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHByZWRpY2F0ZSh7IHJ1bkNvbnRleHQsIGFnZW50IH0pO1xuICAgICAgICAgICAgcmV0dXJuIEJvb2xlYW4ocmVzdWx0KTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGNvbmZpZy5pc0VuYWJsZWQgPT09ICdib29sZWFuJykge1xuICAgICAgICBoYW5kb2ZmLmlzRW5hYmxlZCA9IGFzeW5jICgpID0+IGNvbmZpZy5pc0VuYWJsZWQ7XG4gICAgfVxuICAgIGlmIChjb25maWcuaW5wdXRUeXBlKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGdldFNjaGVtYUFuZFBhcnNlckZyb21JbnB1dFR5cGUoY29uZmlnLmlucHV0VHlwZSwgaGFuZG9mZi50b29sTmFtZSk7XG4gICAgICAgIGhhbmRvZmYuaW5wdXRKc29uU2NoZW1hID0gcmVzdWx0LnNjaGVtYTtcbiAgICAgICAgaGFuZG9mZi5zdHJpY3RKc29uU2NoZW1hID0gdHJ1ZTtcbiAgICAgICAgcGFyc2VyID0gcmVzdWx0LnBhcnNlcjtcbiAgICB9XG4gICAgaWYgKGNvbmZpZy50b29sTmFtZU92ZXJyaWRlKSB7XG4gICAgICAgIGhhbmRvZmYudG9vbE5hbWUgPSBjb25maWcudG9vbE5hbWVPdmVycmlkZTtcbiAgICB9XG4gICAgaWYgKGNvbmZpZy50b29sRGVzY3JpcHRpb25PdmVycmlkZSkge1xuICAgICAgICBoYW5kb2ZmLnRvb2xEZXNjcmlwdGlvbiA9IGNvbmZpZy50b29sRGVzY3JpcHRpb25PdmVycmlkZTtcbiAgICB9XG4gICAgaWYgKGNvbmZpZy5pbnB1dEZpbHRlcikge1xuICAgICAgICBoYW5kb2ZmLmlucHV0RmlsdGVyID0gY29uZmlnLmlucHV0RmlsdGVyO1xuICAgIH1cbiAgICByZXR1cm4gaGFuZG9mZjtcbn1cbi8qKlxuICogUmV0dXJucyBhIGhhbmRvZmYgZm9yIHRoZSBnaXZlbiBhZ2VudC4gSWYgdGhlIGFnZW50IGlzIGFscmVhZHkgd3JhcHBlZCBpbnRvIGEgaGFuZG9mZixcbiAqIGl0IHdpbGwgYmUgcmV0dXJuZWQgYXMgaXMuIE90aGVyd2lzZSwgYSBuZXcgaGFuZG9mZiBpbnN0YW5jZSB3aWxsIGJlIGNyZWF0ZWQuXG4gKlxuICogQHRlbXBsYXRlIFRDb250ZXh0IFRoZSBjb250ZXh0IG9mIHRoZSBoYW5kb2ZmXG4gKiBAdGVtcGxhdGUgVE91dHB1dCBUaGUgb3V0cHV0IHR5cGUgb2YgdGhlIGhhbmRvZmZcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEhhbmRvZmYoYWdlbnQpIHtcbiAgICBpZiAoYWdlbnQgaW5zdGFuY2VvZiBIYW5kb2ZmKSB7XG4gICAgICAgIHJldHVybiBhZ2VudDtcbiAgICB9XG4gICAgcmV0dXJuIGhhbmRvZmYoYWdlbnQpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aGFuZG9mZi5tanMubWFwIiwiLyoqXG4gKiBTdHJlYW1pbmcgZXZlbnQgZnJvbSB0aGUgTExNLiBUaGVzZSBhcmUgYHJhd2AgZXZlbnRzLCBpLmUuIHRoZXkgYXJlIGRpcmVjdGx5IHBhc3NlZCB0aHJvdWdoIGZyb21cbiAqIHRoZSBMTE0uXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5SYXdNb2RlbFN0cmVhbUV2ZW50IHtcbiAgICBkYXRhO1xuICAgIC8qKlxuICAgICAqIFRoZSB0eXBlIG9mIHRoZSBldmVudC5cbiAgICAgKi9cbiAgICB0eXBlID0gJ3Jhd19tb2RlbF9zdHJlYW1fZXZlbnQnO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBkYXRhIFRoZSByYXcgcmVzcG9uc2VzIHN0cmVhbSBldmVudHMgZnJvbSB0aGUgTExNLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICB9XG59XG4vKipcbiAqIFN0cmVhbWluZyBldmVudHMgdGhhdCB3cmFwIGEgYFJ1bkl0ZW1gLiBBcyB0aGUgYWdlbnQgcHJvY2Vzc2VzIHRoZSBMTE0gcmVzcG9uc2UsIGl0IHdpbGwgZ2VuZXJhdGVcbiAqIHRoZXNlIGV2ZW50cyBmcm9tIG5ldyBtZXNzYWdlcywgdG9vbCBjYWxscywgdG9vbCBvdXRwdXRzLCBoYW5kb2ZmcywgZXRjLlxuICovXG5leHBvcnQgY2xhc3MgUnVuSXRlbVN0cmVhbUV2ZW50IHtcbiAgICBuYW1lO1xuICAgIGl0ZW07XG4gICAgdHlwZSA9ICdydW5faXRlbV9zdHJlYW1fZXZlbnQnO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBldmVudC5cbiAgICAgKiBAcGFyYW0gaXRlbSBUaGUgaXRlbSB0aGF0IHdhcyBjcmVhdGVkLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKG5hbWUsIGl0ZW0pIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5pdGVtID0gaXRlbTtcbiAgICB9XG59XG4vKipcbiAqIEV2ZW50IHRoYXQgbm90aWZpZXMgdGhhdCB0aGVyZSBpcyBhIG5ldyBhZ2VudCBydW5uaW5nLlxuICovXG5leHBvcnQgY2xhc3MgUnVuQWdlbnRVcGRhdGVkU3RyZWFtRXZlbnQge1xuICAgIGFnZW50O1xuICAgIHR5cGUgPSAnYWdlbnRfdXBkYXRlZF9zdHJlYW1fZXZlbnQnO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBhZ2VudCBUaGUgbmV3IGFnZW50XG4gICAgICovXG4gICAgY29uc3RydWN0b3IoYWdlbnQpIHtcbiAgICAgICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWV2ZW50cy5tanMubWFwIiwiLyoqXG4gKiBEZWZpbmVzIGFuIGlucHV0IGd1YXJkcmFpbCBkZWZpbml0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVmaW5lSW5wdXRHdWFyZHJhaWwoeyBuYW1lLCBleGVjdXRlLCBydW5JblBhcmFsbGVsID0gdHJ1ZSwgfSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdpbnB1dCcsXG4gICAgICAgIG5hbWUsXG4gICAgICAgIHJ1bkluUGFyYWxsZWwsXG4gICAgICAgIGd1YXJkcmFpbEZ1bmN0aW9uOiBleGVjdXRlLFxuICAgICAgICBhc3luYyBydW4oYXJncykge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBndWFyZHJhaWw6IHsgdHlwZTogJ2lucHV0JywgbmFtZSB9LFxuICAgICAgICAgICAgICAgIG91dHB1dDogYXdhaXQgZXhlY3V0ZShhcmdzKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgfTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhbiBvdXRwdXQgZ3VhcmRyYWlsIGRlZmluaXRpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWZpbmVPdXRwdXRHdWFyZHJhaWwoeyBuYW1lLCBleGVjdXRlLCB9KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ291dHB1dCcsXG4gICAgICAgIG5hbWUsXG4gICAgICAgIGd1YXJkcmFpbEZ1bmN0aW9uOiBleGVjdXRlLFxuICAgICAgICBhc3luYyBydW4oYXJncykge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBndWFyZHJhaWw6IHsgdHlwZTogJ291dHB1dCcsIG5hbWUgfSxcbiAgICAgICAgICAgICAgICBhZ2VudDogYXJncy5hZ2VudCxcbiAgICAgICAgICAgICAgICBhZ2VudE91dHB1dDogYXJncy5hZ2VudE91dHB1dCxcbiAgICAgICAgICAgICAgICBvdXRwdXQ6IGF3YWl0IGV4ZWN1dGUoYXJncyksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ndWFyZHJhaWwubWpzLm1hcCIsImxldCBERUZBVUxUX1BST1ZJREVSO1xuLyoqXG4gKiBTZXQgdGhlIG1vZGVsIHByb3ZpZGVyIHVzZWQgd2hlbiBubyBleHBsaWNpdCBwcm92aWRlciBpcyBzdXBwbGllZC5cbiAqXG4gKiBAcGFyYW0gcHJvdmlkZXIgLSBUaGUgcHJvdmlkZXIgdG8gdXNlIGJ5IGRlZmF1bHQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXREZWZhdWx0TW9kZWxQcm92aWRlcihwcm92aWRlcikge1xuICAgIERFRkFVTFRfUFJPVklERVIgPSBwcm92aWRlcjtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgZGVmYXVsdCBtb2RlbCBwcm92aWRlci5cbiAqXG4gKiBAcmV0dXJucyBUaGUgZGVmYXVsdCBtb2RlbCBwcm92aWRlci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldERlZmF1bHRNb2RlbFByb3ZpZGVyKCkge1xuICAgIGlmICh0eXBlb2YgREVGQVVMVF9QUk9WSURFUiA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBkZWZhdWx0IG1vZGVsIHByb3ZpZGVyIHNldC4gTWFrZSBzdXJlIHRvIHNldCBhIHByb3ZpZGVyIHVzaW5nIHNldERlZmF1bHRNb2RlbFByb3ZpZGVyIGJlZm9yZSBjYWxsaW5nIGdldERlZmF1bHRNb2RlbFByb3ZpZGVyIG9yIHBhc3MgYW4gZXhwbGljaXQgcHJvdmlkZXIuJyk7XG4gICAgfVxuICAgIHJldHVybiBERUZBVUxUX1BST1ZJREVSO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJvdmlkZXJzLm1qcy5tYXAiLCJpbXBvcnQgeyBSZXF1ZXN0VXNhZ2VEYXRhLCBVc2FnZURhdGEgfSBmcm9tIFwiLi90eXBlcy9wcm90b2NvbC5tanNcIjtcbi8qKlxuICogVXNhZ2UgZGV0YWlscyBmb3IgYSBzaW5nbGUgQVBJIHJlcXVlc3QuXG4gKi9cbmV4cG9ydCBjbGFzcyBSZXF1ZXN0VXNhZ2Uge1xuICAgIC8qKlxuICAgICAqIFRoZSBudW1iZXIgb2YgaW5wdXQgdG9rZW5zIHVzZWQgZm9yIHRoaXMgcmVxdWVzdC5cbiAgICAgKi9cbiAgICBpbnB1dFRva2VucztcbiAgICAvKipcbiAgICAgKiBUaGUgbnVtYmVyIG9mIG91dHB1dCB0b2tlbnMgdXNlZCBmb3IgdGhpcyByZXF1ZXN0LlxuICAgICAqL1xuICAgIG91dHB1dFRva2VucztcbiAgICAvKipcbiAgICAgKiBUaGUgdG90YWwgbnVtYmVyIG9mIHRva2VucyBzZW50IGFuZCByZWNlaXZlZCBmb3IgdGhpcyByZXF1ZXN0LlxuICAgICAqL1xuICAgIHRvdGFsVG9rZW5zO1xuICAgIC8qKlxuICAgICAqIERldGFpbHMgYWJvdXQgdGhlIGlucHV0IHRva2VucyB1c2VkIGZvciB0aGlzIHJlcXVlc3QuXG4gICAgICovXG4gICAgaW5wdXRUb2tlbnNEZXRhaWxzO1xuICAgIC8qKlxuICAgICAqIERldGFpbHMgYWJvdXQgdGhlIG91dHB1dCB0b2tlbnMgdXNlZCBmb3IgdGhpcyByZXF1ZXN0LlxuICAgICAqL1xuICAgIG91dHB1dFRva2Vuc0RldGFpbHM7XG4gICAgLyoqXG4gICAgICogVGhlIGVuZHBvaW50IHRoYXQgcHJvZHVjZWQgdGhpcyB1c2FnZSBlbnRyeSAoZS5nLiwgcmVzcG9uc2VzLmNyZWF0ZSwgcmVzcG9uc2VzLmNvbXBhY3QpLlxuICAgICAqL1xuICAgIGVuZHBvaW50O1xuICAgIGNvbnN0cnVjdG9yKGlucHV0KSB7XG4gICAgICAgIHRoaXMuaW5wdXRUb2tlbnMgPSBpbnB1dD8uaW5wdXRUb2tlbnMgPz8gaW5wdXQ/LmlucHV0X3Rva2VucyA/PyAwO1xuICAgICAgICB0aGlzLm91dHB1dFRva2VucyA9IGlucHV0Py5vdXRwdXRUb2tlbnMgPz8gaW5wdXQ/Lm91dHB1dF90b2tlbnMgPz8gMDtcbiAgICAgICAgdGhpcy50b3RhbFRva2VucyA9XG4gICAgICAgICAgICBpbnB1dD8udG90YWxUb2tlbnMgPz9cbiAgICAgICAgICAgICAgICBpbnB1dD8udG90YWxfdG9rZW5zID8/XG4gICAgICAgICAgICAgICAgdGhpcy5pbnB1dFRva2VucyArIHRoaXMub3V0cHV0VG9rZW5zO1xuICAgICAgICBjb25zdCBpbnB1dFRva2Vuc0RldGFpbHMgPSBpbnB1dD8uaW5wdXRUb2tlbnNEZXRhaWxzID8/IGlucHV0Py5pbnB1dF90b2tlbnNfZGV0YWlscztcbiAgICAgICAgdGhpcy5pbnB1dFRva2Vuc0RldGFpbHMgPSBpbnB1dFRva2Vuc0RldGFpbHNcbiAgICAgICAgICAgID8gaW5wdXRUb2tlbnNEZXRhaWxzXG4gICAgICAgICAgICA6IHt9O1xuICAgICAgICBjb25zdCBvdXRwdXRUb2tlbnNEZXRhaWxzID0gaW5wdXQ/Lm91dHB1dFRva2Vuc0RldGFpbHMgPz8gaW5wdXQ/Lm91dHB1dF90b2tlbnNfZGV0YWlscztcbiAgICAgICAgdGhpcy5vdXRwdXRUb2tlbnNEZXRhaWxzID0gb3V0cHV0VG9rZW5zRGV0YWlsc1xuICAgICAgICAgICAgPyBvdXRwdXRUb2tlbnNEZXRhaWxzXG4gICAgICAgICAgICA6IHt9O1xuICAgICAgICBpZiAodHlwZW9mIGlucHV0Py5lbmRwb2ludCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHRoaXMuZW5kcG9pbnQgPSBpbnB1dC5lbmRwb2ludDtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogVHJhY2tzIHRva2VuIHVzYWdlIGFuZCByZXF1ZXN0IGNvdW50cyBmb3IgYW4gYWdlbnQgcnVuLlxuICovXG5leHBvcnQgY2xhc3MgVXNhZ2Uge1xuICAgIC8qKlxuICAgICAqIFRoZSBudW1iZXIgb2YgcmVxdWVzdHMgbWFkZSB0byB0aGUgTExNIEFQSS5cbiAgICAgKi9cbiAgICByZXF1ZXN0cztcbiAgICAvKipcbiAgICAgKiBUaGUgbnVtYmVyIG9mIGlucHV0IHRva2VucyB1c2VkIGFjcm9zcyBhbGwgcmVxdWVzdHMuXG4gICAgICovXG4gICAgaW5wdXRUb2tlbnM7XG4gICAgLyoqXG4gICAgICogVGhlIG51bWJlciBvZiBvdXRwdXQgdG9rZW5zIHVzZWQgYWNyb3NzIGFsbCByZXF1ZXN0cy5cbiAgICAgKi9cbiAgICBvdXRwdXRUb2tlbnM7XG4gICAgLyoqXG4gICAgICogVGhlIHRvdGFsIG51bWJlciBvZiB0b2tlbnMgc2VudCBhbmQgcmVjZWl2ZWQsIGFjcm9zcyBhbGwgcmVxdWVzdHMuXG4gICAgICovXG4gICAgdG90YWxUb2tlbnM7XG4gICAgLyoqXG4gICAgICogRGV0YWlscyBhYm91dCB0aGUgaW5wdXQgdG9rZW5zIHVzZWQgYWNyb3NzIGFsbCByZXF1ZXN0cy5cbiAgICAgKi9cbiAgICBpbnB1dFRva2Vuc0RldGFpbHMgPSBbXTtcbiAgICAvKipcbiAgICAgKiBEZXRhaWxzIGFib3V0IHRoZSBvdXRwdXQgdG9rZW5zIHVzZWQgYWNyb3NzIGFsbCByZXF1ZXN0cy5cbiAgICAgKi9cbiAgICBvdXRwdXRUb2tlbnNEZXRhaWxzID0gW107XG4gICAgLyoqXG4gICAgICogTGlzdCBvZiBwZXItcmVxdWVzdCB1c2FnZSBlbnRyaWVzIGZvciBkZXRhaWxlZCBjb3N0IGNhbGN1bGF0aW9ucy5cbiAgICAgKi9cbiAgICByZXF1ZXN0VXNhZ2VFbnRyaWVzO1xuICAgIGNvbnN0cnVjdG9yKGlucHV0KSB7XG4gICAgICAgIGlmICh0eXBlb2YgaW5wdXQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RzID0gMDtcbiAgICAgICAgICAgIHRoaXMuaW5wdXRUb2tlbnMgPSAwO1xuICAgICAgICAgICAgdGhpcy5vdXRwdXRUb2tlbnMgPSAwO1xuICAgICAgICAgICAgdGhpcy50b3RhbFRva2VucyA9IDA7XG4gICAgICAgICAgICB0aGlzLmlucHV0VG9rZW5zRGV0YWlscyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5vdXRwdXRUb2tlbnNEZXRhaWxzID0gW107XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RVc2FnZUVudHJpZXMgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RzID0gaW5wdXQ/LnJlcXVlc3RzID8/IDE7XG4gICAgICAgICAgICB0aGlzLmlucHV0VG9rZW5zID0gaW5wdXQ/LmlucHV0VG9rZW5zID8/IGlucHV0Py5pbnB1dF90b2tlbnMgPz8gMDtcbiAgICAgICAgICAgIHRoaXMub3V0cHV0VG9rZW5zID0gaW5wdXQ/Lm91dHB1dFRva2VucyA/PyBpbnB1dD8ub3V0cHV0X3Rva2VucyA/PyAwO1xuICAgICAgICAgICAgdGhpcy50b3RhbFRva2VucyA9XG4gICAgICAgICAgICAgICAgaW5wdXQ/LnRvdGFsVG9rZW5zID8/XG4gICAgICAgICAgICAgICAgICAgIGlucHV0Py50b3RhbF90b2tlbnMgPz9cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnB1dFRva2VucyArIHRoaXMub3V0cHV0VG9rZW5zO1xuICAgICAgICAgICAgY29uc3QgaW5wdXRUb2tlbnNEZXRhaWxzID0gaW5wdXQ/LmlucHV0VG9rZW5zRGV0YWlscyA/PyBpbnB1dD8uaW5wdXRfdG9rZW5zX2RldGFpbHM7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShpbnB1dFRva2Vuc0RldGFpbHMpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnB1dFRva2Vuc0RldGFpbHMgPSBpbnB1dFRva2Vuc0RldGFpbHM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlucHV0VG9rZW5zRGV0YWlscyA9IGlucHV0VG9rZW5zRGV0YWlsc1xuICAgICAgICAgICAgICAgICAgICA/IFtpbnB1dFRva2Vuc0RldGFpbHNdXG4gICAgICAgICAgICAgICAgICAgIDogW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBvdXRwdXRUb2tlbnNEZXRhaWxzID0gaW5wdXQ/Lm91dHB1dFRva2Vuc0RldGFpbHMgPz8gaW5wdXQ/Lm91dHB1dF90b2tlbnNfZGV0YWlscztcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG91dHB1dFRva2Vuc0RldGFpbHMpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRUb2tlbnNEZXRhaWxzID0gb3V0cHV0VG9rZW5zRGV0YWlscztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMub3V0cHV0VG9rZW5zRGV0YWlscyA9IG91dHB1dFRva2Vuc0RldGFpbHNcbiAgICAgICAgICAgICAgICAgICAgPyBbb3V0cHV0VG9rZW5zRGV0YWlsc11cbiAgICAgICAgICAgICAgICAgICAgOiBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RVc2FnZUVudHJpZXMgPSBpbnB1dD8ucmVxdWVzdFVzYWdlRW50cmllcyA/PyBpbnB1dD8ucmVxdWVzdF91c2FnZV9lbnRyaWVzO1xuICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZFJlcXVlc3RVc2FnZUVudHJpZXMgPSBBcnJheS5pc0FycmF5KHJlcXVlc3RVc2FnZUVudHJpZXMpXG4gICAgICAgICAgICAgICAgPyByZXF1ZXN0VXNhZ2VFbnRyaWVzLm1hcCgoZW50cnkpID0+IGVudHJ5IGluc3RhbmNlb2YgUmVxdWVzdFVzYWdlID8gZW50cnkgOiBuZXcgUmVxdWVzdFVzYWdlKGVudHJ5KSlcbiAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdFVzYWdlRW50cmllcyA9XG4gICAgICAgICAgICAgICAgbm9ybWFsaXplZFJlcXVlc3RVc2FnZUVudHJpZXMgJiZcbiAgICAgICAgICAgICAgICAgICAgbm9ybWFsaXplZFJlcXVlc3RVc2FnZUVudHJpZXMubGVuZ3RoID4gMFxuICAgICAgICAgICAgICAgICAgICA/IG5vcm1hbGl6ZWRSZXF1ZXN0VXNhZ2VFbnRyaWVzXG4gICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFkZChuZXdVc2FnZSkge1xuICAgICAgICB0aGlzLnJlcXVlc3RzICs9IG5ld1VzYWdlLnJlcXVlc3RzID8/IDA7XG4gICAgICAgIHRoaXMuaW5wdXRUb2tlbnMgKz0gbmV3VXNhZ2UuaW5wdXRUb2tlbnMgPz8gMDtcbiAgICAgICAgdGhpcy5vdXRwdXRUb2tlbnMgKz0gbmV3VXNhZ2Uub3V0cHV0VG9rZW5zID8/IDA7XG4gICAgICAgIHRoaXMudG90YWxUb2tlbnMgKz0gbmV3VXNhZ2UudG90YWxUb2tlbnMgPz8gMDtcbiAgICAgICAgaWYgKG5ld1VzYWdlLmlucHV0VG9rZW5zRGV0YWlscykge1xuICAgICAgICAgICAgLy8gVGhlIHR5cGUgZG9lcyBub3QgYWxsb3cgdW5kZWZpbmVkLCBidXQgaXQgY291bGQgaGFwcGVuIHJ1bnRpbWVcbiAgICAgICAgICAgIHRoaXMuaW5wdXRUb2tlbnNEZXRhaWxzLnB1c2goLi4ubmV3VXNhZ2UuaW5wdXRUb2tlbnNEZXRhaWxzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobmV3VXNhZ2Uub3V0cHV0VG9rZW5zRGV0YWlscykge1xuICAgICAgICAgICAgLy8gVGhlIHR5cGUgZG9lcyBub3QgYWxsb3cgdW5kZWZpbmVkLCBidXQgaXQgY291bGQgaGFwcGVuIHJ1bnRpbWVcbiAgICAgICAgICAgIHRoaXMub3V0cHV0VG9rZW5zRGV0YWlscy5wdXNoKC4uLm5ld1VzYWdlLm91dHB1dFRva2Vuc0RldGFpbHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5ld1VzYWdlLnJlcXVlc3RVc2FnZUVudHJpZXMpICYmXG4gICAgICAgICAgICBuZXdVc2FnZS5yZXF1ZXN0VXNhZ2VFbnRyaWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdFVzYWdlRW50cmllcyA/Pz0gW107XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RVc2FnZUVudHJpZXMucHVzaCguLi5uZXdVc2FnZS5yZXF1ZXN0VXNhZ2VFbnRyaWVzLm1hcCgoZW50cnkpID0+IGVudHJ5IGluc3RhbmNlb2YgUmVxdWVzdFVzYWdlID8gZW50cnkgOiBuZXcgUmVxdWVzdFVzYWdlKGVudHJ5KSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG5ld1VzYWdlLnJlcXVlc3RzID09PSAxICYmIG5ld1VzYWdlLnRvdGFsVG9rZW5zID4gMCkge1xuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0VXNhZ2VFbnRyaWVzID8/PSBbXTtcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdFVzYWdlRW50cmllcy5wdXNoKG5ldyBSZXF1ZXN0VXNhZ2Uoe1xuICAgICAgICAgICAgICAgIGlucHV0VG9rZW5zOiBuZXdVc2FnZS5pbnB1dFRva2VucyxcbiAgICAgICAgICAgICAgICBvdXRwdXRUb2tlbnM6IG5ld1VzYWdlLm91dHB1dFRva2VucyxcbiAgICAgICAgICAgICAgICB0b3RhbFRva2VuczogbmV3VXNhZ2UudG90YWxUb2tlbnMsXG4gICAgICAgICAgICAgICAgaW5wdXRUb2tlbnNEZXRhaWxzOiBuZXdVc2FnZS5pbnB1dFRva2Vuc0RldGFpbHM/LlswXSxcbiAgICAgICAgICAgICAgICBvdXRwdXRUb2tlbnNEZXRhaWxzOiBuZXdVc2FnZS5vdXRwdXRUb2tlbnNEZXRhaWxzPy5bMF0sXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgeyBSZXF1ZXN0VXNhZ2VEYXRhLCBVc2FnZURhdGEgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVzYWdlLm1qcy5tYXAiLCJpbXBvcnQgbG9nZ2VyIGZyb20gXCIuL2xvZ2dlci5tanNcIjtcbmltcG9ydCB7IFVzYWdlIH0gZnJvbSBcIi4vdXNhZ2UubWpzXCI7XG4vKipcbiAqIEEgY29udGV4dCBvYmplY3QgdGhhdCBpcyBwYXNzZWQgdG8gdGhlIGBSdW5uZXIucnVuKClgIG1ldGhvZC5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bkNvbnRleHQge1xuICAgIC8qKlxuICAgICAqIFRoZSBjb250ZXh0IG9iamVjdCB5b3UgcGFzc2VkIHRvIHRoZSBgUnVubmVyLnJ1bigpYCBtZXRob2QuXG4gICAgICovXG4gICAgY29udGV4dDtcbiAgICAvKipcbiAgICAgKiBUaGUgdXNhZ2Ugb2YgdGhlIGFnZW50IHJ1biBzbyBmYXIuIEZvciBzdHJlYW1lZCByZXNwb25zZXMsIHRoZSB1c2FnZSB3aWxsIGJlIHVwZGF0ZWQgaW4gcmVhbC10aW1lXG4gICAgICovXG4gICAgdXNhZ2U7XG4gICAgLyoqXG4gICAgICogQSBtYXAgb2YgdG9vbCBuYW1lcyB0byB3aGV0aGVyIHRoZXkgaGF2ZSBiZWVuIGFwcHJvdmVkLlxuICAgICAqL1xuICAgICNhcHByb3ZhbHM7XG4gICAgY29uc3RydWN0b3IoY29udGV4dCA9IHt9KSB7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgIHRoaXMudXNhZ2UgPSBuZXcgVXNhZ2UoKTtcbiAgICAgICAgdGhpcy4jYXBwcm92YWxzID0gbmV3IE1hcCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWJ1aWxkIHRoZSBhcHByb3ZhbHMgbWFwIGZyb20gYSBzZXJpYWxpemVkIHN0YXRlLlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqXG4gICAgICogQHBhcmFtIGFwcHJvdmFscyAtIFRoZSBhcHByb3ZhbHMgbWFwIHRvIHJlYnVpbGQuXG4gICAgICovXG4gICAgX3JlYnVpbGRBcHByb3ZhbHMoYXBwcm92YWxzKSB7XG4gICAgICAgIHRoaXMuI2FwcHJvdmFscyA9IG5ldyBNYXAoT2JqZWN0LmVudHJpZXMoYXBwcm92YWxzKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIGEgdG9vbCBjYWxsIGhhcyBiZWVuIGFwcHJvdmVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGFwcHJvdmFsIC0gRGV0YWlscyBhYm91dCB0aGUgdG9vbCBjYWxsIGJlaW5nIGV2YWx1YXRlZC5cbiAgICAgKiBAcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHRvb2wgY2FsbCBoYXMgYmVlbiBhcHByb3ZlZCwgYGZhbHNlYCBpZiBibG9ja2VkIGFuZCBgdW5kZWZpbmVkYCBpZiBub3QgeWV0IGFwcHJvdmVkIG9yIHJlamVjdGVkLlxuICAgICAqL1xuICAgIGlzVG9vbEFwcHJvdmVkKGFwcHJvdmFsKSB7XG4gICAgICAgIGNvbnN0IHsgdG9vbE5hbWUsIGNhbGxJZCB9ID0gYXBwcm92YWw7XG4gICAgICAgIGNvbnN0IGFwcHJvdmFsRW50cnkgPSB0aGlzLiNhcHByb3ZhbHMuZ2V0KHRvb2xOYW1lKTtcbiAgICAgICAgaWYgKGFwcHJvdmFsRW50cnk/LmFwcHJvdmVkID09PSB0cnVlICYmIGFwcHJvdmFsRW50cnkucmVqZWN0ZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKCdUb29sIGlzIHBlcm1hbmVudGx5IGFwcHJvdmVkIGFuZCByZWplY3RlZCBhdCB0aGUgc2FtZSB0aW1lLiBBcHByb3ZhbCB0YWtlcyBwcmVjZWRlbmNlJyk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXBwcm92YWxFbnRyeT8uYXBwcm92ZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhcHByb3ZhbEVudHJ5Py5yZWplY3RlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGluZGl2aWR1YWxDYWxsQXBwcm92YWwgPSBBcnJheS5pc0FycmF5KGFwcHJvdmFsRW50cnk/LmFwcHJvdmVkKVxuICAgICAgICAgICAgPyBhcHByb3ZhbEVudHJ5LmFwcHJvdmVkLmluY2x1ZGVzKGNhbGxJZClcbiAgICAgICAgICAgIDogZmFsc2U7XG4gICAgICAgIGNvbnN0IGluZGl2aWR1YWxDYWxsUmVqZWN0aW9uID0gQXJyYXkuaXNBcnJheShhcHByb3ZhbEVudHJ5Py5yZWplY3RlZClcbiAgICAgICAgICAgID8gYXBwcm92YWxFbnRyeS5yZWplY3RlZC5pbmNsdWRlcyhjYWxsSWQpXG4gICAgICAgICAgICA6IGZhbHNlO1xuICAgICAgICBpZiAoaW5kaXZpZHVhbENhbGxBcHByb3ZhbCAmJiBpbmRpdmlkdWFsQ2FsbFJlamVjdGlvbikge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oYFRvb2wgY2FsbCAke2NhbGxJZH0gaXMgYm90aCBhcHByb3ZlZCBhbmQgcmVqZWN0ZWQgYXQgdGhlIHNhbWUgdGltZS4gQXBwcm92YWwgdGFrZXMgcHJlY2VkZW5jZWApO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluZGl2aWR1YWxDYWxsQXBwcm92YWwpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmRpdmlkdWFsQ2FsbFJlamVjdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcHJvdmUgYSB0b29sIGNhbGwuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXBwcm92YWxJdGVtIC0gVGhlIHRvb2wgYXBwcm92YWwgaXRlbSB0byBhcHByb3ZlLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gQWRkaXRpb25hbCBhcHByb3ZhbCBiZWhhdmlvciBvcHRpb25zLlxuICAgICAqL1xuICAgIGFwcHJvdmVUb29sKGFwcHJvdmFsSXRlbSwgeyBhbHdheXNBcHByb3ZlID0gZmFsc2UgfSA9IHt9KSB7XG4gICAgICAgIGNvbnN0IHRvb2xOYW1lID0gYXBwcm92YWxJdGVtLnRvb2xOYW1lID8/IGFwcHJvdmFsSXRlbS5yYXdJdGVtLm5hbWU7XG4gICAgICAgIGlmIChhbHdheXNBcHByb3ZlKSB7XG4gICAgICAgICAgICB0aGlzLiNhcHByb3ZhbHMuc2V0KHRvb2xOYW1lLCB7XG4gICAgICAgICAgICAgICAgYXBwcm92ZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgcmVqZWN0ZWQ6IFtdLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYXBwcm92YWxFbnRyeSA9IHRoaXMuI2FwcHJvdmFscy5nZXQodG9vbE5hbWUpID8/IHtcbiAgICAgICAgICAgIGFwcHJvdmVkOiBbXSxcbiAgICAgICAgICAgIHJlamVjdGVkOiBbXSxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXBwcm92YWxFbnRyeS5hcHByb3ZlZCkpIHtcbiAgICAgICAgICAgIC8vIGZ1bmN0aW9uIHRvb2wgaGFzIGNhbGxfaWQsIGhvc3RlZCB0b29sIGNhbGwgaGFzIGlkXG4gICAgICAgICAgICBjb25zdCBjYWxsSWQgPSAnY2FsbElkJyBpbiBhcHByb3ZhbEl0ZW0ucmF3SXRlbVxuICAgICAgICAgICAgICAgID8gYXBwcm92YWxJdGVtLnJhd0l0ZW0uY2FsbElkIC8vIGZ1bmN0aW9uIHRvb2xzXG4gICAgICAgICAgICAgICAgOiBhcHByb3ZhbEl0ZW0ucmF3SXRlbS5pZDsgLy8gaG9zdGVkIHRvb2xzXG4gICAgICAgICAgICBhcHByb3ZhbEVudHJ5LmFwcHJvdmVkLnB1c2goY2FsbElkKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNhcHByb3ZhbHMuc2V0KHRvb2xOYW1lLCBhcHByb3ZhbEVudHJ5KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVqZWN0IGEgdG9vbCBjYWxsLlxuICAgICAqXG4gICAgICogQHBhcmFtIGFwcHJvdmFsSXRlbSAtIFRoZSB0b29sIGFwcHJvdmFsIGl0ZW0gdG8gcmVqZWN0LlxuICAgICAqL1xuICAgIHJlamVjdFRvb2woYXBwcm92YWxJdGVtLCB7IGFsd2F5c1JlamVjdCA9IGZhbHNlIH0gPSB7fSkge1xuICAgICAgICBjb25zdCB0b29sTmFtZSA9IGFwcHJvdmFsSXRlbS50b29sTmFtZSA/PyBhcHByb3ZhbEl0ZW0ucmF3SXRlbS5uYW1lO1xuICAgICAgICBpZiAoYWx3YXlzUmVqZWN0KSB7XG4gICAgICAgICAgICB0aGlzLiNhcHByb3ZhbHMuc2V0KHRvb2xOYW1lLCB7XG4gICAgICAgICAgICAgICAgYXBwcm92ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHJlamVjdGVkOiB0cnVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYXBwcm92YWxFbnRyeSA9IHRoaXMuI2FwcHJvdmFscy5nZXQodG9vbE5hbWUpID8/IHtcbiAgICAgICAgICAgIGFwcHJvdmVkOiBbXSxcbiAgICAgICAgICAgIHJlamVjdGVkOiBbXSxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXBwcm92YWxFbnRyeS5yZWplY3RlZCkpIHtcbiAgICAgICAgICAgIC8vIGZ1bmN0aW9uIHRvb2wgaGFzIGNhbGxfaWQsIGhvc3RlZCB0b29sIGNhbGwgaGFzIGlkXG4gICAgICAgICAgICBjb25zdCBjYWxsSWQgPSAnY2FsbElkJyBpbiBhcHByb3ZhbEl0ZW0ucmF3SXRlbVxuICAgICAgICAgICAgICAgID8gYXBwcm92YWxJdGVtLnJhd0l0ZW0uY2FsbElkIC8vIGZ1bmN0aW9uIHRvb2xzXG4gICAgICAgICAgICAgICAgOiBhcHByb3ZhbEl0ZW0ucmF3SXRlbS5pZDsgLy8gaG9zdGVkIHRvb2xzXG4gICAgICAgICAgICBhcHByb3ZhbEVudHJ5LnJlamVjdGVkLnB1c2goY2FsbElkKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNhcHByb3ZhbHMuc2V0KHRvb2xOYW1lLCBhcHByb3ZhbEVudHJ5KTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY29udGV4dDogdGhpcy5jb250ZXh0LFxuICAgICAgICAgICAgdXNhZ2U6IHRoaXMudXNhZ2UsXG4gICAgICAgICAgICBhcHByb3ZhbHM6IE9iamVjdC5mcm9tRW50cmllcyh0aGlzLiNhcHByb3ZhbHMuZW50cmllcygpKSxcbiAgICAgICAgfTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ydW5Db250ZXh0Lm1qcy5tYXAiLCJpbXBvcnQgeyB0b1NtYXJ0U3RyaW5nIH0gZnJvbSBcIi4vdXRpbHMvc21hcnRTdHJpbmcubWpzXCI7XG5leHBvcnQgY2xhc3MgUnVuSXRlbUJhc2Uge1xuICAgIHR5cGUgPSAnYmFzZV9pdGVtJztcbiAgICByYXdJdGVtO1xuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IHRoaXMudHlwZSxcbiAgICAgICAgICAgIHJhd0l0ZW06IHRoaXMucmF3SXRlbSxcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUnVuTWVzc2FnZU91dHB1dEl0ZW0gZXh0ZW5kcyBSdW5JdGVtQmFzZSB7XG4gICAgcmF3SXRlbTtcbiAgICBhZ2VudDtcbiAgICB0eXBlID0gJ21lc3NhZ2Vfb3V0cHV0X2l0ZW0nO1xuICAgIGNvbnN0cnVjdG9yKHJhd0l0ZW0sIGFnZW50KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucmF3SXRlbSA9IHJhd0l0ZW07XG4gICAgICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc3VwZXIudG9KU09OKCksXG4gICAgICAgICAgICBhZ2VudDogdGhpcy5hZ2VudC50b0pTT04oKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZ2V0IGNvbnRlbnQoKSB7XG4gICAgICAgIGxldCBjb250ZW50ID0gJyc7XG4gICAgICAgIGZvciAoY29uc3QgcGFydCBvZiB0aGlzLnJhd0l0ZW0uY29udGVudCkge1xuICAgICAgICAgICAgaWYgKHBhcnQudHlwZSA9PT0gJ291dHB1dF90ZXh0Jykge1xuICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gcGFydC50ZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb250ZW50O1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBSdW5Ub29sQ2FsbEl0ZW0gZXh0ZW5kcyBSdW5JdGVtQmFzZSB7XG4gICAgcmF3SXRlbTtcbiAgICBhZ2VudDtcbiAgICB0eXBlID0gJ3Rvb2xfY2FsbF9pdGVtJztcbiAgICBjb25zdHJ1Y3RvcihyYXdJdGVtLCBhZ2VudCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnJhd0l0ZW0gPSByYXdJdGVtO1xuICAgICAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnN1cGVyLnRvSlNPTigpLFxuICAgICAgICAgICAgYWdlbnQ6IHRoaXMuYWdlbnQudG9KU09OKCksXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFJ1blRvb2xDYWxsT3V0cHV0SXRlbSBleHRlbmRzIFJ1bkl0ZW1CYXNlIHtcbiAgICByYXdJdGVtO1xuICAgIGFnZW50O1xuICAgIG91dHB1dDtcbiAgICB0eXBlID0gJ3Rvb2xfY2FsbF9vdXRwdXRfaXRlbSc7XG4gICAgY29uc3RydWN0b3IocmF3SXRlbSwgYWdlbnQsIG91dHB1dCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnJhd0l0ZW0gPSByYXdJdGVtO1xuICAgICAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gICAgICAgIHRoaXMub3V0cHV0ID0gb3V0cHV0O1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zdXBlci50b0pTT04oKSxcbiAgICAgICAgICAgIGFnZW50OiB0aGlzLmFnZW50LnRvSlNPTigpLFxuICAgICAgICAgICAgb3V0cHV0OiB0b1NtYXJ0U3RyaW5nKHRoaXMub3V0cHV0KSxcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUnVuUmVhc29uaW5nSXRlbSBleHRlbmRzIFJ1bkl0ZW1CYXNlIHtcbiAgICByYXdJdGVtO1xuICAgIGFnZW50O1xuICAgIHR5cGUgPSAncmVhc29uaW5nX2l0ZW0nO1xuICAgIGNvbnN0cnVjdG9yKHJhd0l0ZW0sIGFnZW50KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucmF3SXRlbSA9IHJhd0l0ZW07XG4gICAgICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc3VwZXIudG9KU09OKCksXG4gICAgICAgICAgICBhZ2VudDogdGhpcy5hZ2VudC50b0pTT04oKSxcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUnVuSGFuZG9mZkNhbGxJdGVtIGV4dGVuZHMgUnVuSXRlbUJhc2Uge1xuICAgIHJhd0l0ZW07XG4gICAgYWdlbnQ7XG4gICAgdHlwZSA9ICdoYW5kb2ZmX2NhbGxfaXRlbSc7XG4gICAgY29uc3RydWN0b3IocmF3SXRlbSwgYWdlbnQpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5yYXdJdGVtID0gcmF3SXRlbTtcbiAgICAgICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zdXBlci50b0pTT04oKSxcbiAgICAgICAgICAgIGFnZW50OiB0aGlzLmFnZW50LnRvSlNPTigpLFxuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBSdW5IYW5kb2ZmT3V0cHV0SXRlbSBleHRlbmRzIFJ1bkl0ZW1CYXNlIHtcbiAgICByYXdJdGVtO1xuICAgIHNvdXJjZUFnZW50O1xuICAgIHRhcmdldEFnZW50O1xuICAgIHR5cGUgPSAnaGFuZG9mZl9vdXRwdXRfaXRlbSc7XG4gICAgY29uc3RydWN0b3IocmF3SXRlbSwgc291cmNlQWdlbnQsIHRhcmdldEFnZW50KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucmF3SXRlbSA9IHJhd0l0ZW07XG4gICAgICAgIHRoaXMuc291cmNlQWdlbnQgPSBzb3VyY2VBZ2VudDtcbiAgICAgICAgdGhpcy50YXJnZXRBZ2VudCA9IHRhcmdldEFnZW50O1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zdXBlci50b0pTT04oKSxcbiAgICAgICAgICAgIHNvdXJjZUFnZW50OiB0aGlzLnNvdXJjZUFnZW50LnRvSlNPTigpLFxuICAgICAgICAgICAgdGFyZ2V0QWdlbnQ6IHRoaXMudGFyZ2V0QWdlbnQudG9KU09OKCksXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFJ1blRvb2xBcHByb3ZhbEl0ZW0gZXh0ZW5kcyBSdW5JdGVtQmFzZSB7XG4gICAgcmF3SXRlbTtcbiAgICBhZ2VudDtcbiAgICB0b29sTmFtZTtcbiAgICB0eXBlID0gJ3Rvb2xfYXBwcm92YWxfaXRlbSc7XG4gICAgY29uc3RydWN0b3IocmF3SXRlbSwgYWdlbnQsIFxuICAgIC8qKlxuICAgICAqIEV4cGxpY2l0IHRvb2wgbmFtZSB0byB1c2UgZm9yIGFwcHJvdmFsIHRyYWNraW5nIHdoZW4gbm90IHByZXNlbnQgb24gdGhlIHJhdyBpdGVtLlxuICAgICAqL1xuICAgIHRvb2xOYW1lKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucmF3SXRlbSA9IHJhd0l0ZW07XG4gICAgICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgICAgICAgdGhpcy50b29sTmFtZSA9IHRvb2xOYW1lO1xuICAgICAgICB0aGlzLnRvb2xOYW1lID0gdG9vbE5hbWUgPz8gcmF3SXRlbS5uYW1lO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB0b29sIG5hbWUgaWYgYXZhaWxhYmxlIG9uIHRoZSByYXcgaXRlbSBvciBwcm92aWRlZCBleHBsaWNpdGx5LlxuICAgICAqIEtlcHQgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IHdpdGggY29kZSB0aGF0IHByZXZpb3VzbHkgcmVsaWVkIG9uIGByYXdJdGVtLm5hbWVgLlxuICAgICAqL1xuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50b29sTmFtZSA/PyB0aGlzLnJhd0l0ZW0ubmFtZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgYXJndW1lbnRzIGlmIHRoZSByYXcgaXRlbSBoYXMgYW4gYXJndW1lbnRzIHByb3BlcnR5IG90aGVyd2lzZSB0aGlzIHdpbGwgYmUgdW5kZWZpbmVkLlxuICAgICAqL1xuICAgIGdldCBhcmd1bWVudHMoKSB7XG4gICAgICAgIHJldHVybiAnYXJndW1lbnRzJyBpbiB0aGlzLnJhd0l0ZW0gPyB0aGlzLnJhd0l0ZW0uYXJndW1lbnRzIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zdXBlci50b0pTT04oKSxcbiAgICAgICAgICAgIGFnZW50OiB0aGlzLmFnZW50LnRvSlNPTigpLFxuICAgICAgICAgICAgdG9vbE5hbWU6IHRoaXMudG9vbE5hbWUsXG4gICAgICAgIH07XG4gICAgfVxufVxuLyoqXG4gKiBFeHRyYWN0IGFsbCB0ZXh0IG91dHB1dCBmcm9tIGEgbGlzdCBvZiBydW4gaXRlbXMgYnkgY29uY2F0ZW5hdGluZyB0aGUgY29udGVudCBvZiBhbGxcbiAqIG1lc3NhZ2Ugb3V0cHV0IGl0ZW1zLlxuICpcbiAqIEBwYXJhbSBpdGVtcyAtIFRoZSBsaXN0IG9mIHJ1biBpdGVtcyB0byBleHRyYWN0IHRleHQgZnJvbS5cbiAqIEByZXR1cm5zIEEgc3RyaW5nIG9mIGFsbCB0aGUgdGV4dCBvdXRwdXQgZnJvbSB0aGUgcnVuIGl0ZW1zLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXh0cmFjdEFsbFRleHRPdXRwdXQoaXRlbXMpIHtcbiAgICByZXR1cm4gaXRlbXNcbiAgICAgICAgLmZpbHRlcigoaXRlbSkgPT4gaXRlbS50eXBlID09PSAnbWVzc2FnZV9vdXRwdXRfaXRlbScpXG4gICAgICAgIC5tYXAoKGl0ZW0pID0+IGl0ZW0uY29udGVudClcbiAgICAgICAgLmpvaW4oJycpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXRlbXMubWpzLm1hcCIsImV4cG9ydCBjbGFzcyBBZ2VudFRvb2xVc2VUcmFja2VyIHtcbiAgICAjYWdlbnRUb1Rvb2xzID0gbmV3IE1hcCgpO1xuICAgIGFkZFRvb2xVc2UoYWdlbnQsIHRvb2xOYW1lcywgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IGFsbG93RW1wdHkgPSBvcHRpb25zLmFsbG93RW1wdHkgPz8gZmFsc2U7XG4gICAgICAgIGlmICh0b29sTmFtZXMubGVuZ3RoID09PSAwICYmICFhbGxvd0VtcHR5KSB7XG4gICAgICAgICAgICAvLyBTa2lwIGluaXRpYWwgZW1wdHkgd3JpdGVzIGFuZCBhdm9pZCBvdmVyd3JpdGluZyBub24tZW1wdHkgaGlzdG9yeS5cbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nID0gdGhpcy4jYWdlbnRUb1Rvb2xzLmdldChhZ2VudCk7XG4gICAgICAgICAgICBpZiAoIWV4aXN0aW5nIHx8IGV4aXN0aW5nLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gUHJlc2VydmUgcHJpb3Igbm9uLWVtcHR5IGhpc3Rvcnkgd2hlbiBub3QgZXhwbGljaXRseSBhbGxvd2VkIHRvIGRvd25ncmFkZS5cbiAgICAgICAgaWYgKCFhbGxvd0VtcHR5KSB7XG4gICAgICAgICAgICBjb25zdCBleGlzdGluZyA9IHRoaXMuI2FnZW50VG9Ub29scy5nZXQoYWdlbnQpO1xuICAgICAgICAgICAgaWYgKGV4aXN0aW5nICYmIGV4aXN0aW5nLmxlbmd0aCA+IDAgJiYgdG9vbE5hbWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNhZ2VudFRvVG9vbHMuc2V0KGFnZW50LCB0b29sTmFtZXMpO1xuICAgIH1cbiAgICBoYXNVc2VkVG9vbHMoYWdlbnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2FnZW50VG9Ub29scy5oYXMoYWdlbnQpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiBPYmplY3QuZnJvbUVudHJpZXMoQXJyYXkuZnJvbSh0aGlzLiNhZ2VudFRvVG9vbHMuZW50cmllcygpKS5tYXAoKFthZ2VudCwgdG9vbE5hbWVzXSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIFthZ2VudC5uYW1lLCB0b29sTmFtZXNdO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dG9vbFVzZVRyYWNrZXIubWpzLm1hcCIsImltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuZXhwb3J0IGNvbnN0IG5leHRTdGVwU2NoZW1hID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ25leHRfc3RlcF9oYW5kb2ZmJyksXG4gICAgICAgIG5ld0FnZW50OiB6LmFueSgpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCduZXh0X3N0ZXBfZmluYWxfb3V0cHV0JyksXG4gICAgICAgIG91dHB1dDogei5zdHJpbmcoKSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnbmV4dF9zdGVwX3J1bl9hZ2FpbicpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJyksXG4gICAgICAgIGRhdGE6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLFxuICAgIH0pLFxuXSk7XG5leHBvcnQgY2xhc3MgU2luZ2xlU3RlcFJlc3VsdCB7XG4gICAgb3JpZ2luYWxJbnB1dDtcbiAgICBtb2RlbFJlc3BvbnNlO1xuICAgIHByZVN0ZXBJdGVtcztcbiAgICBuZXdTdGVwSXRlbXM7XG4gICAgbmV4dFN0ZXA7XG4gICAgY29uc3RydWN0b3Iob3JpZ2luYWxJbnB1dCwgbW9kZWxSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdTdGVwSXRlbXMsIG5leHRTdGVwKSB7XG4gICAgICAgIHRoaXMub3JpZ2luYWxJbnB1dCA9IG9yaWdpbmFsSW5wdXQ7XG4gICAgICAgIHRoaXMubW9kZWxSZXNwb25zZSA9IG1vZGVsUmVzcG9uc2U7XG4gICAgICAgIHRoaXMucHJlU3RlcEl0ZW1zID0gcHJlU3RlcEl0ZW1zO1xuICAgICAgICB0aGlzLm5ld1N0ZXBJdGVtcyA9IG5ld1N0ZXBJdGVtcztcbiAgICAgICAgdGhpcy5uZXh0U3RlcCA9IG5leHRTdGVwO1xuICAgIH1cbiAgICBnZXQgZ2VuZXJhdGVkSXRlbXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByZVN0ZXBJdGVtcy5jb25jYXQodGhpcy5uZXdTdGVwSXRlbXMpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0ZXBzLm1qcy5tYXAiLCJpbXBvcnQgeyB6IH0gZnJvbSAnem9kJztcbmltcG9ydCB7IEFnZW50IH0gZnJvbSBcIi4vYWdlbnQubWpzXCI7XG5pbXBvcnQgeyBSdW5NZXNzYWdlT3V0cHV0SXRlbSwgUnVuVG9vbEFwcHJvdmFsSXRlbSwgUnVuVG9vbENhbGxJdGVtLCBSdW5Ub29sQ2FsbE91dHB1dEl0ZW0sIFJ1blJlYXNvbmluZ0l0ZW0sIFJ1bkhhbmRvZmZDYWxsSXRlbSwgUnVuSGFuZG9mZk91dHB1dEl0ZW0sIH0gZnJvbSBcIi4vaXRlbXMubWpzXCI7XG5pbXBvcnQgeyBSdW5Db250ZXh0IH0gZnJvbSBcIi4vcnVuQ29udGV4dC5tanNcIjtcbmltcG9ydCB7IGdldFR1cm5JbnB1dCB9IGZyb20gXCIuL3J1bm5lci9pdGVtcy5tanNcIjtcbmltcG9ydCB7IEFnZW50VG9vbFVzZVRyYWNrZXIgfSBmcm9tIFwiLi9ydW5uZXIvdG9vbFVzZVRyYWNrZXIubWpzXCI7XG5pbXBvcnQgeyBuZXh0U3RlcFNjaGVtYSB9IGZyb20gXCIuL3J1bm5lci9zdGVwcy5tanNcIjtcbmltcG9ydCB7IFN5c3RlbUVycm9yLCBVc2VyRXJyb3IgfSBmcm9tIFwiLi9lcnJvcnMubWpzXCI7XG5pbXBvcnQgeyBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyIH0gZnJvbSBcIi4vdHJhY2luZy9wcm92aWRlci5tanNcIjtcbmltcG9ydCB7IFVzYWdlIH0gZnJvbSBcIi4vdXNhZ2UubWpzXCI7XG5pbXBvcnQgeyBnZXRDdXJyZW50VHJhY2UgfSBmcm9tIFwiLi90cmFjaW5nL2luZGV4Lm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBoYW5kb2ZmIH0gZnJvbSBcIi4vaGFuZG9mZi5tanNcIjtcbmltcG9ydCAqIGFzIHByb3RvY29sIGZyb20gXCIuL3R5cGVzL3Byb3RvY29sLm1qc1wiO1xuaW1wb3J0IHsgc2FmZUV4ZWN1dGUgfSBmcm9tIFwiLi91dGlscy9zYWZlRXhlY3V0ZS5tanNcIjtcbi8qKlxuICogVGhlIHNjaGVtYSB2ZXJzaW9uIG9mIHRoZSBzZXJpYWxpemVkIHJ1biBzdGF0ZS4gVGhpcyBpcyB1c2VkIHRvIGVuc3VyZSB0aGF0IHRoZSBzZXJpYWxpemVkXG4gKiBydW4gc3RhdGUgaXMgY29tcGF0aWJsZSB3aXRoIHRoZSBjdXJyZW50IHZlcnNpb24gb2YgdGhlIFNESy5cbiAqIElmIGFueXRoaW5nIGluIHRoaXMgc2NoZW1hIGNoYW5nZXMsIHRoZSB2ZXJzaW9uIHdpbGwgaGF2ZSB0byBiZSBpbmNyZW1lbnRlZC5cbiAqXG4gKiBWZXJzaW9uIGhpc3RvcnkuXG4gKiAtIDEuMDogSW5pdGlhbCBzZXJpYWxpemVkIFJ1blN0YXRlIHNjaGVtYS5cbiAqIC0gMS4xOiBBZGRzIG9wdGlvbmFsIGN1cnJlbnRUdXJuSW5Qcm9ncmVzcywgY29udmVyc2F0aW9uSWQsIGFuZCBwcmV2aW91c1Jlc3BvbnNlSWQgZmllbGRzLFxuICogICBwbHVzIGJyb2FkZXIgdG9vbF9jYWxsX291dHB1dF9pdGVtIHJhd0l0ZW0gdmFyaWFudHMgZm9yIG5vbi1mdW5jdGlvbiB0b29scy4gT2xkZXIgMS4wXG4gKiAgIHBheWxvYWRzIHJlbWFpbiByZWFkYWJsZSBidXQgcmVzdW1lcyBtYXkgbGFjayBtaWQtdHVybiBvciBzZXJ2ZXItbWFuYWdlZCBjb250ZXh0IHByZWNpc2lvbi5cbiAqL1xuZXhwb3J0IGNvbnN0IENVUlJFTlRfU0NIRU1BX1ZFUlNJT04gPSAnMS4xJztcbmNvbnN0IFNVUFBPUlRFRF9TQ0hFTUFfVkVSU0lPTlMgPSBbJzEuMCcsIENVUlJFTlRfU0NIRU1BX1ZFUlNJT05dO1xuY29uc3QgJHNjaGVtYVZlcnNpb24gPSB6LmVudW0oU1VQUE9SVEVEX1NDSEVNQV9WRVJTSU9OUyk7XG5jb25zdCBzZXJpYWxpemVkQWdlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgbmFtZTogei5zdHJpbmcoKSxcbn0pO1xuY29uc3Qgc2VyaWFsaXplZFNwYW5CYXNlID0gei5vYmplY3Qoe1xuICAgIG9iamVjdDogei5saXRlcmFsKCd0cmFjZS5zcGFuJyksXG4gICAgaWQ6IHouc3RyaW5nKCksXG4gICAgdHJhY2VfaWQ6IHouc3RyaW5nKCksXG4gICAgcGFyZW50X2lkOiB6LnN0cmluZygpLm51bGxhYmxlKCksXG4gICAgc3RhcnRlZF9hdDogei5zdHJpbmcoKS5udWxsYWJsZSgpLFxuICAgIGVuZGVkX2F0OiB6LnN0cmluZygpLm51bGxhYmxlKCksXG4gICAgZXJyb3I6IHpcbiAgICAgICAgLm9iamVjdCh7XG4gICAgICAgIG1lc3NhZ2U6IHouc3RyaW5nKCksXG4gICAgICAgIGRhdGE6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLm9wdGlvbmFsKCksXG4gICAgfSlcbiAgICAgICAgLm51bGxhYmxlKCksXG4gICAgc3Bhbl9kYXRhOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKSxcbn0pO1xuY29uc3QgU2VyaWFsaXplZFNwYW4gPSBzZXJpYWxpemVkU3BhbkJhc2UuZXh0ZW5kKHtcbiAgICBwcmV2aW91c19zcGFuOiB6LmxhenkoKCkgPT4gU2VyaWFsaXplZFNwYW4pLm9wdGlvbmFsKCksXG59KTtcbmNvbnN0IHJlcXVlc3RVc2FnZVNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICBpbnB1dFRva2Vuczogei5udW1iZXIoKSxcbiAgICBvdXRwdXRUb2tlbnM6IHoubnVtYmVyKCksXG4gICAgdG90YWxUb2tlbnM6IHoubnVtYmVyKCksXG4gICAgaW5wdXRUb2tlbnNEZXRhaWxzOiB6LnJlY29yZCh6LnN0cmluZygpLCB6Lm51bWJlcigpKS5vcHRpb25hbCgpLFxuICAgIG91dHB1dFRva2Vuc0RldGFpbHM6IHoucmVjb3JkKHouc3RyaW5nKCksIHoubnVtYmVyKCkpLm9wdGlvbmFsKCksXG4gICAgZW5kcG9pbnQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuY29uc3QgdXNhZ2VTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgcmVxdWVzdHM6IHoubnVtYmVyKCksXG4gICAgaW5wdXRUb2tlbnM6IHoubnVtYmVyKCksXG4gICAgb3V0cHV0VG9rZW5zOiB6Lm51bWJlcigpLFxuICAgIHRvdGFsVG9rZW5zOiB6Lm51bWJlcigpLFxuICAgIGlucHV0VG9rZW5zRGV0YWlsczogei5hcnJheSh6LnJlY29yZCh6LnN0cmluZygpLCB6Lm51bWJlcigpKSkub3B0aW9uYWwoKSxcbiAgICBvdXRwdXRUb2tlbnNEZXRhaWxzOiB6LmFycmF5KHoucmVjb3JkKHouc3RyaW5nKCksIHoubnVtYmVyKCkpKS5vcHRpb25hbCgpLFxuICAgIHJlcXVlc3RVc2FnZUVudHJpZXM6IHouYXJyYXkocmVxdWVzdFVzYWdlU2NoZW1hKS5vcHRpb25hbCgpLFxufSk7XG5jb25zdCBtb2RlbFJlc3BvbnNlU2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHVzYWdlOiB1c2FnZVNjaGVtYSxcbiAgICBvdXRwdXQ6IHouYXJyYXkocHJvdG9jb2wuT3V0cHV0TW9kZWxJdGVtKSxcbiAgICByZXNwb25zZUlkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgcHJvdmlkZXJEYXRhOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKS5vcHRpb25hbCgpLFxufSk7XG5jb25zdCBpdGVtU2NoZW1hID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ21lc3NhZ2Vfb3V0cHV0X2l0ZW0nKSxcbiAgICAgICAgcmF3SXRlbTogcHJvdG9jb2wuQXNzaXN0YW50TWVzc2FnZUl0ZW0sXG4gICAgICAgIGFnZW50OiBzZXJpYWxpemVkQWdlbnRTY2hlbWEsXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ3Rvb2xfY2FsbF9pdGVtJyksXG4gICAgICAgIHJhd0l0ZW06IHByb3RvY29sLlRvb2xDYWxsSXRlbS5vcihwcm90b2NvbC5Ib3N0ZWRUb29sQ2FsbEl0ZW0pLFxuICAgICAgICBhZ2VudDogc2VyaWFsaXplZEFnZW50U2NoZW1hLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCd0b29sX2NhbGxfb3V0cHV0X2l0ZW0nKSxcbiAgICAgICAgcmF3SXRlbTogcHJvdG9jb2wuRnVuY3Rpb25DYWxsUmVzdWx0SXRlbS5vcihwcm90b2NvbC5Db21wdXRlckNhbGxSZXN1bHRJdGVtKVxuICAgICAgICAgICAgLm9yKHByb3RvY29sLlNoZWxsQ2FsbFJlc3VsdEl0ZW0pXG4gICAgICAgICAgICAub3IocHJvdG9jb2wuQXBwbHlQYXRjaENhbGxSZXN1bHRJdGVtKSxcbiAgICAgICAgYWdlbnQ6IHNlcmlhbGl6ZWRBZ2VudFNjaGVtYSxcbiAgICAgICAgb3V0cHV0OiB6LnN0cmluZygpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdyZWFzb25pbmdfaXRlbScpLFxuICAgICAgICByYXdJdGVtOiBwcm90b2NvbC5SZWFzb25pbmdJdGVtLFxuICAgICAgICBhZ2VudDogc2VyaWFsaXplZEFnZW50U2NoZW1hLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdoYW5kb2ZmX2NhbGxfaXRlbScpLFxuICAgICAgICByYXdJdGVtOiBwcm90b2NvbC5GdW5jdGlvbkNhbGxJdGVtLFxuICAgICAgICBhZ2VudDogc2VyaWFsaXplZEFnZW50U2NoZW1hLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdoYW5kb2ZmX291dHB1dF9pdGVtJyksXG4gICAgICAgIHJhd0l0ZW06IHByb3RvY29sLkZ1bmN0aW9uQ2FsbFJlc3VsdEl0ZW0sXG4gICAgICAgIHNvdXJjZUFnZW50OiBzZXJpYWxpemVkQWdlbnRTY2hlbWEsXG4gICAgICAgIHRhcmdldEFnZW50OiBzZXJpYWxpemVkQWdlbnRTY2hlbWEsXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ3Rvb2xfYXBwcm92YWxfaXRlbScpLFxuICAgICAgICByYXdJdGVtOiBwcm90b2NvbC5GdW5jdGlvbkNhbGxJdGVtLm9yKHByb3RvY29sLkhvc3RlZFRvb2xDYWxsSXRlbSlcbiAgICAgICAgICAgIC5vcihwcm90b2NvbC5TaGVsbENhbGxJdGVtKVxuICAgICAgICAgICAgLm9yKHByb3RvY29sLkFwcGx5UGF0Y2hDYWxsSXRlbSksXG4gICAgICAgIGFnZW50OiBzZXJpYWxpemVkQWdlbnRTY2hlbWEsXG4gICAgICAgIHRvb2xOYW1lOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgfSksXG5dKTtcbmNvbnN0IHNlcmlhbGl6ZWRUcmFjZVNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICBvYmplY3Q6IHoubGl0ZXJhbCgndHJhY2UnKSxcbiAgICBpZDogei5zdHJpbmcoKSxcbiAgICB3b3JrZmxvd19uYW1lOiB6LnN0cmluZygpLFxuICAgIGdyb3VwX2lkOiB6LnN0cmluZygpLm51bGxhYmxlKCksXG4gICAgbWV0YWRhdGE6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLFxuICAgIC8vIFBvcHVsYXRlZCBvbmx5IGlmIHRoZSB0cmFjZSB3YXMgY3JlYXRlZCB3aXRoIGEgcGVyLXJ1biB0cmFjaW5nQXBpS2V5IChlLmcuLCBSdW5uZXIucnVuKHsgdHJhY2luZzogeyBhcGlLZXkgfSB9KSlcbiAgICAvLyBhbmQgc2VyaWFsaXphdGlvbiBvcHRzIGluIHRvIGluY2x1ZGUgaXQuIEJ5IGRlZmF1bHQgdGhpcyBpcyBvbWl0dGVkIHRvIGF2b2lkIHBlcnNpc3Rpbmcgc2VjcmV0cy5cbiAgICB0cmFjaW5nX2FwaV9rZXk6IHouc3RyaW5nKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxufSk7XG5jb25zdCBzZXJpYWxpemVkUHJvY2Vzc2VkUmVzcG9uc2VTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgbmV3SXRlbXM6IHouYXJyYXkoaXRlbVNjaGVtYSksXG4gICAgdG9vbHNVc2VkOiB6LmFycmF5KHouc3RyaW5nKCkpLFxuICAgIGhhbmRvZmZzOiB6LmFycmF5KHoub2JqZWN0KHtcbiAgICAgICAgdG9vbENhbGw6IHouYW55KCksXG4gICAgICAgIGhhbmRvZmY6IHouYW55KCksXG4gICAgfSkpLFxuICAgIGZ1bmN0aW9uczogei5hcnJheSh6Lm9iamVjdCh7XG4gICAgICAgIHRvb2xDYWxsOiB6LmFueSgpLFxuICAgICAgICB0b29sOiB6LmFueSgpLFxuICAgIH0pKSxcbiAgICBjb21wdXRlckFjdGlvbnM6IHouYXJyYXkoei5vYmplY3Qoe1xuICAgICAgICB0b29sQ2FsbDogei5hbnkoKSxcbiAgICAgICAgY29tcHV0ZXI6IHouYW55KCksXG4gICAgfSkpLFxuICAgIHNoZWxsQWN0aW9uczogelxuICAgICAgICAuYXJyYXkoei5vYmplY3Qoe1xuICAgICAgICB0b29sQ2FsbDogei5hbnkoKSxcbiAgICAgICAgc2hlbGw6IHouYW55KCksXG4gICAgfSkpXG4gICAgICAgIC5vcHRpb25hbCgpLFxuICAgIGFwcGx5UGF0Y2hBY3Rpb25zOiB6XG4gICAgICAgIC5hcnJheSh6Lm9iamVjdCh7XG4gICAgICAgIHRvb2xDYWxsOiB6LmFueSgpLFxuICAgICAgICBhcHBseVBhdGNoOiB6LmFueSgpLFxuICAgIH0pKVxuICAgICAgICAub3B0aW9uYWwoKSxcbiAgICBtY3BBcHByb3ZhbFJlcXVlc3RzOiB6XG4gICAgICAgIC5hcnJheSh6Lm9iamVjdCh7XG4gICAgICAgIHJlcXVlc3RJdGVtOiB6Lm9iamVjdCh7XG4gICAgICAgICAgICAvLyBwcm90b2NvbC5Ib3N0ZWRUb29sQ2FsbEl0ZW1cbiAgICAgICAgICAgIHJhd0l0ZW06IHoub2JqZWN0KHtcbiAgICAgICAgICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ2hvc3RlZF90b29sX2NhbGwnKSxcbiAgICAgICAgICAgICAgICBuYW1lOiB6LnN0cmluZygpLFxuICAgICAgICAgICAgICAgIGFyZ3VtZW50czogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICAgICAgICAgIHN0YXR1czogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICAgICAgICAgIG91dHB1dDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICAgICAgICAgIC8vIHRoaXMgYWx3YXlzIGV4aXN0cyBidXQgbWFya2VkIGFzIG9wdGlvbmFsIGZvciBlYXJseSB2ZXJzaW9uIGNvbXBhdGliaWxpdHk7IHdoZW4gcmVsZWFzaW5nIDEuMCwgd2UgY2FuIHJlbW92ZSB0aGUgbnVsbGFibGUgYW5kIG9wdGlvbmFsXG4gICAgICAgICAgICAgICAgcHJvdmlkZXJEYXRhOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfSksXG4gICAgICAgIC8vIEhvc3RlZE1DUFRvb2xcbiAgICAgICAgbWNwVG9vbDogei5vYmplY3Qoe1xuICAgICAgICAgICAgdHlwZTogei5saXRlcmFsKCdob3N0ZWRfdG9vbCcpLFxuICAgICAgICAgICAgbmFtZTogei5saXRlcmFsKCdob3N0ZWRfbWNwJyksXG4gICAgICAgICAgICBwcm92aWRlckRhdGE6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLFxuICAgICAgICB9KSxcbiAgICB9KSlcbiAgICAgICAgLm9wdGlvbmFsKCksXG59KTtcbmNvbnN0IGd1YXJkcmFpbEZ1bmN0aW9uT3V0cHV0U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHRyaXB3aXJlVHJpZ2dlcmVkOiB6LmJvb2xlYW4oKSxcbiAgICBvdXRwdXRJbmZvOiB6LmFueSgpLFxufSk7XG5jb25zdCB0b29sR3VhcmRyYWlsQmVoYXZpb3JTY2hlbWEgPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigndHlwZScsIFtcbiAgICB6Lm9iamVjdCh7IHR5cGU6IHoubGl0ZXJhbCgnYWxsb3cnKSB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgncmVqZWN0Q29udGVudCcpLFxuICAgICAgICBtZXNzYWdlOiB6LnN0cmluZygpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHsgdHlwZTogei5saXRlcmFsKCd0aHJvd0V4Y2VwdGlvbicpIH0pLFxuXSk7XG5jb25zdCB0b29sR3VhcmRyYWlsRnVuY3Rpb25PdXRwdXRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgb3V0cHV0SW5mbzogei5hbnkoKS5vcHRpb25hbCgpLFxuICAgIGJlaGF2aW9yOiB0b29sR3VhcmRyYWlsQmVoYXZpb3JTY2hlbWEsXG59KTtcbmNvbnN0IHRvb2xHdWFyZHJhaWxNZXRhZGF0YVNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LnVuaW9uKFt6LmxpdGVyYWwoJ3Rvb2xfaW5wdXQnKSwgei5saXRlcmFsKCd0b29sX291dHB1dCcpXSksXG4gICAgbmFtZTogei5zdHJpbmcoKSxcbn0pO1xuY29uc3QgaW5wdXRHdWFyZHJhaWxSZXN1bHRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgZ3VhcmRyYWlsOiB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXQnKSxcbiAgICAgICAgbmFtZTogei5zdHJpbmcoKSxcbiAgICB9KSxcbiAgICBvdXRwdXQ6IGd1YXJkcmFpbEZ1bmN0aW9uT3V0cHV0U2NoZW1hLFxufSk7XG5jb25zdCBvdXRwdXRHdWFyZHJhaWxSZXN1bHRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgZ3VhcmRyYWlsOiB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnb3V0cHV0JyksXG4gICAgICAgIG5hbWU6IHouc3RyaW5nKCksXG4gICAgfSksXG4gICAgYWdlbnRPdXRwdXQ6IHouYW55KCksXG4gICAgYWdlbnQ6IHNlcmlhbGl6ZWRBZ2VudFNjaGVtYSxcbiAgICBvdXRwdXQ6IGd1YXJkcmFpbEZ1bmN0aW9uT3V0cHV0U2NoZW1hLFxufSk7XG5jb25zdCB0b29sSW5wdXRHdWFyZHJhaWxSZXN1bHRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgZ3VhcmRyYWlsOiB0b29sR3VhcmRyYWlsTWV0YWRhdGFTY2hlbWEuZXh0ZW5kKHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCd0b29sX2lucHV0JyksXG4gICAgfSksXG4gICAgb3V0cHV0OiB0b29sR3VhcmRyYWlsRnVuY3Rpb25PdXRwdXRTY2hlbWEsXG59KTtcbmNvbnN0IHRvb2xPdXRwdXRHdWFyZHJhaWxSZXN1bHRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgZ3VhcmRyYWlsOiB0b29sR3VhcmRyYWlsTWV0YWRhdGFTY2hlbWEuZXh0ZW5kKHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCd0b29sX291dHB1dCcpLFxuICAgIH0pLFxuICAgIG91dHB1dDogdG9vbEd1YXJkcmFpbEZ1bmN0aW9uT3V0cHV0U2NoZW1hLFxufSk7XG5leHBvcnQgY29uc3QgU2VyaWFsaXplZFJ1blN0YXRlID0gei5vYmplY3Qoe1xuICAgICRzY2hlbWFWZXJzaW9uLFxuICAgIGN1cnJlbnRUdXJuOiB6Lm51bWJlcigpLFxuICAgIGN1cnJlbnRBZ2VudDogc2VyaWFsaXplZEFnZW50U2NoZW1hLFxuICAgIG9yaWdpbmFsSW5wdXQ6IHouc3RyaW5nKCkub3Ioei5hcnJheShwcm90b2NvbC5Nb2RlbEl0ZW0pKSxcbiAgICBtb2RlbFJlc3BvbnNlczogei5hcnJheShtb2RlbFJlc3BvbnNlU2NoZW1hKSxcbiAgICBjb250ZXh0OiB6Lm9iamVjdCh7XG4gICAgICAgIHVzYWdlOiB1c2FnZVNjaGVtYSxcbiAgICAgICAgYXBwcm92YWxzOiB6LnJlY29yZCh6LnN0cmluZygpLCB6Lm9iamVjdCh7XG4gICAgICAgICAgICBhcHByb3ZlZDogei5hcnJheSh6LnN0cmluZygpKS5vcih6LmJvb2xlYW4oKSksXG4gICAgICAgICAgICByZWplY3RlZDogei5hcnJheSh6LnN0cmluZygpKS5vcih6LmJvb2xlYW4oKSksXG4gICAgICAgIH0pKSxcbiAgICAgICAgY29udGV4dDogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSksXG4gICAgfSksXG4gICAgdG9vbFVzZVRyYWNrZXI6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYXJyYXkoei5zdHJpbmcoKSkpLFxuICAgIG1heFR1cm5zOiB6Lm51bWJlcigpLFxuICAgIGN1cnJlbnRBZ2VudFNwYW46IFNlcmlhbGl6ZWRTcGFuLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICBub0FjdGl2ZUFnZW50UnVuOiB6LmJvb2xlYW4oKSxcbiAgICBpbnB1dEd1YXJkcmFpbFJlc3VsdHM6IHouYXJyYXkoaW5wdXRHdWFyZHJhaWxSZXN1bHRTY2hlbWEpLFxuICAgIG91dHB1dEd1YXJkcmFpbFJlc3VsdHM6IHouYXJyYXkob3V0cHV0R3VhcmRyYWlsUmVzdWx0U2NoZW1hKSxcbiAgICB0b29sSW5wdXRHdWFyZHJhaWxSZXN1bHRzOiB6XG4gICAgICAgIC5hcnJheSh0b29sSW5wdXRHdWFyZHJhaWxSZXN1bHRTY2hlbWEpXG4gICAgICAgIC5vcHRpb25hbCgpXG4gICAgICAgIC5kZWZhdWx0KFtdKSxcbiAgICB0b29sT3V0cHV0R3VhcmRyYWlsUmVzdWx0czogelxuICAgICAgICAuYXJyYXkodG9vbE91dHB1dEd1YXJkcmFpbFJlc3VsdFNjaGVtYSlcbiAgICAgICAgLm9wdGlvbmFsKClcbiAgICAgICAgLmRlZmF1bHQoW10pLFxuICAgIGN1cnJlbnRUdXJuSW5Qcm9ncmVzczogei5ib29sZWFuKCkub3B0aW9uYWwoKSxcbiAgICBjdXJyZW50U3RlcDogbmV4dFN0ZXBTY2hlbWEub3B0aW9uYWwoKSxcbiAgICBsYXN0TW9kZWxSZXNwb25zZTogbW9kZWxSZXNwb25zZVNjaGVtYS5vcHRpb25hbCgpLFxuICAgIGdlbmVyYXRlZEl0ZW1zOiB6LmFycmF5KGl0ZW1TY2hlbWEpLFxuICAgIGxhc3RQcm9jZXNzZWRSZXNwb25zZTogc2VyaWFsaXplZFByb2Nlc3NlZFJlc3BvbnNlU2NoZW1hLm9wdGlvbmFsKCksXG4gICAgY3VycmVudFR1cm5QZXJzaXN0ZWRJdGVtQ291bnQ6IHoubnVtYmVyKCkuaW50KCkubWluKDApLm9wdGlvbmFsKCksXG4gICAgY29udmVyc2F0aW9uSWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBwcmV2aW91c1Jlc3BvbnNlSWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICB0cmFjZTogc2VyaWFsaXplZFRyYWNlU2NoZW1hLm51bGxhYmxlKCksXG59KTtcbi8qKlxuICogU2VyaWFsaXphYmxlIHNuYXBzaG90IG9mIGFuIGFnZW50J3MgcnVuLCBpbmNsdWRpbmcgY29udGV4dCwgdXNhZ2UgYW5kIHRyYWNlLlxuICogV2hpbGUgdGhpcyBjbGFzcyBoYXMgcHVibGljbHkgd3JpdGFibGUgcHJvcGVydGllcyAocHJlZml4ZWQgd2l0aCBgX2ApLCB0aGV5IGFyZSBub3QgbWVhbnQgdG8gYmVcbiAqIHVzZWQgZGlyZWN0bHkuIFRvIHJlYWQgdGhlc2UgcHJvcGVydGllcywgdXNlIHRoZSBgUnVuUmVzdWx0YCBpbnN0ZWFkLlxuICpcbiAqIE1hbmlwdWxhdGlvbiBvZiB0aGUgc3RhdGUgZGlyZWN0bHkgY2FuIGxlYWQgdG8gdW5leHBlY3RlZCBiZWhhdmlvciBhbmQgc2hvdWxkIGJlIGF2b2lkZWQuXG4gKiBJbnN0ZWFkLCB1c2UgdGhlIGBhcHByb3ZlYCBhbmQgYHJlamVjdGAgbWV0aG9kcyB0byBpbnRlcmFjdCB3aXRoIHRoZSBzdGF0ZS5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1blN0YXRlIHtcbiAgICAvKipcbiAgICAgKiBDdXJyZW50IHR1cm4gbnVtYmVyIGluIHRoZSBjb252ZXJzYXRpb24uXG4gICAgICovXG4gICAgX2N1cnJlbnRUdXJuID0gMDtcbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoZSBjdXJyZW50IHR1cm4gaGFzIGFscmVhZHkgYmVlbiBjb3VudGVkICh1c2VmdWwgd2hlbiByZXN1bWluZyBtaWQtdHVybikuXG4gICAgICovXG4gICAgX2N1cnJlbnRUdXJuSW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgIC8qKlxuICAgICAqIFRoZSBhZ2VudCBjdXJyZW50bHkgaGFuZGxpbmcgdGhlIGNvbnZlcnNhdGlvbi5cbiAgICAgKi9cbiAgICBfY3VycmVudEFnZW50O1xuICAgIC8qKlxuICAgICAqIE9yaWdpbmFsIHVzZXIgaW5wdXQgcHJpb3IgdG8gYW55IHByb2Nlc3NpbmcuXG4gICAgICovXG4gICAgX29yaWdpbmFsSW5wdXQ7XG4gICAgLyoqXG4gICAgICogUmVzcG9uc2VzIGZyb20gdGhlIG1vZGVsIHNvIGZhci5cbiAgICAgKi9cbiAgICBfbW9kZWxSZXNwb25zZXM7XG4gICAgLyoqXG4gICAgICogQ29udmVyc2F0aW9uIGlkZW50aWZpZXIgd2hlbiB0aGUgc2VydmVyIG1hbmFnZXMgY29udmVyc2F0aW9uIGhpc3RvcnkuXG4gICAgICovXG4gICAgX2NvbnZlcnNhdGlvbklkO1xuICAgIC8qKlxuICAgICAqIExhdGVzdCByZXNwb25zZSBpZGVudGlmaWVyIHJldHVybmVkIGJ5IHRoZSBzZXJ2ZXIgZm9yIHNlcnZlci1tYW5hZ2VkIGNvbnZlcnNhdGlvbnMuXG4gICAgICovXG4gICAgX3ByZXZpb3VzUmVzcG9uc2VJZDtcbiAgICAvKipcbiAgICAgKiBBY3RpdmUgdHJhY2luZyBzcGFuIGZvciB0aGUgY3VycmVudCBhZ2VudCBpZiB0cmFjaW5nIGlzIGVuYWJsZWQuXG4gICAgICovXG4gICAgX2N1cnJlbnRBZ2VudFNwYW47XG4gICAgLyoqXG4gICAgICogUnVuIGNvbnRleHQgdHJhY2tpbmcgYXBwcm92YWxzLCB1c2FnZSwgYW5kIG90aGVyIG1ldGFkYXRhLlxuICAgICAqL1xuICAgIF9jb250ZXh0O1xuICAgIC8qKlxuICAgICAqIFRoZSB1c2FnZSBhZ2dyZWdhdGVkIGZvciB0aGlzIHJ1bi4gVGhpcyBpbmNsdWRlcyBwZXItcmVxdWVzdCBicmVha2Rvd25zIHdoZW4gYXZhaWxhYmxlLlxuICAgICAqL1xuICAgIGdldCB1c2FnZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnRleHQudXNhZ2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyYWNrcyB3aGF0IHRvb2xzIGVhY2ggYWdlbnQgaGFzIHVzZWQuXG4gICAgICovXG4gICAgX3Rvb2xVc2VUcmFja2VyO1xuICAgIC8qKlxuICAgICAqIEl0ZW1zIGdlbmVyYXRlZCBieSB0aGUgYWdlbnQgZHVyaW5nIHRoZSBydW4uXG4gICAgICovXG4gICAgX2dlbmVyYXRlZEl0ZW1zO1xuICAgIC8qKlxuICAgICAqIE51bWJlciBvZiBgX2dlbmVyYXRlZEl0ZW1zYCBhbHJlYWR5IGZsdXNoZWQgdG8gc2Vzc2lvbiBzdG9yYWdlIGZvciB0aGUgY3VycmVudCB0dXJuLlxuICAgICAqXG4gICAgICogUGVyc2lzdGluZyB0aGUgZW50aXJlIHR1cm4gb24gZXZlcnkgc2F2ZSB3b3VsZCBkdXBsaWNhdGUgcmVzcG9uc2VzIGFuZCB0b29sIG91dHB1dHMuXG4gICAgICogSW5zdGVhZCwgYHNhdmVUb1Nlc3Npb25gIGFwcGVuZHMgb25seSB0aGUgZGVsdGEgc2luY2UgdGhlIHByZXZpb3VzIHdyaXRlLiBUaGlzIGNvdW50ZXJcbiAgICAgKiB0cmFja3MgaG93IG1hbnkgZ2VuZXJhdGVkIHJ1biBpdGVtcyBmcm9tICp0aGlzIHR1cm4qIHdlcmUgYWxyZWFkeSB3cml0dGVuIHNvIHRoZSBuZXh0XG4gICAgICogc2F2ZSBjYW4gc2xpY2Ugb2ZmIG9ubHkgdGhlIG5ldyBlbnRyaWVzLiBXaGVuIGEgdHVybiBpcyBpbnRlcnJ1cHRlZCAoZS5nLiwgYXdhaXRpbmcgdG9vbFxuICAgICAqIGFwcHJvdmFsKSBhbmQgbGF0ZXIgcmVzdW1lZCwgd2UgcmV3aW5kIHRoZSBjb3VudGVyIGJlZm9yZSBjb250aW51aW5nIHNvIHRoZSBwZW5kaW5nIHRvb2xcbiAgICAgKiBvdXRwdXQgc3RpbGwgZ2V0cyBzdG9yZWQuXG4gICAgICovXG4gICAgX2N1cnJlbnRUdXJuUGVyc2lzdGVkSXRlbUNvdW50O1xuICAgIC8qKlxuICAgICAqIE1heGltdW0gYWxsb3dlZCB0dXJucyBiZWZvcmUgZm9yY2luZyB0ZXJtaW5hdGlvbi5cbiAgICAgKi9cbiAgICBfbWF4VHVybnM7XG4gICAgLyoqXG4gICAgICogV2hldGhlciB0aGUgcnVuIGhhcyBhbiBhY3RpdmUgYWdlbnQgc3RlcCBpbiBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBfbm9BY3RpdmVBZ2VudFJ1biA9IHRydWU7XG4gICAgLyoqXG4gICAgICogTGFzdCBtb2RlbCByZXNwb25zZSBmb3IgdGhlIHByZXZpb3VzIHR1cm4uXG4gICAgICovXG4gICAgX2xhc3RUdXJuUmVzcG9uc2U7XG4gICAgLyoqXG4gICAgICogUmVzdWx0cyBmcm9tIGlucHV0IGd1YXJkcmFpbHMgYXBwbGllZCB0byB0aGUgcnVuLlxuICAgICAqL1xuICAgIF9pbnB1dEd1YXJkcmFpbFJlc3VsdHM7XG4gICAgLyoqXG4gICAgICogUmVzdWx0cyBmcm9tIG91dHB1dCBndWFyZHJhaWxzIGFwcGxpZWQgdG8gdGhlIHJ1bi5cbiAgICAgKi9cbiAgICBfb3V0cHV0R3VhcmRyYWlsUmVzdWx0cztcbiAgICAvKipcbiAgICAgKiBSZXN1bHRzIGZyb20gdG9vbCBpbnB1dCBndWFyZHJhaWxzIGFwcGxpZWQgZHVyaW5nIHRvb2wgZXhlY3V0aW9uLlxuICAgICAqL1xuICAgIF90b29sSW5wdXRHdWFyZHJhaWxSZXN1bHRzO1xuICAgIC8qKlxuICAgICAqIFJlc3VsdHMgZnJvbSB0b29sIG91dHB1dCBndWFyZHJhaWxzIGFwcGxpZWQgZHVyaW5nIHRvb2wgZXhlY3V0aW9uLlxuICAgICAqL1xuICAgIF90b29sT3V0cHV0R3VhcmRyYWlsUmVzdWx0cztcbiAgICAvKipcbiAgICAgKiBOZXh0IHN0ZXAgY29tcHV0ZWQgZm9yIHRoZSBhZ2VudCB0byB0YWtlLlxuICAgICAqL1xuICAgIF9jdXJyZW50U3RlcCA9IHVuZGVmaW5lZDtcbiAgICAvKipcbiAgICAgKiBQYXJzZWQgbW9kZWwgcmVzcG9uc2UgYWZ0ZXIgYXBwbHlpbmcgZ3VhcmRyYWlscyBhbmQgdG9vbHMuXG4gICAgICovXG4gICAgX2xhc3RQcm9jZXNzZWRSZXNwb25zZSA9IHVuZGVmaW5lZDtcbiAgICAvKipcbiAgICAgKiBUcmFjZSBhc3NvY2lhdGVkIHdpdGggdGhpcyBydW4gaWYgdHJhY2luZyBpcyBlbmFibGVkLlxuICAgICAqL1xuICAgIF90cmFjZSA9IG51bGw7XG4gICAgY29uc3RydWN0b3IoY29udGV4dCwgb3JpZ2luYWxJbnB1dCwgc3RhcnRpbmdBZ2VudCwgbWF4VHVybnMpIHtcbiAgICAgICAgdGhpcy5fY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgIHRoaXMuX29yaWdpbmFsSW5wdXQgPSBzdHJ1Y3R1cmVkQ2xvbmUob3JpZ2luYWxJbnB1dCk7XG4gICAgICAgIHRoaXMuX21vZGVsUmVzcG9uc2VzID0gW107XG4gICAgICAgIHRoaXMuX2N1cnJlbnRBZ2VudFNwYW4gPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX2N1cnJlbnRBZ2VudCA9IHN0YXJ0aW5nQWdlbnQ7XG4gICAgICAgIHRoaXMuX3Rvb2xVc2VUcmFja2VyID0gbmV3IEFnZW50VG9vbFVzZVRyYWNrZXIoKTtcbiAgICAgICAgdGhpcy5fZ2VuZXJhdGVkSXRlbXMgPSBbXTtcbiAgICAgICAgdGhpcy5fY3VycmVudFR1cm5QZXJzaXN0ZWRJdGVtQ291bnQgPSAwO1xuICAgICAgICB0aGlzLl9tYXhUdXJucyA9IG1heFR1cm5zO1xuICAgICAgICB0aGlzLl9pbnB1dEd1YXJkcmFpbFJlc3VsdHMgPSBbXTtcbiAgICAgICAgdGhpcy5fb3V0cHV0R3VhcmRyYWlsUmVzdWx0cyA9IFtdO1xuICAgICAgICB0aGlzLl90b29sSW5wdXRHdWFyZHJhaWxSZXN1bHRzID0gW107XG4gICAgICAgIHRoaXMuX3Rvb2xPdXRwdXRHdWFyZHJhaWxSZXN1bHRzID0gW107XG4gICAgICAgIHRoaXMuX3RyYWNlID0gZ2V0Q3VycmVudFRyYWNlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgc2VydmVyLW1hbmFnZWQgY29udmVyc2F0aW9uIGlkZW50aWZpZXJzIGFzIGEgc2luZ2xlIG9wZXJhdGlvbi5cbiAgICAgKi9cbiAgICBzZXRDb252ZXJzYXRpb25Db250ZXh0KGNvbnZlcnNhdGlvbklkLCBwcmV2aW91c1Jlc3BvbnNlSWQpIHtcbiAgICAgICAgdGhpcy5fY29udmVyc2F0aW9uSWQgPSBjb252ZXJzYXRpb25JZDtcbiAgICAgICAgdGhpcy5fcHJldmlvdXNSZXNwb25zZUlkID0gcHJldmlvdXNSZXNwb25zZUlkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBhZ2VudCBzcGFuIGFzc29jaWF0ZWQgd2l0aCB0aGUgY3VycmVudCBydW4uXG4gICAgICovXG4gICAgc2V0Q3VycmVudEFnZW50U3BhbihzcGFuKSB7XG4gICAgICAgIHRoaXMuX2N1cnJlbnRBZ2VudFNwYW4gPSBzcGFuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTd2l0Y2hlcyB0aGUgYWN0aXZlIGFnZW50IGhhbmRsaW5nIHRoZSBydW4uXG4gICAgICovXG4gICAgc2V0Q3VycmVudEFnZW50KGFnZW50KSB7XG4gICAgICAgIHRoaXMuX2N1cnJlbnRBZ2VudCA9IGFnZW50O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldHMgdGhlIGNvdW50ZXIgdGhhdCB0cmFja3MgaG93IG1hbnkgaXRlbXMgd2VyZSBwZXJzaXN0ZWQgZm9yIHRoZSBjdXJyZW50IHR1cm4uXG4gICAgICovXG4gICAgcmVzZXRUdXJuUGVyc2lzdGVuY2UoKSB7XG4gICAgICAgIHRoaXMuX2N1cnJlbnRUdXJuUGVyc2lzdGVkSXRlbUNvdW50ID0gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV3aW5kcyB0aGUgcGVyc2lzdGVkIGl0ZW0gY291bnRlciB3aGVuIHBlbmRpbmcgYXBwcm92YWxzIHJlcXVpcmUgcmUtd3JpdGluZyBvdXRwdXRzLlxuICAgICAqL1xuICAgIHJld2luZFR1cm5QZXJzaXN0ZW5jZShjb3VudCkge1xuICAgICAgICBpZiAoY291bnQgPD0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2N1cnJlbnRUdXJuUGVyc2lzdGVkSXRlbUNvdW50ID0gTWF0aC5tYXgoMCwgdGhpcy5fY3VycmVudFR1cm5QZXJzaXN0ZWRJdGVtQ291bnQgLSBjb3VudCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBoaXN0b3J5IG9mIHRoZSBhZ2VudCBydW4uIFRoaXMgaW5jbHVkZXMgdGhlIGlucHV0IGl0ZW1zIGFuZCB0aGUgbmV3IGl0ZW1zIGdlbmVyYXRlZCBkdXJpbmcgdGhlIHJ1bi5cbiAgICAgKlxuICAgICAqIFRoaXMgY2FuIGJlIHVzZWQgYXMgaW5wdXRzIGZvciB0aGUgbmV4dCBhZ2VudCBydW4uXG4gICAgICovXG4gICAgZ2V0IGhpc3RvcnkoKSB7XG4gICAgICAgIHJldHVybiBnZXRUdXJuSW5wdXQodGhpcy5fb3JpZ2luYWxJbnB1dCwgdGhpcy5fZ2VuZXJhdGVkSXRlbXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFsbCBpbnRlcnJ1cHRpb25zIGlmIHRoZSBjdXJyZW50IHN0ZXAgaXMgYW4gaW50ZXJydXB0aW9uIG90aGVyd2lzZSByZXR1cm5zIGFuIGVtcHR5IGFycmF5LlxuICAgICAqL1xuICAgIGdldEludGVycnVwdGlvbnMoKSB7XG4gICAgICAgIGlmICh0aGlzLl9jdXJyZW50U3RlcD8udHlwZSAhPT0gJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nKSB7XG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2N1cnJlbnRTdGVwLmRhdGEuaW50ZXJydXB0aW9ucztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwcm92ZXMgYSB0b29sIGNhbGwgcmVxdWVzdGVkIGJ5IHRoZSBhZ2VudCB0aHJvdWdoIGFuIGludGVycnVwdGlvbiBhbmQgYXBwcm92YWwgaXRlbSByZXF1ZXN0LlxuICAgICAqXG4gICAgICogVG8gYXBwcm92ZSB0aGUgcmVxdWVzdCB1c2UgdGhpcyBtZXRob2QgYW5kIHRoZW4gcnVuIHRoZSBhZ2VudCBhZ2FpbiB3aXRoIHRoZSBzYW1lIHN0YXRlIG9iamVjdFxuICAgICAqIHRvIGNvbnRpbnVlIHRoZSBleGVjdXRpb24uXG4gICAgICpcbiAgICAgKiBCeSBkZWZhdWx0IGl0IHdpbGwgb25seSBhcHByb3ZlIHRoZSBjdXJyZW50IHRvb2wgY2FsbC4gVG8gYWxsb3cgdGhlIHRvb2wgdG8gYmUgdXNlZCBtdWx0aXBsZVxuICAgICAqIHRpbWVzIHRocm91Z2hvdXQgdGhlIHJ1biwgc2V0IHRoZSBgYWx3YXlzQXBwcm92ZWAgb3B0aW9uIHRvIGB0cnVlYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhcHByb3ZhbEl0ZW0gLSBUaGUgdG9vbCBjYWxsIGFwcHJvdmFsIGl0ZW0gdG8gYXBwcm92ZS5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbnMgZm9yIHRoZSBhcHByb3ZhbC5cbiAgICAgKi9cbiAgICBhcHByb3ZlKGFwcHJvdmFsSXRlbSwgb3B0aW9ucyA9IHsgYWx3YXlzQXBwcm92ZTogZmFsc2UgfSkge1xuICAgICAgICB0aGlzLl9jb250ZXh0LmFwcHJvdmVUb29sKGFwcHJvdmFsSXRlbSwgb3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlamVjdHMgYSB0b29sIGNhbGwgcmVxdWVzdGVkIGJ5IHRoZSBhZ2VudCB0aHJvdWdoIGFuIGludGVycnVwdGlvbiBhbmQgYXBwcm92YWwgaXRlbSByZXF1ZXN0LlxuICAgICAqXG4gICAgICogVG8gcmVqZWN0IHRoZSByZXF1ZXN0IHVzZSB0aGlzIG1ldGhvZCBhbmQgdGhlbiBydW4gdGhlIGFnZW50IGFnYWluIHdpdGggdGhlIHNhbWUgc3RhdGUgb2JqZWN0XG4gICAgICogdG8gY29udGludWUgdGhlIGV4ZWN1dGlvbi5cbiAgICAgKlxuICAgICAqIEJ5IGRlZmF1bHQgaXQgd2lsbCBvbmx5IHJlamVjdCB0aGUgY3VycmVudCB0b29sIGNhbGwuIFRvIGFsbG93IHRoZSB0b29sIHRvIGJlIHVzZWQgbXVsdGlwbGVcbiAgICAgKiB0aW1lcyB0aHJvdWdob3V0IHRoZSBydW4sIHNldCB0aGUgYGFsd2F5c1JlamVjdGAgb3B0aW9uIHRvIGB0cnVlYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhcHByb3ZhbEl0ZW0gLSBUaGUgdG9vbCBjYWxsIGFwcHJvdmFsIGl0ZW0gdG8gcmVqZWN0LlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9ucyBmb3IgdGhlIHJlamVjdGlvbi5cbiAgICAgKi9cbiAgICByZWplY3QoYXBwcm92YWxJdGVtLCBvcHRpb25zID0geyBhbHdheXNSZWplY3Q6IGZhbHNlIH0pIHtcbiAgICAgICAgdGhpcy5fY29udGV4dC5yZWplY3RUb29sKGFwcHJvdmFsSXRlbSwgb3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlcmlhbGl6ZXMgdGhlIHJ1biBzdGF0ZSB0byBhIEpTT04gb2JqZWN0LlxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2QgaXMgdXNlZCB0byBzZXJpYWxpemUgdGhlIHJ1biBzdGF0ZSB0byBhIEpTT04gb2JqZWN0IHRoYXQgY2FuIGJlIHVzZWQgdG9cbiAgICAgKiByZXN1bWUgdGhlIHJ1biBsYXRlci5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBzZXJpYWxpemVkIHJ1biBzdGF0ZS5cbiAgICAgKi9cbiAgICAvKipcbiAgICAgKiBTZXJpYWxpemVzIHRoZSBydW4gc3RhdGUuIEJ5IGRlZmF1bHQsIHRyYWNpbmcgQVBJIGtleXMgYXJlIG9taXR0ZWQgdG8gcHJldmVudFxuICAgICAqIGFjY2lkZW50YWwgcGVyc2lzdGVuY2Ugb2Ygc2VjcmV0cy4gUGFzcyBgaW5jbHVkZVRyYWNpbmdBcGlLZXk6IHRydWVgIG9ubHkgd2hlbiB5b3VcbiAgICAgKiBpbnRlbnRpb25hbGx5IG5lZWQgdG8gbWlncmF0ZSBhIHJ1biBhbG9uZyB3aXRoIGl0cyB0cmFjaW5nIGNyZWRlbnRpYWxzIChlLmcuLCB0b1xuICAgICAqIHJlaHlkcmF0ZSBpbiBhIHNlcGFyYXRlIHByb2Nlc3MgdGhhdCBsYWNrcyB0aGUgb3JpZ2luYWwgZW52aXJvbm1lbnQgdmFyaWFibGVzKS5cbiAgICAgKi9cbiAgICB0b0pTT04ob3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IGluY2x1ZGVUcmFjaW5nQXBpS2V5ID0gb3B0aW9ucy5pbmNsdWRlVHJhY2luZ0FwaUtleSA9PT0gdHJ1ZTtcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0ge1xuICAgICAgICAgICAgJHNjaGVtYVZlcnNpb246IENVUlJFTlRfU0NIRU1BX1ZFUlNJT04sXG4gICAgICAgICAgICBjdXJyZW50VHVybjogdGhpcy5fY3VycmVudFR1cm4sXG4gICAgICAgICAgICBjdXJyZW50QWdlbnQ6IHtcbiAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLl9jdXJyZW50QWdlbnQubmFtZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvcmlnaW5hbElucHV0OiB0aGlzLl9vcmlnaW5hbElucHV0LFxuICAgICAgICAgICAgbW9kZWxSZXNwb25zZXM6IHRoaXMuX21vZGVsUmVzcG9uc2VzLm1hcCgocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB1c2FnZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdHM6IHJlc3BvbnNlLnVzYWdlLnJlcXVlc3RzLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRUb2tlbnM6IHJlc3BvbnNlLnVzYWdlLmlucHV0VG9rZW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0VG9rZW5zOiByZXNwb25zZS51c2FnZS5vdXRwdXRUb2tlbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3RhbFRva2VuczogcmVzcG9uc2UudXNhZ2UudG90YWxUb2tlbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFRva2Vuc0RldGFpbHM6IHJlc3BvbnNlLnVzYWdlLmlucHV0VG9rZW5zRGV0YWlscyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFRva2Vuc0RldGFpbHM6IHJlc3BvbnNlLnVzYWdlLm91dHB1dFRva2Vuc0RldGFpbHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi4ocmVzcG9uc2UudXNhZ2UucmVxdWVzdFVzYWdlRW50cmllcyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLnVzYWdlLnJlcXVlc3RVc2FnZUVudHJpZXMubGVuZ3RoID4gMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0VXNhZ2VFbnRyaWVzOiByZXNwb25zZS51c2FnZS5yZXF1ZXN0VXNhZ2VFbnRyaWVzLm1hcCgoZW50cnkpID0+ICh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFRva2VuczogZW50cnkuaW5wdXRUb2tlbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRUb2tlbnM6IGVudHJ5Lm91dHB1dFRva2VucyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsVG9rZW5zOiBlbnRyeS50b3RhbFRva2VucyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0VG9rZW5zRGV0YWlsczogZW50cnkuaW5wdXRUb2tlbnNEZXRhaWxzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0VG9rZW5zRGV0YWlsczogZW50cnkub3V0cHV0VG9rZW5zRGV0YWlscyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLihlbnRyeS5lbmRwb2ludCA/IHsgZW5kcG9pbnQ6IGVudHJ5LmVuZHBvaW50IH0gOiB7fSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB7fSksXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dDogcmVzcG9uc2Uub3V0cHV0LFxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZUlkOiByZXNwb25zZS5yZXNwb25zZUlkLFxuICAgICAgICAgICAgICAgICAgICBwcm92aWRlckRhdGE6IHJlc3BvbnNlLnByb3ZpZGVyRGF0YSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBjb250ZXh0OiB0aGlzLl9jb250ZXh0LnRvSlNPTigpLFxuICAgICAgICAgICAgdG9vbFVzZVRyYWNrZXI6IHRoaXMuX3Rvb2xVc2VUcmFja2VyLnRvSlNPTigpLFxuICAgICAgICAgICAgbWF4VHVybnM6IHRoaXMuX21heFR1cm5zLFxuICAgICAgICAgICAgY3VycmVudEFnZW50U3BhbjogdGhpcy5fY3VycmVudEFnZW50U3Bhbj8udG9KU09OKCksXG4gICAgICAgICAgICBub0FjdGl2ZUFnZW50UnVuOiB0aGlzLl9ub0FjdGl2ZUFnZW50UnVuLFxuICAgICAgICAgICAgY3VycmVudFR1cm5JblByb2dyZXNzOiB0aGlzLl9jdXJyZW50VHVybkluUHJvZ3Jlc3MsXG4gICAgICAgICAgICBpbnB1dEd1YXJkcmFpbFJlc3VsdHM6IHRoaXMuX2lucHV0R3VhcmRyYWlsUmVzdWx0cyxcbiAgICAgICAgICAgIG91dHB1dEd1YXJkcmFpbFJlc3VsdHM6IHRoaXMuX291dHB1dEd1YXJkcmFpbFJlc3VsdHMubWFwKChyKSA9PiAoe1xuICAgICAgICAgICAgICAgIC4uLnIsXG4gICAgICAgICAgICAgICAgYWdlbnQ6IHIuYWdlbnQudG9KU09OKCksXG4gICAgICAgICAgICB9KSksXG4gICAgICAgICAgICB0b29sSW5wdXRHdWFyZHJhaWxSZXN1bHRzOiB0aGlzLl90b29sSW5wdXRHdWFyZHJhaWxSZXN1bHRzLFxuICAgICAgICAgICAgdG9vbE91dHB1dEd1YXJkcmFpbFJlc3VsdHM6IHRoaXMuX3Rvb2xPdXRwdXRHdWFyZHJhaWxSZXN1bHRzLFxuICAgICAgICAgICAgY3VycmVudFN0ZXA6IHRoaXMuX2N1cnJlbnRTdGVwLFxuICAgICAgICAgICAgbGFzdE1vZGVsUmVzcG9uc2U6IHRoaXMuX2xhc3RUdXJuUmVzcG9uc2UsXG4gICAgICAgICAgICBnZW5lcmF0ZWRJdGVtczogdGhpcy5fZ2VuZXJhdGVkSXRlbXMubWFwKChpdGVtKSA9PiBpdGVtLnRvSlNPTigpKSxcbiAgICAgICAgICAgIGN1cnJlbnRUdXJuUGVyc2lzdGVkSXRlbUNvdW50OiB0aGlzLl9jdXJyZW50VHVyblBlcnNpc3RlZEl0ZW1Db3VudCxcbiAgICAgICAgICAgIGxhc3RQcm9jZXNzZWRSZXNwb25zZTogdGhpcy5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlLFxuICAgICAgICAgICAgY29udmVyc2F0aW9uSWQ6IHRoaXMuX2NvbnZlcnNhdGlvbklkLFxuICAgICAgICAgICAgcHJldmlvdXNSZXNwb25zZUlkOiB0aGlzLl9wcmV2aW91c1Jlc3BvbnNlSWQsXG4gICAgICAgICAgICB0cmFjZTogdGhpcy5fdHJhY2VcbiAgICAgICAgICAgICAgICA/IHRoaXMuX3RyYWNlLnRvSlNPTih7IGluY2x1ZGVUcmFjaW5nQXBpS2V5IH0pXG4gICAgICAgICAgICAgICAgOiBudWxsLFxuICAgICAgICB9O1xuICAgICAgICAvLyBwYXJzaW5nIHRoZSBzY2hlbWEgdG8gZW5zdXJlIHRoZSBvdXRwdXQgaXMgdmFsaWQgZm9yIHJlcGFyc2luZ1xuICAgICAgICBjb25zdCBwYXJzZWQgPSBTZXJpYWxpemVkUnVuU3RhdGUuc2FmZVBhcnNlKG91dHB1dCk7XG4gICAgICAgIGlmICghcGFyc2VkLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTeXN0ZW1FcnJvcihgRmFpbGVkIHRvIHNlcmlhbGl6ZSBydW4gc3RhdGUuICR7cGFyc2VkLmVycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhcnNlZC5kYXRhO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXJpYWxpemVzIHRoZSBydW4gc3RhdGUgdG8gYSBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyB1c2VkIHRvIHNlcmlhbGl6ZSB0aGUgcnVuIHN0YXRlIHRvIGEgc3RyaW5nIHRoYXQgY2FuIGJlIHVzZWQgdG9cbiAgICAgKiByZXN1bWUgdGhlIHJ1biBsYXRlci5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBzZXJpYWxpemVkIHJ1biBzdGF0ZS5cbiAgICAgKi9cbiAgICB0b1N0cmluZyhvcHRpb25zID0ge30pIHtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMudG9KU09OKG9wdGlvbnMpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVzZXJpYWxpemVzIGEgcnVuIHN0YXRlIGZyb20gYSBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyB1c2VkIHRvIGRlc2VyaWFsaXplIGEgcnVuIHN0YXRlIGZyb20gYSBzdHJpbmcgdGhhdCB3YXMgc2VyaWFsaXplZCB1c2luZyB0aGVcbiAgICAgKiBgdG9TdHJpbmdgIG1ldGhvZC5cbiAgICAgKi9cbiAgICBzdGF0aWMgYXN5bmMgZnJvbVN0cmluZyhpbml0aWFsQWdlbnQsIHN0cikge1xuICAgICAgICBjb25zdCBbcGFyc2luZ0Vycm9yLCBqc29uUmVzdWx0XSA9IGF3YWl0IHNhZmVFeGVjdXRlKCgpID0+IEpTT04ucGFyc2Uoc3RyKSk7XG4gICAgICAgIGlmIChwYXJzaW5nRXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoYEZhaWxlZCB0byBwYXJzZSBydW4gc3RhdGUuICR7cGFyc2luZ0Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBwYXJzaW5nRXJyb3IubWVzc2FnZSA6IFN0cmluZyhwYXJzaW5nRXJyb3IpfWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGN1cnJlbnRTY2hlbWFWZXJzaW9uID0ganNvblJlc3VsdC4kc2NoZW1hVmVyc2lvbjtcbiAgICAgICAgaWYgKCFjdXJyZW50U2NoZW1hVmVyc2lvbikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcignUnVuIHN0YXRlIGlzIG1pc3Npbmcgc2NoZW1hIHZlcnNpb24nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIVNVUFBPUlRFRF9TQ0hFTUFfVkVSU0lPTlMuaW5jbHVkZXMoY3VycmVudFNjaGVtYVZlcnNpb24pKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKGBSdW4gc3RhdGUgc2NoZW1hIHZlcnNpb24gJHtjdXJyZW50U2NoZW1hVmVyc2lvbn0gaXMgbm90IHN1cHBvcnRlZC4gUGxlYXNlIHVzZSB2ZXJzaW9uICR7Q1VSUkVOVF9TQ0hFTUFfVkVSU0lPTn0uYCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RhdGVKc29uID0gU2VyaWFsaXplZFJ1blN0YXRlLnBhcnNlKEpTT04ucGFyc2Uoc3RyKSk7XG4gICAgICAgIGNvbnN0IGFnZW50TWFwID0gYnVpbGRBZ2VudE1hcChpbml0aWFsQWdlbnQpO1xuICAgICAgICAvL1xuICAgICAgICAvLyBSZWJ1aWxkIHRoZSBjb250ZXh0XG4gICAgICAgIC8vXG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBuZXcgUnVuQ29udGV4dChzdGF0ZUpzb24uY29udGV4dC5jb250ZXh0KTtcbiAgICAgICAgY29udGV4dC5fcmVidWlsZEFwcHJvdmFscyhzdGF0ZUpzb24uY29udGV4dC5hcHByb3ZhbHMpO1xuICAgICAgICAvL1xuICAgICAgICAvLyBGaW5kIHRoZSBjdXJyZW50IGFnZW50IGZyb20gdGhlIGluaXRpYWwgYWdlbnRcbiAgICAgICAgLy9cbiAgICAgICAgY29uc3QgY3VycmVudEFnZW50ID0gYWdlbnRNYXAuZ2V0KHN0YXRlSnNvbi5jdXJyZW50QWdlbnQubmFtZSk7XG4gICAgICAgIGlmICghY3VycmVudEFnZW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKGBBZ2VudCAke3N0YXRlSnNvbi5jdXJyZW50QWdlbnQubmFtZX0gbm90IGZvdW5kYCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RhdGUgPSBuZXcgUnVuU3RhdGUoY29udGV4dCwgJycsIGN1cnJlbnRBZ2VudCwgc3RhdGVKc29uLm1heFR1cm5zKTtcbiAgICAgICAgc3RhdGUuX2N1cnJlbnRUdXJuID0gc3RhdGVKc29uLmN1cnJlbnRUdXJuO1xuICAgICAgICBzdGF0ZS5fY3VycmVudFR1cm5JblByb2dyZXNzID0gc3RhdGVKc29uLmN1cnJlbnRUdXJuSW5Qcm9ncmVzcyA/PyBmYWxzZTtcbiAgICAgICAgc3RhdGUuX2NvbnZlcnNhdGlvbklkID0gc3RhdGVKc29uLmNvbnZlcnNhdGlvbklkID8/IHVuZGVmaW5lZDtcbiAgICAgICAgc3RhdGUuX3ByZXZpb3VzUmVzcG9uc2VJZCA9IHN0YXRlSnNvbi5wcmV2aW91c1Jlc3BvbnNlSWQgPz8gdW5kZWZpbmVkO1xuICAgICAgICAvLyByZWJ1aWxkIHRvb2wgdXNlIHRyYWNrZXJcbiAgICAgICAgc3RhdGUuX3Rvb2xVc2VUcmFja2VyID0gbmV3IEFnZW50VG9vbFVzZVRyYWNrZXIoKTtcbiAgICAgICAgZm9yIChjb25zdCBbYWdlbnROYW1lLCB0b29sTmFtZXNdIG9mIE9iamVjdC5lbnRyaWVzKHN0YXRlSnNvbi50b29sVXNlVHJhY2tlcikpIHtcbiAgICAgICAgICAgIHN0YXRlLl90b29sVXNlVHJhY2tlci5hZGRUb29sVXNlKGFnZW50TWFwLmdldChhZ2VudE5hbWUpLCB0b29sTmFtZXMsIHsgYWxsb3dFbXB0eTogdHJ1ZSB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyByZWJ1aWxkIGN1cnJlbnQgYWdlbnQgc3BhblxuICAgICAgICBpZiAoc3RhdGVKc29uLmN1cnJlbnRBZ2VudFNwYW4pIHtcbiAgICAgICAgICAgIGlmICghc3RhdGVKc29uLnRyYWNlKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ1RyYWNlIGlzIG5vdCBzZXQsIHNraXBwaW5nIHRyYWNpbmcgc2V0dXAnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHRyYWNlID0gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVRyYWNlKHtcbiAgICAgICAgICAgICAgICB0cmFjZUlkOiBzdGF0ZUpzb24udHJhY2U/LmlkLFxuICAgICAgICAgICAgICAgIG5hbWU6IHN0YXRlSnNvbi50cmFjZT8ud29ya2Zsb3dfbmFtZSxcbiAgICAgICAgICAgICAgICBncm91cElkOiBzdGF0ZUpzb24udHJhY2U/Lmdyb3VwX2lkID8/IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBtZXRhZGF0YTogc3RhdGVKc29uLnRyYWNlPy5tZXRhZGF0YSxcbiAgICAgICAgICAgICAgICB0cmFjaW5nQXBpS2V5OiBzdGF0ZUpzb24udHJhY2U/LnRyYWNpbmdfYXBpX2tleSA/PyB1bmRlZmluZWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuID0gZGVzZXJpYWxpemVTcGFuKHRyYWNlLCBzdGF0ZUpzb24uY3VycmVudEFnZW50U3Bhbik7XG4gICAgICAgICAgICBzdGF0ZS5fdHJhY2UgPSB0cmFjZTtcbiAgICAgICAgfVxuICAgICAgICBzdGF0ZS5fbm9BY3RpdmVBZ2VudFJ1biA9IHN0YXRlSnNvbi5ub0FjdGl2ZUFnZW50UnVuO1xuICAgICAgICBzdGF0ZS5faW5wdXRHdWFyZHJhaWxSZXN1bHRzID1cbiAgICAgICAgICAgIHN0YXRlSnNvbi5pbnB1dEd1YXJkcmFpbFJlc3VsdHM7XG4gICAgICAgIHN0YXRlLl9vdXRwdXRHdWFyZHJhaWxSZXN1bHRzID0gc3RhdGVKc29uLm91dHB1dEd1YXJkcmFpbFJlc3VsdHMubWFwKChyKSA9PiAoe1xuICAgICAgICAgICAgLi4ucixcbiAgICAgICAgICAgIGFnZW50OiBhZ2VudE1hcC5nZXQoci5hZ2VudC5uYW1lKSxcbiAgICAgICAgfSkpO1xuICAgICAgICBzdGF0ZS5fdG9vbElucHV0R3VhcmRyYWlsUmVzdWx0cyA9XG4gICAgICAgICAgICBzdGF0ZUpzb24udG9vbElucHV0R3VhcmRyYWlsUmVzdWx0cztcbiAgICAgICAgc3RhdGUuX3Rvb2xPdXRwdXRHdWFyZHJhaWxSZXN1bHRzID1cbiAgICAgICAgICAgIHN0YXRlSnNvbi50b29sT3V0cHV0R3VhcmRyYWlsUmVzdWx0cztcbiAgICAgICAgc3RhdGUuX2N1cnJlbnRTdGVwID0gc3RhdGVKc29uLmN1cnJlbnRTdGVwO1xuICAgICAgICBzdGF0ZS5fb3JpZ2luYWxJbnB1dCA9IHN0YXRlSnNvbi5vcmlnaW5hbElucHV0O1xuICAgICAgICBzdGF0ZS5fbW9kZWxSZXNwb25zZXMgPSBzdGF0ZUpzb24ubW9kZWxSZXNwb25zZXMubWFwKGRlc2VyaWFsaXplTW9kZWxSZXNwb25zZSk7XG4gICAgICAgIHN0YXRlLl9sYXN0VHVyblJlc3BvbnNlID0gc3RhdGVKc29uLmxhc3RNb2RlbFJlc3BvbnNlXG4gICAgICAgICAgICA/IGRlc2VyaWFsaXplTW9kZWxSZXNwb25zZShzdGF0ZUpzb24ubGFzdE1vZGVsUmVzcG9uc2UpXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgc3RhdGUuX2dlbmVyYXRlZEl0ZW1zID0gc3RhdGVKc29uLmdlbmVyYXRlZEl0ZW1zLm1hcCgoaXRlbSkgPT4gZGVzZXJpYWxpemVJdGVtKGl0ZW0sIGFnZW50TWFwKSk7XG4gICAgICAgIHN0YXRlLl9jdXJyZW50VHVyblBlcnNpc3RlZEl0ZW1Db3VudCA9XG4gICAgICAgICAgICBzdGF0ZUpzb24uY3VycmVudFR1cm5QZXJzaXN0ZWRJdGVtQ291bnQgPz8gMDtcbiAgICAgICAgc3RhdGUuX2xhc3RQcm9jZXNzZWRSZXNwb25zZSA9IHN0YXRlSnNvbi5sYXN0UHJvY2Vzc2VkUmVzcG9uc2VcbiAgICAgICAgICAgID8gYXdhaXQgZGVzZXJpYWxpemVQcm9jZXNzZWRSZXNwb25zZShhZ2VudE1hcCwgc3RhdGUuX2N1cnJlbnRBZ2VudCwgc3RhdGUuX2NvbnRleHQsIHN0YXRlSnNvbi5sYXN0UHJvY2Vzc2VkUmVzcG9uc2UpXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKHN0YXRlSnNvbi5jdXJyZW50U3RlcD8udHlwZSA9PT0gJ25leHRfc3RlcF9oYW5kb2ZmJykge1xuICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRTdGVwID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICduZXh0X3N0ZXBfaGFuZG9mZicsXG4gICAgICAgICAgICAgICAgbmV3QWdlbnQ6IGFnZW50TWFwLmdldChzdGF0ZUpzb24uY3VycmVudFN0ZXAubmV3QWdlbnQubmFtZSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICB9XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRBZ2VudE1hcChpbml0aWFsQWdlbnQpIHtcbiAgICBjb25zdCBtYXAgPSBuZXcgTWFwKCk7XG4gICAgY29uc3QgcXVldWUgPSBbaW5pdGlhbEFnZW50XTtcbiAgICB3aGlsZSAocXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBjdXJyZW50QWdlbnQgPSBxdWV1ZS5zaGlmdCgpO1xuICAgICAgICBpZiAobWFwLmhhcyhjdXJyZW50QWdlbnQubmFtZSkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIG1hcC5zZXQoY3VycmVudEFnZW50Lm5hbWUsIGN1cnJlbnRBZ2VudCk7XG4gICAgICAgIGZvciAoY29uc3QgaGFuZG9mZiBvZiBjdXJyZW50QWdlbnQuaGFuZG9mZnMpIHtcbiAgICAgICAgICAgIGlmIChoYW5kb2ZmIGluc3RhbmNlb2YgQWdlbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIW1hcC5oYXMoaGFuZG9mZi5uYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICBxdWV1ZS5wdXNoKGhhbmRvZmYpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGhhbmRvZmYuYWdlbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIW1hcC5oYXMoaGFuZG9mZi5hZ2VudC5uYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICBxdWV1ZS5wdXNoKGhhbmRvZmYuYWdlbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWFwO1xufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlc2VyaWFsaXplU3Bhbih0cmFjZSwgc2VyaWFsaXplZFNwYW4pIHtcbiAgICBjb25zdCBzcGFuRGF0YSA9IHNlcmlhbGl6ZWRTcGFuLnNwYW5fZGF0YTtcbiAgICBjb25zdCBwcmV2aW91c1NwYW4gPSBzZXJpYWxpemVkU3Bhbi5wcmV2aW91c19zcGFuXG4gICAgICAgID8gZGVzZXJpYWxpemVTcGFuKHRyYWNlLCBzZXJpYWxpemVkU3Bhbi5wcmV2aW91c19zcGFuKVxuICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICBjb25zdCBzcGFuID0gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVNwYW4oe1xuICAgICAgICBzcGFuSWQ6IHNlcmlhbGl6ZWRTcGFuLmlkLFxuICAgICAgICB0cmFjZUlkOiBzZXJpYWxpemVkU3Bhbi50cmFjZV9pZCxcbiAgICAgICAgcGFyZW50SWQ6IHNlcmlhbGl6ZWRTcGFuLnBhcmVudF9pZCA/PyB1bmRlZmluZWQsXG4gICAgICAgIHN0YXJ0ZWRBdDogc2VyaWFsaXplZFNwYW4uc3RhcnRlZF9hdCA/PyB1bmRlZmluZWQsXG4gICAgICAgIGVuZGVkQXQ6IHNlcmlhbGl6ZWRTcGFuLmVuZGVkX2F0ID8/IHVuZGVmaW5lZCxcbiAgICAgICAgZGF0YTogc3BhbkRhdGEsXG4gICAgfSwgdHJhY2UpO1xuICAgIHNwYW4ucHJldmlvdXNTcGFuID0gcHJldmlvdXNTcGFuO1xuICAgIHJldHVybiBzcGFuO1xufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlc2VyaWFsaXplTW9kZWxSZXNwb25zZShzZXJpYWxpemVkTW9kZWxSZXNwb25zZSkge1xuICAgIGNvbnN0IHVzYWdlID0gbmV3IFVzYWdlKHNlcmlhbGl6ZWRNb2RlbFJlc3BvbnNlLnVzYWdlKTtcbiAgICByZXR1cm4ge1xuICAgICAgICB1c2FnZSxcbiAgICAgICAgb3V0cHV0OiBzZXJpYWxpemVkTW9kZWxSZXNwb25zZS5vdXRwdXQubWFwKChpdGVtKSA9PiBwcm90b2NvbC5PdXRwdXRNb2RlbEl0ZW0ucGFyc2UoaXRlbSkpLFxuICAgICAgICByZXNwb25zZUlkOiBzZXJpYWxpemVkTW9kZWxSZXNwb25zZS5yZXNwb25zZUlkLFxuICAgICAgICBwcm92aWRlckRhdGE6IHNlcmlhbGl6ZWRNb2RlbFJlc3BvbnNlLnByb3ZpZGVyRGF0YSxcbiAgICB9O1xufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlc2VyaWFsaXplSXRlbShzZXJpYWxpemVkSXRlbSwgYWdlbnRNYXApIHtcbiAgICBzd2l0Y2ggKHNlcmlhbGl6ZWRJdGVtLnR5cGUpIHtcbiAgICAgICAgY2FzZSAnbWVzc2FnZV9vdXRwdXRfaXRlbSc6XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJ1bk1lc3NhZ2VPdXRwdXRJdGVtKHNlcmlhbGl6ZWRJdGVtLnJhd0l0ZW0sIGFnZW50TWFwLmdldChzZXJpYWxpemVkSXRlbS5hZ2VudC5uYW1lKSk7XG4gICAgICAgIGNhc2UgJ3Rvb2xfY2FsbF9pdGVtJzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgUnVuVG9vbENhbGxJdGVtKHNlcmlhbGl6ZWRJdGVtLnJhd0l0ZW0sIGFnZW50TWFwLmdldChzZXJpYWxpemVkSXRlbS5hZ2VudC5uYW1lKSk7XG4gICAgICAgIGNhc2UgJ3Rvb2xfY2FsbF9vdXRwdXRfaXRlbSc6XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJ1blRvb2xDYWxsT3V0cHV0SXRlbShzZXJpYWxpemVkSXRlbS5yYXdJdGVtLCBhZ2VudE1hcC5nZXQoc2VyaWFsaXplZEl0ZW0uYWdlbnQubmFtZSksIHNlcmlhbGl6ZWRJdGVtLm91dHB1dCk7XG4gICAgICAgIGNhc2UgJ3JlYXNvbmluZ19pdGVtJzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgUnVuUmVhc29uaW5nSXRlbShzZXJpYWxpemVkSXRlbS5yYXdJdGVtLCBhZ2VudE1hcC5nZXQoc2VyaWFsaXplZEl0ZW0uYWdlbnQubmFtZSkpO1xuICAgICAgICBjYXNlICdoYW5kb2ZmX2NhbGxfaXRlbSc6XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJ1bkhhbmRvZmZDYWxsSXRlbShzZXJpYWxpemVkSXRlbS5yYXdJdGVtLCBhZ2VudE1hcC5nZXQoc2VyaWFsaXplZEl0ZW0uYWdlbnQubmFtZSkpO1xuICAgICAgICBjYXNlICdoYW5kb2ZmX291dHB1dF9pdGVtJzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgUnVuSGFuZG9mZk91dHB1dEl0ZW0oc2VyaWFsaXplZEl0ZW0ucmF3SXRlbSwgYWdlbnRNYXAuZ2V0KHNlcmlhbGl6ZWRJdGVtLnNvdXJjZUFnZW50Lm5hbWUpLCBhZ2VudE1hcC5nZXQoc2VyaWFsaXplZEl0ZW0udGFyZ2V0QWdlbnQubmFtZSkpO1xuICAgICAgICBjYXNlICd0b29sX2FwcHJvdmFsX2l0ZW0nOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5Ub29sQXBwcm92YWxJdGVtKHNlcmlhbGl6ZWRJdGVtLnJhd0l0ZW0sIGFnZW50TWFwLmdldChzZXJpYWxpemVkSXRlbS5hZ2VudC5uYW1lKSwgc2VyaWFsaXplZEl0ZW0udG9vbE5hbWUpO1xuICAgIH1cbn1cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGRlc2VyaWFsaXplUHJvY2Vzc2VkUmVzcG9uc2UoYWdlbnRNYXAsIGN1cnJlbnRBZ2VudCwgY29udGV4dCwgc2VyaWFsaXplZFByb2Nlc3NlZFJlc3BvbnNlKSB7XG4gICAgY29uc3QgYWxsVG9vbHMgPSBhd2FpdCBjdXJyZW50QWdlbnQuZ2V0QWxsVG9vbHMoY29udGV4dCk7XG4gICAgY29uc3QgdG9vbHMgPSBuZXcgTWFwKGFsbFRvb2xzXG4gICAgICAgIC5maWx0ZXIoKHRvb2wpID0+IHRvb2wudHlwZSA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgLm1hcCgodG9vbCkgPT4gW3Rvb2wubmFtZSwgdG9vbF0pKTtcbiAgICBjb25zdCBjb21wdXRlclRvb2xzID0gbmV3IE1hcChhbGxUb29sc1xuICAgICAgICAuZmlsdGVyKCh0b29sKSA9PiB0b29sLnR5cGUgPT09ICdjb21wdXRlcicpXG4gICAgICAgIC5tYXAoKHRvb2wpID0+IFt0b29sLm5hbWUsIHRvb2xdKSk7XG4gICAgY29uc3Qgc2hlbGxUb29scyA9IG5ldyBNYXAoYWxsVG9vbHNcbiAgICAgICAgLmZpbHRlcigodG9vbCkgPT4gdG9vbC50eXBlID09PSAnc2hlbGwnKVxuICAgICAgICAubWFwKCh0b29sKSA9PiBbdG9vbC5uYW1lLCB0b29sXSkpO1xuICAgIGNvbnN0IGFwcGx5UGF0Y2hUb29scyA9IG5ldyBNYXAoYWxsVG9vbHNcbiAgICAgICAgLmZpbHRlcigodG9vbCkgPT4gdG9vbC50eXBlID09PSAnYXBwbHlfcGF0Y2gnKVxuICAgICAgICAubWFwKCh0b29sKSA9PiBbdG9vbC5uYW1lLCB0b29sXSkpO1xuICAgIGNvbnN0IGhhbmRvZmZzID0gbmV3IE1hcChjdXJyZW50QWdlbnQuaGFuZG9mZnMubWFwKChlbnRyeSkgPT4ge1xuICAgICAgICBpZiAoZW50cnkgaW5zdGFuY2VvZiBBZ2VudCkge1xuICAgICAgICAgICAgcmV0dXJuIFtlbnRyeS5uYW1lLCBoYW5kb2ZmKGVudHJ5KV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFtlbnRyeS50b29sTmFtZSwgZW50cnldO1xuICAgIH0pKTtcbiAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgIG5ld0l0ZW1zOiBzZXJpYWxpemVkUHJvY2Vzc2VkUmVzcG9uc2UubmV3SXRlbXMubWFwKChpdGVtKSA9PiBkZXNlcmlhbGl6ZUl0ZW0oaXRlbSwgYWdlbnRNYXApKSxcbiAgICAgICAgdG9vbHNVc2VkOiBzZXJpYWxpemVkUHJvY2Vzc2VkUmVzcG9uc2UudG9vbHNVc2VkLFxuICAgICAgICBoYW5kb2Zmczogc2VyaWFsaXplZFByb2Nlc3NlZFJlc3BvbnNlLmhhbmRvZmZzLm1hcCgoaGFuZG9mZikgPT4ge1xuICAgICAgICAgICAgaWYgKCFoYW5kb2Zmcy5oYXMoaGFuZG9mZi5oYW5kb2ZmLnRvb2xOYW1lKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoYEhhbmRvZmYgJHtoYW5kb2ZmLmhhbmRvZmYudG9vbE5hbWV9IG5vdCBmb3VuZGApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0b29sQ2FsbDogaGFuZG9mZi50b29sQ2FsbCxcbiAgICAgICAgICAgICAgICBoYW5kb2ZmOiBoYW5kb2Zmcy5nZXQoaGFuZG9mZi5oYW5kb2ZmLnRvb2xOYW1lKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pLFxuICAgICAgICBmdW5jdGlvbnM6IGF3YWl0IFByb21pc2UuYWxsKHNlcmlhbGl6ZWRQcm9jZXNzZWRSZXNwb25zZS5mdW5jdGlvbnMubWFwKGFzeW5jIChmdW5jdGlvbkNhbGwpID0+IHtcbiAgICAgICAgICAgIGlmICghdG9vbHMuaGFzKGZ1bmN0aW9uQ2FsbC50b29sLm5hbWUpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcihgVG9vbCAke2Z1bmN0aW9uQ2FsbC50b29sLm5hbWV9IG5vdCBmb3VuZGApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0b29sQ2FsbDogZnVuY3Rpb25DYWxsLnRvb2xDYWxsLFxuICAgICAgICAgICAgICAgIHRvb2w6IHRvb2xzLmdldChmdW5jdGlvbkNhbGwudG9vbC5uYW1lKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pKSxcbiAgICAgICAgY29tcHV0ZXJBY3Rpb25zOiBzZXJpYWxpemVkUHJvY2Vzc2VkUmVzcG9uc2UuY29tcHV0ZXJBY3Rpb25zLm1hcCgoY29tcHV0ZXJBY3Rpb24pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRvb2xOYW1lID0gY29tcHV0ZXJBY3Rpb24uY29tcHV0ZXIubmFtZTtcbiAgICAgICAgICAgIGlmICghY29tcHV0ZXJUb29scy5oYXModG9vbE5hbWUpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcihgQ29tcHV0ZXIgdG9vbCAke3Rvb2xOYW1lfSBub3QgZm91bmRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdG9vbENhbGw6IGNvbXB1dGVyQWN0aW9uLnRvb2xDYWxsLFxuICAgICAgICAgICAgICAgIGNvbXB1dGVyOiBjb21wdXRlclRvb2xzLmdldCh0b29sTmFtZSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSxcbiAgICAgICAgc2hlbGxBY3Rpb25zOiAoc2VyaWFsaXplZFByb2Nlc3NlZFJlc3BvbnNlLnNoZWxsQWN0aW9ucyA/PyBbXSkubWFwKChzaGVsbEFjdGlvbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgdG9vbE5hbWUgPSBzaGVsbEFjdGlvbi5zaGVsbC5uYW1lO1xuICAgICAgICAgICAgaWYgKCFzaGVsbFRvb2xzLmhhcyh0b29sTmFtZSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKGBTaGVsbCB0b29sICR7dG9vbE5hbWV9IG5vdCBmb3VuZGApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0b29sQ2FsbDogc2hlbGxBY3Rpb24udG9vbENhbGwsXG4gICAgICAgICAgICAgICAgc2hlbGw6IHNoZWxsVG9vbHMuZ2V0KHRvb2xOYW1lKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pLFxuICAgICAgICBhcHBseVBhdGNoQWN0aW9uczogKHNlcmlhbGl6ZWRQcm9jZXNzZWRSZXNwb25zZS5hcHBseVBhdGNoQWN0aW9ucyA/PyBbXSkubWFwKChhcHBseVBhdGNoQWN0aW9uKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0b29sTmFtZSA9IGFwcGx5UGF0Y2hBY3Rpb24uYXBwbHlQYXRjaC5uYW1lO1xuICAgICAgICAgICAgaWYgKCFhcHBseVBhdGNoVG9vbHMuaGFzKHRvb2xOYW1lKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoYEFwcGx5IHBhdGNoIHRvb2wgJHt0b29sTmFtZX0gbm90IGZvdW5kYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRvb2xDYWxsOiBhcHBseVBhdGNoQWN0aW9uLnRvb2xDYWxsLFxuICAgICAgICAgICAgICAgIGFwcGx5UGF0Y2g6IGFwcGx5UGF0Y2hUb29scy5nZXQodG9vbE5hbWUpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSksXG4gICAgICAgIG1jcEFwcHJvdmFsUmVxdWVzdHM6IChzZXJpYWxpemVkUHJvY2Vzc2VkUmVzcG9uc2UubWNwQXBwcm92YWxSZXF1ZXN0cyA/PyBbXSkubWFwKChhcHByb3ZhbFJlcXVlc3QpID0+ICh7XG4gICAgICAgICAgICByZXF1ZXN0SXRlbTogbmV3IFJ1blRvb2xBcHByb3ZhbEl0ZW0oYXBwcm92YWxSZXF1ZXN0LnJlcXVlc3RJdGVtXG4gICAgICAgICAgICAgICAgLnJhd0l0ZW0sIGN1cnJlbnRBZ2VudCksXG4gICAgICAgICAgICBtY3BUb29sOiBhcHByb3ZhbFJlcXVlc3QubWNwVG9vbCxcbiAgICAgICAgfSkpLFxuICAgIH07XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4ucmVzdWx0LFxuICAgICAgICBoYXNUb29sc09yQXBwcm92YWxzVG9SdW4oKSB7XG4gICAgICAgICAgICByZXR1cm4gKHJlc3VsdC5oYW5kb2Zmcy5sZW5ndGggPiAwIHx8XG4gICAgICAgICAgICAgICAgcmVzdWx0LmZ1bmN0aW9ucy5sZW5ndGggPiAwIHx8XG4gICAgICAgICAgICAgICAgcmVzdWx0Lm1jcEFwcHJvdmFsUmVxdWVzdHMubGVuZ3RoID4gMCB8fFxuICAgICAgICAgICAgICAgIHJlc3VsdC5jb21wdXRlckFjdGlvbnMubGVuZ3RoID4gMCB8fFxuICAgICAgICAgICAgICAgIHJlc3VsdC5zaGVsbEFjdGlvbnMubGVuZ3RoID4gMCB8fFxuICAgICAgICAgICAgICAgIHJlc3VsdC5hcHBseVBhdGNoQWN0aW9ucy5sZW5ndGggPiAwKTtcbiAgICAgICAgfSxcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cnVuU3RhdGUubWpzLm1hcCIsIi8vIFNoYXJlZCBydW5uZXItbGV2ZWwgY29uc3RhbnRzLiBLZWVwIGJlaGF2aW9yLWFsdGVyaW5nIGRlZmF1bHRzIGluIG9uZSBwbGFjZS5cbmV4cG9ydCBjb25zdCBERUZBVUxUX01BWF9UVVJOUyA9IDEwO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29uc3RhbnRzLm1qcy5tYXAiLCJpbXBvcnQgeyBVc2VyRXJyb3IgfSBmcm9tIFwiLi4vZXJyb3JzLm1qc1wiO1xuaW1wb3J0IHsgYWRkRXJyb3JUb0N1cnJlbnRTcGFuIH0gZnJvbSBcIi4uL3RyYWNpbmcvY29udGV4dC5tanNcIjtcbmltcG9ydCB7IGJ1aWxkQWdlbnRJbnB1dFBvb2wsIGdldEFnZW50SW5wdXRJdGVtS2V5LCByZW1vdmVBZ2VudElucHV0RnJvbVBvb2wsIHRha2VBZ2VudElucHV0RnJvbVBvb2wsIHRvQWdlbnRJbnB1dExpc3QsIH0gZnJvbSBcIi4vaXRlbXMubWpzXCI7XG5leHBvcnQgeyBnZXRUdXJuSW5wdXQgfSBmcm9tIFwiLi9pdGVtcy5tanNcIjtcbi8qKlxuICogQXBwbGllcyB0aGUgb3B0aW9uYWwgY2FsbE1vZGVsSW5wdXRGaWx0ZXIgYW5kIHJldHVybnMgdGhlIGZpbHRlcmVkIGlucHV0IGFsb25nc2lkZSB0aGUgb3JpZ2luYWxcbiAqIGl0ZW1zIHNvIGRvd25zdHJlYW0gdHJhY2tpbmcgYW5kIHNlc3Npb24gcGVyc2lzdGVuY2Ugc3RheSBpbiBzeW5jIHdpdGggd2hhdCB0aGUgbW9kZWwgc2F3LlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYXBwbHlDYWxsTW9kZWxJbnB1dEZpbHRlcihhZ2VudCwgY2FsbE1vZGVsSW5wdXRGaWx0ZXIsIGNvbnRleHQsIGlucHV0SXRlbXMsIHN5c3RlbUluc3RydWN0aW9ucykge1xuICAgIGNvbnN0IGNsb25lSW5wdXRJdGVtcyA9IChpdGVtcywgbWFwKSA9PiBpdGVtcy5tYXAoKGl0ZW0pID0+IHtcbiAgICAgICAgY29uc3QgY2xvbmVkID0gc3RydWN0dXJlZENsb25lKGl0ZW0pO1xuICAgICAgICBpZiAobWFwICYmIGNsb25lZCAmJiB0eXBlb2YgY2xvbmVkID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgbWFwLnNldChjbG9uZWQsIGl0ZW0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjbG9uZWQ7XG4gICAgfSk7XG4gICAgLy8gUmVjb3JkIHRoZSByZWxhdGlvbnNoaXAgYmV0d2VlbiB0aGUgY2xvbmVkIGFycmF5IHBhc3NlZCB0byBmaWx0ZXJzIGFuZCB0aGUgb3JpZ2luYWwgaW5wdXRzLlxuICAgIGNvbnN0IGNsb25lTWFwID0gbmV3IFdlYWtNYXAoKTtcbiAgICBjb25zdCBvcmlnaW5hbFBvb2wgPSBidWlsZEFnZW50SW5wdXRQb29sKGlucHV0SXRlbXMpO1xuICAgIGNvbnN0IGZhbGxiYWNrT3JpZ2luYWxzID0gW107XG4gICAgLy8gVHJhY2sgYW55IG9yaWdpbmFsIG9iamVjdCBpbnB1dHMgc28gZmlsdGVyZWQgcmVwbGFjZW1lbnRzIGNhbiBzdGlsbCBtYXJrIHRoZW0gYXMgZGVsaXZlcmVkLlxuICAgIGZvciAoY29uc3QgaXRlbSBvZiBpbnB1dEl0ZW1zKSB7XG4gICAgICAgIGlmIChpdGVtICYmIHR5cGVvZiBpdGVtID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgZmFsbGJhY2tPcmlnaW5hbHMucHVzaChpdGVtKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCByZW1vdmVGcm9tRmFsbGJhY2sgPSAoY2FuZGlkYXRlKSA9PiB7XG4gICAgICAgIGlmICghY2FuZGlkYXRlIHx8IHR5cGVvZiBjYW5kaWRhdGUgIT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaW5kZXggPSBmYWxsYmFja09yaWdpbmFscy5maW5kSW5kZXgoKG9yaWdpbmFsKSA9PiBvcmlnaW5hbCA9PT0gY2FuZGlkYXRlKTtcbiAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgZmFsbGJhY2tPcmlnaW5hbHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgdGFrZUZhbGxiYWNrT3JpZ2luYWwgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG5leHQgPSBmYWxsYmFja09yaWdpbmFscy5zaGlmdCgpO1xuICAgICAgICBpZiAobmV4dCkge1xuICAgICAgICAgICAgcmVtb3ZlQWdlbnRJbnB1dEZyb21Qb29sKG9yaWdpbmFsUG9vbCwgbmV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgfTtcbiAgICAvLyBBbHdheXMgY3JlYXRlIGEgZGVlcCBjb3B5IHNvIGRvd25zdHJlYW0gbXV0YXRpb25zIGluc2lkZSBmaWx0ZXJzIGNhbm5vdCBhZmZlY3RcbiAgICAvLyB0aGUgY2FjaGVkIHR1cm4gc3RhdGUuXG4gICAgY29uc3QgY2xvbmVkQmFzZUlucHV0ID0gY2xvbmVJbnB1dEl0ZW1zKGlucHV0SXRlbXMsIGNsb25lTWFwKTtcbiAgICBjb25zdCBiYXNlID0ge1xuICAgICAgICBpbnB1dDogY2xvbmVkQmFzZUlucHV0LFxuICAgICAgICBpbnN0cnVjdGlvbnM6IHN5c3RlbUluc3RydWN0aW9ucyxcbiAgICB9O1xuICAgIGlmICghY2FsbE1vZGVsSW5wdXRGaWx0ZXIpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1vZGVsSW5wdXQ6IGJhc2UsXG4gICAgICAgICAgICBzb3VyY2VJdGVtczogWy4uLmlucHV0SXRlbXNdLFxuICAgICAgICAgICAgcGVyc2lzdGVkSXRlbXM6IFtdLFxuICAgICAgICAgICAgZmlsdGVyQXBwbGllZDogZmFsc2UsXG4gICAgICAgIH07XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNhbGxNb2RlbElucHV0RmlsdGVyKHtcbiAgICAgICAgICAgIG1vZGVsRGF0YTogYmFzZSxcbiAgICAgICAgICAgIGFnZW50LFxuICAgICAgICAgICAgY29udGV4dDogY29udGV4dC5jb250ZXh0LFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCFyZXN1bHQgfHwgIUFycmF5LmlzQXJyYXkocmVzdWx0LmlucHV0KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcignY2FsbE1vZGVsSW5wdXRGaWx0ZXIgbXVzdCByZXR1cm4gYSBNb2RlbElucHV0RGF0YSBvYmplY3Qgd2l0aCBhbiBpbnB1dCBhcnJheS4nKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBQcmVzZXJ2ZSBhIHBvaW50ZXIgdG8gdGhlIG9yaWdpbmFsIG9iamVjdCBiYWNraW5nIGVhY2ggZmlsdGVyZWQgY2xvbmUgc28gZG93bnN0cmVhbVxuICAgICAgICAvLyB0cmFja2VycyBjYW4ga2VlcCB0aGVpciBib29ra2VlcGluZyBjb25zaXN0ZW50IGV2ZW4gYWZ0ZXIgcmVkYWN0aW9uLlxuICAgICAgICBjb25zdCBzb3VyY2VJdGVtcyA9IHJlc3VsdC5pbnB1dC5tYXAoKGl0ZW0pID0+IHtcbiAgICAgICAgICAgIGlmICghaXRlbSB8fCB0eXBlb2YgaXRlbSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWwgPSBjbG9uZU1hcC5nZXQoaXRlbSk7XG4gICAgICAgICAgICBpZiAob3JpZ2luYWwpIHtcbiAgICAgICAgICAgICAgICByZW1vdmVGcm9tRmFsbGJhY2sob3JpZ2luYWwpO1xuICAgICAgICAgICAgICAgIHJlbW92ZUFnZW50SW5wdXRGcm9tUG9vbChvcmlnaW5hbFBvb2wsIG9yaWdpbmFsKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gb3JpZ2luYWw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBrZXkgPSBnZXRBZ2VudElucHV0SXRlbUtleShpdGVtKTtcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoZWRCeUNvbnRlbnQgPSB0YWtlQWdlbnRJbnB1dEZyb21Qb29sKG9yaWdpbmFsUG9vbCwga2V5KTtcbiAgICAgICAgICAgIGlmIChtYXRjaGVkQnlDb250ZW50KSB7XG4gICAgICAgICAgICAgICAgcmVtb3ZlRnJvbUZhbGxiYWNrKG1hdGNoZWRCeUNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBtYXRjaGVkQnlDb250ZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZmFsbGJhY2sgPSB0YWtlRmFsbGJhY2tPcmlnaW5hbCgpO1xuICAgICAgICAgICAgaWYgKGZhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbGxiYWNrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGNsb25lZEZpbHRlcmVkSW5wdXQgPSBjbG9uZUlucHV0SXRlbXMocmVzdWx0LmlucHV0KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1vZGVsSW5wdXQ6IHtcbiAgICAgICAgICAgICAgICBpbnB1dDogY2xvbmVkRmlsdGVyZWRJbnB1dCxcbiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbnM6IHR5cGVvZiByZXN1bHQuaW5zdHJ1Y3Rpb25zID09PSAndW5kZWZpbmVkJ1xuICAgICAgICAgICAgICAgICAgICA/IHN5c3RlbUluc3RydWN0aW9uc1xuICAgICAgICAgICAgICAgICAgICA6IHJlc3VsdC5pbnN0cnVjdGlvbnMsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc291cmNlSXRlbXMsXG4gICAgICAgICAgICBwZXJzaXN0ZWRJdGVtczogY2xvbmVkRmlsdGVyZWRJbnB1dC5tYXAoKGl0ZW0pID0+IHN0cnVjdHVyZWRDbG9uZShpdGVtKSksXG4gICAgICAgICAgICBmaWx0ZXJBcHBsaWVkOiB0cnVlLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgYWRkRXJyb3JUb0N1cnJlbnRTcGFuKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdFcnJvciBpbiBjYWxsTW9kZWxJbnB1dEZpbHRlcicsXG4gICAgICAgICAgICBkYXRhOiB7IGVycm9yOiBTdHJpbmcoZXJyb3IpIH0sXG4gICAgICAgIH0pO1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG59XG4vKipcbiAqIFRyYWNrcyB3aGljaCBpdGVtcyBoYXZlIGFscmVhZHkgYmVlbiBzZW50IHRvIG9yIHJlY2VpdmVkIGZyb20gdGhlIFJlc3BvbnNlcyBBUEkgd2hlbiB0aGUgY2FsbGVyXG4gKiBzdXBwbGllcyBgY29udmVyc2F0aW9uSWRgL2BwcmV2aW91c1Jlc3BvbnNlSWRgLiBUaGlzIGVuc3VyZXMgd2Ugb25seSBzZW5kIHRoZSBkZWx0YSBlYWNoIHR1cm4uXG4gKi9cbmV4cG9ydCBjbGFzcyBTZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyIHtcbiAgICBjb252ZXJzYXRpb25JZDtcbiAgICBwcmV2aW91c1Jlc3BvbnNlSWQ7XG4gICAgLy8gVXNpbmcgdGhpcyBmbGFnIGJlY2F1c2UgV2Vha1NldCBkb2VzIG5vdCBwcm92aWRlIGEgd2F5IHRvIGNoZWNrIGl0cyBzaXplLlxuICAgIHNlbnRJbml0aWFsSW5wdXQgPSBmYWxzZTtcbiAgICAvLyBUaGUgaXRlbXMgYWxyZWFkeSBzZW50IHRvIHRoZSBtb2RlbDsgdXNpbmcgV2Vha1NldCBmb3IgbWVtb3J5IGVmZmljaWVuY3kuXG4gICAgc2VudEl0ZW1zID0gbmV3IFdlYWtTZXQoKTtcbiAgICAvLyBUaGUgaXRlbXMgcmVjZWl2ZWQgZnJvbSB0aGUgc2VydmVyOyB1c2luZyBXZWFrU2V0IGZvciBtZW1vcnkgZWZmaWNpZW5jeS5cbiAgICBzZXJ2ZXJJdGVtcyA9IG5ldyBXZWFrU2V0KCk7XG4gICAgLy8gVHJhY2sgaW5pdGlhbCBpbnB1dCBpdGVtcyB0aGF0IGhhdmUgbm90IHlldCBiZWVuIHNlbnQgc28gdGhleSBjYW4gYmUgcmV0cmllZCBvbiBsYXRlciB0dXJucy5cbiAgICByZW1haW5pbmdJbml0aWFsSW5wdXQgPSBudWxsO1xuICAgIGNvbnN0cnVjdG9yKHsgY29udmVyc2F0aW9uSWQsIHByZXZpb3VzUmVzcG9uc2VJZCwgfSkge1xuICAgICAgICB0aGlzLmNvbnZlcnNhdGlvbklkID0gY29udmVyc2F0aW9uSWQgPz8gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnByZXZpb3VzUmVzcG9uc2VJZCA9IHByZXZpb3VzUmVzcG9uc2VJZCA/PyB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByZS1wb3B1bGF0ZXMgdHJhY2tlciBjYWNoZXMgZnJvbSBhbiBleGlzdGluZyBSdW5TdGF0ZSB3aGVuIHJlc3VtaW5nIHNlcnZlci1tYW5hZ2VkIHJ1bnMuXG4gICAgICovXG4gICAgcHJpbWVGcm9tU3RhdGUoeyBvcmlnaW5hbElucHV0LCBnZW5lcmF0ZWRJdGVtcywgbW9kZWxSZXNwb25zZXMsIH0pIHtcbiAgICAgICAgaWYgKHRoaXMuc2VudEluaXRpYWxJbnB1dCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG9yaWdpbmFsSXRlbXMgPSB0b0FnZW50SW5wdXRMaXN0KG9yaWdpbmFsSW5wdXQpO1xuICAgICAgICBjb25zdCBoYXNSZXNwb25zZXMgPSBtb2RlbFJlc3BvbnNlcy5sZW5ndGggPiAwO1xuICAgICAgICBjb25zdCBzZXJ2ZXJJdGVtS2V5cyA9IG5ldyBTZXQoKTtcbiAgICAgICAgZm9yIChjb25zdCByZXNwb25zZSBvZiBtb2RlbFJlc3BvbnNlcykge1xuICAgICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHJlc3BvbnNlLm91dHB1dCkge1xuICAgICAgICAgICAgICAgIGlmIChpdGVtICYmIHR5cGVvZiBpdGVtID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlcnZlckl0ZW1zLmFkZChpdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgc2VydmVySXRlbUtleXMuYWRkKGdldEFnZW50SW5wdXRJdGVtS2V5KGl0ZW0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhhc1Jlc3BvbnNlcykge1xuICAgICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIG9yaWdpbmFsSXRlbXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbSAmJiB0eXBlb2YgaXRlbSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZW50SXRlbXMuYWRkKGl0ZW0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2VudEluaXRpYWxJbnB1dCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnJlbWFpbmluZ0luaXRpYWxJbnB1dCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbGF0ZXN0UmVzcG9uc2UgPSBtb2RlbFJlc3BvbnNlc1ttb2RlbFJlc3BvbnNlcy5sZW5ndGggLSAxXTtcbiAgICAgICAgaWYgKCF0aGlzLmNvbnZlcnNhdGlvbklkICYmIGxhdGVzdFJlc3BvbnNlPy5yZXNwb25zZUlkKSB7XG4gICAgICAgICAgICB0aGlzLnByZXZpb3VzUmVzcG9uc2VJZCA9IGxhdGVzdFJlc3BvbnNlLnJlc3BvbnNlSWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhhc1Jlc3BvbnNlcykge1xuICAgICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGdlbmVyYXRlZEl0ZW1zKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmF3SXRlbSA9IGl0ZW0ucmF3SXRlbTtcbiAgICAgICAgICAgICAgICBpZiAoIXJhd0l0ZW0gfHwgdHlwZW9mIHJhd0l0ZW0gIT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCByYXdJdGVtS2V5ID0gZ2V0QWdlbnRJbnB1dEl0ZW1LZXkocmF3SXRlbSk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VydmVySXRlbXMuaGFzKHJhd0l0ZW0pIHx8IHNlcnZlckl0ZW1LZXlzLmhhcyhyYXdJdGVtS2V5KSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbnRJdGVtcy5hZGQocmF3SXRlbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlY29yZHMgdGhlIHJhdyBpdGVtcyByZXR1cm5lZCBieSB0aGUgc2VydmVyIHNvIGZ1dHVyZSBkZWx0YSBjYWxjdWxhdGlvbnMgc2tpcCB0aGVtLlxuICAgICAqIEFsc28gY2FwdHVyZXMgdGhlIGxhdGVzdCByZXNwb25zZSBpZGVudGlmaWVyIHRvIGNoYWluIGZvbGxvdy11cCBjYWxscyB3aGVuIHBvc3NpYmxlLlxuICAgICAqL1xuICAgIHRyYWNrU2VydmVySXRlbXMobW9kZWxSZXNwb25zZSkge1xuICAgICAgICBpZiAoIW1vZGVsUmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgbW9kZWxSZXNwb25zZS5vdXRwdXQpIHtcbiAgICAgICAgICAgIGlmIChpdGVtICYmIHR5cGVvZiBpdGVtID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VydmVySXRlbXMuYWRkKGl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5jb252ZXJzYXRpb25JZCAmJiBtb2RlbFJlc3BvbnNlLnJlc3BvbnNlSWQpIHtcbiAgICAgICAgICAgIHRoaXMucHJldmlvdXNSZXNwb25zZUlkID0gbW9kZWxSZXNwb25zZS5yZXNwb25zZUlkO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIG1pbmltdW0gc2V0IG9mIGl0ZW1zIHRoYXQgc3RpbGwgbmVlZCB0byBiZSBkZWxpdmVyZWQgdG8gdGhlIHNlcnZlciBmb3IgdGhlXG4gICAgICogY3VycmVudCB0dXJuLiBUaGlzIGluY2x1ZGVzIHRoZSBvcmlnaW5hbCB0dXJuIGlucHV0cyAodW50aWwgYWNrbm93bGVkZ2VkKSBwbHVzIGFueVxuICAgICAqIG5ld2x5IGdlbmVyYXRlZCBpdGVtcyB0aGF0IGhhdmUgbm90IHlldCBiZWVuIGVjaG9lZCBiYWNrIGJ5IHRoZSBBUEkuXG4gICAgICovXG4gICAgcHJlcGFyZUlucHV0KG9yaWdpbmFsSW5wdXQsIGdlbmVyYXRlZEl0ZW1zKSB7XG4gICAgICAgIGNvbnN0IGlucHV0SXRlbXMgPSBbXTtcbiAgICAgICAgaWYgKCF0aGlzLnNlbnRJbml0aWFsSW5wdXQpIHtcbiAgICAgICAgICAgIGNvbnN0IGluaXRpYWxJdGVtcyA9IHRvQWdlbnRJbnB1dExpc3Qob3JpZ2luYWxJbnB1dCk7XG4gICAgICAgICAgICAvLyBQcmVzZXJ2ZSB0aGUgZnVsbCBpbml0aWFsIHBheWxvYWQgc28gYSBmaWx0ZXIgY2FuIGRyb3AgaXRlbXMgd2l0aG91dCBsb3NpbmcgdGhlaXIgb3JpZ2luYWxzLlxuICAgICAgICAgICAgaW5wdXRJdGVtcy5wdXNoKC4uLmluaXRpYWxJdGVtcyk7XG4gICAgICAgICAgICB0aGlzLnJlbWFpbmluZ0luaXRpYWxJbnB1dCA9IGluaXRpYWxJdGVtcy5maWx0ZXIoKGl0ZW0pID0+IEJvb2xlYW4oaXRlbSkgJiYgdHlwZW9mIGl0ZW0gPT09ICdvYmplY3QnKTtcbiAgICAgICAgICAgIHRoaXMuc2VudEluaXRpYWxJbnB1dCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5yZW1haW5pbmdJbml0aWFsSW5wdXQgJiZcbiAgICAgICAgICAgIHRoaXMucmVtYWluaW5nSW5pdGlhbElucHV0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIC8vIFJlLXF1ZXVlIHByaW9yIGluaXRpYWwgaXRlbXMgdW50aWwgdGhlIHRyYWNrZXIgY29uZmlybXMgdGhleSB3ZXJlIGRlbGl2ZXJlZCB0byB0aGUgQVBJLlxuICAgICAgICAgICAgaW5wdXRJdGVtcy5wdXNoKC4uLnRoaXMucmVtYWluaW5nSW5pdGlhbElucHV0KTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZ2VuZXJhdGVkSXRlbXMpIHtcbiAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICd0b29sX2FwcHJvdmFsX2l0ZW0nKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByYXdJdGVtID0gaXRlbS5yYXdJdGVtO1xuICAgICAgICAgICAgaWYgKCFyYXdJdGVtIHx8IHR5cGVvZiByYXdJdGVtICE9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuc2VudEl0ZW1zLmhhcyhyYXdJdGVtKSB8fCB0aGlzLnNlcnZlckl0ZW1zLmhhcyhyYXdJdGVtKSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW5wdXRJdGVtcy5wdXNoKHJhd0l0ZW0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbnB1dEl0ZW1zO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNYXJrcyB0aGUgcHJvdmlkZWQgb3JpZ2luYWxzIGFzIGRlbGl2ZXJlZCBzbyBmdXR1cmUgdHVybnMgZG8gbm90IHJlc2VuZCB0aGVtIGFuZCBhbnlcbiAgICAgKiBwZW5kaW5nIGluaXRpYWwgaW5wdXRzIGNhbiBiZSBkcm9wcGVkIG9uY2UgdGhlIHNlcnZlciBhY2tub3dsZWRnZXMgcmVjZWlwdC5cbiAgICAgKi9cbiAgICBtYXJrSW5wdXRBc1NlbnQoaXRlbXMsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgZGVsaXZlcmVkID0gbmV3IFNldCgpO1xuICAgICAgICBjb25zdCBkcm9wUmVtYWluaW5nSW5pdGlhbElucHV0ID0gb3B0aW9ucz8uZmlsdGVyQXBwbGllZCA/PyBmYWxzZTtcbiAgICAgICAgY29uc3QgbWFya0ZpbHRlcmVkSXRlbXNBc1NlbnQgPSBvcHRpb25zPy5maWx0ZXJBcHBsaWVkICYmIEJvb2xlYW4ob3B0aW9ucy5hbGxUdXJuSXRlbXMpO1xuICAgICAgICB0aGlzLmFkZERlbGl2ZXJlZEl0ZW1zKGRlbGl2ZXJlZCwgaXRlbXMpO1xuICAgICAgICBjb25zdCBhbGxUdXJuSXRlbXMgPSBvcHRpb25zPy5hbGxUdXJuSXRlbXM7XG4gICAgICAgIGlmIChtYXJrRmlsdGVyZWRJdGVtc0FzU2VudCAmJiBhbGxUdXJuSXRlbXMpIHtcbiAgICAgICAgICAgIHRoaXMuYWRkRGVsaXZlcmVkSXRlbXMoZGVsaXZlcmVkLCBhbGxUdXJuSXRlbXMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudXBkYXRlUmVtYWluaW5nSW5pdGlhbElucHV0KGRlbGl2ZXJlZCwgQm9vbGVhbihkcm9wUmVtYWluaW5nSW5pdGlhbElucHV0KSk7XG4gICAgfVxuICAgIGFkZERlbGl2ZXJlZEl0ZW1zKGRlbGl2ZXJlZCwgaXRlbXMpIHtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgICAgICAgICBpZiAoIWl0ZW0gfHwgdHlwZW9mIGl0ZW0gIT09ICdvYmplY3QnIHx8IGRlbGl2ZXJlZC5oYXMoaXRlbSkpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFNvbWUgaW5wdXRzIG1heSBiZSByZXBlYXRlZCBpbiB0aGUgZmlsdGVyZWQgbGlzdDsgb25seSBtYXJrIHVuaXF1ZSBvcmlnaW5hbHMgb25jZS5cbiAgICAgICAgICAgIGRlbGl2ZXJlZC5hZGQoaXRlbSk7XG4gICAgICAgICAgICB0aGlzLnNlbnRJdGVtcy5hZGQoaXRlbSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlUmVtYWluaW5nSW5pdGlhbElucHV0KGRlbGl2ZXJlZCwgZHJvcFJlbWFpbmluZ0luaXRpYWxJbnB1dCkge1xuICAgICAgICBpZiAoIXRoaXMucmVtYWluaW5nSW5pdGlhbElucHV0IHx8XG4gICAgICAgICAgICB0aGlzLnJlbWFpbmluZ0luaXRpYWxJbnB1dC5sZW5ndGggPT09IDAgfHxcbiAgICAgICAgICAgIGRlbGl2ZXJlZC5zaXplID09PSAwKSB7XG4gICAgICAgICAgICBpZiAoZHJvcFJlbWFpbmluZ0luaXRpYWxJbnB1dCAmJiB0aGlzLnJlbWFpbmluZ0luaXRpYWxJbnB1dCkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtYWluaW5nSW5pdGlhbElucHV0ID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbWFpbmluZ0luaXRpYWxJbnB1dCA9IHRoaXMucmVtYWluaW5nSW5pdGlhbElucHV0LmZpbHRlcigoaXRlbSkgPT4gIWRlbGl2ZXJlZC5oYXMoaXRlbSkpO1xuICAgICAgICBpZiAodGhpcy5yZW1haW5pbmdJbml0aWFsSW5wdXQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLnJlbWFpbmluZ0luaXRpYWxJbnB1dCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZHJvcFJlbWFpbmluZ0luaXRpYWxJbnB1dCkge1xuICAgICAgICAgICAgdGhpcy5yZW1haW5pbmdJbml0aWFsSW5wdXQgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29udmVyc2F0aW9uLm1qcy5tYXAiLCJpbXBvcnQgeyBHdWFyZHJhaWxFeGVjdXRpb25FcnJvciwgSW5wdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCwgT3V0cHV0R3VhcmRyYWlsVHJpcHdpcmVUcmlnZ2VyZWQsIH0gZnJvbSBcIi4uL2Vycm9ycy5tanNcIjtcbmltcG9ydCB7IGRlZmluZUlucHV0R3VhcmRyYWlsLCBkZWZpbmVPdXRwdXRHdWFyZHJhaWwsIH0gZnJvbSBcIi4uL2d1YXJkcmFpbC5tanNcIjtcbmltcG9ydCB7IGdldFR1cm5JbnB1dCB9IGZyb20gXCIuL2l0ZW1zLm1qc1wiO1xuaW1wb3J0IHsgd2l0aEd1YXJkcmFpbFNwYW4gfSBmcm9tIFwiLi4vdHJhY2luZy9pbmRleC5tanNcIjtcbmV4cG9ydCBjb25zdCBjcmVhdGVHdWFyZHJhaWxUcmFja2VyID0gKCkgPT4ge1xuICAgIGxldCBwZW5kaW5nID0gZmFsc2U7XG4gICAgbGV0IGZhaWxlZCA9IGZhbHNlO1xuICAgIGxldCBlcnJvciA9IHVuZGVmaW5lZDtcbiAgICBsZXQgcHJvbWlzZTtcbiAgICBjb25zdCBzZXRFcnJvciA9IChlcnIpID0+IHtcbiAgICAgICAgZmFpbGVkID0gdHJ1ZTtcbiAgICAgICAgZXJyb3IgPSBlcnI7XG4gICAgICAgIHBlbmRpbmcgPSBmYWxzZTtcbiAgICB9O1xuICAgIGNvbnN0IHNldFByb21pc2UgPSAoaW5jb21pbmcpID0+IHtcbiAgICAgICAgaWYgKCFpbmNvbWluZykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHBlbmRpbmcgPSB0cnVlO1xuICAgICAgICBwcm9taXNlID0gaW5jb21pbmdcbiAgICAgICAgICAgIC50aGVuKChyZXN1bHRzKSA9PiByZXN1bHRzKVxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgIHNldEVycm9yKGVycik7XG4gICAgICAgICAgICAvLyBTd2FsbG93IHRvIGtlZXAgZG93bnN0cmVhbSBmbG93IGNvbnNpc3RlbnQ7IGZhaWx1cmUgaXMgc2lnbmFsZWQgdmlhIGBmYWlsZWRgLlxuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICAgICAgcGVuZGluZyA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIGNvbnN0IHRocm93SWZFcnJvciA9ICgpID0+IHtcbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgYXdhaXRDb21wbGV0aW9uID0gYXN5bmMgKG9wdGlvbnMpID0+IHtcbiAgICAgICAgaWYgKHByb21pc2UpIHtcbiAgICAgICAgICAgIGF3YWl0IHByb21pc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVycm9yICYmICFvcHRpb25zPy5zdXBwcmVzc0Vycm9ycykge1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiB7XG4gICAgICAgIGdldCBwZW5kaW5nKCkge1xuICAgICAgICAgICAgcmV0dXJuIHBlbmRpbmc7XG4gICAgICAgIH0sXG4gICAgICAgIGdldCBmYWlsZWQoKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFpbGVkO1xuICAgICAgICB9LFxuICAgICAgICBnZXQgZXJyb3IoKSB7XG4gICAgICAgICAgICByZXR1cm4gZXJyb3I7XG4gICAgICAgIH0sXG4gICAgICAgIG1hcmtQZW5kaW5nOiAoKSA9PiB7XG4gICAgICAgICAgICBwZW5kaW5nID0gdHJ1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0UHJvbWlzZSxcbiAgICAgICAgc2V0RXJyb3IsXG4gICAgICAgIHRocm93SWZFcnJvcixcbiAgICAgICAgYXdhaXRDb21wbGV0aW9uLFxuICAgIH07XG59O1xuYXN5bmMgZnVuY3Rpb24gcnVuR3VhcmRyYWlsc1dpdGhUcmlwd2lyZShvcHRpb25zKSB7XG4gICAgY29uc3QgeyBzdGF0ZSwgZ3VhcmRyYWlscywgZ3VhcmRyYWlsQXJncywgcmVzdWx0c1RhcmdldCwgb25Ucmlwd2lyZSwgaXNUcmlwd2lyZUVycm9yLCBvbkVycm9yLCB9ID0gb3B0aW9ucztcbiAgICB0cnkge1xuICAgICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwoZ3VhcmRyYWlscy5tYXAoYXN5bmMgKGd1YXJkcmFpbCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHdpdGhHdWFyZHJhaWxTcGFuKGFzeW5jIChzcGFuKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ3VhcmRyYWlsLnJ1bihndWFyZHJhaWxBcmdzKTtcbiAgICAgICAgICAgICAgICBzcGFuLnNwYW5EYXRhLnRyaWdnZXJlZCA9IHJlc3VsdC5vdXRwdXQudHJpcHdpcmVUcmlnZ2VyZWQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH0sIHsgZGF0YTogeyBuYW1lOiBndWFyZHJhaWwubmFtZSB9IH0sIHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKTtcbiAgICAgICAgfSkpO1xuICAgICAgICByZXN1bHRzVGFyZ2V0LnB1c2goLi4ucmVzdWx0cyk7XG4gICAgICAgIGZvciAoY29uc3QgcmVzdWx0IG9mIHJlc3VsdHMpIHtcbiAgICAgICAgICAgIGlmIChyZXN1bHQub3V0cHV0LnRyaXB3aXJlVHJpZ2dlcmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuLnNldEVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdHdWFyZHJhaWwgdHJpcHdpcmUgdHJpZ2dlcmVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgZ3VhcmRyYWlsOiByZXN1bHQuZ3VhcmRyYWlsLm5hbWUgfSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG9uVHJpcHdpcmUocmVzdWx0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGlmIChpc1RyaXB3aXJlRXJyb3IoZXJyb3IpKSB7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgICAgICBvbkVycm9yKGVycm9yKTtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBidWlsZElucHV0R3VhcmRyYWlsRGVmaW5pdGlvbnMoc3RhdGUsIHJ1bm5lckd1YXJkcmFpbHMpIHtcbiAgICByZXR1cm4gcnVubmVyR3VhcmRyYWlscy5jb25jYXQoc3RhdGUuX2N1cnJlbnRBZ2VudC5pbnB1dEd1YXJkcmFpbHMubWFwKGRlZmluZUlucHV0R3VhcmRyYWlsKSk7XG59XG5leHBvcnQgZnVuY3Rpb24gc3BsaXRJbnB1dEd1YXJkcmFpbHMoZ3VhcmRyYWlscykge1xuICAgIGNvbnN0IGJsb2NraW5nID0gW107XG4gICAgY29uc3QgcGFyYWxsZWwgPSBbXTtcbiAgICBmb3IgKGNvbnN0IGd1YXJkcmFpbCBvZiBndWFyZHJhaWxzKSB7XG4gICAgICAgIGlmIChndWFyZHJhaWwucnVuSW5QYXJhbGxlbCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGJsb2NraW5nLnB1c2goZ3VhcmRyYWlsKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHBhcmFsbGVsLnB1c2goZ3VhcmRyYWlsKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4geyBibG9ja2luZywgcGFyYWxsZWwgfTtcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBydW5JbnB1dEd1YXJkcmFpbHMoc3RhdGUsIGd1YXJkcmFpbHMpIHtcbiAgICBpZiAoZ3VhcmRyYWlscy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICBjb25zdCBndWFyZHJhaWxBcmdzID0ge1xuICAgICAgICBhZ2VudDogc3RhdGUuX2N1cnJlbnRBZ2VudCxcbiAgICAgICAgaW5wdXQ6IHN0YXRlLl9vcmlnaW5hbElucHV0LFxuICAgICAgICBjb250ZXh0OiBzdGF0ZS5fY29udGV4dCxcbiAgICB9O1xuICAgIHJldHVybiBhd2FpdCBydW5HdWFyZHJhaWxzV2l0aFRyaXB3aXJlKHtcbiAgICAgICAgc3RhdGUsXG4gICAgICAgIGd1YXJkcmFpbHMsXG4gICAgICAgIGd1YXJkcmFpbEFyZ3MsXG4gICAgICAgIHJlc3VsdHNUYXJnZXQ6IHN0YXRlLl9pbnB1dEd1YXJkcmFpbFJlc3VsdHMsXG4gICAgICAgIG9uVHJpcHdpcmU6IChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkKGBJbnB1dCBndWFyZHJhaWwgdHJpZ2dlcmVkOiAke0pTT04uc3RyaW5naWZ5KHJlc3VsdC5vdXRwdXQub3V0cHV0SW5mbyl9YCwgcmVzdWx0LCBzdGF0ZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGlzVHJpcHdpcmVFcnJvcjogKGVycm9yKSA9PiBlcnJvciBpbnN0YW5jZW9mIElucHV0R3VhcmRyYWlsVHJpcHdpcmVUcmlnZ2VyZWQsXG4gICAgICAgIG9uRXJyb3I6IChlcnJvcikgPT4ge1xuICAgICAgICAgICAgLy8gcm9sbCBiYWNrIHRoZSBjdXJyZW50IHR1cm4gdG8gZW5hYmxlIHJlcnVuc1xuICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRUdXJuLS07XG4gICAgICAgICAgICB0aHJvdyBuZXcgR3VhcmRyYWlsRXhlY3V0aW9uRXJyb3IoYElucHV0IGd1YXJkcmFpbCBmYWlsZWQgdG8gY29tcGxldGU6ICR7ZXJyb3J9YCwgZXJyb3IsIHN0YXRlKTtcbiAgICAgICAgfSxcbiAgICB9KTtcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBydW5PdXRwdXRHdWFyZHJhaWxzKHN0YXRlLCBydW5uZXJPdXRwdXRHdWFyZHJhaWxzLCBvdXRwdXQpIHtcbiAgICBjb25zdCBndWFyZHJhaWxzID0gcnVubmVyT3V0cHV0R3VhcmRyYWlscy5jb25jYXQoc3RhdGUuX2N1cnJlbnRBZ2VudC5vdXRwdXRHdWFyZHJhaWxzLm1hcChkZWZpbmVPdXRwdXRHdWFyZHJhaWwpKTtcbiAgICBpZiAoZ3VhcmRyYWlscy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBhZ2VudE91dHB1dCA9IHN0YXRlLl9jdXJyZW50QWdlbnQucHJvY2Vzc0ZpbmFsT3V0cHV0KG91dHB1dCk7XG4gICAgY29uc3QgcnVuT3V0cHV0ID0gZ2V0VHVybklucHV0KFtdLCBzdGF0ZS5fZ2VuZXJhdGVkSXRlbXMpO1xuICAgIGNvbnN0IGd1YXJkcmFpbEFyZ3MgPSB7XG4gICAgICAgIGFnZW50OiBzdGF0ZS5fY3VycmVudEFnZW50LFxuICAgICAgICBhZ2VudE91dHB1dCxcbiAgICAgICAgY29udGV4dDogc3RhdGUuX2NvbnRleHQsXG4gICAgICAgIGRldGFpbHM6IHtcbiAgICAgICAgICAgIG1vZGVsUmVzcG9uc2U6IHN0YXRlLl9sYXN0VHVyblJlc3BvbnNlLFxuICAgICAgICAgICAgb3V0cHV0OiBydW5PdXRwdXQsXG4gICAgICAgIH0sXG4gICAgfTtcbiAgICBhd2FpdCBydW5HdWFyZHJhaWxzV2l0aFRyaXB3aXJlKHtcbiAgICAgICAgc3RhdGUsXG4gICAgICAgIGd1YXJkcmFpbHMsXG4gICAgICAgIGd1YXJkcmFpbEFyZ3MsXG4gICAgICAgIHJlc3VsdHNUYXJnZXQ6IHN0YXRlLl9vdXRwdXRHdWFyZHJhaWxSZXN1bHRzLFxuICAgICAgICBvblRyaXB3aXJlOiAocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT3V0cHV0R3VhcmRyYWlsVHJpcHdpcmVUcmlnZ2VyZWQoYE91dHB1dCBndWFyZHJhaWwgdHJpZ2dlcmVkOiAke0pTT04uc3RyaW5naWZ5KHJlc3VsdC5vdXRwdXQub3V0cHV0SW5mbyl9YCwgcmVzdWx0LCBzdGF0ZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGlzVHJpcHdpcmVFcnJvcjogKGVycm9yKSA9PiBlcnJvciBpbnN0YW5jZW9mIE91dHB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkLFxuICAgICAgICBvbkVycm9yOiAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIHRocm93IG5ldyBHdWFyZHJhaWxFeGVjdXRpb25FcnJvcihgT3V0cHV0IGd1YXJkcmFpbCBmYWlsZWQgdG8gY29tcGxldGU6ICR7ZXJyb3J9YCwgZXJyb3IsIHN0YXRlKTtcbiAgICAgICAgfSxcbiAgICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWd1YXJkcmFpbHMubWpzLm1hcCIsImltcG9ydCB7IEFnZW50IH0gZnJvbSBcIi4uL2FnZW50Lm1qc1wiO1xuaW1wb3J0IHsgZ3B0NVJlYXNvbmluZ1NldHRpbmdzUmVxdWlyZWQsIGlzR3B0NURlZmF1bHQgfSBmcm9tIFwiLi4vZGVmYXVsdE1vZGVsLm1qc1wiO1xuY29uc3QgaGFzR3B0NU9ubHlTZXR0aW5ncyA9IChzZXR0aW5ncykgPT4ge1xuICAgIGNvbnN0IHByb3ZpZGVyRGF0YSA9IHNldHRpbmdzPy5wcm92aWRlckRhdGE7XG4gICAgcmV0dXJuIEJvb2xlYW4ocHJvdmlkZXJEYXRhPy5yZWFzb25pbmcgfHxcbiAgICAgICAgcHJvdmlkZXJEYXRhPy50ZXh0Py52ZXJib3NpdHkgfHxcbiAgICAgICAgcHJvdmlkZXJEYXRhXG4gICAgICAgICAgICA/LnJlYXNvbmluZ19lZmZvcnQpO1xufTtcbi8qKlxuICogUmVzb2x2ZXMgdGhlIGVmZmVjdGl2ZSBtb2RlbCBmb3IgdGhlIG5leHQgdHVybiBieSBnaXZpbmcgcHJlY2VkZW5jZSB0byB0aGUgYWdlbnQtc3BlY2lmaWNcbiAqIGNvbmZpZ3VyYXRpb24gd2hlbiBwcmVzZW50LCBvdGhlcndpc2UgZmFsbGluZyBiYWNrIHRvIHRoZSBydW5uZXItbGV2ZWwgZGVmYXVsdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNlbGVjdE1vZGVsKGFnZW50TW9kZWwsIHJ1bkNvbmZpZ01vZGVsKSB7XG4gICAgaWYgKCh0eXBlb2YgYWdlbnRNb2RlbCA9PT0gJ3N0cmluZycgJiZcbiAgICAgICAgYWdlbnRNb2RlbCAhPT0gQWdlbnQuREVGQVVMVF9NT0RFTF9QTEFDRUhPTERFUikgfHxcbiAgICAgICAgYWdlbnRNb2RlbCkge1xuICAgICAgICByZXR1cm4gYWdlbnRNb2RlbDtcbiAgICB9XG4gICAgcmV0dXJuIHJ1bkNvbmZpZ01vZGVsID8/IGFnZW50TW9kZWwgPz8gQWdlbnQuREVGQVVMVF9NT0RFTF9QTEFDRUhPTERFUjtcbn1cbi8qKlxuICogUmVzZXRzIHRoZSB0b29sIGNob2ljZSB3aGVuIHRoZSBhZ2VudCBpcyBjb25maWd1cmVkIHRvIHByZWZlciBhIGZyZXNoIHRvb2wgc2VsZWN0aW9uIGFmdGVyXG4gKiBhbnkgdG9vbCB1c2FnZS4gVGhpcyBwcmV2ZW50cyB0aGUgcHJvdmlkZXIgZnJvbSByZXVzaW5nIHN0YWxlIHRvb2wgaGludHMgYWNyb3NzIHR1cm5zLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbWF5YmVSZXNldFRvb2xDaG9pY2UoYWdlbnQsIHRvb2xVc2VUcmFja2VyLCBtb2RlbFNldHRpbmdzKSB7XG4gICAgaWYgKGFnZW50LnJlc2V0VG9vbENob2ljZSAmJiB0b29sVXNlVHJhY2tlci5oYXNVc2VkVG9vbHMoYWdlbnQpKSB7XG4gICAgICAgIHJldHVybiB7IC4uLm1vZGVsU2V0dGluZ3MsIHRvb2xDaG9pY2U6IHVuZGVmaW5lZCB9O1xuICAgIH1cbiAgICByZXR1cm4gbW9kZWxTZXR0aW5ncztcbn1cbi8qKlxuICogV2hlbiB0aGUgZGVmYXVsdCBtb2RlbCBpcyBhIEdQVC01IHZhcmlhbnQsIGFnZW50cyBtYXkgY2FycnkgR1BULTUtc3BlY2lmaWMgcHJvdmlkZXJEYXRhXG4gKiAoZS5nLiwgcmVhc29uaW5nIGVmZm9ydCwgdGV4dCB2ZXJib3NpdHkpLiBJZiBhIHJ1biByZXNvbHZlcyB0byBhIG5vbi1HUFQtNSBtb2RlbCBhbmQgdGhlXG4gKiBhZ2VudCByZWxpZWQgb24gdGhlIGRlZmF1bHQgbW9kZWwgKGkuZS4sIG5vIGV4cGxpY2l0IG1vZGVsIHNldCksIHRoZXNlIEdQVC01LW9ubHkgc2V0dGluZ3NcbiAqIGFyZSBpbmNvbXBhdGlibGUgYW5kIHNob3VsZCBiZSBzdHJpcHBlZCB0byBhdm9pZCBydW50aW1lIGVycm9ycy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkanVzdE1vZGVsU2V0dGluZ3NGb3JOb25HUFQ1UnVubmVyTW9kZWwoZXhwbGljdGx5TW9kZWxTZXQsIGFnZW50TW9kZWxTZXR0aW5ncywgcnVubmVyTW9kZWwsIG1vZGVsU2V0dGluZ3MsIHJlc29sdmVkTW9kZWxOYW1lKSB7XG4gICAgY29uc3QgbW9kZWxOYW1lID0gcmVzb2x2ZWRNb2RlbE5hbWUgPz9cbiAgICAgICAgKHR5cGVvZiBydW5uZXJNb2RlbCA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgID8gcnVubmVyTW9kZWxcbiAgICAgICAgICAgIDogKHJ1bm5lck1vZGVsXG4gICAgICAgICAgICAgICAgPy5tb2RlbCA/PyBydW5uZXJNb2RlbD8ubmFtZSkpO1xuICAgIGNvbnN0IGlzTm9uR3B0NVJ1bm5lck1vZGVsID0gdHlwZW9mIG1vZGVsTmFtZSA9PT0gJ3N0cmluZydcbiAgICAgICAgPyAhZ3B0NVJlYXNvbmluZ1NldHRpbmdzUmVxdWlyZWQobW9kZWxOYW1lKVxuICAgICAgICA6IHRydWU7XG4gICAgY29uc3QgaGFzR3B0NURlZmF1bHRzID0gaGFzR3B0NU9ubHlTZXR0aW5ncyhhZ2VudE1vZGVsU2V0dGluZ3MpIHx8XG4gICAgICAgIGhhc0dwdDVPbmx5U2V0dGluZ3MobW9kZWxTZXR0aW5ncyk7XG4gICAgaWYgKGlzR3B0NURlZmF1bHQoKSAmJlxuICAgICAgICBleHBsaWN0bHlNb2RlbFNldCAmJlxuICAgICAgICBpc05vbkdwdDVSdW5uZXJNb2RlbCAmJlxuICAgICAgICBoYXNHcHQ1RGVmYXVsdHMpIHtcbiAgICAgICAgcmV0dXJuIHN0cmlwR3B0NU9ubHlTZXR0aW5ncyhtb2RlbFNldHRpbmdzKTtcbiAgICB9XG4gICAgcmV0dXJuIG1vZGVsU2V0dGluZ3M7XG59XG5mdW5jdGlvbiBzdHJpcEdwdDVPbmx5U2V0dGluZ3MobW9kZWxTZXR0aW5ncykge1xuICAgIGNvbnN0IGNvcGllZFByb3ZpZGVyRGF0YSA9IG1vZGVsU2V0dGluZ3MucHJvdmlkZXJEYXRhXG4gICAgICAgID8geyAuLi5tb2RlbFNldHRpbmdzLnByb3ZpZGVyRGF0YSB9XG4gICAgICAgIDogdW5kZWZpbmVkO1xuICAgIGlmIChjb3BpZWRQcm92aWRlckRhdGEpIHtcbiAgICAgICAgaWYgKGNvcGllZFByb3ZpZGVyRGF0YS50ZXh0ICYmXG4gICAgICAgICAgICB0eXBlb2YgY29waWVkUHJvdmlkZXJEYXRhLnRleHQgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBjb3BpZWRQcm92aWRlckRhdGEudGV4dCA9IHsgLi4uY29waWVkUHJvdmlkZXJEYXRhLnRleHQgfTtcbiAgICAgICAgICAgIGRlbGV0ZSBjb3BpZWRQcm92aWRlckRhdGEudGV4dC52ZXJib3NpdHk7XG4gICAgICAgIH1cbiAgICAgICAgZGVsZXRlIGNvcGllZFByb3ZpZGVyRGF0YS5yZWFzb25pbmc7XG4gICAgICAgIGRlbGV0ZSBjb3BpZWRQcm92aWRlckRhdGEucmVhc29uaW5nX2VmZm9ydDtcbiAgICB9XG4gICAgY29uc3QgY29waWVkTW9kZWxTZXR0aW5ncyA9IHtcbiAgICAgICAgLi4ubW9kZWxTZXR0aW5ncyxcbiAgICAgICAgcHJvdmlkZXJEYXRhOiBjb3BpZWRQcm92aWRlckRhdGEsXG4gICAgfTtcbiAgICBpZiAobW9kZWxTZXR0aW5ncy5yZWFzb25pbmcpIHtcbiAgICAgICAgY29waWVkTW9kZWxTZXR0aW5ncy5yZWFzb25pbmcgPSB7IC4uLm1vZGVsU2V0dGluZ3MucmVhc29uaW5nIH07XG4gICAgfVxuICAgIGlmIChtb2RlbFNldHRpbmdzLnRleHQpIHtcbiAgICAgICAgY29waWVkTW9kZWxTZXR0aW5ncy50ZXh0ID0geyAuLi5tb2RlbFNldHRpbmdzLnRleHQgfTtcbiAgICB9XG4gICAgZGVsZXRlIGNvcGllZE1vZGVsU2V0dGluZ3MucHJvdmlkZXJEYXRhPy5yZWFzb25pbmc7XG4gICAgZGVsZXRlIGNvcGllZE1vZGVsU2V0dGluZ3MucHJvdmlkZXJEYXRhPy50ZXh0Py52ZXJib3NpdHk7XG4gICAgZGVsZXRlIGNvcGllZE1vZGVsU2V0dGluZ3MucHJvdmlkZXJEYXRhPy5yZWFzb25pbmdfZWZmb3J0O1xuICAgIGlmIChjb3BpZWRNb2RlbFNldHRpbmdzLnJlYXNvbmluZykge1xuICAgICAgICBkZWxldGUgY29waWVkTW9kZWxTZXR0aW5ncy5yZWFzb25pbmcuZWZmb3J0O1xuICAgICAgICBkZWxldGUgY29waWVkTW9kZWxTZXR0aW5ncy5yZWFzb25pbmcuc3VtbWFyeTtcbiAgICB9XG4gICAgaWYgKGNvcGllZE1vZGVsU2V0dGluZ3MudGV4dCkge1xuICAgICAgICBkZWxldGUgY29waWVkTW9kZWxTZXR0aW5ncy50ZXh0LnZlcmJvc2l0eTtcbiAgICB9XG4gICAgcmV0dXJuIGNvcGllZE1vZGVsU2V0dGluZ3M7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tb2RlbFNldHRpbmdzLm1qcy5tYXAiLCJpbXBvcnQgeyBNb2RlbEJlaGF2aW9yRXJyb3IgfSBmcm9tIFwiLi4vZXJyb3JzLm1qc1wiO1xuaW1wb3J0IHsgUnVuSGFuZG9mZkNhbGxJdGVtLCBSdW5NZXNzYWdlT3V0cHV0SXRlbSwgUnVuUmVhc29uaW5nSXRlbSwgUnVuVG9vbEFwcHJvdmFsSXRlbSwgUnVuVG9vbENhbGxJdGVtLCB9IGZyb20gXCIuLi9pdGVtcy5tanNcIjtcbmltcG9ydCB7IGFkZEVycm9yVG9DdXJyZW50U3BhbiB9IGZyb20gXCIuLi90cmFjaW5nL2NvbnRleHQubWpzXCI7XG5mdW5jdGlvbiBlbnN1cmVUb29sQXZhaWxhYmxlKHRvb2wsIG1lc3NhZ2UsIGRhdGEpIHtcbiAgICBpZiAoIXRvb2wpIHtcbiAgICAgICAgYWRkRXJyb3JUb0N1cnJlbnRTcGFuKHtcbiAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICBkYXRhLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhyb3cgbmV3IE1vZGVsQmVoYXZpb3JFcnJvcihtZXNzYWdlKTtcbiAgICB9XG4gICAgcmV0dXJuIHRvb2w7XG59XG5mdW5jdGlvbiBoYW5kbGVUb29sQ2FsbEFjdGlvbih7IG91dHB1dCwgdG9vbCwgYWdlbnQsIGVycm9yTWVzc2FnZSwgZXJyb3JEYXRhLCBpdGVtcywgdG9vbHNVc2VkLCBhY3Rpb25zLCBidWlsZEFjdGlvbiwgfSkge1xuICAgIGNvbnN0IHJlc29sdmVkVG9vbCA9IGVuc3VyZVRvb2xBdmFpbGFibGUodG9vbCwgZXJyb3JNZXNzYWdlLCBlcnJvckRhdGEpO1xuICAgIGl0ZW1zLnB1c2gobmV3IFJ1blRvb2xDYWxsSXRlbShvdXRwdXQsIGFnZW50KSk7XG4gICAgdG9vbHNVc2VkLnB1c2gocmVzb2x2ZWRUb29sLm5hbWUpO1xuICAgIGFjdGlvbnMucHVzaChidWlsZEFjdGlvbihyZXNvbHZlZFRvb2wpKTtcbn1cbmZ1bmN0aW9uIHJlc29sdmVGdW5jdGlvbk9ySGFuZG9mZih0b29sQ2FsbCwgaGFuZG9mZk1hcCwgZnVuY3Rpb25NYXAsIGFnZW50KSB7XG4gICAgY29uc3QgaGFuZG9mZiA9IGhhbmRvZmZNYXAuZ2V0KHRvb2xDYWxsLm5hbWUpO1xuICAgIGlmIChoYW5kb2ZmKSB7XG4gICAgICAgIHJldHVybiB7IHR5cGU6ICdoYW5kb2ZmJywgaGFuZG9mZiB9O1xuICAgIH1cbiAgICBjb25zdCBmdW5jdGlvblRvb2wgPSBmdW5jdGlvbk1hcC5nZXQodG9vbENhbGwubmFtZSk7XG4gICAgaWYgKCFmdW5jdGlvblRvb2wpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGBUb29sICR7dG9vbENhbGwubmFtZX0gbm90IGZvdW5kIGluIGFnZW50ICR7YWdlbnQubmFtZX0uYDtcbiAgICAgICAgYWRkRXJyb3JUb0N1cnJlbnRTcGFuKHtcbiAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgdG9vbF9uYW1lOiB0b29sQ2FsbC5uYW1lLFxuICAgICAgICAgICAgICAgIGFnZW50X25hbWU6IGFnZW50Lm5hbWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgdGhyb3cgbmV3IE1vZGVsQmVoYXZpb3JFcnJvcihtZXNzYWdlKTtcbiAgICB9XG4gICAgcmV0dXJuIHsgdHlwZTogJ2Z1bmN0aW9uJywgdG9vbDogZnVuY3Rpb25Ub29sIH07XG59XG4vKipcbiAqIFdhbGtzIGEgcmF3IG1vZGVsIHJlc3BvbnNlIGFuZCBjbGFzc2lmaWVzIGVhY2ggaXRlbSBzbyB0aGUgcnVubmVyIGNhbiBzY2hlZHVsZSBmb2xsb3ctdXAgd29yay5cbiAqIFJldHVybnMgYm90aCB0aGUgc2VyaWFsaXphYmxlIFJ1bkl0ZW1zIChmb3IgaGlzdG9yeS9zdHJlYW1pbmcpIGFuZCB0aGUgYWN0aW9uYWJsZSB0b29sIG1ldGFkYXRhLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcHJvY2Vzc01vZGVsUmVzcG9uc2UobW9kZWxSZXNwb25zZSwgYWdlbnQsIHRvb2xzLCBoYW5kb2Zmcykge1xuICAgIGNvbnN0IGl0ZW1zID0gW107XG4gICAgY29uc3QgcnVuSGFuZG9mZnMgPSBbXTtcbiAgICBjb25zdCBydW5GdW5jdGlvbnMgPSBbXTtcbiAgICBjb25zdCBydW5Db21wdXRlckFjdGlvbnMgPSBbXTtcbiAgICBjb25zdCBydW5TaGVsbEFjdGlvbnMgPSBbXTtcbiAgICBjb25zdCBydW5BcHBseVBhdGNoQWN0aW9ucyA9IFtdO1xuICAgIGNvbnN0IHJ1bk1DUEFwcHJvdmFsUmVxdWVzdHMgPSBbXTtcbiAgICBjb25zdCB0b29sc1VzZWQgPSBbXTtcbiAgICBjb25zdCBoYW5kb2ZmTWFwID0gbmV3IE1hcChoYW5kb2Zmcy5tYXAoKGgpID0+IFtoLnRvb2xOYW1lLCBoXSkpO1xuICAgIC8vIFJlc29sdmUgdG9vbHMgdXBmcm9udCBzbyB3ZSBjYW4gbG9vayB1cCB0aGUgY29uY3JldGUgaGFuZGxlciBpbiBPKDEpIHdoaWxlIGl0ZXJhdGluZyBvdXRwdXRzLlxuICAgIGNvbnN0IGZ1bmN0aW9uTWFwID0gbmV3IE1hcCh0b29sc1xuICAgICAgICAuZmlsdGVyKCh0KSA9PiB0LnR5cGUgPT09ICdmdW5jdGlvbicpXG4gICAgICAgIC5tYXAoKHQpID0+IFt0Lm5hbWUsIHRdKSk7XG4gICAgY29uc3QgY29tcHV0ZXJUb29sID0gdG9vbHMuZmluZCgodCkgPT4gdC50eXBlID09PSAnY29tcHV0ZXInKTtcbiAgICBjb25zdCBzaGVsbFRvb2wgPSB0b29scy5maW5kKCh0KSA9PiB0LnR5cGUgPT09ICdzaGVsbCcpO1xuICAgIGNvbnN0IGFwcGx5UGF0Y2hUb29sID0gdG9vbHMuZmluZCgodCkgPT4gdC50eXBlID09PSAnYXBwbHlfcGF0Y2gnKTtcbiAgICBjb25zdCBtY3BUb29sTWFwID0gbmV3IE1hcCh0b29sc1xuICAgICAgICAuZmlsdGVyKCh0KSA9PiB0LnR5cGUgPT09ICdob3N0ZWRfdG9vbCcgJiYgdC5wcm92aWRlckRhdGE/LnR5cGUgPT09ICdtY3AnKVxuICAgICAgICAubWFwKCh0KSA9PiB0KVxuICAgICAgICAubWFwKCh0KSA9PiBbdC5wcm92aWRlckRhdGEuc2VydmVyX2xhYmVsLCB0XSkpO1xuICAgIGZvciAoY29uc3Qgb3V0cHV0IG9mIG1vZGVsUmVzcG9uc2Uub3V0cHV0KSB7XG4gICAgICAgIGlmIChvdXRwdXQudHlwZSA9PT0gJ21lc3NhZ2UnKSB7XG4gICAgICAgICAgICBpZiAob3V0cHV0LnJvbGUgPT09ICdhc3Npc3RhbnQnKSB7XG4gICAgICAgICAgICAgICAgaXRlbXMucHVzaChuZXcgUnVuTWVzc2FnZU91dHB1dEl0ZW0ob3V0cHV0LCBhZ2VudCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG91dHB1dC50eXBlID09PSAnaG9zdGVkX3Rvb2xfY2FsbCcpIHtcbiAgICAgICAgICAgIGl0ZW1zLnB1c2gobmV3IFJ1blRvb2xDYWxsSXRlbShvdXRwdXQsIGFnZW50KSk7XG4gICAgICAgICAgICBjb25zdCB0b29sTmFtZSA9IG91dHB1dC5uYW1lO1xuICAgICAgICAgICAgdG9vbHNVc2VkLnB1c2godG9vbE5hbWUpO1xuICAgICAgICAgICAgaWYgKG91dHB1dC5wcm92aWRlckRhdGE/LnR5cGUgPT09ICdtY3BfYXBwcm92YWxfcmVxdWVzdCcgfHxcbiAgICAgICAgICAgICAgICBvdXRwdXQubmFtZSA9PT0gJ21jcF9hcHByb3ZhbF9yZXF1ZXN0Jykge1xuICAgICAgICAgICAgICAgIC8vIEhvc3RlZCByZW1vdGUgTUNQIHNlcnZlcidzIGFwcHJvdmFsIHByb2Nlc3NcbiAgICAgICAgICAgICAgICBjb25zdCBwcm92aWRlckRhdGEgPSBvdXRwdXQucHJvdmlkZXJEYXRhO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1jcFNlcnZlckxhYmVsID0gcHJvdmlkZXJEYXRhLnNlcnZlcl9sYWJlbDtcbiAgICAgICAgICAgICAgICBjb25zdCBtY3BTZXJ2ZXJUb29sID0gbWNwVG9vbE1hcC5nZXQobWNwU2VydmVyTGFiZWwpO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWNwU2VydmVyVG9vbCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGBNQ1Agc2VydmVyICgke21jcFNlcnZlckxhYmVsfSkgbm90IGZvdW5kIGluIEFnZW50ICgke2FnZW50Lm5hbWV9KWA7XG4gICAgICAgICAgICAgICAgICAgIGFkZEVycm9yVG9DdXJyZW50U3Bhbih7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBtY3Bfc2VydmVyX2xhYmVsOiBtY3BTZXJ2ZXJMYWJlbCB9LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE1vZGVsQmVoYXZpb3JFcnJvcihtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gRG8gdGhpcyBhcHByb3ZhbCBsYXRlcjpcbiAgICAgICAgICAgICAgICAvLyBXZSBzdXBwb3J0IGJvdGggb25BcHByb3ZhbCBjYWxsYmFjayAobGlrZSB0aGUgUHl0aG9uIFNESyBkb2VzKSBhbmQgSElUTCBwYXR0ZXJucy5cbiAgICAgICAgICAgICAgICBjb25zdCBhcHByb3ZhbEl0ZW0gPSBuZXcgUnVuVG9vbEFwcHJvdmFsSXRlbSh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdob3N0ZWRfdG9vbF9jYWxsJyxcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgbXVzdCB1c2UgdGhpcyBuYW1lIHRvIGFsaWduIHdpdGggdGhlIG5hbWUgc2VudCBmcm9tIHRoZSBzZXJ2ZXJzXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHByb3ZpZGVyRGF0YS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBpZDogcHJvdmlkZXJEYXRhLmlkLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICdpbl9wcm9ncmVzcycsXG4gICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyRGF0YSxcbiAgICAgICAgICAgICAgICB9LCBhZ2VudCk7XG4gICAgICAgICAgICAgICAgcnVuTUNQQXBwcm92YWxSZXF1ZXN0cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdEl0ZW06IGFwcHJvdmFsSXRlbSxcbiAgICAgICAgICAgICAgICAgICAgbWNwVG9vbDogbWNwU2VydmVyVG9vbCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoIW1jcFNlcnZlclRvb2wucHJvdmlkZXJEYXRhLm9uX2FwcHJvdmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdoZW4gb25BcHByb3ZhbCBmdW5jdGlvbiBleGlzdHMsIGl0IGNvbmZpcm1zIHRoZSBhcHByb3ZhbCByaWdodCBhZnRlciB0aGlzLlxuICAgICAgICAgICAgICAgICAgICAvLyBUaHVzLCB0aGlzIGFwcHJvdmFsIGl0ZW0gbXVzdCBiZSBhcHBlbmRlZCBvbmx5IGZvciB0aGUgbmV4dCB0dXJuIGludGVycnVwdGlvbiBwYXR0ZXJucy5cbiAgICAgICAgICAgICAgICAgICAgaXRlbXMucHVzaChhcHByb3ZhbEl0ZW0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvdXRwdXQudHlwZSA9PT0gJ3JlYXNvbmluZycpIHtcbiAgICAgICAgICAgIGl0ZW1zLnB1c2gobmV3IFJ1blJlYXNvbmluZ0l0ZW0ob3V0cHV0LCBhZ2VudCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG91dHB1dC50eXBlID09PSAnY29tcHV0ZXJfY2FsbCcpIHtcbiAgICAgICAgICAgIGhhbmRsZVRvb2xDYWxsQWN0aW9uKHtcbiAgICAgICAgICAgICAgICBvdXRwdXQsXG4gICAgICAgICAgICAgICAgdG9vbDogY29tcHV0ZXJUb29sLFxuICAgICAgICAgICAgICAgIGFnZW50LFxuICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZTogJ01vZGVsIHByb2R1Y2VkIGNvbXB1dGVyIGFjdGlvbiB3aXRob3V0IGEgY29tcHV0ZXIgdG9vbC4nLFxuICAgICAgICAgICAgICAgIGVycm9yRGF0YTogeyBhZ2VudF9uYW1lOiBhZ2VudC5uYW1lIH0sXG4gICAgICAgICAgICAgICAgaXRlbXMsXG4gICAgICAgICAgICAgICAgdG9vbHNVc2VkLFxuICAgICAgICAgICAgICAgIGFjdGlvbnM6IHJ1bkNvbXB1dGVyQWN0aW9ucyxcbiAgICAgICAgICAgICAgICBidWlsZEFjdGlvbjogKHJlc29sdmVkVG9vbCkgPT4gKHtcbiAgICAgICAgICAgICAgICAgICAgdG9vbENhbGw6IG91dHB1dCxcbiAgICAgICAgICAgICAgICAgICAgY29tcHV0ZXI6IHJlc29sdmVkVG9vbCxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG91dHB1dC50eXBlID09PSAnc2hlbGxfY2FsbCcpIHtcbiAgICAgICAgICAgIGhhbmRsZVRvb2xDYWxsQWN0aW9uKHtcbiAgICAgICAgICAgICAgICBvdXRwdXQsXG4gICAgICAgICAgICAgICAgdG9vbDogc2hlbGxUb29sLFxuICAgICAgICAgICAgICAgIGFnZW50LFxuICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZTogJ01vZGVsIHByb2R1Y2VkIHNoZWxsIGFjdGlvbiB3aXRob3V0IGEgc2hlbGwgdG9vbC4nLFxuICAgICAgICAgICAgICAgIGVycm9yRGF0YTogeyBhZ2VudF9uYW1lOiBhZ2VudC5uYW1lIH0sXG4gICAgICAgICAgICAgICAgaXRlbXMsXG4gICAgICAgICAgICAgICAgdG9vbHNVc2VkLFxuICAgICAgICAgICAgICAgIGFjdGlvbnM6IHJ1blNoZWxsQWN0aW9ucyxcbiAgICAgICAgICAgICAgICBidWlsZEFjdGlvbjogKHJlc29sdmVkVG9vbCkgPT4gKHtcbiAgICAgICAgICAgICAgICAgICAgdG9vbENhbGw6IG91dHB1dCxcbiAgICAgICAgICAgICAgICAgICAgc2hlbGw6IHJlc29sdmVkVG9vbCxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG91dHB1dC50eXBlID09PSAnYXBwbHlfcGF0Y2hfY2FsbCcpIHtcbiAgICAgICAgICAgIGhhbmRsZVRvb2xDYWxsQWN0aW9uKHtcbiAgICAgICAgICAgICAgICBvdXRwdXQsXG4gICAgICAgICAgICAgICAgdG9vbDogYXBwbHlQYXRjaFRvb2wsXG4gICAgICAgICAgICAgICAgYWdlbnQsXG4gICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlOiAnTW9kZWwgcHJvZHVjZWQgYXBwbHlfcGF0Y2ggYWN0aW9uIHdpdGhvdXQgYW4gYXBwbHlfcGF0Y2ggdG9vbC4nLFxuICAgICAgICAgICAgICAgIGVycm9yRGF0YTogeyBhZ2VudF9uYW1lOiBhZ2VudC5uYW1lIH0sXG4gICAgICAgICAgICAgICAgaXRlbXMsXG4gICAgICAgICAgICAgICAgdG9vbHNVc2VkLFxuICAgICAgICAgICAgICAgIGFjdGlvbnM6IHJ1bkFwcGx5UGF0Y2hBY3Rpb25zLFxuICAgICAgICAgICAgICAgIGJ1aWxkQWN0aW9uOiAocmVzb2x2ZWRUb29sKSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICB0b29sQ2FsbDogb3V0cHV0LFxuICAgICAgICAgICAgICAgICAgICBhcHBseVBhdGNoOiByZXNvbHZlZFRvb2wsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvKlxuICAgICAgICAgKiBJbnRlbnRpb25hbGx5IHNraXAgcmV0dXJuaW5nIGhlcmUgc28gZnVuY3Rpb25fY2FsbCBwcm9jZXNzaW5nIGNhbiBzdGlsbFxuICAgICAgICAgKiBydW4gd2hlbiBvdXRwdXQudHlwZSBtYXRjaGVzIG90aGVyIHRvb2wgY2FsbCB0eXBlcy5cbiAgICAgICAgICovXG4gICAgICAgIGlmIChvdXRwdXQudHlwZSAhPT0gJ2Z1bmN0aW9uX2NhbGwnKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICB0b29sc1VzZWQucHVzaChvdXRwdXQubmFtZSk7XG4gICAgICAgIGNvbnN0IHJlc29sdmVkID0gcmVzb2x2ZUZ1bmN0aW9uT3JIYW5kb2ZmKG91dHB1dCwgaGFuZG9mZk1hcCwgZnVuY3Rpb25NYXAsIGFnZW50KTtcbiAgICAgICAgaWYgKHJlc29sdmVkLnR5cGUgPT09ICdoYW5kb2ZmJykge1xuICAgICAgICAgICAgaXRlbXMucHVzaChuZXcgUnVuSGFuZG9mZkNhbGxJdGVtKG91dHB1dCwgYWdlbnQpKTtcbiAgICAgICAgICAgIHJ1bkhhbmRvZmZzLnB1c2goe1xuICAgICAgICAgICAgICAgIHRvb2xDYWxsOiBvdXRwdXQsXG4gICAgICAgICAgICAgICAgaGFuZG9mZjogcmVzb2x2ZWQuaGFuZG9mZixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaXRlbXMucHVzaChuZXcgUnVuVG9vbENhbGxJdGVtKG91dHB1dCwgYWdlbnQpKTtcbiAgICAgICAgICAgIHJ1bkZ1bmN0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgICAgICB0b29sQ2FsbDogb3V0cHV0LFxuICAgICAgICAgICAgICAgIHRvb2w6IHJlc29sdmVkLnRvb2wsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBuZXdJdGVtczogaXRlbXMsXG4gICAgICAgIGhhbmRvZmZzOiBydW5IYW5kb2ZmcyxcbiAgICAgICAgZnVuY3Rpb25zOiBydW5GdW5jdGlvbnMsXG4gICAgICAgIGNvbXB1dGVyQWN0aW9uczogcnVuQ29tcHV0ZXJBY3Rpb25zLFxuICAgICAgICBzaGVsbEFjdGlvbnM6IHJ1blNoZWxsQWN0aW9ucyxcbiAgICAgICAgYXBwbHlQYXRjaEFjdGlvbnM6IHJ1bkFwcGx5UGF0Y2hBY3Rpb25zLFxuICAgICAgICBtY3BBcHByb3ZhbFJlcXVlc3RzOiBydW5NQ1BBcHByb3ZhbFJlcXVlc3RzLFxuICAgICAgICB0b29sc1VzZWQ6IHRvb2xzVXNlZCxcbiAgICAgICAgaGFzVG9vbHNPckFwcHJvdmFsc1RvUnVuKCkge1xuICAgICAgICAgICAgcmV0dXJuIChydW5IYW5kb2Zmcy5sZW5ndGggPiAwIHx8XG4gICAgICAgICAgICAgICAgcnVuRnVuY3Rpb25zLmxlbmd0aCA+IDAgfHxcbiAgICAgICAgICAgICAgICBydW5NQ1BBcHByb3ZhbFJlcXVlc3RzLmxlbmd0aCA+IDAgfHxcbiAgICAgICAgICAgICAgICBydW5Db21wdXRlckFjdGlvbnMubGVuZ3RoID4gMCB8fFxuICAgICAgICAgICAgICAgIHJ1blNoZWxsQWN0aW9ucy5sZW5ndGggPiAwIHx8XG4gICAgICAgICAgICAgICAgcnVuQXBwbHlQYXRjaEFjdGlvbnMubGVuZ3RoID4gMCk7XG4gICAgICAgIH0sXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1vZGVsT3V0cHV0cy5tanMubWFwIiwiaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IHsgUnVuSXRlbVN0cmVhbUV2ZW50IH0gZnJvbSBcIi4uL2V2ZW50cy5tanNcIjtcbmltcG9ydCB7IFJ1bkhhbmRvZmZDYWxsSXRlbSwgUnVuSGFuZG9mZk91dHB1dEl0ZW0sIFJ1bk1lc3NhZ2VPdXRwdXRJdGVtLCBSdW5SZWFzb25pbmdJdGVtLCBSdW5Ub29sQXBwcm92YWxJdGVtLCBSdW5Ub29sQ2FsbEl0ZW0sIFJ1blRvb2xDYWxsT3V0cHV0SXRlbSwgfSBmcm9tIFwiLi4vaXRlbXMubWpzXCI7XG5leHBvcnQgY29uc3QgaXNBYm9ydEVycm9yID0gKGVycm9yKSA9PiB7XG4gICAgaWYgKCFlcnJvcikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmIGVycm9yLm5hbWUgPT09ICdBYm9ydEVycm9yJykge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgY29uc3QgRG9tRXhjZXB0aW9uQ3RvciA9IHR5cGVvZiBET01FeGNlcHRpb24gIT09ICd1bmRlZmluZWQnID8gRE9NRXhjZXB0aW9uIDogdW5kZWZpbmVkO1xuICAgIGlmIChEb21FeGNlcHRpb25DdG9yICYmXG4gICAgICAgIGVycm9yIGluc3RhbmNlb2YgRG9tRXhjZXB0aW9uQ3RvciAmJlxuICAgICAgICBlcnJvci5uYW1lID09PSAnQWJvcnRFcnJvcicpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn07XG5mdW5jdGlvbiBnZXRSdW5JdGVtU3RyZWFtRXZlbnROYW1lKGl0ZW0pIHtcbiAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIFJ1bk1lc3NhZ2VPdXRwdXRJdGVtKSB7XG4gICAgICAgIHJldHVybiAnbWVzc2FnZV9vdXRwdXRfY3JlYXRlZCc7XG4gICAgfVxuICAgIGlmIChpdGVtIGluc3RhbmNlb2YgUnVuSGFuZG9mZkNhbGxJdGVtKSB7XG4gICAgICAgIHJldHVybiAnaGFuZG9mZl9yZXF1ZXN0ZWQnO1xuICAgIH1cbiAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIFJ1bkhhbmRvZmZPdXRwdXRJdGVtKSB7XG4gICAgICAgIHJldHVybiAnaGFuZG9mZl9vY2N1cnJlZCc7XG4gICAgfVxuICAgIGlmIChpdGVtIGluc3RhbmNlb2YgUnVuVG9vbENhbGxJdGVtKSB7XG4gICAgICAgIHJldHVybiAndG9vbF9jYWxsZWQnO1xuICAgIH1cbiAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIFJ1blRvb2xDYWxsT3V0cHV0SXRlbSkge1xuICAgICAgICByZXR1cm4gJ3Rvb2xfb3V0cHV0JztcbiAgICB9XG4gICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBSdW5SZWFzb25pbmdJdGVtKSB7XG4gICAgICAgIHJldHVybiAncmVhc29uaW5nX2l0ZW1fY3JlYXRlZCc7XG4gICAgfVxuICAgIGlmIChpdGVtIGluc3RhbmNlb2YgUnVuVG9vbEFwcHJvdmFsSXRlbSkge1xuICAgICAgICByZXR1cm4gJ3Rvb2xfYXBwcm92YWxfcmVxdWVzdGVkJztcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIGVucXVldWVSdW5JdGVtU3RyZWFtRXZlbnQocmVzdWx0LCBpdGVtKSB7XG4gICAgY29uc3QgaXRlbU5hbWUgPSBnZXRSdW5JdGVtU3RyZWFtRXZlbnROYW1lKGl0ZW0pO1xuICAgIGlmICghaXRlbU5hbWUpIHtcbiAgICAgICAgbG9nZ2VyLndhcm4oJ1Vua25vd24gaXRlbSB0eXBlOiAnLCBpdGVtKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICByZXN1bHQuX2FkZEl0ZW0obmV3IFJ1bkl0ZW1TdHJlYW1FdmVudChpdGVtTmFtZSwgaXRlbSkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHN0cmVhbVN0ZXBJdGVtc1RvUnVuUmVzdWx0KHJlc3VsdCwgaXRlbXMpIHtcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHtcbiAgICAgICAgZW5xdWV1ZVJ1bkl0ZW1TdHJlYW1FdmVudChyZXN1bHQsIGl0ZW0pO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBhZGRTdGVwVG9SdW5SZXN1bHQocmVzdWx0LCBzdGVwLCBvcHRpb25zKSB7XG4gICAgY29uc3Qgc2tpcHBlZEl0ZW1zID0gb3B0aW9ucz8uc2tpcEl0ZW1zO1xuICAgIGZvciAoY29uc3QgaXRlbSBvZiBzdGVwLm5ld1N0ZXBJdGVtcykge1xuICAgICAgICBpZiAoc2tpcHBlZEl0ZW1zPy5oYXMoaXRlbSkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGVucXVldWVSdW5JdGVtU3RyZWFtRXZlbnQocmVzdWx0LCBpdGVtKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zdHJlYW1pbmcubWpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBpc09wZW5BSVJlc3BvbnNlc0NvbXBhY3Rpb25Bd2FyZVNlc3Npb24oc2Vzc2lvbikge1xuICAgIHJldHVybiAoISFzZXNzaW9uICYmXG4gICAgICAgIHR5cGVvZiBzZXNzaW9uLnJ1bkNvbXBhY3Rpb24gPT09XG4gICAgICAgICAgICAnZnVuY3Rpb24nKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNlc3Npb24ubWpzLm1hcCIsImltcG9ydCB7IFVzZXJFcnJvciB9IGZyb20gXCIuLi9lcnJvcnMubWpzXCI7XG5pbXBvcnQgeyBpc09wZW5BSVJlc3BvbnNlc0NvbXBhY3Rpb25Bd2FyZVNlc3Npb24sIH0gZnJvbSBcIi4uL21lbW9yeS9zZXNzaW9uLm1qc1wiO1xuaW1wb3J0IHsgVXNhZ2UgfSBmcm9tIFwiLi4vdXNhZ2UubWpzXCI7XG5pbXBvcnQgeyBlbmNvZGVVaW50OEFycmF5VG9CYXNlNjQgfSBmcm9tIFwiLi4vdXRpbHMvYmFzZTY0Lm1qc1wiO1xuaW1wb3J0IHsgdG9VaW50OEFycmF5RnJvbUJpbmFyeSB9IGZyb20gXCIuLi91dGlscy9iaW5hcnkubWpzXCI7XG5pbXBvcnQgeyBidWlsZEFnZW50SW5wdXRQb29sLCBleHRyYWN0T3V0cHV0SXRlbXNGcm9tUnVuSXRlbXMsIHRvQWdlbnRJbnB1dExpc3QsIGdldEFnZW50SW5wdXRJdGVtS2V5LCByZW1vdmVBZ2VudElucHV0RnJvbVBvb2wsIH0gZnJvbSBcIi4vaXRlbXMubWpzXCI7XG5pbXBvcnQgbG9nZ2VyIGZyb20gXCIuLi9sb2dnZXIubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU2Vzc2lvblBlcnNpc3RlbmNlVHJhY2tlcihvcHRpb25zKSB7XG4gICAgY29uc3QgeyBzZXNzaW9uIH0gPSBvcHRpb25zO1xuICAgIGlmICghc2Vzc2lvbikge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjbGFzcyBTZXNzaW9uUGVyc2lzdGVuY2VUcmFja2VySW1wbCB7XG4gICAgICAgIHNlc3Npb247XG4gICAgICAgIGhhc0NhbGxNb2RlbElucHV0RmlsdGVyO1xuICAgICAgICBwZXJzaXN0SW5wdXQ7XG4gICAgICAgIG9yaWdpbmFsU25hcHNob3Q7XG4gICAgICAgIGZpbHRlcmVkU25hcHNob3Q7XG4gICAgICAgIHBlbmRpbmdXcml0ZUNvdW50cztcbiAgICAgICAgcGVyc2lzdGVkSW5wdXQgPSBmYWxzZTtcbiAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgICB0aGlzLnNlc3Npb24gPSBvcHRpb25zLnNlc3Npb247XG4gICAgICAgICAgICB0aGlzLmhhc0NhbGxNb2RlbElucHV0RmlsdGVyID0gb3B0aW9ucy5oYXNDYWxsTW9kZWxJbnB1dEZpbHRlcjtcbiAgICAgICAgICAgIHRoaXMucGVyc2lzdElucHV0ID0gb3B0aW9ucy5wZXJzaXN0SW5wdXQ7XG4gICAgICAgICAgICB0aGlzLm9yaWdpbmFsU25hcHNob3QgPSBvcHRpb25zLnJlc3VtaW5nRnJvbVN0YXRlID8gW10gOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0aGlzLmZpbHRlcmVkU25hcHNob3QgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0aGlzLnBlbmRpbmdXcml0ZUNvdW50cyA9IG9wdGlvbnMucmVzdW1pbmdGcm9tU3RhdGVcbiAgICAgICAgICAgICAgICA/IG5ldyBNYXAoKVxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHNldFByZXBhcmVkSXRlbXMgPSAoaXRlbXMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNlc3Npb25JdGVtcyA9IGl0ZW1zID8/IFtdO1xuICAgICAgICAgICAgdGhpcy5vcmlnaW5hbFNuYXBzaG90ID0gc2Vzc2lvbkl0ZW1zLm1hcCgoaXRlbSkgPT4gc3RydWN0dXJlZENsb25lKGl0ZW0pKTtcbiAgICAgICAgICAgIHRoaXMucGVuZGluZ1dyaXRlQ291bnRzID0gbmV3IE1hcCgpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHNlc3Npb25JdGVtcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGdldEFnZW50SW5wdXRJdGVtS2V5KGl0ZW0pO1xuICAgICAgICAgICAgICAgIHRoaXMucGVuZGluZ1dyaXRlQ291bnRzLnNldChrZXksICh0aGlzLnBlbmRpbmdXcml0ZUNvdW50cy5nZXQoa2V5KSA/PyAwKSArIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZWNvcmRUdXJuSXRlbXMgPSAoc291cmNlSXRlbXMsIGZpbHRlcmVkSXRlbXMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHBlbmRpbmdDb3VudHMgPSB0aGlzLnBlbmRpbmdXcml0ZUNvdW50cztcbiAgICAgICAgICAgIGlmIChmaWx0ZXJlZEl0ZW1zICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXBlbmRpbmdDb3VudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJlZFNuYXBzaG90ID0gY2xvbmVJdGVtcyhmaWx0ZXJlZEl0ZW1zKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0U25hcHNob3QgPSBjb2xsZWN0UGVyc2lzdGFibGVGaWx0ZXJlZEl0ZW1zKHtcbiAgICAgICAgICAgICAgICAgICAgcGVuZGluZ0NvdW50cyxcbiAgICAgICAgICAgICAgICAgICAgc291cmNlSXRlbXMsXG4gICAgICAgICAgICAgICAgICAgIGZpbHRlcmVkSXRlbXMsXG4gICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nU25hcHNob3Q6IHRoaXMuZmlsdGVyZWRTbmFwc2hvdCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAobmV4dFNuYXBzaG90ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJlZFNuYXBzaG90ID0gbmV4dFNuYXBzaG90O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmZpbHRlcmVkU25hcHNob3QgPSBidWlsZFNuYXBzaG90Rm9yVW5maWx0ZXJlZEl0ZW1zKHtcbiAgICAgICAgICAgICAgICBwZW5kaW5nQ291bnRzLFxuICAgICAgICAgICAgICAgIHNvdXJjZUl0ZW1zLFxuICAgICAgICAgICAgICAgIGV4aXN0aW5nU25hcHNob3Q6IHRoaXMuZmlsdGVyZWRTbmFwc2hvdCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBnZXRJdGVtc0ZvclBlcnNpc3RlbmNlID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuZmlsdGVyZWRTbmFwc2hvdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmlsdGVyZWRTbmFwc2hvdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmhhc0NhbGxNb2RlbElucHV0RmlsdGVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9yaWdpbmFsU25hcHNob3Q7XG4gICAgICAgIH07XG4gICAgICAgIGJ1aWxkUGVyc2lzdElucHV0T25jZSA9IChzZXJ2ZXJNYW5hZ2VzQ29udmVyc2F0aW9uKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuc2Vzc2lvbiB8fCBzZXJ2ZXJNYW5hZ2VzQ29udmVyc2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHBlcnNpc3RJbnB1dCA9IHRoaXMucGVyc2lzdElucHV0ID8/IHNhdmVTdHJlYW1JbnB1dFRvU2Vzc2lvbjtcbiAgICAgICAgICAgIHJldHVybiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGVyc2lzdGVkSW5wdXQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtc1RvUGVyc2lzdCA9IHRoaXMuZ2V0SXRlbXNGb3JQZXJzaXN0ZW5jZSgpO1xuICAgICAgICAgICAgICAgIGlmICghaXRlbXNUb1BlcnNpc3QgfHwgaXRlbXNUb1BlcnNpc3QubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5wZXJzaXN0ZWRJbnB1dCA9IHRydWU7XG4gICAgICAgICAgICAgICAgYXdhaXQgcGVyc2lzdElucHV0KHRoaXMuc2Vzc2lvbiwgaXRlbXNUb1BlcnNpc3QpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBTZXNzaW9uUGVyc2lzdGVuY2VUcmFja2VySW1wbCgpO1xufVxuZnVuY3Rpb24gY2xvbmVJdGVtcyhpdGVtcykge1xuICAgIHJldHVybiBpdGVtcy5tYXAoKGl0ZW0pID0+IHN0cnVjdHVyZWRDbG9uZShpdGVtKSk7XG59XG5mdW5jdGlvbiBidWlsZFNvdXJjZU9jY3VycmVuY2VDb3VudHMoc291cmNlSXRlbXMpIHtcbiAgICBjb25zdCBzb3VyY2VPY2N1cnJlbmNlQ291bnRzID0gbmV3IFdlYWtNYXAoKTtcbiAgICBmb3IgKGNvbnN0IHNvdXJjZSBvZiBzb3VyY2VJdGVtcykge1xuICAgICAgICBpZiAoIXNvdXJjZSB8fCB0eXBlb2Ygc291cmNlICE9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmV4dENvdW50ID0gKHNvdXJjZU9jY3VycmVuY2VDb3VudHMuZ2V0KHNvdXJjZSkgPz8gMCkgKyAxO1xuICAgICAgICBzb3VyY2VPY2N1cnJlbmNlQ291bnRzLnNldChzb3VyY2UsIG5leHRDb3VudCk7XG4gICAgfVxuICAgIHJldHVybiBzb3VyY2VPY2N1cnJlbmNlQ291bnRzO1xufVxuZnVuY3Rpb24gY29sbGVjdFBlcnNpc3RhYmxlRmlsdGVyZWRJdGVtcyhvcHRpb25zKSB7XG4gICAgY29uc3QgeyBwZW5kaW5nQ291bnRzLCBzb3VyY2VJdGVtcywgZmlsdGVyZWRJdGVtcywgZXhpc3RpbmdTbmFwc2hvdCB9ID0gb3B0aW9ucztcbiAgICBjb25zdCBwZXJzaXN0YWJsZUl0ZW1zID0gW107XG4gICAgY29uc3Qgc291cmNlT2NjdXJyZW5jZUNvdW50cyA9IGJ1aWxkU291cmNlT2NjdXJyZW5jZUNvdW50cyhzb3VyY2VJdGVtcyk7XG4gICAgY29uc3QgY29uc3VtZUFueVBlbmRpbmdXcml0ZVNsb3QgPSAoKSA9PiB7XG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgcmVtYWluaW5nXSBvZiBwZW5kaW5nQ291bnRzKSB7XG4gICAgICAgICAgICBpZiAocmVtYWluaW5nID4gMCkge1xuICAgICAgICAgICAgICAgIHBlbmRpbmdDb3VudHMuc2V0KGtleSwgcmVtYWluaW5nIC0gMSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmaWx0ZXJlZEl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGZpbHRlcmVkSXRlbSA9IGZpbHRlcmVkSXRlbXNbaV07XG4gICAgICAgIGlmICghZmlsdGVyZWRJdGVtKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgYWxsb2NhdGVkID0gZmFsc2U7XG4gICAgICAgIGNvbnN0IHNvdXJjZSA9IHNvdXJjZUl0ZW1zW2ldO1xuICAgICAgICBpZiAoc291cmNlICYmIHR5cGVvZiBzb3VyY2UgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBjb25zdCBwZW5kaW5nT2NjdXJyZW5jZXMgPSAoc291cmNlT2NjdXJyZW5jZUNvdW50cy5nZXQoc291cmNlKSA/PyAwKSAtIDE7XG4gICAgICAgICAgICBzb3VyY2VPY2N1cnJlbmNlQ291bnRzLnNldChzb3VyY2UsIHBlbmRpbmdPY2N1cnJlbmNlcyk7XG4gICAgICAgICAgICBpZiAocGVuZGluZ09jY3VycmVuY2VzID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgc291cmNlS2V5ID0gZ2V0QWdlbnRJbnB1dEl0ZW1LZXkoc291cmNlKTtcbiAgICAgICAgICAgIGNvbnN0IHJlbWFpbmluZyA9IHBlbmRpbmdDb3VudHMuZ2V0KHNvdXJjZUtleSkgPz8gMDtcbiAgICAgICAgICAgIGlmIChyZW1haW5pbmcgPiAwKSB7XG4gICAgICAgICAgICAgICAgcGVuZGluZ0NvdW50cy5zZXQoc291cmNlS2V5LCByZW1haW5pbmcgLSAxKTtcbiAgICAgICAgICAgICAgICBwZXJzaXN0YWJsZUl0ZW1zLnB1c2goc3RydWN0dXJlZENsb25lKGZpbHRlcmVkSXRlbSkpO1xuICAgICAgICAgICAgICAgIGFsbG9jYXRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZmlsdGVyZWRLZXkgPSBnZXRBZ2VudElucHV0SXRlbUtleShmaWx0ZXJlZEl0ZW0pO1xuICAgICAgICBjb25zdCBmaWx0ZXJlZFJlbWFpbmluZyA9IHBlbmRpbmdDb3VudHMuZ2V0KGZpbHRlcmVkS2V5KSA/PyAwO1xuICAgICAgICBpZiAoZmlsdGVyZWRSZW1haW5pbmcgPiAwKSB7XG4gICAgICAgICAgICBwZW5kaW5nQ291bnRzLnNldChmaWx0ZXJlZEtleSwgZmlsdGVyZWRSZW1haW5pbmcgLSAxKTtcbiAgICAgICAgICAgIHBlcnNpc3RhYmxlSXRlbXMucHVzaChzdHJ1Y3R1cmVkQ2xvbmUoZmlsdGVyZWRJdGVtKSk7XG4gICAgICAgICAgICBhbGxvY2F0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFzb3VyY2UgJiYgY29uc3VtZUFueVBlbmRpbmdXcml0ZVNsb3QoKSkge1xuICAgICAgICAgICAgcGVyc2lzdGFibGVJdGVtcy5wdXNoKHN0cnVjdHVyZWRDbG9uZShmaWx0ZXJlZEl0ZW0pKTtcbiAgICAgICAgICAgIGFsbG9jYXRlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFhbGxvY2F0ZWQgJiYgIXNvdXJjZSAmJiBleGlzdGluZ1NuYXBzaG90ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHBlcnNpc3RhYmxlSXRlbXMucHVzaChzdHJ1Y3R1cmVkQ2xvbmUoZmlsdGVyZWRJdGVtKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHBlcnNpc3RhYmxlSXRlbXMubGVuZ3RoID4gMCB8fCBleGlzdGluZ1NuYXBzaG90ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHBlcnNpc3RhYmxlSXRlbXM7XG4gICAgfVxuICAgIHJldHVybiBleGlzdGluZ1NuYXBzaG90O1xufVxuZnVuY3Rpb24gYnVpbGRTbmFwc2hvdEZvclVuZmlsdGVyZWRJdGVtcyhvcHRpb25zKSB7XG4gICAgY29uc3QgeyBwZW5kaW5nQ291bnRzLCBzb3VyY2VJdGVtcywgZXhpc3RpbmdTbmFwc2hvdCB9ID0gb3B0aW9ucztcbiAgICBpZiAoIXBlbmRpbmdDb3VudHMpIHtcbiAgICAgICAgY29uc3QgZmlsdGVyZWQgPSBzb3VyY2VJdGVtc1xuICAgICAgICAgICAgLmZpbHRlcigoaXRlbSkgPT4gQm9vbGVhbihpdGVtKSlcbiAgICAgICAgICAgIC5tYXAoKGl0ZW0pID0+IHN0cnVjdHVyZWRDbG9uZShpdGVtKSk7XG4gICAgICAgIHJldHVybiBmaWx0ZXJlZC5sZW5ndGggPiAwXG4gICAgICAgICAgICA/IGZpbHRlcmVkXG4gICAgICAgICAgICA6IGV4aXN0aW5nU25hcHNob3QgPT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgID8gW11cbiAgICAgICAgICAgICAgICA6IGV4aXN0aW5nU25hcHNob3Q7XG4gICAgfVxuICAgIGNvbnN0IGZpbHRlcmVkID0gW107XG4gICAgZm9yIChjb25zdCBpdGVtIG9mIHNvdXJjZUl0ZW1zKSB7XG4gICAgICAgIGlmICghaXRlbSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qga2V5ID0gZ2V0QWdlbnRJbnB1dEl0ZW1LZXkoaXRlbSk7XG4gICAgICAgIGNvbnN0IHJlbWFpbmluZyA9IHBlbmRpbmdDb3VudHMuZ2V0KGtleSkgPz8gMDtcbiAgICAgICAgaWYgKHJlbWFpbmluZyA8PSAwKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBwZW5kaW5nQ291bnRzLnNldChrZXksIHJlbWFpbmluZyAtIDEpO1xuICAgICAgICBmaWx0ZXJlZC5wdXNoKHN0cnVjdHVyZWRDbG9uZShpdGVtKSk7XG4gICAgfVxuICAgIGlmIChmaWx0ZXJlZC5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJldHVybiBmaWx0ZXJlZDtcbiAgICB9XG4gICAgcmV0dXJuIGV4aXN0aW5nU25hcHNob3QgPT09IHVuZGVmaW5lZCA/IFtdIDogZXhpc3RpbmdTbmFwc2hvdDtcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzYXZlVG9TZXNzaW9uKHNlc3Npb24sIHNlc3Npb25JbnB1dEl0ZW1zLCByZXN1bHQpIHtcbiAgICBjb25zdCBzdGF0ZSA9IHJlc3VsdC5zdGF0ZTtcbiAgICBjb25zdCBhbHJlYWR5UGVyc2lzdGVkID0gc3RhdGUuX2N1cnJlbnRUdXJuUGVyc2lzdGVkSXRlbUNvdW50ID8/IDA7XG4gICAgY29uc3QgbmV3UnVuSXRlbXMgPSByZXN1bHQubmV3SXRlbXMuc2xpY2UoYWxyZWFkeVBlcnNpc3RlZCk7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk9QRU5BSV9BR0VOVFNfX0RFQlVHX1NBVkVfU0VTU0lPTikge1xuICAgICAgICBjb25zb2xlLmRlYnVnKCdzYXZlVG9TZXNzaW9uOm5ld1J1bkl0ZW1zJywgbmV3UnVuSXRlbXMubWFwKChpdGVtKSA9PiBpdGVtLnR5cGUpKTtcbiAgICB9XG4gICAgYXdhaXQgcGVyc2lzdFJ1bkl0ZW1zVG9TZXNzaW9uKHtcbiAgICAgICAgc2Vzc2lvbixcbiAgICAgICAgc3RhdGUsXG4gICAgICAgIG5ld1J1bkl0ZW1zLFxuICAgICAgICBleHRyYUlucHV0SXRlbXM6IHNlc3Npb25JbnB1dEl0ZW1zLFxuICAgICAgICBsYXN0UmVzcG9uc2VJZDogcmVzdWx0Lmxhc3RSZXNwb25zZUlkLFxuICAgICAgICBhbHJlYWR5UGVyc2lzdGVkQ291bnQ6IGFscmVhZHlQZXJzaXN0ZWQsXG4gICAgfSk7XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2F2ZVN0cmVhbUlucHV0VG9TZXNzaW9uKHNlc3Npb24sIHNlc3Npb25JbnB1dEl0ZW1zKSB7XG4gICAgaWYgKCFzZXNzaW9uKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCFzZXNzaW9uSW5wdXRJdGVtcyB8fCBzZXNzaW9uSW5wdXRJdGVtcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBzYW5pdGl6ZWRJbnB1dCA9IG5vcm1hbGl6ZUl0ZW1zRm9yU2Vzc2lvblBlcnNpc3RlbmNlKHNlc3Npb25JbnB1dEl0ZW1zKTtcbiAgICBhd2FpdCBzZXNzaW9uLmFkZEl0ZW1zKHNhbml0aXplZElucHV0KTtcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzYXZlU3RyZWFtUmVzdWx0VG9TZXNzaW9uKHNlc3Npb24sIHJlc3VsdCkge1xuICAgIGNvbnN0IHN0YXRlID0gcmVzdWx0LnN0YXRlO1xuICAgIGNvbnN0IGFscmVhZHlQZXJzaXN0ZWQgPSBzdGF0ZS5fY3VycmVudFR1cm5QZXJzaXN0ZWRJdGVtQ291bnQgPz8gMDtcbiAgICBjb25zdCBuZXdSdW5JdGVtcyA9IHJlc3VsdC5uZXdJdGVtcy5zbGljZShhbHJlYWR5UGVyc2lzdGVkKTtcbiAgICBhd2FpdCBwZXJzaXN0UnVuSXRlbXNUb1Nlc3Npb24oe1xuICAgICAgICBzZXNzaW9uLFxuICAgICAgICBzdGF0ZSxcbiAgICAgICAgbmV3UnVuSXRlbXMsXG4gICAgICAgIGxhc3RSZXNwb25zZUlkOiByZXN1bHQubGFzdFJlc3BvbnNlSWQsXG4gICAgICAgIGFscmVhZHlQZXJzaXN0ZWRDb3VudDogYWxyZWFkeVBlcnNpc3RlZCxcbiAgICB9KTtcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcmVwYXJlSW5wdXRJdGVtc1dpdGhTZXNzaW9uKGlucHV0LCBzZXNzaW9uLCBzZXNzaW9uSW5wdXRDYWxsYmFjaywgb3B0aW9ucykge1xuICAgIGlmICghc2Vzc2lvbikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcHJlcGFyZWRJbnB1dDogaW5wdXQsXG4gICAgICAgICAgICBzZXNzaW9uSXRlbXM6IHVuZGVmaW5lZCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29uc3QgaW5jbHVkZUhpc3RvcnlJblByZXBhcmVkSW5wdXQgPSBvcHRpb25zPy5pbmNsdWRlSGlzdG9yeUluUHJlcGFyZWRJbnB1dCA/PyB0cnVlO1xuICAgIGNvbnN0IHByZXNlcnZlRHJvcHBlZE5ld0l0ZW1zID0gb3B0aW9ucz8ucHJlc2VydmVEcm9wcGVkTmV3SXRlbXMgPz8gZmFsc2U7XG4gICAgY29uc3QgaGlzdG9yeSA9IGF3YWl0IHNlc3Npb24uZ2V0SXRlbXMoKTtcbiAgICBjb25zdCBuZXdJbnB1dEl0ZW1zID0gdG9BZ2VudElucHV0TGlzdChpbnB1dCk7XG4gICAgaWYgKCFzZXNzaW9uSW5wdXRDYWxsYmFjaykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcHJlcGFyZWRJbnB1dDogaW5jbHVkZUhpc3RvcnlJblByZXBhcmVkSW5wdXRcbiAgICAgICAgICAgICAgICA/IFsuLi5oaXN0b3J5LCAuLi5uZXdJbnB1dEl0ZW1zXVxuICAgICAgICAgICAgICAgIDogbmV3SW5wdXRJdGVtcyxcbiAgICAgICAgICAgIHNlc3Npb25JdGVtczogbmV3SW5wdXRJdGVtcyxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29uc3QgaGlzdG9yeVNuYXBzaG90ID0gaGlzdG9yeS5zbGljZSgpO1xuICAgIGNvbnN0IG5ld0lucHV0U25hcHNob3QgPSBuZXdJbnB1dEl0ZW1zLnNsaWNlKCk7XG4gICAgY29uc3QgY29tYmluZWQgPSBhd2FpdCBzZXNzaW9uSW5wdXRDYWxsYmFjayhoaXN0b3J5LCBuZXdJbnB1dEl0ZW1zKTtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoY29tYmluZWQpKSB7XG4gICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ1Nlc3Npb24gaW5wdXQgY2FsbGJhY2sgbXVzdCByZXR1cm4gYW4gYXJyYXkgb2YgQWdlbnRJbnB1dEl0ZW0gb2JqZWN0cy4nKTtcbiAgICB9XG4gICAgY29uc3QgaGlzdG9yeUNvdW50cyA9IGJ1aWxkSXRlbUZyZXF1ZW5jeU1hcChoaXN0b3J5U25hcHNob3QpO1xuICAgIGNvbnN0IG5ld0lucHV0Q291bnRzID0gYnVpbGRJdGVtRnJlcXVlbmN5TWFwKG5ld0lucHV0U25hcHNob3QpO1xuICAgIGNvbnN0IGhpc3RvcnlSZWZzID0gYnVpbGRBZ2VudElucHV0UG9vbChoaXN0b3J5U25hcHNob3QpO1xuICAgIGNvbnN0IG5ld0lucHV0UmVmcyA9IGJ1aWxkQWdlbnRJbnB1dFBvb2wobmV3SW5wdXRTbmFwc2hvdCk7XG4gICAgY29uc3QgYXBwZW5kZWQgPSBbXTtcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgY29tYmluZWQpIHtcbiAgICAgICAgY29uc3Qga2V5ID0gZ2V0QWdlbnRJbnB1dEl0ZW1LZXkoaXRlbSk7XG4gICAgICAgIGlmIChyZW1vdmVBZ2VudElucHV0RnJvbVBvb2wobmV3SW5wdXRSZWZzLCBpdGVtKSkge1xuICAgICAgICAgICAgZGVjcmVtZW50Q291bnQobmV3SW5wdXRDb3VudHMsIGtleSk7XG4gICAgICAgICAgICBhcHBlbmRlZC5wdXNoKGl0ZW0pO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlbW92ZUFnZW50SW5wdXRGcm9tUG9vbChoaXN0b3J5UmVmcywgaXRlbSkpIHtcbiAgICAgICAgICAgIGRlY3JlbWVudENvdW50KGhpc3RvcnlDb3VudHMsIGtleSk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBoaXN0b3J5UmVtYWluaW5nID0gaGlzdG9yeUNvdW50cy5nZXQoa2V5KSA/PyAwO1xuICAgICAgICBpZiAoaGlzdG9yeVJlbWFpbmluZyA+IDApIHtcbiAgICAgICAgICAgIGhpc3RvcnlDb3VudHMuc2V0KGtleSwgaGlzdG9yeVJlbWFpbmluZyAtIDEpO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmV3UmVtYWluaW5nID0gbmV3SW5wdXRDb3VudHMuZ2V0KGtleSkgPz8gMDtcbiAgICAgICAgaWYgKG5ld1JlbWFpbmluZyA+IDApIHtcbiAgICAgICAgICAgIG5ld0lucHV0Q291bnRzLnNldChrZXksIG5ld1JlbWFpbmluZyAtIDEpO1xuICAgICAgICAgICAgYXBwZW5kZWQucHVzaChpdGVtKTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGFwcGVuZGVkLnB1c2goaXRlbSk7XG4gICAgfVxuICAgIGNvbnN0IHByZXBhcmVkSXRlbXMgPSBpbmNsdWRlSGlzdG9yeUluUHJlcGFyZWRJbnB1dFxuICAgICAgICA/IGNvbWJpbmVkXG4gICAgICAgIDogYXBwZW5kZWQubGVuZ3RoID4gMFxuICAgICAgICAgICAgPyBhcHBlbmRlZFxuICAgICAgICAgICAgOiBwcmVzZXJ2ZURyb3BwZWROZXdJdGVtc1xuICAgICAgICAgICAgICAgID8gbmV3SW5wdXRTbmFwc2hvdFxuICAgICAgICAgICAgICAgIDogW107XG4gICAgaWYgKHByZXNlcnZlRHJvcHBlZE5ld0l0ZW1zICYmXG4gICAgICAgIGFwcGVuZGVkLmxlbmd0aCA9PT0gMCAmJlxuICAgICAgICBuZXdJbnB1dFNuYXBzaG90Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8gSW4gc2VydmVyLW1hbmFnZWQgY29udmVyc2F0aW9ucyB3ZSBjYW5ub3QgZHJvcCB0aGUgdHVybiBkZWx0YTsgcmVzdG9yZSBpdCBhbmQgd2FybiBjYWxsZXJzLlxuICAgICAgICBsb2dnZXIud2Fybignc2Vzc2lvbklucHV0Q2FsbGJhY2sgZHJvcHBlZCBhbGwgbmV3IGlucHV0cyBpbiBhIHNlcnZlci1tYW5hZ2VkIGNvbnZlcnNhdGlvbjsgb3JpZ2luYWwgdHVybiBpbnB1dHMgd2VyZSByZXN0b3JlZCB0byBhdm9pZCBsb3NpbmcgdGhlIEFQSSBkZWx0YS4gS2VlcCBhdCBsZWFzdCBvbmUgbmV3IGl0ZW0gb3Igb21pdCBjb252ZXJzYXRpb25JZCBpZiB5b3UgaW50ZW5kZWQgdG8gZHJvcCB0aGVtLicpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBwcmVwYXJlZElucHV0OiBwcmVwYXJlZEl0ZW1zLFxuICAgICAgICBzZXNzaW9uSXRlbXM6IGFwcGVuZGVkLFxuICAgIH07XG59XG5mdW5jdGlvbiBub3JtYWxpemVJdGVtc0ZvclNlc3Npb25QZXJzaXN0ZW5jZShpdGVtcykge1xuICAgIHJldHVybiBpdGVtcy5tYXAoKGl0ZW0pID0+IHNhbml0aXplVmFsdWVGb3JTZXNzaW9uKHN0cmlwVHJhbnNpZW50Q2FsbElkcyhpdGVtKSkpO1xufVxuZnVuY3Rpb24gc2FuaXRpemVWYWx1ZUZvclNlc3Npb24odmFsdWUsIGNvbnRleHQgPSB7fSkge1xuICAgIGlmICh2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgY29uc3QgYmluYXJ5ID0gdG9VaW50OEFycmF5RnJvbUJpbmFyeSh2YWx1ZSk7XG4gICAgaWYgKGJpbmFyeSkge1xuICAgICAgICByZXR1cm4gdG9EYXRhVXJsRnJvbUJ5dGVzKGJpbmFyeSwgY29udGV4dC5tZWRpYVR5cGUpO1xuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlLm1hcCgoZW50cnkpID0+IHNhbml0aXplVmFsdWVGb3JTZXNzaW9uKGVudHJ5LCBjb250ZXh0KSk7XG4gICAgfVxuICAgIGlmICghaXNQbGFpbk9iamVjdCh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBjb25zdCByZWNvcmQgPSB2YWx1ZTtcbiAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICBjb25zdCBtZWRpYVR5cGUgPSB0eXBlb2YgcmVjb3JkLm1lZGlhVHlwZSA9PT0gJ3N0cmluZycgJiYgcmVjb3JkLm1lZGlhVHlwZS5sZW5ndGggPiAwXG4gICAgICAgID8gcmVjb3JkLm1lZGlhVHlwZVxuICAgICAgICA6IGNvbnRleHQubWVkaWFUeXBlO1xuICAgIGZvciAoY29uc3QgW2tleSwgZW50cnldIG9mIE9iamVjdC5lbnRyaWVzKHJlY29yZCkpIHtcbiAgICAgICAgY29uc3QgbmV4dENvbnRleHQgPSBrZXkgPT09ICdkYXRhJyB8fCBrZXkgPT09ICdmaWxlRGF0YScgPyB7IG1lZGlhVHlwZSB9IDogY29udGV4dDtcbiAgICAgICAgcmVzdWx0W2tleV0gPSBzYW5pdGl6ZVZhbHVlRm9yU2Vzc2lvbihlbnRyeSwgbmV4dENvbnRleHQpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gdG9EYXRhVXJsRnJvbUJ5dGVzKGJ5dGVzLCBtZWRpYVR5cGUpIHtcbiAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGVVaW50OEFycmF5VG9CYXNlNjQoYnl0ZXMpO1xuICAgIGNvbnN0IHR5cGUgPSBtZWRpYVR5cGUgJiYgIW1lZGlhVHlwZS5zdGFydHNXaXRoKCdkYXRhOicpID8gbWVkaWFUeXBlIDogJ3RleHQvcGxhaW4nO1xuICAgIHJldHVybiBgZGF0YToke3R5cGV9O2Jhc2U2NCwke2Jhc2U2NH1gO1xufVxuZnVuY3Rpb24gaXNQbGFpbk9iamVjdCh2YWx1ZSkge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdvYmplY3QnIHx8IHZhbHVlID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgcHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodmFsdWUpO1xuICAgIHJldHVybiBwcm90byA9PT0gT2JqZWN0LnByb3RvdHlwZSB8fCBwcm90byA9PT0gbnVsbDtcbn1cbmZ1bmN0aW9uIHN0cmlwVHJhbnNpZW50Q2FsbElkcyh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZS5tYXAoKGVudHJ5KSA9PiBzdHJpcFRyYW5zaWVudENhbGxJZHMoZW50cnkpKTtcbiAgICB9XG4gICAgaWYgKCFpc1BsYWluT2JqZWN0KHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIGNvbnN0IHJlY29yZCA9IHZhbHVlO1xuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgIGNvbnN0IGlzUHJvdG9jb2xJdGVtID0gdHlwZW9mIHJlY29yZC50eXBlID09PSAnc3RyaW5nJyAmJiByZWNvcmQudHlwZS5sZW5ndGggPiAwO1xuICAgIGNvbnN0IHNob3VsZFN0cmlwSWQgPSBpc1Byb3RvY29sSXRlbSAmJiBzaG91bGRTdHJpcElkRm9yVHlwZShyZWNvcmQudHlwZSk7XG4gICAgZm9yIChjb25zdCBba2V5LCBlbnRyeV0gb2YgT2JqZWN0LmVudHJpZXMocmVjb3JkKSkge1xuICAgICAgICBpZiAoc2hvdWxkU3RyaXBJZCAmJiBrZXkgPT09ICdpZCcpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHJlc3VsdFtrZXldID0gc3RyaXBUcmFuc2llbnRDYWxsSWRzKGVudHJ5KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIHNob3VsZFN0cmlwSWRGb3JUeXBlKHR5cGUpIHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSAnZnVuY3Rpb25fY2FsbCc6XG4gICAgICAgIGNhc2UgJ2Z1bmN0aW9uX2NhbGxfcmVzdWx0JzpcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cbmFzeW5jIGZ1bmN0aW9uIHBlcnNpc3RSdW5JdGVtc1RvU2Vzc2lvbihvcHRpb25zKSB7XG4gICAgY29uc3QgeyBzZXNzaW9uLCBzdGF0ZSwgbmV3UnVuSXRlbXMsIGV4dHJhSW5wdXRJdGVtcyA9IFtdLCBsYXN0UmVzcG9uc2VJZCwgYWxyZWFkeVBlcnNpc3RlZENvdW50LCB9ID0gb3B0aW9ucztcbiAgICBpZiAoIXNlc3Npb24pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBpdGVtc1RvU2F2ZSA9IFtcbiAgICAgICAgLi4uZXh0cmFJbnB1dEl0ZW1zLFxuICAgICAgICAuLi5leHRyYWN0T3V0cHV0SXRlbXNGcm9tUnVuSXRlbXMobmV3UnVuSXRlbXMpLFxuICAgIF07XG4gICAgaWYgKGl0ZW1zVG9TYXZlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBzdGF0ZS5fY3VycmVudFR1cm5QZXJzaXN0ZWRJdGVtQ291bnQgPVxuICAgICAgICAgICAgYWxyZWFkeVBlcnNpc3RlZENvdW50ICsgbmV3UnVuSXRlbXMubGVuZ3RoO1xuICAgICAgICBhd2FpdCBydW5Db21wYWN0aW9uT25TZXNzaW9uKHNlc3Npb24sIGxhc3RSZXNwb25zZUlkLCBzdGF0ZSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgc2FuaXRpemVkSXRlbXMgPSBub3JtYWxpemVJdGVtc0ZvclNlc3Npb25QZXJzaXN0ZW5jZShpdGVtc1RvU2F2ZSk7XG4gICAgYXdhaXQgc2Vzc2lvbi5hZGRJdGVtcyhzYW5pdGl6ZWRJdGVtcyk7XG4gICAgYXdhaXQgcnVuQ29tcGFjdGlvbk9uU2Vzc2lvbihzZXNzaW9uLCBsYXN0UmVzcG9uc2VJZCwgc3RhdGUpO1xuICAgIHN0YXRlLl9jdXJyZW50VHVyblBlcnNpc3RlZEl0ZW1Db3VudCA9XG4gICAgICAgIGFscmVhZHlQZXJzaXN0ZWRDb3VudCArIG5ld1J1bkl0ZW1zLmxlbmd0aDtcbn1cbmFzeW5jIGZ1bmN0aW9uIHJ1bkNvbXBhY3Rpb25PblNlc3Npb24oc2Vzc2lvbiwgcmVzcG9uc2VJZCwgc3RhdGUpIHtcbiAgICBpZiAoIWlzT3BlbkFJUmVzcG9uc2VzQ29tcGFjdGlvbkF3YXJlU2Vzc2lvbihzZXNzaW9uKSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGNvbXBhY3Rpb25SZXN1bHQgPSBhd2FpdCBzZXNzaW9uLnJ1bkNvbXBhY3Rpb24odHlwZW9mIHJlc3BvbnNlSWQgPT09ICd1bmRlZmluZWQnID8gdW5kZWZpbmVkIDogeyByZXNwb25zZUlkIH0pO1xuICAgIGlmICghY29tcGFjdGlvblJlc3VsdCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHVzYWdlID0gY29tcGFjdGlvblJlc3VsdC51c2FnZTtcbiAgICBzdGF0ZS5fY29udGV4dC51c2FnZS5hZGQobmV3IFVzYWdlKHtcbiAgICAgICAgcmVxdWVzdHM6IDEsXG4gICAgICAgIGlucHV0VG9rZW5zOiB1c2FnZS5pbnB1dFRva2VucyxcbiAgICAgICAgb3V0cHV0VG9rZW5zOiB1c2FnZS5vdXRwdXRUb2tlbnMsXG4gICAgICAgIHRvdGFsVG9rZW5zOiB1c2FnZS50b3RhbFRva2VucyxcbiAgICAgICAgaW5wdXRUb2tlbnNEZXRhaWxzOiB1c2FnZS5pbnB1dFRva2Vuc0RldGFpbHMsXG4gICAgICAgIG91dHB1dFRva2Vuc0RldGFpbHM6IHVzYWdlLm91dHB1dFRva2Vuc0RldGFpbHMsXG4gICAgICAgIHJlcXVlc3RVc2FnZUVudHJpZXM6IFt1c2FnZV0sXG4gICAgfSkpO1xufVxuZnVuY3Rpb24gYnVpbGRJdGVtRnJlcXVlbmN5TWFwKGl0ZW1zKSB7XG4gICAgY29uc3QgY291bnRzID0gbmV3IE1hcCgpO1xuICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtcykge1xuICAgICAgICBjb25zdCBrZXkgPSBnZXRBZ2VudElucHV0SXRlbUtleShpdGVtKTtcbiAgICAgICAgY291bnRzLnNldChrZXksIChjb3VudHMuZ2V0KGtleSkgPz8gMCkgKyAxKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvdW50cztcbn1cbmZ1bmN0aW9uIGRlY3JlbWVudENvdW50KG1hcCwga2V5KSB7XG4gICAgY29uc3QgcmVtYWluaW5nID0gKG1hcC5nZXQoa2V5KSA/PyAwKSAtIDE7XG4gICAgaWYgKHJlbWFpbmluZyA8PSAwKSB7XG4gICAgICAgIG1hcC5kZWxldGUoa2V5KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIG1hcC5zZXQoa2V5LCByZW1haW5pbmcpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNlc3Npb25QZXJzaXN0ZW5jZS5tanMubWFwIiwiLyoqXG4gKiBHZXQgdGhlIGxhc3QgdGV4dCBmcm9tIHRoZSBvdXRwdXQgbWVzc2FnZS5cbiAqIEBwYXJhbSBvdXRwdXRNZXNzYWdlXG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TGFzdFRleHRGcm9tT3V0cHV0TWVzc2FnZShvdXRwdXRNZXNzYWdlKSB7XG4gICAgaWYgKG91dHB1dE1lc3NhZ2UudHlwZSAhPT0gJ21lc3NhZ2UnKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmIChvdXRwdXRNZXNzYWdlLnJvbGUgIT09ICdhc3Npc3RhbnQnKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbnN0IGxhc3RJdGVtID0gb3V0cHV0TWVzc2FnZS5jb250ZW50W291dHB1dE1lc3NhZ2UuY29udGVudC5sZW5ndGggLSAxXTtcbiAgICBpZiAobGFzdEl0ZW0udHlwZSAhPT0gJ291dHB1dF90ZXh0Jykge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gbGFzdEl0ZW0udGV4dDtcbn1cbi8qKlxuICogR2V0IHRoZSBsYXN0IHRleHQgZnJvbSB0aGUgb3V0cHV0IG1lc3NhZ2UuXG4gKiBAcGFyYW0gb3V0cHV0XG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0T3V0cHV0VGV4dChvdXRwdXQpIHtcbiAgICBpZiAob3V0cHV0Lm91dHB1dC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgICByZXR1cm4gKGdldExhc3RUZXh0RnJvbU91dHB1dE1lc3NhZ2Uob3V0cHV0Lm91dHB1dFtvdXRwdXQub3V0cHV0Lmxlbmd0aCAtIDFdKSB8fCAnJyk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tZXNzYWdlcy5tanMubWFwIiwiaW1wb3J0IHsgVG9vbElucHV0R3VhcmRyYWlsVHJpcHdpcmVUcmlnZ2VyZWQsIFRvb2xPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCwgfSBmcm9tIFwiLi4vZXJyb3JzLm1qc1wiO1xuZnVuY3Rpb24gbm9ybWFsaXplQmVoYXZpb3Iob3V0cHV0KSB7XG4gICAgcmV0dXJuIG91dHB1dC5iZWhhdmlvciA/PyB7IHR5cGU6ICdhbGxvdycgfTtcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBydW5Ub29sSW5wdXRHdWFyZHJhaWxzKHsgZ3VhcmRyYWlscywgY29udGV4dCwgYWdlbnQsIHRvb2xDYWxsLCBvblJlc3VsdCwgfSkge1xuICAgIGNvbnN0IGxpc3QgPSBndWFyZHJhaWxzID8/IFtdO1xuICAgIGZvciAoY29uc3QgZ3VhcmRyYWlsIG9mIGxpc3QpIHtcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0gYXdhaXQgZ3VhcmRyYWlsLnJ1bih7XG4gICAgICAgICAgICBjb250ZXh0LFxuICAgICAgICAgICAgYWdlbnQsXG4gICAgICAgICAgICB0b29sQ2FsbCxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGJlaGF2aW9yID0gbm9ybWFsaXplQmVoYXZpb3Iob3V0cHV0KTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0ge1xuICAgICAgICAgICAgZ3VhcmRyYWlsOiB7IHR5cGU6ICd0b29sX2lucHV0JywgbmFtZTogZ3VhcmRyYWlsLm5hbWUgfSxcbiAgICAgICAgICAgIG91dHB1dDogeyAuLi5vdXRwdXQsIGJlaGF2aW9yIH0sXG4gICAgICAgIH07XG4gICAgICAgIG9uUmVzdWx0Py4ocmVzdWx0KTtcbiAgICAgICAgaWYgKGJlaGF2aW9yLnR5cGUgPT09ICdyZWplY3RDb250ZW50Jykge1xuICAgICAgICAgICAgcmV0dXJuIHsgdHlwZTogJ3JlamVjdCcsIG1lc3NhZ2U6IGJlaGF2aW9yLm1lc3NhZ2UgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYmVoYXZpb3IudHlwZSA9PT0gJ3Rocm93RXhjZXB0aW9uJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFRvb2xJbnB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkKGBUb29sIGlucHV0IGd1YXJkcmFpbCB0cmlnZ2VyZWQ6ICR7Z3VhcmRyYWlsLm5hbWV9YCwgcmVzdWx0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4geyB0eXBlOiAnYWxsb3cnIH07XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcnVuVG9vbE91dHB1dEd1YXJkcmFpbHMoeyBndWFyZHJhaWxzLCBjb250ZXh0LCBhZ2VudCwgdG9vbENhbGwsIHRvb2xPdXRwdXQsIG9uUmVzdWx0LCB9KSB7XG4gICAgY29uc3QgbGlzdCA9IGd1YXJkcmFpbHMgPz8gW107XG4gICAgbGV0IGZpbmFsT3V0cHV0ID0gdG9vbE91dHB1dDtcbiAgICBmb3IgKGNvbnN0IGd1YXJkcmFpbCBvZiBsaXN0KSB7XG4gICAgICAgIGNvbnN0IG91dHB1dCA9IGF3YWl0IGd1YXJkcmFpbC5ydW4oe1xuICAgICAgICAgICAgY29udGV4dCxcbiAgICAgICAgICAgIGFnZW50LFxuICAgICAgICAgICAgdG9vbENhbGwsXG4gICAgICAgICAgICBvdXRwdXQ6IHRvb2xPdXRwdXQsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBiZWhhdmlvciA9IG5vcm1hbGl6ZUJlaGF2aW9yKG91dHB1dCk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHtcbiAgICAgICAgICAgIGd1YXJkcmFpbDogeyB0eXBlOiAndG9vbF9vdXRwdXQnLCBuYW1lOiBndWFyZHJhaWwubmFtZSB9LFxuICAgICAgICAgICAgb3V0cHV0OiB7IC4uLm91dHB1dCwgYmVoYXZpb3IgfSxcbiAgICAgICAgfTtcbiAgICAgICAgb25SZXN1bHQ/LihyZXN1bHQpO1xuICAgICAgICBpZiAoYmVoYXZpb3IudHlwZSA9PT0gJ3JlamVjdENvbnRlbnQnKSB7XG4gICAgICAgICAgICBmaW5hbE91dHB1dCA9IGJlaGF2aW9yLm1lc3NhZ2U7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBpZiAoYmVoYXZpb3IudHlwZSA9PT0gJ3Rocm93RXhjZXB0aW9uJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFRvb2xPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZChgVG9vbCBvdXRwdXQgZ3VhcmRyYWlsIHRyaWdnZXJlZDogJHtndWFyZHJhaWwubmFtZX1gLCByZXN1bHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmaW5hbE91dHB1dDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRvb2xHdWFyZHJhaWxzLm1qcy5tYXAiLCJpbXBvcnQgeyBjb25zdW1lQWdlbnRUb29sUnVuUmVzdWx0LCB9IGZyb20gXCIuLi9hZ2VudC5tanNcIjtcbmltcG9ydCB7IFRvb2xDYWxsRXJyb3IsIFVzZXJFcnJvciB9IGZyb20gXCIuLi9lcnJvcnMubWpzXCI7XG5pbXBvcnQgeyBnZXRUcmFuc2Zlck1lc3NhZ2UgfSBmcm9tIFwiLi4vaGFuZG9mZi5tanNcIjtcbmltcG9ydCB7IFJ1bkhhbmRvZmZPdXRwdXRJdGVtLCBSdW5Ub29sQXBwcm92YWxJdGVtLCBSdW5Ub29sQ2FsbE91dHB1dEl0ZW0sIH0gZnJvbSBcIi4uL2l0ZW1zLm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IHsgcmVzb2x2ZUNvbXB1dGVyIH0gZnJvbSBcIi4uL3Rvb2wubWpzXCI7XG5pbXBvcnQgeyBlbmNvZGVVaW50OEFycmF5VG9CYXNlNjQgfSBmcm9tIFwiLi4vdXRpbHMvYmFzZTY0Lm1qc1wiO1xuaW1wb3J0IHsgdG9TbWFydFN0cmluZyB9IGZyb20gXCIuLi91dGlscy9zbWFydFN0cmluZy5tanNcIjtcbmltcG9ydCB7IGlzWm9kT2JqZWN0IH0gZnJvbSBcIi4uL3V0aWxzL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgd2l0aEZ1bmN0aW9uU3Bhbiwgd2l0aEhhbmRvZmZTcGFuIH0gZnJvbSBcIi4uL3RyYWNpbmcvY3JlYXRlU3BhbnMubWpzXCI7XG5pbXBvcnQgeyBydW5Ub29sSW5wdXRHdWFyZHJhaWxzLCBydW5Ub29sT3V0cHV0R3VhcmRyYWlscywgfSBmcm9tIFwiLi4vdXRpbHMvdG9vbEd1YXJkcmFpbHMubWpzXCI7XG5pbXBvcnQgeyBTaW5nbGVTdGVwUmVzdWx0IH0gZnJvbSBcIi4vc3RlcHMubWpzXCI7XG5jb25zdCBUT09MX0FQUFJPVkFMX1JFSkVDVElPTl9NRVNTQUdFID0gJ1Rvb2wgZXhlY3V0aW9uIHdhcyBub3QgYXBwcm92ZWQuJztcbi8qKlxuICogQGludGVybmFsXG4gKiBOb3JtYWxpemVzIHRvb2wgb3V0cHV0cyBvbmNlIHNvIGRvd25zdHJlYW0gY29kZSB3b3JrcyB3aXRoIGZ1bGx5IHN0cnVjdHVyZWQgcHJvdG9jb2wgaXRlbXMuXG4gKiBEb2luZyB0aGlzIGhlcmUga2VlcHMgQVBJIHN1cmZhY2Ugc3RhYmxlIGV2ZW4gd2hlbiBwcm92aWRlcnMgYWRkIG5ldyBzaGFwZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUb29sQ2FsbE91dHB1dEl0ZW0odG9vbENhbGwsIG91dHB1dCkge1xuICAgIGNvbnN0IG1heWJlU3RydWN0dXJlZE91dHB1dHMgPSBub3JtYWxpemVTdHJ1Y3R1cmVkVG9vbE91dHB1dHMob3V0cHV0KTtcbiAgICBpZiAobWF5YmVTdHJ1Y3R1cmVkT3V0cHV0cykge1xuICAgICAgICBjb25zdCBzdHJ1Y3R1cmVkSXRlbXMgPSBtYXliZVN0cnVjdHVyZWRPdXRwdXRzLm1hcChjb252ZXJ0U3RydWN0dXJlZFRvb2xPdXRwdXRUb0lucHV0SXRlbSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiAnZnVuY3Rpb25fY2FsbF9yZXN1bHQnLFxuICAgICAgICAgICAgbmFtZTogdG9vbENhbGwubmFtZSxcbiAgICAgICAgICAgIGNhbGxJZDogdG9vbENhbGwuY2FsbElkLFxuICAgICAgICAgICAgc3RhdHVzOiAnY29tcGxldGVkJyxcbiAgICAgICAgICAgIG91dHB1dDogc3RydWN0dXJlZEl0ZW1zLFxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnZnVuY3Rpb25fY2FsbF9yZXN1bHQnLFxuICAgICAgICBuYW1lOiB0b29sQ2FsbC5uYW1lLFxuICAgICAgICBjYWxsSWQ6IHRvb2xDYWxsLmNhbGxJZCxcbiAgICAgICAgc3RhdHVzOiAnY29tcGxldGVkJyxcbiAgICAgICAgb3V0cHV0OiB7XG4gICAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgICB0ZXh0OiB0b1NtYXJ0U3RyaW5nKG91dHB1dCksXG4gICAgICAgIH0sXG4gICAgfTtcbn1cbi8qKlxuICogQGludGVybmFsXG4gKiBSdW5zIGV2ZXJ5IGZ1bmN0aW9uIHRvb2wgY2FsbCByZXF1ZXN0ZWQgYnkgdGhlIG1vZGVsIGFuZCByZXR1cm5zIHRoZWlyIG91dHB1dHMgYWxvbmdzaWRlXG4gKiB0aGUgYFJ1bkl0ZW1gIGluc3RhbmNlcyB0aGF0IHNob3VsZCBiZSBhcHBlbmRlZCB0byBoaXN0b3J5LlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXhlY3V0ZUZ1bmN0aW9uVG9vbENhbGxzKGFnZW50LCB0b29sUnVucywgcnVubmVyLCBzdGF0ZSkge1xuICAgIGNvbnN0IGRlcHMgPSB7IGFnZW50LCBydW5uZXIsIHN0YXRlIH07XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsKHRvb2xSdW5zLm1hcChhc3luYyAodG9vbFJ1bikgPT4ge1xuICAgICAgICAgICAgY29uc3QgcGFyc2VkQXJncyA9IHBhcnNlVG9vbEFyZ3VtZW50cyh0b29sUnVuKTtcbiAgICAgICAgICAgIGNvbnN0IGFwcHJvdmFsT3V0Y29tZSA9IGF3YWl0IGhhbmRsZUZ1bmN0aW9uQXBwcm92YWwoZGVwcywgdG9vbFJ1biwgcGFyc2VkQXJncyk7XG4gICAgICAgICAgICBpZiAoYXBwcm92YWxPdXRjb21lICE9PSAnYXBwcm92ZWQnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFwcHJvdmFsT3V0Y29tZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBydW5BcHByb3ZlZEZ1bmN0aW9uVG9vbChkZXBzLCB0b29sUnVuKTtcbiAgICAgICAgfSkpO1xuICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRvb2xDYWxsRXJyb3IoYEZhaWxlZCB0byBydW4gZnVuY3Rpb24gdG9vbHM6ICR7ZX1gLCBlLCBzdGF0ZSk7XG4gICAgfVxufVxuZnVuY3Rpb24gcGFyc2VUb29sQXJndW1lbnRzKHRvb2xSdW4pIHtcbiAgICBsZXQgcGFyc2VkQXJncyA9IHRvb2xSdW4udG9vbENhbGwuYXJndW1lbnRzO1xuICAgIGlmICh0b29sUnVuLnRvb2wucGFyYW1ldGVycykge1xuICAgICAgICBpZiAoaXNab2RPYmplY3QodG9vbFJ1bi50b29sLnBhcmFtZXRlcnMpKSB7XG4gICAgICAgICAgICBwYXJzZWRBcmdzID0gdG9vbFJ1bi50b29sLnBhcmFtZXRlcnMucGFyc2UocGFyc2VkQXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwYXJzZWRBcmdzID0gSlNPTi5wYXJzZShwYXJzZWRBcmdzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcGFyc2VkQXJncztcbn1cbmZ1bmN0aW9uIGJ1aWxkQXBwcm92YWxSZXF1ZXN0UmVzdWx0KGRlcHMsIHRvb2xSdW4pIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnZnVuY3Rpb25fYXBwcm92YWwnLFxuICAgICAgICB0b29sOiB0b29sUnVuLnRvb2wsXG4gICAgICAgIHJ1bkl0ZW06IG5ldyBSdW5Ub29sQXBwcm92YWxJdGVtKHRvb2xSdW4udG9vbENhbGwsIGRlcHMuYWdlbnQpLFxuICAgIH07XG59XG5hc3luYyBmdW5jdGlvbiBidWlsZEFwcHJvdmFsUmVqZWN0aW9uUmVzdWx0KGRlcHMsIHRvb2xSdW4pIHtcbiAgICBjb25zdCB7IGFnZW50IH0gPSBkZXBzO1xuICAgIHJldHVybiB3aXRoRnVuY3Rpb25TcGFuKGFzeW5jIChzcGFuKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gJ1Rvb2wgZXhlY3V0aW9uIHdhcyBub3QgYXBwcm92ZWQuJztcbiAgICAgICAgc3Bhbi5zZXRFcnJvcih7XG4gICAgICAgICAgICBtZXNzYWdlOiByZXNwb25zZSxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICB0b29sX25hbWU6IHRvb2xSdW4udG9vbC5uYW1lLFxuICAgICAgICAgICAgICAgIGVycm9yOiBgVG9vbCBleGVjdXRpb24gZm9yICR7dG9vbFJ1bi50b29sQ2FsbC5jYWxsSWR9IHdhcyBtYW51YWxseSByZWplY3RlZCBieSB1c2VyLmAsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgc3Bhbi5zcGFuRGF0YS5vdXRwdXQgPSByZXNwb25zZTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbl9vdXRwdXQnLFxuICAgICAgICAgICAgdG9vbDogdG9vbFJ1bi50b29sLFxuICAgICAgICAgICAgb3V0cHV0OiByZXNwb25zZSxcbiAgICAgICAgICAgIHJ1bkl0ZW06IG5ldyBSdW5Ub29sQ2FsbE91dHB1dEl0ZW0oZ2V0VG9vbENhbGxPdXRwdXRJdGVtKHRvb2xSdW4udG9vbENhbGwsIHJlc3BvbnNlKSwgYWdlbnQsIHJlc3BvbnNlKSxcbiAgICAgICAgfTtcbiAgICB9LCB7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIG5hbWU6IHRvb2xSdW4udG9vbC5uYW1lLFxuICAgICAgICB9LFxuICAgIH0pO1xufVxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlRnVuY3Rpb25BcHByb3ZhbChkZXBzLCB0b29sUnVuLCBwYXJzZWRBcmdzKSB7XG4gICAgY29uc3QgeyBzdGF0ZSB9ID0gZGVwcztcbiAgICBjb25zdCBuZWVkc0FwcHJvdmFsID0gYXdhaXQgdG9vbFJ1bi50b29sLm5lZWRzQXBwcm92YWwoc3RhdGUuX2NvbnRleHQsIHBhcnNlZEFyZ3MsIHRvb2xSdW4udG9vbENhbGwuY2FsbElkKTtcbiAgICBpZiAoIW5lZWRzQXBwcm92YWwpIHtcbiAgICAgICAgcmV0dXJuICdhcHByb3ZlZCc7XG4gICAgfVxuICAgIGNvbnN0IGFwcHJvdmFsID0gc3RhdGUuX2NvbnRleHQuaXNUb29sQXBwcm92ZWQoe1xuICAgICAgICB0b29sTmFtZTogdG9vbFJ1bi50b29sLm5hbWUsXG4gICAgICAgIGNhbGxJZDogdG9vbFJ1bi50b29sQ2FsbC5jYWxsSWQsXG4gICAgfSk7XG4gICAgaWYgKGFwcHJvdmFsID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gYXdhaXQgYnVpbGRBcHByb3ZhbFJlamVjdGlvblJlc3VsdChkZXBzLCB0b29sUnVuKTtcbiAgICB9XG4gICAgaWYgKGFwcHJvdmFsICE9PSB0cnVlKSB7XG4gICAgICAgIHJldHVybiBidWlsZEFwcHJvdmFsUmVxdWVzdFJlc3VsdChkZXBzLCB0b29sUnVuKTtcbiAgICB9XG4gICAgcmV0dXJuICdhcHByb3ZlZCc7XG59XG5hc3luYyBmdW5jdGlvbiBydW5BcHByb3ZlZEZ1bmN0aW9uVG9vbChkZXBzLCB0b29sUnVuKSB7XG4gICAgY29uc3QgeyBhZ2VudCwgcnVubmVyLCBzdGF0ZSB9ID0gZGVwcztcbiAgICByZXR1cm4gd2l0aEZ1bmN0aW9uU3Bhbihhc3luYyAoc3BhbikgPT4ge1xuICAgICAgICBpZiAocnVubmVyLmNvbmZpZy50cmFjZUluY2x1ZGVTZW5zaXRpdmVEYXRhKSB7XG4gICAgICAgICAgICBzcGFuLnNwYW5EYXRhLmlucHV0ID0gdG9vbFJ1bi50b29sQ2FsbC5hcmd1bWVudHM7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGlucHV0R3VhcmRyYWlsUmVzdWx0ID0gYXdhaXQgcnVuVG9vbElucHV0R3VhcmRyYWlscyh7XG4gICAgICAgICAgICAgICAgZ3VhcmRyYWlsczogdG9vbFJ1bi50b29sLmlucHV0R3VhcmRyYWlscyxcbiAgICAgICAgICAgICAgICBjb250ZXh0OiBzdGF0ZS5fY29udGV4dCxcbiAgICAgICAgICAgICAgICBhZ2VudCxcbiAgICAgICAgICAgICAgICB0b29sQ2FsbDogdG9vbFJ1bi50b29sQ2FsbCxcbiAgICAgICAgICAgICAgICBvblJlc3VsdDogKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fdG9vbElucHV0R3VhcmRyYWlsUmVzdWx0cy5wdXNoKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZW1pdFRvb2xTdGFydChydW5uZXIsIHN0YXRlLl9jb250ZXh0LCBhZ2VudCwgdG9vbFJ1bi50b29sLCB0b29sUnVuLnRvb2xDYWxsKTtcbiAgICAgICAgICAgIGxldCB0b29sT3V0cHV0O1xuICAgICAgICAgICAgaWYgKGlucHV0R3VhcmRyYWlsUmVzdWx0LnR5cGUgPT09ICdyZWplY3QnKSB7XG4gICAgICAgICAgICAgICAgdG9vbE91dHB1dCA9IGlucHV0R3VhcmRyYWlsUmVzdWx0Lm1lc3NhZ2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0b29sT3V0cHV0ID0gYXdhaXQgdG9vbFJ1bi50b29sLmludm9rZShzdGF0ZS5fY29udGV4dCwgdG9vbFJ1bi50b29sQ2FsbC5hcmd1bWVudHMsIHsgdG9vbENhbGw6IHRvb2xSdW4udG9vbENhbGwgfSk7XG4gICAgICAgICAgICAgICAgdG9vbE91dHB1dCA9IGF3YWl0IHJ1blRvb2xPdXRwdXRHdWFyZHJhaWxzKHtcbiAgICAgICAgICAgICAgICAgICAgZ3VhcmRyYWlsczogdG9vbFJ1bi50b29sLm91dHB1dEd1YXJkcmFpbHMsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQ6IHN0YXRlLl9jb250ZXh0LFxuICAgICAgICAgICAgICAgICAgICBhZ2VudCxcbiAgICAgICAgICAgICAgICAgICAgdG9vbENhbGw6IHRvb2xSdW4udG9vbENhbGwsXG4gICAgICAgICAgICAgICAgICAgIHRvb2xPdXRwdXQsXG4gICAgICAgICAgICAgICAgICAgIG9uUmVzdWx0OiAocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fdG9vbE91dHB1dEd1YXJkcmFpbFJlc3VsdHMucHVzaChyZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgc3RyaW5nUmVzdWx0ID0gdG9TbWFydFN0cmluZyh0b29sT3V0cHV0KTtcbiAgICAgICAgICAgIGVtaXRUb29sRW5kKHJ1bm5lciwgc3RhdGUuX2NvbnRleHQsIGFnZW50LCB0b29sUnVuLnRvb2wsIHN0cmluZ1Jlc3VsdCwgdG9vbFJ1bi50b29sQ2FsbCk7XG4gICAgICAgICAgICBpZiAocnVubmVyLmNvbmZpZy50cmFjZUluY2x1ZGVTZW5zaXRpdmVEYXRhKSB7XG4gICAgICAgICAgICAgICAgc3Bhbi5zcGFuRGF0YS5vdXRwdXQgPSBzdHJpbmdSZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBmdW5jdGlvblJlc3VsdCA9IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnZnVuY3Rpb25fb3V0cHV0JyxcbiAgICAgICAgICAgICAgICB0b29sOiB0b29sUnVuLnRvb2wsXG4gICAgICAgICAgICAgICAgb3V0cHV0OiB0b29sT3V0cHV0LFxuICAgICAgICAgICAgICAgIHJ1bkl0ZW06IG5ldyBSdW5Ub29sQ2FsbE91dHB1dEl0ZW0oZ2V0VG9vbENhbGxPdXRwdXRJdGVtKHRvb2xSdW4udG9vbENhbGwsIHRvb2xPdXRwdXQpLCBhZ2VudCwgdG9vbE91dHB1dCksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgbmVzdGVkUnVuUmVzdWx0ID0gY29uc3VtZUFnZW50VG9vbFJ1blJlc3VsdCh0b29sUnVuLnRvb2xDYWxsKTtcbiAgICAgICAgICAgIGlmIChuZXN0ZWRSdW5SZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBmdW5jdGlvblJlc3VsdC5hZ2VudFJ1blJlc3VsdCA9IG5lc3RlZFJ1blJlc3VsdDtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXN0ZWRJbnRlcnJ1cHRpb25zID0gbmVzdGVkUnVuUmVzdWx0LmludGVycnVwdGlvbnM7XG4gICAgICAgICAgICAgICAgaWYgKG5lc3RlZEludGVycnVwdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvblJlc3VsdC5pbnRlcnJ1cHRpb25zID0gbmVzdGVkSW50ZXJydXB0aW9ucztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb25SZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBzcGFuLnNldEVycm9yKHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnRXJyb3IgcnVubmluZyB0b29sJyxcbiAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIHRvb2xfbmFtZTogdG9vbFJ1bi50b29sLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBTdHJpbmcoZXJyb3IpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yUmVzdWx0ID0gU3RyaW5nKGVycm9yKTtcbiAgICAgICAgICAgIGVtaXRUb29sRW5kKHJ1bm5lciwgc3RhdGUuX2NvbnRleHQsIGFnZW50LCB0b29sUnVuLnRvb2wsIGVycm9yUmVzdWx0LCB0b29sUnVuLnRvb2xDYWxsKTtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBuYW1lOiB0b29sUnVuLnRvb2wubmFtZSxcbiAgICAgICAgfSxcbiAgICB9KTtcbn1cbi8qKlxuICogQGludGVybmFsXG4gKi9cbi8vIEludGVybmFsIGhlbHBlcjogZGlzcGF0Y2ggYSBjb21wdXRlciBhY3Rpb24gYW5kIHJldHVybiBhIHNjcmVlbnNob3QgKHN5bmMvYXN5bmMpXG5hc3luYyBmdW5jdGlvbiBfcnVuQ29tcHV0ZXJBY3Rpb25BbmRTY3JlZW5zaG90KGNvbXB1dGVyLCB0b29sQ2FsbCkge1xuICAgIGNvbnN0IGFjdGlvbiA9IHRvb2xDYWxsLmFjdGlvbjtcbiAgICBsZXQgc2NyZWVuc2hvdDtcbiAgICAvLyBEaXNwYXRjaCBiYXNlZCBvbiBhY3Rpb24gdHlwZSBzdHJpbmcgKGFzc3VtZSBhY3Rpb24udHlwZSBleGlzdHMpXG4gICAgc3dpdGNoIChhY3Rpb24udHlwZSkge1xuICAgICAgICBjYXNlICdjbGljayc6XG4gICAgICAgICAgICBhd2FpdCBjb21wdXRlci5jbGljayhhY3Rpb24ueCwgYWN0aW9uLnksIGFjdGlvbi5idXR0b24pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2RvdWJsZV9jbGljayc6XG4gICAgICAgICAgICBhd2FpdCBjb21wdXRlci5kb3VibGVDbGljayhhY3Rpb24ueCwgYWN0aW9uLnkpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2RyYWcnOlxuICAgICAgICAgICAgYXdhaXQgY29tcHV0ZXIuZHJhZyhhY3Rpb24ucGF0aC5tYXAoKHApID0+IFtwLngsIHAueV0pKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdrZXlwcmVzcyc6XG4gICAgICAgICAgICBhd2FpdCBjb21wdXRlci5rZXlwcmVzcyhhY3Rpb24ua2V5cyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnbW92ZSc6XG4gICAgICAgICAgICBhd2FpdCBjb21wdXRlci5tb3ZlKGFjdGlvbi54LCBhY3Rpb24ueSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnc2NyZWVuc2hvdCc6XG4gICAgICAgICAgICBzY3JlZW5zaG90ID0gYXdhaXQgY29tcHV0ZXIuc2NyZWVuc2hvdCgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3Njcm9sbCc6XG4gICAgICAgICAgICBhd2FpdCBjb21wdXRlci5zY3JvbGwoYWN0aW9uLngsIGFjdGlvbi55LCBhY3Rpb24uc2Nyb2xsX3gsIGFjdGlvbi5zY3JvbGxfeSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAndHlwZSc6XG4gICAgICAgICAgICBhd2FpdCBjb21wdXRlci50eXBlKGFjdGlvbi50ZXh0KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICd3YWl0JzpcbiAgICAgICAgICAgIGF3YWl0IGNvbXB1dGVyLndhaXQoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgYWN0aW9uOyAvLyBlbnN1cmVzIHRoYXQgd2UgaGFuZGxlIGV2ZXJ5IGFjdGlvbiB3ZSBrbm93IG9mXG4gICAgICAgICAgICAvLyBVbmtub3duIGFjdGlvbiwganVzdCB0YWtlIHNjcmVlbnNob3RcbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHNjcmVlbnNob3QgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBzY3JlZW5zaG90O1xuICAgIH1cbiAgICAvLyBBbHdheXMgcmV0dXJuIHNjcmVlbnNob3QgYXMgYmFzZTY0IHN0cmluZ1xuICAgIGlmICh0eXBlb2YgY29tcHV0ZXIuc2NyZWVuc2hvdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBzY3JlZW5zaG90ID0gYXdhaXQgY29tcHV0ZXIuc2NyZWVuc2hvdCgpO1xuICAgICAgICBpZiAodHlwZW9mIHNjcmVlbnNob3QgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICByZXR1cm4gc2NyZWVuc2hvdDtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvbXB1dGVyIGRvZXMgbm90IGltcGxlbWVudCBzY3JlZW5zaG90KCknKTtcbn1cbmZ1bmN0aW9uIHRvRXJyb3JNZXNzYWdlKGVycm9yKSB7XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIGVycm9yLm1lc3NhZ2UgfHwgZXJyb3IudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGVycm9yKTtcbiAgICB9XG4gICAgY2F0Y2gge1xuICAgICAgICByZXR1cm4gU3RyaW5nKGVycm9yKTtcbiAgICB9XG59XG5hc3luYyBmdW5jdGlvbiByZXNvbHZlVG9vbEFwcHJvdmFsKG9wdGlvbnMpIHtcbiAgICBjb25zdCB7IHJ1bkNvbnRleHQsIHRvb2xOYW1lLCBjYWxsSWQsIGFwcHJvdmFsSXRlbSwgbmVlZHNBcHByb3ZhbCwgb25BcHByb3ZhbCwgfSA9IG9wdGlvbnM7XG4gICAgaWYgKCFuZWVkc0FwcHJvdmFsKSB7XG4gICAgICAgIHJldHVybiAnYXBwcm92ZWQnO1xuICAgIH1cbiAgICBpZiAob25BcHByb3ZhbCkge1xuICAgICAgICBjb25zdCBkZWNpc2lvbiA9IGF3YWl0IG9uQXBwcm92YWwocnVuQ29udGV4dCwgYXBwcm92YWxJdGVtKTtcbiAgICAgICAgaWYgKGRlY2lzaW9uLmFwcHJvdmUgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHJ1bkNvbnRleHQuYXBwcm92ZVRvb2woYXBwcm92YWxJdGVtKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkZWNpc2lvbi5hcHByb3ZlID09PSBmYWxzZSkge1xuICAgICAgICAgICAgcnVuQ29udGV4dC5yZWplY3RUb29sKGFwcHJvdmFsSXRlbSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgYXBwcm92YWwgPSBydW5Db250ZXh0LmlzVG9vbEFwcHJvdmVkKHtcbiAgICAgICAgdG9vbE5hbWUsXG4gICAgICAgIGNhbGxJZCxcbiAgICB9KTtcbiAgICBpZiAoYXBwcm92YWwgPT09IHRydWUpIHtcbiAgICAgICAgcmV0dXJuICdhcHByb3ZlZCc7XG4gICAgfVxuICAgIGlmIChhcHByb3ZhbCA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuICdyZWplY3RlZCc7XG4gICAgfVxuICAgIHJldHVybiAncGVuZGluZyc7XG59XG5hc3luYyBmdW5jdGlvbiBoYW5kbGVUb29sQXBwcm92YWxEZWNpc2lvbihvcHRpb25zKSB7XG4gICAgY29uc3QgeyBydW5Db250ZXh0LCB0b29sTmFtZSwgY2FsbElkLCBhcHByb3ZhbEl0ZW0sIG5lZWRzQXBwcm92YWwsIG9uQXBwcm92YWwsIGJ1aWxkUmVqZWN0aW9uSXRlbSwgfSA9IG9wdGlvbnM7XG4gICAgY29uc3QgYXBwcm92YWxTdGF0ZSA9IGF3YWl0IHJlc29sdmVUb29sQXBwcm92YWwoe1xuICAgICAgICBydW5Db250ZXh0LFxuICAgICAgICB0b29sTmFtZSxcbiAgICAgICAgY2FsbElkLFxuICAgICAgICBhcHByb3ZhbEl0ZW0sXG4gICAgICAgIG5lZWRzQXBwcm92YWwsXG4gICAgICAgIG9uQXBwcm92YWwsXG4gICAgfSk7XG4gICAgaWYgKGFwcHJvdmFsU3RhdGUgPT09ICdyZWplY3RlZCcpIHtcbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiAncmVqZWN0ZWQnLCBpdGVtOiBidWlsZFJlamVjdGlvbkl0ZW0oKSB9O1xuICAgIH1cbiAgICBpZiAoYXBwcm92YWxTdGF0ZSA9PT0gJ3BlbmRpbmcnKSB7XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogJ3BlbmRpbmcnLCBpdGVtOiBhcHByb3ZhbEl0ZW0gfTtcbiAgICB9XG4gICAgcmV0dXJuIHsgc3RhdHVzOiAnYXBwcm92ZWQnIH07XG59XG5mdW5jdGlvbiBlbWl0VG9vbFN0YXJ0KHJ1bm5lciwgcnVuQ29udGV4dCwgYWdlbnQsIHRvb2wsIHRvb2xDYWxsKSB7XG4gICAgcnVubmVyLmVtaXQoJ2FnZW50X3Rvb2xfc3RhcnQnLCBydW5Db250ZXh0LCBhZ2VudCwgdG9vbCwgeyB0b29sQ2FsbCB9KTtcbiAgICBpZiAodHlwZW9mIGFnZW50LmVtaXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgYWdlbnQuZW1pdCgnYWdlbnRfdG9vbF9zdGFydCcsIHJ1bkNvbnRleHQsIHRvb2wsIHsgdG9vbENhbGwgfSk7XG4gICAgfVxufVxuZnVuY3Rpb24gZW1pdFRvb2xFbmQocnVubmVyLCBydW5Db250ZXh0LCBhZ2VudCwgdG9vbCwgb3V0cHV0LCB0b29sQ2FsbCkge1xuICAgIHJ1bm5lci5lbWl0KCdhZ2VudF90b29sX2VuZCcsIHJ1bkNvbnRleHQsIGFnZW50LCB0b29sLCBvdXRwdXQsIHsgdG9vbENhbGwgfSk7XG4gICAgaWYgKHR5cGVvZiBhZ2VudC5lbWl0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGFnZW50LmVtaXQoJ2FnZW50X3Rvb2xfZW5kJywgcnVuQ29udGV4dCwgdG9vbCwgb3V0cHV0LCB7IHRvb2xDYWxsIH0pO1xuICAgIH1cbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleGVjdXRlU2hlbGxBY3Rpb25zKGFnZW50LCBhY3Rpb25zLCBydW5uZXIsIHJ1bkNvbnRleHQsIGN1c3RvbUxvZ2dlciA9IHVuZGVmaW5lZCkge1xuICAgIGNvbnN0IF9sb2dnZXIgPSBjdXN0b21Mb2dnZXIgPz8gbG9nZ2VyO1xuICAgIGNvbnN0IHJlc3VsdHMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IGFjdGlvbiBvZiBhY3Rpb25zKSB7XG4gICAgICAgIGNvbnN0IHNoZWxsVG9vbCA9IGFjdGlvbi5zaGVsbDtcbiAgICAgICAgY29uc3QgdG9vbENhbGwgPSBhY3Rpb24udG9vbENhbGw7XG4gICAgICAgIGNvbnN0IGFwcHJvdmFsSXRlbSA9IG5ldyBSdW5Ub29sQXBwcm92YWxJdGVtKHRvb2xDYWxsLCBhZ2VudCwgc2hlbGxUb29sLm5hbWUpO1xuICAgICAgICBjb25zdCBhcHByb3ZhbERlY2lzaW9uID0gYXdhaXQgaGFuZGxlVG9vbEFwcHJvdmFsRGVjaXNpb24oe1xuICAgICAgICAgICAgcnVuQ29udGV4dCxcbiAgICAgICAgICAgIHRvb2xOYW1lOiBzaGVsbFRvb2wubmFtZSxcbiAgICAgICAgICAgIGNhbGxJZDogdG9vbENhbGwuY2FsbElkLFxuICAgICAgICAgICAgYXBwcm92YWxJdGVtLFxuICAgICAgICAgICAgbmVlZHNBcHByb3ZhbDogYXdhaXQgc2hlbGxUb29sLm5lZWRzQXBwcm92YWwocnVuQ29udGV4dCwgdG9vbENhbGwuYWN0aW9uLCB0b29sQ2FsbC5jYWxsSWQpLFxuICAgICAgICAgICAgb25BcHByb3ZhbDogc2hlbGxUb29sLm9uQXBwcm92YWwsXG4gICAgICAgICAgICBidWlsZFJlamVjdGlvbkl0ZW06ICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IFRPT0xfQVBQUk9WQUxfUkVKRUNUSU9OX01FU1NBR0U7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVqZWN0aW9uT3V0cHV0ID0ge1xuICAgICAgICAgICAgICAgICAgICBzdGRvdXQ6ICcnLFxuICAgICAgICAgICAgICAgICAgICBzdGRlcnI6IHJlc3BvbnNlLFxuICAgICAgICAgICAgICAgICAgICBvdXRjb21lOiB7IHR5cGU6ICdleGl0JywgZXhpdENvZGU6IG51bGwgfSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUnVuVG9vbENhbGxPdXRwdXRJdGVtKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3NoZWxsX2NhbGxfb3V0cHV0JyxcbiAgICAgICAgICAgICAgICAgICAgY2FsbElkOiB0b29sQ2FsbC5jYWxsSWQsXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dDogW3JlamVjdGlvbk91dHB1dF0sXG4gICAgICAgICAgICAgICAgfSwgYWdlbnQsIHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoYXBwcm92YWxEZWNpc2lvbi5zdGF0dXMgIT09ICdhcHByb3ZlZCcpIHtcbiAgICAgICAgICAgIHJlc3VsdHMucHVzaChhcHByb3ZhbERlY2lzaW9uLml0ZW0pO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgZW1pdFRvb2xTdGFydChydW5uZXIsIHJ1bkNvbnRleHQsIGFnZW50LCBzaGVsbFRvb2wsIHRvb2xDYWxsKTtcbiAgICAgICAgbGV0IHNoZWxsT3V0cHV0cztcbiAgICAgICAgY29uc3QgcHJvdmlkZXJNZXRhID0ge307XG4gICAgICAgIGxldCBtYXhPdXRwdXRMZW5ndGg7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBzaGVsbFJlc3VsdCA9IGF3YWl0IHNoZWxsVG9vbC5zaGVsbC5ydW4odG9vbENhbGwuYWN0aW9uKTtcbiAgICAgICAgICAgIHNoZWxsT3V0cHV0cyA9IHNoZWxsUmVzdWx0Lm91dHB1dCA/PyBbXTtcbiAgICAgICAgICAgIGlmIChzaGVsbFJlc3VsdC5wcm92aWRlckRhdGEpIHtcbiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHByb3ZpZGVyTWV0YSwgc2hlbGxSZXN1bHQucHJvdmlkZXJEYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc2hlbGxSZXN1bHQubWF4T3V0cHV0TGVuZ3RoID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgIG1heE91dHB1dExlbmd0aCA9IHNoZWxsUmVzdWx0Lm1heE91dHB1dExlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvclRleHQgPSB0b0Vycm9yTWVzc2FnZShlcnIpO1xuICAgICAgICAgICAgc2hlbGxPdXRwdXRzID0gW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgc3Rkb3V0OiAnJyxcbiAgICAgICAgICAgICAgICAgICAgc3RkZXJyOiBlcnJvclRleHQsXG4gICAgICAgICAgICAgICAgICAgIG91dGNvbWU6IHsgdHlwZTogJ2V4aXQnLCBleGl0Q29kZTogbnVsbCB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgX2xvZ2dlci5lcnJvcignRmFpbGVkIHRvIGV4ZWN1dGUgc2hlbGwgYWN0aW9uOicsIGVycik7XG4gICAgICAgIH1cbiAgICAgICAgc2hlbGxPdXRwdXRzID0gc2hlbGxPdXRwdXRzID8/IFtdO1xuICAgICAgICBlbWl0VG9vbEVuZChydW5uZXIsIHJ1bkNvbnRleHQsIGFnZW50LCBzaGVsbFRvb2wsIEpTT04uc3RyaW5naWZ5KHNoZWxsT3V0cHV0cyksIHRvb2xDYWxsKTtcbiAgICAgICAgY29uc3QgcmF3SXRlbSA9IHtcbiAgICAgICAgICAgIHR5cGU6ICdzaGVsbF9jYWxsX291dHB1dCcsXG4gICAgICAgICAgICBjYWxsSWQ6IHRvb2xDYWxsLmNhbGxJZCxcbiAgICAgICAgICAgIG91dHB1dDogc2hlbGxPdXRwdXRzID8/IFtdLFxuICAgICAgICB9O1xuICAgICAgICBpZiAodHlwZW9mIG1heE91dHB1dExlbmd0aCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHJhd0l0ZW0ubWF4T3V0cHV0TGVuZ3RoID0gbWF4T3V0cHV0TGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIGlmIChPYmplY3Qua2V5cyhwcm92aWRlck1ldGEpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJhd0l0ZW0ucHJvdmlkZXJEYXRhID0gcHJvdmlkZXJNZXRhO1xuICAgICAgICB9XG4gICAgICAgIHJlc3VsdHMucHVzaChuZXcgUnVuVG9vbENhbGxPdXRwdXRJdGVtKHJhd0l0ZW0sIGFnZW50LCByYXdJdGVtLm91dHB1dCkpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0cztcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleGVjdXRlQXBwbHlQYXRjaE9wZXJhdGlvbnMoYWdlbnQsIGFjdGlvbnMsIHJ1bm5lciwgcnVuQ29udGV4dCwgY3VzdG9tTG9nZ2VyID0gdW5kZWZpbmVkKSB7XG4gICAgY29uc3QgX2xvZ2dlciA9IGN1c3RvbUxvZ2dlciA/PyBsb2dnZXI7XG4gICAgY29uc3QgcmVzdWx0cyA9IFtdO1xuICAgIGZvciAoY29uc3QgYWN0aW9uIG9mIGFjdGlvbnMpIHtcbiAgICAgICAgY29uc3QgYXBwbHlQYXRjaFRvb2wgPSBhY3Rpb24uYXBwbHlQYXRjaDtcbiAgICAgICAgY29uc3QgdG9vbENhbGwgPSBhY3Rpb24udG9vbENhbGw7XG4gICAgICAgIGNvbnN0IGFwcHJvdmFsSXRlbSA9IG5ldyBSdW5Ub29sQXBwcm92YWxJdGVtKHRvb2xDYWxsLCBhZ2VudCwgYXBwbHlQYXRjaFRvb2wubmFtZSk7XG4gICAgICAgIGNvbnN0IGFwcHJvdmFsRGVjaXNpb24gPSBhd2FpdCBoYW5kbGVUb29sQXBwcm92YWxEZWNpc2lvbih7XG4gICAgICAgICAgICBydW5Db250ZXh0LFxuICAgICAgICAgICAgdG9vbE5hbWU6IGFwcGx5UGF0Y2hUb29sLm5hbWUsXG4gICAgICAgICAgICBjYWxsSWQ6IHRvb2xDYWxsLmNhbGxJZCxcbiAgICAgICAgICAgIGFwcHJvdmFsSXRlbSxcbiAgICAgICAgICAgIG5lZWRzQXBwcm92YWw6IGF3YWl0IGFwcGx5UGF0Y2hUb29sLm5lZWRzQXBwcm92YWwocnVuQ29udGV4dCwgdG9vbENhbGwub3BlcmF0aW9uLCB0b29sQ2FsbC5jYWxsSWQpLFxuICAgICAgICAgICAgb25BcHByb3ZhbDogYXBwbHlQYXRjaFRvb2wub25BcHByb3ZhbCxcbiAgICAgICAgICAgIGJ1aWxkUmVqZWN0aW9uSXRlbTogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gVE9PTF9BUFBST1ZBTF9SRUpFQ1RJT05fTUVTU0FHRTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJ1blRvb2xDYWxsT3V0cHV0SXRlbSh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdhcHBseV9wYXRjaF9jYWxsX291dHB1dCcsXG4gICAgICAgICAgICAgICAgICAgIGNhbGxJZDogdG9vbENhbGwuY2FsbElkLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICdmYWlsZWQnLFxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQ6IHJlc3BvbnNlLFxuICAgICAgICAgICAgICAgIH0sIGFnZW50LCByZXNwb25zZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGFwcHJvdmFsRGVjaXNpb24uc3RhdHVzICE9PSAnYXBwcm92ZWQnKSB7XG4gICAgICAgICAgICByZXN1bHRzLnB1c2goYXBwcm92YWxEZWNpc2lvbi5pdGVtKTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGVtaXRUb29sU3RhcnQocnVubmVyLCBydW5Db250ZXh0LCBhZ2VudCwgYXBwbHlQYXRjaFRvb2wsIHRvb2xDYWxsKTtcbiAgICAgICAgbGV0IHN0YXR1cyA9ICdjb21wbGV0ZWQnO1xuICAgICAgICBsZXQgb3V0cHV0ID0gJyc7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBsZXQgcmVzdWx0O1xuICAgICAgICAgICAgc3dpdGNoICh0b29sQ2FsbC5vcGVyYXRpb24udHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2NyZWF0ZV9maWxlJzpcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgYXBwbHlQYXRjaFRvb2wuZWRpdG9yLmNyZWF0ZUZpbGUodG9vbENhbGwub3BlcmF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndXBkYXRlX2ZpbGUnOlxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBhd2FpdCBhcHBseVBhdGNoVG9vbC5lZGl0b3IudXBkYXRlRmlsZSh0b29sQ2FsbC5vcGVyYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdkZWxldGVfZmlsZSc6XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IGFwcGx5UGF0Y2hUb29sLmVkaXRvci5kZWxldGVGaWxlKHRvb2xDYWxsLm9wZXJhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5zdXBwb3J0ZWQgYXBwbHlfcGF0Y2ggb3BlcmF0aW9uJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVzdWx0ICYmIHR5cGVvZiByZXN1bHQuc3RhdHVzID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHN0YXR1cyA9IHJlc3VsdC5zdGF0dXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVzdWx0ICYmIHR5cGVvZiByZXN1bHQub3V0cHV0ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIG91dHB1dCA9IHJlc3VsdC5vdXRwdXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgc3RhdHVzID0gJ2ZhaWxlZCc7XG4gICAgICAgICAgICBvdXRwdXQgPSB0b0Vycm9yTWVzc2FnZShlcnIpO1xuICAgICAgICAgICAgX2xvZ2dlci5lcnJvcignRmFpbGVkIHRvIGV4ZWN1dGUgYXBwbHlfcGF0Y2ggb3BlcmF0aW9uOicsIGVycik7XG4gICAgICAgIH1cbiAgICAgICAgZW1pdFRvb2xFbmQocnVubmVyLCBydW5Db250ZXh0LCBhZ2VudCwgYXBwbHlQYXRjaFRvb2wsIG91dHB1dCwgdG9vbENhbGwpO1xuICAgICAgICBjb25zdCByYXdJdGVtID0ge1xuICAgICAgICAgICAgdHlwZTogJ2FwcGx5X3BhdGNoX2NhbGxfb3V0cHV0JyxcbiAgICAgICAgICAgIGNhbGxJZDogdG9vbENhbGwuY2FsbElkLFxuICAgICAgICAgICAgc3RhdHVzLFxuICAgICAgICB9O1xuICAgICAgICBpZiAob3V0cHV0KSB7XG4gICAgICAgICAgICByYXdJdGVtLm91dHB1dCA9IG91dHB1dDtcbiAgICAgICAgfVxuICAgICAgICByZXN1bHRzLnB1c2gobmV3IFJ1blRvb2xDYWxsT3V0cHV0SXRlbShyYXdJdGVtLCBhZ2VudCwgb3V0cHV0KSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHRzO1xufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqIEV4ZWN1dGVzIGFueSBjb21wdXRlci11c2UgYWN0aW9ucyBlbWl0dGVkIGJ5IHRoZSBtb2RlbCBhbmQgcmV0dXJucyB0aGUgcmVzdWx0aW5nIGl0ZW1zIHNvXG4gKiB0aGUgcnVuIGhpc3RvcnkgcmVmbGVjdHMgdGhlIGNvbXB1dGVyIHNlc3Npb24uXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleGVjdXRlQ29tcHV0ZXJBY3Rpb25zKGFnZW50LCBhY3Rpb25zLCBydW5uZXIsIHJ1bkNvbnRleHQsIGN1c3RvbUxvZ2dlciA9IHVuZGVmaW5lZCkge1xuICAgIGNvbnN0IF9sb2dnZXIgPSBjdXN0b21Mb2dnZXIgPz8gbG9nZ2VyO1xuICAgIGNvbnN0IHJlc3VsdHMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IGFjdGlvbiBvZiBhY3Rpb25zKSB7XG4gICAgICAgIGNvbnN0IHRvb2xDYWxsID0gYWN0aW9uLnRvb2xDYWxsO1xuICAgICAgICAvLyBIb29rczogb25fdG9vbF9zdGFydCAoZ2xvYmFsICsgYWdlbnQpXG4gICAgICAgIGVtaXRUb29sU3RhcnQocnVubmVyLCBydW5Db250ZXh0LCBhZ2VudCwgYWN0aW9uLmNvbXB1dGVyLCB0b29sQ2FsbCk7XG4gICAgICAgIC8vIFJ1biB0aGUgYWN0aW9uIGFuZCBnZXQgc2NyZWVuc2hvdFxuICAgICAgICBsZXQgb3V0cHV0O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgY29tcHV0ZXIgPSBhd2FpdCByZXNvbHZlQ29tcHV0ZXIoe1xuICAgICAgICAgICAgICAgIHRvb2w6IGFjdGlvbi5jb21wdXRlcixcbiAgICAgICAgICAgICAgICBydW5Db250ZXh0LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBvdXRwdXQgPSBhd2FpdCBfcnVuQ29tcHV0ZXJBY3Rpb25BbmRTY3JlZW5zaG90KGNvbXB1dGVyLCB0b29sQ2FsbCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgX2xvZ2dlci5lcnJvcignRmFpbGVkIHRvIGV4ZWN1dGUgY29tcHV0ZXIgYWN0aW9uOicsIGVycik7XG4gICAgICAgICAgICBvdXRwdXQgPSAnJztcbiAgICAgICAgfVxuICAgICAgICAvLyBIb29rczogb25fdG9vbF9lbmQgKGdsb2JhbCArIGFnZW50KVxuICAgICAgICBlbWl0VG9vbEVuZChydW5uZXIsIHJ1bkNvbnRleHQsIGFnZW50LCBhY3Rpb24uY29tcHV0ZXIsIG91dHB1dCwgdG9vbENhbGwpO1xuICAgICAgICAvLyBSZXR1cm4gdGhlIHNjcmVlbnNob3QgYXMgYSBkYXRhIFVSTCB3aGVuIGF2YWlsYWJsZTsgZmFsbCBiYWNrIHRvIGFuIGVtcHR5IHN0cmluZyBvbiBmYWlsdXJlcy5cbiAgICAgICAgY29uc3QgaW1hZ2VVcmwgPSBvdXRwdXQgPyBgZGF0YTppbWFnZS9wbmc7YmFzZTY0LCR7b3V0cHV0fWAgOiAnJztcbiAgICAgICAgY29uc3QgcmF3SXRlbSA9IHtcbiAgICAgICAgICAgIHR5cGU6ICdjb21wdXRlcl9jYWxsX3Jlc3VsdCcsXG4gICAgICAgICAgICBjYWxsSWQ6IHRvb2xDYWxsLmNhbGxJZCxcbiAgICAgICAgICAgIG91dHB1dDogeyB0eXBlOiAnY29tcHV0ZXJfc2NyZWVuc2hvdCcsIGRhdGE6IGltYWdlVXJsIH0sXG4gICAgICAgIH07XG4gICAgICAgIHJlc3VsdHMucHVzaChuZXcgUnVuVG9vbENhbGxPdXRwdXRJdGVtKHJhd0l0ZW0sIGFnZW50LCBpbWFnZVVybCkpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0cztcbn1cbi8qKlxuICogQGludGVybmFsXG4gKiBEcml2ZXMgaGFuZG9mZiBjYWxscyBieSBpbnZva2luZyB0aGUgZG93bnN0cmVhbSBhZ2VudCBhbmQgY2FwdHVyaW5nIGFueSBnZW5lcmF0ZWQgaXRlbXMgc29cbiAqIHRoZSBjdXJyZW50IGFnZW50IGNhbiBjb250aW51ZSB3aXRoIHRoZSBuZXcgY29udGV4dC5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGV4ZWN1dGVIYW5kb2ZmQ2FsbHMoYWdlbnQsIG9yaWdpbmFsSW5wdXQsIHByZVN0ZXBJdGVtcywgbmV3U3RlcEl0ZW1zLCBuZXdSZXNwb25zZSwgcnVuSGFuZG9mZnMsIHJ1bm5lciwgcnVuQ29udGV4dCkge1xuICAgIG5ld1N0ZXBJdGVtcyA9IFsuLi5uZXdTdGVwSXRlbXNdO1xuICAgIGlmIChydW5IYW5kb2Zmcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgbG9nZ2VyLndhcm4oJ0luY29ycmVjdGx5IGNhbGxlZCBleGVjdXRlSGFuZG9mZkNhbGxzIHdpdGggbm8gaGFuZG9mZnMuIFRoaXMgc2hvdWxkIG5vdCBoYXBwZW4uIE1vdmluZyBvbi4nKTtcbiAgICAgICAgcmV0dXJuIG5ldyBTaW5nbGVTdGVwUmVzdWx0KG9yaWdpbmFsSW5wdXQsIG5ld1Jlc3BvbnNlLCBwcmVTdGVwSXRlbXMsIG5ld1N0ZXBJdGVtcywgeyB0eXBlOiAnbmV4dF9zdGVwX3J1bl9hZ2FpbicgfSk7XG4gICAgfVxuICAgIGlmIChydW5IYW5kb2Zmcy5sZW5ndGggPiAxKSB7XG4gICAgICAgIC8vIG11bHRpcGxlIGhhbmRvZmZzLiBJZ25vcmluZyBhbGwgYnV0IHRoZSBmaXJzdCBvbmUgYnkgYWRkaW5nIHJlamVjdCByZXNwb25zZXMgZm9yIHRob3NlXG4gICAgICAgIGNvbnN0IG91dHB1dE1lc3NhZ2UgPSAnTXVsdGlwbGUgaGFuZG9mZnMgZGV0ZWN0ZWQsIGlnbm9yaW5nIHRoaXMgb25lLic7XG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgcnVuSGFuZG9mZnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIG5ld1N0ZXBJdGVtcy5wdXNoKG5ldyBSdW5Ub29sQ2FsbE91dHB1dEl0ZW0oZ2V0VG9vbENhbGxPdXRwdXRJdGVtKHJ1bkhhbmRvZmZzW2ldLnRvb2xDYWxsLCBvdXRwdXRNZXNzYWdlKSwgYWdlbnQsIG91dHB1dE1lc3NhZ2UpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBhY3R1YWxIYW5kb2ZmID0gcnVuSGFuZG9mZnNbMF07XG4gICAgcmV0dXJuIHdpdGhIYW5kb2ZmU3Bhbihhc3luYyAoaGFuZG9mZlNwYW4pID0+IHtcbiAgICAgICAgY29uc3QgaGFuZG9mZiA9IGFjdHVhbEhhbmRvZmYuaGFuZG9mZjtcbiAgICAgICAgY29uc3QgbmV3QWdlbnQgPSBhd2FpdCBoYW5kb2ZmLm9uSW52b2tlSGFuZG9mZihydW5Db250ZXh0LCBhY3R1YWxIYW5kb2ZmLnRvb2xDYWxsLmFyZ3VtZW50cyk7XG4gICAgICAgIGhhbmRvZmZTcGFuLnNwYW5EYXRhLnRvX2FnZW50ID0gbmV3QWdlbnQubmFtZTtcbiAgICAgICAgaWYgKHJ1bkhhbmRvZmZzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RlZEFnZW50cyA9IHJ1bkhhbmRvZmZzLm1hcCgoaCkgPT4gaC5oYW5kb2ZmLmFnZW50TmFtZSk7XG4gICAgICAgICAgICBoYW5kb2ZmU3Bhbi5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ011bHRpcGxlIGhhbmRvZmZzIHJlcXVlc3RlZCcsXG4gICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0ZWRfYWdlbnRzOiByZXF1ZXN0ZWRBZ2VudHMsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIG5ld1N0ZXBJdGVtcy5wdXNoKG5ldyBSdW5IYW5kb2ZmT3V0cHV0SXRlbShnZXRUb29sQ2FsbE91dHB1dEl0ZW0oYWN0dWFsSGFuZG9mZi50b29sQ2FsbCwgZ2V0VHJhbnNmZXJNZXNzYWdlKG5ld0FnZW50KSksIGFnZW50LCBuZXdBZ2VudCkpO1xuICAgICAgICBydW5uZXIuZW1pdCgnYWdlbnRfaGFuZG9mZicsIHJ1bkNvbnRleHQsIGFnZW50LCBuZXdBZ2VudCk7XG4gICAgICAgIGFnZW50LmVtaXQoJ2FnZW50X2hhbmRvZmYnLCBydW5Db250ZXh0LCBuZXdBZ2VudCk7XG4gICAgICAgIGNvbnN0IGlucHV0RmlsdGVyID0gaGFuZG9mZi5pbnB1dEZpbHRlciA/PyBydW5uZXIuY29uZmlnLmhhbmRvZmZJbnB1dEZpbHRlcjtcbiAgICAgICAgaWYgKGlucHV0RmlsdGVyKSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoJ0ZpbHRlcmluZyBpbnB1dHMgZm9yIGhhbmRvZmYnKTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaW5wdXRGaWx0ZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBoYW5kb2ZmU3Bhbi5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdJbnZhbGlkIGlucHV0IGZpbHRlcicsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbHM6ICdub3QgY2FsbGFibGUnLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgaGFuZG9mZklucHV0RGF0YSA9IHtcbiAgICAgICAgICAgICAgICBpbnB1dEhpc3Rvcnk6IEFycmF5LmlzQXJyYXkob3JpZ2luYWxJbnB1dClcbiAgICAgICAgICAgICAgICAgICAgPyBbLi4ub3JpZ2luYWxJbnB1dF1cbiAgICAgICAgICAgICAgICAgICAgOiBvcmlnaW5hbElucHV0LFxuICAgICAgICAgICAgICAgIHByZUhhbmRvZmZJdGVtczogWy4uLnByZVN0ZXBJdGVtc10sXG4gICAgICAgICAgICAgICAgbmV3SXRlbXM6IFsuLi5uZXdTdGVwSXRlbXNdLFxuICAgICAgICAgICAgICAgIHJ1bkNvbnRleHQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgZmlsdGVyZWQgPSBpbnB1dEZpbHRlcihoYW5kb2ZmSW5wdXREYXRhKTtcbiAgICAgICAgICAgIG9yaWdpbmFsSW5wdXQgPSBmaWx0ZXJlZC5pbnB1dEhpc3Rvcnk7XG4gICAgICAgICAgICBwcmVTdGVwSXRlbXMgPSBmaWx0ZXJlZC5wcmVIYW5kb2ZmSXRlbXM7XG4gICAgICAgICAgICBuZXdTdGVwSXRlbXMgPSBmaWx0ZXJlZC5uZXdJdGVtcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFNpbmdsZVN0ZXBSZXN1bHQob3JpZ2luYWxJbnB1dCwgbmV3UmVzcG9uc2UsIHByZVN0ZXBJdGVtcywgbmV3U3RlcEl0ZW1zLCB7IHR5cGU6ICduZXh0X3N0ZXBfaGFuZG9mZicsIG5ld0FnZW50IH0pO1xuICAgIH0sIHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgZnJvbV9hZ2VudDogYWdlbnQubmFtZSxcbiAgICAgICAgfSxcbiAgICB9KTtcbn1cbmNvbnN0IE5PVF9GSU5BTF9PVVRQVVQgPSB7XG4gICAgaXNGaW5hbE91dHB1dDogZmFsc2UsXG4gICAgaXNJbnRlcnJ1cHRlZDogdW5kZWZpbmVkLFxufTtcbi8qKlxuICogQ29sbGVjdHMgYXBwcm92YWwgaW50ZXJydXB0aW9ucyBmcm9tIHRvb2wgZXhlY3V0aW9uIHJlc3VsdHMgYW5kIGFueSBhZGRpdGlvbmFsXG4gKiBSdW5JdGVtcyAoZS5nLiwgc2hlbGwvYXBwbHlfcGF0Y2ggYXBwcm92YWwgcGxhY2Vob2xkZXJzKS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbGxlY3RJbnRlcnJ1cHRpb25zKHRvb2xSZXN1bHRzLCBhZGRpdGlvbmFsSXRlbXMgPSBbXSkge1xuICAgIGNvbnN0IGludGVycnVwdGlvbnMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgYWRkaXRpb25hbEl0ZW1zKSB7XG4gICAgICAgIGlmIChpdGVtIGluc3RhbmNlb2YgUnVuVG9vbEFwcHJvdmFsSXRlbSkge1xuICAgICAgICAgICAgaW50ZXJydXB0aW9ucy5wdXNoKGl0ZW0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZvciAoY29uc3QgcmVzdWx0IG9mIHRvb2xSZXN1bHRzKSB7XG4gICAgICAgIGlmIChyZXN1bHQucnVuSXRlbSBpbnN0YW5jZW9mIFJ1blRvb2xBcHByb3ZhbEl0ZW0pIHtcbiAgICAgICAgICAgIGludGVycnVwdGlvbnMucHVzaChyZXN1bHQucnVuSXRlbSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlc3VsdC50eXBlID09PSAnZnVuY3Rpb25fb3V0cHV0Jykge1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocmVzdWx0LmludGVycnVwdGlvbnMpKSB7XG4gICAgICAgICAgICAgICAgaW50ZXJydXB0aW9ucy5wdXNoKC4uLnJlc3VsdC5pbnRlcnJ1cHRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHJlc3VsdC5hZ2VudFJ1blJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5lc3RlZEludGVycnVwdGlvbnMgPSByZXN1bHQuYWdlbnRSdW5SZXN1bHQuaW50ZXJydXB0aW9ucztcbiAgICAgICAgICAgICAgICBpZiAobmVzdGVkSW50ZXJydXB0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGludGVycnVwdGlvbnMucHVzaCguLi5uZXN0ZWRJbnRlcnJ1cHRpb25zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGludGVycnVwdGlvbnM7XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICogRGV0ZXJtaW5lcyB3aGV0aGVyIHRvb2wgZXhlY3V0aW9ucyBwcm9kdWNlZCBhIGZpbmFsIGFnZW50IG91dHB1dCwgdHJpZ2dlcmVkIGFuIGludGVycnVwdGlvbixcbiAqIG9yIHdoZXRoZXIgdGhlIGFnZW50IGxvb3Agc2hvdWxkIGNvbnRpbnVlIGNvbGxlY3RpbmcgbW9yZSByZXNwb25zZXMuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGVja0ZvckZpbmFsT3V0cHV0RnJvbVRvb2xzKGFnZW50LCB0b29sUmVzdWx0cywgc3RhdGUsIGFkZGl0aW9uYWxJbnRlcnJ1cHRpb25zID0gW10pIHtcbiAgICBpZiAodG9vbFJlc3VsdHMubGVuZ3RoID09PSAwICYmIGFkZGl0aW9uYWxJbnRlcnJ1cHRpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gTk9UX0ZJTkFMX09VVFBVVDtcbiAgICB9XG4gICAgY29uc3QgaW50ZXJydXB0aW9ucyA9IGNvbGxlY3RJbnRlcnJ1cHRpb25zKHRvb2xSZXN1bHRzLCBhZGRpdGlvbmFsSW50ZXJydXB0aW9ucyk7XG4gICAgaWYgKGludGVycnVwdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaXNGaW5hbE91dHB1dDogZmFsc2UsXG4gICAgICAgICAgICBpc0ludGVycnVwdGVkOiB0cnVlLFxuICAgICAgICAgICAgaW50ZXJydXB0aW9ucyxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKGFnZW50LnRvb2xVc2VCZWhhdmlvciA9PT0gJ3J1bl9sbG1fYWdhaW4nKSB7XG4gICAgICAgIHJldHVybiBOT1RfRklOQUxfT1VUUFVUO1xuICAgIH1cbiAgICBjb25zdCBmaXJzdFRvb2xSZXN1bHQgPSB0b29sUmVzdWx0c1swXTtcbiAgICBpZiAoYWdlbnQudG9vbFVzZUJlaGF2aW9yID09PSAnc3RvcF9vbl9maXJzdF90b29sJykge1xuICAgICAgICBpZiAoZmlyc3RUb29sUmVzdWx0Py50eXBlID09PSAnZnVuY3Rpb25fb3V0cHV0Jykge1xuICAgICAgICAgICAgY29uc3Qgc3RyaW5nT3V0cHV0ID0gdG9TbWFydFN0cmluZyhmaXJzdFRvb2xSZXN1bHQub3V0cHV0KTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaXNGaW5hbE91dHB1dDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBpc0ludGVycnVwdGVkOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgZmluYWxPdXRwdXQ6IHN0cmluZ091dHB1dCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE5PVF9GSU5BTF9PVVRQVVQ7XG4gICAgfVxuICAgIGNvbnN0IHRvb2xVc2VCZWhhdmlvciA9IGFnZW50LnRvb2xVc2VCZWhhdmlvcjtcbiAgICBpZiAodHlwZW9mIHRvb2xVc2VCZWhhdmlvciA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgY29uc3Qgc3RvcHBpbmdUb29sID0gdG9vbFJlc3VsdHMuZmluZCgocikgPT4gdG9vbFVzZUJlaGF2aW9yLnN0b3BBdFRvb2xOYW1lcy5pbmNsdWRlcyhyLnRvb2wubmFtZSkpO1xuICAgICAgICBpZiAoc3RvcHBpbmdUb29sPy50eXBlID09PSAnZnVuY3Rpb25fb3V0cHV0Jykge1xuICAgICAgICAgICAgY29uc3Qgc3RyaW5nT3V0cHV0ID0gdG9TbWFydFN0cmluZyhzdG9wcGluZ1Rvb2wub3V0cHV0KTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaXNGaW5hbE91dHB1dDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBpc0ludGVycnVwdGVkOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgZmluYWxPdXRwdXQ6IHN0cmluZ091dHB1dCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE5PVF9GSU5BTF9PVVRQVVQ7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgdG9vbFVzZUJlaGF2aW9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiB0b29sVXNlQmVoYXZpb3Ioc3RhdGUuX2NvbnRleHQsIHRvb2xSZXN1bHRzKTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IFVzZXJFcnJvcihgSW52YWxpZCB0b29sVXNlQmVoYXZpb3I6ICR7dG9vbFVzZUJlaGF2aW9yfWAsIHN0YXRlKTtcbn1cbi8qKlxuICogQWNjZXB0cyB3aGF0ZXZlciB0aGUgdG9vbCByZXR1cm5lZCBhbmQgYXR0ZW1wdHMgdG8gY29lcmNlIGl0IGludG8gdGhlIHN0cnVjdHVyZWQgcHJvdG9jb2xcbiAqIHNoYXBlcyB3ZSBleHBvc2UgdG8gZG93bnN0cmVhbSBtb2RlbCBhZGFwdGVycyAoaW5wdXRfdGV4dC9pbnB1dF9pbWFnZS9pbnB1dF9maWxlKS4gVG9vbHMgYXJlXG4gKiBhbGxvd2VkIHRvIHJldHVybiBlaXRoZXIgYSBzaW5nbGUgc3RydWN0dXJlZCBvYmplY3Qgb3IgYW4gYXJyYXkgb2YgdGhlbTsgYW55dGhpbmcgZWxzZSBmYWxsc1xuICogYmFjayB0byB0aGUgbGVnYWN5IHN0cmluZyBwaXBlbGluZS5cbiAqL1xuZnVuY3Rpb24gbm9ybWFsaXplU3RydWN0dXJlZFRvb2xPdXRwdXRzKG91dHB1dCkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KG91dHB1dCkpIHtcbiAgICAgICAgY29uc3Qgc3RydWN0dXJlZCA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2Ygb3V0cHV0KSB7XG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemVkID0gbm9ybWFsaXplU3RydWN0dXJlZFRvb2xPdXRwdXQoaXRlbSk7XG4gICAgICAgICAgICBpZiAoIW5vcm1hbGl6ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN0cnVjdHVyZWQucHVzaChub3JtYWxpemVkKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RydWN0dXJlZDtcbiAgICB9XG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IG5vcm1hbGl6ZVN0cnVjdHVyZWRUb29sT3V0cHV0KG91dHB1dCk7XG4gICAgcmV0dXJuIG5vcm1hbGl6ZWQgPyBbbm9ybWFsaXplZF0gOiBudWxsO1xufVxuLyoqXG4gKiBCZXN0LWVmZm9ydCBub3JtYWxpemF0aW9uIG9mIGEgc2luZ2xlIHRvb2wgb3V0cHV0IGl0ZW0uIElmIHRoZSBvYmplY3QgYWxyZWFkeSBtYXRjaGVzIHRoZVxuICogcHJvdG9jb2wgc2hhcGUgd2Ugc2ltcGx5IGNhc3QgaXQ7IG90aGVyd2lzZSB3ZSBjb3B5IHRoZSByZWNvZ25pc2VkIGZpZWxkcyBpbnRvIHRoZSBjYW5vbmljYWxcbiAqIHN0cnVjdHVyZS4gUmV0dXJuaW5nIG51bGwgbGV0cyB0aGUgY2FsbGVyIGtub3cgd2Ugc2hvdWxkIHJldmVydCB0byBwbGFpbi1zdHJpbmcgaGFuZGxpbmcuXG4gKi9cbmZ1bmN0aW9uIG5vcm1hbGl6ZVN0cnVjdHVyZWRUb29sT3V0cHV0KHZhbHVlKSB7XG4gICAgaWYgKCFpc1JlY29yZCh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IHR5cGUgPSB2YWx1ZS50eXBlO1xuICAgIGlmICh0eXBlID09PSAndGV4dCcgJiYgdHlwZW9mIHZhbHVlLnRleHQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGNvbnN0IG91dHB1dCA9IHsgdHlwZTogJ3RleHQnLCB0ZXh0OiB2YWx1ZS50ZXh0IH07XG4gICAgICAgIGlmIChpc1JlY29yZCh2YWx1ZS5wcm92aWRlckRhdGEpKSB7XG4gICAgICAgICAgICBvdXRwdXQucHJvdmlkZXJEYXRhID0gdmFsdWUucHJvdmlkZXJEYXRhO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfVxuICAgIGlmICh0eXBlID09PSAnaW1hZ2UnKSB7XG4gICAgICAgIGNvbnN0IG91dHB1dCA9IHsgdHlwZTogJ2ltYWdlJyB9O1xuICAgICAgICBsZXQgaW1hZ2VTdHJpbmc7XG4gICAgICAgIGxldCBpbWFnZUZpbGVJZDtcbiAgICAgICAgY29uc3QgZmFsbGJhY2tJbWFnZU1lZGlhVHlwZSA9IGlzTm9uRW1wdHlTdHJpbmcodmFsdWUubWVkaWFUeXBlKVxuICAgICAgICAgICAgPyB2YWx1ZS5tZWRpYVR5cGVcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBpbWFnZUZpZWxkID0gdmFsdWUuaW1hZ2U7XG4gICAgICAgIGlmICh0eXBlb2YgaW1hZ2VGaWVsZCA9PT0gJ3N0cmluZycgJiYgaW1hZ2VGaWVsZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBpbWFnZVN0cmluZyA9IGltYWdlRmllbGQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNSZWNvcmQoaW1hZ2VGaWVsZCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGltYWdlT2JqID0gaW1hZ2VGaWVsZDtcbiAgICAgICAgICAgIGNvbnN0IGlubGluZU1lZGlhVHlwZSA9IGlzTm9uRW1wdHlTdHJpbmcoaW1hZ2VPYmoubWVkaWFUeXBlKVxuICAgICAgICAgICAgICAgID8gaW1hZ2VPYmoubWVkaWFUeXBlXG4gICAgICAgICAgICAgICAgOiBmYWxsYmFja0ltYWdlTWVkaWFUeXBlO1xuICAgICAgICAgICAgaWYgKGlzTm9uRW1wdHlTdHJpbmcoaW1hZ2VPYmoudXJsKSkge1xuICAgICAgICAgICAgICAgIGltYWdlU3RyaW5nID0gaW1hZ2VPYmoudXJsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXNOb25FbXB0eVN0cmluZyhpbWFnZU9iai5kYXRhKSkge1xuICAgICAgICAgICAgICAgIGltYWdlU3RyaW5nID0gdG9JbmxpbmVJbWFnZVN0cmluZyhpbWFnZU9iai5kYXRhLCBpbmxpbmVNZWRpYVR5cGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaW1hZ2VPYmouZGF0YSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgJiZcbiAgICAgICAgICAgICAgICBpbWFnZU9iai5kYXRhLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBpbWFnZVN0cmluZyA9IHRvSW5saW5lSW1hZ2VTdHJpbmcoaW1hZ2VPYmouZGF0YSwgaW5saW5lTWVkaWFUeXBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghaW1hZ2VTdHJpbmcpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjYW5kaWRhdGVJZCA9IChpc05vbkVtcHR5U3RyaW5nKGltYWdlT2JqLmZpbGVJZCkgJiYgaW1hZ2VPYmouZmlsZUlkKSB8fFxuICAgICAgICAgICAgICAgICAgICAoaXNOb25FbXB0eVN0cmluZyhpbWFnZU9iai5pZCkgJiYgaW1hZ2VPYmouaWQpIHx8XG4gICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBpZiAoY2FuZGlkYXRlSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VGaWxlSWQgPSBjYW5kaWRhdGVJZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpbWFnZVN0cmluZyAmJlxuICAgICAgICAgICAgdHlwZW9mIHZhbHVlLmltYWdlVXJsID09PSAnc3RyaW5nJyAmJlxuICAgICAgICAgICAgdmFsdWUuaW1hZ2VVcmwubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgaW1hZ2VTdHJpbmcgPSB2YWx1ZS5pbWFnZVVybDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWltYWdlRmlsZUlkICYmXG4gICAgICAgICAgICB0eXBlb2YgdmFsdWUuZmlsZUlkID09PSAnc3RyaW5nJyAmJlxuICAgICAgICAgICAgdmFsdWUuZmlsZUlkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGltYWdlRmlsZUlkID0gdmFsdWUuZmlsZUlkO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaW1hZ2VTdHJpbmcgJiZcbiAgICAgICAgICAgIHR5cGVvZiB2YWx1ZS5kYXRhID09PSAnc3RyaW5nJyAmJlxuICAgICAgICAgICAgdmFsdWUuZGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBpbWFnZVN0cmluZyA9IGZhbGxiYWNrSW1hZ2VNZWRpYVR5cGVcbiAgICAgICAgICAgICAgICA/IHRvSW5saW5lSW1hZ2VTdHJpbmcodmFsdWUuZGF0YSwgZmFsbGJhY2tJbWFnZU1lZGlhVHlwZSlcbiAgICAgICAgICAgICAgICA6IHZhbHVlLmRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIWltYWdlU3RyaW5nICYmXG4gICAgICAgICAgICB2YWx1ZS5kYXRhIGluc3RhbmNlb2YgVWludDhBcnJheSAmJlxuICAgICAgICAgICAgdmFsdWUuZGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBpbWFnZVN0cmluZyA9IHRvSW5saW5lSW1hZ2VTdHJpbmcodmFsdWUuZGF0YSwgZmFsbGJhY2tJbWFnZU1lZGlhVHlwZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZS5kZXRhaWwgPT09ICdzdHJpbmcnICYmIHZhbHVlLmRldGFpbC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBvdXRwdXQuZGV0YWlsID0gdmFsdWUuZGV0YWlsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbWFnZVN0cmluZykge1xuICAgICAgICAgICAgb3V0cHV0LmltYWdlID0gaW1hZ2VTdHJpbmc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaW1hZ2VGaWxlSWQpIHtcbiAgICAgICAgICAgIG91dHB1dC5pbWFnZSA9IHsgZmlsZUlkOiBpbWFnZUZpbGVJZCB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzUmVjb3JkKHZhbHVlLnByb3ZpZGVyRGF0YSkpIHtcbiAgICAgICAgICAgIG91dHB1dC5wcm92aWRlckRhdGEgPSB2YWx1ZS5wcm92aWRlckRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9XG4gICAgaWYgKHR5cGUgPT09ICdmaWxlJykge1xuICAgICAgICBjb25zdCBmaWxlVmFsdWUgPSBub3JtYWxpemVGaWxlVmFsdWUodmFsdWUpO1xuICAgICAgICBpZiAoIWZpbGVWYWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb3V0cHV0ID0geyB0eXBlOiAnZmlsZScsIGZpbGU6IGZpbGVWYWx1ZSB9O1xuICAgICAgICBpZiAoaXNSZWNvcmQodmFsdWUucHJvdmlkZXJEYXRhKSkge1xuICAgICAgICAgICAgb3V0cHV0LnByb3ZpZGVyRGF0YSA9IHZhbHVlLnByb3ZpZGVyRGF0YTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbi8qKlxuICogVHJhbnNsYXRlcyB0aGUgbm9ybWFsaXplZCB0b29sIG91dHB1dCBpbnRvIHRoZSBwcm90b2NvbCBgaW5wdXRfKmAgaXRlbXMuIFRoaXMgaXMgdGhlIGxhc3QgaG9wXG4gKiBiZWZvcmUgd2UgaGFuZCB0aGUgZGF0YSB0byBtb2RlbC1zcGVjaWZpYyBhZGFwdGVycywgc28gd2UgZ2VuZXJhdGUgdGhlIGV4YWN0IHNjaGVtYSBleHBlY3RlZCBieVxuICogdGhlIHByb3RvY29sIGRlZmluaXRpb25zLlxuICovXG5mdW5jdGlvbiBjb252ZXJ0U3RydWN0dXJlZFRvb2xPdXRwdXRUb0lucHV0SXRlbShvdXRwdXQpIHtcbiAgICBpZiAob3V0cHV0LnR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgICAgICB0eXBlOiAnaW5wdXRfdGV4dCcsXG4gICAgICAgICAgICB0ZXh0OiBvdXRwdXQudGV4dCxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKG91dHB1dC5wcm92aWRlckRhdGEpIHtcbiAgICAgICAgICAgIHJlc3VsdC5wcm92aWRlckRhdGEgPSBvdXRwdXQucHJvdmlkZXJEYXRhO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGlmIChvdXRwdXQudHlwZSA9PT0gJ2ltYWdlJykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB7IHR5cGU6ICdpbnB1dF9pbWFnZScgfTtcbiAgICAgICAgaWYgKHR5cGVvZiBvdXRwdXQuZGV0YWlsID09PSAnc3RyaW5nJyAmJiBvdXRwdXQuZGV0YWlsLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJlc3VsdC5kZXRhaWwgPSBvdXRwdXQuZGV0YWlsO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2Ygb3V0cHV0LmltYWdlID09PSAnc3RyaW5nJyAmJiBvdXRwdXQuaW1hZ2UubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmVzdWx0LmltYWdlID0gb3V0cHV0LmltYWdlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzUmVjb3JkKG91dHB1dC5pbWFnZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGltYWdlT2JqID0gb3V0cHV0LmltYWdlO1xuICAgICAgICAgICAgY29uc3QgaW5saW5lTWVkaWFUeXBlID0gaXNOb25FbXB0eVN0cmluZyhpbWFnZU9iai5tZWRpYVR5cGUpXG4gICAgICAgICAgICAgICAgPyBpbWFnZU9iai5tZWRpYVR5cGVcbiAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGlmIChpc05vbkVtcHR5U3RyaW5nKGltYWdlT2JqLnVybCkpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQuaW1hZ2UgPSBpbWFnZU9iai51cmw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpc05vbkVtcHR5U3RyaW5nKGltYWdlT2JqLmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LmltYWdlID1cbiAgICAgICAgICAgICAgICAgICAgaW5saW5lTWVkaWFUeXBlICYmICFpbWFnZU9iai5kYXRhLnN0YXJ0c1dpdGgoJ2RhdGE6JylcbiAgICAgICAgICAgICAgICAgICAgICAgID8gYXNEYXRhVXJsKGltYWdlT2JqLmRhdGEsIGlubGluZU1lZGlhVHlwZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIDogaW1hZ2VPYmouZGF0YTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGltYWdlT2JqLmRhdGEgaW5zdGFuY2VvZiBVaW50OEFycmF5ICYmXG4gICAgICAgICAgICAgICAgaW1hZ2VPYmouZGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYmFzZTY0ID0gZW5jb2RlVWludDhBcnJheVRvQmFzZTY0KGltYWdlT2JqLmRhdGEpO1xuICAgICAgICAgICAgICAgIHJlc3VsdC5pbWFnZSA9IGFzRGF0YVVybChiYXNlNjQsIGlubGluZU1lZGlhVHlwZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWZlcmVuY2VkSWQgPSAoaXNOb25FbXB0eVN0cmluZyhpbWFnZU9iai5maWxlSWQpICYmIGltYWdlT2JqLmZpbGVJZCkgfHxcbiAgICAgICAgICAgICAgICAgICAgKGlzTm9uRW1wdHlTdHJpbmcoaW1hZ2VPYmouaWQpICYmIGltYWdlT2JqLmlkKSB8fFxuICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgaWYgKHJlZmVyZW5jZWRJZCkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuaW1hZ2UgPSB7IGlkOiByZWZlcmVuY2VkSWQgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG91dHB1dC5wcm92aWRlckRhdGEpIHtcbiAgICAgICAgICAgIHJlc3VsdC5wcm92aWRlckRhdGEgPSBvdXRwdXQucHJvdmlkZXJEYXRhO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGlmIChvdXRwdXQudHlwZSA9PT0gJ2ZpbGUnKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHsgdHlwZTogJ2lucHV0X2ZpbGUnIH07XG4gICAgICAgIGNvbnN0IGZpbGVWYWx1ZSA9IG91dHB1dC5maWxlO1xuICAgICAgICBpZiAodHlwZW9mIGZpbGVWYWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHJlc3VsdC5maWxlID0gZmlsZVZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGZpbGVWYWx1ZSAmJiB0eXBlb2YgZmlsZVZhbHVlID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgY29uc3QgcmVjb3JkID0gZmlsZVZhbHVlO1xuICAgICAgICAgICAgaWYgKCdkYXRhJyBpbiByZWNvcmQgJiYgcmVjb3JkLmRhdGEpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtZWRpYVR5cGUgPSByZWNvcmQubWVkaWFUeXBlID8/ICd0ZXh0L3BsYWluJztcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlY29yZC5kYXRhID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuZmlsZSA9IGFzRGF0YVVybChyZWNvcmQuZGF0YSwgbWVkaWFUeXBlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZVVpbnQ4QXJyYXlUb0Jhc2U2NChyZWNvcmQuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5maWxlID0gYXNEYXRhVXJsKGJhc2U2NCwgbWVkaWFUeXBlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgcmVjb3JkLnVybCA9PT0gJ3N0cmluZycgJiYgcmVjb3JkLnVybC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LmZpbGUgPSB7IHVybDogcmVjb3JkLnVybCB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVmZXJlbmNlZElkID0gKHR5cGVvZiByZWNvcmQuaWQgPT09ICdzdHJpbmcnICYmXG4gICAgICAgICAgICAgICAgICAgIHJlY29yZC5pZC5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICAgICAgICAgIHJlY29yZC5pZCkgfHxcbiAgICAgICAgICAgICAgICAgICAgKHR5cGVvZiByZWNvcmQuZmlsZUlkID09PSAnc3RyaW5nJyAmJiByZWNvcmQuZmlsZUlkLmxlbmd0aCA+IDBcbiAgICAgICAgICAgICAgICAgICAgICAgID8gcmVjb3JkLmZpbGVJZFxuICAgICAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgIGlmIChyZWZlcmVuY2VkSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmZpbGUgPSB7IGlkOiByZWZlcmVuY2VkSWQgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIHJlY29yZC5maWxlbmFtZSA9PT0gJ3N0cmluZycgJiYgcmVjb3JkLmZpbGVuYW1lLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICByZXN1bHQuZmlsZW5hbWUgPSByZWNvcmQuZmlsZW5hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG91dHB1dC5wcm92aWRlckRhdGEpIHtcbiAgICAgICAgICAgIHJlc3VsdC5wcm92aWRlckRhdGEgPSBvdXRwdXQucHJvdmlkZXJEYXRhO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGNvbnN0IGV4aGF1c3RpdmVDaGVjayA9IG91dHB1dDtcbiAgICByZXR1cm4gZXhoYXVzdGl2ZUNoZWNrO1xufVxuZnVuY3Rpb24gbm9ybWFsaXplRmlsZVZhbHVlKHZhbHVlKSB7XG4gICAgY29uc3QgZGlyZWN0RmlsZSA9IHZhbHVlLmZpbGU7XG4gICAgaWYgKHR5cGVvZiBkaXJlY3RGaWxlID09PSAnc3RyaW5nJyAmJiBkaXJlY3RGaWxlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmV0dXJuIGRpcmVjdEZpbGU7XG4gICAgfVxuICAgIGNvbnN0IG5vcm1hbGl6ZWRPYmplY3QgPSBub3JtYWxpemVGaWxlT2JqZWN0Q2FuZGlkYXRlKGRpcmVjdEZpbGUpO1xuICAgIGlmIChub3JtYWxpemVkT2JqZWN0KSB7XG4gICAgICAgIHJldHVybiBub3JtYWxpemVkT2JqZWN0O1xuICAgIH1cbiAgICBjb25zdCBsZWdhY3lWYWx1ZSA9IG5vcm1hbGl6ZUxlZ2FjeUZpbGVWYWx1ZSh2YWx1ZSk7XG4gICAgaWYgKGxlZ2FjeVZhbHVlKSB7XG4gICAgICAgIHJldHVybiBsZWdhY3lWYWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiBub3JtYWxpemVGaWxlT2JqZWN0Q2FuZGlkYXRlKHZhbHVlKSB7XG4gICAgaWYgKCFpc1JlY29yZCh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGlmICgnZGF0YScgaW4gdmFsdWUgJiYgdmFsdWUuZGF0YSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbnN0IGRhdGFWYWx1ZSA9IHZhbHVlLmRhdGE7XG4gICAgICAgIGNvbnN0IGhhc1N0cmluZ0RhdGEgPSB0eXBlb2YgZGF0YVZhbHVlID09PSAnc3RyaW5nJyAmJiBkYXRhVmFsdWUubGVuZ3RoID4gMDtcbiAgICAgICAgY29uc3QgaGFzQmluYXJ5RGF0YSA9IGRhdGFWYWx1ZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgJiYgZGF0YVZhbHVlLmxlbmd0aCA+IDA7XG4gICAgICAgIGlmICghaGFzU3RyaW5nRGF0YSAmJiAhaGFzQmluYXJ5RGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpc05vbkVtcHR5U3RyaW5nKHZhbHVlLm1lZGlhVHlwZSkgfHxcbiAgICAgICAgICAgICFpc05vbkVtcHR5U3RyaW5nKHZhbHVlLmZpbGVuYW1lKSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGRhdGE6IHR5cGVvZiBkYXRhVmFsdWUgPT09ICdzdHJpbmcnID8gZGF0YVZhbHVlIDogbmV3IFVpbnQ4QXJyYXkoZGF0YVZhbHVlKSxcbiAgICAgICAgICAgIG1lZGlhVHlwZTogdmFsdWUubWVkaWFUeXBlLFxuICAgICAgICAgICAgZmlsZW5hbWU6IHZhbHVlLmZpbGVuYW1lLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAoaXNOb25FbXB0eVN0cmluZyh2YWx1ZS51cmwpKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHsgdXJsOiB2YWx1ZS51cmwgfTtcbiAgICAgICAgaWYgKGlzTm9uRW1wdHlTdHJpbmcodmFsdWUuZmlsZW5hbWUpKSB7XG4gICAgICAgICAgICByZXN1bHQuZmlsZW5hbWUgPSB2YWx1ZS5maWxlbmFtZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBjb25zdCByZWZlcmVuY2VkSWQgPSAoaXNOb25FbXB0eVN0cmluZyh2YWx1ZS5pZCkgJiYgdmFsdWUuaWQpIHx8XG4gICAgICAgIChpc05vbkVtcHR5U3RyaW5nKHZhbHVlLmZpbGVJZCkgJiYgdmFsdWUuZmlsZUlkKTtcbiAgICBpZiAocmVmZXJlbmNlZElkKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHsgaWQ6IHJlZmVyZW5jZWRJZCB9O1xuICAgICAgICBpZiAoaXNOb25FbXB0eVN0cmluZyh2YWx1ZS5maWxlbmFtZSkpIHtcbiAgICAgICAgICAgIHJlc3VsdC5maWxlbmFtZSA9IHZhbHVlLmZpbGVuYW1lO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gbm9ybWFsaXplTGVnYWN5RmlsZVZhbHVlKHZhbHVlKSB7XG4gICAgY29uc3QgZmlsZW5hbWUgPSB0eXBlb2YgdmFsdWUuZmlsZW5hbWUgPT09ICdzdHJpbmcnICYmIHZhbHVlLmZpbGVuYW1lLmxlbmd0aCA+IDBcbiAgICAgICAgPyB2YWx1ZS5maWxlbmFtZVxuICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICBjb25zdCBtZWRpYVR5cGUgPSB0eXBlb2YgdmFsdWUubWVkaWFUeXBlID09PSAnc3RyaW5nJyAmJiB2YWx1ZS5tZWRpYVR5cGUubGVuZ3RoID4gMFxuICAgICAgICA/IHZhbHVlLm1lZGlhVHlwZVxuICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICBpZiAodHlwZW9mIHZhbHVlLmZpbGVEYXRhID09PSAnc3RyaW5nJyAmJiB2YWx1ZS5maWxlRGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICAgIGlmICghbWVkaWFUeXBlIHx8ICFmaWxlbmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgZGF0YTogdmFsdWUuZmlsZURhdGEsIG1lZGlhVHlwZSwgZmlsZW5hbWUgfTtcbiAgICB9XG4gICAgaWYgKHZhbHVlLmZpbGVEYXRhIGluc3RhbmNlb2YgVWludDhBcnJheSAmJiB2YWx1ZS5maWxlRGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICAgIGlmICghbWVkaWFUeXBlIHx8ICFmaWxlbmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgZGF0YTogbmV3IFVpbnQ4QXJyYXkodmFsdWUuZmlsZURhdGEpLCBtZWRpYVR5cGUsIGZpbGVuYW1lIH07XG4gICAgfVxuICAgIGlmICh0eXBlb2YgdmFsdWUuZmlsZVVybCA9PT0gJ3N0cmluZycgJiYgdmFsdWUuZmlsZVVybC5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHsgdXJsOiB2YWx1ZS5maWxlVXJsIH07XG4gICAgICAgIGlmIChmaWxlbmFtZSkge1xuICAgICAgICAgICAgcmVzdWx0LmZpbGVuYW1lID0gZmlsZW5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB2YWx1ZS5maWxlSWQgPT09ICdzdHJpbmcnICYmIHZhbHVlLmZpbGVJZC5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHsgaWQ6IHZhbHVlLmZpbGVJZCB9O1xuICAgICAgICBpZiAoZmlsZW5hbWUpIHtcbiAgICAgICAgICAgIHJlc3VsdC5maWxlbmFtZSA9IGZpbGVuYW1lO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gaXNSZWNvcmQodmFsdWUpIHtcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAhPT0gbnVsbDtcbn1cbmZ1bmN0aW9uIGlzTm9uRW1wdHlTdHJpbmcodmFsdWUpIHtcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyAmJiB2YWx1ZS5sZW5ndGggPiAwO1xufVxuZnVuY3Rpb24gdG9JbmxpbmVJbWFnZVN0cmluZyhkYXRhLCBtZWRpYVR5cGUpIHtcbiAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGlmIChtZWRpYVR5cGUgJiYgIWRhdGEuc3RhcnRzV2l0aCgnZGF0YTonKSkge1xuICAgICAgICAgICAgcmV0dXJuIGFzRGF0YVVybChkYXRhLCBtZWRpYVR5cGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cbiAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGVVaW50OEFycmF5VG9CYXNlNjQoZGF0YSk7XG4gICAgcmV0dXJuIGFzRGF0YVVybChiYXNlNjQsIG1lZGlhVHlwZSk7XG59XG5mdW5jdGlvbiBhc0RhdGFVcmwoYmFzZTY0LCBtZWRpYVR5cGUpIHtcbiAgICByZXR1cm4gbWVkaWFUeXBlID8gYGRhdGE6JHttZWRpYVR5cGV9O2Jhc2U2NCwke2Jhc2U2NH1gIDogYmFzZTY0O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dG9vbEV4ZWN1dGlvbi5tanMubWFwIiwiaW1wb3J0IHsgUnVuVG9vbENhbGxJdGVtIH0gZnJvbSBcIi4uL2l0ZW1zLm1qc1wiO1xuLyoqXG4gKiBOb3JtYWxpemVzIGhvc3RlZCBNQ1AgYXBwcm92YWwgZmxvd3Mgc28gc3RyZWFtaW5nIGFuZCBub24tc3RyZWFtaW5nIGxvb3BzIHNoYXJlIGlkZW50aWNhbFxuICogYmVoYXZpb3IuIEhhbmRsZXMgc3luY2hyb25vdXMgYXBwcm92YWxzLCBwcmV2aW91c2x5IGRlY2lkZWQgYXBwcm92YWxzLCBhbmQgcGVuZGluZyBhcHByb3ZhbHMuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYW5kbGVIb3N0ZWRNY3BBcHByb3ZhbHMoeyByZXF1ZXN0cywgYWdlbnQsIHN0YXRlLCBmdW5jdGlvblJlc3VsdHMsIGFwcGVuZElmTmV3LCByZXNvbHZlQXBwcm92YWwsIH0pIHtcbiAgICBjb25zdCBwZW5kaW5nQXBwcm92YWxzID0gbmV3IFNldCgpO1xuICAgIGNvbnN0IHBlbmRpbmdBcHByb3ZhbElkcyA9IG5ldyBTZXQoKTtcbiAgICBmb3IgKGNvbnN0IGFwcHJvdmFsUmVxdWVzdCBvZiByZXF1ZXN0cykge1xuICAgICAgICBjb25zdCByYXdJdGVtID0gYXBwcm92YWxSZXF1ZXN0LnJlcXVlc3RJdGVtLnJhd0l0ZW07XG4gICAgICAgIGlmIChyYXdJdGVtLnR5cGUgIT09ICdob3N0ZWRfdG9vbF9jYWxsJykge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcHJvdmlkZXJEYXRhID0gcmF3SXRlbS5wcm92aWRlckRhdGE7XG4gICAgICAgIGlmICghcHJvdmlkZXJEYXRhKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0b29sRGF0YSA9IGFwcHJvdmFsUmVxdWVzdC5tY3BUb29sLnByb3ZpZGVyRGF0YTtcbiAgICAgICAgY29uc3QgYXBwcm92YWxSZXF1ZXN0SWQgPSByYXdJdGVtLmlkID8/IHByb3ZpZGVyRGF0YS5pZDtcbiAgICAgICAgaWYgKHRvb2xEYXRhPy5vbl9hcHByb3ZhbCkge1xuICAgICAgICAgICAgY29uc3QgYXBwcm92YWxSZXN1bHQgPSBhd2FpdCB0b29sRGF0YS5vbl9hcHByb3ZhbChzdGF0ZS5fY29udGV4dCwgYXBwcm92YWxSZXF1ZXN0LnJlcXVlc3RJdGVtKTtcbiAgICAgICAgICAgIGNvbnN0IGFwcHJvdmFsUmVzcG9uc2VEYXRhID0ge1xuICAgICAgICAgICAgICAgIGFwcHJvdmU6IGFwcHJvdmFsUmVzdWx0LmFwcHJvdmUsXG4gICAgICAgICAgICAgICAgYXBwcm92YWxfcmVxdWVzdF9pZDogYXBwcm92YWxSZXF1ZXN0SWQgPz8gcHJvdmlkZXJEYXRhLmlkLFxuICAgICAgICAgICAgICAgIHJlYXNvbjogYXBwcm92YWxSZXN1bHQucmVhc29uLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGFwcGVuZElmTmV3KG5ldyBSdW5Ub29sQ2FsbEl0ZW0oe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdob3N0ZWRfdG9vbF9jYWxsJyxcbiAgICAgICAgICAgICAgICBuYW1lOiAnbWNwX2FwcHJvdmFsX3Jlc3BvbnNlJyxcbiAgICAgICAgICAgICAgICBwcm92aWRlckRhdGE6IGFwcHJvdmFsUmVzcG9uc2VEYXRhLFxuICAgICAgICAgICAgfSwgYWdlbnQpKTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFwcHJvdmFsRGVjaXNpb24gPSB0eXBlb2YgcmVzb2x2ZUFwcHJvdmFsID09PSAnZnVuY3Rpb24nXG4gICAgICAgICAgICA/IHJlc29sdmVBcHByb3ZhbChyYXdJdGVtKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIGlmICh0eXBlb2YgYXBwcm92YWxEZWNpc2lvbiAhPT0gJ3VuZGVmaW5lZCcgJiYgYXBwcm92YWxSZXF1ZXN0SWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGFwcHJvdmFsUmVzcG9uc2VEYXRhID0ge1xuICAgICAgICAgICAgICAgIGFwcHJvdmU6IGFwcHJvdmFsRGVjaXNpb24sXG4gICAgICAgICAgICAgICAgYXBwcm92YWxfcmVxdWVzdF9pZDogYXBwcm92YWxSZXF1ZXN0SWQsXG4gICAgICAgICAgICAgICAgcmVhc29uOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgYXBwZW5kSWZOZXcobmV3IFJ1blRvb2xDYWxsSXRlbSh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2hvc3RlZF90b29sX2NhbGwnLFxuICAgICAgICAgICAgICAgIG5hbWU6ICdtY3BfYXBwcm92YWxfcmVzcG9uc2UnLFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyRGF0YTogYXBwcm92YWxSZXNwb25zZURhdGEsXG4gICAgICAgICAgICB9LCBhZ2VudCkpO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb25SZXN1bHRzLnB1c2goe1xuICAgICAgICAgICAgdHlwZTogJ2hvc3RlZF9tY3BfdG9vbF9hcHByb3ZhbCcsXG4gICAgICAgICAgICB0b29sOiBhcHByb3ZhbFJlcXVlc3QubWNwVG9vbCxcbiAgICAgICAgICAgIHJ1bkl0ZW06IGFwcHJvdmFsUmVxdWVzdC5yZXF1ZXN0SXRlbSxcbiAgICAgICAgfSk7XG4gICAgICAgIGFwcGVuZElmTmV3KGFwcHJvdmFsUmVxdWVzdC5yZXF1ZXN0SXRlbSk7XG4gICAgICAgIHBlbmRpbmdBcHByb3ZhbHMuYWRkKGFwcHJvdmFsUmVxdWVzdC5yZXF1ZXN0SXRlbSk7XG4gICAgICAgIGlmIChhcHByb3ZhbFJlcXVlc3RJZCkge1xuICAgICAgICAgICAgcGVuZGluZ0FwcHJvdmFsSWRzLmFkZChhcHByb3ZhbFJlcXVlc3RJZCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHsgcGVuZGluZ0FwcHJvdmFscywgcGVuZGluZ0FwcHJvdmFsSWRzIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tY3BBcHByb3ZhbHMubWpzLm1hcCIsImltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuaW1wb3J0IHsgTW9kZWxCZWhhdmlvckVycm9yIH0gZnJvbSBcIi4uL2Vycm9ycy5tanNcIjtcbmltcG9ydCB7IFJ1bk1lc3NhZ2VPdXRwdXRJdGVtLCBSdW5Ub29sQXBwcm92YWxJdGVtIH0gZnJvbSBcIi4uL2l0ZW1zLm1qc1wiO1xuaW1wb3J0IHsgZ2V0TGFzdFRleHRGcm9tT3V0cHV0TWVzc2FnZSB9IGZyb20gXCIuLi91dGlscy9tZXNzYWdlcy5tanNcIjtcbmltcG9ydCB7IGdldFNjaGVtYUFuZFBhcnNlckZyb21JbnB1dFR5cGUgfSBmcm9tIFwiLi4vdXRpbHMvdG9vbHMubWpzXCI7XG5pbXBvcnQgeyBzYWZlRXhlY3V0ZSB9IGZyb20gXCIuLi91dGlscy9zYWZlRXhlY3V0ZS5tanNcIjtcbmltcG9ydCB7IGFkZEVycm9yVG9DdXJyZW50U3BhbiB9IGZyb20gXCIuLi90cmFjaW5nL2NvbnRleHQubWpzXCI7XG5pbXBvcnQgeyBTaW5nbGVTdGVwUmVzdWx0LCBuZXh0U3RlcFNjaGVtYSB9IGZyb20gXCIuL3N0ZXBzLm1qc1wiO1xuaW1wb3J0IHsgY2hlY2tGb3JGaW5hbE91dHB1dEZyb21Ub29scywgZXhlY3V0ZUFwcGx5UGF0Y2hPcGVyYXRpb25zLCBleGVjdXRlQ29tcHV0ZXJBY3Rpb25zLCBleGVjdXRlRnVuY3Rpb25Ub29sQ2FsbHMsIGV4ZWN1dGVIYW5kb2ZmQ2FsbHMsIGV4ZWN1dGVTaGVsbEFjdGlvbnMsIGNvbGxlY3RJbnRlcnJ1cHRpb25zLCB9IGZyb20gXCIuL3Rvb2xFeGVjdXRpb24ubWpzXCI7XG5pbXBvcnQgeyBoYW5kbGVIb3N0ZWRNY3BBcHByb3ZhbHMgfSBmcm9tIFwiLi9tY3BBcHByb3ZhbHMubWpzXCI7XG5jb25zdCBBUFBST1ZBTF9JVEVNX1RZUEVTID0gW1xuICAgICdmdW5jdGlvbl9jYWxsJyxcbiAgICAnaG9zdGVkX3Rvb2xfY2FsbCcsXG4gICAgJ3NoZWxsX2NhbGwnLFxuICAgICdhcHBseV9wYXRjaF9jYWxsJyxcbl07XG5mdW5jdGlvbiBpc0hvc3RlZE1jcEFwcHJvdmFsSXRlbShpdGVtKSB7XG4gICAgcmV0dXJuIChpdGVtLnJhd0l0ZW0udHlwZSA9PT0gJ2hvc3RlZF90b29sX2NhbGwnICYmXG4gICAgICAgIGl0ZW0ucmF3SXRlbS5wcm92aWRlckRhdGE/LnR5cGUgPT09ICdtY3BfYXBwcm92YWxfcmVxdWVzdCcpO1xufVxuZnVuY3Rpb24gcmVzb2x2ZUFwcHJvdmFsU3RhdGUoaXRlbSwgc3RhdGUpIHtcbiAgICBpZiAoaXNIb3N0ZWRNY3BBcHByb3ZhbEl0ZW0oaXRlbSkpIHtcbiAgICAgICAgcmV0dXJuICdwZW5kaW5nJztcbiAgICB9XG4gICAgY29uc3QgcmF3SXRlbSA9IGl0ZW0ucmF3SXRlbTtcbiAgICBjb25zdCB0b29sTmFtZSA9IGl0ZW0udG9vbE5hbWUgPz9cbiAgICAgICAgKCduYW1lJyBpbiByYXdJdGVtICYmIHR5cGVvZiByYXdJdGVtLm5hbWUgPT09ICdzdHJpbmcnXG4gICAgICAgICAgICA/IHJhd0l0ZW0ubmFtZVxuICAgICAgICAgICAgOiB1bmRlZmluZWQpO1xuICAgIGNvbnN0IGNhbGxJZCA9ICdjYWxsSWQnIGluIHJhd0l0ZW0gJiYgdHlwZW9mIHJhd0l0ZW0uY2FsbElkID09PSAnc3RyaW5nJ1xuICAgICAgICA/IHJhd0l0ZW0uY2FsbElkXG4gICAgICAgIDogJ2lkJyBpbiByYXdJdGVtICYmIHR5cGVvZiByYXdJdGVtLmlkID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgPyByYXdJdGVtLmlkXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICBpZiAoIXRvb2xOYW1lIHx8ICFjYWxsSWQpIHtcbiAgICAgICAgcmV0dXJuICdwZW5kaW5nJztcbiAgICB9XG4gICAgY29uc3QgYXBwcm92YWwgPSBzdGF0ZS5fY29udGV4dC5pc1Rvb2xBcHByb3ZlZCh7IHRvb2xOYW1lLCBjYWxsSWQgfSk7XG4gICAgaWYgKGFwcHJvdmFsID09PSB0cnVlKSB7XG4gICAgICAgIHJldHVybiAnYXBwcm92ZWQnO1xuICAgIH1cbiAgICBpZiAoYXBwcm92YWwgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiAncmVqZWN0ZWQnO1xuICAgIH1cbiAgICByZXR1cm4gJ3BlbmRpbmcnO1xufVxuZnVuY3Rpb24gaXNBcHByb3ZhbEl0ZW1MaWtlKHZhbHVlKSB7XG4gICAgaWYgKCF2YWx1ZSB8fCB0eXBlb2YgdmFsdWUgIT09ICdvYmplY3QnKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKCEoJ3Jhd0l0ZW0nIGluIHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IHJhd0l0ZW0gPSB2YWx1ZS5yYXdJdGVtO1xuICAgIGlmICghcmF3SXRlbSB8fCB0eXBlb2YgcmF3SXRlbSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCBpdGVtVHlwZSA9IHJhd0l0ZW0udHlwZTtcbiAgICByZXR1cm4gQVBQUk9WQUxfSVRFTV9UWVBFUy5pbmNsdWRlcyhpdGVtVHlwZSk7XG59XG5mdW5jdGlvbiBnZXRBcHByb3ZhbElkZW50aXR5KGFwcHJvdmFsKSB7XG4gICAgY29uc3QgcmF3SXRlbSA9IGFwcHJvdmFsLnJhd0l0ZW07XG4gICAgaWYgKCFyYXdJdGVtKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmIChyYXdJdGVtLnR5cGUgPT09ICdmdW5jdGlvbl9jYWxsJyAmJiByYXdJdGVtLmNhbGxJZCkge1xuICAgICAgICByZXR1cm4gYGZ1bmN0aW9uX2NhbGw6JHtyYXdJdGVtLmNhbGxJZH1gO1xuICAgIH1cbiAgICBpZiAoJ2NhbGxJZCcgaW4gcmF3SXRlbSAmJiByYXdJdGVtLmNhbGxJZCkge1xuICAgICAgICByZXR1cm4gYCR7cmF3SXRlbS50eXBlfToke3Jhd0l0ZW0uY2FsbElkfWA7XG4gICAgfVxuICAgIGNvbnN0IGlkID0gJ2lkJyBpbiByYXdJdGVtID8gcmF3SXRlbS5pZCA6IHVuZGVmaW5lZDtcbiAgICBpZiAoaWQpIHtcbiAgICAgICAgcmV0dXJuIGAke3Jhd0l0ZW0udHlwZX06JHtpZH1gO1xuICAgIH1cbiAgICBjb25zdCBwcm92aWRlckRhdGEgPSB0eXBlb2YgcmF3SXRlbS5wcm92aWRlckRhdGEgPT09ICdvYmplY3QnICYmIHJhd0l0ZW0ucHJvdmlkZXJEYXRhXG4gICAgICAgID8gcmF3SXRlbS5wcm92aWRlckRhdGFcbiAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgaWYgKHByb3ZpZGVyRGF0YT8uaWQpIHtcbiAgICAgICAgcmV0dXJuIGAke3Jhd0l0ZW0udHlwZX06cHJvdmlkZXI6JHtwcm92aWRlckRhdGEuaWR9YDtcbiAgICB9XG4gICAgY29uc3QgYWdlbnROYW1lID0gJ2FnZW50JyBpbiBhcHByb3ZhbCAmJiBhcHByb3ZhbC5hZ2VudCA/IGFwcHJvdmFsLmFnZW50Lm5hbWUgOiAnJztcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gYCR7YWdlbnROYW1lfToke3Jhd0l0ZW0udHlwZX06JHtKU09OLnN0cmluZ2lmeShyYXdJdGVtKX1gO1xuICAgIH1cbiAgICBjYXRjaCB7XG4gICAgICAgIHJldHVybiBgJHthZ2VudE5hbWV9OiR7cmF3SXRlbS50eXBlfWA7XG4gICAgfVxufVxuZnVuY3Rpb24gYnVpbGRBcHBlbmRDb250ZXh0KGV4aXN0aW5nSXRlbXMpIHtcbiAgICBjb25zdCBzZWVuSXRlbXMgPSBuZXcgU2V0KGV4aXN0aW5nSXRlbXMpO1xuICAgIGNvbnN0IHNlZW5BcHByb3ZhbElkZW50aXRpZXMgPSBuZXcgU2V0KCk7XG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGV4aXN0aW5nSXRlbXMpIHtcbiAgICAgICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBSdW5Ub29sQXBwcm92YWxJdGVtKSB7XG4gICAgICAgICAgICBjb25zdCBpZGVudGl0eSA9IGdldEFwcHJvdmFsSWRlbnRpdHkoaXRlbSk7XG4gICAgICAgICAgICBpZiAoaWRlbnRpdHkpIHtcbiAgICAgICAgICAgICAgICBzZWVuQXBwcm92YWxJZGVudGl0aWVzLmFkZChpZGVudGl0eSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHsgc2Vlbkl0ZW1zLCBzZWVuQXBwcm92YWxJZGVudGl0aWVzIH07XG59XG5mdW5jdGlvbiBhcHBlbmRSdW5JdGVtSWZOZXcoaXRlbSwgdGFyZ2V0LCBjb250ZXh0KSB7XG4gICAgaWYgKGNvbnRleHQuc2Vlbkl0ZW1zLmhhcyhpdGVtKSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChpdGVtIGluc3RhbmNlb2YgUnVuVG9vbEFwcHJvdmFsSXRlbSkge1xuICAgICAgICBjb25zdCBpZGVudGl0eSA9IGdldEFwcHJvdmFsSWRlbnRpdHkoaXRlbSk7XG4gICAgICAgIGlmIChpZGVudGl0eSkge1xuICAgICAgICAgICAgaWYgKGNvbnRleHQuc2VlbkFwcHJvdmFsSWRlbnRpdGllcy5oYXMoaWRlbnRpdHkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29udGV4dC5zZWVuQXBwcm92YWxJZGVudGl0aWVzLmFkZChpZGVudGl0eSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29udGV4dC5zZWVuSXRlbXMuYWRkKGl0ZW0pO1xuICAgIHRhcmdldC5wdXNoKGl0ZW0pO1xufVxuZnVuY3Rpb24gYnVpbGRBcHByb3ZlZENhbGxJZFNldChpdGVtcywgdHlwZSkge1xuICAgIGNvbnN0IGNhbGxJZHMgPSBuZXcgU2V0KCk7XG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgICAgIGlmICghKGl0ZW0gaW5zdGFuY2VvZiBSdW5Ub29sQXBwcm92YWxJdGVtKSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmF3SXRlbSA9IGl0ZW0ucmF3SXRlbTtcbiAgICAgICAgaWYgKCFyYXdJdGVtIHx8IHJhd0l0ZW0udHlwZSAhPT0gdHlwZSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCdjYWxsSWQnIGluIHJhd0l0ZW0gJiYgcmF3SXRlbS5jYWxsSWQpIHtcbiAgICAgICAgICAgIGNhbGxJZHMuYWRkKHJhd0l0ZW0uY2FsbElkKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICgnaWQnIGluIHJhd0l0ZW0gJiYgcmF3SXRlbS5pZCkge1xuICAgICAgICAgICAgY2FsbElkcy5hZGQocmF3SXRlbS5pZCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNhbGxJZHM7XG59XG5mdW5jdGlvbiBjb2xsZWN0Q29tcGxldGVkQ2FsbElkcyhpdGVtcywgdHlwZSkge1xuICAgIGNvbnN0IGNvbXBsZXRlZCA9IG5ldyBTZXQoKTtcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHtcbiAgICAgICAgY29uc3QgcmF3SXRlbSA9IGl0ZW0ucmF3SXRlbTtcbiAgICAgICAgaWYgKCFyYXdJdGVtIHx8IHR5cGVvZiByYXdJdGVtICE9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJhd0l0ZW0udHlwZSAhPT0gdHlwZSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2FsbElkID0gcmF3SXRlbS5jYWxsSWQ7XG4gICAgICAgIGlmICh0eXBlb2YgY2FsbElkID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgY29tcGxldGVkLmFkZChjYWxsSWQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjb21wbGV0ZWQ7XG59XG5mdW5jdGlvbiBmaWx0ZXJBY3Rpb25zQnlBcHByb3ZhbChwcmVTdGVwSXRlbXMsIGFjdGlvbnMsIHR5cGUpIHtcbiAgICBjb25zdCBhbGxvd2VkQ2FsbElkcyA9IGJ1aWxkQXBwcm92ZWRDYWxsSWRTZXQocHJlU3RlcEl0ZW1zLCB0eXBlKTtcbiAgICBpZiAoYWxsb3dlZENhbGxJZHMuc2l6ZSA9PT0gMCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIHJldHVybiBhY3Rpb25zLmZpbHRlcigoYWN0aW9uKSA9PiB0eXBlb2YgYWN0aW9uLnRvb2xDYWxsLmNhbGxJZCA9PT0gJ3N0cmluZycgJiZcbiAgICAgICAgYWxsb3dlZENhbGxJZHMuaGFzKGFjdGlvbi50b29sQ2FsbC5jYWxsSWQpKTtcbn1cbmZ1bmN0aW9uIGZpbHRlclBlbmRpbmdBY3Rpb25zKGFjdGlvbnMsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gYWN0aW9ucy5maWx0ZXIoKGFjdGlvbikgPT4ge1xuICAgICAgICBjb25zdCBjYWxsSWQgPSBhY3Rpb24udG9vbENhbGwuY2FsbElkO1xuICAgICAgICBjb25zdCBoYXNDYWxsSWQgPSB0eXBlb2YgY2FsbElkID09PSAnc3RyaW5nJztcbiAgICAgICAgaWYgKG9wdGlvbnMuYWxsb3dlZENhbGxJZHMgJiYgb3B0aW9ucy5hbGxvd2VkQ2FsbElkcy5zaXplID4gMCkge1xuICAgICAgICAgICAgaWYgKCFoYXNDYWxsSWQgfHwgIW9wdGlvbnMuYWxsb3dlZENhbGxJZHMuaGFzKGNhbGxJZCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhhc0NhbGxJZCAmJiBvcHRpb25zLmNvbXBsZXRlZENhbGxJZHMuaGFzKGNhbGxJZCkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIHRydW5jYXRlRm9yRGV2ZWxvcGVyKG1lc3NhZ2UsIG1heExlbmd0aCA9IDE2MCkge1xuICAgIGNvbnN0IHRyaW1tZWQgPSBtZXNzYWdlLnRyaW0oKTtcbiAgICBpZiAoIXRyaW1tZWQpIHtcbiAgICAgICAgcmV0dXJuICdTY2hlbWEgdmFsaWRhdGlvbiBmYWlsZWQuJztcbiAgICB9XG4gICAgaWYgKHRyaW1tZWQubGVuZ3RoIDw9IG1heExlbmd0aCkge1xuICAgICAgICByZXR1cm4gdHJpbW1lZDtcbiAgICB9XG4gICAgcmV0dXJuIGAke3RyaW1tZWQuc2xpY2UoMCwgbWF4TGVuZ3RoIC0gMyl9Li4uYDtcbn1cbmZ1bmN0aW9uIGZvcm1hdEZpbmFsT3V0cHV0VHlwZUVycm9yKGVycm9yKSB7XG4gICAgLy8gU3VyZmFjZSBzdHJ1Y3R1cmVkIG91dHB1dCB2YWxpZGF0aW9uIGhpbnRzIHdpdGhvdXQgZWNob2luZyBwb3RlbnRpYWxseSBsYXJnZSBvciBzZW5zaXRpdmUgcGF5bG9hZHMuXG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2Ygei5ab2RFcnJvcikge1xuICAgICAgICAgICAgY29uc3QgaXNzdWUgPSBlcnJvci5pc3N1ZXNbMF07XG4gICAgICAgICAgICBpZiAoaXNzdWUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpc3N1ZVBhdGhQYXJ0cyA9IEFycmF5LmlzQXJyYXkoaXNzdWUucGF0aCkgPyBpc3N1ZS5wYXRoIDogW107XG4gICAgICAgICAgICAgICAgY29uc3QgaXNzdWVQYXRoID0gaXNzdWVQYXRoUGFydHMubGVuZ3RoID4gMFxuICAgICAgICAgICAgICAgICAgICA/IGlzc3VlUGF0aFBhcnRzLm1hcCgocGFydCkgPT4gU3RyaW5nKHBhcnQpKS5qb2luKCcuJylcbiAgICAgICAgICAgICAgICAgICAgOiAnKHJvb3QpJztcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gdHJ1bmNhdGVGb3JEZXZlbG9wZXIoaXNzdWUubWVzc2FnZSA/PyAnJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGBJbnZhbGlkIG91dHB1dCB0eXBlOiBmaW5hbCBhc3Npc3RhbnQgb3V0cHV0IGZhaWxlZCBzY2hlbWEgdmFsaWRhdGlvbiBhdCBcIiR7aXNzdWVQYXRofVwiICgke21lc3NhZ2V9KS5gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuICdJbnZhbGlkIG91dHB1dCB0eXBlOiBmaW5hbCBhc3Npc3RhbnQgb3V0cHV0IGZhaWxlZCBzY2hlbWEgdmFsaWRhdGlvbi4nO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmIGVycm9yLm1lc3NhZ2UpIHtcbiAgICAgICAgICAgIHJldHVybiBgSW52YWxpZCBvdXRwdXQgdHlwZTogJHt0cnVuY2F0ZUZvckRldmVsb3BlcihlcnJvci5tZXNzYWdlKX1gO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNhdGNoIHtcbiAgICAgICAgLy8gU3dhbGxvdyBmb3JtYXR0aW5nIGVycm9ycyBzbyB3ZSBjYW4gcmV0dXJuIGEgZ2VuZXJpYyBtZXNzYWdlIGJlbG93LlxuICAgIH1cbiAgICByZXR1cm4gJ0ludmFsaWQgb3V0cHV0IHR5cGU6IGZpbmFsIGFzc2lzdGFudCBvdXRwdXQgZGlkIG5vdCBtYXRjaCB0aGUgZXhwZWN0ZWQgc2NoZW1hLic7XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICogQ29udGludWVzIGEgdHVybiB0aGF0IHdhcyBwcmV2aW91c2x5IGludGVycnVwdGVkIHdhaXRpbmcgZm9yIHRvb2wgYXBwcm92YWwuIEV4ZWN1dGVzIHRoZSBub3dcbiAqIGFwcHJvdmVkIHRvb2xzIGFuZCByZXR1cm5zIHRoZSByZXN1bHRpbmcgc3RlcCB0cmFuc2l0aW9uLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVzb2x2ZUludGVycnVwdGVkVHVybihhZ2VudCwgb3JpZ2luYWxJbnB1dCwgb3JpZ2luYWxQcmVTdGVwSXRlbXMsIG5ld1Jlc3BvbnNlLCBwcm9jZXNzZWRSZXNwb25zZSwgcnVubmVyLCBzdGF0ZSkge1xuICAgIC8vIGNhbGxfaWRzIGZvciBmdW5jdGlvbiB0b29sc1xuICAgIGNvbnN0IGZ1bmN0aW9uQ2FsbElkcyA9IG9yaWdpbmFsUHJlU3RlcEl0ZW1zXG4gICAgICAgIC5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0gaW5zdGFuY2VvZiBSdW5Ub29sQXBwcm92YWxJdGVtICYmXG4gICAgICAgICdjYWxsSWQnIGluIGl0ZW0ucmF3SXRlbSAmJlxuICAgICAgICBpdGVtLnJhd0l0ZW0udHlwZSA9PT0gJ2Z1bmN0aW9uX2NhbGwnKVxuICAgICAgICAubWFwKChpdGVtKSA9PiBpdGVtLnJhd0l0ZW0uY2FsbElkKTtcbiAgICBjb25zdCBjb21wbGV0ZWRGdW5jdGlvbkNhbGxJZHMgPSBjb2xsZWN0Q29tcGxldGVkQ2FsbElkcyhvcmlnaW5hbFByZVN0ZXBJdGVtcywgJ2Z1bmN0aW9uX2NhbGxfcmVzdWx0Jyk7XG4gICAgY29uc3QgY29tcGxldGVkU2hlbGxDYWxsSWRzID0gY29sbGVjdENvbXBsZXRlZENhbGxJZHMob3JpZ2luYWxQcmVTdGVwSXRlbXMsICdzaGVsbF9jYWxsX291dHB1dCcpO1xuICAgIGNvbnN0IGNvbXBsZXRlZEFwcGx5UGF0Y2hDYWxsSWRzID0gY29sbGVjdENvbXBsZXRlZENhbGxJZHMob3JpZ2luYWxQcmVTdGVwSXRlbXMsICdhcHBseV9wYXRjaF9jYWxsX291dHB1dCcpO1xuICAgIC8vIFdlIGFscmVhZHkgcGVyc2lzdGVkIHRoZSB0dXJuIG9uY2Ugd2hlbiB0aGUgYXBwcm92YWwgaW50ZXJydXB0IHdhcyByYWlzZWQsIHNvIHRoZVxuICAgIC8vIGNvdW50ZXIgcmVmbGVjdHMgdGhlIGFwcHJvdmFsIGl0ZW1zIGFzIFwiZmx1c2hlZFwiLiBXaGVuIHdlIHJlc3VtZSB0aGUgc2FtZSB0dXJuIHdlIG5lZWRcbiAgICAvLyB0byByZXdpbmQgaXQgc28gdGhlIGV2ZW50dWFsIHRvb2wgb3V0cHV0IGZvciB0aGlzIGNhbGwgaXMgc3RpbGwgd3JpdHRlbiB0byB0aGUgc2Vzc2lvbi5cbiAgICBjb25zdCBwZW5kaW5nQXBwcm92YWxJdGVtcyA9IHN0YXRlXG4gICAgICAgIC5nZXRJbnRlcnJ1cHRpb25zKClcbiAgICAgICAgLmZpbHRlcihpc0FwcHJvdmFsSXRlbUxpa2UpO1xuICAgIGNvbnN0IHBlbmRpbmdBcHByb3ZhbElkZW50aXRpZXMgPSBuZXcgU2V0KCk7XG4gICAgZm9yIChjb25zdCBhcHByb3ZhbCBvZiBwZW5kaW5nQXBwcm92YWxJdGVtcykge1xuICAgICAgICBpZiAoIShhcHByb3ZhbCBpbnN0YW5jZW9mIFJ1blRvb2xBcHByb3ZhbEl0ZW0pKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNIb3N0ZWRNY3BBcHByb3ZhbEl0ZW0oYXBwcm92YWwpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByYXdJdGVtID0gYXBwcm92YWwucmF3SXRlbTtcbiAgICAgICAgaWYgKHJhd0l0ZW0udHlwZSA9PT0gJ2Z1bmN0aW9uX2NhbGwnICYmXG4gICAgICAgICAgICByYXdJdGVtLmNhbGxJZCAmJlxuICAgICAgICAgICAgY29tcGxldGVkRnVuY3Rpb25DYWxsSWRzLmhhcyhyYXdJdGVtLmNhbGxJZCkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyYXdJdGVtLnR5cGUgPT09ICdzaGVsbF9jYWxsJyAmJlxuICAgICAgICAgICAgcmF3SXRlbS5jYWxsSWQgJiZcbiAgICAgICAgICAgIGNvbXBsZXRlZFNoZWxsQ2FsbElkcy5oYXMocmF3SXRlbS5jYWxsSWQpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmF3SXRlbS50eXBlID09PSAnYXBwbHlfcGF0Y2hfY2FsbCcgJiZcbiAgICAgICAgICAgIHJhd0l0ZW0uY2FsbElkICYmXG4gICAgICAgICAgICBjb21wbGV0ZWRBcHBseVBhdGNoQ2FsbElkcy5oYXMocmF3SXRlbS5jYWxsSWQpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpZGVudGl0eSA9IGdldEFwcHJvdmFsSWRlbnRpdHkoYXBwcm92YWwpO1xuICAgICAgICBpZiAoaWRlbnRpdHkpIHtcbiAgICAgICAgICAgIGlmIChyZXNvbHZlQXBwcm92YWxTdGF0ZShhcHByb3ZhbCwgc3RhdGUpID09PSAncGVuZGluZycpIHtcbiAgICAgICAgICAgICAgICBwZW5kaW5nQXBwcm92YWxJZGVudGl0aWVzLmFkZChpZGVudGl0eSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gUnVuIGZ1bmN0aW9uIHRvb2xzIHRoYXQgcmVxdWlyZSBhcHByb3ZhbCBhZnRlciB0aGV5IGdldCB0aGVpciBhcHByb3ZhbCByZXN1bHRzXG4gICAgY29uc3QgZnVuY3Rpb25Ub29sUnVucyA9IHByb2Nlc3NlZFJlc3BvbnNlLmZ1bmN0aW9ucy5maWx0ZXIoKHJ1bikgPT4ge1xuICAgICAgICBjb25zdCBjYWxsSWQgPSBydW4udG9vbENhbGwuY2FsbElkO1xuICAgICAgICBpZiAoIWZ1bmN0aW9uQ2FsbElkcy5pbmNsdWRlcyhjYWxsSWQpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICFjb21wbGV0ZWRGdW5jdGlvbkNhbGxJZHMuaGFzKGNhbGxJZCk7XG4gICAgfSk7XG4gICAgY29uc3Qgc2hlbGxSdW5zID0gZmlsdGVyUGVuZGluZ0FjdGlvbnMoZmlsdGVyQWN0aW9uc0J5QXBwcm92YWwob3JpZ2luYWxQcmVTdGVwSXRlbXMsIHByb2Nlc3NlZFJlc3BvbnNlLnNoZWxsQWN0aW9ucywgJ3NoZWxsX2NhbGwnKSwge1xuICAgICAgICBjb21wbGV0ZWRDYWxsSWRzOiBjb21wbGV0ZWRTaGVsbENhbGxJZHMsXG4gICAgfSk7XG4gICAgY29uc3QgcGVuZGluZ0NvbXB1dGVyQWN0aW9ucyA9IGZpbHRlclBlbmRpbmdBY3Rpb25zKHByb2Nlc3NlZFJlc3BvbnNlLmNvbXB1dGVyQWN0aW9ucywge1xuICAgICAgICBjb21wbGV0ZWRDYWxsSWRzOiBjb2xsZWN0Q29tcGxldGVkQ2FsbElkcyhvcmlnaW5hbFByZVN0ZXBJdGVtcywgJ2NvbXB1dGVyX2NhbGxfcmVzdWx0JyksXG4gICAgfSk7XG4gICAgY29uc3QgYXBwbHlQYXRjaFJ1bnMgPSBmaWx0ZXJQZW5kaW5nQWN0aW9ucyhmaWx0ZXJBY3Rpb25zQnlBcHByb3ZhbChvcmlnaW5hbFByZVN0ZXBJdGVtcywgcHJvY2Vzc2VkUmVzcG9uc2UuYXBwbHlQYXRjaEFjdGlvbnMsICdhcHBseV9wYXRjaF9jYWxsJyksIHtcbiAgICAgICAgY29tcGxldGVkQ2FsbElkczogY29tcGxldGVkQXBwbHlQYXRjaENhbGxJZHMsXG4gICAgfSk7XG4gICAgY29uc3QgZnVuY3Rpb25SZXN1bHRzID0gYXdhaXQgZXhlY3V0ZUZ1bmN0aW9uVG9vbENhbGxzKGFnZW50LCBmdW5jdGlvblRvb2xSdW5zLCBydW5uZXIsIHN0YXRlKTtcbiAgICAvLyBUaGVyZSBpcyBubyBidWlsdC1pbiBISVRMIGFwcHJvdmFsIHN1cmZhY2UgZm9yIGNvbXB1dGVyIHRvb2xzIHRvZGF5LCBzbyBldmVyeSBwZW5kaW5nIGFjdGlvblxuICAgIC8vIGlzIGV4ZWN1dGVkIGltbWVkaWF0ZWx5IHdoZW4gdGhlIHR1cm4gcmVzdW1lcy5cbiAgICBjb25zdCBjb21wdXRlclJlc3VsdHMgPSBwZW5kaW5nQ29tcHV0ZXJBY3Rpb25zLmxlbmd0aCA+IDBcbiAgICAgICAgPyBhd2FpdCBleGVjdXRlQ29tcHV0ZXJBY3Rpb25zKGFnZW50LCBwZW5kaW5nQ29tcHV0ZXJBY3Rpb25zLCBydW5uZXIsIHN0YXRlLl9jb250ZXh0KVxuICAgICAgICA6IFtdO1xuICAgIGNvbnN0IHNoZWxsUmVzdWx0cyA9IHNoZWxsUnVucy5sZW5ndGggPiAwXG4gICAgICAgID8gYXdhaXQgZXhlY3V0ZVNoZWxsQWN0aW9ucyhhZ2VudCwgc2hlbGxSdW5zLCBydW5uZXIsIHN0YXRlLl9jb250ZXh0KVxuICAgICAgICA6IFtdO1xuICAgIGNvbnN0IGFwcGx5UGF0Y2hSZXN1bHRzID0gYXBwbHlQYXRjaFJ1bnMubGVuZ3RoID4gMFxuICAgICAgICA/IGF3YWl0IGV4ZWN1dGVBcHBseVBhdGNoT3BlcmF0aW9ucyhhZ2VudCwgYXBwbHlQYXRjaFJ1bnMsIHJ1bm5lciwgc3RhdGUuX2NvbnRleHQpXG4gICAgICAgIDogW107XG4gICAgY29uc3QgbmV3SXRlbXMgPSBbXTtcbiAgICBjb25zdCBhcHBlbmRDb250ZXh0ID0gYnVpbGRBcHBlbmRDb250ZXh0KG9yaWdpbmFsUHJlU3RlcEl0ZW1zKTtcbiAgICBjb25zdCBhcHBlbmRJZk5ldyA9IChpdGVtKSA9PiBhcHBlbmRSdW5JdGVtSWZOZXcoaXRlbSwgbmV3SXRlbXMsIGFwcGVuZENvbnRleHQpO1xuICAgIGZvciAoY29uc3QgcmVzdWx0IG9mIGZ1bmN0aW9uUmVzdWx0cykge1xuICAgICAgICBhcHBlbmRJZk5ldyhyZXN1bHQucnVuSXRlbSk7XG4gICAgfVxuICAgIGZvciAoY29uc3QgcmVzdWx0IG9mIGNvbXB1dGVyUmVzdWx0cykge1xuICAgICAgICBhcHBlbmRJZk5ldyhyZXN1bHQpO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IHJlc3VsdCBvZiBzaGVsbFJlc3VsdHMpIHtcbiAgICAgICAgYXBwZW5kSWZOZXcocmVzdWx0KTtcbiAgICB9XG4gICAgZm9yIChjb25zdCByZXN1bHQgb2YgYXBwbHlQYXRjaFJlc3VsdHMpIHtcbiAgICAgICAgYXBwZW5kSWZOZXcocmVzdWx0KTtcbiAgICB9XG4gICAgY29uc3QgYWRkaXRpb25hbEludGVycnVwdGlvbnMgPSBjb2xsZWN0SW50ZXJydXB0aW9ucyhbXSwgWy4uLnNoZWxsUmVzdWx0cywgLi4uYXBwbHlQYXRjaFJlc3VsdHNdKTtcbiAgICBjb25zdCBob3N0ZWRNY3BBcHByb3ZhbHMgPSBhd2FpdCBoYW5kbGVIb3N0ZWRNY3BBcHByb3ZhbHMoe1xuICAgICAgICByZXF1ZXN0czogcHJvY2Vzc2VkUmVzcG9uc2UubWNwQXBwcm92YWxSZXF1ZXN0cyxcbiAgICAgICAgYWdlbnQsXG4gICAgICAgIHN0YXRlLFxuICAgICAgICBmdW5jdGlvblJlc3VsdHMsXG4gICAgICAgIGFwcGVuZElmTmV3LFxuICAgICAgICByZXNvbHZlQXBwcm92YWw6IChyYXdJdGVtKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwcm92aWRlckRhdGEgPSByYXdJdGVtLnByb3ZpZGVyRGF0YTtcbiAgICAgICAgICAgIGNvbnN0IGFwcHJvdmFsUmVxdWVzdElkID0gcmF3SXRlbS5pZCA/PyBwcm92aWRlckRhdGE/LmlkO1xuICAgICAgICAgICAgaWYgKCFhcHByb3ZhbFJlcXVlc3RJZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc3RhdGUuX2NvbnRleHQuaXNUb29sQXBwcm92ZWQoe1xuICAgICAgICAgICAgICAgIHRvb2xOYW1lOiByYXdJdGVtLm5hbWUsXG4gICAgICAgICAgICAgICAgY2FsbElkOiBhcHByb3ZhbFJlcXVlc3RJZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgIH0pO1xuICAgIC8vIFNlcnZlci1tYW5hZ2VkIGNvbnZlcnNhdGlvbnMgcmVseSBvbiBwcmVTdGVwSXRlbXMgdG8gcmUtc3VyZmFjZSBwZW5kaW5nIGFwcHJvdmFscy5cbiAgICAvLyBLZWVwIHVucmVzb2x2ZWQgaG9zdGVkIE1DUCBhcHByb3ZhbHMgaW4gcGxhY2Ugc28gSElUTCBmbG93cyBzdGlsbCBoYXZlIHNvbWV0aGluZyB0byBhcHByb3ZlIG5leHQgdHVybi5cbiAgICAvLyBEcm9wIHJlc29sdmVkIGFwcHJvdmFsIHBsYWNlaG9sZGVycyBzbyB0aGV5IGFyZSBub3QgcmVwbGF5ZWQgb24gdGhlIG5leHQgdHVybiwgYnV0IGtlZXBcbiAgICAvLyBwZW5kaW5nIGFwcHJvdmFscyBpbiBwbGFjZSB0byBzaWduYWwgdGhlIG91dHN0YW5kaW5nIHdvcmsgdG8gdGhlIFVJIGFuZCBzZXNzaW9uIHN0b3JlLlxuICAgIGNvbnN0IHByZVN0ZXBJdGVtcyA9IG9yaWdpbmFsUHJlU3RlcEl0ZW1zLmZpbHRlcigoaXRlbSkgPT4ge1xuICAgICAgICBpZiAoIShpdGVtIGluc3RhbmNlb2YgUnVuVG9vbEFwcHJvdmFsSXRlbSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0hvc3RlZE1jcEFwcHJvdmFsSXRlbShpdGVtKSkge1xuICAgICAgICAgICAgaWYgKGhvc3RlZE1jcEFwcHJvdmFscy5wZW5kaW5nQXBwcm92YWxzLmhhcyhpdGVtKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYXBwcm92YWxSZXF1ZXN0SWQgPSBpdGVtLnJhd0l0ZW0uaWQgPz9cbiAgICAgICAgICAgICAgICBpdGVtLnJhd0l0ZW0ucHJvdmlkZXJEYXRhPy5pZDtcbiAgICAgICAgICAgIGlmIChhcHByb3ZhbFJlcXVlc3RJZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBob3N0ZWRNY3BBcHByb3ZhbHMucGVuZGluZ0FwcHJvdmFsSWRzLmhhcyhhcHByb3ZhbFJlcXVlc3RJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUHJlc2VydmUgYWxsIG90aGVyIGFwcHJvdmFsIGl0ZW1zIHNvIHJlc3VtcHRpb25zIGNhbiBjb250aW51ZSB0byByZWZlcmVuY2UgdGhlXG4gICAgICAgIC8vIG9yaWdpbmFsIGFwcHJvdmFsIHJlcXVlc3RzIChlLmcuLCBmdW5jdGlvbi9zaGVsbC9hcHBseV9wYXRjaCkgT05MWSB3aGlsZSB0aGV5IGFyZSBzdGlsbCBwZW5kaW5nLlxuICAgICAgICBjb25zdCBpZGVudGl0eSA9IGdldEFwcHJvdmFsSWRlbnRpdHkoaXRlbSk7XG4gICAgICAgIGlmICghaWRlbnRpdHkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwZW5kaW5nQXBwcm92YWxJZGVudGl0aWVzLmhhcyhpZGVudGl0eSk7XG4gICAgfSk7XG4gICAgY29uc3Qga2VwdEFwcHJvdmFsSXRlbXMgPSBuZXcgU2V0KCk7XG4gICAgZm9yIChjb25zdCBpdGVtIG9mIHByZVN0ZXBJdGVtcykge1xuICAgICAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIFJ1blRvb2xBcHByb3ZhbEl0ZW0pIHtcbiAgICAgICAgICAgIGtlcHRBcHByb3ZhbEl0ZW1zLmFkZChpdGVtKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBsZXQgcmVtb3ZlZEFwcHJvdmFsQ291bnQgPSAwO1xuICAgIGZvciAoY29uc3QgaXRlbSBvZiBvcmlnaW5hbFByZVN0ZXBJdGVtcykge1xuICAgICAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIFJ1blRvb2xBcHByb3ZhbEl0ZW0gJiYgIWtlcHRBcHByb3ZhbEl0ZW1zLmhhcyhpdGVtKSkge1xuICAgICAgICAgICAgcmVtb3ZlZEFwcHJvdmFsQ291bnQrKztcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAocmVtb3ZlZEFwcHJvdmFsQ291bnQgPiAwKSB7XG4gICAgICAgIC8vIFBlcnNpc3RpbmcgdGhlIGFwcHJvdmFsIHJlcXVlc3QgYWxyZWFkeSBhZHZhbmNlZCB0aGUgY291bnRlciBvbmNlLCBzbyB1bmRvIHRoZSBpbmNyZW1lbnRcbiAgICAgICAgLy8gdG8gbWFrZSBzdXJlIHdlIHdyaXRlIHRoZSBmaW5hbCB0b29sIG91dHB1dCBiYWNrIHRvIHRoZSBzZXNzaW9uIHdoZW4gdGhlIHR1cm4gcmVzdW1lcy5cbiAgICAgICAgc3RhdGUucmV3aW5kVHVyblBlcnNpc3RlbmNlKHJlbW92ZWRBcHByb3ZhbENvdW50KTtcbiAgICB9XG4gICAgY29uc3QgY29tcGxldGVkU3RlcCA9IGF3YWl0IG1heWJlQ29tcGxldGVUdXJuRnJvbVRvb2xSZXN1bHRzKHtcbiAgICAgICAgYWdlbnQsXG4gICAgICAgIHJ1bm5lcixcbiAgICAgICAgc3RhdGUsXG4gICAgICAgIGZ1bmN0aW9uUmVzdWx0cyxcbiAgICAgICAgb3JpZ2luYWxJbnB1dCxcbiAgICAgICAgbmV3UmVzcG9uc2UsXG4gICAgICAgIHByZVN0ZXBJdGVtcyxcbiAgICAgICAgbmV3SXRlbXMsXG4gICAgICAgIGFkZGl0aW9uYWxJbnRlcnJ1cHRpb25zLFxuICAgIH0pO1xuICAgIGlmIChjb21wbGV0ZWRTdGVwKSB7XG4gICAgICAgIHJldHVybiBjb21wbGV0ZWRTdGVwO1xuICAgIH1cbiAgICAvLyB3ZSBvbmx5IHJhbiBuZXcgdG9vbHMgYW5kIHNpZGUgZWZmZWN0cy4gV2UgbmVlZCB0byBydW4gdGhlIHJlc3Qgb2YgdGhlIGFnZW50XG4gICAgcmV0dXJuIG5ldyBTaW5nbGVTdGVwUmVzdWx0KG9yaWdpbmFsSW5wdXQsIG5ld1Jlc3BvbnNlLCBwcmVTdGVwSXRlbXMsIG5ld0l0ZW1zLCB7IHR5cGU6ICduZXh0X3N0ZXBfcnVuX2FnYWluJyB9KTtcbn1cbi8qKlxuICogQGludGVybmFsXG4gKiBFeGVjdXRlcyBldmVyeSBmb2xsb3ctdXAgYWN0aW9uIHRoZSBtb2RlbCByZXF1ZXN0ZWQgKGZ1bmN0aW9uIHRvb2xzLCBjb21wdXRlciBhY3Rpb25zLCBNQ1AgZmxvd3MpLFxuICogYXBwZW5kcyB0aGVpciBvdXRwdXRzIHRvIHRoZSBydW4gaGlzdG9yeSwgYW5kIGRldGVybWluZXMgdGhlIG5leHQgc3RlcCBmb3IgdGhlIGFnZW50IGxvb3AuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXNvbHZlVHVybkFmdGVyTW9kZWxSZXNwb25zZShhZ2VudCwgb3JpZ2luYWxJbnB1dCwgb3JpZ2luYWxQcmVTdGVwSXRlbXMsIG5ld1Jlc3BvbnNlLCBwcm9jZXNzZWRSZXNwb25zZSwgcnVubmVyLCBzdGF0ZSkge1xuICAgIC8vIFJldXNlIHRoZSBzYW1lIGFycmF5IHJlZmVyZW5jZSBzbyB3ZSBjYW4gY29tcGFyZSBvYmplY3QgaWRlbnRpdHkgd2hlbiBkZWNpZGluZyB3aGV0aGVyIHRvXG4gICAgLy8gYXBwZW5kIG5ldyBpdGVtcywgZW5zdXJpbmcgd2UgbmV2ZXIgZG91YmxlLXN0cmVhbSBleGlzdGluZyBSdW5JdGVtcy5cbiAgICBjb25zdCBwcmVTdGVwSXRlbXMgPSBvcmlnaW5hbFByZVN0ZXBJdGVtcztcbiAgICBjb25zdCBuZXdJdGVtcyA9IFtdO1xuICAgIGNvbnN0IGFwcGVuZENvbnRleHQgPSBidWlsZEFwcGVuZENvbnRleHQob3JpZ2luYWxQcmVTdGVwSXRlbXMpO1xuICAgIGNvbnN0IGFwcGVuZElmTmV3ID0gKGl0ZW0pID0+IGFwcGVuZFJ1bkl0ZW1JZk5ldyhpdGVtLCBuZXdJdGVtcywgYXBwZW5kQ29udGV4dCk7XG4gICAgZm9yIChjb25zdCBpdGVtIG9mIHByb2Nlc3NlZFJlc3BvbnNlLm5ld0l0ZW1zKSB7XG4gICAgICAgIGFwcGVuZElmTmV3KGl0ZW0pO1xuICAgIH1cbiAgICAvLyBSdW4gZnVuY3Rpb24gdG9vbHMgYW5kIGNvbXB1dGVyIGFjdGlvbnMgaW4gcGFyYWxsZWw7IG5laXRoZXIgZGVwZW5kcyBvbiB0aGUgb3RoZXIncyBzaWRlIGVmZmVjdHMuXG4gICAgY29uc3QgW2Z1bmN0aW9uUmVzdWx0cywgY29tcHV0ZXJSZXN1bHRzLCBzaGVsbFJlc3VsdHMsIGFwcGx5UGF0Y2hSZXN1bHRzXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgZXhlY3V0ZUZ1bmN0aW9uVG9vbENhbGxzKGFnZW50LCBwcm9jZXNzZWRSZXNwb25zZS5mdW5jdGlvbnMsIHJ1bm5lciwgc3RhdGUpLFxuICAgICAgICBleGVjdXRlQ29tcHV0ZXJBY3Rpb25zKGFnZW50LCBwcm9jZXNzZWRSZXNwb25zZS5jb21wdXRlckFjdGlvbnMsIHJ1bm5lciwgc3RhdGUuX2NvbnRleHQpLFxuICAgICAgICBleGVjdXRlU2hlbGxBY3Rpb25zKGFnZW50LCBwcm9jZXNzZWRSZXNwb25zZS5zaGVsbEFjdGlvbnMsIHJ1bm5lciwgc3RhdGUuX2NvbnRleHQpLFxuICAgICAgICBleGVjdXRlQXBwbHlQYXRjaE9wZXJhdGlvbnMoYWdlbnQsIHByb2Nlc3NlZFJlc3BvbnNlLmFwcGx5UGF0Y2hBY3Rpb25zLCBydW5uZXIsIHN0YXRlLl9jb250ZXh0KSxcbiAgICBdKTtcbiAgICBmb3IgKGNvbnN0IHJlc3VsdCBvZiBmdW5jdGlvblJlc3VsdHMpIHtcbiAgICAgICAgYXBwZW5kSWZOZXcocmVzdWx0LnJ1bkl0ZW0pO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgY29tcHV0ZXJSZXN1bHRzKSB7XG4gICAgICAgIGFwcGVuZElmTmV3KGl0ZW0pO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2Ygc2hlbGxSZXN1bHRzKSB7XG4gICAgICAgIGFwcGVuZElmTmV3KGl0ZW0pO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgYXBwbHlQYXRjaFJlc3VsdHMpIHtcbiAgICAgICAgYXBwZW5kSWZOZXcoaXRlbSk7XG4gICAgfVxuICAgIGNvbnN0IGFkZGl0aW9uYWxJbnRlcnJ1cHRpb25zID0gY29sbGVjdEludGVycnVwdGlvbnMoW10sIFsuLi5zaGVsbFJlc3VsdHMsIC4uLmFwcGx5UGF0Y2hSZXN1bHRzXSk7XG4gICAgaWYgKHByb2Nlc3NlZFJlc3BvbnNlLm1jcEFwcHJvdmFsUmVxdWVzdHMubGVuZ3RoID4gMCkge1xuICAgICAgICBhd2FpdCBoYW5kbGVIb3N0ZWRNY3BBcHByb3ZhbHMoe1xuICAgICAgICAgICAgcmVxdWVzdHM6IHByb2Nlc3NlZFJlc3BvbnNlLm1jcEFwcHJvdmFsUmVxdWVzdHMsXG4gICAgICAgICAgICBhZ2VudCxcbiAgICAgICAgICAgIHN0YXRlLFxuICAgICAgICAgICAgZnVuY3Rpb25SZXN1bHRzLFxuICAgICAgICAgICAgYXBwZW5kSWZOZXcsXG4gICAgICAgICAgICByZXNvbHZlQXBwcm92YWw6IChyYXdJdGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJvdmlkZXJEYXRhID0gcmF3SXRlbS5wcm92aWRlckRhdGE7XG4gICAgICAgICAgICAgICAgY29uc3QgYXBwcm92YWxSZXF1ZXN0SWQgPSByYXdJdGVtLmlkID8/IHByb3ZpZGVyRGF0YT8uaWQ7XG4gICAgICAgICAgICAgICAgaWYgKCFhcHByb3ZhbFJlcXVlc3RJZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gc3RhdGUuX2NvbnRleHQuaXNUb29sQXBwcm92ZWQoe1xuICAgICAgICAgICAgICAgICAgICB0b29sTmFtZTogcmF3SXRlbS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBjYWxsSWQ6IGFwcHJvdmFsUmVxdWVzdElkLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIHByb2Nlc3MgaGFuZG9mZnNcbiAgICBpZiAocHJvY2Vzc2VkUmVzcG9uc2UuaGFuZG9mZnMubGVuZ3RoID4gMCkge1xuICAgICAgICByZXR1cm4gYXdhaXQgZXhlY3V0ZUhhbmRvZmZDYWxscyhhZ2VudCwgb3JpZ2luYWxJbnB1dCwgcHJlU3RlcEl0ZW1zLCBuZXdJdGVtcywgbmV3UmVzcG9uc2UsIHByb2Nlc3NlZFJlc3BvbnNlLmhhbmRvZmZzLCBydW5uZXIsIHN0YXRlLl9jb250ZXh0KTtcbiAgICB9XG4gICAgY29uc3QgY29tcGxldGVkU3RlcCA9IGF3YWl0IG1heWJlQ29tcGxldGVUdXJuRnJvbVRvb2xSZXN1bHRzKHtcbiAgICAgICAgYWdlbnQsXG4gICAgICAgIHJ1bm5lcixcbiAgICAgICAgc3RhdGUsXG4gICAgICAgIGZ1bmN0aW9uUmVzdWx0cyxcbiAgICAgICAgb3JpZ2luYWxJbnB1dCxcbiAgICAgICAgbmV3UmVzcG9uc2UsXG4gICAgICAgIHByZVN0ZXBJdGVtcyxcbiAgICAgICAgbmV3SXRlbXMsXG4gICAgICAgIGFkZGl0aW9uYWxJbnRlcnJ1cHRpb25zLFxuICAgIH0pO1xuICAgIGlmIChjb21wbGV0ZWRTdGVwKSB7XG4gICAgICAgIHJldHVybiBjb21wbGV0ZWRTdGVwO1xuICAgIH1cbiAgICAvLyBJZiB0aGUgbW9kZWwgaXNzdWVkIGFueSB0b29sIGNhbGxzIG9yIGhhbmRvZmZzIGluIHRoaXMgdHVybixcbiAgICAvLyB3ZSBtdXN0IE5PVCB0cmVhdCBhbnkgYXNzaXN0YW50IG1lc3NhZ2UgaW4gdGhlIHNhbWUgdHVybiBhcyB0aGUgZmluYWwgb3V0cHV0LlxuICAgIC8vIFdlIHNob3VsZCBydW4gdGhlIGxvb3AgYWdhaW4gc28gdGhlIG1vZGVsIGNhbiBzZWUgdGhlIHRvb2wgcmVzdWx0cyBhbmQgcmVzcG9uZC5cbiAgICBpZiAocHJvY2Vzc2VkUmVzcG9uc2UuaGFzVG9vbHNPckFwcHJvdmFsc1RvUnVuKCkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTaW5nbGVTdGVwUmVzdWx0KG9yaWdpbmFsSW5wdXQsIG5ld1Jlc3BvbnNlLCBwcmVTdGVwSXRlbXMsIG5ld0l0ZW1zLCB7IHR5cGU6ICduZXh0X3N0ZXBfcnVuX2FnYWluJyB9KTtcbiAgICB9XG4gICAgLy8gTm8gdG9vbCBjYWxscy9hY3Rpb25zIGluIHRoaXMgdHVybjsgc2FmZSB0byBjb25zaWRlciBhIHBsYWluIGFzc2lzdGFudCBtZXNzYWdlIGFzIGZpbmFsLlxuICAgIGNvbnN0IG1lc3NhZ2VJdGVtcyA9IG5ld0l0ZW1zLmZpbHRlcigoaXRlbSkgPT4gaXRlbSBpbnN0YW5jZW9mIFJ1bk1lc3NhZ2VPdXRwdXRJdGVtKTtcbiAgICAvLyB3ZSB3aWxsIHVzZSB0aGUgbGFzdCBjb250ZW50IG91dHB1dCBhcyB0aGUgZmluYWwgb3V0cHV0XG4gICAgY29uc3QgcG90ZW50aWFsRmluYWxPdXRwdXQgPSBtZXNzYWdlSXRlbXMubGVuZ3RoID4gMFxuICAgICAgICA/IGdldExhc3RUZXh0RnJvbU91dHB1dE1lc3NhZ2UobWVzc2FnZUl0ZW1zW21lc3NhZ2VJdGVtcy5sZW5ndGggLSAxXS5yYXdJdGVtKVxuICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAvLyBpZiB0aGVyZSBpcyBubyBvdXRwdXQgd2UganVzdCBydW4gYWdhaW5cbiAgICBpZiAodHlwZW9mIHBvdGVudGlhbEZpbmFsT3V0cHV0ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gbmV3IFNpbmdsZVN0ZXBSZXN1bHQob3JpZ2luYWxJbnB1dCwgbmV3UmVzcG9uc2UsIHByZVN0ZXBJdGVtcywgbmV3SXRlbXMsIHsgdHlwZTogJ25leHRfc3RlcF9ydW5fYWdhaW4nIH0pO1xuICAgIH1cbiAgICAvLyBLZWVwIGxvb3BpbmcgaWYgYW55IHRvb2wgb3V0cHV0IHBsYWNlaG9sZGVycyBzdGlsbCByZXF1aXJlIGFuIGFwcHJvdmFsIGZvbGxvdy11cC5cbiAgICBjb25zdCBoYXNQZW5kaW5nVG9vbHNPckFwcHJvdmFscyA9IGZ1bmN0aW9uUmVzdWx0cy5zb21lKChyZXN1bHQpID0+IHJlc3VsdC5ydW5JdGVtIGluc3RhbmNlb2YgUnVuVG9vbEFwcHJvdmFsSXRlbSkgfHwgYWRkaXRpb25hbEludGVycnVwdGlvbnMubGVuZ3RoID4gMDtcbiAgICBpZiAoIWhhc1BlbmRpbmdUb29sc09yQXBwcm92YWxzKSB7XG4gICAgICAgIGlmIChhZ2VudC5vdXRwdXRUeXBlID09PSAndGV4dCcpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgU2luZ2xlU3RlcFJlc3VsdChvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdJdGVtcywge1xuICAgICAgICAgICAgICAgIHR5cGU6ICduZXh0X3N0ZXBfZmluYWxfb3V0cHV0JyxcbiAgICAgICAgICAgICAgICBvdXRwdXQ6IHBvdGVudGlhbEZpbmFsT3V0cHV0LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFnZW50Lm91dHB1dFR5cGUgIT09ICd0ZXh0JyAmJiBwb3RlbnRpYWxGaW5hbE91dHB1dCkge1xuICAgICAgICAgICAgLy8gU3RydWN0dXJlZCBvdXRwdXQgc2NoZW1hID0+IGFsd2F5cyBsZWFkcyB0byBhIGZpbmFsIG91dHB1dCBpZiB3ZSBoYXZlIHRleHQuXG4gICAgICAgICAgICBjb25zdCB7IHBhcnNlciB9ID0gZ2V0U2NoZW1hQW5kUGFyc2VyRnJvbUlucHV0VHlwZShhZ2VudC5vdXRwdXRUeXBlLCAnZmluYWxfb3V0cHV0Jyk7XG4gICAgICAgICAgICBjb25zdCBbZXJyb3JdID0gYXdhaXQgc2FmZUV4ZWN1dGUoKCkgPT4gcGFyc2VyKHBvdGVudGlhbEZpbmFsT3V0cHV0KSk7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBvdXRwdXRFcnJvck1lc3NhZ2UgPSBmb3JtYXRGaW5hbE91dHB1dFR5cGVFcnJvcihlcnJvcik7XG4gICAgICAgICAgICAgICAgYWRkRXJyb3JUb0N1cnJlbnRTcGFuKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogb3V0cHV0RXJyb3JNZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogU3RyaW5nKGVycm9yKSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKG91dHB1dEVycm9yTWVzc2FnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IFNpbmdsZVN0ZXBSZXN1bHQob3JpZ2luYWxJbnB1dCwgbmV3UmVzcG9uc2UsIHByZVN0ZXBJdGVtcywgbmV3SXRlbXMsIHsgdHlwZTogJ25leHRfc3RlcF9maW5hbF9vdXRwdXQnLCBvdXRwdXQ6IHBvdGVudGlhbEZpbmFsT3V0cHV0IH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuZXcgU2luZ2xlU3RlcFJlc3VsdChvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdJdGVtcywgeyB0eXBlOiAnbmV4dF9zdGVwX3J1bl9hZ2FpbicgfSk7XG59XG4vLyBDb25zb2xpZGF0ZXMgdGhlIGxvZ2ljIHRoYXQgZGV0ZXJtaW5lcyB3aGV0aGVyIHRvb2wgcmVzdWx0cyB5aWVsZGVkIGEgZmluYWwgYW5zd2VyLFxuLy8gdHJpZ2dlcmVkIGFuIGludGVycnVwdGlvbiwgb3IgcmVxdWlyZSB0aGUgYWdlbnQgbG9vcCB0byBjb250aW51ZSBydW5uaW5nLlxuYXN5bmMgZnVuY3Rpb24gbWF5YmVDb21wbGV0ZVR1cm5Gcm9tVG9vbFJlc3VsdHMoeyBhZ2VudCwgcnVubmVyOiBfcnVubmVyLCBzdGF0ZSwgZnVuY3Rpb25SZXN1bHRzLCBvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdJdGVtcywgYWRkaXRpb25hbEludGVycnVwdGlvbnMgPSBbXSwgfSkge1xuICAgIGNvbnN0IHRvb2xPdXRjb21lID0gYXdhaXQgY2hlY2tGb3JGaW5hbE91dHB1dEZyb21Ub29scyhhZ2VudCwgZnVuY3Rpb25SZXN1bHRzLCBzdGF0ZSwgYWRkaXRpb25hbEludGVycnVwdGlvbnMpO1xuICAgIGlmICh0b29sT3V0Y29tZS5pc0ZpbmFsT3V0cHV0KSB7XG4gICAgICAgIHJldHVybiBuZXcgU2luZ2xlU3RlcFJlc3VsdChvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdJdGVtcywge1xuICAgICAgICAgICAgdHlwZTogJ25leHRfc3RlcF9maW5hbF9vdXRwdXQnLFxuICAgICAgICAgICAgb3V0cHV0OiB0b29sT3V0Y29tZS5maW5hbE91dHB1dCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGlmICh0b29sT3V0Y29tZS5pc0ludGVycnVwdGVkKSB7XG4gICAgICAgIHJldHVybiBuZXcgU2luZ2xlU3RlcFJlc3VsdChvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdJdGVtcywge1xuICAgICAgICAgICAgdHlwZTogJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIGludGVycnVwdGlvbnM6IHRvb2xPdXRjb21lLmludGVycnVwdGlvbnMsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5leHBvcnQgeyBuZXh0U3RlcFNjaGVtYSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHVyblJlc29sdXRpb24ubWpzLm1hcCIsImltcG9ydCB7IFVzZXJFcnJvciB9IGZyb20gXCIuLi9lcnJvcnMubWpzXCI7XG5mdW5jdGlvbiBpc0NvbXB1dGVySW5zdGFuY2UodmFsdWUpIHtcbiAgICByZXR1cm4gKCEhdmFsdWUgJiZcbiAgICAgICAgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJlxuICAgICAgICAnZW52aXJvbm1lbnQnIGluIHZhbHVlICYmXG4gICAgICAgICdkaW1lbnNpb25zJyBpbiB2YWx1ZSk7XG59XG5leHBvcnQgZnVuY3Rpb24gc2VyaWFsaXplVG9vbCh0b29sKSB7XG4gICAgaWYgKHRvb2wudHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ2Z1bmN0aW9uJyxcbiAgICAgICAgICAgIG5hbWU6IHRvb2wubmFtZSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0b29sLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgcGFyYW1ldGVyczogdG9vbC5wYXJhbWV0ZXJzLFxuICAgICAgICAgICAgc3RyaWN0OiB0b29sLnN0cmljdCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKHRvb2wudHlwZSA9PT0gJ2NvbXB1dGVyJykge1xuICAgICAgICAvLyBXaGVuIGEgY29tcHV0ZXIgaXMgY3JlYXRlZCBsYXppbHkgdmlhIGFuIGluaXRpYWxpemVyLCBzZXJpYWxpemVUb29sIGNhbiBiZSBjYWxsZWQgYmVmb3JlIGluaXRpYWxpemF0aW9uIChlLmcuLCBtYW51YWwgc2VyaWFsaXplIHdpdGhvdXQgcnVubmluZyB0aGUgYWdlbnQpLlxuICAgICAgICBpZiAoIWlzQ29tcHV0ZXJJbnN0YW5jZSh0b29sLmNvbXB1dGVyKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcignQ29tcHV0ZXIgdG9vbCBpcyBub3QgaW5pdGlhbGl6ZWQgZm9yIHNlcmlhbGl6YXRpb24uIENhbGwgcmVzb2x2ZUNvbXB1dGVyKHsgdG9vbCwgcnVuQ29udGV4dCB9KSBmaXJzdCAoZm9yIGV4YW1wbGUsIHdoZW4gYnVpbGRpbmcgYSBtb2RlbCBwYXlsb2FkIG91dHNpZGUgUnVubmVyLnJ1bikuJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdjb21wdXRlcicsXG4gICAgICAgICAgICBuYW1lOiB0b29sLm5hbWUsXG4gICAgICAgICAgICBlbnZpcm9ubWVudDogdG9vbC5jb21wdXRlci5lbnZpcm9ubWVudCxcbiAgICAgICAgICAgIGRpbWVuc2lvbnM6IHRvb2wuY29tcHV0ZXIuZGltZW5zaW9ucyxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKHRvb2wudHlwZSA9PT0gJ3NoZWxsJykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ3NoZWxsJyxcbiAgICAgICAgICAgIG5hbWU6IHRvb2wubmFtZSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKHRvb2wudHlwZSA9PT0gJ2FwcGx5X3BhdGNoJykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ2FwcGx5X3BhdGNoJyxcbiAgICAgICAgICAgIG5hbWU6IHRvb2wubmFtZSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2hvc3RlZF90b29sJyxcbiAgICAgICAgbmFtZTogdG9vbC5uYW1lLFxuICAgICAgICBwcm92aWRlckRhdGE6IHRvb2wucHJvdmlkZXJEYXRhLFxuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gc2VyaWFsaXplSGFuZG9mZihoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdG9vbE5hbWU6IGgudG9vbE5hbWUsXG4gICAgICAgIHRvb2xEZXNjcmlwdGlvbjogaC50b29sRGVzY3JpcHRpb24sXG4gICAgICAgIGlucHV0SnNvblNjaGVtYTogaC5pbnB1dEpzb25TY2hlbWEsXG4gICAgICAgIHN0cmljdEpzb25TY2hlbWE6IGguc3RyaWN0SnNvblNjaGVtYSxcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2VyaWFsaXplLm1qcy5tYXAiLCJpbXBvcnQgeyBzZXRDdXJyZW50U3BhbiB9IGZyb20gXCIuLi90cmFjaW5nL2NvbnRleHQubWpzXCI7XG5pbXBvcnQgeyBjcmVhdGVBZ2VudFNwYW4gfSBmcm9tIFwiLi4vdHJhY2luZy9pbmRleC5tanNcIjtcbi8qKlxuICogTm9ybWFsaXplcyB0cmFjaW5nIGNvbmZpZ3VyYXRpb24gaW50byB0aGUgZm9ybWF0IGV4cGVjdGVkIGJ5IG1vZGVsIHByb3ZpZGVycy5cbiAqIFJldHVybnMgYGZhbHNlYCB0byBkaXNhYmxlIHRyYWNpbmcsIGB0cnVlYCB0byBpbmNsdWRlIGZ1bGwgcGF5bG9hZCBkYXRhLCBvclxuICogYCdlbmFibGVkX3dpdGhvdXRfZGF0YSdgIHRvIG9taXQgc2Vuc2l0aXZlIGNvbnRlbnQgd2hpbGUgc3RpbGwgZW1pdHRpbmcgc3BhbnMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUcmFjaW5nKHRyYWNpbmdEaXNhYmxlZCwgdHJhY2VJbmNsdWRlU2Vuc2l0aXZlRGF0YSkge1xuICAgIGlmICh0cmFjaW5nRGlzYWJsZWQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAodHJhY2VJbmNsdWRlU2Vuc2l0aXZlRGF0YSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuICdlbmFibGVkX3dpdGhvdXRfZGF0YSc7XG59XG4vKipcbiAqIEVuc3VyZXMgYW4gYWdlbnQgc3BhbiBleGlzdHMgYW5kIHVwZGF0ZXMgdG9vbCBtZXRhZGF0YSBpZiBhbHJlYWR5IHByZXNlbnQuXG4gKiBSZXR1cm5zIHRoZSBzcGFuIHNvIGNhbGxlcnMgY2FuIHBhc3MgaXQgdGhyb3VnaCBydW4gc3RhdGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlbnN1cmVBZ2VudFNwYW4ocGFyYW1zKSB7XG4gICAgY29uc3QgeyBhZ2VudCwgaGFuZG9mZnMsIHRvb2xzLCBjdXJyZW50U3BhbiB9ID0gcGFyYW1zO1xuICAgIGNvbnN0IGV4aXN0aW5nU3BhbiA9IGN1cnJlbnRTcGFuO1xuICAgIGlmIChleGlzdGluZ1NwYW4pIHtcbiAgICAgICAgZXhpc3RpbmdTcGFuLnNwYW5EYXRhLnRvb2xzID0gdG9vbHMubWFwKCh0KSA9PiB0Lm5hbWUpO1xuICAgICAgICByZXR1cm4gZXhpc3RpbmdTcGFuO1xuICAgIH1cbiAgICBjb25zdCBoYW5kb2ZmTmFtZXMgPSBoYW5kb2Zmcy5tYXAoKGgpID0+IGguYWdlbnROYW1lKTtcbiAgICBjb25zdCBzcGFuID0gY3JlYXRlQWdlbnRTcGFuKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgbmFtZTogYWdlbnQubmFtZSxcbiAgICAgICAgICAgIGhhbmRvZmZzOiBoYW5kb2ZmTmFtZXMsXG4gICAgICAgICAgICB0b29sczogdG9vbHMubWFwKCh0KSA9PiB0Lm5hbWUpLFxuICAgICAgICAgICAgb3V0cHV0X3R5cGU6IGFnZW50Lm91dHB1dFNjaGVtYU5hbWUsXG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgc3Bhbi5zdGFydCgpO1xuICAgIHNldEN1cnJlbnRTcGFuKHNwYW4pO1xuICAgIHJldHVybiBzcGFuO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHJhY2luZy5tanMubWFwIiwiaW1wb3J0IHsgc2VyaWFsaXplSGFuZG9mZiwgc2VyaWFsaXplVG9vbCB9IGZyb20gXCIuLi91dGlscy9zZXJpYWxpemUubWpzXCI7XG5pbXBvcnQgeyByZXNvbHZlQ29tcHV0ZXIgfSBmcm9tIFwiLi4vdG9vbC5tanNcIjtcbmltcG9ydCB7IGVuc3VyZUFnZW50U3BhbiB9IGZyb20gXCIuL3RyYWNpbmcubWpzXCI7XG4vKipcbiAqIENvbGxlY3RzIHRvb2xzIGFuZCBoYW5kb2ZmcyBmb3IgdGhlIGN1cnJlbnQgYWdlbnQgc28gbW9kZWwgY2FsbHMgYW5kIHRyYWNpbmcgc2hhcmUgdGhlIHNhbWVcbiAqIHNuYXBzaG90IG9mIGVuYWJsZWQgY2FwYWJpbGl0aWVzLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcHJlcGFyZUFnZW50QXJ0aWZhY3RzKHN0YXRlKSB7XG4gICAgY29uc3QgY2FwYWJpbGl0aWVzID0gYXdhaXQgY29sbGVjdEFnZW50Q2FwYWJpbGl0aWVzKHN0YXRlKTtcbiAgICBhd2FpdCB3YXJtVXBDb21wdXRlclRvb2xzKGNhcGFiaWxpdGllcy50b29scywgc3RhdGUuX2NvbnRleHQpO1xuICAgIHN0YXRlLnNldEN1cnJlbnRBZ2VudFNwYW4oZW5zdXJlQWdlbnRTcGFuKHtcbiAgICAgICAgYWdlbnQ6IHN0YXRlLl9jdXJyZW50QWdlbnQsXG4gICAgICAgIGhhbmRvZmZzOiBjYXBhYmlsaXRpZXMuaGFuZG9mZnMsXG4gICAgICAgIHRvb2xzOiBjYXBhYmlsaXRpZXMudG9vbHMsXG4gICAgICAgIGN1cnJlbnRTcGFuOiBzdGF0ZS5fY3VycmVudEFnZW50U3BhbixcbiAgICB9KSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4uY2FwYWJpbGl0aWVzLFxuICAgICAgICBzZXJpYWxpemVkSGFuZG9mZnM6IGNhcGFiaWxpdGllcy5oYW5kb2Zmcy5tYXAoKGhhbmRvZmYpID0+IHNlcmlhbGl6ZUhhbmRvZmYoaGFuZG9mZikpLFxuICAgICAgICBzZXJpYWxpemVkVG9vbHM6IGNhcGFiaWxpdGllcy50b29scy5tYXAoKHRvb2wpID0+IHNlcmlhbGl6ZVRvb2wodG9vbCkpLFxuICAgICAgICB0b29sc0V4cGxpY2l0bHlQcm92aWRlZDogc3RhdGUuX2N1cnJlbnRBZ2VudC5oYXNFeHBsaWNpdFRvb2xDb25maWcoKSxcbiAgICB9O1xufVxuYXN5bmMgZnVuY3Rpb24gY29sbGVjdEFnZW50Q2FwYWJpbGl0aWVzKHN0YXRlKSB7XG4gICAgY29uc3QgaGFuZG9mZnMgPSBhd2FpdCBzdGF0ZS5fY3VycmVudEFnZW50LmdldEVuYWJsZWRIYW5kb2ZmcyhzdGF0ZS5fY29udGV4dCk7XG4gICAgY29uc3QgdG9vbHMgPSAoYXdhaXQgc3RhdGUuX2N1cnJlbnRBZ2VudC5nZXRBbGxUb29scyhzdGF0ZS5fY29udGV4dCkpO1xuICAgIHJldHVybiB7IGhhbmRvZmZzLCB0b29scyB9O1xufVxuYXN5bmMgZnVuY3Rpb24gd2FybVVwQ29tcHV0ZXJUb29scyh0b29scywgcnVuQ29udGV4dCkge1xuICAgIGNvbnN0IGNvbXB1dGVyVG9vbHMgPSB0b29scy5maWx0ZXIoKHRvb2wpID0+IHRvb2wudHlwZSA9PT0gJ2NvbXB1dGVyJyk7XG4gICAgaWYgKGNvbXB1dGVyVG9vbHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYXdhaXQgUHJvbWlzZS5hbGwoY29tcHV0ZXJUb29scy5tYXAoYXN5bmMgKHRvb2wpID0+IHtcbiAgICAgICAgYXdhaXQgcmVzb2x2ZUNvbXB1dGVyKHsgdG9vbCwgcnVuQ29udGV4dCB9KTtcbiAgICB9KSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tb2RlbFByZXBhcmF0aW9uLm1qcy5tYXAiLCJpbXBvcnQgeyBNYXhUdXJuc0V4Y2VlZGVkRXJyb3IgfSBmcm9tIFwiLi4vZXJyb3JzLm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IHsgYnVpbGRJbnB1dEd1YXJkcmFpbERlZmluaXRpb25zLCBydW5JbnB1dEd1YXJkcmFpbHMsIHNwbGl0SW5wdXRHdWFyZHJhaWxzLCB9IGZyb20gXCIuL2d1YXJkcmFpbHMubWpzXCI7XG5pbXBvcnQgeyBnZXRUdXJuSW5wdXQgfSBmcm9tIFwiLi9pdGVtcy5tanNcIjtcbmltcG9ydCB7IHByZXBhcmVBZ2VudEFydGlmYWN0cyB9IGZyb20gXCIuL21vZGVsUHJlcGFyYXRpb24ubWpzXCI7XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcHJlcGFyZVR1cm4ob3B0aW9ucykge1xuICAgIGNvbnN0IHsgc3RhdGUsIGlucHV0LCBnZW5lcmF0ZWRJdGVtcywgaXNSZXN1bWVkU3RhdGUsIHByZXNlcnZlVHVyblBlcnNpc3RlbmNlT25SZXN1bWUsIGNvbnRpbnVpbmdJbnRlcnJ1cHRlZFR1cm4sIHNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXIsIGlucHV0R3VhcmRyYWlsRGVmcywgZ3VhcmRyYWlsSGFuZGxlcnMsIGVtaXRBZ2VudFN0YXJ0LCB9ID0gb3B0aW9ucztcbiAgICBjb25zdCBhcnRpZmFjdHMgPSBhd2FpdCBwcmVwYXJlQWdlbnRBcnRpZmFjdHMoc3RhdGUpO1xuICAgIGNvbnN0IHsgaXNSZXN1bWluZ0Zyb21JbnRlcnJ1cHRpb24gfSA9IGJlZ2luVHVybihzdGF0ZSwge1xuICAgICAgICBpc1Jlc3VtZWRTdGF0ZSxcbiAgICAgICAgcHJlc2VydmVUdXJuUGVyc2lzdGVuY2VPblJlc3VtZSxcbiAgICAgICAgY29udGludWluZ0ludGVycnVwdGVkVHVybixcbiAgICB9KTtcbiAgICBpZiAoc3RhdGUuX2N1cnJlbnRUdXJuID4gc3RhdGUuX21heFR1cm5zKSB7XG4gICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuPy5zZXRFcnJvcih7XG4gICAgICAgICAgICBtZXNzYWdlOiAnTWF4IHR1cm5zIGV4Y2VlZGVkJyxcbiAgICAgICAgICAgIGRhdGE6IHsgbWF4X3R1cm5zOiBzdGF0ZS5fbWF4VHVybnMgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRocm93IG5ldyBNYXhUdXJuc0V4Y2VlZGVkRXJyb3IoYE1heCB0dXJucyAoJHtzdGF0ZS5fbWF4VHVybnN9KSBleGNlZWRlZGAsIHN0YXRlKTtcbiAgICB9XG4gICAgbG9nZ2VyLmRlYnVnKGBSdW5uaW5nIGFnZW50ICR7c3RhdGUuX2N1cnJlbnRBZ2VudC5uYW1lfSAodHVybiAke3N0YXRlLl9jdXJyZW50VHVybn0pYCk7XG4gICAgY29uc3QgeyBwYXJhbGxlbEd1YXJkcmFpbFByb21pc2UgfSA9IGF3YWl0IHJ1bklucHV0R3VhcmRyYWlsc0ZvclR1cm4oc3RhdGUsIGlucHV0R3VhcmRyYWlsRGVmcywgaXNSZXN1bWluZ0Zyb21JbnRlcnJ1cHRpb24sIGd1YXJkcmFpbEhhbmRsZXJzKTtcbiAgICBjb25zdCB0dXJuSW5wdXQgPSBzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyXG4gICAgICAgID8gc2VydmVyQ29udmVyc2F0aW9uVHJhY2tlci5wcmVwYXJlSW5wdXQoaW5wdXQsIGdlbmVyYXRlZEl0ZW1zKVxuICAgICAgICA6IGdldFR1cm5JbnB1dChpbnB1dCwgZ2VuZXJhdGVkSXRlbXMpO1xuICAgIGlmIChzdGF0ZS5fbm9BY3RpdmVBZ2VudFJ1bikge1xuICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50LmVtaXQoJ2FnZW50X3N0YXJ0Jywgc3RhdGUuX2NvbnRleHQsIHN0YXRlLl9jdXJyZW50QWdlbnQsIHR1cm5JbnB1dCk7XG4gICAgICAgIGVtaXRBZ2VudFN0YXJ0Py4oc3RhdGUuX2NvbnRleHQsIHN0YXRlLl9jdXJyZW50QWdlbnQsIHR1cm5JbnB1dCk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGFydGlmYWN0cyxcbiAgICAgICAgdHVybklucHV0LFxuICAgICAgICBwYXJhbGxlbEd1YXJkcmFpbFByb21pc2UsXG4gICAgfTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHJ1bklucHV0R3VhcmRyYWlsc0ZvclR1cm4oc3RhdGUsIHJ1bm5lckd1YXJkcmFpbHMsIGlzUmVzdW1pbmdGcm9tSW50ZXJydXB0aW9uLCBoYW5kbGVycyA9IHt9KSB7XG4gICAgaWYgKHN0YXRlLl9jdXJyZW50VHVybiAhPT0gMSB8fCBpc1Jlc3VtaW5nRnJvbUludGVycnVwdGlvbikge1xuICAgICAgICByZXR1cm4ge307XG4gICAgfVxuICAgIGNvbnN0IGd1YXJkcmFpbERlZnMgPSBidWlsZElucHV0R3VhcmRyYWlsRGVmaW5pdGlvbnMoc3RhdGUsIHJ1bm5lckd1YXJkcmFpbHMpO1xuICAgIGNvbnN0IGd1YXJkcmFpbHMgPSBzcGxpdElucHV0R3VhcmRyYWlscyhndWFyZHJhaWxEZWZzKTtcbiAgICBpZiAoZ3VhcmRyYWlscy5ibG9ja2luZy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGF3YWl0IHJ1bklucHV0R3VhcmRyYWlscyhzdGF0ZSwgZ3VhcmRyYWlscy5ibG9ja2luZyk7XG4gICAgfVxuICAgIGlmIChndWFyZHJhaWxzLnBhcmFsbGVsLmxlbmd0aCA+IDApIHtcbiAgICAgICAgaGFuZGxlcnMub25QYXJhbGxlbFN0YXJ0Py4oKTtcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHJ1bklucHV0R3VhcmRyYWlscyhzdGF0ZSwgZ3VhcmRyYWlscy5wYXJhbGxlbCk7XG4gICAgICAgIGNvbnN0IHBhcmFsbGVsR3VhcmRyYWlsUHJvbWlzZSA9IHByb21pc2UuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgaGFuZGxlcnMub25QYXJhbGxlbEVycm9yPy4oZXJyKTtcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7IHBhcmFsbGVsR3VhcmRyYWlsUHJvbWlzZSB9O1xuICAgIH1cbiAgICByZXR1cm4ge307XG59XG5mdW5jdGlvbiBiZWdpblR1cm4oc3RhdGUsIG9wdGlvbnMpIHtcbiAgICBjb25zdCBpc1Jlc3VtaW5nRnJvbUludGVycnVwdGlvbiA9IG9wdGlvbnMuaXNSZXN1bWVkU3RhdGUgJiYgb3B0aW9ucy5jb250aW51aW5nSW50ZXJydXB0ZWRUdXJuO1xuICAgIGNvbnN0IHJlc3VtaW5nVHVybkluUHJvZ3Jlc3MgPSBvcHRpb25zLmlzUmVzdW1lZFN0YXRlICYmIHN0YXRlLl9jdXJyZW50VHVybkluUHJvZ3Jlc3MgPT09IHRydWU7XG4gICAgLy8gRG8gbm90IGFkdmFuY2UgdGhlIHR1cm4gd2hlbiByZXN1bWluZyBmcm9tIGFuIGludGVycnVwdGlvbjsgdGhlIG5leHQgbW9kZWwgY2FsbCBpc1xuICAgIC8vIHN0aWxsIHBhcnQgb2YgdGhlIHNhbWUgbG9naWNhbCB0dXJuLlxuICAgIGlmICghaXNSZXN1bWluZ0Zyb21JbnRlcnJ1cHRpb24gJiYgIXJlc3VtaW5nVHVybkluUHJvZ3Jlc3MpIHtcbiAgICAgICAgc3RhdGUuX2N1cnJlbnRUdXJuKys7XG4gICAgICAgIGlmICghb3B0aW9ucy5pc1Jlc3VtZWRTdGF0ZSB8fCAhb3B0aW9ucy5wcmVzZXJ2ZVR1cm5QZXJzaXN0ZW5jZU9uUmVzdW1lKSB7XG4gICAgICAgICAgICBzdGF0ZS5yZXNldFR1cm5QZXJzaXN0ZW5jZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHN0YXRlLl9jdXJyZW50VHVyblBlcnNpc3RlZEl0ZW1Db3VudCA+IHN0YXRlLl9nZW5lcmF0ZWRJdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIC8vIFJlc2V0IGlmIGEgc3RhbGUgY291bnQgd291bGQgc2tpcCBpdGVtcyBpbiBzdWJzZXF1ZW50IHR1cm5zLlxuICAgICAgICAgICAgc3RhdGUucmVzZXRUdXJuUGVyc2lzdGVuY2UoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0ZS5fY3VycmVudFR1cm5JblByb2dyZXNzID0gdHJ1ZTtcbiAgICByZXR1cm4geyBpc1Jlc3VtaW5nRnJvbUludGVycnVwdGlvbiB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHVyblByZXBhcmF0aW9uLm1qcy5tYXAiLCJpbXBvcnQgeyByZXNvbHZlSW50ZXJydXB0ZWRUdXJuIH0gZnJvbSBcIi4vdHVyblJlc29sdXRpb24ubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gYXBwbHlUdXJuUmVzdWx0KG9wdGlvbnMpIHtcbiAgICBjb25zdCB7IHN0YXRlLCB0dXJuUmVzdWx0LCBhZ2VudCwgdG9vbHNVc2VkLCByZXNldFR1cm5QZXJzaXN0ZW5jZSwgb25TdGVwSXRlbXMsIH0gPSBvcHRpb25zO1xuICAgIG9uU3RlcEl0ZW1zPy4odHVyblJlc3VsdCk7XG4gICAgc3RhdGUuX3Rvb2xVc2VUcmFja2VyLmFkZFRvb2xVc2UoYWdlbnQsIHRvb2xzVXNlZCk7XG4gICAgc3RhdGUuX29yaWdpbmFsSW5wdXQgPSB0dXJuUmVzdWx0Lm9yaWdpbmFsSW5wdXQ7XG4gICAgc3RhdGUuX2dlbmVyYXRlZEl0ZW1zID0gdHVyblJlc3VsdC5nZW5lcmF0ZWRJdGVtcztcbiAgICBpZiAocmVzZXRUdXJuUGVyc2lzdGVuY2UgJiZcbiAgICAgICAgdHVyblJlc3VsdC5uZXh0U3RlcC50eXBlID09PSAnbmV4dF9zdGVwX3J1bl9hZ2FpbicpIHtcbiAgICAgICAgc3RhdGUucmVzZXRUdXJuUGVyc2lzdGVuY2UoKTtcbiAgICB9XG4gICAgc3RhdGUuX2N1cnJlbnRTdGVwID0gdHVyblJlc3VsdC5uZXh0U3RlcDtcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXN1bWVJbnRlcnJ1cHRlZFR1cm4ob3B0aW9ucykge1xuICAgIGNvbnN0IHsgc3RhdGUsIHJ1bm5lciwgb25TdGVwSXRlbXMgfSA9IG9wdGlvbnM7XG4gICAgY29uc3QgdHVyblJlc3VsdCA9IGF3YWl0IHJlc29sdmVJbnRlcnJ1cHRlZFR1cm4oc3RhdGUuX2N1cnJlbnRBZ2VudCwgc3RhdGUuX29yaWdpbmFsSW5wdXQsIHN0YXRlLl9nZW5lcmF0ZWRJdGVtcywgc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UsIHN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UsIHJ1bm5lciwgc3RhdGUpO1xuICAgIGFwcGx5VHVyblJlc3VsdCh7XG4gICAgICAgIHN0YXRlLFxuICAgICAgICB0dXJuUmVzdWx0LFxuICAgICAgICBhZ2VudDogc3RhdGUuX2N1cnJlbnRBZ2VudCxcbiAgICAgICAgdG9vbHNVc2VkOiBzdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlPy50b29sc1VzZWQgPz8gW10sXG4gICAgICAgIHJlc2V0VHVyblBlcnNpc3RlbmNlOiBmYWxzZSxcbiAgICAgICAgb25TdGVwSXRlbXMsXG4gICAgfSk7XG4gICAgLy8gTWFwIG5leHQtc3RlcCBvdXRjb21lcyB0byBpbnRlcnJ1cHRpb24gZmxvdyBjb250cm9sIGZvciB0aGUgb3V0ZXIgcnVuIGxvb3AuXG4gICAgLy8gcmV0dXJuX2ludGVycnVwdGlvbjogc3RpbGwgd2FpdGluZyBvbiBhcHByb3ZhbHMuIHJlcnVuX3R1cm46IHNhbWUgdHVybiByZXJ1biB3aXRob3V0IGluY3JlbWVudC5cbiAgICAvLyBhZHZhbmNlX3N0ZXA6IHByb2NlZWQgd2l0aG91dCByZXJ1bm5pbmcgdGhlIHNhbWUgdHVybi5cbiAgICBpZiAodHVyblJlc3VsdC5uZXh0U3RlcC50eXBlID09PSAnbmV4dF9zdGVwX2ludGVycnVwdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIHsgbmV4dFN0ZXA6IHR1cm5SZXN1bHQubmV4dFN0ZXAsIGFjdGlvbjogJ3JldHVybl9pbnRlcnJ1cHRpb24nIH07XG4gICAgfVxuICAgIGlmICh0dXJuUmVzdWx0Lm5leHRTdGVwLnR5cGUgPT09ICduZXh0X3N0ZXBfcnVuX2FnYWluJykge1xuICAgICAgICByZXR1cm4geyBuZXh0U3RlcDogdHVyblJlc3VsdC5uZXh0U3RlcCwgYWN0aW9uOiAncmVydW5fdHVybicgfTtcbiAgICB9XG4gICAgcmV0dXJuIHsgbmV4dFN0ZXA6IHR1cm5SZXN1bHQubmV4dFN0ZXAsIGFjdGlvbjogJ2FkdmFuY2Vfc3RlcCcgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVJbnRlcnJ1cHRlZE91dGNvbWUob3B0aW9ucykge1xuICAgIGNvbnN0IHsgc3RhdGUsIG91dGNvbWUsIHNldENvbnRpbnVpbmdJbnRlcnJ1cHRlZFR1cm4gfSA9IG9wdGlvbnM7XG4gICAgc3dpdGNoIChvdXRjb21lLmFjdGlvbikge1xuICAgICAgICBjYXNlICdyZXR1cm5faW50ZXJydXB0aW9uJzpcbiAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50U3RlcCA9IG91dGNvbWUubmV4dFN0ZXA7XG4gICAgICAgICAgICByZXR1cm4geyBzaG91bGRSZXR1cm46IHRydWUsIHNob3VsZENvbnRpbnVlOiBmYWxzZSB9O1xuICAgICAgICBjYXNlICdyZXJ1bl90dXJuJzpcbiAgICAgICAgICAgIC8vIENsZWFyIHRoZSBzdGVwIHNvIHRoZSBvdXRlciBsb29wIHRyZWF0cyB0aGlzIGFzIGEgbmV3IHJ1bi1hZ2FpbiB3aXRob3V0IGluY3JlbWVudGluZyB0aGUgdHVybi5cbiAgICAgICAgICAgIHNldENvbnRpbnVpbmdJbnRlcnJ1cHRlZFR1cm4odHJ1ZSk7XG4gICAgICAgICAgICBzdGF0ZS5fY3VycmVudFN0ZXAgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICByZXR1cm4geyBzaG91bGRSZXR1cm46IGZhbHNlLCBzaG91bGRDb250aW51ZTogdHJ1ZSB9O1xuICAgICAgICBjYXNlICdhZHZhbmNlX3N0ZXAnOlxuICAgICAgICAgICAgc2V0Q29udGludWluZ0ludGVycnVwdGVkVHVybihmYWxzZSk7XG4gICAgICAgICAgICBzdGF0ZS5fY3VycmVudFN0ZXAgPSBvdXRjb21lLm5leHRTdGVwO1xuICAgICAgICAgICAgcmV0dXJuIHsgc2hvdWxkUmV0dXJuOiBmYWxzZSwgc2hvdWxkQ29udGludWU6IGZhbHNlIH07XG4gICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgIGNvbnN0IF9leGhhdXN0aXZlID0gb3V0Y29tZS5hY3Rpb247XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuaGFuZGxlZCBpbnRlcnJ1cHRpb24gb3V0Y29tZTogJHtfZXhoYXVzdGl2ZX1gKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJ1bkxvb3AubWpzLm1hcCIsImltcG9ydCB7IEFnZW50IH0gZnJvbSBcIi4vYWdlbnQubWpzXCI7XG5pbXBvcnQgeyBSdW5BZ2VudFVwZGF0ZWRTdHJlYW1FdmVudCwgUnVuUmF3TW9kZWxTdHJlYW1FdmVudCB9IGZyb20gXCIuL2V2ZW50cy5tanNcIjtcbmltcG9ydCB7IE1vZGVsQmVoYXZpb3JFcnJvciwgVXNlckVycm9yIH0gZnJvbSBcIi4vZXJyb3JzLm1qc1wiO1xuaW1wb3J0IHsgZGVmaW5lSW5wdXRHdWFyZHJhaWwsIGRlZmluZU91dHB1dEd1YXJkcmFpbCwgfSBmcm9tIFwiLi9ndWFyZHJhaWwubWpzXCI7XG5pbXBvcnQgeyBSdW5Ib29rcyB9IGZyb20gXCIuL2xpZmVjeWNsZS5tanNcIjtcbmltcG9ydCBsb2dnZXIgZnJvbSBcIi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IHsgZ2V0RGVmYXVsdE1vZGVsUHJvdmlkZXIgfSBmcm9tIFwiLi9wcm92aWRlcnMubWpzXCI7XG5pbXBvcnQgeyBSdW5Db250ZXh0IH0gZnJvbSBcIi4vcnVuQ29udGV4dC5tanNcIjtcbmltcG9ydCB7IFJ1blJlc3VsdCwgU3RyZWFtZWRSdW5SZXN1bHQgfSBmcm9tIFwiLi9yZXN1bHQubWpzXCI7XG5pbXBvcnQgeyBSdW5TdGF0ZSB9IGZyb20gXCIuL3J1blN0YXRlLm1qc1wiO1xuaW1wb3J0IHsgZGlzcG9zZVJlc29sdmVkQ29tcHV0ZXJzIH0gZnJvbSBcIi4vdG9vbC5tanNcIjtcbmltcG9ydCB7IGdldE9yQ3JlYXRlVHJhY2UsIHJlc2V0Q3VycmVudFNwYW4sIHNldEN1cnJlbnRTcGFuLCB3aXRoTmV3U3BhbkNvbnRleHQsIHdpdGhUcmFjZSwgfSBmcm9tIFwiLi90cmFjaW5nL2NvbnRleHQubWpzXCI7XG5pbXBvcnQgeyBVc2FnZSB9IGZyb20gXCIuL3VzYWdlLm1qc1wiO1xuaW1wb3J0IHsgY29udmVydEFnZW50T3V0cHV0VHlwZVRvU2VyaWFsaXphYmxlIH0gZnJvbSBcIi4vdXRpbHMvdG9vbHMubWpzXCI7XG5pbXBvcnQgeyBERUZBVUxUX01BWF9UVVJOUyB9IGZyb20gXCIuL3J1bm5lci9jb25zdGFudHMubWpzXCI7XG5pbXBvcnQgeyBTdHJlYW1FdmVudFJlc3BvbnNlQ29tcGxldGVkIH0gZnJvbSBcIi4vdHlwZXMvcHJvdG9jb2wubWpzXCI7XG5pbXBvcnQgeyBTZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyLCBhcHBseUNhbGxNb2RlbElucHV0RmlsdGVyLCB9IGZyb20gXCIuL3J1bm5lci9jb252ZXJzYXRpb24ubWpzXCI7XG5pbXBvcnQgeyBjcmVhdGVHdWFyZHJhaWxUcmFja2VyLCBydW5PdXRwdXRHdWFyZHJhaWxzLCB9IGZyb20gXCIuL3J1bm5lci9ndWFyZHJhaWxzLm1qc1wiO1xuaW1wb3J0IHsgYWRqdXN0TW9kZWxTZXR0aW5nc0Zvck5vbkdQVDVSdW5uZXJNb2RlbCwgbWF5YmVSZXNldFRvb2xDaG9pY2UsIHNlbGVjdE1vZGVsLCB9IGZyb20gXCIuL3J1bm5lci9tb2RlbFNldHRpbmdzLm1qc1wiO1xuaW1wb3J0IHsgcHJvY2Vzc01vZGVsUmVzcG9uc2UgfSBmcm9tIFwiLi9ydW5uZXIvbW9kZWxPdXRwdXRzLm1qc1wiO1xuaW1wb3J0IHsgYWRkU3RlcFRvUnVuUmVzdWx0LCBzdHJlYW1TdGVwSXRlbXNUb1J1blJlc3VsdCwgaXNBYm9ydEVycm9yLCB9IGZyb20gXCIuL3J1bm5lci9zdHJlYW1pbmcubWpzXCI7XG5pbXBvcnQgeyBjcmVhdGVTZXNzaW9uUGVyc2lzdGVuY2VUcmFja2VyLCBwcmVwYXJlSW5wdXRJdGVtc1dpdGhTZXNzaW9uLCBzYXZlU3RyZWFtSW5wdXRUb1Nlc3Npb24sIHNhdmVTdHJlYW1SZXN1bHRUb1Nlc3Npb24sIHNhdmVUb1Nlc3Npb24sIH0gZnJvbSBcIi4vcnVubmVyL3Nlc3Npb25QZXJzaXN0ZW5jZS5tanNcIjtcbmltcG9ydCB7IHJlc29sdmVUdXJuQWZ0ZXJNb2RlbFJlc3BvbnNlIH0gZnJvbSBcIi4vcnVubmVyL3R1cm5SZXNvbHV0aW9uLm1qc1wiO1xuaW1wb3J0IHsgcHJlcGFyZVR1cm4gfSBmcm9tIFwiLi9ydW5uZXIvdHVyblByZXBhcmF0aW9uLm1qc1wiO1xuaW1wb3J0IHsgYXBwbHlUdXJuUmVzdWx0LCBoYW5kbGVJbnRlcnJ1cHRlZE91dGNvbWUsIHJlc3VtZUludGVycnVwdGVkVHVybiwgfSBmcm9tIFwiLi9ydW5uZXIvcnVuTG9vcC5tanNcIjtcbmltcG9ydCB7IGdldFRyYWNpbmcgfSBmcm9tIFwiLi9ydW5uZXIvdHJhY2luZy5tanNcIjtcbmV4cG9ydCB7IGdldFRyYWNpbmcgfSBmcm9tIFwiLi9ydW5uZXIvdHJhY2luZy5tanNcIjtcbmV4cG9ydCB7IHNlbGVjdE1vZGVsIH0gZnJvbSBcIi4vcnVubmVyL21vZGVsU2V0dGluZ3MubWpzXCI7XG5leHBvcnQgeyBnZXRUdXJuSW5wdXQgfSBmcm9tIFwiLi9ydW5uZXIvaXRlbXMubWpzXCI7XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcnVuKGFnZW50LCBpbnB1dCwgb3B0aW9ucykge1xuICAgIGNvbnN0IHJ1bm5lciA9IGdldERlZmF1bHRSdW5uZXIoKTtcbiAgICBpZiAob3B0aW9ucz8uc3RyZWFtKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBydW5uZXIucnVuKGFnZW50LCBpbnB1dCwgb3B0aW9ucyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gYXdhaXQgcnVubmVyLnJ1bihhZ2VudCwgaW5wdXQsIG9wdGlvbnMpO1xuICAgIH1cbn1cbi8qKlxuICogT3JjaGVzdHJhdGVzIGFnZW50IGV4ZWN1dGlvbiwgaW5jbHVkaW5nIGd1YXJkcmFpbHMsIHRvb2wgY2FsbHMsIHNlc3Npb24gcGVyc2lzdGVuY2UsIGFuZFxuICogdHJhY2luZy4gUmV1c2UgYSBgUnVubmVyYCBpbnN0YW5jZSB3aGVuIHlvdSB3YW50IGNvbnNpc3RlbnQgY29uZmlndXJhdGlvbiBhY3Jvc3MgbXVsdGlwbGUgcnVucy5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bm5lciBleHRlbmRzIFJ1bkhvb2tzIHtcbiAgICBjb25maWc7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHJ1bm5lciB3aXRoIG9wdGlvbmFsIGRlZmF1bHRzIHRoYXQgYXBwbHkgdG8gZXZlcnkgc3Vic2VxdWVudCBydW4gaW52b2NhdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb25maWcgLSBPdmVycmlkZXMgZm9yIG1vZGVscywgZ3VhcmRyYWlscywgdHJhY2luZywgb3Igc2Vzc2lvbiBiZWhhdmlvci5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihjb25maWcgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmNvbmZpZyA9IHtcbiAgICAgICAgICAgIG1vZGVsUHJvdmlkZXI6IGNvbmZpZy5tb2RlbFByb3ZpZGVyID8/IGdldERlZmF1bHRNb2RlbFByb3ZpZGVyKCksXG4gICAgICAgICAgICBtb2RlbDogY29uZmlnLm1vZGVsLFxuICAgICAgICAgICAgbW9kZWxTZXR0aW5nczogY29uZmlnLm1vZGVsU2V0dGluZ3MsXG4gICAgICAgICAgICBoYW5kb2ZmSW5wdXRGaWx0ZXI6IGNvbmZpZy5oYW5kb2ZmSW5wdXRGaWx0ZXIsXG4gICAgICAgICAgICBpbnB1dEd1YXJkcmFpbHM6IGNvbmZpZy5pbnB1dEd1YXJkcmFpbHMsXG4gICAgICAgICAgICBvdXRwdXRHdWFyZHJhaWxzOiBjb25maWcub3V0cHV0R3VhcmRyYWlscyxcbiAgICAgICAgICAgIHRyYWNpbmdEaXNhYmxlZDogY29uZmlnLnRyYWNpbmdEaXNhYmxlZCA/PyBmYWxzZSxcbiAgICAgICAgICAgIHRyYWNlSW5jbHVkZVNlbnNpdGl2ZURhdGE6IGNvbmZpZy50cmFjZUluY2x1ZGVTZW5zaXRpdmVEYXRhID8/IHRydWUsXG4gICAgICAgICAgICB3b3JrZmxvd05hbWU6IGNvbmZpZy53b3JrZmxvd05hbWUgPz8gJ0FnZW50IHdvcmtmbG93JyxcbiAgICAgICAgICAgIHRyYWNlSWQ6IGNvbmZpZy50cmFjZUlkLFxuICAgICAgICAgICAgZ3JvdXBJZDogY29uZmlnLmdyb3VwSWQsXG4gICAgICAgICAgICB0cmFjZU1ldGFkYXRhOiBjb25maWcudHJhY2VNZXRhZGF0YSxcbiAgICAgICAgICAgIHRyYWNpbmc6IGNvbmZpZy50cmFjaW5nLFxuICAgICAgICAgICAgc2Vzc2lvbklucHV0Q2FsbGJhY2s6IGNvbmZpZy5zZXNzaW9uSW5wdXRDYWxsYmFjayxcbiAgICAgICAgICAgIGNhbGxNb2RlbElucHV0RmlsdGVyOiBjb25maWcuY2FsbE1vZGVsSW5wdXRGaWx0ZXIsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaW5wdXRHdWFyZHJhaWxEZWZzID0gKGNvbmZpZy5pbnB1dEd1YXJkcmFpbHMgPz8gW10pLm1hcChkZWZpbmVJbnB1dEd1YXJkcmFpbCk7XG4gICAgICAgIHRoaXMub3V0cHV0R3VhcmRyYWlsRGVmcyA9IChjb25maWcub3V0cHV0R3VhcmRyYWlscyA/PyBbXSkubWFwKGRlZmluZU91dHB1dEd1YXJkcmFpbCk7XG4gICAgfVxuICAgIGFzeW5jIHJ1bihhZ2VudCwgaW5wdXQsIG9wdGlvbnMgPSB7XG4gICAgICAgIHN0cmVhbTogZmFsc2UsXG4gICAgICAgIGNvbnRleHQ6IHVuZGVmaW5lZCxcbiAgICB9KSB7XG4gICAgICAgIGNvbnN0IHJlc29sdmVkT3B0aW9ucyA9IG9wdGlvbnMgPz8geyBzdHJlYW06IGZhbHNlLCBjb250ZXh0OiB1bmRlZmluZWQgfTtcbiAgICAgICAgLy8gUGVyLXJ1biBvcHRpb25zIHRha2UgcHJlY2VkZW5jZSBvdmVyIHJ1bm5lciBkZWZhdWx0cyBmb3Igc2Vzc2lvbiBtZW1vcnkgYmVoYXZpb3IuXG4gICAgICAgIGNvbnN0IHNlc3Npb25JbnB1dENhbGxiYWNrID0gcmVzb2x2ZWRPcHRpb25zLnNlc3Npb25JbnB1dENhbGxiYWNrID8/IHRoaXMuY29uZmlnLnNlc3Npb25JbnB1dENhbGxiYWNrO1xuICAgICAgICAvLyBMaWtld2lzZSBhbGxvdyBjYWxsZXJzIHRvIG92ZXJyaWRlIGNhbGxNb2RlbElucHV0RmlsdGVyIG9uIGluZGl2aWR1YWwgcnVucy5cbiAgICAgICAgY29uc3QgY2FsbE1vZGVsSW5wdXRGaWx0ZXIgPSByZXNvbHZlZE9wdGlvbnMuY2FsbE1vZGVsSW5wdXRGaWx0ZXIgPz8gdGhpcy5jb25maWcuY2FsbE1vZGVsSW5wdXRGaWx0ZXI7XG4gICAgICAgIGNvbnN0IGhhc0NhbGxNb2RlbElucHV0RmlsdGVyID0gQm9vbGVhbihjYWxsTW9kZWxJbnB1dEZpbHRlcik7XG4gICAgICAgIGNvbnN0IHRyYWNpbmdDb25maWcgPSByZXNvbHZlZE9wdGlvbnMudHJhY2luZyA/PyB0aGlzLmNvbmZpZy50cmFjaW5nO1xuICAgICAgICBjb25zdCBlZmZlY3RpdmVPcHRpb25zID0ge1xuICAgICAgICAgICAgLi4ucmVzb2x2ZWRPcHRpb25zLFxuICAgICAgICAgICAgc2Vzc2lvbklucHV0Q2FsbGJhY2ssXG4gICAgICAgICAgICBjYWxsTW9kZWxJbnB1dEZpbHRlcixcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgcmVzdW1pbmdGcm9tU3RhdGUgPSBpbnB1dCBpbnN0YW5jZW9mIFJ1blN0YXRlO1xuICAgICAgICBjb25zdCBwcmVzZXJ2ZVR1cm5QZXJzaXN0ZW5jZU9uUmVzdW1lID0gcmVzdW1pbmdGcm9tU3RhdGUgJiZcbiAgICAgICAgICAgIGlucHV0Ll9jdXJyZW50VHVybkluUHJvZ3Jlc3MgPT09IHRydWU7XG4gICAgICAgIGNvbnN0IHJlc3VtZWRDb252ZXJzYXRpb25JZCA9IHJlc3VtaW5nRnJvbVN0YXRlXG4gICAgICAgICAgICA/IGlucHV0Ll9jb252ZXJzYXRpb25JZFxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIGNvbnN0IHJlc3VtZWRQcmV2aW91c1Jlc3BvbnNlSWQgPSByZXN1bWluZ0Zyb21TdGF0ZVxuICAgICAgICAgICAgPyBpbnB1dC5fcHJldmlvdXNSZXNwb25zZUlkXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgY29uc3Qgc2VydmVyTWFuYWdlc0NvbnZlcnNhdGlvbiA9IEJvb2xlYW4oZWZmZWN0aXZlT3B0aW9ucy5jb252ZXJzYXRpb25JZCA/PyByZXN1bWVkQ29udmVyc2F0aW9uSWQpIHx8XG4gICAgICAgICAgICBCb29sZWFuKGVmZmVjdGl2ZU9wdGlvbnMucHJldmlvdXNSZXNwb25zZUlkID8/IHJlc3VtZWRQcmV2aW91c1Jlc3BvbnNlSWQpO1xuICAgICAgICAvLyBXaGVuIHRoZSBzZXJ2ZXIgdHJhY2tzIGNvbnZlcnNhdGlvbiBoaXN0b3J5IHdlIGRlZmVyIHRvIGl0IGZvciBwcmV2aW91cyB0dXJucyBzbyBsb2NhbCBzZXNzaW9uXG4gICAgICAgIC8vIHBlcnNpc3RlbmNlIGNhbiBmb2N1cyBzb2xlbHkgb24gdGhlIG5ldyBkZWx0YSBiZWluZyBnZW5lcmF0ZWQgaW4gdGhpcyBwcm9jZXNzLlxuICAgICAgICBjb25zdCBzZXNzaW9uID0gZWZmZWN0aXZlT3B0aW9ucy5zZXNzaW9uO1xuICAgICAgICBjb25zdCBzZXNzaW9uUGVyc2lzdGVuY2UgPSBjcmVhdGVTZXNzaW9uUGVyc2lzdGVuY2VUcmFja2VyKHtcbiAgICAgICAgICAgIHNlc3Npb24sXG4gICAgICAgICAgICBoYXNDYWxsTW9kZWxJbnB1dEZpbHRlcixcbiAgICAgICAgICAgIHBlcnNpc3RJbnB1dDogc2F2ZVN0cmVhbUlucHV0VG9TZXNzaW9uLFxuICAgICAgICAgICAgcmVzdW1pbmdGcm9tU3RhdGUsXG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgcHJlcGFyZWRJbnB1dCA9IGlucHV0O1xuICAgICAgICBpZiAoIShwcmVwYXJlZElucHV0IGluc3RhbmNlb2YgUnVuU3RhdGUpKSB7XG4gICAgICAgICAgICBjb25zdCBwcmVwYXJlZCA9IGF3YWl0IHByZXBhcmVJbnB1dEl0ZW1zV2l0aFNlc3Npb24ocHJlcGFyZWRJbnB1dCwgc2Vzc2lvbiwgc2Vzc2lvbklucHV0Q2FsbGJhY2ssIHtcbiAgICAgICAgICAgICAgICAvLyBXaGVuIHRoZSBzZXJ2ZXIgdHJhY2tzIGNvbnZlcnNhdGlvbiBzdGF0ZSB3ZSBvbmx5IHNlbmQgdGhlIG5ldyB0dXJuIGlucHV0cztcbiAgICAgICAgICAgICAgICAvLyBwcmV2aW91cyBtZXNzYWdlcyBhcmUgcmVjb3ZlcmVkIHZpYSBjb252ZXJzYXRpb25JZC9wcmV2aW91c1Jlc3BvbnNlSWQuXG4gICAgICAgICAgICAgICAgaW5jbHVkZUhpc3RvcnlJblByZXBhcmVkSW5wdXQ6ICFzZXJ2ZXJNYW5hZ2VzQ29udmVyc2F0aW9uLFxuICAgICAgICAgICAgICAgIHByZXNlcnZlRHJvcHBlZE5ld0l0ZW1zOiBzZXJ2ZXJNYW5hZ2VzQ29udmVyc2F0aW9uLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoc2VydmVyTWFuYWdlc0NvbnZlcnNhdGlvbiAmJiBzZXNzaW9uKSB7XG4gICAgICAgICAgICAgICAgLy8gV2hlbiB0aGUgc2VydmVyIG1hbmFnZXMgbWVtb3J5IHdlIG9ubHkgcGVyc2lzdCB0aGUgbmV3IHR1cm4gaW5wdXRzIGxvY2FsbHkgc28gdGhlXG4gICAgICAgICAgICAgICAgLy8gY29udmVyc2F0aW9uIHNlcnZpY2Ugc3RheXMgdGhlIHNpbmdsZSBzb3VyY2Ugb2YgdHJ1dGggZm9yIHByaW9yIGV4Y2hhbmdlcy5cbiAgICAgICAgICAgICAgICBjb25zdCBzZXNzaW9uSXRlbXMgPSBwcmVwYXJlZC5zZXNzaW9uSXRlbXM7XG4gICAgICAgICAgICAgICAgaWYgKHNlc3Npb25JdGVtcyAmJiBzZXNzaW9uSXRlbXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBwcmVwYXJlZElucHV0ID0gc2Vzc2lvbkl0ZW1zO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcHJlcGFyZWRJbnB1dCA9IHByZXBhcmVkLnByZXBhcmVkSW5wdXQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcHJlcGFyZWRJbnB1dCA9IHByZXBhcmVkLnByZXBhcmVkSW5wdXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZXNzaW9uUGVyc2lzdGVuY2U/LnNldFByZXBhcmVkSXRlbXMocHJlcGFyZWQuc2Vzc2lvbkl0ZW1zKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBTdHJlYW1pbmcgcnVucyBwZXJzaXN0IHRoZSBpbnB1dCBhc3luY2hyb25vdXNseSwgc28gdHJhY2sgYSBvbmUtc2hvdCBoZWxwZXJcbiAgICAgICAgLy8gdGhhdCBjYW4gYmUgYXdhaXRlZCBmcm9tIG11bHRpcGxlIGJyYW5jaGVzIHdpdGhvdXQgZG91YmxlLXdyaXRpbmcuXG4gICAgICAgIGNvbnN0IGVuc3VyZVN0cmVhbUlucHV0UGVyc2lzdGVkID0gc2Vzc2lvblBlcnNpc3RlbmNlPy5idWlsZFBlcnNpc3RJbnB1dE9uY2Uoc2VydmVyTWFuYWdlc0NvbnZlcnNhdGlvbik7XG4gICAgICAgIGNvbnN0IGV4ZWN1dGVSdW4gPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoZWZmZWN0aXZlT3B0aW9ucy5zdHJlYW0pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdHJlYW1SZXN1bHQgPSBhd2FpdCB0aGlzLiNydW5JbmRpdmlkdWFsU3RyZWFtKGFnZW50LCBwcmVwYXJlZElucHV0LCBlZmZlY3RpdmVPcHRpb25zLCBlbnN1cmVTdHJlYW1JbnB1dFBlcnNpc3RlZCwgc2Vzc2lvblBlcnNpc3RlbmNlPy5yZWNvcmRUdXJuSXRlbXMsIHByZXNlcnZlVHVyblBlcnNpc3RlbmNlT25SZXN1bWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBzdHJlYW1SZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBydW5SZXN1bHQgPSBhd2FpdCB0aGlzLiNydW5JbmRpdmlkdWFsTm9uU3RyZWFtKGFnZW50LCBwcmVwYXJlZElucHV0LCBlZmZlY3RpdmVPcHRpb25zLCBzZXNzaW9uUGVyc2lzdGVuY2U/LnJlY29yZFR1cm5JdGVtcywgcHJlc2VydmVUdXJuUGVyc2lzdGVuY2VPblJlc3VtZSk7XG4gICAgICAgICAgICAvLyBTZWUgbm90ZSBhYm92ZTogYWxsb3cgc2Vzc2lvbnMgdG8gcnVuIGZvciBjYWxsYmFja3Mvc3RhdGUgYnV0IHNraXAgd3JpdGVzIHdoZW4gdGhlIHNlcnZlclxuICAgICAgICAgICAgLy8gaXMgdGhlIHNvdXJjZSBvZiB0cnV0aCBmb3IgdHJhbnNjcmlwdCBoaXN0b3J5LlxuICAgICAgICAgICAgaWYgKHNlc3Npb25QZXJzaXN0ZW5jZSAmJiAhc2VydmVyTWFuYWdlc0NvbnZlcnNhdGlvbikge1xuICAgICAgICAgICAgICAgIGF3YWl0IHNhdmVUb1Nlc3Npb24oc2Vzc2lvbiwgc2Vzc2lvblBlcnNpc3RlbmNlLmdldEl0ZW1zRm9yUGVyc2lzdGVuY2UoKSwgcnVuUmVzdWx0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBydW5SZXN1bHQ7XG4gICAgICAgIH07XG4gICAgICAgIGlmIChwcmVwYXJlZElucHV0IGluc3RhbmNlb2YgUnVuU3RhdGUgJiYgcHJlcGFyZWRJbnB1dC5fdHJhY2UpIHtcbiAgICAgICAgICAgIHJldHVybiB3aXRoVHJhY2UocHJlcGFyZWRJbnB1dC5fdHJhY2UsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocHJlcGFyZWRJbnB1dC5fY3VycmVudEFnZW50U3Bhbikge1xuICAgICAgICAgICAgICAgICAgICBzZXRDdXJyZW50U3BhbihwcmVwYXJlZElucHV0Ll9jdXJyZW50QWdlbnRTcGFuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGV4ZWN1dGVSdW4oKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBnZXRPckNyZWF0ZVRyYWNlKGFzeW5jICgpID0+IGV4ZWN1dGVSdW4oKSwge1xuICAgICAgICAgICAgdHJhY2VJZDogdGhpcy5jb25maWcudHJhY2VJZCxcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuY29uZmlnLndvcmtmbG93TmFtZSxcbiAgICAgICAgICAgIGdyb3VwSWQ6IHRoaXMuY29uZmlnLmdyb3VwSWQsXG4gICAgICAgICAgICBtZXRhZGF0YTogdGhpcy5jb25maWcudHJhY2VNZXRhZGF0YSxcbiAgICAgICAgICAgIC8vIFBlci1ydW4gdHJhY2luZyBjb25maWcgb3ZlcnJpZGVzIGV4cG9ydGVyIGRlZmF1bHRzIHN1Y2ggYXMgZW52aXJvbm1lbnQgQVBJIGtleS5cbiAgICAgICAgICAgIHRyYWNpbmdBcGlLZXk6IHRyYWNpbmdDb25maWc/LmFwaUtleSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy8gIEludGVybmFsc1xuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgaW5wdXRHdWFyZHJhaWxEZWZzO1xuICAgIG91dHB1dEd1YXJkcmFpbERlZnM7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICogUmVzb2x2ZXMgdGhlIGVmZmVjdGl2ZSBtb2RlbCBvbmNlIHNvIGJvdGggcnVuIGxvb3BzIG9iZXkgdGhlIHNhbWUgcHJlY2VkZW5jZSBydWxlcy5cbiAgICAgKi9cbiAgICBhc3luYyAjcmVzb2x2ZU1vZGVsRm9yQWdlbnQoYWdlbnQpIHtcbiAgICAgICAgY29uc3QgZXhwbGljdGx5TW9kZWxTZXQgPSAoYWdlbnQubW9kZWwgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgYWdlbnQubW9kZWwgIT09IEFnZW50LkRFRkFVTFRfTU9ERUxfUExBQ0VIT0xERVIpIHx8XG4gICAgICAgICAgICAodGhpcy5jb25maWcubW9kZWwgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLm1vZGVsICE9PSBBZ2VudC5ERUZBVUxUX01PREVMX1BMQUNFSE9MREVSKTtcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRNb2RlbCA9IHNlbGVjdE1vZGVsKGFnZW50Lm1vZGVsLCB0aGlzLmNvbmZpZy5tb2RlbCk7XG4gICAgICAgIGNvbnN0IHJlc29sdmVkTW9kZWxOYW1lID0gdHlwZW9mIHNlbGVjdGVkTW9kZWwgPT09ICdzdHJpbmcnID8gc2VsZWN0ZWRNb2RlbCA6IHVuZGVmaW5lZDtcbiAgICAgICAgY29uc3QgcmVzb2x2ZWRNb2RlbCA9IHR5cGVvZiBzZWxlY3RlZE1vZGVsID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgPyBhd2FpdCB0aGlzLmNvbmZpZy5tb2RlbFByb3ZpZGVyLmdldE1vZGVsKHNlbGVjdGVkTW9kZWwpXG4gICAgICAgICAgICA6IHNlbGVjdGVkTW9kZWw7XG4gICAgICAgIHJldHVybiB7IG1vZGVsOiByZXNvbHZlZE1vZGVsLCBleHBsaWN0bHlNb2RlbFNldCwgcmVzb2x2ZWRNb2RlbE5hbWUgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgYXN5bmMgI3J1bkluZGl2aWR1YWxOb25TdHJlYW0oc3RhcnRpbmdBZ2VudCwgaW5wdXQsIG9wdGlvbnMsIFxuICAgIC8vIHNlc3Npb25JbnB1dFVwZGF0ZSBsZXRzIHRoZSBjYWxsZXIgYWRqdXN0IHF1ZXVlZCBzZXNzaW9uIGl0ZW1zIGFmdGVyIGZpbHRlcnMgcnVuIHNvIHdlXG4gICAgLy8gcGVyc2lzdCBleGFjdGx5IHdoYXQgd2Ugc2VuZCB0byB0aGUgbW9kZWwgKGUuZy4sIGFmdGVyIHJlZGFjdGlvbnMgb3IgdHJ1bmNhdGlvbikuXG4gICAgc2Vzc2lvbklucHV0VXBkYXRlLCBwcmVzZXJ2ZVR1cm5QZXJzaXN0ZW5jZU9uUmVzdW1lKSB7XG4gICAgICAgIHJldHVybiB3aXRoTmV3U3BhbkNvbnRleHQoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgLy8gaWYgd2UgaGF2ZSBhIHNhdmVkIHN0YXRlIHdlIHVzZSB0aGF0IG9uZSwgb3RoZXJ3aXNlIHdlIGNyZWF0ZSBhIG5ldyBvbmVcbiAgICAgICAgICAgIGNvbnN0IGlzUmVzdW1lZFN0YXRlID0gaW5wdXQgaW5zdGFuY2VvZiBSdW5TdGF0ZTtcbiAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gaXNSZXN1bWVkU3RhdGVcbiAgICAgICAgICAgICAgICA/IGlucHV0XG4gICAgICAgICAgICAgICAgOiBuZXcgUnVuU3RhdGUob3B0aW9ucy5jb250ZXh0IGluc3RhbmNlb2YgUnVuQ29udGV4dFxuICAgICAgICAgICAgICAgICAgICA/IG9wdGlvbnMuY29udGV4dFxuICAgICAgICAgICAgICAgICAgICA6IG5ldyBSdW5Db250ZXh0KG9wdGlvbnMuY29udGV4dCksIGlucHV0LCBzdGFydGluZ0FnZW50LCBvcHRpb25zLm1heFR1cm5zID8/IERFRkFVTFRfTUFYX1RVUk5TKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc29sdmVkQ29udmVyc2F0aW9uSWQgPSBvcHRpb25zLmNvbnZlcnNhdGlvbklkID8/XG4gICAgICAgICAgICAgICAgKGlzUmVzdW1lZFN0YXRlID8gc3RhdGUuX2NvbnZlcnNhdGlvbklkIDogdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc29sdmVkUHJldmlvdXNSZXNwb25zZUlkID0gb3B0aW9ucy5wcmV2aW91c1Jlc3BvbnNlSWQgPz9cbiAgICAgICAgICAgICAgICAoaXNSZXN1bWVkU3RhdGUgPyBzdGF0ZS5fcHJldmlvdXNSZXNwb25zZUlkIDogdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIGlmICghaXNSZXN1bWVkU3RhdGUpIHtcbiAgICAgICAgICAgICAgICBzdGF0ZS5zZXRDb252ZXJzYXRpb25Db250ZXh0KHJlc29sdmVkQ29udmVyc2F0aW9uSWQsIHJlc29sdmVkUHJldmlvdXNSZXNwb25zZUlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXIgPSByZXNvbHZlZENvbnZlcnNhdGlvbklkIHx8IHJlc29sdmVkUHJldmlvdXNSZXNwb25zZUlkXG4gICAgICAgICAgICAgICAgPyBuZXcgU2VydmVyQ29udmVyc2F0aW9uVHJhY2tlcih7XG4gICAgICAgICAgICAgICAgICAgIGNvbnZlcnNhdGlvbklkOiByZXNvbHZlZENvbnZlcnNhdGlvbklkLFxuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1Jlc3BvbnNlSWQ6IHJlc29sdmVkUHJldmlvdXNSZXNwb25zZUlkLFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICBpZiAoc2VydmVyQ29udmVyc2F0aW9uVHJhY2tlciAmJiBpc1Jlc3VtZWRTdGF0ZSkge1xuICAgICAgICAgICAgICAgIHNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXIucHJpbWVGcm9tU3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbElucHV0OiBzdGF0ZS5fb3JpZ2luYWxJbnB1dCxcbiAgICAgICAgICAgICAgICAgICAgZ2VuZXJhdGVkSXRlbXM6IHN0YXRlLl9nZW5lcmF0ZWRJdGVtcyxcbiAgICAgICAgICAgICAgICAgICAgbW9kZWxSZXNwb25zZXM6IHN0YXRlLl9tb2RlbFJlc3BvbnNlcyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBzdGF0ZS5zZXRDb252ZXJzYXRpb25Db250ZXh0KHNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXIuY29udmVyc2F0aW9uSWQsIHNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXIucHJldmlvdXNSZXNwb25zZUlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFRyYWNrcyB3aGVuIHdlIHJlc3VtZSBhbiBhcHByb3ZhbCBpbnRlcnJ1cHRpb24gc28gdGhlIG5leHQgcnVuLWFnYWluIHN0ZXAgc3RheXMgaW4gdGhlIHNhbWUgdHVybi5cbiAgICAgICAgICAgIGxldCBjb250aW51aW5nSW50ZXJydXB0ZWRUdXJuID0gZmFsc2U7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHdlIGRvbid0IGhhdmUgYSBjdXJyZW50IHN0ZXAsIHdlIHRyZWF0IHRoaXMgYXMgYSBuZXcgcnVuXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50U3RlcCA9IHN0YXRlLl9jdXJyZW50U3RlcCA/PyB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnbmV4dF9zdGVwX3J1bl9hZ2FpbicsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5fY3VycmVudFN0ZXAudHlwZSA9PT0gJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ0NvbnRpbnVpbmcgZnJvbSBpbnRlcnJ1cHRpb24nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UgfHwgIXN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdObyBtb2RlbCByZXNwb25zZSBmb3VuZCBpbiBwcmV2aW91cyBzdGF0ZScsIHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGludGVycnVwdGVkT3V0Y29tZSA9IGF3YWl0IHJlc3VtZUludGVycnVwdGVkVHVybih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVubmVyOiB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBEb24ndCByZXNldCBjb3VudGVyIGhlcmUgLSByZXNvbHZlSW50ZXJydXB0ZWRUdXJuIGFscmVhZHkgYWRqdXN0ZWQgaXQgdmlhIHJld2luZCBsb2dpY1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGNvdW50ZXIgd2lsbCBiZSByZXNldCB3aGVuIF9jdXJyZW50VHVybiBpcyBpbmNyZW1lbnRlZCAoc3RhcnRpbmcgYSBuZXcgdHVybilcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgc2hvdWxkUmV0dXJuLCBzaG91bGRDb250aW51ZSB9ID0gaGFuZGxlSW50ZXJydXB0ZWRPdXRjb21lKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRjb21lOiBpbnRlcnJ1cHRlZE91dGNvbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q29udGludWluZ0ludGVycnVwdGVkVHVybjogKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVpbmdJbnRlcnJ1cHRlZFR1cm4gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2hvdWxkUmV0dXJuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2UgYXJlIHN0aWxsIGluIGFuIGludGVycnVwdGlvbiwgc28gd2UgbmVlZCB0byBhdm9pZCBhbiBpbmZpbml0ZSBsb29wXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5SZXN1bHQoc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNob3VsZENvbnRpbnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLl9jdXJyZW50U3RlcC50eXBlID09PSAnbmV4dF9zdGVwX3J1bl9hZ2FpbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHdhc0NvbnRpbnVpbmdJbnRlcnJ1cHRlZFR1cm4gPSBjb250aW51aW5nSW50ZXJydXB0ZWRUdXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWluZ0ludGVycnVwdGVkVHVybiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZ3VhcmRyYWlsVHJhY2tlciA9IGNyZWF0ZUd1YXJkcmFpbFRyYWNrZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzVHVybiA9IHN0YXRlLl9jdXJyZW50VHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzUGVyc2lzdGVkQ291bnQgPSBzdGF0ZS5fY3VycmVudFR1cm5QZXJzaXN0ZWRJdGVtQ291bnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmV2aW91c0dlbmVyYXRlZENvdW50ID0gc3RhdGUuX2dlbmVyYXRlZEl0ZW1zLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgYXJ0aWZhY3RzLCB0dXJuSW5wdXQsIHBhcmFsbGVsR3VhcmRyYWlsUHJvbWlzZSB9ID0gYXdhaXQgcHJlcGFyZVR1cm4oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0OiBzdGF0ZS5fb3JpZ2luYWxJbnB1dCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW5lcmF0ZWRJdGVtczogc3RhdGUuX2dlbmVyYXRlZEl0ZW1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzUmVzdW1lZFN0YXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXNlcnZlVHVyblBlcnNpc3RlbmNlT25SZXN1bWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWluZ0ludGVycnVwdGVkVHVybjogd2FzQ29udGludWluZ0ludGVycnVwdGVkVHVybixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0R3VhcmRyYWlsRGVmczogdGhpcy5pbnB1dEd1YXJkcmFpbERlZnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3VhcmRyYWlsSGFuZGxlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25QYXJhbGxlbFN0YXJ0OiBndWFyZHJhaWxUcmFja2VyLm1hcmtQZW5kaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblBhcmFsbGVsRXJyb3I6IGd1YXJkcmFpbFRyYWNrZXIuc2V0RXJyb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbWl0QWdlbnRTdGFydDogKGNvbnRleHQsIGFnZW50LCBpbnB1dEl0ZW1zKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfc3RhcnQnLCBjb250ZXh0LCBhZ2VudCwgaW5wdXRJdGVtcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByZXNlcnZlVHVyblBlcnNpc3RlbmNlT25SZXN1bWUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudFR1cm4gPiBwcmV2aW91c1R1cm4gJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1BlcnNpc3RlZENvdW50IDw9IHByZXZpb3VzR2VuZXJhdGVkQ291bnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQcmVzZXJ2ZSBwZXJzaXN0ZWQgb2Zmc2V0cyBmcm9tIGEgcmVzdW1lZCBydW4gdG8gYXZvaWQgcmUtc2F2aW5nIHByaW9yIGl0ZW1zLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50VHVyblBlcnNpc3RlZEl0ZW1Db3VudCA9IHByZXZpb3VzUGVyc2lzdGVkQ291bnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBndWFyZHJhaWxUcmFja2VyLnNldFByb21pc2UocGFyYWxsZWxHdWFyZHJhaWxQcm9taXNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZXBhcmVkQ2FsbCA9IGF3YWl0IHRoaXMuI3ByZXBhcmVNb2RlbENhbGwoc3RhdGUsIG9wdGlvbnMsIGFydGlmYWN0cywgdHVybklucHV0LCBzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyLCBzZXNzaW9uSW5wdXRVcGRhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZ3VhcmRyYWlsVHJhY2tlci50aHJvd0lmRXJyb3IoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9sYXN0VHVyblJlc3BvbnNlID0gYXdhaXQgcHJlcGFyZWRDYWxsLm1vZGVsLmdldFJlc3BvbnNlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzeXN0ZW1JbnN0cnVjdGlvbnM6IHByZXBhcmVkQ2FsbC5tb2RlbElucHV0Lmluc3RydWN0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9tcHQ6IHByZXBhcmVkQ2FsbC5wcm9tcHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXhwbGljaXQgYWdlbnQvcnVuIGNvbmZpZyBtb2RlbHMgc2hvdWxkIHRha2UgcHJlY2VkZW5jZSBvdmVyIHByb21wdCBkZWZhdWx0cy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi4ocHJlcGFyZWRDYWxsLmV4cGxpY3RseU1vZGVsU2V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8geyBvdmVycmlkZVByb21wdE1vZGVsOiB0cnVlIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB7fSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IHByZXBhcmVkQ2FsbC5tb2RlbElucHV0LmlucHV0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzUmVzcG9uc2VJZDogcHJlcGFyZWRDYWxsLnByZXZpb3VzUmVzcG9uc2VJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb252ZXJzYXRpb25JZDogcHJlcGFyZWRDYWxsLmNvbnZlcnNhdGlvbklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsU2V0dGluZ3M6IHByZXBhcmVkQ2FsbC5tb2RlbFNldHRpbmdzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xzOiBwcmVwYXJlZENhbGwuc2VyaWFsaXplZFRvb2xzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xzRXhwbGljaXRseVByb3ZpZGVkOiBwcmVwYXJlZENhbGwudG9vbHNFeHBsaWNpdGx5UHJvdmlkZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0VHlwZTogY29udmVydEFnZW50T3V0cHV0VHlwZVRvU2VyaWFsaXphYmxlKHN0YXRlLl9jdXJyZW50QWdlbnQub3V0cHV0VHlwZSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZG9mZnM6IHByZXBhcmVkQ2FsbC5zZXJpYWxpemVkSGFuZG9mZnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2luZzogZ2V0VHJhY2luZyh0aGlzLmNvbmZpZy50cmFjaW5nRGlzYWJsZWQsIHRoaXMuY29uZmlnLnRyYWNlSW5jbHVkZVNlbnNpdGl2ZURhdGEpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hbDogb3B0aW9ucy5zaWduYWwsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VydmVyQ29udmVyc2F0aW9uVHJhY2tlci5tYXJrSW5wdXRBc1NlbnQocHJlcGFyZWRDYWxsLnNvdXJjZUl0ZW1zLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlckFwcGxpZWQ6IHByZXBhcmVkQ2FsbC5maWx0ZXJBcHBsaWVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxUdXJuSXRlbXM6IHByZXBhcmVkQ2FsbC50dXJuSW5wdXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fbW9kZWxSZXNwb25zZXMucHVzaChzdGF0ZS5fbGFzdFR1cm5SZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY29udGV4dC51c2FnZS5hZGQoc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UudXNhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX25vQWN0aXZlQWdlbnRSdW4gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFmdGVyIGVhY2ggdHVybiByZWNvcmQgdGhlIGl0ZW1zIGVjaG9lZCBieSB0aGUgc2VydmVyIHNvIGZ1dHVyZSByZXF1ZXN0cyBvbmx5XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpbmNsdWRlIHRoZSBpbmNyZW1lbnRhbCBpbnB1dHMgdGhhdCBoYXZlIG5vdCB5ZXQgYmVlbiBhY2tub3dsZWRnZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyPy50cmFja1NlcnZlckl0ZW1zKHN0YXRlLl9sYXN0VHVyblJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuc2V0Q29udmVyc2F0aW9uQ29udGV4dChzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyLmNvbnZlcnNhdGlvbklkLCBzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyLnByZXZpb3VzUmVzcG9uc2VJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9jZXNzZWRSZXNwb25zZSA9IHByb2Nlc3NNb2RlbFJlc3BvbnNlKHN0YXRlLl9sYXN0VHVyblJlc3BvbnNlLCBzdGF0ZS5fY3VycmVudEFnZW50LCBwcmVwYXJlZENhbGwudG9vbHMsIHByZXBhcmVkQ2FsbC5oYW5kb2Zmcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlID0gcHJvY2Vzc2VkUmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0dXJuUmVzdWx0ID0gYXdhaXQgcmVzb2x2ZVR1cm5BZnRlck1vZGVsUmVzcG9uc2Uoc3RhdGUuX2N1cnJlbnRBZ2VudCwgc3RhdGUuX29yaWdpbmFsSW5wdXQsIHN0YXRlLl9nZW5lcmF0ZWRJdGVtcywgc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UsIHN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UsIHRoaXMsIHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcGx5VHVyblJlc3VsdCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHVyblJlc3VsdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZ2VudDogc3RhdGUuX2N1cnJlbnRBZ2VudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sc1VzZWQ6IHN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2U/LnRvb2xzVXNlZCA/PyBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNldFR1cm5QZXJzaXN0ZW5jZTogIWlzUmVzdW1lZFN0YXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBndWFyZHJhaWxUcmFja2VyLmF3YWl0Q29tcGxldGlvbigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRTdGVwID0gc3RhdGUuX2N1cnJlbnRTdGVwO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWN1cnJlbnRTdGVwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1J1bm5pbmcgbmV4dCBsb29wJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGN1cnJlbnRTdGVwLnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ25leHRfc3RlcF9maW5hbF9vdXRwdXQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHJ1bk91dHB1dEd1YXJkcmFpbHMoc3RhdGUsIHRoaXMub3V0cHV0R3VhcmRyYWlsRGVmcywgY3VycmVudFN0ZXAub3V0cHV0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudFR1cm5JblByb2dyZXNzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF9lbmQnLCBzdGF0ZS5fY29udGV4dCwgc3RhdGUuX2N1cnJlbnRBZ2VudCwgY3VycmVudFN0ZXAub3V0cHV0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50LmVtaXQoJ2FnZW50X2VuZCcsIHN0YXRlLl9jb250ZXh0LCBjdXJyZW50U3RlcC5vdXRwdXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUnVuUmVzdWx0KHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ25leHRfc3RlcF9oYW5kb2ZmJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5zZXRDdXJyZW50QWdlbnQoY3VycmVudFN0ZXAubmV3QWdlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5fY3VycmVudEFnZW50U3Bhbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50U3Bhbi5lbmQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzZXRDdXJyZW50U3BhbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5zZXRDdXJyZW50QWdlbnRTcGFuKHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9ub0FjdGl2ZUFnZW50UnVuID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudFR1cm5JblByb2dyZXNzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2UndmUgcHJvY2Vzc2VkIHRoZSBoYW5kb2ZmLCBzbyB3ZSBuZWVkIHRvIHJ1biB0aGUgbG9vcCBhZ2Fpbi5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudFN0ZXAgPSB7IHR5cGU6ICduZXh0X3N0ZXBfcnVuX2FnYWluJyB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnbmV4dF9zdGVwX2ludGVycnVwdGlvbic6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW50ZXJydXB0ZWQuIERvbid0IHJ1biBhbnkgZ3VhcmRyYWlscy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJ1blJlc3VsdChzdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICduZXh0X3N0ZXBfcnVuX2FnYWluJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudFR1cm5JblByb2dyZXNzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdSdW5uaW5nIG5leHQgbG9vcCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1J1bm5pbmcgbmV4dCBsb29wJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRUdXJuSW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5fY3VycmVudEFnZW50U3Bhbikge1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50U3Bhbi5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnRXJyb3IgaW4gYWdlbnQgcnVuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgZXJyb3I6IFN0cmluZyhlcnIpIH0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUuX2N1cnJlbnRTdGVwPy50eXBlICE9PSAnbmV4dF9zdGVwX2ludGVycnVwdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGRpc3Bvc2VSZXNvbHZlZENvbXB1dGVycyh7IHJ1bkNvbnRleHQ6IHN0YXRlLl9jb250ZXh0IH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oYEZhaWxlZCB0byBkaXNwb3NlIGNvbXB1dGVycyBhZnRlciBydW46ICR7ZXJyb3J9YCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5fY3VycmVudFN0ZXA/LnR5cGUgIT09ICduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZG9uJ3QgZW5kIHRoZSBzcGFuIGlmIHRoZSBydW4gd2FzIGludGVycnVwdGVkXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50U3Bhbi5lbmQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXNldEN1cnJlbnRTcGFuKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgYXN5bmMgI3J1blN0cmVhbUxvb3AocmVzdWx0LCBvcHRpb25zLCBpc1Jlc3VtZWRTdGF0ZSwgZW5zdXJlU3RyZWFtSW5wdXRQZXJzaXN0ZWQsIHNlc3Npb25JbnB1dFVwZGF0ZSwgcHJlc2VydmVUdXJuUGVyc2lzdGVuY2VPblJlc3VtZSkge1xuICAgICAgICBjb25zdCByZXNvbHZlZENvbnZlcnNhdGlvbklkID0gb3B0aW9ucy5jb252ZXJzYXRpb25JZCA/PyByZXN1bHQuc3RhdGUuX2NvbnZlcnNhdGlvbklkO1xuICAgICAgICBjb25zdCByZXNvbHZlZFByZXZpb3VzUmVzcG9uc2VJZCA9IG9wdGlvbnMucHJldmlvdXNSZXNwb25zZUlkID8/IHJlc3VsdC5zdGF0ZS5fcHJldmlvdXNSZXNwb25zZUlkO1xuICAgICAgICBjb25zdCBzZXJ2ZXJNYW5hZ2VzQ29udmVyc2F0aW9uID0gQm9vbGVhbihyZXNvbHZlZENvbnZlcnNhdGlvbklkKSB8fCBCb29sZWFuKHJlc29sdmVkUHJldmlvdXNSZXNwb25zZUlkKTtcbiAgICAgICAgY29uc3Qgc2VydmVyQ29udmVyc2F0aW9uVHJhY2tlciA9IHNlcnZlck1hbmFnZXNDb252ZXJzYXRpb25cbiAgICAgICAgICAgID8gbmV3IFNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXIoe1xuICAgICAgICAgICAgICAgIGNvbnZlcnNhdGlvbklkOiByZXNvbHZlZENvbnZlcnNhdGlvbklkLFxuICAgICAgICAgICAgICAgIHByZXZpb3VzUmVzcG9uc2VJZDogcmVzb2x2ZWRQcmV2aW91c1Jlc3BvbnNlSWQsXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyKSB7XG4gICAgICAgICAgICByZXN1bHQuc3RhdGUuc2V0Q29udmVyc2F0aW9uQ29udGV4dChzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyLmNvbnZlcnNhdGlvbklkLCBzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyLnByZXZpb3VzUmVzcG9uc2VJZCk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHNlbnRJbnB1dFRvTW9kZWwgPSBmYWxzZTtcbiAgICAgICAgbGV0IHN0cmVhbUlucHV0UGVyc2lzdGVkID0gZmFsc2U7XG4gICAgICAgIGxldCBndWFyZHJhaWxUcmFja2VyID0gY3JlYXRlR3VhcmRyYWlsVHJhY2tlcigpO1xuICAgICAgICBjb25zdCBwZXJzaXN0U3RyZWFtSW5wdXRJZk5lZWRlZCA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmIChzdHJlYW1JbnB1dFBlcnNpc3RlZCB8fCAhZW5zdXJlU3RyZWFtSW5wdXRQZXJzaXN0ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBCb3RoIHN1Y2Nlc3MgYW5kIGVycm9yIHBhdGhzIGNhbGwgdGhpcyBoZWxwZXIsIHNvIGd1YXJkIGFnYWluc3QgbXVsdGlwbGUgd3JpdGVzLlxuICAgICAgICAgICAgYXdhaXQgZW5zdXJlU3RyZWFtSW5wdXRQZXJzaXN0ZWQoKTtcbiAgICAgICAgICAgIHN0cmVhbUlucHV0UGVyc2lzdGVkID0gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgbGV0IHBhcmFsbGVsR3VhcmRyYWlsUHJvbWlzZTtcbiAgICAgICAgY29uc3QgYXdhaXRHdWFyZHJhaWxzQW5kUGVyc2lzdElucHV0ID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgYXdhaXQgZ3VhcmRyYWlsVHJhY2tlci5hd2FpdENvbXBsZXRpb24oKTtcbiAgICAgICAgICAgIGlmIChndWFyZHJhaWxUcmFja2VyLmZhaWxlZCkge1xuICAgICAgICAgICAgICAgIHRocm93IGd1YXJkcmFpbFRyYWNrZXIuZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2VudElucHV0VG9Nb2RlbCAmJlxuICAgICAgICAgICAgICAgICFzdHJlYW1JbnB1dFBlcnNpc3RlZCAmJlxuICAgICAgICAgICAgICAgICFndWFyZHJhaWxUcmFja2VyLmZhaWxlZCkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHBlcnNpc3RTdHJlYW1JbnB1dElmTmVlZGVkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGlmIChzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyICYmIGlzUmVzdW1lZFN0YXRlKSB7XG4gICAgICAgICAgICBzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyLnByaW1lRnJvbVN0YXRlKHtcbiAgICAgICAgICAgICAgICBvcmlnaW5hbElucHV0OiByZXN1bHQuc3RhdGUuX29yaWdpbmFsSW5wdXQsXG4gICAgICAgICAgICAgICAgZ2VuZXJhdGVkSXRlbXM6IHJlc3VsdC5zdGF0ZS5fZ2VuZXJhdGVkSXRlbXMsXG4gICAgICAgICAgICAgICAgbW9kZWxSZXNwb25zZXM6IHJlc3VsdC5zdGF0ZS5fbW9kZWxSZXNwb25zZXMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5zZXRDb252ZXJzYXRpb25Db250ZXh0KHNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXIuY29udmVyc2F0aW9uSWQsIHNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXIucHJldmlvdXNSZXNwb25zZUlkKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUcmFja3Mgd2hlbiB3ZSByZXN1bWUgYW4gYXBwcm92YWwgaW50ZXJydXB0aW9uIHNvIHRoZSBuZXh0IHJ1bi1hZ2FpbiBzdGVwIHN0YXlzIGluIHRoZSBzYW1lIHR1cm4uXG4gICAgICAgIGxldCBjb250aW51aW5nSW50ZXJydXB0ZWRUdXJuID0gZmFsc2U7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRBZ2VudCA9IHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50O1xuICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXAgPSByZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwID8/IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ25leHRfc3RlcF9ydW5fYWdhaW4nLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXAudHlwZSA9PT0gJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnQ29udGludWluZyBmcm9tIGludGVycnVwdGlvbicpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdC5zdGF0ZS5fbGFzdFR1cm5SZXNwb25zZSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgIXJlc3VsdC5zdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdObyBtb2RlbCByZXNwb25zZSBmb3VuZCBpbiBwcmV2aW91cyBzdGF0ZScsIHJlc3VsdC5zdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW50ZXJydXB0ZWRPdXRjb21lID0gYXdhaXQgcmVzdW1lSW50ZXJydXB0ZWRUdXJuKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlOiByZXN1bHQuc3RhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBydW5uZXI6IHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICBvblN0ZXBJdGVtczogKHR1cm5SZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRTdGVwVG9SdW5SZXN1bHQocmVzdWx0LCB0dXJuUmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAvLyBEb24ndCByZXNldCBjb3VudGVyIGhlcmUgLSByZXNvbHZlSW50ZXJydXB0ZWRUdXJuIGFscmVhZHkgYWRqdXN0ZWQgaXQgdmlhIHJld2luZCBsb2dpY1xuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgY291bnRlciB3aWxsIGJlIHJlc2V0IHdoZW4gX2N1cnJlbnRUdXJuIGlzIGluY3JlbWVudGVkIChzdGFydGluZyBhIG5ldyB0dXJuKVxuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHNob3VsZFJldHVybiwgc2hvdWxkQ29udGludWUgfSA9IGhhbmRsZUludGVycnVwdGVkT3V0Y29tZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZTogcmVzdWx0LnN0YXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0Y29tZTogaW50ZXJydXB0ZWRPdXRjb21lLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q29udGludWluZ0ludGVycnVwdGVkVHVybjogKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWluZ0ludGVycnVwdGVkVHVybiA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzaG91bGRSZXR1cm4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlIGFyZSBzdGlsbCBpbiBhbiBpbnRlcnJ1cHRpb24sIHNvIHdlIG5lZWQgdG8gYXZvaWQgYW4gaW5maW5pdGUgbG9vcFxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChzaG91bGRDb250aW51ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXAudHlwZSA9PT0gJ25leHRfc3RlcF9ydW5fYWdhaW4nKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmFsbGVsR3VhcmRyYWlsUHJvbWlzZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgZ3VhcmRyYWlsVHJhY2tlciA9IGNyZWF0ZUd1YXJkcmFpbFRyYWNrZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgd2FzQ29udGludWluZ0ludGVycnVwdGVkVHVybiA9IGNvbnRpbnVpbmdJbnRlcnJ1cHRlZFR1cm47XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVpbmdJbnRlcnJ1cHRlZFR1cm4gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJldmlvdXNUdXJuID0gcmVzdWx0LnN0YXRlLl9jdXJyZW50VHVybjtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJldmlvdXNQZXJzaXN0ZWRDb3VudCA9IHJlc3VsdC5zdGF0ZS5fY3VycmVudFR1cm5QZXJzaXN0ZWRJdGVtQ291bnQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzR2VuZXJhdGVkQ291bnQgPSByZXN1bHQuc3RhdGUuX2dlbmVyYXRlZEl0ZW1zLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJlcGFyZWRUdXJuID0gYXdhaXQgcHJlcGFyZVR1cm4oe1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGU6IHJlc3VsdC5zdGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0OiByZXN1bHQuaW5wdXQsXG4gICAgICAgICAgICAgICAgICAgICAgICBnZW5lcmF0ZWRJdGVtczogcmVzdWx0Lm5ld0l0ZW1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNSZXN1bWVkU3RhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVzZXJ2ZVR1cm5QZXJzaXN0ZW5jZU9uUmVzdW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWluZ0ludGVycnVwdGVkVHVybjogd2FzQ29udGludWluZ0ludGVycnVwdGVkVHVybixcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dEd1YXJkcmFpbERlZnM6IHRoaXMuaW5wdXRHdWFyZHJhaWxEZWZzLFxuICAgICAgICAgICAgICAgICAgICAgICAgZ3VhcmRyYWlsSGFuZGxlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblBhcmFsbGVsU3RhcnQ6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3VhcmRyYWlsVHJhY2tlci5tYXJrUGVuZGluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25QYXJhbGxlbEVycm9yOiAoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGd1YXJkcmFpbFRyYWNrZXIuc2V0RXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVtaXRBZ2VudFN0YXJ0OiAoY29udGV4dCwgYWdlbnQsIGlucHV0SXRlbXMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2FnZW50X3N0YXJ0JywgY29udGV4dCwgYWdlbnQsIGlucHV0SXRlbXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcmVzZXJ2ZVR1cm5QZXJzaXN0ZW5jZU9uUmVzdW1lICYmXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRUdXJuID4gcHJldmlvdXNUdXJuICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1BlcnNpc3RlZENvdW50IDw9IHByZXZpb3VzR2VuZXJhdGVkQ291bnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFByZXNlcnZlIHBlcnNpc3RlZCBvZmZzZXRzIGZyb20gYSByZXN1bWVkIHJ1biB0byBhdm9pZCByZS1zYXZpbmcgcHJpb3IgaXRlbXMuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRUdXJuUGVyc2lzdGVkSXRlbUNvdW50ID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1BlcnNpc3RlZENvdW50O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgYXJ0aWZhY3RzLCB0dXJuSW5wdXQgfSA9IHByZXBhcmVkVHVybjtcbiAgICAgICAgICAgICAgICAgICAgcGFyYWxsZWxHdWFyZHJhaWxQcm9taXNlID0gcHJlcGFyZWRUdXJuLnBhcmFsbGVsR3VhcmRyYWlsUHJvbWlzZTtcbiAgICAgICAgICAgICAgICAgICAgZ3VhcmRyYWlsVHJhY2tlci5zZXRQcm9taXNlKHBhcmFsbGVsR3VhcmRyYWlsUHJvbWlzZSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIGd1YXJkcmFpbHMgYXJlIHN0aWxsIHJ1bm5pbmcsIGRlZmVyIGlucHV0IHBlcnNpc3RlbmNlIHVudGlsIHRoZXkgZmluaXNoLlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWxheVN0cmVhbUlucHV0UGVyc2lzdGVuY2UgPSBndWFyZHJhaWxUcmFja2VyLnBlbmRpbmc7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZXBhcmVkQ2FsbCA9IGF3YWl0IHRoaXMuI3ByZXBhcmVNb2RlbENhbGwocmVzdWx0LnN0YXRlLCBvcHRpb25zLCBhcnRpZmFjdHMsIHR1cm5JbnB1dCwgc2VydmVyQ29udmVyc2F0aW9uVHJhY2tlciwgc2Vzc2lvbklucHV0VXBkYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgZ3VhcmRyYWlsVHJhY2tlci50aHJvd0lmRXJyb3IoKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGZpbmFsUmVzcG9uc2UgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIGxldCBpbnB1dE1hcmtlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXJrSW5wdXRPbmNlID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0TWFya2VkIHx8ICFzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2Ugb25seSBtYXJrIGlucHV0cyBhcyBzZW50IGFmdGVyIHJlY2VpdmluZyB0aGUgZmlyc3Qgc3RyZWFtIGV2ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2hpY2ggaXMgdGhlIGVhcmxpZXN0IHJlbGlhYmxlIGNvbmZpcm1hdGlvbiB0aGF0IHRoZSBzZXJ2ZXIgYWNjZXB0ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSByZXF1ZXN0LiBJZiB0aGUgc3RyZWFtIGZhaWxzIGJlZm9yZSBhbnkgZXZlbnRzLCBsZWF2ZSBpbnB1dHNcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVubWFya2VkIHNvIGEgcmV0cnkgY2FuIHJlc2VuZCBzYWZlbHkuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWNvcmQgdGhlIGV4YWN0IGlucHV0IHRoYXQgd2FzIHNlbnQgc28gdGhlIHNlcnZlciB0cmFja2VyIGNhbiBhZHZhbmNlIHNhZmVseS5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXIubWFya0lucHV0QXNTZW50KHByZXBhcmVkQ2FsbC5zb3VyY2VJdGVtcywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlckFwcGxpZWQ6IHByZXBhcmVkQ2FsbC5maWx0ZXJBcHBsaWVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbFR1cm5JdGVtczogcHJlcGFyZWRDYWxsLnR1cm5JbnB1dCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRNYXJrZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBzZW50SW5wdXRUb01vZGVsID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFkZWxheVN0cmVhbUlucHV0UGVyc2lzdGVuY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHBlcnNpc3RTdHJlYW1JbnB1dElmTmVlZGVkKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBhd2FpdCAoY29uc3QgZXZlbnQgb2YgcHJlcGFyZWRDYWxsLm1vZGVsLmdldFN0cmVhbWVkUmVzcG9uc2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN5c3RlbUluc3RydWN0aW9uczogcHJlcGFyZWRDYWxsLm1vZGVsSW5wdXQuaW5zdHJ1Y3Rpb25zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb21wdDogcHJlcGFyZWRDYWxsLnByb21wdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTdHJlYW1pbmcgcmVxdWVzdHMgc2hvdWxkIGFsc28gaG9ub3IgZXhwbGljaXRseSBjaG9zZW4gbW9kZWxzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLihwcmVwYXJlZENhbGwuZXhwbGljdGx5TW9kZWxTZXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB7IG92ZXJyaWRlUHJvbXB0TW9kZWw6IHRydWUgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHt9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dDogcHJlcGFyZWRDYWxsLm1vZGVsSW5wdXQuaW5wdXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNSZXNwb25zZUlkOiBwcmVwYXJlZENhbGwucHJldmlvdXNSZXNwb25zZUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnZlcnNhdGlvbklkOiBwcmVwYXJlZENhbGwuY29udmVyc2F0aW9uSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWxTZXR0aW5nczogcHJlcGFyZWRDYWxsLm1vZGVsU2V0dGluZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbHM6IHByZXBhcmVkQ2FsbC5zZXJpYWxpemVkVG9vbHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbHNFeHBsaWNpdGx5UHJvdmlkZWQ6IHByZXBhcmVkQ2FsbC50b29sc0V4cGxpY2l0bHlQcm92aWRlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kb2ZmczogcHJlcGFyZWRDYWxsLnNlcmlhbGl6ZWRIYW5kb2ZmcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRUeXBlOiBjb252ZXJ0QWdlbnRPdXRwdXRUeXBlVG9TZXJpYWxpemFibGUoY3VycmVudEFnZW50Lm91dHB1dFR5cGUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNpbmc6IGdldFRyYWNpbmcodGhpcy5jb25maWcudHJhY2luZ0Rpc2FibGVkLCB0aGlzLmNvbmZpZy50cmFjZUluY2x1ZGVTZW5zaXRpdmVEYXRhKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaWduYWw6IG9wdGlvbnMuc2lnbmFsLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBndWFyZHJhaWxUcmFja2VyLnRocm93SWZFcnJvcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtJbnB1dE9uY2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ3Jlc3BvbnNlX2RvbmUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IFN0cmVhbUV2ZW50UmVzcG9uc2VDb21wbGV0ZWQucGFyc2UoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbFJlc3BvbnNlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNhZ2U6IG5ldyBVc2FnZShwYXJzZWQucmVzcG9uc2UudXNhZ2UpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0OiBwYXJzZWQucmVzcG9uc2Uub3V0cHV0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VJZDogcGFyc2VkLnJlc3BvbnNlLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2NvbnRleHQudXNhZ2UuYWRkKGZpbmFsUmVzcG9uc2UudXNhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmNhbmNlbGxlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXaGVuIHRoZSB1c2VyJ3MgY29kZSBleGl0cyBhIGxvb3AgdG8gY29uc3VtZSB0aGUgc3RyZWFtLCB3ZSBuZWVkIHRvIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgbG9vcCB0byBwcmV2ZW50IGludGVybmFsIGZhbHNlIGVycm9ycyBhbmQgdW5uZWNlc3NhcnkgcHJvY2Vzc2luZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBhd2FpdEd1YXJkcmFpbHNBbmRQZXJzaXN0SW5wdXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuX2FkZEl0ZW0obmV3IFJ1blJhd01vZGVsU3RyZWFtRXZlbnQoZXZlbnQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0Fib3J0RXJyb3IoZXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbnRJbnB1dFRvTW9kZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFya0lucHV0T25jZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBhd2FpdEd1YXJkcmFpbHNBbmRQZXJzaXN0SW5wdXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZmluYWxSZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFya0lucHV0T25jZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGF3YWl0R3VhcmRyYWlsc0FuZFBlcnNpc3RJbnB1dCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmNhbmNlbGxlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fbm9BY3RpdmVBZ2VudFJ1biA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWZpbmFsUmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBNb2RlbEJlaGF2aW9yRXJyb3IoJ01vZGVsIGRpZCBub3QgcHJvZHVjZSBhIGZpbmFsIHJlc3BvbnNlIScsIHJlc3VsdC5zdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9sYXN0VHVyblJlc3BvbnNlID0gZmluYWxSZXNwb25zZTtcbiAgICAgICAgICAgICAgICAgICAgLy8gS2VlcCB0aGUgdHJhY2tlciBpbiBzeW5jIHdpdGggdGhlIHN0cmVhbWVkIHJlc3BvbnNlIHNvIHJlY29ubmVjdGlvbnMgcmVtYWluIGFjY3VyYXRlLlxuICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyPy50cmFja1NlcnZlckl0ZW1zKGZpbmFsUmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2VydmVyQ29udmVyc2F0aW9uVHJhY2tlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLnNldENvbnZlcnNhdGlvbkNvbnRleHQoc2VydmVyQ29udmVyc2F0aW9uVHJhY2tlci5jb252ZXJzYXRpb25JZCwgc2VydmVyQ29udmVyc2F0aW9uVHJhY2tlci5wcmV2aW91c1Jlc3BvbnNlSWQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fbW9kZWxSZXNwb25zZXMucHVzaChyZXN1bHQuc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9jZXNzZWRSZXNwb25zZSA9IHByb2Nlc3NNb2RlbFJlc3BvbnNlKHJlc3VsdC5zdGF0ZS5fbGFzdFR1cm5SZXNwb25zZSwgY3VycmVudEFnZW50LCBwcmVwYXJlZENhbGwudG9vbHMsIHByZXBhcmVkQ2FsbC5oYW5kb2Zmcyk7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlID0gcHJvY2Vzc2VkUmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgICAgIC8vIFJlY29yZCB0aGUgaXRlbXMgZW1pdHRlZCBkaXJlY3RseSBmcm9tIHRoZSBtb2RlbCByZXNwb25zZSBzbyB3ZSBkbyBub3RcbiAgICAgICAgICAgICAgICAgICAgLy8gc3RyZWFtIHRoZW0gYWdhaW4gYWZ0ZXIgdG9vbHMgYW5kIG90aGVyIHNpZGUgZWZmZWN0cyBmaW5pc2guXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZVRvb2xJdGVtcyA9IG5ldyBTZXQocHJvY2Vzc2VkUmVzcG9uc2UubmV3SXRlbXMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJlVG9vbEl0ZW1zLnNpemUgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJlYW1TdGVwSXRlbXNUb1J1blJlc3VsdChyZXN1bHQsIHByb2Nlc3NlZFJlc3BvbnNlLm5ld0l0ZW1zKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0dXJuUmVzdWx0ID0gYXdhaXQgcmVzb2x2ZVR1cm5BZnRlck1vZGVsUmVzcG9uc2UoY3VycmVudEFnZW50LCByZXN1bHQuc3RhdGUuX29yaWdpbmFsSW5wdXQsIHJlc3VsdC5zdGF0ZS5fZ2VuZXJhdGVkSXRlbXMsIHJlc3VsdC5zdGF0ZS5fbGFzdFR1cm5SZXNwb25zZSwgcmVzdWx0LnN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UsIHRoaXMsIHJlc3VsdC5zdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIGFwcGx5VHVyblJlc3VsdCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZTogcmVzdWx0LnN0YXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHVyblJlc3VsdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFnZW50OiBjdXJyZW50QWdlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sc1VzZWQ6IHByb2Nlc3NlZFJlc3BvbnNlLnRvb2xzVXNlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc2V0VHVyblBlcnNpc3RlbmNlOiAhaXNSZXN1bWVkU3RhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBvblN0ZXBJdGVtczogKHN0ZXApID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRTdGVwVG9SdW5SZXN1bHQocmVzdWx0LCBzdGVwLCB7IHNraXBJdGVtczogcHJlVG9vbEl0ZW1zIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRTdGVwID0gcmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcDtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGN1cnJlbnRTdGVwLnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbmV4dF9zdGVwX2ZpbmFsX291dHB1dCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBydW5PdXRwdXRHdWFyZHJhaWxzKHJlc3VsdC5zdGF0ZSwgdGhpcy5vdXRwdXRHdWFyZHJhaWxEZWZzLCBjdXJyZW50U3RlcC5vdXRwdXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9jdXJyZW50VHVybkluUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHBlcnNpc3RTdHJlYW1JbnB1dElmTmVlZGVkKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBHdWFyZHJhaWxzIG11c3Qgc3VjY2VlZCBiZWZvcmUgcGVyc2lzdGluZyBzZXNzaW9uIG1lbW9yeSB0byBhdm9pZCBzdG9yaW5nIGJsb2NrZWQgb3V0cHV0cy5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc2VydmVyTWFuYWdlc0NvbnZlcnNhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHNhdmVTdHJlYW1SZXN1bHRUb1Nlc3Npb24ob3B0aW9ucy5zZXNzaW9uLCByZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF9lbmQnLCByZXN1bHQuc3RhdGUuX2NvbnRleHQsIGN1cnJlbnRBZ2VudCwgY3VycmVudFN0ZXAub3V0cHV0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF9lbmQnLCByZXN1bHQuc3RhdGUuX2NvbnRleHQsIGN1cnJlbnRTdGVwLm91dHB1dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2UgYXJlIGRvbmUgZm9yIG5vdy4gRG9uJ3QgcnVuIGFueSBvdXRwdXQgZ3VhcmRyYWlscy5cbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHBlcnNpc3RTdHJlYW1JbnB1dElmTmVlZGVkKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXNlcnZlck1hbmFnZXNDb252ZXJzYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBzYXZlU3RyZWFtUmVzdWx0VG9TZXNzaW9uKG9wdGlvbnMuc2Vzc2lvbiwgcmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbmV4dF9zdGVwX2hhbmRvZmYnOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLnNldEN1cnJlbnRBZ2VudChjdXJyZW50U3RlcC5uZXdBZ2VudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9jdXJyZW50QWdlbnRTcGFuLmVuZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2V0Q3VycmVudFNwYW4oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5zZXRDdXJyZW50QWdlbnRTcGFuKHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuX2FkZEl0ZW0obmV3IFJ1bkFnZW50VXBkYXRlZFN0cmVhbUV2ZW50KHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX25vQWN0aXZlQWdlbnRSdW4gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9jdXJyZW50VHVybkluUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlJ3ZlIHByb2Nlc3NlZCB0aGUgaGFuZG9mZiwgc28gd2UgbmVlZCB0byBydW4gdGhlIGxvb3AgYWdhaW4uXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICduZXh0X3N0ZXBfcnVuX2FnYWluJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbmV4dF9zdGVwX3J1bl9hZ2Fpbic6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRUdXJuSW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdSdW5uaW5nIG5leHQgbG9vcCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1J1bm5pbmcgbmV4dCBsb29wJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9jdXJyZW50VHVybkluUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmIChndWFyZHJhaWxUcmFja2VyLnBlbmRpbmcpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBndWFyZHJhaWxUcmFja2VyLmF3YWl0Q29tcGxldGlvbih7IHN1cHByZXNzRXJyb3JzOiB0cnVlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNlbnRJbnB1dFRvTW9kZWwgJiZcbiAgICAgICAgICAgICAgICAhc3RyZWFtSW5wdXRQZXJzaXN0ZWQgJiZcbiAgICAgICAgICAgICAgICAhZ3VhcmRyYWlsVHJhY2tlci5mYWlsZWQpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBwZXJzaXN0U3RyZWFtSW5wdXRJZk5lZWRlZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50U3Bhbikge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50U3Bhbi5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdFcnJvciBpbiBhZ2VudCBydW4nLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IGVycm9yOiBTdHJpbmcoZXJyb3IpIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIGlmIChndWFyZHJhaWxUcmFja2VyLnBlbmRpbmcpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBndWFyZHJhaWxUcmFja2VyLmF3YWl0Q29tcGxldGlvbih7IHN1cHByZXNzRXJyb3JzOiB0cnVlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNlbnRJbnB1dFRvTW9kZWwgJiZcbiAgICAgICAgICAgICAgICAhc3RyZWFtSW5wdXRQZXJzaXN0ZWQgJiZcbiAgICAgICAgICAgICAgICAhZ3VhcmRyYWlsVHJhY2tlci5mYWlsZWQpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBwZXJzaXN0U3RyZWFtSW5wdXRJZk5lZWRlZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXA/LnR5cGUgIT09ICduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJykge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGRpc3Bvc2VSZXNvbHZlZENvbXB1dGVycyh7IHJ1bkNvbnRleHQ6IHJlc3VsdC5zdGF0ZS5fY29udGV4dCB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKGBGYWlsZWQgdG8gZGlzcG9zZSBjb21wdXRlcnMgYWZ0ZXIgcnVuOiAke2Vycm9yfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4pIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcD8udHlwZSAhPT0gJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50U3Bhbi5lbmQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzZXRDdXJyZW50U3BhbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGFzeW5jICNydW5JbmRpdmlkdWFsU3RyZWFtKGFnZW50LCBpbnB1dCwgb3B0aW9ucywgZW5zdXJlU3RyZWFtSW5wdXRQZXJzaXN0ZWQsIHNlc3Npb25JbnB1dFVwZGF0ZSwgcHJlc2VydmVUdXJuUGVyc2lzdGVuY2VPblJlc3VtZSkge1xuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyA/PyB7fTtcbiAgICAgICAgcmV0dXJuIHdpdGhOZXdTcGFuQ29udGV4dChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAvLyBJbml0aWFsaXplIG9yIHJldXNlIGV4aXN0aW5nIHN0YXRlXG4gICAgICAgICAgICBjb25zdCBpc1Jlc3VtZWRTdGF0ZSA9IGlucHV0IGluc3RhbmNlb2YgUnVuU3RhdGU7XG4gICAgICAgICAgICBjb25zdCBzdGF0ZSA9IGlzUmVzdW1lZFN0YXRlXG4gICAgICAgICAgICAgICAgPyBpbnB1dFxuICAgICAgICAgICAgICAgIDogbmV3IFJ1blN0YXRlKG9wdGlvbnMuY29udGV4dCBpbnN0YW5jZW9mIFJ1bkNvbnRleHRcbiAgICAgICAgICAgICAgICAgICAgPyBvcHRpb25zLmNvbnRleHRcbiAgICAgICAgICAgICAgICAgICAgOiBuZXcgUnVuQ29udGV4dChvcHRpb25zLmNvbnRleHQpLCBpbnB1dCwgYWdlbnQsIG9wdGlvbnMubWF4VHVybnMgPz8gREVGQVVMVF9NQVhfVFVSTlMpO1xuICAgICAgICAgICAgY29uc3QgcmVzb2x2ZWRDb252ZXJzYXRpb25JZCA9IG9wdGlvbnMuY29udmVyc2F0aW9uSWQgPz9cbiAgICAgICAgICAgICAgICAoaXNSZXN1bWVkU3RhdGUgPyBzdGF0ZS5fY29udmVyc2F0aW9uSWQgOiB1bmRlZmluZWQpO1xuICAgICAgICAgICAgY29uc3QgcmVzb2x2ZWRQcmV2aW91c1Jlc3BvbnNlSWQgPSBvcHRpb25zLnByZXZpb3VzUmVzcG9uc2VJZCA/P1xuICAgICAgICAgICAgICAgIChpc1Jlc3VtZWRTdGF0ZSA/IHN0YXRlLl9wcmV2aW91c1Jlc3BvbnNlSWQgOiB1bmRlZmluZWQpO1xuICAgICAgICAgICAgaWYgKCFpc1Jlc3VtZWRTdGF0ZSkge1xuICAgICAgICAgICAgICAgIHN0YXRlLnNldENvbnZlcnNhdGlvbkNvbnRleHQocmVzb2x2ZWRDb252ZXJzYXRpb25JZCwgcmVzb2x2ZWRQcmV2aW91c1Jlc3BvbnNlSWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSB0aGUgc3RyZWFtZWQgcmVzdWx0IHdpdGggZXhpc3Rpbmcgc3RhdGVcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBTdHJlYW1lZFJ1blJlc3VsdCh7XG4gICAgICAgICAgICAgICAgc2lnbmFsOiBvcHRpb25zLnNpZ25hbCxcbiAgICAgICAgICAgICAgICBzdGF0ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3Qgc3RyZWFtT3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgICAgICAgIHNpZ25hbDogcmVzdWx0Ll9nZXRBYm9ydFNpZ25hbCgpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8vIFNldHVwIGRlZmF1bHRzXG4gICAgICAgICAgICByZXN1bHQubWF4VHVybnMgPSBzdHJlYW1PcHRpb25zLm1heFR1cm5zID8/IHN0YXRlLl9tYXhUdXJucztcbiAgICAgICAgICAgIC8vIENvbnRpbnVlIHRoZSBzdHJlYW0gbG9vcCB3aXRob3V0IGJsb2NraW5nXG4gICAgICAgICAgICBjb25zdCBzdHJlYW1Mb29wUHJvbWlzZSA9IHRoaXMuI3J1blN0cmVhbUxvb3AocmVzdWx0LCBzdHJlYW1PcHRpb25zLCBpc1Jlc3VtZWRTdGF0ZSwgZW5zdXJlU3RyZWFtSW5wdXRQZXJzaXN0ZWQsIHNlc3Npb25JbnB1dFVwZGF0ZSwgcHJlc2VydmVUdXJuUGVyc2lzdGVuY2VPblJlc3VtZSkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVzdWx0Ll9kb25lKCk7XG4gICAgICAgICAgICB9LCAoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVzdWx0Ll9yYWlzZUVycm9yKGVycik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIEF0dGFjaCB0aGUgc3RyZWFtIGxvb3AgcHJvbWlzZSBzbyB0cmFjZSBlbmQgd2FpdHMgZm9yIHRoZSBsb29wIHRvIGNvbXBsZXRlXG4gICAgICAgICAgICByZXN1bHQuX3NldFN0cmVhbUxvb3BQcm9taXNlKHN0cmVhbUxvb3BQcm9taXNlKTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBBcHBsaWVzIGNhbGwtbGV2ZWwgZmlsdGVycyBhbmQgbWVyZ2VzIHNlc3Npb24gdXBkYXRlcyBzbyB0aGUgbW9kZWwgcmVxdWVzdCBtaXJyb3JzIGV4YWN0bHlcbiAgICAgKiB3aGF0IHdlIHBlcnNpc3RlZCBmb3IgaGlzdG9yeS5cbiAgICAgKi9cbiAgICBhc3luYyAjcHJlcGFyZU1vZGVsQ2FsbChzdGF0ZSwgb3B0aW9ucywgYXJ0aWZhY3RzLCB0dXJuSW5wdXQsIHNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXIsIHNlc3Npb25JbnB1dFVwZGF0ZSkge1xuICAgICAgICBjb25zdCB7IG1vZGVsLCBleHBsaWN0bHlNb2RlbFNldCwgcmVzb2x2ZWRNb2RlbE5hbWUgfSA9IGF3YWl0IHRoaXMuI3Jlc29sdmVNb2RlbEZvckFnZW50KHN0YXRlLl9jdXJyZW50QWdlbnQpO1xuICAgICAgICBsZXQgbW9kZWxTZXR0aW5ncyA9IHtcbiAgICAgICAgICAgIC4uLnRoaXMuY29uZmlnLm1vZGVsU2V0dGluZ3MsXG4gICAgICAgICAgICAuLi5zdGF0ZS5fY3VycmVudEFnZW50Lm1vZGVsU2V0dGluZ3MsXG4gICAgICAgIH07XG4gICAgICAgIG1vZGVsU2V0dGluZ3MgPSBhZGp1c3RNb2RlbFNldHRpbmdzRm9yTm9uR1BUNVJ1bm5lck1vZGVsKGV4cGxpY3RseU1vZGVsU2V0LCBzdGF0ZS5fY3VycmVudEFnZW50Lm1vZGVsU2V0dGluZ3MsIG1vZGVsLCBtb2RlbFNldHRpbmdzLCByZXNvbHZlZE1vZGVsTmFtZSk7XG4gICAgICAgIG1vZGVsU2V0dGluZ3MgPSBtYXliZVJlc2V0VG9vbENob2ljZShzdGF0ZS5fY3VycmVudEFnZW50LCBzdGF0ZS5fdG9vbFVzZVRyYWNrZXIsIG1vZGVsU2V0dGluZ3MpO1xuICAgICAgICBjb25zdCBzeXN0ZW1JbnN0cnVjdGlvbnMgPSBhd2FpdCBzdGF0ZS5fY3VycmVudEFnZW50LmdldFN5c3RlbVByb21wdChzdGF0ZS5fY29udGV4dCk7XG4gICAgICAgIGNvbnN0IHByb21wdCA9IGF3YWl0IHN0YXRlLl9jdXJyZW50QWdlbnQuZ2V0UHJvbXB0KHN0YXRlLl9jb250ZXh0KTtcbiAgICAgICAgY29uc3QgeyBtb2RlbElucHV0LCBzb3VyY2VJdGVtcywgcGVyc2lzdGVkSXRlbXMsIGZpbHRlckFwcGxpZWQgfSA9IGF3YWl0IGFwcGx5Q2FsbE1vZGVsSW5wdXRGaWx0ZXIoc3RhdGUuX2N1cnJlbnRBZ2VudCwgb3B0aW9ucy5jYWxsTW9kZWxJbnB1dEZpbHRlciwgc3RhdGUuX2NvbnRleHQsIHR1cm5JbnB1dCwgc3lzdGVtSW5zdHJ1Y3Rpb25zKTtcbiAgICAgICAgLy8gUHJvdmlkZSBmaWx0ZXJlZCBjbG9uZXMgd2hlbmV2ZXIgZmlsdGVycyBydW4gc28gc2Vzc2lvbiBoaXN0b3J5IG1pcnJvcnMgdGhlIG1vZGVsIHBheWxvYWQuXG4gICAgICAgIC8vIFJldHVybmluZyBhbiBlbXB0eSBhcnJheSBpcyBpbnRlbnRpb25hbDogaXQgdGVsbHMgdGhlIHNlc3Npb24gbGF5ZXIgdG8gcGVyc2lzdCBcIm5vdGhpbmdcIlxuICAgICAgICAvLyBpbnN0ZWFkIG9mIGZhbGxpbmcgYmFjayB0byB0aGUgdW5maWx0ZXJlZCBvcmlnaW5hbHMgd2hlbiB0aGUgZmlsdGVyIHJlZGFjdHMgZXZlcnl0aGluZy5cbiAgICAgICAgc2Vzc2lvbklucHV0VXBkYXRlPy4oc291cmNlSXRlbXMsIGZpbHRlckFwcGxpZWQgPyBwZXJzaXN0ZWRJdGVtcyA6IHVuZGVmaW5lZCk7XG4gICAgICAgIGNvbnN0IHByZXZpb3VzUmVzcG9uc2VJZCA9IHNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXI/LnByZXZpb3VzUmVzcG9uc2VJZCA/P1xuICAgICAgICAgICAgb3B0aW9ucy5wcmV2aW91c1Jlc3BvbnNlSWQ7XG4gICAgICAgIGNvbnN0IGNvbnZlcnNhdGlvbklkID0gc2VydmVyQ29udmVyc2F0aW9uVHJhY2tlcj8uY29udmVyc2F0aW9uSWQgPz8gb3B0aW9ucy5jb252ZXJzYXRpb25JZDtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmFydGlmYWN0cyxcbiAgICAgICAgICAgIG1vZGVsLFxuICAgICAgICAgICAgZXhwbGljdGx5TW9kZWxTZXQsXG4gICAgICAgICAgICBtb2RlbFNldHRpbmdzLFxuICAgICAgICAgICAgbW9kZWxJbnB1dCxcbiAgICAgICAgICAgIHByb21wdCxcbiAgICAgICAgICAgIHByZXZpb3VzUmVzcG9uc2VJZCxcbiAgICAgICAgICAgIGNvbnZlcnNhdGlvbklkLFxuICAgICAgICAgICAgc291cmNlSXRlbXMsXG4gICAgICAgICAgICBmaWx0ZXJBcHBsaWVkLFxuICAgICAgICAgICAgdHVybklucHV0LFxuICAgICAgICB9O1xuICAgIH1cbn1cbi8vIGludGVybmFsIGhlbHBlcnMgYW5kIGNvbnN0YW50c1xubGV0IGRlZmF1bHRSdW5uZXI7XG5jb25zdCBnZXREZWZhdWx0UnVubmVyID0gKCkgPT4ge1xuICAgIGlmICghZGVmYXVsdFJ1bm5lcikge1xuICAgICAgICBkZWZhdWx0UnVubmVyID0gbmV3IFJ1bm5lcigpO1xuICAgIH1cbiAgICByZXR1cm4gZGVmYXVsdFJ1bm5lcjtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ydW4ubWpzLm1hcCIsImltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuaW1wb3J0IHsgQWdlbnRIb29rcyB9IGZyb20gXCIuL2xpZmVjeWNsZS5tanNcIjtcbmltcG9ydCB7IGdldEFsbE1jcFRvb2xzIH0gZnJvbSBcIi4vbWNwLm1qc1wiO1xuaW1wb3J0IHsgZ2V0RGVmYXVsdE1vZGVsU2V0dGluZ3MsIGdwdDVSZWFzb25pbmdTZXR0aW5nc1JlcXVpcmVkLCBpc0dwdDVEZWZhdWx0LCB9IGZyb20gXCIuL2RlZmF1bHRNb2RlbC5tanNcIjtcbmltcG9ydCB7IHRvb2wsIH0gZnJvbSBcIi4vdG9vbC5tanNcIjtcbmltcG9ydCB7IGdldEhhbmRvZmYgfSBmcm9tIFwiLi9oYW5kb2ZmLm1qc1wiO1xuaW1wb3J0IHsgUnVubmVyIH0gZnJvbSBcIi4vcnVuLm1qc1wiO1xuaW1wb3J0IHsgdG9GdW5jdGlvblRvb2xOYW1lIH0gZnJvbSBcIi4vdXRpbHMvdG9vbHMubWpzXCI7XG5pbXBvcnQgeyBnZXRPdXRwdXRUZXh0IH0gZnJvbSBcIi4vdXRpbHMvbWVzc2FnZXMubWpzXCI7XG5pbXBvcnQgeyBpc0FnZW50VG9vbElucHV0IH0gZnJvbSBcIi4vdXRpbHMvdHlwZUd1YXJkcy5tanNcIjtcbmltcG9ydCB7IGlzWm9kT2JqZWN0IH0gZnJvbSBcIi4vdXRpbHMvdHlwZUd1YXJkcy5tanNcIjtcbmltcG9ydCB7IE1vZGVsQmVoYXZpb3JFcnJvciwgVXNlckVycm9yIH0gZnJvbSBcIi4vZXJyb3JzLm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG4vLyBQZXItcHJvY2VzcywgZXBoZW1lcmFsIG1hcCBsaW5raW5nIGEgZnVuY3Rpb24gdG9vbCBjYWxsIHRvIGl0cyBuZXN0ZWRcbi8vIEFnZW50IHJ1biByZXN1bHQgd2l0aGluIHRoZSBzYW1lIHJ1bjsgZW50cnkgaXMgcmVtb3ZlZCBhZnRlciBjb25zdW1wdGlvbi5cbmNvbnN0IGFnZW50VG9vbFJ1blJlc3VsdHMgPSBuZXcgV2Vha01hcCgpO1xuZXhwb3J0IGZ1bmN0aW9uIHNhdmVBZ2VudFRvb2xSdW5SZXN1bHQodG9vbENhbGwsIHJ1blJlc3VsdCkge1xuICAgIGlmICh0b29sQ2FsbCkge1xuICAgICAgICBhZ2VudFRvb2xSdW5SZXN1bHRzLnNldCh0b29sQ2FsbCwgcnVuUmVzdWx0KTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gY29uc3VtZUFnZW50VG9vbFJ1blJlc3VsdCh0b29sQ2FsbCkge1xuICAgIGNvbnN0IHJ1blJlc3VsdCA9IGFnZW50VG9vbFJ1blJlc3VsdHMuZ2V0KHRvb2xDYWxsKTtcbiAgICBpZiAocnVuUmVzdWx0KSB7XG4gICAgICAgIGFnZW50VG9vbFJ1blJlc3VsdHMuZGVsZXRlKHRvb2xDYWxsKTtcbiAgICB9XG4gICAgcmV0dXJuIHJ1blJlc3VsdDtcbn1cbi8vIFRoZSBwYXJhbWV0ZXIgdHlwZSBmbyBuZWVkQXBwcm92YWwgZnVuY3Rpb24gZm9yIHRoZSB0b29sIGNyZWF0ZWQgYnkgQWdlbnQuYXNUb29sKCkgbWV0aG9kXG5jb25zdCBBZ2VudEFzVG9vbE5lZWRBcHByb3ZhbFNjaGFtZSA9IHoub2JqZWN0KHsgaW5wdXQ6IHouc3RyaW5nKCkgfSk7XG4vKipcbiAqIFRoZSBjbGFzcyByZXByZXNlbnRpbmcgYW4gQUkgYWdlbnQgY29uZmlndXJlZCB3aXRoIGluc3RydWN0aW9ucywgdG9vbHMsIGd1YXJkcmFpbHMsIGhhbmRvZmZzIGFuZCBtb3JlLlxuICpcbiAqIFdlIHN0cm9uZ2x5IHJlY29tbWVuZCBwYXNzaW5nIGBpbnN0cnVjdGlvbnNgLCB3aGljaCBpcyB0aGUgXCJzeXN0ZW0gcHJvbXB0XCIgZm9yIHRoZSBhZ2VudC4gSW5cbiAqIGFkZGl0aW9uLCB5b3UgY2FuIHBhc3MgYGhhbmRvZmZEZXNjcmlwdGlvbmAsIHdoaWNoIGlzIGEgaHVtYW4tcmVhZGFibGUgZGVzY3JpcHRpb24gb2YgdGhlXG4gKiBhZ2VudCwgdXNlZCB3aGVuIHRoZSBhZ2VudCBpcyB1c2VkIGluc2lkZSB0b29scy9oYW5kb2Zmcy5cbiAqXG4gKiBBZ2VudHMgYXJlIGdlbmVyaWMgb24gdGhlIGNvbnRleHQgdHlwZS4gVGhlIGNvbnRleHQgaXMgYSAobXV0YWJsZSkgb2JqZWN0IHlvdSBjcmVhdGUuIEl0IGlzXG4gKiBwYXNzZWQgdG8gdG9vbCBmdW5jdGlvbnMsIGhhbmRvZmZzLCBndWFyZHJhaWxzLCBldGMuXG4gKi9cbmV4cG9ydCBjbGFzcyBBZ2VudCBleHRlbmRzIEFnZW50SG9va3Mge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbiBBZ2VudCB3aXRoIGhhbmRvZmZzIGFuZCBhdXRvbWF0aWNhbGx5IGluZmVyIHRoZSB1bmlvbiB0eXBlIGZvciBUT3V0cHV0IGZyb20gdGhlIGhhbmRvZmYgYWdlbnRzJyBvdXRwdXQgdHlwZXMuXG4gICAgICovXG4gICAgc3RhdGljIGNyZWF0ZShjb25maWcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBZ2VudCh7XG4gICAgICAgICAgICAuLi5jb25maWcsXG4gICAgICAgICAgICBoYW5kb2ZmczogY29uZmlnLmhhbmRvZmZzLFxuICAgICAgICAgICAgb3V0cHV0VHlwZTogY29uZmlnLm91dHB1dFR5cGUsXG4gICAgICAgICAgICBoYW5kb2ZmT3V0cHV0VHlwZVdhcm5pbmdFbmFibGVkOiBmYWxzZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXRpYyBERUZBVUxUX01PREVMX1BMQUNFSE9MREVSID0gJyc7XG4gICAgbmFtZTtcbiAgICBpbnN0cnVjdGlvbnM7XG4gICAgcHJvbXB0O1xuICAgIGhhbmRvZmZEZXNjcmlwdGlvbjtcbiAgICBoYW5kb2ZmcztcbiAgICBtb2RlbDtcbiAgICBtb2RlbFNldHRpbmdzO1xuICAgIHRvb2xzO1xuICAgIG1jcFNlcnZlcnM7XG4gICAgaW5wdXRHdWFyZHJhaWxzO1xuICAgIG91dHB1dEd1YXJkcmFpbHM7XG4gICAgb3V0cHV0VHlwZSA9ICd0ZXh0JztcbiAgICB0b29sVXNlQmVoYXZpb3I7XG4gICAgcmVzZXRUb29sQ2hvaWNlO1xuICAgIF90b29sc0V4cGxpY2l0bHlDb25maWd1cmVkO1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBpZiAodHlwZW9mIGNvbmZpZy5uYW1lICE9PSAnc3RyaW5nJyB8fCBjb25maWcubmFtZS50cmltKCkgPT09ICcnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdBZ2VudCBtdXN0IGhhdmUgYSBuYW1lLicpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubmFtZSA9IGNvbmZpZy5uYW1lO1xuICAgICAgICB0aGlzLmluc3RydWN0aW9ucyA9IGNvbmZpZy5pbnN0cnVjdGlvbnMgPz8gQWdlbnQuREVGQVVMVF9NT0RFTF9QTEFDRUhPTERFUjtcbiAgICAgICAgdGhpcy5wcm9tcHQgPSBjb25maWcucHJvbXB0O1xuICAgICAgICB0aGlzLmhhbmRvZmZEZXNjcmlwdGlvbiA9IGNvbmZpZy5oYW5kb2ZmRGVzY3JpcHRpb24gPz8gJyc7XG4gICAgICAgIHRoaXMuaGFuZG9mZnMgPSBjb25maWcuaGFuZG9mZnMgPz8gW107XG4gICAgICAgIHRoaXMubW9kZWwgPSBjb25maWcubW9kZWwgPz8gJyc7XG4gICAgICAgIHRoaXMubW9kZWxTZXR0aW5ncyA9IGNvbmZpZy5tb2RlbFNldHRpbmdzID8/IGdldERlZmF1bHRNb2RlbFNldHRpbmdzKCk7XG4gICAgICAgIHRoaXMudG9vbHMgPSBjb25maWcudG9vbHMgPz8gW107XG4gICAgICAgIHRoaXMuX3Rvb2xzRXhwbGljaXRseUNvbmZpZ3VyZWQgPSBjb25maWcudG9vbHMgIT09IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5tY3BTZXJ2ZXJzID0gY29uZmlnLm1jcFNlcnZlcnMgPz8gW107XG4gICAgICAgIHRoaXMuaW5wdXRHdWFyZHJhaWxzID0gY29uZmlnLmlucHV0R3VhcmRyYWlscyA/PyBbXTtcbiAgICAgICAgdGhpcy5vdXRwdXRHdWFyZHJhaWxzID0gY29uZmlnLm91dHB1dEd1YXJkcmFpbHMgPz8gW107XG4gICAgICAgIGlmIChjb25maWcub3V0cHV0VHlwZSkge1xuICAgICAgICAgICAgdGhpcy5vdXRwdXRUeXBlID0gY29uZmlnLm91dHB1dFR5cGU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50b29sVXNlQmVoYXZpb3IgPSBjb25maWcudG9vbFVzZUJlaGF2aW9yID8/ICdydW5fbGxtX2FnYWluJztcbiAgICAgICAgdGhpcy5yZXNldFRvb2xDaG9pY2UgPSBjb25maWcucmVzZXRUb29sQ2hvaWNlID8/IHRydWU7XG4gICAgICAgIGlmIChcbiAgICAgICAgLy8gVGhlIHVzZXIgc2V0cyBhIG5vbi1kZWZhdWx0IG1vZGVsXG4gICAgICAgIGNvbmZpZy5tb2RlbCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAvLyBUaGUgZGVmYXVsdCBtb2RlbCBpcyBncHQtNVxuICAgICAgICAgICAgaXNHcHQ1RGVmYXVsdCgpICYmXG4gICAgICAgICAgICAvLyBIb3dldmVyLCB0aGUgc3BlY2lmaWVkIG1vZGVsIGlzIG5vdCBhIGdwdC01IG1vZGVsXG4gICAgICAgICAgICAodHlwZW9mIGNvbmZpZy5tb2RlbCAhPT0gJ3N0cmluZycgfHxcbiAgICAgICAgICAgICAgICAhZ3B0NVJlYXNvbmluZ1NldHRpbmdzUmVxdWlyZWQoY29uZmlnLm1vZGVsKSkgJiZcbiAgICAgICAgICAgIC8vIFRoZSBtb2RlbCBzZXR0aW5ncyBhcmUgbm90IGN1c3RvbWl6ZWQgZm9yIHRoZSBzcGVjaWZpZWQgbW9kZWxcbiAgICAgICAgICAgIGNvbmZpZy5tb2RlbFNldHRpbmdzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIEluIHRoaXMgc2NlbmFyaW8sIHdlIHNob3VsZCB1c2UgYSBnZW5lcmljIG1vZGVsIHNldHRpbmdzXG4gICAgICAgICAgICAvLyBiZWNhdXNlIG5vbi1ncHQtNSBtb2RlbHMgYXJlIG5vdCBjb21wYXRpYmxlIHdpdGggdGhlIGRlZmF1bHQgZ3B0LTUgbW9kZWwgc2V0dGluZ3MuXG4gICAgICAgICAgICAvLyBUaGlzIGlzIGEgYmVzdC1lZmZvcnQgYXR0ZW1wdCB0byBtYWtlIHRoZSBhZ2VudCB3b3JrIHdpdGggbm9uLWdwdC01IG1vZGVscy5cbiAgICAgICAgICAgIHRoaXMubW9kZWxTZXR0aW5ncyA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIC8vIC0tLSBSdW50aW1lIHdhcm5pbmcgZm9yIGhhbmRvZmYgb3V0cHV0IHR5cGUgY29tcGF0aWJpbGl0eSAtLS1cbiAgICAgICAgaWYgKGNvbmZpZy5oYW5kb2ZmT3V0cHV0VHlwZVdhcm5pbmdFbmFibGVkID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgIGNvbmZpZy5oYW5kb2ZmT3V0cHV0VHlwZVdhcm5pbmdFbmFibGVkKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5oYW5kb2ZmcyAmJiB0aGlzLm91dHB1dFR5cGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBvdXRwdXRUeXBlcyA9IG5ldyBTZXQoW0pTT04uc3RyaW5naWZ5KHRoaXMub3V0cHV0VHlwZSldKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGggb2YgdGhpcy5oYW5kb2Zmcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoJ291dHB1dFR5cGUnIGluIGggJiYgaC5vdXRwdXRUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRUeXBlcy5hZGQoSlNPTi5zdHJpbmdpZnkoaC5vdXRwdXRUeXBlKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoJ2FnZW50JyBpbiBoICYmIGguYWdlbnQub3V0cHV0VHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0VHlwZXMuYWRkKEpTT04uc3RyaW5naWZ5KGguYWdlbnQub3V0cHV0VHlwZSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChvdXRwdXRUeXBlcy5zaXplID4gMSkge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIud2FybihgW0FnZW50XSBXYXJuaW5nOiBIYW5kb2ZmIGFnZW50cyBoYXZlIGRpZmZlcmVudCBvdXRwdXQgdHlwZXM6ICR7QXJyYXkuZnJvbShvdXRwdXRUeXBlcykuam9pbignLCAnKX0uIFlvdSBjYW4gbWFrZSBpdCB0eXBlLXNhZmUgYnkgdXNpbmcgQWdlbnQuY3JlYXRlKHsgLi4uIH0pIG1ldGhvZCBpbnN0ZWFkLmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBPdXRwdXQgc2NoZW1hIG5hbWUuXG4gICAgICovXG4gICAgZ2V0IG91dHB1dFNjaGVtYU5hbWUoKSB7XG4gICAgICAgIGlmICh0aGlzLm91dHB1dFR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICAgICAgcmV0dXJuICd0ZXh0JztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc1pvZE9iamVjdCh0aGlzLm91dHB1dFR5cGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gJ1pvZE91dHB1dCc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIHRoaXMub3V0cHV0VHlwZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm91dHB1dFR5cGUubmFtZTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gb3V0cHV0IHR5cGU6ICR7dGhpcy5vdXRwdXRUeXBlfWApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNYWtlcyBhIGNvcHkgb2YgdGhlIGFnZW50LCB3aXRoIHRoZSBnaXZlbiBhcmd1bWVudHMgY2hhbmdlZC4gRm9yIGV4YW1wbGUsIHlvdSBjb3VsZCBkbzpcbiAgICAgKlxuICAgICAqIGBgYFxuICAgICAqIGNvbnN0IG5ld0FnZW50ID0gYWdlbnQuY2xvbmUoeyBpbnN0cnVjdGlvbnM6ICdOZXcgaW5zdHJ1Y3Rpb25zJyB9KVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbmZpZyAtIEEgcGFydGlhbCBjb25maWd1cmF0aW9uIHRvIGNoYW5nZS5cbiAgICAgKiBAcmV0dXJucyBBIG5ldyBhZ2VudCB3aXRoIHRoZSBnaXZlbiBjaGFuZ2VzLlxuICAgICAqL1xuICAgIGNsb25lKGNvbmZpZykge1xuICAgICAgICByZXR1cm4gbmV3IEFnZW50KHtcbiAgICAgICAgICAgIC4uLnRoaXMsXG4gICAgICAgICAgICAuLi5jb25maWcsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gdGhpcyBhZ2VudCBpbnRvIGEgdG9vbCwgY2FsbGFibGUgYnkgb3RoZXIgYWdlbnRzLlxuICAgICAqXG4gICAgICogVGhpcyBpcyBkaWZmZXJlbnQgZnJvbSBoYW5kb2ZmcyBpbiB0d28gd2F5czpcbiAgICAgKiAxLiBJbiBoYW5kb2ZmcywgdGhlIG5ldyBhZ2VudCByZWNlaXZlcyB0aGUgY29udmVyc2F0aW9uIGhpc3RvcnkuIEluIHRoaXMgdG9vbCwgdGhlIG5ldyBhZ2VudFxuICAgICAqICAgIHJlY2VpdmVzIGdlbmVyYXRlZCBpbnB1dC5cbiAgICAgKiAyLiBJbiBoYW5kb2ZmcywgdGhlIG5ldyBhZ2VudCB0YWtlcyBvdmVyIHRoZSBjb252ZXJzYXRpb24uIEluIHRoaXMgdG9vbCwgdGhlIG5ldyBhZ2VudCBpc1xuICAgICAqICAgIGNhbGxlZCBhcyBhIHRvb2wsIGFuZCB0aGUgY29udmVyc2F0aW9uIGlzIGNvbnRpbnVlZCBieSB0aGUgb3JpZ2luYWwgYWdlbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbnMgZm9yIHRoZSB0b29sLlxuICAgICAqIEByZXR1cm5zIEEgdG9vbCB0aGF0IHJ1bnMgdGhlIGFnZW50IGFuZCByZXR1cm5zIHRoZSBvdXRwdXQgdGV4dC5cbiAgICAgKi9cbiAgICBhc1Rvb2wob3B0aW9ucykge1xuICAgICAgICBjb25zdCB7IHRvb2xOYW1lLCB0b29sRGVzY3JpcHRpb24sIGN1c3RvbU91dHB1dEV4dHJhY3RvciwgbmVlZHNBcHByb3ZhbCwgcnVuQ29uZmlnLCBydW5PcHRpb25zLCBpc0VuYWJsZWQsIG9uU3RyZWFtLCB9ID0gb3B0aW9ucztcbiAgICAgICAgLy8gRXZlbnQgaGFuZGxlcnMgYXJlIHNjb3BlZCB0byB0aGlzIGFnZW50IHRvb2wgaW5zdGFuY2UgYW5kIGFyZSBub3Qgc2hhcmVkOyB3ZSBvbmx5IHN1cHBvcnQgcmVnaXN0cmF0aW9uIChubyByZW1vdmFsKSB0byBrZWVwIHRoZSBBUEkgc3VyZmFjZSBzbWFsbC5cbiAgICAgICAgY29uc3QgZXZlbnRIYW5kbGVycyA9IG5ldyBNYXAoKTtcbiAgICAgICAgY29uc3QgZW1pdEV2ZW50ID0gYXN5bmMgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAvLyBXZSBpbnRlbnRpb25hbGx5IGtlZXAgb25seSBhZGQgc2VtYW50aWNzIChubyBvZmYpIHRvIHJlZHVjZSBzdXJmYWNlIGFyZWE7IGhhbmRsZXJzIGFyZSBzY29wZWQgdG8gdGhpcyBhZ2VudCB0b29sIGluc3RhbmNlLlxuICAgICAgICAgICAgY29uc3Qgc3BlY2lmaWMgPSBldmVudEhhbmRsZXJzLmdldChldmVudC5ldmVudC50eXBlKTtcbiAgICAgICAgICAgIGNvbnN0IHdpbGRjYXJkID0gZXZlbnRIYW5kbGVycy5nZXQoJyonKTtcbiAgICAgICAgICAgIGNvbnN0IGNhbmRpZGF0ZXMgPSBbXG4gICAgICAgICAgICAgICAgLi4uKG9uU3RyZWFtID8gW29uU3RyZWFtXSA6IFtdKSxcbiAgICAgICAgICAgICAgICAuLi4oc3BlY2lmaWMgPyBBcnJheS5mcm9tKHNwZWNpZmljKSA6IFtdKSxcbiAgICAgICAgICAgICAgICAuLi4od2lsZGNhcmQgPyBBcnJheS5mcm9tKHdpbGRjYXJkKSA6IFtdKSxcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICAvLyBSdW4gYWxsIGhhbmRsZXJzIGluIHBhcmFsbGVsIHNvIGEgc2xvdyBvblN0cmVhbSBjYWxsYmFjayBkb2VzIG5vdCBibG9jayBvbiguLi4pIGhhbmRsZXJzIChhbmQgdmljZSB2ZXJzYSkuXG4gICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbFNldHRsZWQoY2FuZGlkYXRlcy5tYXAoKGhhbmRsZXIpID0+IFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4gaGFuZGxlcihldmVudCkpKSk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGJhc2VUb29sID0gdG9vbCh7XG4gICAgICAgICAgICBuYW1lOiB0b29sTmFtZSA/PyB0b0Z1bmN0aW9uVG9vbE5hbWUodGhpcy5uYW1lKSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0b29sRGVzY3JpcHRpb24gPz8gJycsXG4gICAgICAgICAgICBwYXJhbWV0ZXJzOiBBZ2VudEFzVG9vbE5lZWRBcHByb3ZhbFNjaGFtZSxcbiAgICAgICAgICAgIHN0cmljdDogdHJ1ZSxcbiAgICAgICAgICAgIG5lZWRzQXBwcm92YWwsXG4gICAgICAgICAgICBpc0VuYWJsZWQsXG4gICAgICAgICAgICBleGVjdXRlOiBhc3luYyAoZGF0YSwgY29udGV4dCwgZGV0YWlscykgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghaXNBZ2VudFRvb2xJbnB1dChkYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKCdBZ2VudCB0b29sIGNhbGxlZCB3aXRoIGludmFsaWQgaW5wdXQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgcnVubmVyID0gbmV3IFJ1bm5lcihydW5Db25maWcgPz8ge30pO1xuICAgICAgICAgICAgICAgIC8vIE9ubHkgZmxpcCB0byBzdHJlYW1pbmcgbW9kZSB3aGVuIGEgaGFuZGxlciBpcyBwcm92aWRlZCB0byBhdm9pZCBleHRyYSBvdmVyaGVhZCBmb3IgY2FsbGVycyB0aGF0IGRvIG5vdCBuZWVkIGV2ZW50cy5cbiAgICAgICAgICAgICAgICAvLyBGbGlwIHRvIHN0cmVhbWluZyBpZiBlaXRoZXIgYSBsZWdhY3kgb25TdHJlYW0gY2FsbGJhY2sgb3IgZXZlbnQgaGFuZGxlcnMgYXJlIHJlZ2lzdGVyZWQ7IG90aGVyd2lzZSBzdGF5IG9uIHRoZSBub24tc3RyZWFtIHBhdGggdG8gYXZvaWQgZXh0cmEgb3ZlcmhlYWQuXG4gICAgICAgICAgICAgICAgY29uc3Qgc2hvdWxkU3RyZWFtID0gdHlwZW9mIG9uU3RyZWFtID09PSAnZnVuY3Rpb24nIHx8IGV2ZW50SGFuZGxlcnMuc2l6ZSA+IDA7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gc2hvdWxkU3RyZWFtXG4gICAgICAgICAgICAgICAgICAgID8gYXdhaXQgcnVubmVyLnJ1bih0aGlzLCBkYXRhLmlucHV0LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LFxuICAgICAgICAgICAgICAgICAgICAgICAgLi4uKHJ1bk9wdGlvbnMgPz8ge30pLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICA6IGF3YWl0IHJ1bm5lci5ydW4odGhpcywgZGF0YS5pbnB1dCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dCxcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLihydW5PcHRpb25zID8/IHt9KSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RyZWFtUGF5bG9hZCA9IHtcbiAgICAgICAgICAgICAgICAgICAgYWdlbnQ6IHRoaXMsXG4gICAgICAgICAgICAgICAgICAgIHRvb2xDYWxsOiBkZXRhaWxzPy50b29sQ2FsbCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmIChzaG91bGRTdHJlYW0pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2FzdCB0aHJvdWdoIHVua25vd246IHRoZSBhc3luYyBpdGVyYXRvciBzaGFwZSBtYXRjaGVzIGFuZCB3ZSB3YW50IHRvIGRyYWluIHRoZSBzdHJlYW0gZm9yIHNpZGUgZWZmZWN0cyB3aGlsZSBrZWVwaW5nIHRoZSBwdWJsaWMgQVBJIHN0YWJsZS5cbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RyZWFtUmVzdWx0ID0gcmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICAvLyBEcmFpbiB0aGUgc3RyZWFtIHRvIGRlbGl2ZXIgZXZlcnkgZXZlbnQgdG8gcmVnaXN0ZXJlZCBoYW5kbGVyczsgZW5zdXJlIGNvbXBsZXRpb24gYXdhaXRlZCBzbyB0aGUgbmVzdGVkIHJ1biBmaW5pc2hlcyBiZWZvcmUgcmV0dXJuaW5nLlxuICAgICAgICAgICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGV2ZW50IG9mIHN0cmVhbVJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgZW1pdEV2ZW50KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5zdHJlYW1QYXlsb2FkLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgc3RyZWFtUmVzdWx0LmNvbXBsZXRlZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgY29tcGxldGVkUmVzdWx0ID0gcmVzdWx0O1xuICAgICAgICAgICAgICAgIGNvbnN0IHVzZXNTdG9wQXRUb29sTmFtZXMgPSB0eXBlb2YgdGhpcy50b29sVXNlQmVoYXZpb3IgPT09ICdvYmplY3QnICYmXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9vbFVzZUJlaGF2aW9yICE9PSBudWxsICYmXG4gICAgICAgICAgICAgICAgICAgICdzdG9wQXRUb29sTmFtZXMnIGluIHRoaXMudG9vbFVzZUJlaGF2aW9yO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY3VzdG9tT3V0cHV0RXh0cmFjdG9yICE9PSAnZnVuY3Rpb24nICYmXG4gICAgICAgICAgICAgICAgICAgIHVzZXNTdG9wQXRUb29sTmFtZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBZb3UncmUgcGFzc2luZyB0aGUgYWdlbnQgKG5hbWU6ICR7dGhpcy5uYW1lfSkgd2l0aCB0b29sVXNlQmVoYXZpb3Iuc3RvcEF0VG9vbE5hbWVzIGNvbmZpZ3VyZWQgYXMgYSB0b29sIHRvIGEgZGlmZmVyZW50IGFnZW50OyB0aGlzIG1heSBub3Qgd29yayBhcyB5b3UgZXhwZWN0LiBZb3UgbWF5IHdhbnQgdG8gaGF2ZSBhIHdyYXBwZXIgZnVuY3Rpb24gdG9vbCB0byBjb25zaXN0ZW50bHkgcmV0dXJuIHRoZSBmaW5hbCBvdXRwdXQuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IG91dHB1dFRleHQgPSB0eXBlb2YgY3VzdG9tT3V0cHV0RXh0cmFjdG9yID09PSAnZnVuY3Rpb24nXG4gICAgICAgICAgICAgICAgICAgID8gYXdhaXQgY3VzdG9tT3V0cHV0RXh0cmFjdG9yKGNvbXBsZXRlZFJlc3VsdClcbiAgICAgICAgICAgICAgICAgICAgOiBnZXRPdXRwdXRUZXh0KGNvbXBsZXRlZFJlc3VsdC5yYXdSZXNwb25zZXNbY29tcGxldGVkUmVzdWx0LnJhd1Jlc3BvbnNlcy5sZW5ndGggLSAxXSk7XG4gICAgICAgICAgICAgICAgaWYgKGRldGFpbHM/LnRvb2xDYWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHNhdmVBZ2VudFRvb2xSdW5SZXN1bHQoZGV0YWlscy50b29sQ2FsbCwgY29tcGxldGVkUmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG91dHB1dFRleHQ7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgYWdlbnRUb29sID0ge1xuICAgICAgICAgICAgLi4uYmFzZVRvb2wsXG4gICAgICAgICAgICBvbjogKG5hbWUsIGhhbmRsZXIpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzZXQgPSBldmVudEhhbmRsZXJzLmdldChuYW1lKSA/PyBuZXcgU2V0KCk7XG4gICAgICAgICAgICAgICAgc2V0LmFkZChoYW5kbGVyKTtcbiAgICAgICAgICAgICAgICBldmVudEhhbmRsZXJzLnNldChuYW1lLCBzZXQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBhZ2VudFRvb2w7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gYWdlbnRUb29sO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBzeXN0ZW0gcHJvbXB0IGZvciB0aGUgYWdlbnQuXG4gICAgICpcbiAgICAgKiBJZiB0aGUgYWdlbnQgaGFzIGEgZnVuY3Rpb24gYXMgaXRzIGluc3RydWN0aW9ucywgdGhpcyBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCB3aXRoIHRoZVxuICAgICAqIHJ1bkNvbnRleHQgYW5kIHRoZSBhZ2VudCBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBhc3luYyBnZXRTeXN0ZW1Qcm9tcHQocnVuQ29udGV4dCkge1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMuaW5zdHJ1Y3Rpb25zID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5pbnN0cnVjdGlvbnMocnVuQ29udGV4dCwgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdHJ1Y3Rpb25zO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBwcm9tcHQgdGVtcGxhdGUgZm9yIHRoZSBhZ2VudCwgaWYgZGVmaW5lZC5cbiAgICAgKlxuICAgICAqIElmIHRoZSBhZ2VudCBoYXMgYSBmdW5jdGlvbiBhcyBpdHMgcHJvbXB0LCB0aGlzIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIHdpdGggdGhlXG4gICAgICogcnVuQ29udGV4dCBhbmQgdGhlIGFnZW50IGluc3RhbmNlLlxuICAgICAqL1xuICAgIGFzeW5jIGdldFByb21wdChydW5Db250ZXh0KSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5wcm9tcHQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnByb21wdChydW5Db250ZXh0LCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5wcm9tcHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZldGNoZXMgdGhlIGF2YWlsYWJsZSB0b29scyBmcm9tIHRoZSBNQ1Agc2VydmVycy5cbiAgICAgKiBAcmV0dXJucyB0aGUgTUNQIHBvd2VyZWQgdG9vbHNcbiAgICAgKi9cbiAgICBhc3luYyBnZXRNY3BUb29scyhydW5Db250ZXh0KSB7XG4gICAgICAgIGlmICh0aGlzLm1jcFNlcnZlcnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGdldEFsbE1jcFRvb2xzKHtcbiAgICAgICAgICAgICAgICBtY3BTZXJ2ZXJzOiB0aGlzLm1jcFNlcnZlcnMsXG4gICAgICAgICAgICAgICAgcnVuQ29udGV4dCxcbiAgICAgICAgICAgICAgICBhZ2VudDogdGhpcyxcbiAgICAgICAgICAgICAgICBjb252ZXJ0U2NoZW1hc1RvU3RyaWN0OiBmYWxzZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQUxsIGFnZW50IHRvb2xzLCBpbmNsdWRpbmcgdGhlIE1DUGwgYW5kIGZ1bmN0aW9uIHRvb2xzLlxuICAgICAqXG4gICAgICogQHJldHVybnMgYWxsIGNvbmZpZ3VyZWQgdG9vbHNcbiAgICAgKi9cbiAgICBhc3luYyBnZXRBbGxUb29scyhydW5Db250ZXh0KSB7XG4gICAgICAgIGNvbnN0IG1jcFRvb2xzID0gYXdhaXQgdGhpcy5nZXRNY3BUb29scyhydW5Db250ZXh0KTtcbiAgICAgICAgY29uc3QgZW5hYmxlZFRvb2xzID0gW107XG4gICAgICAgIGZvciAoY29uc3QgY2FuZGlkYXRlIG9mIHRoaXMudG9vbHMpIHtcbiAgICAgICAgICAgIGlmIChjYW5kaWRhdGUudHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1heWJlSXNFbmFibGVkID0gY2FuZGlkYXRlLmlzRW5hYmxlZDtcbiAgICAgICAgICAgICAgICBjb25zdCBlbmFibGVkID0gdHlwZW9mIG1heWJlSXNFbmFibGVkID09PSAnZnVuY3Rpb24nXG4gICAgICAgICAgICAgICAgICAgID8gYXdhaXQgbWF5YmVJc0VuYWJsZWQocnVuQ29udGV4dCwgdGhpcylcbiAgICAgICAgICAgICAgICAgICAgOiB0eXBlb2YgbWF5YmVJc0VuYWJsZWQgPT09ICdib29sZWFuJ1xuICAgICAgICAgICAgICAgICAgICAgICAgPyBtYXliZUlzRW5hYmxlZFxuICAgICAgICAgICAgICAgICAgICAgICAgOiB0cnVlO1xuICAgICAgICAgICAgICAgIGlmICghZW5hYmxlZCkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbmFibGVkVG9vbHMucHVzaChjYW5kaWRhdGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbLi4ubWNwVG9vbHMsIC4uLmVuYWJsZWRUb29sc107XG4gICAgfVxuICAgIGhhc0V4cGxpY2l0VG9vbENvbmZpZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Rvb2xzRXhwbGljaXRseUNvbmZpZ3VyZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGhhbmRvZmZzIHRoYXQgc2hvdWxkIGJlIGV4cG9zZWQgdG8gdGhlIG1vZGVsIGZvciB0aGUgY3VycmVudCBydW4uXG4gICAgICpcbiAgICAgKiBIYW5kb2ZmcyB0aGF0IHByb3ZpZGUgYW4gYGlzRW5hYmxlZGAgZnVuY3Rpb24gcmV0dXJuaW5nIGBmYWxzZWAgYXJlIG9taXR0ZWQuXG4gICAgICovXG4gICAgYXN5bmMgZ2V0RW5hYmxlZEhhbmRvZmZzKHJ1bkNvbnRleHQpIHtcbiAgICAgICAgY29uc3QgaGFuZG9mZnMgPSB0aGlzLmhhbmRvZmZzPy5tYXAoKGgpID0+IGdldEhhbmRvZmYoaCkpID8/IFtdO1xuICAgICAgICBjb25zdCBlbmFibGVkID0gW107XG4gICAgICAgIGZvciAoY29uc3QgaGFuZG9mZiBvZiBoYW5kb2Zmcykge1xuICAgICAgICAgICAgaWYgKGF3YWl0IGhhbmRvZmYuaXNFbmFibGVkKHsgcnVuQ29udGV4dCwgYWdlbnQ6IHRoaXMgfSkpIHtcbiAgICAgICAgICAgICAgICBlbmFibGVkLnB1c2goaGFuZG9mZik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVuYWJsZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByb2Nlc3NlcyB0aGUgZmluYWwgb3V0cHV0IG9mIHRoZSBhZ2VudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdXRwdXQgLSBUaGUgb3V0cHV0IG9mIHRoZSBhZ2VudC5cbiAgICAgKiBAcmV0dXJucyBUaGUgcGFyc2VkIG91dC5cbiAgICAgKi9cbiAgICBwcm9jZXNzRmluYWxPdXRwdXQob3V0cHV0KSB7XG4gICAgICAgIGlmICh0aGlzLm91dHB1dFR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHRoaXMub3V0cHV0VHlwZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2Uob3V0cHV0KTtcbiAgICAgICAgICAgIGlmIChpc1pvZE9iamVjdCh0aGlzLm91dHB1dFR5cGUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMub3V0cHV0VHlwZS5wYXJzZShwYXJzZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlZDtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gb3V0cHV0IHR5cGU6ICR7dGhpcy5vdXRwdXRUeXBlfWApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgSlNPTiByZXByZXNlbnRhdGlvbiBvZiB0aGUgYWdlbnQsIHdoaWNoIGlzIHNlcmlhbGl6YWJsZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgSlNPTiBvYmplY3QgY29udGFpbmluZyB0aGUgYWdlbnQncyBuYW1lLlxuICAgICAqL1xuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgfTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hZ2VudC5tanMubWFwIiwiaW1wb3J0IHsgYWRkVHJhY2VQcm9jZXNzb3IgfSBmcm9tIFwiLi90cmFjaW5nL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgZGVmYXVsdFByb2Nlc3NvciB9IGZyb20gXCIuL3RyYWNpbmcvcHJvY2Vzc29yLm1qc1wiO1xuZXhwb3J0IHsgUnVudGltZUV2ZW50RW1pdHRlciB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvX3NoaW1zJztcbmV4cG9ydCB7IEFnZW50LCB9IGZyb20gXCIuL2FnZW50Lm1qc1wiO1xuZXhwb3J0IHsgQWdlbnRzRXJyb3IsIEd1YXJkcmFpbEV4ZWN1dGlvbkVycm9yLCBJbnB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkLCBNYXhUdXJuc0V4Y2VlZGVkRXJyb3IsIE1vZGVsQmVoYXZpb3JFcnJvciwgT3V0cHV0R3VhcmRyYWlsVHJpcHdpcmVUcmlnZ2VyZWQsIFRvb2xJbnB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkLCBUb29sT3V0cHV0R3VhcmRyYWlsVHJpcHdpcmVUcmlnZ2VyZWQsIFRvb2xDYWxsRXJyb3IsIFVzZXJFcnJvciwgU3lzdGVtRXJyb3IsIH0gZnJvbSBcIi4vZXJyb3JzLm1qc1wiO1xuZXhwb3J0IHsgUnVuQWdlbnRVcGRhdGVkU3RyZWFtRXZlbnQsIFJ1blJhd01vZGVsU3RyZWFtRXZlbnQsIFJ1bkl0ZW1TdHJlYW1FdmVudCwgfSBmcm9tIFwiLi9ldmVudHMubWpzXCI7XG5leHBvcnQgeyBkZWZpbmVPdXRwdXRHdWFyZHJhaWwsIH0gZnJvbSBcIi4vZ3VhcmRyYWlsLm1qc1wiO1xuZXhwb3J0IHsgVG9vbEd1YXJkcmFpbEZ1bmN0aW9uT3V0cHV0RmFjdG9yeSwgZGVmaW5lVG9vbElucHV0R3VhcmRyYWlsLCBkZWZpbmVUb29sT3V0cHV0R3VhcmRyYWlsLCByZXNvbHZlVG9vbElucHV0R3VhcmRyYWlscywgcmVzb2x2ZVRvb2xPdXRwdXRHdWFyZHJhaWxzLCB9IGZyb20gXCIuL3Rvb2xHdWFyZHJhaWwubWpzXCI7XG5leHBvcnQgeyBnZXRIYW5kb2ZmLCBnZXRUcmFuc2Zlck1lc3NhZ2UsIEhhbmRvZmYsIGhhbmRvZmYsIH0gZnJvbSBcIi4vaGFuZG9mZi5tanNcIjtcbmV4cG9ydCB7IGFzc2lzdGFudCwgc3lzdGVtLCB1c2VyIH0gZnJvbSBcIi4vaGVscGVycy9tZXNzYWdlLm1qc1wiO1xuZXhwb3J0IHsgZXh0cmFjdEFsbFRleHRPdXRwdXQsIFJ1bkhhbmRvZmZDYWxsSXRlbSwgUnVuSGFuZG9mZk91dHB1dEl0ZW0sIFJ1bk1lc3NhZ2VPdXRwdXRJdGVtLCBSdW5SZWFzb25pbmdJdGVtLCBSdW5Ub29sQXBwcm92YWxJdGVtLCBSdW5Ub29sQ2FsbEl0ZW0sIFJ1blRvb2xDYWxsT3V0cHV0SXRlbSwgfSBmcm9tIFwiLi9pdGVtcy5tanNcIjtcbmV4cG9ydCB7IEFnZW50SG9va3MgfSBmcm9tIFwiLi9saWZlY3ljbGUubWpzXCI7XG5leHBvcnQgeyBnZXRMb2dnZXIgfSBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5leHBvcnQgeyBhcHBseURpZmYgfSBmcm9tIFwiLi91dGlscy9hcHBseURpZmYubWpzXCI7XG5leHBvcnQgeyBnZXRBbGxNY3BUb29scywgaW52YWxpZGF0ZVNlcnZlclRvb2xzQ2FjaGUsIG1jcFRvRnVuY3Rpb25Ub29sLCBNQ1BTZXJ2ZXJTdGRpbywgTUNQU2VydmVyU3RyZWFtYWJsZUh0dHAsIE1DUFNlcnZlclNTRSwgfSBmcm9tIFwiLi9tY3AubWpzXCI7XG5leHBvcnQgeyBjcmVhdGVNQ1BUb29sU3RhdGljRmlsdGVyLCB9IGZyb20gXCIuL21jcFV0aWwubWpzXCI7XG5leHBvcnQgeyBPUEVOQUlfREVGQVVMVF9NT0RFTF9FTlZfVkFSSUFCTEVfTkFNRSwgZ3B0NVJlYXNvbmluZ1NldHRpbmdzUmVxdWlyZWQsIGdldERlZmF1bHRNb2RlbCwgZ2V0RGVmYXVsdE1vZGVsU2V0dGluZ3MsIGlzR3B0NURlZmF1bHQsIH0gZnJvbSBcIi4vZGVmYXVsdE1vZGVsLm1qc1wiO1xuZXhwb3J0IHsgc2V0RGVmYXVsdE1vZGVsUHJvdmlkZXIgfSBmcm9tIFwiLi9wcm92aWRlcnMubWpzXCI7XG5leHBvcnQgeyBSdW5SZXN1bHQsIFN0cmVhbWVkUnVuUmVzdWx0IH0gZnJvbSBcIi4vcmVzdWx0Lm1qc1wiO1xuZXhwb3J0IHsgcnVuLCBSdW5uZXIsIH0gZnJvbSBcIi4vcnVuLm1qc1wiO1xuZXhwb3J0IHsgUnVuQ29udGV4dCB9IGZyb20gXCIuL3J1bkNvbnRleHQubWpzXCI7XG5leHBvcnQgeyBSdW5TdGF0ZSB9IGZyb20gXCIuL3J1blN0YXRlLm1qc1wiO1xuZXhwb3J0IHsgY29tcHV0ZXJUb29sLCBzaGVsbFRvb2wsIGFwcGx5UGF0Y2hUb29sLCBob3N0ZWRNY3BUb29sLCB0b29sLCB9IGZyb20gXCIuL3Rvb2wubWpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi90cmFjaW5nL2luZGV4Lm1qc1wiO1xuZXhwb3J0IHsgZ2V0R2xvYmFsVHJhY2VQcm92aWRlciwgVHJhY2VQcm92aWRlciB9IGZyb20gXCIuL3RyYWNpbmcvcHJvdmlkZXIubWpzXCI7XG5leHBvcnQgeyBydW5Ub29sSW5wdXRHdWFyZHJhaWxzLCBydW5Ub29sT3V0cHV0R3VhcmRyYWlscywgfSBmcm9tIFwiLi91dGlscy90b29sR3VhcmRyYWlscy5tanNcIjtcbmV4cG9ydCB7IFJlcXVlc3RVc2FnZSwgVXNhZ2UgfSBmcm9tIFwiLi91c2FnZS5tanNcIjtcbmV4cG9ydCB7IGlzT3BlbkFJUmVzcG9uc2VzQ29tcGFjdGlvbkF3YXJlU2Vzc2lvbiB9IGZyb20gXCIuL21lbW9yeS9zZXNzaW9uLm1qc1wiO1xuZXhwb3J0IHsgTWVtb3J5U2Vzc2lvbiB9IGZyb20gXCIuL21lbW9yeS9tZW1vcnlTZXNzaW9uLm1qc1wiO1xuZXhwb3J0ICogYXMgcHJvdG9jb2wgZnJvbSBcIi4vdHlwZXMvcHJvdG9jb2wubWpzXCI7XG4vKipcbiAqIEFkZCB0aGUgZGVmYXVsdCBwcm9jZXNzb3IsIHdoaWNoIGV4cG9ydHMgdHJhY2VzIGFuZCBzcGFucyB0byB0aGUgYmFja2VuZCBpbiBiYXRjaGVzLiBZb3UgY2FuXG4gKiBjaGFuZ2UgdGhlIGRlZmF1bHQgYmVoYXZpb3IgYnkgZWl0aGVyOlxuICogMS4gY2FsbGluZyBhZGRUcmFjZVByb2Nlc3Nvciwgd2hpY2ggYWRkcyBhZGRpdGlvbmFsIHByb2Nlc3NvcnMsIG9yXG4gKiAyLiBjYWxsaW5nIHNldFRyYWNlUHJvY2Vzc29ycywgd2hpY2ggc2V0cyB0aGUgcHJvY2Vzc29ycyBhbmQgZGlzY2FyZHMgdGhlIGRlZmF1bHQgb25lXG4gKi9cbmFkZFRyYWNlUHJvY2Vzc29yKGRlZmF1bHRQcm9jZXNzb3IoKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwIiwiaW1wb3J0IE1FVEFEQVRBIGZyb20gXCIuL21ldGFkYXRhLm1qc1wiO1xuaW1wb3J0IHsgUnVuVG9vbEFwcHJvdmFsSXRlbSB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUnO1xuLyoqXG4gKiBDb252ZXJ0cyBhIGJhc2U2NCBzdHJpbmcgdG8gYW4gQXJyYXlCdWZmZXJcbiAqIEBwYXJhbSB7c3RyaW5nfSBiYXNlNjRcbiAqIEByZXR1cm5zIHtBcnJheUJ1ZmZlcn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJhc2U2NFRvQXJyYXlCdWZmZXIoYmFzZTY0KSB7XG4gICAgY29uc3QgYmluYXJ5U3RyaW5nID0gYXRvYihiYXNlNjQpO1xuICAgIGNvbnN0IGxlbiA9IGJpbmFyeVN0cmluZy5sZW5ndGg7XG4gICAgY29uc3QgYnl0ZXMgPSBuZXcgVWludDhBcnJheShsZW4pO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgYnl0ZXNbaV0gPSBiaW5hcnlTdHJpbmcuY2hhckNvZGVBdChpKTtcbiAgICB9XG4gICAgcmV0dXJuIGJ5dGVzLmJ1ZmZlcjtcbn1cbi8qKlxuICogQ29udmVydHMgYW4gQXJyYXlCdWZmZXIgdG8gYSBiYXNlNjQgc3RyaW5nXG4gKiBAcGFyYW0ge0FycmF5QnVmZmVyfSBhcnJheUJ1ZmZlclxuICogQHJldHVybnMge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFycmF5QnVmZmVyVG9CYXNlNjQoYXJyYXlCdWZmZXIpIHtcbiAgICBjb25zdCBiaW5hcnlTdHJpbmcgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKC4uLm5ldyBVaW50OEFycmF5KGFycmF5QnVmZmVyKSk7XG4gICAgcmV0dXJuIGJ0b2EoYmluYXJ5U3RyaW5nKTtcbn1cbi8qKlxuICogR2V0IHRoZSBsYXN0IHRleHQgZnJvbSBhbiBhdWRpbyBvdXRwdXQgbWVzc2FnZVxuICogQHBhcmFtIGl0ZW1cbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRMYXN0VGV4dEZyb21BdWRpb091dHB1dE1lc3NhZ2UoaXRlbSkge1xuICAgIGlmICh0eXBlb2YgaXRlbSA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgaXRlbSA9PT0gbnVsbCB8fFxuICAgICAgICB0eXBlb2YgaXRlbSAhPT0gJ29iamVjdCcgfHxcbiAgICAgICAgISgndHlwZScgaW4gaXRlbSkgfHxcbiAgICAgICAgdHlwZW9mIGl0ZW0udHlwZSAhPT0gJ3N0cmluZycgfHxcbiAgICAgICAgIWl0ZW0udHlwZSkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAoaXRlbS50eXBlICE9PSAnbWVzc2FnZScpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKCEoJ2NvbnRlbnQnIGluIGl0ZW0pIHx8XG4gICAgICAgICFBcnJheS5pc0FycmF5KGl0ZW0uY29udGVudCkgfHxcbiAgICAgICAgaXRlbS5jb250ZW50Lmxlbmd0aCA8IDEpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3QgbGFzdENvbnRlbnRJdGVtID0gaXRlbS5jb250ZW50W2l0ZW0uY29udGVudC5sZW5ndGggLSAxXTtcbiAgICBpZiAoISgndHlwZScgaW4gbGFzdENvbnRlbnRJdGVtKSB8fFxuICAgICAgICB0eXBlb2YgbGFzdENvbnRlbnRJdGVtLnR5cGUgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmIChsYXN0Q29udGVudEl0ZW0udHlwZSA9PT0gJ291dHB1dF90ZXh0Jykge1xuICAgICAgICByZXR1cm4gdHlwZW9mIGxhc3RDb250ZW50SXRlbS50ZXh0ID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgPyBsYXN0Q29udGVudEl0ZW0udGV4dFxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmIChsYXN0Q29udGVudEl0ZW0udHlwZSA9PT0gJ291dHB1dF9hdWRpbycpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBsYXN0Q29udGVudEl0ZW0udHJhbnNjcmlwdCA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgID8gbGFzdENvbnRlbnRJdGVtLnRyYW5zY3JpcHRcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufVxuLyoqXG4gKiBDb21wYXJlIHR3byBjb252ZXJzYXRpb24gaGlzdG9yaWVzIHRvIGRldGVybWluZSB0aGUgcmVtb3ZhbHMsIGFkZGl0aW9ucywgYW5kIHVwZGF0ZXMuXG4gKiBAcGFyYW0gb2xkSGlzdG9yeSAtIFRoZSBvbGQgaGlzdG9yeS5cbiAqIEBwYXJhbSBuZXdIaXN0b3J5IC0gVGhlIG5ldyBoaXN0b3J5LlxuICogQHJldHVybnMgQSBkaWZmIG9mIHRoZSB0d28gaGlzdG9yaWVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGlmZlJlYWx0aW1lSGlzdG9yeShvbGRIaXN0b3J5LCBuZXdIaXN0b3J5KSB7XG4gICAgY29uc3QgcmVtb3ZhbHMgPSBvbGRIaXN0b3J5LmZpbHRlcigoaXRlbSkgPT4gIW5ld0hpc3Rvcnkuc29tZSgobmV3SXRlbSkgPT4gbmV3SXRlbS5pdGVtSWQgPT09IGl0ZW0uaXRlbUlkKSk7XG4gICAgY29uc3QgYWRkaXRpb25zID0gbmV3SGlzdG9yeS5maWx0ZXIoKGl0ZW0pID0+ICFvbGRIaXN0b3J5LnNvbWUoKG9sZEl0ZW0pID0+IG9sZEl0ZW0uaXRlbUlkID09PSBpdGVtLml0ZW1JZCkpO1xuICAgIGNvbnN0IHVwZGF0ZXMgPSBuZXdIaXN0b3J5LmZpbHRlcigoaXRlbSkgPT4gb2xkSGlzdG9yeS5zb21lKChvbGRJdGVtKSA9PiBvbGRJdGVtLml0ZW1JZCA9PT0gaXRlbS5pdGVtSWQgJiZcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkob2xkSXRlbSkgIT09IEpTT04uc3RyaW5naWZ5KGl0ZW0pKSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVtb3ZhbHMsXG4gICAgICAgIGFkZGl0aW9ucyxcbiAgICAgICAgdXBkYXRlcyxcbiAgICB9O1xufVxuLyoqXG4gKiBDaGVjayBpZiB0aGUgYnJvd3NlciBzdXBwb3J0cyBXZWJSVEMuXG4gKiBAcmV0dXJucyBUcnVlIGlmIFdlYlJUQyBpcyBzdXBwb3J0ZWQsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhc1dlYlJUQ1N1cHBvcnQoKSB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHR5cGVvZiB3aW5kb3dbJ1JUQ1BlZXJDb25uZWN0aW9uJ10gIT09ICd1bmRlZmluZWQnO1xufVxuLyoqXG4gKiBSZW1vdmVzIHRoZSBhdWRpbyBkYXRhIGZyb20gYWxsIGNvbnRlbnQgaW4gYSBtZXNzYWdlIGJ5IHNldHRpbmcgaXQgdG8gbnVsbC5cbiAqIEBwYXJhbSBpdGVtXG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlQXVkaW9Gcm9tQ29udGVudChpdGVtKSB7XG4gICAgaWYgKGl0ZW0ucm9sZSA9PT0gJ3N5c3RlbScpIHtcbiAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgfVxuICAgIGlmIChpdGVtLnJvbGUgPT09ICdhc3Npc3RhbnQnKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5pdGVtLFxuICAgICAgICAgICAgY29udGVudDogaXRlbS5jb250ZW50Lm1hcCgoZW50cnkpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZW50cnkudHlwZSA9PT0gJ291dHB1dF9hdWRpbycpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmVudHJ5LFxuICAgICAgICAgICAgICAgICAgICAgICAgYXVkaW86IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBlbnRyeTtcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAoaXRlbS5yb2xlID09PSAndXNlcicpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLml0ZW0sXG4gICAgICAgICAgICBjb250ZW50OiBpdGVtLmNvbnRlbnQubWFwKChlbnRyeSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlbnRyeS50eXBlID09PSAnaW5wdXRfYXVkaW8nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5lbnRyeSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1ZGlvOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZW50cnk7XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGl0ZW07XG59XG4vLyBSZWFsdGltZSBjYW4gcmVzZW5kIHRydW5jYXRlZCBhc3Npc3RhbnQgaXRlbXMgd2l0aG91dCB0cmFuc2NyaXB0cyBhZnRlciBhblxuLy8gaW50ZXJydXB0L3JldHJpZXZlIGN5Y2xlLiBUaGlzIGhlbHBlciBtZXJnZXMgdGhvc2UgdXBkYXRlcyB3aXRoIHRoZSBsYXRlc3Rcbi8vIGtub3duIHRyYW5zY3JpcHQgc28gVUlzIHJldGFpbiB0aGUgcG9ydGlvbiBvZiB0aGUgbWVzc2FnZSB0aGUgdXNlciBhbHJlYWR5XG4vLyBoZWFyZC5cbmZ1bmN0aW9uIHByZXNlcnZlQXNzaXN0YW50QXVkaW9UcmFuc2NyaXB0cyhleGlzdGluZywgaW5jb21pbmcpIHtcbiAgICBpZiAoZXhpc3Rpbmcucm9sZSAhPT0gJ2Fzc2lzdGFudCcgfHwgaW5jb21pbmcucm9sZSAhPT0gJ2Fzc2lzdGFudCcpIHtcbiAgICAgICAgcmV0dXJuIGluY29taW5nO1xuICAgIH1cbiAgICBjb25zdCBtZXJnZWRDb250ZW50ID0gaW5jb21pbmcuY29udGVudC5tYXAoKGVudHJ5LCBpbmRleCkgPT4ge1xuICAgICAgICBpZiAoZW50cnkudHlwZSAhPT0gJ291dHB1dF9hdWRpbycpIHtcbiAgICAgICAgICAgIHJldHVybiBlbnRyeTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0cmFuc2NyaXB0TWlzc2luZyA9IHR5cGVvZiBlbnRyeS50cmFuc2NyaXB0ICE9PSAnc3RyaW5nJyB8fCBlbnRyeS50cmFuc2NyaXB0Lmxlbmd0aCA9PT0gMDtcbiAgICAgICAgaWYgKCF0cmFuc2NyaXB0TWlzc2luZykge1xuICAgICAgICAgICAgcmV0dXJuIGVudHJ5O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByZXZpb3VzRW50cnkgPSBleGlzdGluZy5jb250ZW50W2luZGV4XTtcbiAgICAgICAgaWYgKHByZXZpb3VzRW50cnkgJiZcbiAgICAgICAgICAgIHByZXZpb3VzRW50cnkudHlwZSA9PT0gJ291dHB1dF9hdWRpbycgJiZcbiAgICAgICAgICAgIHR5cGVvZiBwcmV2aW91c0VudHJ5LnRyYW5zY3JpcHQgPT09ICdzdHJpbmcnICYmXG4gICAgICAgICAgICBwcmV2aW91c0VudHJ5LnRyYW5zY3JpcHQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi5lbnRyeSxcbiAgICAgICAgICAgICAgICB0cmFuc2NyaXB0OiBwcmV2aW91c0VudHJ5LnRyYW5zY3JpcHQsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbnRyeTtcbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgICAuLi5pbmNvbWluZyxcbiAgICAgICAgY29udGVudDogbWVyZ2VkQ29udGVudCxcbiAgICB9O1xufVxuLyoqXG4gKiBVcGRhdGVzIHRoZSByZWFsdGltZSBoaXN0b3J5IGFycmF5IGJhc2VkIG9uIHRoZSBpbmNvbWluZyBldmVudCBhbmQgb3B0aW9ucy5cbiAqIEBwYXJhbSBoaXN0b3J5IC0gVGhlIGN1cnJlbnQgaGlzdG9yeSBhcnJheS5cbiAqIEBwYXJhbSBldmVudCAtIFRoZSBldmVudCB0byBwcm9jZXNzIChSZWFsdGltZUl0ZW0pLlxuICogQHBhcmFtIHNob3VsZEluY2x1ZGVBdWRpb0RhdGEgLSBXaGV0aGVyIHRvIGluY2x1ZGUgYXVkaW8gZGF0YSBpbiBtZXNzYWdlIGl0ZW1zLlxuICogQHJldHVybnMgVGhlIHVwZGF0ZWQgaGlzdG9yeSBhcnJheS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVJlYWx0aW1lSGlzdG9yeShoaXN0b3J5LCBldmVudCwgc2hvdWxkSW5jbHVkZUF1ZGlvRGF0YSkge1xuICAgIC8vIE1lcmdlIHRyYW5zY3JpcHQgaW50byBwbGFjZWhvbGRlciBpbnB1dF9hdWRpbyBtZXNzYWdlXG4gICAgaWYgKGV2ZW50LnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS5pbnB1dF9hdWRpb190cmFuc2NyaXB0aW9uLmNvbXBsZXRlZCcpIHtcbiAgICAgICAgcmV0dXJuIGhpc3RvcnkubWFwKChpdGVtKSA9PiB7XG4gICAgICAgICAgICBpZiAoaXRlbS5pdGVtSWQgPT09IGV2ZW50Lml0ZW1faWQgJiZcbiAgICAgICAgICAgICAgICBpdGVtLnR5cGUgPT09ICdtZXNzYWdlJyAmJlxuICAgICAgICAgICAgICAgICdyb2xlJyBpbiBpdGVtICYmXG4gICAgICAgICAgICAgICAgaXRlbS5yb2xlID09PSAndXNlcicpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkQ29udGVudCA9IGl0ZW0uY29udGVudC5tYXAoKGVudHJ5KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbnRyeS50eXBlID09PSAnaW5wdXRfYXVkaW8nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmVudHJ5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zY3JpcHQ6IGV2ZW50LnRyYW5zY3JpcHQsXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlbnRyeTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAuLi5pdGVtLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiB1cGRhdGVkQ29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnY29tcGxldGVkJyxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBuZXdFdmVudCA9ICFzaG91bGRJbmNsdWRlQXVkaW9EYXRhICYmIGV2ZW50LnR5cGUgPT09ICdtZXNzYWdlJ1xuICAgICAgICA/IHJlbW92ZUF1ZGlvRnJvbUNvbnRlbnQoZXZlbnQpXG4gICAgICAgIDogZXZlbnQ7XG4gICAgY29uc3QgZXhpc3RpbmdJbmRleCA9IGhpc3RvcnkuZmluZEluZGV4KChpdGVtKSA9PiBpdGVtLml0ZW1JZCA9PT0gZXZlbnQuaXRlbUlkKTtcbiAgICBpZiAoZXhpc3RpbmdJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgY29uc3QgZXhpc3RpbmdJdGVtID0gaGlzdG9yeVtleGlzdGluZ0luZGV4XTtcbiAgICAgICAgY29uc3QgbWVyZ2VkRXZlbnQgPSBuZXdFdmVudC50eXBlID09PSAnbWVzc2FnZScgJiYgZXhpc3RpbmdJdGVtLnR5cGUgPT09ICdtZXNzYWdlJ1xuICAgICAgICAgICAgPyBwcmVzZXJ2ZUFzc2lzdGFudEF1ZGlvVHJhbnNjcmlwdHMoZXhpc3RpbmdJdGVtLCBuZXdFdmVudClcbiAgICAgICAgICAgIDogbmV3RXZlbnQ7XG4gICAgICAgIC8vIFVwZGF0ZSBleGlzdGluZyBpdGVtXG4gICAgICAgIHJldHVybiBoaXN0b3J5Lm1hcCgoaXRlbSwgaWR4KSA9PiB7XG4gICAgICAgICAgICBpZiAoaWR4ID09PSBleGlzdGluZ0luZGV4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lcmdlZEV2ZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFzaG91bGRJbmNsdWRlQXVkaW9EYXRhICYmIGl0ZW0udHlwZSA9PT0gJ21lc3NhZ2UnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlbW92ZUF1ZGlvRnJvbUNvbnRlbnQoaXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGV2ZW50LnByZXZpb3VzSXRlbUlkKSB7XG4gICAgICAgIC8vIEluc2VydCBhZnRlciBwcmV2aW91c0l0ZW1JZCBpZiBmb3VuZCwgZWxzZSBhdCBlbmRcbiAgICAgICAgY29uc3QgcHJldkluZGV4ID0gaGlzdG9yeS5maW5kSW5kZXgoKGl0ZW0pID0+IGl0ZW0uaXRlbUlkID09PSBldmVudC5wcmV2aW91c0l0ZW1JZCk7XG4gICAgICAgIGlmIChwcmV2SW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgIC4uLmhpc3Rvcnkuc2xpY2UoMCwgcHJldkluZGV4ICsgMSksXG4gICAgICAgICAgICAgICAgbmV3RXZlbnQsXG4gICAgICAgICAgICAgICAgLi4uaGlzdG9yeS5zbGljZShwcmV2SW5kZXggKyAxKSxcbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gWy4uLmhpc3RvcnksIG5ld0V2ZW50XTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFsuLi5oaXN0b3J5LCBuZXdFdmVudF07XG4gICAgfVxufVxuLyoqXG4gKiBUaGUgaGVhZGVycyB0byB1c2UgZm9yIHRoZSBSZWFsdGltZSBBUEkuXG4gKi9cbmV4cG9ydCBjb25zdCBIRUFERVJTID0ge1xuICAgICdVc2VyLUFnZW50JzogYEFnZW50cy9KYXZhU2NyaXB0ICR7TUVUQURBVEEudmVyc2lvbn1gLFxuICAgICdYLU9wZW5BSS1BZ2VudHMtU0RLJzogYG9wZW5haS1hZ2VudHMtc2RrLiR7TUVUQURBVEEudmVyc2lvbn1gLFxufTtcbi8qKlxuICogQnJvd3NlciB3ZWJzb2NrZXQgaGVhZGVyXG4gKi9cbmV4cG9ydCBjb25zdCBXRUJTT0NLRVRfTUVUQSA9IGBvcGVuYWktYWdlbnRzLXNkay4ke01FVEFEQVRBLnZlcnNpb259YDtcbmV4cG9ydCBmdW5jdGlvbiByZWFsdGltZUFwcHJvdmFsSXRlbVRvQXBwcm92YWxJdGVtKGFnZW50LCBpdGVtKSB7XG4gICAgY29uc3QgeyBuYW1lLCBhcmd1bWVudHM6IGFyZ3MsIC4uLnJlc3QgfSA9IGl0ZW07XG4gICAgcmV0dXJuIG5ldyBSdW5Ub29sQXBwcm92YWxJdGVtKHtcbiAgICAgICAgdHlwZTogJ2hvc3RlZF90b29sX2NhbGwnLFxuICAgICAgICBuYW1lLFxuICAgICAgICBhcmd1bWVudHM6IEpTT04uc3RyaW5naWZ5KGFyZ3MpLFxuICAgICAgICBzdGF0dXM6ICdpbl9wcm9ncmVzcycsXG4gICAgICAgIHByb3ZpZGVyRGF0YToge1xuICAgICAgICAgICAgLi4ucmVzdCxcbiAgICAgICAgfSxcbiAgICB9LCBhZ2VudCk7XG59XG5leHBvcnQgZnVuY3Rpb24gYXBwcm92YWxJdGVtVG9SZWFsdGltZUFwcHJvdmFsSXRlbShpdGVtKSB7XG4gICAgaWYgKGl0ZW0ucmF3SXRlbS50eXBlICE9PSAnZnVuY3Rpb25fY2FsbCcgJiZcbiAgICAgICAgaXRlbS5yYXdJdGVtLnR5cGUgIT09ICdob3N0ZWRfdG9vbF9jYWxsJykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgYXBwcm92YWwgaXRlbSB0eXBlIGZvciBSZWFsdGltZSBNQ1AgYXBwcm92YWwgcmVxdWVzdCcpO1xuICAgIH1cbiAgICBjb25zdCB7IG5hbWUsIGFyZ3VtZW50czogYXJncywgcHJvdmlkZXJEYXRhIH0gPSBpdGVtLnJhd0l0ZW07XG4gICAgY29uc3QgeyBpdGVtSWQsIHNlcnZlckxhYmVsLCAuLi5yZXN0IH0gPSBwcm92aWRlckRhdGEgPz8ge307XG4gICAgaWYgKCFpdGVtSWQgfHwgIXNlcnZlckxhYmVsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBhcHByb3ZhbCBpdGVtIGZvciBSZWFsdGltZSBNQ1AgYXBwcm92YWwgcmVxdWVzdCcpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnbWNwX2FwcHJvdmFsX3JlcXVlc3QnLFxuICAgICAgICBpdGVtSWQsXG4gICAgICAgIHNlcnZlckxhYmVsLFxuICAgICAgICAuLi5yZXN0LFxuICAgICAgICBuYW1lLFxuICAgICAgICBhcmd1bWVudHM6IGFyZ3MgPyBKU09OLnBhcnNlKGFyZ3MpIDoge30sXG4gICAgICAgIGFwcHJvdmVkOiBudWxsLFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD11dGlscy5tanMubWFwIiwiaW1wb3J0IHsgQWdlbnQsIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZSc7XG4vKipcbiAqIEEgc3BlY2lhbGl6ZWQgYWdlbnQgaW5zdGFuY2UgdGhhdCBpcyBtZWFudCB0byBiZSB1c2VkIHdpdGhpbiBhIGBSZWFsdGltZVNlc3Npb25gIHRvIGJ1aWxkXG4gKiB2b2ljZSBhZ2VudHMuIER1ZSB0byB0aGUgbmF0dXJlIG9mIHRoaXMgYWdlbnQsIHNvbWUgY29uZmlndXJhdGlvbiBvcHRpb25zIGFyZSBub3Qgc3VwcG9ydGVkXG4gKiB0aGF0IGFyZSBzdXBwb3J0ZWQgYnkgcmVndWxhciBgQWdlbnRgIGluc3RhbmNlcy4gRm9yIGV4YW1wbGU6XG4gKiAtIGBtb2RlbGAgY2hvaWNlIGlzIG5vdCBzdXBwb3J0ZWQgYXMgYWxsIFJlYWx0aW1lQWdlbnRzIHdpbGwgYmUgaGFuZGxlZCBieSB0aGUgc2FtZSBtb2RlbCB3aXRoaW5cbiAqICAgYSBgUmVhbHRpbWVTZXNzaW9uYFxuICogLSBgbW9kZWxTZXR0aW5nc2AgaXMgbm90IHN1cHBvcnRlZCBhcyBhbGwgUmVhbHRpbWVBZ2VudHMgd2lsbCBiZSBoYW5kbGVkIGJ5IHRoZSBzYW1lIG1vZGVsIHdpdGhpblxuICogICBhIGBSZWFsdGltZVNlc3Npb25gXG4gKiAtIGBvdXRwdXRUeXBlYCBpcyBub3Qgc3VwcG9ydGVkIGFzIFJlYWx0aW1lQWdlbnRzIGRvIG5vdCBzdXBwb3J0IHN0cnVjdHVyZWQgb3V0cHV0c1xuICogLSBgdG9vbFVzZUJlaGF2aW9yYCBpcyBub3Qgc3VwcG9ydGVkIGFzIGFsbCBSZWFsdGltZUFnZW50cyB3aWxsIGJlIGhhbmRsZWQgYnkgdGhlIHNhbWUgbW9kZWwgd2l0aGluXG4gKiAgIGEgYFJlYWx0aW1lU2Vzc2lvbmBcbiAqIC0gYHZvaWNlYCBjYW4gYmUgY29uZmlndXJlZCBvbiBhbiBgQWdlbnRgIGxldmVsIGhvd2V2ZXIgaXQgY2Fubm90IGJlIGNoYW5nZWQgYWZ0ZXIgdGhlIGZpcnN0XG4gKiAgICBhZ2VudCB3aXRoaW4gYSBgUmVhbHRpbWVTZXNzaW9uYCBzcG9rZVxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogY29uc3QgYWdlbnQgPSBuZXcgUmVhbHRpbWVBZ2VudCh7XG4gKiAgIG5hbWU6ICdteS1hZ2VudCcsXG4gKiAgIGluc3RydWN0aW9uczogJ1lvdSBhcmUgYSBoZWxwZnVsIGFzc2lzdGFudCB0aGF0IGNhbiBhbnN3ZXIgcXVlc3Rpb25zIGFuZCBoZWxwIHdpdGggdGFza3MuJyxcbiAqIH0pXG4gKlxuICogY29uc3Qgc2Vzc2lvbiA9IG5ldyBSZWFsdGltZVNlc3Npb24oYWdlbnQpO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBSZWFsdGltZUFnZW50IGV4dGVuZHMgQWdlbnQge1xuICAgIC8qKlxuICAgICAqIFRoZSB2b2ljZSBpbnRlbmRlZCB0byBiZSB1c2VkIGJ5IHRoZSBhZ2VudC4gSWYgYW5vdGhlciBhZ2VudCBhbHJlYWR5IHNwb2tlIGR1cmluZyB0aGVcbiAgICAgKiBSZWFsdGltZVNlc3Npb24sIGNoYW5naW5nIHRoZSB2b2ljZSBkdXJpbmcgYSBoYW5kb2ZmIHdpbGwgZmFpbC5cbiAgICAgKi9cbiAgICB2b2ljZTtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICAgICAgc3VwZXIoY29uZmlnKTtcbiAgICAgICAgdGhpcy52b2ljZSA9IGNvbmZpZy52b2ljZTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZWFsdGltZUFnZW50Lm1qcy5tYXAiLCJpbXBvcnQgeyBkZWZpbmVPdXRwdXRHdWFyZHJhaWwsIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZSc7XG5leHBvcnQgZnVuY3Rpb24gZ2V0UmVhbHRpbWVHdWFyZHJhaWxTZXR0aW5ncyhzZXR0aW5ncykge1xuICAgIHJldHVybiB7XG4gICAgICAgIGRlYm91bmNlVGV4dExlbmd0aDogc2V0dGluZ3MuZGVib3VuY2VUZXh0TGVuZ3RoID8/IDEwMCxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGRlZmluZVJlYWx0aW1lT3V0cHV0R3VhcmRyYWlsKHsgcG9saWN5SGludDogcG9saWN5SGludElucHV0LCAuLi5vcHRpb25zIH0pIHtcbiAgICBjb25zdCBiYXNlR3VhcmRyYWlsID0gZGVmaW5lT3V0cHV0R3VhcmRyYWlsKG9wdGlvbnMpO1xuICAgIGNvbnN0IHBvbGljeUhpbnQgPSBwb2xpY3lIaW50SW5wdXQgPz8gYmFzZUd1YXJkcmFpbC5uYW1lO1xuICAgIHJldHVybiB7XG4gICAgICAgIC4uLmJhc2VHdWFyZHJhaWwsXG4gICAgICAgIHBvbGljeUhpbnQsXG4gICAgICAgIHJ1bjogYXN5bmMgKGFyZ3MpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGJhc2VHdWFyZHJhaWwucnVuKGFyZ3MpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi5yZXN1bHQsXG4gICAgICAgICAgICAgICAgZ3VhcmRyYWlsOiB7IC4uLnJlc3VsdC5ndWFyZHJhaWwsIHBvbGljeUhpbnQgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgfTtcbn1cbi8qKlxuICogR2VuZXJhdGVzIGEgbWVzc2FnZSB0aGF0IGluZm9ybXMgdGhlIG1vZGVsIGFib3V0IHdoeSB0aGUgZ3VhcmRyYWlsIHdhcyB0cmlnZ2VyZWQgYW5kIHRvXG4gKiBjb3JyZWN0IHRoZSBiZWhhdmlvci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFJlYWx0aW1lR3VhcmRyYWlsRmVlZGJhY2tNZXNzYWdlKHJlc3VsdCkge1xuICAgIHJldHVybiBgXG7imqDvuI8gWW91ciBsYXN0IGFuc3dlciB3YXMgYmxvY2tlZC4gXG5GYWlsZWQgR3VhcmRyYWlsIFJlYXNvbjogJHtyZXN1bHQuZ3VhcmRyYWlsLnBvbGljeUhpbnR9LiBcbkZhaWx1cmUgRGV0YWlsczogJHtKU09OLnN0cmluZ2lmeShyZXN1bHQub3V0cHV0Lm91dHB1dEluZm8gPz8ge30pfS4gXG5QbGVhc2UgcmVzcG9uZCBhZ2FpbiBmb2xsb3dpbmcgcG9saWN5LiBBcG9sb2dpemUgZm9yIG5vdCBiZWluZyBhYmxlIHRvIGFuc3dlciB0aGUgcXVlc3Rpb24gKHdoaWxlIGF2b2lkaW5nIHRoZSBzcGVjaWZpYyByZWFzb24pIGFuZCBkaXZlcnQgZGlzY3Vzc2lvbiBiYWNrIHRvIGFuIGFwcHJvdmVkIHRvcGljIGltbWVkaWF0ZWx5IGFuZCBub3QgaW52aXRlIG1vcmUgZGlzY3Vzc2lvbi5cbmAudHJpbSgpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z3VhcmRyYWlsLm1qcy5tYXAiLCJmdW5jdGlvbiBpc0RlZmluZWQoa2V5LCBvYmplY3QpIHtcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIGZ1ZGdpbmcgd2l0aCB0eXBlcyBoZXJlIGZvciB0aGUgaW5kZXggdHlwZXNcbiAgICByZXR1cm4ga2V5IGluIG9iamVjdCAmJiB0eXBlb2Ygb2JqZWN0W2tleV0gIT09ICd1bmRlZmluZWQnO1xufVxuZnVuY3Rpb24gaXNEZXByZWNhdGVkQ29uZmlnKGNvbmZpZykge1xuICAgIHJldHVybiAoaXNEZWZpbmVkKCdtb2RhbGl0aWVzJywgY29uZmlnKSB8fFxuICAgICAgICBpc0RlZmluZWQoJ2lucHV0QXVkaW9Gb3JtYXQnLCBjb25maWcpIHx8XG4gICAgICAgIGlzRGVmaW5lZCgnb3V0cHV0QXVkaW9Gb3JtYXQnLCBjb25maWcpIHx8XG4gICAgICAgIGlzRGVmaW5lZCgnaW5wdXRBdWRpb1RyYW5zY3JpcHRpb24nLCBjb25maWcpIHx8XG4gICAgICAgIGlzRGVmaW5lZCgndHVybkRldGVjdGlvbicsIGNvbmZpZykgfHxcbiAgICAgICAgaXNEZWZpbmVkKCdpbnB1dEF1ZGlvTm9pc2VSZWR1Y3Rpb24nLCBjb25maWcpIHx8XG4gICAgICAgIGlzRGVmaW5lZCgnc3BlZWQnLCBjb25maWcpKTtcbn1cbi8qKlxuICogQ29udmVydCBhbnkgZ2l2ZW4gY29uZmlnIChvbGQgb3IgbmV3KSB0byB0aGUgbmV3IEdBIGNvbmZpZyBzaGFwZS5cbiAqIElmIGEgbmV3IGNvbmZpZyBpcyBwcm92aWRlZCwgaXQgd2lsbCBiZSByZXR1cm5lZCBhcy1pcyAobm9ybWFsaXplZCBzaGFsbG93bHkpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9OZXdTZXNzaW9uQ29uZmlnKGNvbmZpZykge1xuICAgIGlmICghaXNEZXByZWNhdGVkQ29uZmlnKGNvbmZpZykpIHtcbiAgICAgICAgY29uc3QgaW5wdXRDb25maWcgPSBjb25maWcuYXVkaW8/LmlucHV0XG4gICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICBmb3JtYXQ6IG5vcm1hbGl6ZUF1ZGlvRm9ybWF0KGNvbmZpZy5hdWRpby5pbnB1dC5mb3JtYXQpLFxuICAgICAgICAgICAgICAgIG5vaXNlUmVkdWN0aW9uOiBjb25maWcuYXVkaW8uaW5wdXQubm9pc2VSZWR1Y3Rpb24gPz8gbnVsbCxcbiAgICAgICAgICAgICAgICB0cmFuc2NyaXB0aW9uOiBjb25maWcuYXVkaW8uaW5wdXQudHJhbnNjcmlwdGlvbixcbiAgICAgICAgICAgICAgICB0dXJuRGV0ZWN0aW9uOiBjb25maWcuYXVkaW8uaW5wdXQudHVybkRldGVjdGlvbixcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCByZXF1ZXN0ZWRPdXRwdXRWb2ljZSA9IGNvbmZpZy5hdWRpbz8ub3V0cHV0Py52b2ljZSA/PyBjb25maWcudm9pY2U7XG4gICAgICAgIGNvbnN0IG91dHB1dENvbmZpZyA9IGNvbmZpZy5hdWRpbz8ub3V0cHV0IHx8IHR5cGVvZiByZXF1ZXN0ZWRPdXRwdXRWb2ljZSAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgIGZvcm1hdDogbm9ybWFsaXplQXVkaW9Gb3JtYXQoY29uZmlnLmF1ZGlvPy5vdXRwdXQ/LmZvcm1hdCksXG4gICAgICAgICAgICAgICAgdm9pY2U6IHJlcXVlc3RlZE91dHB1dFZvaWNlLFxuICAgICAgICAgICAgICAgIHNwZWVkOiBjb25maWcuYXVkaW8/Lm91dHB1dD8uc3BlZWQsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1vZGVsOiBjb25maWcubW9kZWwsXG4gICAgICAgICAgICBpbnN0cnVjdGlvbnM6IGNvbmZpZy5pbnN0cnVjdGlvbnMsXG4gICAgICAgICAgICB0b29sQ2hvaWNlOiBjb25maWcudG9vbENob2ljZSxcbiAgICAgICAgICAgIHRvb2xzOiBjb25maWcudG9vbHMsXG4gICAgICAgICAgICB0cmFjaW5nOiBjb25maWcudHJhY2luZyxcbiAgICAgICAgICAgIHByb3ZpZGVyRGF0YTogY29uZmlnLnByb3ZpZGVyRGF0YSxcbiAgICAgICAgICAgIHByb21wdDogY29uZmlnLnByb21wdCxcbiAgICAgICAgICAgIG91dHB1dE1vZGFsaXRpZXM6IGNvbmZpZy5vdXRwdXRNb2RhbGl0aWVzLFxuICAgICAgICAgICAgYXVkaW86IGlucHV0Q29uZmlnIHx8IG91dHB1dENvbmZpZ1xuICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICBpbnB1dDogaW5wdXRDb25maWcsXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dDogb3V0cHV0Q29uZmlnLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbW9kZWw6IGNvbmZpZy5tb2RlbCxcbiAgICAgICAgaW5zdHJ1Y3Rpb25zOiBjb25maWcuaW5zdHJ1Y3Rpb25zLFxuICAgICAgICB0b29sQ2hvaWNlOiBjb25maWcudG9vbENob2ljZSxcbiAgICAgICAgdG9vbHM6IGNvbmZpZy50b29scyxcbiAgICAgICAgdHJhY2luZzogY29uZmlnLnRyYWNpbmcsXG4gICAgICAgIHByb3ZpZGVyRGF0YTogY29uZmlnLnByb3ZpZGVyRGF0YSxcbiAgICAgICAgcHJvbXB0OiBjb25maWcucHJvbXB0LFxuICAgICAgICBvdXRwdXRNb2RhbGl0aWVzOiBjb25maWcubW9kYWxpdGllcyxcbiAgICAgICAgYXVkaW86IHtcbiAgICAgICAgICAgIGlucHV0OiB7XG4gICAgICAgICAgICAgICAgZm9ybWF0OiBub3JtYWxpemVBdWRpb0Zvcm1hdChjb25maWcuaW5wdXRBdWRpb0Zvcm1hdCksXG4gICAgICAgICAgICAgICAgbm9pc2VSZWR1Y3Rpb246IGNvbmZpZy5pbnB1dEF1ZGlvTm9pc2VSZWR1Y3Rpb24gPz8gbnVsbCxcbiAgICAgICAgICAgICAgICB0cmFuc2NyaXB0aW9uOiBjb25maWcuaW5wdXRBdWRpb1RyYW5zY3JpcHRpb24sXG4gICAgICAgICAgICAgICAgdHVybkRldGVjdGlvbjogY29uZmlnLnR1cm5EZXRlY3Rpb24sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb3V0cHV0OiB7XG4gICAgICAgICAgICAgICAgZm9ybWF0OiBub3JtYWxpemVBdWRpb0Zvcm1hdChjb25maWcub3V0cHV0QXVkaW9Gb3JtYXQpLFxuICAgICAgICAgICAgICAgIHZvaWNlOiBjb25maWcudm9pY2UsXG4gICAgICAgICAgICAgICAgc3BlZWQ6IGNvbmZpZy5zcGVlZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVBdWRpb0Zvcm1hdChmb3JtYXQpIHtcbiAgICBpZiAoIWZvcm1hdClcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICBpZiAodHlwZW9mIGZvcm1hdCA9PT0gJ29iamVjdCcpXG4gICAgICAgIHJldHVybiBmb3JtYXQ7XG4gICAgY29uc3QgZiA9IFN0cmluZyhmb3JtYXQpO1xuICAgIGlmIChmID09PSAncGNtMTYnKVxuICAgICAgICByZXR1cm4geyB0eXBlOiAnYXVkaW8vcGNtJywgcmF0ZTogMjQwMDAgfTtcbiAgICBpZiAoZiA9PT0gJ2c3MTFfdWxhdycpXG4gICAgICAgIHJldHVybiB7IHR5cGU6ICdhdWRpby9wY211JyB9O1xuICAgIGlmIChmID09PSAnZzcxMV9hbGF3JylcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogJ2F1ZGlvL3BjbWEnIH07XG4gICAgLy8gRGVmYXVsdCBmYWxsYmFjazogYXNzdW1lIDI0a0h6IFBDTSBpZiB1bmtub3duIHN0cmluZ1xuICAgIHJldHVybiB7IHR5cGU6ICdhdWRpby9wY20nLCByYXRlOiAyNDAwMCB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2xpZW50TWVzc2FnZXMubWpzLm1hcCIsImltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuZXhwb3J0IGNvbnN0IGJhc2VJdGVtU2NoZW1hID0gei5vYmplY3Qoe1xuICAgIGl0ZW1JZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlYWx0aW1lTWVzc2FnZUl0ZW1TY2hlbWEgPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigncm9sZScsIFtcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIGl0ZW1JZDogei5zdHJpbmcoKSxcbiAgICAgICAgcHJldmlvdXNJdGVtSWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ21lc3NhZ2UnKSxcbiAgICAgICAgcm9sZTogei5saXRlcmFsKCdzeXN0ZW0nKSxcbiAgICAgICAgY29udGVudDogei5hcnJheSh6Lm9iamVjdCh7IHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfdGV4dCcpLCB0ZXh0OiB6LnN0cmluZygpIH0pKSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIGl0ZW1JZDogei5zdHJpbmcoKSxcbiAgICAgICAgcHJldmlvdXNJdGVtSWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ21lc3NhZ2UnKSxcbiAgICAgICAgcm9sZTogei5saXRlcmFsKCd1c2VyJyksXG4gICAgICAgIHN0YXR1czogei5lbnVtKFsnaW5fcHJvZ3Jlc3MnLCAnY29tcGxldGVkJ10pLFxuICAgICAgICBjb250ZW50OiB6LmFycmF5KHoub2JqZWN0KHsgdHlwZTogei5saXRlcmFsKCdpbnB1dF90ZXh0JyksIHRleHQ6IHouc3RyaW5nKCkgfSkub3Ioei5vYmplY3Qoe1xuICAgICAgICAgICAgdHlwZTogei5saXRlcmFsKCdpbnB1dF9hdWRpbycpLFxuICAgICAgICAgICAgYXVkaW86IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgICAgICAgICAgdHJhbnNjcmlwdDogei5zdHJpbmcoKS5udWxsYWJsZSgpLFxuICAgICAgICB9KSkpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgaXRlbUlkOiB6LnN0cmluZygpLFxuICAgICAgICBwcmV2aW91c0l0ZW1JZDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnbWVzc2FnZScpLFxuICAgICAgICByb2xlOiB6LmxpdGVyYWwoJ2Fzc2lzdGFudCcpLFxuICAgICAgICBzdGF0dXM6IHouZW51bShbJ2luX3Byb2dyZXNzJywgJ2NvbXBsZXRlZCcsICdpbmNvbXBsZXRlJ10pLFxuICAgICAgICBjb250ZW50OiB6LmFycmF5KHoub2JqZWN0KHsgdHlwZTogei5saXRlcmFsKCdvdXRwdXRfdGV4dCcpLCB0ZXh0OiB6LnN0cmluZygpIH0pLm9yKHoub2JqZWN0KHtcbiAgICAgICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnb3V0cHV0X2F1ZGlvJyksXG4gICAgICAgICAgICBhdWRpbzogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgICAgICAgICB0cmFuc2NyaXB0OiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICAgICAgfSkpKSxcbiAgICB9KSxcbl0pO1xuZXhwb3J0IGNvbnN0IHJlYWx0aW1lVG9vbENhbGxJdGVtID0gei5vYmplY3Qoe1xuICAgIGl0ZW1JZDogei5zdHJpbmcoKSxcbiAgICBwcmV2aW91c0l0ZW1JZDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgdHlwZTogei5saXRlcmFsKCdmdW5jdGlvbl9jYWxsJyksXG4gICAgc3RhdHVzOiB6LmVudW0oWydpbl9wcm9ncmVzcycsICdjb21wbGV0ZWQnLCAnaW5jb21wbGV0ZSddKSxcbiAgICBhcmd1bWVudHM6IHouc3RyaW5nKCksXG4gICAgbmFtZTogei5zdHJpbmcoKSxcbiAgICBvdXRwdXQ6IHouc3RyaW5nKCkubnVsbGFibGUoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlYWx0aW1lTWNwQ2FsbEl0ZW0gPSB6Lm9iamVjdCh7XG4gICAgaXRlbUlkOiB6LnN0cmluZygpLFxuICAgIHByZXZpb3VzSXRlbUlkOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICB0eXBlOiB6LmVudW0oWydtY3BfY2FsbCcsICdtY3BfdG9vbF9jYWxsJ10pLFxuICAgIHN0YXR1czogei5lbnVtKFsnaW5fcHJvZ3Jlc3MnLCAnY29tcGxldGVkJywgJ2luY29tcGxldGUnXSksXG4gICAgYXJndW1lbnRzOiB6LnN0cmluZygpLFxuICAgIG5hbWU6IHouc3RyaW5nKCksXG4gICAgb3V0cHV0OiB6LnN0cmluZygpLm51bGxhYmxlKCksXG59KTtcbmV4cG9ydCBjb25zdCByZWFsdGltZU1jcENhbGxBcHByb3ZhbFJlcXVlc3RJdGVtID0gei5vYmplY3Qoe1xuICAgIGl0ZW1JZDogei5zdHJpbmcoKSxcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ21jcF9hcHByb3ZhbF9yZXF1ZXN0JyksXG4gICAgc2VydmVyTGFiZWw6IHouc3RyaW5nKCksXG4gICAgbmFtZTogei5zdHJpbmcoKSxcbiAgICBhcmd1bWVudHM6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLFxuICAgIGFwcHJvdmVkOiB6LmJvb2xlYW4oKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG59KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWl0ZW1zLm1qcy5tYXAiLCJpbXBvcnQgeyBnZXRMb2dnZXIgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlJztcbmNvbnN0IGxvZ2dlciA9IGdldExvZ2dlcignb3BlbmFpLWFnZW50czpyZWFsdGltZScpO1xuZXhwb3J0IGRlZmF1bHQgbG9nZ2VyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bG9nZ2VyLm1qcy5tYXAiLCJpbXBvcnQgeyB6IH0gZnJvbSAnem9kJztcbi8vIEV2ZW50IHNjaGVtYXMgbWlycm9yaW5nIHRoZSBzdHJ1Y3R1cmVzIGRlZmluZWQgaW4gdGhlIE9wZW5BSSBTREsgdHlwaW5ncy5cbi8vIE1vc3QgZmllbGRzIGZyb20gdGhlIGludGVyZmFjZXMgaW4gYHJlYWx0aW1lLmQudHNgIGFyZSBjYXB0dXJlZCBoZXJlIHRvXG4vLyBwcm92aWRlIGJldHRlciBydW50aW1lIHZhbGlkYXRpb24gd2hlbiBwYXJzaW5nIGV2ZW50cyBmcm9tIHRoZSBzZXJ2ZXIuXG5leHBvcnQgY29uc3QgcmVhbHRpbWVSZXNwb25zZSA9IHoub2JqZWN0KHtcbiAgICBpZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgY29udmVyc2F0aW9uX2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBtYXhfb3V0cHV0X3Rva2Vuczogei5udW1iZXIoKS5vcih6LmxpdGVyYWwoJ2luZicpKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgbWV0YWRhdGE6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICAvLyBHQSByZW5hbWU6IG1vZGFsaXRpZXMgLT4gb3V0cHV0X21vZGFsaXRpZXNcbiAgICBvdXRwdXRfbW9kYWxpdGllczogei5hcnJheSh6LnN0cmluZygpKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgb2JqZWN0OiB6LmxpdGVyYWwoJ3JlYWx0aW1lLnJlc3BvbnNlJykub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIG91dHB1dDogei5hcnJheSh6LmFueSgpKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgLy8gR0EgZ3JvdXBpbmc6IGF1ZGlvLm91dHB1dC57Zm9ybWF0LHZvaWNlfVxuICAgIGF1ZGlvOiB6XG4gICAgICAgIC5vYmplY3Qoe1xuICAgICAgICBvdXRwdXQ6IHpcbiAgICAgICAgICAgIC5vYmplY3Qoe1xuICAgICAgICAgICAgZm9ybWF0OiB6LmFueSgpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICAgICAgICAgIHZvaWNlOiB6LnN0cmluZygpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5vcHRpb25hbCgpXG4gICAgICAgICAgICAubnVsbGFibGUoKSxcbiAgICB9KVxuICAgICAgICAub3B0aW9uYWwoKVxuICAgICAgICAubnVsbGFibGUoKSxcbiAgICBzdGF0dXM6IHpcbiAgICAgICAgLmVudW0oWydjb21wbGV0ZWQnLCAnaW5jb21wbGV0ZScsICdmYWlsZWQnLCAnY2FuY2VsbGVkJywgJ2luX3Byb2dyZXNzJ10pXG4gICAgICAgIC5vcHRpb25hbCgpXG4gICAgICAgIC5udWxsYWJsZSgpLFxuICAgIHN0YXR1c19kZXRhaWxzOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgdXNhZ2U6IHpcbiAgICAgICAgLm9iamVjdCh7XG4gICAgICAgIGlucHV0X3Rva2Vuczogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgICAgICBpbnB1dF90b2tlbl9kZXRhaWxzOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgICAgIG91dHB1dF90b2tlbnM6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgICAgICAgb3V0cHV0X3Rva2VuX2RldGFpbHM6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICB9KVxuICAgICAgICAub3B0aW9uYWwoKVxuICAgICAgICAubnVsbGFibGUoKSxcbn0pO1xuLy8gQmFzaWMgY29udGVudCBzY2hlbWEgdXNlZCBieSBDb252ZXJzYXRpb25JdGVtLlxuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1Db250ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIGlkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgYXVkaW86IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIHRleHQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIHRyYW5zY3JpcHQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIHR5cGU6IHoudW5pb24oW1xuICAgICAgICB6LmxpdGVyYWwoJ2lucHV0X3RleHQnKSxcbiAgICAgICAgei5saXRlcmFsKCdpbnB1dF9hdWRpbycpLFxuICAgICAgICB6LmxpdGVyYWwoJ2l0ZW1fcmVmZXJlbmNlJyksXG4gICAgICAgIHoubGl0ZXJhbCgnb3V0cHV0X3RleHQnKSxcbiAgICAgICAgei5saXRlcmFsKCdvdXRwdXRfYXVkaW8nKSxcbiAgICBdKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1TY2hlbWEgPSB6XG4gICAgLm9iamVjdCh7XG4gICAgaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBhcmd1bWVudHM6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBjYWxsX2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgY29udGVudDogei5hcnJheShjb252ZXJzYXRpb25JdGVtQ29udGVudFNjaGVtYSkub3B0aW9uYWwoKSxcbiAgICBuYW1lOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgb3V0cHV0OiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICByb2xlOiB6LmVudW0oWyd1c2VyJywgJ2Fzc2lzdGFudCcsICdzeXN0ZW0nXSkub3B0aW9uYWwoKSxcbiAgICBzdGF0dXM6IHouZW51bShbJ2NvbXBsZXRlZCcsICdpbmNvbXBsZXRlJywgJ2luX3Byb2dyZXNzJ10pLm9wdGlvbmFsKCksXG4gICAgdHlwZTogelxuICAgICAgICAuZW51bShbXG4gICAgICAgICdtZXNzYWdlJyxcbiAgICAgICAgJ2Z1bmN0aW9uX2NhbGwnLFxuICAgICAgICAnZnVuY3Rpb25fY2FsbF9vdXRwdXQnLFxuICAgICAgICAnbWNwX2xpc3RfdG9vbHMnLFxuICAgICAgICAnbWNwX3Rvb2xfY2FsbCcsXG4gICAgICAgICdtY3BfY2FsbCcsXG4gICAgICAgICdtY3BfYXBwcm92YWxfcmVxdWVzdCcsXG4gICAgICAgICdtY3BfYXBwcm92YWxfcmVzcG9uc2UnLFxuICAgIF0pXG4gICAgICAgIC5vcHRpb25hbCgpLFxuICAgIGFwcHJvdmFsX3JlcXVlc3RfaWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIGFwcHJvdmU6IHouYm9vbGVhbigpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICByZWFzb246IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIHNlcnZlcl9sYWJlbDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIGVycm9yOiB6LmFueSgpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICB0b29sczogelxuICAgICAgICAuYXJyYXkoelxuICAgICAgICAub2JqZWN0KHtcbiAgICAgICAgbmFtZTogei5zdHJpbmcoKSxcbiAgICAgICAgZGVzY3JpcHRpb246IHouc3RyaW5nKCksXG4gICAgICAgIGlucHV0X3NjaGVtYTogei5yZWNvcmQoei5hbnkoKSkub3B0aW9uYWwoKSxcbiAgICB9KVxuICAgICAgICAucGFzc3Rocm91Z2goKSlcbiAgICAgICAgLm9wdGlvbmFsKCksXG59KVxuICAgIC5wYXNzdGhyb3VnaCgpO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkNyZWF0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5jcmVhdGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgY29udmVyc2F0aW9uOiB6Lm9iamVjdCh7XG4gICAgICAgIGlkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIG9iamVjdDogei5saXRlcmFsKCdyZWFsdGltZS5jb252ZXJzYXRpb24nKS5vcHRpb25hbCgpLFxuICAgIH0pLFxufSk7XG4vLyBHQSByZW5hbWU6IGNvbnZlcnNhdGlvbi5pdGVtLmNyZWF0ZWQgLT4gY29udmVyc2F0aW9uLml0ZW0uYWRkZWRcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtQWRkZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5pdGVtLmFkZGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbTogY29udmVyc2F0aW9uSXRlbVNjaGVtYSxcbiAgICBwcmV2aW91c19pdGVtX2lkOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbn0pO1xuLy8gR0EgYWRkaXRpb246IGNvbnZlcnNhdGlvbi5pdGVtLmRvbmVcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtRG9uZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0uZG9uZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW06IGNvbnZlcnNhdGlvbkl0ZW1TY2hlbWEsXG4gICAgcHJldmlvdXNfaXRlbV9pZDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtRGVsZXRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0uZGVsZXRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtSW5wdXRBdWRpb1RyYW5zY3JpcHRpb25Db21wbGV0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5pdGVtLmlucHV0X2F1ZGlvX3RyYW5zY3JpcHRpb24uY29tcGxldGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHRyYW5zY3JpcHQ6IHouc3RyaW5nKCksXG4gICAgbG9ncHJvYnM6IHouYXJyYXkoei5hbnkoKSkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIHVzYWdlOiB6XG4gICAgICAgIC5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ3Rva2VucycpLFxuICAgICAgICB0b3RhbF90b2tlbnM6IHoubnVtYmVyKCksXG4gICAgICAgIGlucHV0X3Rva2Vuczogei5udW1iZXIoKSxcbiAgICAgICAgaW5wdXRfdG9rZW5fZGV0YWlsczogei5vYmplY3Qoe1xuICAgICAgICAgICAgdGV4dF90b2tlbnM6IHoubnVtYmVyKCksXG4gICAgICAgICAgICBhdWRpb190b2tlbnM6IHoubnVtYmVyKCksXG4gICAgICAgIH0pLFxuICAgICAgICBvdXRwdXRfdG9rZW5zOiB6Lm51bWJlcigpLFxuICAgIH0pXG4gICAgICAgIC5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbUlucHV0QXVkaW9UcmFuc2NyaXB0aW9uRGVsdGFFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5pdGVtLmlucHV0X2F1ZGlvX3RyYW5zY3JpcHRpb24uZGVsdGEnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgICBkZWx0YTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIGxvZ3Byb2JzOiB6LmFycmF5KHouYW55KCkpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1JbnB1dEF1ZGlvVHJhbnNjcmlwdGlvbkZhaWxlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0uaW5wdXRfYXVkaW9fdHJhbnNjcmlwdGlvbi5mYWlsZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgZXJyb3I6IHoub2JqZWN0KHtcbiAgICAgICAgY29kZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICBtZXNzYWdlOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIHBhcmFtOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIHR5cGU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICB9KSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1SZXRyaWV2ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5pdGVtLnJldHJpZXZlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW06IGNvbnZlcnNhdGlvbkl0ZW1TY2hlbWEsXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtVHJ1bmNhdGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS50cnVuY2F0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGF1ZGlvX2VuZF9tczogei5udW1iZXIoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbUNyZWF0ZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0uY3JlYXRlJyksXG4gICAgaXRlbTogY29udmVyc2F0aW9uSXRlbVNjaGVtYSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIHByZXZpb3VzX2l0ZW1faWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbURlbGV0ZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0uZGVsZXRlJyksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbVJldHJpZXZlRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS5yZXRyaWV2ZScpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1UcnVuY2F0ZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0udHJ1bmNhdGUnKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGF1ZGlvX2VuZF9tczogei5udW1iZXIoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBlcnJvckV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnZXJyb3InKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIGVycm9yOiB6LmFueSgpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBpbnB1dEF1ZGlvQnVmZmVyQ2xlYXJlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfYXVkaW9fYnVmZmVyLmNsZWFyZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGlucHV0QXVkaW9CdWZmZXJBcHBlbmRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X2F1ZGlvX2J1ZmZlci5hcHBlbmQnKSxcbiAgICBhdWRpbzogei5zdHJpbmcoKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgaW5wdXRBdWRpb0J1ZmZlckNsZWFyRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdpbnB1dF9hdWRpb19idWZmZXIuY2xlYXInKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgaW5wdXRBdWRpb0J1ZmZlckNvbW1pdEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfYXVkaW9fYnVmZmVyLmNvbW1pdCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBpbnB1dEF1ZGlvQnVmZmVyQ29tbWl0dGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdpbnB1dF9hdWRpb19idWZmZXIuY29tbWl0dGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBwcmV2aW91c19pdGVtX2lkOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGlucHV0QXVkaW9CdWZmZXJTcGVlY2hTdGFydGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdpbnB1dF9hdWRpb19idWZmZXIuc3BlZWNoX3N0YXJ0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGF1ZGlvX3N0YXJ0X21zOiB6Lm51bWJlcigpLFxufSk7XG5leHBvcnQgY29uc3QgaW5wdXRBdWRpb0J1ZmZlclNwZWVjaFN0b3BwZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X2F1ZGlvX2J1ZmZlci5zcGVlY2hfc3RvcHBlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgYXVkaW9fZW5kX21zOiB6Lm51bWJlcigpLFxufSk7XG5leHBvcnQgY29uc3Qgb3V0cHV0QXVkaW9CdWZmZXJTdGFydGVkRXZlbnRTY2hlbWEgPSB6XG4gICAgLm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdvdXRwdXRfYXVkaW9fYnVmZmVyLnN0YXJ0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbn0pXG4gICAgLnBhc3N0aHJvdWdoKCk7XG5leHBvcnQgY29uc3Qgb3V0cHV0QXVkaW9CdWZmZXJTdG9wcGVkRXZlbnRTY2hlbWEgPSB6XG4gICAgLm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdvdXRwdXRfYXVkaW9fYnVmZmVyLnN0b3BwZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbn0pXG4gICAgLnBhc3N0aHJvdWdoKCk7XG5leHBvcnQgY29uc3Qgb3V0cHV0QXVkaW9CdWZmZXJDbGVhcmVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdvdXRwdXRfYXVkaW9fYnVmZmVyLmNsZWFyZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJhdGVMaW1pdHNVcGRhdGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyYXRlX2xpbWl0cy51cGRhdGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgcmF0ZV9saW1pdHM6IHouYXJyYXkoei5vYmplY3Qoe1xuICAgICAgICBsaW1pdDogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgICAgICBuYW1lOiB6LmVudW0oWydyZXF1ZXN0cycsICd0b2tlbnMnXSkub3B0aW9uYWwoKSxcbiAgICAgICAgcmVtYWluaW5nOiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgICAgIHJlc2V0X3NlY29uZHM6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgICB9KSksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUF1ZGlvRGVsdGFFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLm91dHB1dF9hdWRpby5kZWx0YScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbiAgICBkZWx0YTogei5zdHJpbmcoKSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUF1ZGlvRG9uZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2Uub3V0cHV0X2F1ZGlvLmRvbmUnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VBdWRpb1RyYW5zY3JpcHREZWx0YUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2Uub3V0cHV0X2F1ZGlvX3RyYW5zY3JpcHQuZGVsdGEnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgZGVsdGE6IHouc3RyaW5nKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VBdWRpb1RyYW5zY3JpcHREb25lRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgLy8gIEdBIG1heSBpbnRyb2R1Y2UgcmVzcG9uc2Uub3V0cHV0X2F1ZGlvX3RyYW5zY3JpcHQuZG9uZVxuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2Uub3V0cHV0X2F1ZGlvX3RyYW5zY3JpcHQuZG9uZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbiAgICB0cmFuc2NyaXB0OiB6LnN0cmluZygpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlQ29udGVudFBhcnRBZGRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuY29udGVudF9wYXJ0LmFkZGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbiAgICBwYXJ0OiB6Lm9iamVjdCh7XG4gICAgICAgIGF1ZGlvOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIHRleHQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgdHJhbnNjcmlwdDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICB0eXBlOiB6LmVudW0oWyd0ZXh0JywgJ2F1ZGlvJ10pLm9wdGlvbmFsKCksXG4gICAgfSksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUNvbnRlbnRQYXJ0RG9uZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuY29udGVudF9wYXJ0LmRvbmUnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxuICAgIHBhcnQ6IHoub2JqZWN0KHtcbiAgICAgICAgYXVkaW86IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgdGV4dDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICB0cmFuc2NyaXB0OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIHR5cGU6IHouZW51bShbJ3RleHQnLCAnYXVkaW8nXSkub3B0aW9uYWwoKSxcbiAgICB9KSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlQ3JlYXRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuY3JlYXRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIHJlc3BvbnNlOiByZWFsdGltZVJlc3BvbnNlLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VEb25lRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5kb25lJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgcmVzcG9uc2U6IHJlYWx0aW1lUmVzcG9uc2UsXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUZ1bmN0aW9uQ2FsbEFyZ3VtZW50c0RlbHRhRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5mdW5jdGlvbl9jYWxsX2FyZ3VtZW50cy5kZWx0YScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY2FsbF9pZDogei5zdHJpbmcoKSxcbiAgICBkZWx0YTogei5zdHJpbmcoKSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUZ1bmN0aW9uQ2FsbEFyZ3VtZW50c0RvbmVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLmZ1bmN0aW9uX2NhbGxfYXJndW1lbnRzLmRvbmUnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNhbGxfaWQ6IHouc3RyaW5nKCksXG4gICAgYXJndW1lbnRzOiB6LnN0cmluZygpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlT3V0cHV0SXRlbUFkZGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5vdXRwdXRfaXRlbS5hZGRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW06IGNvbnZlcnNhdGlvbkl0ZW1TY2hlbWEsXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VPdXRwdXRJdGVtRG9uZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2Uub3V0cHV0X2l0ZW0uZG9uZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW06IGNvbnZlcnNhdGlvbkl0ZW1TY2hlbWEsXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VUZXh0RGVsdGFFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLm91dHB1dF90ZXh0LmRlbHRhJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIGRlbHRhOiB6LnN0cmluZygpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlVGV4dERvbmVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICAvLyBObyByZW5hbWUgc3BlY2lmaWVkIGZvciBkb25lOyBrZWVwIHJlc3BvbnNlLnRleHQuZG9uZVxuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2Uub3V0cHV0X3RleHQuZG9uZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbiAgICB0ZXh0OiB6LnN0cmluZygpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHNlc3Npb25DcmVhdGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdzZXNzaW9uLmNyZWF0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBzZXNzaW9uOiB6LmFueSgpLFxufSk7XG5leHBvcnQgY29uc3Qgc2Vzc2lvblVwZGF0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Nlc3Npb24udXBkYXRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIHNlc3Npb246IHouYW55KCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUNhbmNlbEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuY2FuY2VsJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VDcmVhdGVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLmNyZWF0ZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgcmVzcG9uc2U6IHouYW55KCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHNlc3Npb25VcGRhdGVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Nlc3Npb24udXBkYXRlJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBzZXNzaW9uOiB6LmFueSgpLFxufSk7XG5leHBvcnQgY29uc3QgbWNwTGlzdFRvb2xzSW5Qcm9ncmVzc0V2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnbWNwX2xpc3RfdG9vbHMuaW5fcHJvZ3Jlc3MnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IG1jcExpc3RUb29sc0NvbXBsZXRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnbWNwX2xpc3RfdG9vbHMuY29tcGxldGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZU1jcENhbGxBcmd1bWVudHNEZWx0YUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UubWNwX2NhbGxfYXJndW1lbnRzLmRlbHRhJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgZGVsdGE6IHouc3RyaW5nKCksXG4gICAgb2JmdXNjYXRpb246IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZU1jcENhbGxBcmd1bWVudHNEb25lRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5tY3BfY2FsbF9hcmd1bWVudHMuZG9uZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIGFyZ3VtZW50czogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlTWNwQ2FsbEluUHJvZ3Jlc3NFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLm1jcF9jYWxsLmluX3Byb2dyZXNzJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZU1jcENhbGxDb21wbGV0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLm1jcF9jYWxsLmNvbXBsZXRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgbWNwTGlzdFRvb2xzRmFpbGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdtY3BfbGlzdF90b29scy5mYWlsZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuLyoqXG4gKiBUaGlzIHNjaGVtYSBpcyB1c2VkIGlmIGFuIGV2ZW50IGlzIHVua25vd24gdG8gdGhlIGNsaWVudC4gVGhlIFJlYWx0aW1lIEFQSSBtaWdodCBpbnRyb2R1Y2VcbiAqIG5ldyBldmVudHMgYXQgc29tZSBwb2ludCBhbmQgd2Ugc2hvdWxkIGhhbmRsZSB0aGVtIGdyYWNlZnVsbHkgYnkgdHJlYXRpbmcgdGhlbSBhcyBnZW5lcmljIGV2ZW50c1xuICogb25seSByZXF1aXJpbmcgYSB0eXBlIGFuZCBhbiBvcHRpb25hbCBldmVudF9pZC5cbiAqL1xuZXhwb3J0IGNvbnN0IGdlbmVyaWNFdmVudFNjaGVtYSA9IHpcbiAgICAub2JqZWN0KHtcbiAgICB0eXBlOiB6LnN0cmluZygpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbn0pXG4gICAgLnBhc3N0aHJvdWdoKCk7XG5leHBvcnQgY29uc3QgcmVhbHRpbWVTZXJ2ZXJFdmVudFNjaGVtYSA9IHouZGlzY3JpbWluYXRlZFVuaW9uKCd0eXBlJywgW1xuICAgIGNvbnZlcnNhdGlvbkNyZWF0ZWRFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtQWRkZWRFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtRG9uZUV2ZW50U2NoZW1hLFxuICAgIGNvbnZlcnNhdGlvbkl0ZW1EZWxldGVkRXZlbnRTY2hlbWEsXG4gICAgY29udmVyc2F0aW9uSXRlbUlucHV0QXVkaW9UcmFuc2NyaXB0aW9uQ29tcGxldGVkRXZlbnRTY2hlbWEsXG4gICAgY29udmVyc2F0aW9uSXRlbUlucHV0QXVkaW9UcmFuc2NyaXB0aW9uRGVsdGFFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtSW5wdXRBdWRpb1RyYW5zY3JpcHRpb25GYWlsZWRFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtUmV0cmlldmVkRXZlbnRTY2hlbWEsXG4gICAgY29udmVyc2F0aW9uSXRlbVRydW5jYXRlZEV2ZW50U2NoZW1hLFxuICAgIGVycm9yRXZlbnRTY2hlbWEsXG4gICAgaW5wdXRBdWRpb0J1ZmZlckNsZWFyZWRFdmVudFNjaGVtYSxcbiAgICBpbnB1dEF1ZGlvQnVmZmVyQ29tbWl0dGVkRXZlbnRTY2hlbWEsXG4gICAgaW5wdXRBdWRpb0J1ZmZlclNwZWVjaFN0YXJ0ZWRFdmVudFNjaGVtYSxcbiAgICBpbnB1dEF1ZGlvQnVmZmVyU3BlZWNoU3RvcHBlZEV2ZW50U2NoZW1hLFxuICAgIG91dHB1dEF1ZGlvQnVmZmVyU3RhcnRlZEV2ZW50U2NoZW1hLFxuICAgIG91dHB1dEF1ZGlvQnVmZmVyU3RvcHBlZEV2ZW50U2NoZW1hLFxuICAgIG91dHB1dEF1ZGlvQnVmZmVyQ2xlYXJlZEV2ZW50U2NoZW1hLFxuICAgIHJhdGVMaW1pdHNVcGRhdGVkRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VBdWRpb0RlbHRhRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VBdWRpb0RvbmVFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUF1ZGlvVHJhbnNjcmlwdERlbHRhRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VBdWRpb1RyYW5zY3JpcHREb25lRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VDb250ZW50UGFydEFkZGVkRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VDb250ZW50UGFydERvbmVFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUNyZWF0ZWRFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZURvbmVFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUZ1bmN0aW9uQ2FsbEFyZ3VtZW50c0RlbHRhRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VGdW5jdGlvbkNhbGxBcmd1bWVudHNEb25lRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VPdXRwdXRJdGVtQWRkZWRFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZU91dHB1dEl0ZW1Eb25lRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VUZXh0RGVsdGFFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZVRleHREb25lRXZlbnRTY2hlbWEsXG4gICAgc2Vzc2lvbkNyZWF0ZWRFdmVudFNjaGVtYSxcbiAgICBzZXNzaW9uVXBkYXRlZEV2ZW50U2NoZW1hLFxuICAgIG1jcExpc3RUb29sc0luUHJvZ3Jlc3NFdmVudFNjaGVtYSxcbiAgICBtY3BMaXN0VG9vbHNDb21wbGV0ZWRFdmVudFNjaGVtYSxcbiAgICBtY3BMaXN0VG9vbHNGYWlsZWRFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZU1jcENhbGxBcmd1bWVudHNEZWx0YUV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlTWNwQ2FsbEFyZ3VtZW50c0RvbmVFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZU1jcENhbGxJblByb2dyZXNzRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VNY3BDYWxsQ29tcGxldGVkRXZlbnRTY2hlbWEsXG5dKTtcbmV4cG9ydCBjb25zdCByZWFsdGltZUNsaWVudEV2ZW50U2NoZW1hID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgY29udmVyc2F0aW9uSXRlbUNyZWF0ZUV2ZW50U2NoZW1hLFxuICAgIGNvbnZlcnNhdGlvbkl0ZW1EZWxldGVFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtUmV0cmlldmVFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtVHJ1bmNhdGVFdmVudFNjaGVtYSxcbiAgICBpbnB1dEF1ZGlvQnVmZmVyQXBwZW5kRXZlbnRTY2hlbWEsXG4gICAgaW5wdXRBdWRpb0J1ZmZlckNsZWFyRXZlbnRTY2hlbWEsXG4gICAgaW5wdXRBdWRpb0J1ZmZlckNvbW1pdEV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlQ2FuY2VsRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VDcmVhdGVFdmVudFNjaGVtYSxcbiAgICBzZXNzaW9uVXBkYXRlRXZlbnRTY2hlbWEsXG5dKTtcbi8qKlxuICogUGFyc2VzIGEgcmVhbHRpbWUgZXZlbnQgZnJvbSB0aGUgc2VydmVyLiBJZiB0aGUgZXZlbnQgaXMgdW5rbm93biB0byB0aGUgY2xpZW50LCBpdCB3aWxsIGJlIHRyZWF0ZWQgYXMgYSBnZW5lcmljIGV2ZW50LlxuICogQHBhcmFtIGV2ZW50IC0gVGhlIGV2ZW50IHRvIHBhcnNlLlxuICogQHJldHVybnMgVGhlIHBhcnNlZCBldmVudCBvciBudWxsIGlmIHRoZSBldmVudCBpcyB1bmtub3duIHRvIHRoZSBjbGllbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVJlYWx0aW1lRXZlbnQoZXZlbnQpIHtcbiAgICBjb25zdCByYXcgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGEudG9TdHJpbmcoKSk7XG4gICAgY29uc3QgcGFyc2VkID0gcmVhbHRpbWVTZXJ2ZXJFdmVudFNjaGVtYS5zYWZlUGFyc2UocmF3KTtcbiAgICBpZiAoIXBhcnNlZC5zdWNjZXNzKSB7XG4gICAgICAgIGNvbnN0IGdlbmVyaWNQYXJzZWQgPSBnZW5lcmljRXZlbnRTY2hlbWEuc2FmZVBhcnNlKHJhdyk7XG4gICAgICAgIGlmIChnZW5lcmljUGFyc2VkLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIHJldHVybiB7IGRhdGE6IGdlbmVyaWNQYXJzZWQuZGF0YSwgaXNHZW5lcmljOiB0cnVlIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgZGF0YTogbnVsbCwgaXNHZW5lcmljOiB0cnVlIH07XG4gICAgfVxuICAgIHJldHVybiB7IGRhdGE6IHBhcnNlZC5kYXRhLCBpc0dlbmVyaWM6IGZhbHNlIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vcGVuYWlSZWFsdGltZUV2ZW50cy5tanMubWFwIiwiaW1wb3J0IHsgUnVudGltZUV2ZW50RW1pdHRlciwgVXNhZ2UgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlJztcbmltcG9ydCB7IHRvTmV3U2Vzc2lvbkNvbmZpZywgfSBmcm9tIFwiLi9jbGllbnRNZXNzYWdlcy5tanNcIjtcbmltcG9ydCB7IHJlYWx0aW1lTWNwQ2FsbEFwcHJvdmFsUmVxdWVzdEl0ZW0sIHJlYWx0aW1lTWNwQ2FsbEl0ZW0sIHJlYWx0aW1lTWVzc2FnZUl0ZW1TY2hlbWEsIHJlYWx0aW1lVG9vbENhbGxJdGVtLCB9IGZyb20gXCIuL2l0ZW1zLm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVJlYWx0aW1lRXZlbnQsIHJlc3BvbnNlRG9uZUV2ZW50U2NoZW1hLCB9IGZyb20gXCIuL29wZW5haVJlYWx0aW1lRXZlbnRzLm1qc1wiO1xuaW1wb3J0IHsgYXJyYXlCdWZmZXJUb0Jhc2U2NCwgZGlmZlJlYWx0aW1lSGlzdG9yeSB9IGZyb20gXCIuL3V0aWxzLm1qc1wiO1xuaW1wb3J0IHsgRXZlbnRFbWl0dGVyRGVsZWdhdGUgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlL3V0aWxzJztcbi8qKlxuICogVGhlIGRlZmF1bHQgbW9kZWwgdGhhdCBpcyB1c2VkIGR1cmluZyB0aGUgY29ubmVjdGlvbiBpZiBubyBtb2RlbCBpcyBwcm92aWRlZC5cbiAqL1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX01PREVMID0gJ2dwdC1yZWFsdGltZSc7XG4vKipcbiAqIFRoZSBkZWZhdWx0IHNlc3Npb24gY29uZmlnIHRoYXQgZ2V0cyBzZW5kIG92ZXIgZHVyaW5nIHNlc3Npb24gY29ubmVjdGlvbiB1bmxlc3Mgb3ZlcnJpZGRlblxuICogYnkgdGhlIHVzZXIuXG4gKi9cbmV4cG9ydCBjb25zdCBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRyA9IHtcbiAgICBvdXRwdXRNb2RhbGl0aWVzOiBbJ2F1ZGlvJ10sXG4gICAgYXVkaW86IHtcbiAgICAgICAgaW5wdXQ6IHtcbiAgICAgICAgICAgIGZvcm1hdDogeyB0eXBlOiAnYXVkaW8vcGNtJywgcmF0ZTogMjQwMDAgfSxcbiAgICAgICAgICAgIHRyYW5zY3JpcHRpb246IHsgbW9kZWw6ICdncHQtNG8tbWluaS10cmFuc2NyaWJlJyB9LFxuICAgICAgICAgICAgdHVybkRldGVjdGlvbjogeyB0eXBlOiAnc2VtYW50aWNfdmFkJyB9LFxuICAgICAgICAgICAgbm9pc2VSZWR1Y3Rpb246IG51bGwsXG4gICAgICAgIH0sXG4gICAgICAgIG91dHB1dDoge1xuICAgICAgICAgICAgZm9ybWF0OiB7IHR5cGU6ICdhdWRpby9wY20nLCByYXRlOiAyNDAwMCB9LFxuICAgICAgICAgICAgc3BlZWQ6IDEsXG4gICAgICAgIH0sXG4gICAgfSxcbn07XG5leHBvcnQgY2xhc3MgT3BlbkFJUmVhbHRpbWVCYXNlIGV4dGVuZHMgRXZlbnRFbWl0dGVyRGVsZWdhdGUge1xuICAgICNtb2RlbDtcbiAgICAjYXBpS2V5O1xuICAgICN0cmFjaW5nQ29uZmlnID0gbnVsbDtcbiAgICAjcmF3U2Vzc2lvbkNvbmZpZyA9IG51bGw7XG4gICAgZXZlbnRFbWl0dGVyID0gbmV3IFJ1bnRpbWVFdmVudEVtaXR0ZXIoKTtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy4jbW9kZWwgPSBvcHRpb25zLm1vZGVsID8/IERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX01PREVMO1xuICAgICAgICB0aGlzLiNhcGlLZXkgPSBvcHRpb25zLmFwaUtleTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgbW9kZWwgdGhhdCBpcyBiZWluZyB1c2VkIGJ5IHRoZSB0cmFuc3BvcnQgbGF5ZXIuXG4gICAgICovXG4gICAgZ2V0IGN1cnJlbnRNb2RlbCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI21vZGVsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCBtb2RlbCB0aGF0IGlzIGJlaW5nIHVzZWQgYnkgdGhlIHRyYW5zcG9ydCBsYXllci5cbiAgICAgKiAqKk5vdGUqKjogVGhlIG1vZGVsIGNhbm5vdCBiZSBjaGFuZ2VkIG1pZCBjb252ZXJzYXRpb24uXG4gICAgICovXG4gICAgc2V0IGN1cnJlbnRNb2RlbChtb2RlbCkge1xuICAgICAgICB0aGlzLiNtb2RlbCA9IG1vZGVsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIb29rIGZvciBzdWJjbGFzc2VzIHRvIGNsZWFuIHVwIHRyYW5zcG9ydC1zcGVjaWZpYyBzdGF0ZSB3aGVuIGF1ZGlvXG4gICAgICogcGxheWJhY2sgZmluaXNoZXMuIERlZmF1bHRzIHRvIGEgbm8tb3AuXG4gICAgICovXG4gICAgX2FmdGVyQXVkaW9Eb25lRXZlbnQoKSB7XG4gICAgICAgIC8vIEludGVudGlvbmFsbHkgZW1wdHkuXG4gICAgfVxuICAgIGdldCBfcmF3U2Vzc2lvbkNvbmZpZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3Jhd1Nlc3Npb25Db25maWcgPz8gbnVsbDtcbiAgICB9XG4gICAgYXN5bmMgX2dldEFwaUtleShvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGFwaUtleSA9IG9wdGlvbnMuYXBpS2V5ID8/IHRoaXMuI2FwaUtleTtcbiAgICAgICAgaWYgKHR5cGVvZiBhcGlLZXkgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBhcGlLZXkoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXBpS2V5O1xuICAgIH1cbiAgICBfb25NZXNzYWdlKGV2ZW50KSB7XG4gICAgICAgIGNvbnN0IHsgZGF0YTogcGFyc2VkLCBpc0dlbmVyaWMgfSA9IHBhcnNlUmVhbHRpbWVFdmVudChldmVudCk7XG4gICAgICAgIGlmIChwYXJzZWQgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVtaXQoJyonLCBwYXJzZWQpO1xuICAgICAgICBpZiAoaXNHZW5lcmljKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAnZXJyb3InKSB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywgeyB0eXBlOiAnZXJyb3InLCBlcnJvcjogcGFyc2VkIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5lbWl0KHBhcnNlZC50eXBlLCBwYXJzZWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLmNyZWF0ZWQnKSB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ3R1cm5fc3RhcnRlZCcsIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAncmVzcG9uc2Vfc3RhcnRlZCcsXG4gICAgICAgICAgICAgICAgcHJvdmlkZXJEYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLnBhcnNlZCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAnc2Vzc2lvbi51cGRhdGVkJykge1xuICAgICAgICAgICAgdGhpcy4jcmF3U2Vzc2lvbkNvbmZpZyA9IHBhcnNlZC5zZXNzaW9uO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLmRvbmUnKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHJlc3BvbnNlRG9uZUV2ZW50U2NoZW1hLnNhZmVQYXJzZShwYXJzZWQpO1xuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBwYXJzaW5nIHJlc3BvbnNlIGRvbmUgZXZlbnQnLCByZXNwb25zZS5lcnJvcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgaW5wdXRUb2tlbnMgPSByZXNwb25zZS5kYXRhLnJlc3BvbnNlLnVzYWdlPy5pbnB1dF90b2tlbnMgPz8gMDtcbiAgICAgICAgICAgIGNvbnN0IG91dHB1dFRva2VucyA9IHJlc3BvbnNlLmRhdGEucmVzcG9uc2UudXNhZ2U/Lm91dHB1dF90b2tlbnMgPz8gMDtcbiAgICAgICAgICAgIGNvbnN0IHRvdGFsVG9rZW5zID0gaW5wdXRUb2tlbnMgKyBvdXRwdXRUb2tlbnM7XG4gICAgICAgICAgICBjb25zdCB1c2FnZSA9IG5ldyBVc2FnZSh7XG4gICAgICAgICAgICAgICAgaW5wdXRUb2tlbnMsXG4gICAgICAgICAgICAgICAgaW5wdXRUb2tlbnNEZXRhaWxzOiByZXNwb25zZS5kYXRhLnJlc3BvbnNlLnVzYWdlPy5pbnB1dF90b2tlbl9kZXRhaWxzID8/IHt9LFxuICAgICAgICAgICAgICAgIG91dHB1dFRva2VucyxcbiAgICAgICAgICAgICAgICBvdXRwdXRUb2tlbnNEZXRhaWxzOiByZXNwb25zZS5kYXRhLnJlc3BvbnNlLnVzYWdlPy5vdXRwdXRfdG9rZW5fZGV0YWlscyA/PyB7fSxcbiAgICAgICAgICAgICAgICB0b3RhbFRva2VucyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5lbWl0KCd1c2FnZV91cGRhdGUnLCB1c2FnZSk7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ3R1cm5fZG9uZScsIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAncmVzcG9uc2VfZG9uZScsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2U6IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHJlc3BvbnNlLmRhdGEucmVzcG9uc2UuaWQgPz8gJycsXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dDogcmVzcG9uc2UuZGF0YS5yZXNwb25zZS5vdXRwdXQgPz8gW10sXG4gICAgICAgICAgICAgICAgICAgIHVzYWdlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFRva2VucyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0VG9rZW5zRGV0YWlsczogcmVzcG9uc2UuZGF0YS5yZXNwb25zZS51c2FnZT8uaW5wdXRfdG9rZW5fZGV0YWlscyA/PyB7fSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFRva2VucyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFRva2Vuc0RldGFpbHM6IHJlc3BvbnNlLmRhdGEucmVzcG9uc2UudXNhZ2U/Lm91dHB1dF90b2tlbl9kZXRhaWxzID8/IHt9LFxuICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxUb2tlbnMsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLm91dHB1dF9hdWRpby5kb25lJykge1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdhdWRpb19kb25lJyk7XG4gICAgICAgICAgICB0aGlzLl9hZnRlckF1ZGlvRG9uZUV2ZW50KCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0uZGVsZXRlZCcpIHtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnaXRlbV9kZWxldGVkJywge1xuICAgICAgICAgICAgICAgIGl0ZW1JZDogcGFyc2VkLml0ZW1faWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS5pbnB1dF9hdWRpb190cmFuc2NyaXB0aW9uLmNvbXBsZXRlZCcgfHxcbiAgICAgICAgICAgIHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0udHJ1bmNhdGVkJykge1xuICAgICAgICAgICAgLy8gcmlnaHQgbm93IHJhdGhlciB0aGFuIGtlZXBpbmcgdHJhY2sgb2YgcGFydGlhbHMgYW5kIHJlYnVpbGRpbmcgdGhlIGl0ZW0gd2VcbiAgICAgICAgICAgIC8vIHdpbGwgcmV0cmlldmUgaXQgaW5zdGVhZCB3aGljaCB0cmlnZ2VycyB0aGUgYGNvbnZlcnNhdGlvbi5pdGVtLnJldHJpZXZlZGAgZXZlbnQgYmVsb3dcbiAgICAgICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnY29udmVyc2F0aW9uLml0ZW0ucmV0cmlldmUnLFxuICAgICAgICAgICAgICAgIGl0ZW1faWQ6IHBhcnNlZC5pdGVtX2lkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0uaW5wdXRfYXVkaW9fdHJhbnNjcmlwdGlvbi5kZWx0YScgfHxcbiAgICAgICAgICAgIHBhcnNlZC50eXBlID09PSAncmVzcG9uc2Uub3V0cHV0X3RleHQuZGVsdGEnIHx8XG4gICAgICAgICAgICBwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLm91dHB1dF9hdWRpb190cmFuc2NyaXB0LmRlbHRhJyB8fFxuICAgICAgICAgICAgcGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5mdW5jdGlvbl9jYWxsX2FyZ3VtZW50cy5kZWx0YScpIHtcbiAgICAgICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLm91dHB1dF9hdWRpb190cmFuc2NyaXB0LmRlbHRhJykge1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnYXVkaW9fdHJhbnNjcmlwdF9kZWx0YScsIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3RyYW5zY3JpcHRfZGVsdGEnLFxuICAgICAgICAgICAgICAgICAgICBkZWx0YTogcGFyc2VkLmRlbHRhLFxuICAgICAgICAgICAgICAgICAgICBpdGVtSWQ6IHBhcnNlZC5pdGVtX2lkLFxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZUlkOiBwYXJzZWQucmVzcG9uc2VfaWQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBubyBzdXBwb3J0IGZvciBwYXJ0aWFsIHRyYW5zY3JpcHRzIHlldC5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS5hZGRlZCcgfHxcbiAgICAgICAgICAgIHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0uZG9uZScgfHxcbiAgICAgICAgICAgIHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0ucmV0cmlldmVkJykge1xuICAgICAgICAgICAgLy8gSGFuZGxlIE1DUCBsaXN0IHRvb2xzIGl0ZW1zIChvbmx5IGFjdCB3aGVuIGRvbmUgdG8gZW5zdXJlIHRvb2xzIGFyZSBwcmVzZW50KVxuICAgICAgICAgICAgaWYgKHBhcnNlZC5pdGVtLnR5cGUgPT09ICdtY3BfbGlzdF90b29scycgJiZcbiAgICAgICAgICAgICAgICBwYXJzZWQudHlwZSA9PT0gJ2NvbnZlcnNhdGlvbi5pdGVtLmRvbmUnKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2VydmVyTGFiZWwgPSBwYXJzZWQuaXRlbS5zZXJ2ZXJfbGFiZWwgPz8gJyc7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9vbHMgPSAocGFyc2VkLml0ZW0udG9vbHMgPz8gW10pO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnbWNwX3Rvb2xzX2xpc3RlZCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZlckxhYmVsLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbHMsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZW1pdHRpbmcgbWNwX3Rvb2xzX2xpc3RlZCcsIGVyciwgcGFyc2VkLml0ZW0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBXZSBkbyBub3QgYWRkIHRoaXMgaXRlbSB0byBoaXN0b3J5OyBpdCdzIGEgdHJhbnNwb3J0LWxldmVsIHNpZGUtY2hhbm5lbC5cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocGFyc2VkLml0ZW0udHlwZSA9PT0gJ21lc3NhZ2UnKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJldmlvdXNJdGVtSWQgPSBwYXJzZWQudHlwZSA9PT0gJ2NvbnZlcnNhdGlvbi5pdGVtLmFkZGVkJyB8fFxuICAgICAgICAgICAgICAgICAgICBwYXJzZWQudHlwZSA9PT0gJ2NvbnZlcnNhdGlvbi5pdGVtLmRvbmUnXG4gICAgICAgICAgICAgICAgICAgID8gcGFyc2VkLnByZXZpb3VzX2l0ZW1faWRcbiAgICAgICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSByZWFsdGltZU1lc3NhZ2VJdGVtU2NoZW1hLnBhcnNlKHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbUlkOiBwYXJzZWQuaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNJdGVtSWQsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IHBhcnNlZC5pdGVtLnR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHJvbGU6IHBhcnNlZC5pdGVtLnJvbGUsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHBhcnNlZC5pdGVtLmNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogcGFyc2VkLml0ZW0uc3RhdHVzLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnaXRlbV91cGRhdGUnLCBpdGVtKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocGFyc2VkLml0ZW0udHlwZSA9PT0gJ21jcF9hcHByb3ZhbF9yZXF1ZXN0JyAmJlxuICAgICAgICAgICAgICAgIHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0uZG9uZScpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtID0gcGFyc2VkLml0ZW07XG4gICAgICAgICAgICAgICAgY29uc3QgbWNwQXBwcm92YWxSZXF1ZXN0ID0gcmVhbHRpbWVNY3BDYWxsQXBwcm92YWxSZXF1ZXN0SXRlbS5wYXJzZSh7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1JZDogaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogaXRlbS50eXBlLFxuICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJMYWJlbDogaXRlbS5zZXJ2ZXJfbGFiZWwsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzOiBKU09OLnBhcnNlKGl0ZW0uYXJndW1lbnRzIHx8ICd7fScpLFxuICAgICAgICAgICAgICAgICAgICBhcHByb3ZlZDogaXRlbS5hcHByb3ZlZCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2l0ZW1fdXBkYXRlJywgbWNwQXBwcm92YWxSZXF1ZXN0KTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ21jcF9hcHByb3ZhbF9yZXF1ZXN0JywgbWNwQXBwcm92YWxSZXF1ZXN0KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocGFyc2VkLml0ZW0udHlwZSA9PT0gJ21jcF90b29sX2NhbGwnIHx8XG4gICAgICAgICAgICAgICAgcGFyc2VkLml0ZW0udHlwZSA9PT0gJ21jcF9jYWxsJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXR1cyA9IHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0uZG9uZSdcbiAgICAgICAgICAgICAgICAgICAgPyAnY29tcGxldGVkJ1xuICAgICAgICAgICAgICAgICAgICA6ICdpbl9wcm9ncmVzcyc7XG4gICAgICAgICAgICAgICAgY29uc3QgbWNwQ2FsbCA9IHJlYWx0aW1lTWNwQ2FsbEl0ZW0ucGFyc2Uoe1xuICAgICAgICAgICAgICAgICAgICBpdGVtSWQ6IHBhcnNlZC5pdGVtLmlkLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBwYXJzZWQuaXRlbS50eXBlLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXMsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50czogcGFyc2VkLml0ZW0uYXJndW1lbnRzLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBwYXJzZWQuaXRlbS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQ6IHBhcnNlZC5pdGVtLm91dHB1dCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2l0ZW1fdXBkYXRlJywgbWNwQ2FsbCk7XG4gICAgICAgICAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0uZG9uZScpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdtY3BfdG9vbF9jYWxsX2NvbXBsZXRlZCcsIG1jcENhbGwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2UubWNwX2NhbGwuaW5fcHJvZ3Jlc3MnKSB7XG4gICAgICAgICAgICBjb25zdCBpdGVtID0gcGFyc2VkO1xuICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdjb252ZXJzYXRpb24uaXRlbS5yZXRyaWV2ZScsXG4gICAgICAgICAgICAgICAgaXRlbV9pZDogaXRlbS5pdGVtX2lkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAnbWNwX2xpc3RfdG9vbHMuaW5fcHJvZ3Jlc3MnKSB7XG4gICAgICAgICAgICBjb25zdCBpdGVtID0gcGFyc2VkO1xuICAgICAgICAgICAgaWYgKGl0ZW0uaXRlbV9pZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NvbnZlcnNhdGlvbi5pdGVtLnJldHJpZXZlJyxcbiAgICAgICAgICAgICAgICAgICAgaXRlbV9pZDogaXRlbS5pdGVtX2lkLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLm91dHB1dF9pdGVtLmRvbmUnIHx8XG4gICAgICAgICAgICBwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLm91dHB1dF9pdGVtLmFkZGVkJykge1xuICAgICAgICAgICAgY29uc3QgaXRlbSA9IHBhcnNlZC5pdGVtO1xuICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2Z1bmN0aW9uX2NhbGwnICYmIGl0ZW0uc3RhdHVzID09PSAnY29tcGxldGVkJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb2xDYWxsID0gcmVhbHRpbWVUb29sQ2FsbEl0ZW0ucGFyc2Uoe1xuICAgICAgICAgICAgICAgICAgICBpdGVtSWQ6IGl0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IGl0ZW0udHlwZSxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnaW5fcHJvZ3Jlc3MnLCAvLyB3ZSBzZXQgaXQgdG8gaW5fcHJvZ3Jlc3MgZm9yIHRoZSBVSSBhcyBpdCB3aWxsIG9ubHkgYmUgY29tcGxldGVkIHdpdGggdGhlIG91dHB1dFxuICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHM6IGl0ZW0uYXJndW1lbnRzLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBpdGVtLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dDogbnVsbCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2l0ZW1fdXBkYXRlJywgdG9vbENhbGwpO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZnVuY3Rpb25fY2FsbCcsIHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGl0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbl9jYWxsJyxcbiAgICAgICAgICAgICAgICAgICAgY2FsbElkOiBpdGVtLmNhbGxfaWQgPz8gJycsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50czogaXRlbS5hcmd1bWVudHMgPz8gJycsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZSA/PyAnJyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnbWNwX3Rvb2xfY2FsbCcgfHwgaXRlbS50eXBlID09PSAnbWNwX2NhbGwnKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWNwQ2FsbCA9IHJlYWx0aW1lTWNwQ2FsbEl0ZW0ucGFyc2Uoe1xuICAgICAgICAgICAgICAgICAgICBpdGVtSWQ6IGl0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IGl0ZW0udHlwZSxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLm91dHB1dF9pdGVtLmRvbmUnXG4gICAgICAgICAgICAgICAgICAgICAgICA/ICdjb21wbGV0ZWQnXG4gICAgICAgICAgICAgICAgICAgICAgICA6ICdpbl9wcm9ncmVzcycsIC8vIHdlIHNldCBpdCB0byBpbl9wcm9ncmVzcyBmb3IgdGhlIFVJIGFzIGl0IHdpbGwgb25seSBiZSBjb21wbGV0ZWQgd2l0aCB0aGUgb3V0cHV0XG4gICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50czogaXRlbS5hcmd1bWVudHMsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0OiBpdGVtLm91dHB1dCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2l0ZW1fdXBkYXRlJywgbWNwQ2FsbCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ21lc3NhZ2UnKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVhbHRpbWVJdGVtID0gcmVhbHRpbWVNZXNzYWdlSXRlbVNjaGVtYS5wYXJzZSh7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1JZDogcGFyc2VkLml0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IHBhcnNlZC5pdGVtLnR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHJvbGU6IHBhcnNlZC5pdGVtLnJvbGUsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHBhcnNlZC5pdGVtLmNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogcGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5vdXRwdXRfaXRlbS5kb25lJ1xuICAgICAgICAgICAgICAgICAgICAgICAgPyAoaXRlbS5zdGF0dXMgPz8gJ2NvbXBsZXRlZCcpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IChpdGVtLnN0YXR1cyA/PyAnaW5fcHJvZ3Jlc3MnKSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2l0ZW1fdXBkYXRlJywgcmVhbHRpbWVJdGVtKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgX29uRXJyb3IoZXJyb3IpIHtcbiAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICAgICAgICBlcnJvcixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9vbk9wZW4oKSB7XG4gICAgICAgIHRoaXMuZW1pdCgnY29ubmVjdGVkJyk7XG4gICAgfVxuICAgIF9vbkNsb3NlKCkge1xuICAgICAgICB0aGlzLmVtaXQoJ2Rpc2Nvbm5lY3RlZCcpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGEgbWVzc2FnZSB0byB0aGUgUmVhbHRpbWUgQVBJLiBUaGlzIHdpbGwgY3JlYXRlIGEgbmV3IGl0ZW0gaW4gdGhlIGNvbnZlcnNhdGlvbiBhbmRcbiAgICAgKiB0cmlnZ2VyIGEgcmVzcG9uc2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbWVzc2FnZSAtIFRoZSBtZXNzYWdlIHRvIHNlbmQuXG4gICAgICogQHBhcmFtIG90aGVyRXZlbnREYXRhIC0gQWRkaXRpb25hbCBldmVudCBkYXRhIHRvIHNlbmQuXG4gICAgICovXG4gICAgc2VuZE1lc3NhZ2UobWVzc2FnZSwgb3RoZXJFdmVudERhdGEsIHsgdHJpZ2dlclJlc3BvbnNlID0gdHJ1ZSB9ID0ge30pIHtcbiAgICAgICAgY29uc3QgY29udGVudCA9IHR5cGVvZiBtZXNzYWdlID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgPyBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaW5wdXRfdGV4dCcsXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IG1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF1cbiAgICAgICAgICAgIDogbWVzc2FnZS5jb250ZW50Lm1hcCgoY29udGVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChjb250ZW50LnR5cGUgPT09ICdpbnB1dF9pbWFnZScpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdpbnB1dF9pbWFnZScsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbWFnZV91cmw6IGNvbnRlbnQuaW1hZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi4oY29udGVudC5wcm92aWRlckRhdGEgPz8ge30pLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gY29udGVudDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICB0eXBlOiAnY29udmVyc2F0aW9uLml0ZW0uY3JlYXRlJyxcbiAgICAgICAgICAgIGl0ZW06IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnbWVzc2FnZScsXG4gICAgICAgICAgICAgICAgcm9sZTogJ3VzZXInLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLi4ub3RoZXJFdmVudERhdGEsXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodHJpZ2dlclJlc3BvbnNlKSB7XG4gICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3Jlc3BvbnNlLmNyZWF0ZScsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhZGRJbWFnZShpbWFnZSwgeyB0cmlnZ2VyUmVzcG9uc2UgPSB0cnVlIH0gPSB7fSkge1xuICAgICAgICB0aGlzLnNlbmRNZXNzYWdlKHtcbiAgICAgICAgICAgIHR5cGU6ICdtZXNzYWdlJyxcbiAgICAgICAgICAgIHJvbGU6ICd1c2VyJyxcbiAgICAgICAgICAgIGNvbnRlbnQ6IFt7IHR5cGU6ICdpbnB1dF9pbWFnZScsIGltYWdlIH1dLFxuICAgICAgICB9LCB7fSwgeyB0cmlnZ2VyUmVzcG9uc2UgfSk7XG4gICAgfVxuICAgIF9nZXRNZXJnZWRTZXNzaW9uQ29uZmlnKGNvbmZpZykge1xuICAgICAgICBjb25zdCBuZXdDb25maWcgPSB0b05ld1Nlc3Npb25Db25maWcoY29uZmlnKTtcbiAgICAgICAgY29uc3Qgbm9pc2VSZWR1Y3Rpb25PdmVycmlkZSA9IG5ld0NvbmZpZy5hdWRpbz8uaW5wdXQ/Lm5vaXNlUmVkdWN0aW9uO1xuICAgICAgICBjb25zdCB0cmFuc2NyaXB0aW9uT3ZlcnJpZGUgPSBuZXdDb25maWcuYXVkaW8/LmlucHV0Py50cmFuc2NyaXB0aW9uO1xuICAgICAgICBjb25zdCB0dXJuRGV0ZWN0aW9uT3ZlcnJpZGUgPSBPcGVuQUlSZWFsdGltZUJhc2UuYnVpbGRUdXJuRGV0ZWN0aW9uQ29uZmlnKG5ld0NvbmZpZy5hdWRpbz8uaW5wdXQ/LnR1cm5EZXRlY3Rpb24pO1xuICAgICAgICBjb25zdCBzZXNzaW9uRGF0YSA9IHtcbiAgICAgICAgICAgIHR5cGU6ICdyZWFsdGltZScsXG4gICAgICAgICAgICBpbnN0cnVjdGlvbnM6IG5ld0NvbmZpZy5pbnN0cnVjdGlvbnMsXG4gICAgICAgICAgICBtb2RlbDogbmV3Q29uZmlnLm1vZGVsID8/IHRoaXMuI21vZGVsLFxuICAgICAgICAgICAgb3V0cHV0X21vZGFsaXRpZXM6IG5ld0NvbmZpZy5vdXRwdXRNb2RhbGl0aWVzID8/XG4gICAgICAgICAgICAgICAgREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUcub3V0cHV0TW9kYWxpdGllcyxcbiAgICAgICAgICAgIGF1ZGlvOiB7XG4gICAgICAgICAgICAgICAgaW5wdXQ6IHtcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiBuZXdDb25maWcuYXVkaW8/LmlucHV0Py5mb3JtYXQgPz9cbiAgICAgICAgICAgICAgICAgICAgICAgIERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX1NFU1NJT05fQ09ORklHLmF1ZGlvPy5pbnB1dD8uZm9ybWF0LFxuICAgICAgICAgICAgICAgICAgICBub2lzZV9yZWR1Y3Rpb246IG5vaXNlUmVkdWN0aW9uT3ZlcnJpZGUgPT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy5hdWRpbz8uaW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/Lm5vaXNlUmVkdWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG5vaXNlUmVkdWN0aW9uT3ZlcnJpZGUsXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zY3JpcHRpb246IHRyYW5zY3JpcHRpb25PdmVycmlkZSA9PT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICA/IERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX1NFU1NJT05fQ09ORklHLmF1ZGlvPy5pbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8udHJhbnNjcmlwdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgOiB0cmFuc2NyaXB0aW9uT3ZlcnJpZGUsXG4gICAgICAgICAgICAgICAgICAgIHR1cm5fZGV0ZWN0aW9uOiB0dXJuRGV0ZWN0aW9uT3ZlcnJpZGUgPT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy5hdWRpbz8uaW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/LnR1cm5EZXRlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgIDogdHVybkRldGVjdGlvbk92ZXJyaWRlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb3V0cHV0OiB7XG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdDogbmV3Q29uZmlnLmF1ZGlvPy5vdXRwdXQ/LmZvcm1hdCA/P1xuICAgICAgICAgICAgICAgICAgICAgICAgREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUcuYXVkaW8/Lm91dHB1dD8uZm9ybWF0LFxuICAgICAgICAgICAgICAgICAgICB2b2ljZTogbmV3Q29uZmlnLmF1ZGlvPy5vdXRwdXQ/LnZvaWNlID8/XG4gICAgICAgICAgICAgICAgICAgICAgICBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy5hdWRpbz8ub3V0cHV0Py52b2ljZSxcbiAgICAgICAgICAgICAgICAgICAgc3BlZWQ6IG5ld0NvbmZpZy5hdWRpbz8ub3V0cHV0Py5zcGVlZCA/P1xuICAgICAgICAgICAgICAgICAgICAgICAgREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUcuYXVkaW8/Lm91dHB1dD8uc3BlZWQsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0b29sX2Nob2ljZTogbmV3Q29uZmlnLnRvb2xDaG9pY2UgPz9cbiAgICAgICAgICAgICAgICBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy50b29sQ2hvaWNlLFxuICAgICAgICAgICAgLy8gV2UgZG9uJ3Qgc2V0IHRyYWNpbmcgaGVyZSB0byBtYWtlIHN1cmUgdGhhdCB3ZSBkb24ndCB0cnkgdG8gb3ZlcnJpZGUgaXQgb24gZXZlcnlcbiAgICAgICAgICAgIC8vIHNlc3Npb24udXBkYXRlIGFzIGl0IG1pZ2h0IGxlYWQgdG8gZXJyb3JzXG4gICAgICAgICAgICAuLi4obmV3Q29uZmlnLnByb3ZpZGVyRGF0YSA/PyB7fSksXG4gICAgICAgIH07XG4gICAgICAgIGlmIChuZXdDb25maWcucHJvbXB0KSB7XG4gICAgICAgICAgICBzZXNzaW9uRGF0YS5wcm9tcHQgPSB7XG4gICAgICAgICAgICAgICAgaWQ6IG5ld0NvbmZpZy5wcm9tcHQucHJvbXB0SWQsXG4gICAgICAgICAgICAgICAgdmVyc2lvbjogbmV3Q29uZmlnLnByb21wdC52ZXJzaW9uLFxuICAgICAgICAgICAgICAgIHZhcmlhYmxlczogbmV3Q29uZmlnLnByb21wdC52YXJpYWJsZXMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChuZXdDb25maWcudG9vbHMgJiYgbmV3Q29uZmlnLnRvb2xzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHNlc3Npb25EYXRhLnRvb2xzID0gbmV3Q29uZmlnLnRvb2xzLm1hcCgodG9vbCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBpY2tEZWZpbmVkID0gKG9iaikgPT4gT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKG9iaikuZmlsdGVyKChbLCB2YWx1ZV0pID0+IHR5cGVvZiB2YWx1ZSAhPT0gJ3VuZGVmaW5lZCcpKTtcbiAgICAgICAgICAgICAgICBpZiAodG9vbC50eXBlID09PSAnbWNwJykge1xuICAgICAgICAgICAgICAgICAgICAvLyBSZWFsdGltZSBBUEkgTUNQIHRvb2wgc2hhcGU6IHNlc3Npb24udXBkYXRlIHByb3BlcnRpZXMgYW5kIE1DUCB0b29sIGhlYWRlcnNcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBpY2tEZWZpbmVkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdtY3AnLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2VydmVyX2xhYmVsOiB0b29sLnNlcnZlcl9sYWJlbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZlcl91cmw6IHRvb2wuc2VydmVyX3VybCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZlcl9kZXNjcmlwdGlvbjogdG9vbC5zZXJ2ZXJfZGVzY3JpcHRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0b3JfaWQ6IHRvb2wuY29ubmVjdG9yX2lkLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogdG9vbC5hdXRob3JpemF0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogdG9vbC5oZWFkZXJzLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWxsb3dlZF90b29sczogdG9vbC5hbGxvd2VkX3Rvb2xzLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZV9hcHByb3ZhbDogdG9vbC5yZXF1aXJlX2FwcHJvdmFsLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gUmVhbHRpbWUgQVBJIGZ1bmN0aW9uIHRvb2wgc2hhcGU6IGtlZXAgb25seSBkb2N1bWVudGVkIGZpZWxkcyBmb3Igc2Vzc2lvbi51cGRhdGUuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBpY2tEZWZpbmVkKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogdG9vbC50eXBlLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiB0b29sLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0b29sLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzOiB0b29sLnBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2Vzc2lvbkRhdGE7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEJ1aWxkIHRoZSBwYXlsb2FkIG9iamVjdCBleHBlY3RlZCBieSB0aGUgUmVhbHRpbWUgQVBJIHdoZW4gY3JlYXRpbmcgb3IgdXBkYXRpbmcgYSBzZXNzaW9uLlxuICAgICAqXG4gICAgICogVGhlIGhlbHBlciBjZW50cmFsaXNlcyB0aGUgY29udmVyc2lvbiBmcm9tIGNhbWVsQ2FzZSBydW50aW1lIGNvbmZpZyB0byB0aGUgc25ha2VfY2FzZSBwYXlsb2FkXG4gICAgICogcmVxdWlyZWQgYnkgdGhlIFJlYWx0aW1lIEFQSSBzbyB0cmFuc3BvcnRzIHRoYXQgbmVlZCBhIG9uZS1vZmYgcGF5bG9hZCAoZm9yIGV4YW1wbGUgU0lQIGNhbGxcbiAgICAgKiBhY2NlcHRhbmNlKSBjYW4gcmV1c2UgdGhlIHNhbWUgbG9naWMgd2l0aG91dCBkdXBsaWNhdGluZyBwcml2YXRlIHN0YXRlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbmZpZyAtIFRoZSBzZXNzaW9uIGNvbmZpZyB0byBtZXJnZSB3aXRoIGRlZmF1bHRzLlxuICAgICAqL1xuICAgIGJ1aWxkU2Vzc2lvblBheWxvYWQoY29uZmlnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9nZXRNZXJnZWRTZXNzaW9uQ29uZmlnKGNvbmZpZyk7XG4gICAgfVxuICAgIHN0YXRpYyBidWlsZFR1cm5EZXRlY3Rpb25Db25maWcoYykge1xuICAgICAgICBpZiAodHlwZW9mIGMgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IHR5cGUsIGNyZWF0ZVJlc3BvbnNlLCBjcmVhdGVfcmVzcG9uc2UsIGVhZ2VybmVzcywgaW50ZXJydXB0UmVzcG9uc2UsIGludGVycnVwdF9yZXNwb25zZSwgcHJlZml4UGFkZGluZ01zLCBwcmVmaXhfcGFkZGluZ19tcywgc2lsZW5jZUR1cmF0aW9uTXMsIHNpbGVuY2VfZHVyYXRpb25fbXMsIHRocmVzaG9sZCwgaWRsZVRpbWVvdXRNcywgaWRsZV90aW1lb3V0X21zLCAuLi5yZXN0IH0gPSBjO1xuICAgICAgICBjb25zdCBjb25maWcgPSB7XG4gICAgICAgICAgICB0eXBlLFxuICAgICAgICAgICAgY3JlYXRlX3Jlc3BvbnNlOiBjcmVhdGVSZXNwb25zZSA/PyBjcmVhdGVfcmVzcG9uc2UsXG4gICAgICAgICAgICBlYWdlcm5lc3MsXG4gICAgICAgICAgICBpbnRlcnJ1cHRfcmVzcG9uc2U6IGludGVycnVwdFJlc3BvbnNlID8/IGludGVycnVwdF9yZXNwb25zZSxcbiAgICAgICAgICAgIHByZWZpeF9wYWRkaW5nX21zOiBwcmVmaXhQYWRkaW5nTXMgPz8gcHJlZml4X3BhZGRpbmdfbXMsXG4gICAgICAgICAgICBzaWxlbmNlX2R1cmF0aW9uX21zOiBzaWxlbmNlRHVyYXRpb25NcyA/PyBzaWxlbmNlX2R1cmF0aW9uX21zLFxuICAgICAgICAgICAgaWRsZV90aW1lb3V0X21zOiBpZGxlVGltZW91dE1zID8/IGlkbGVfdGltZW91dF9tcyxcbiAgICAgICAgICAgIHRocmVzaG9sZCxcbiAgICAgICAgICAgIC4uLnJlc3QsXG4gICAgICAgIH07XG4gICAgICAgIC8vIFJlbW92ZSB1bmRlZmluZWQgdmFsdWVzIGZyb20gdGhlIGNvbmZpZ1xuICAgICAgICBPYmplY3Qua2V5cyhjb25maWcpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgaWYgKGNvbmZpZ1trZXldID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgZGVsZXRlIGNvbmZpZ1trZXldO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKGNvbmZpZykubGVuZ3RoID4gMCA/IGNvbmZpZyA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgaW50ZXJuYWwgdHJhY2luZyBjb25maWcuIFRoaXMgaXMgdXNlZCB0byB0cmFjayB0aGUgdHJhY2luZyBjb25maWcgdGhhdCBoYXMgYmVlbiBzZXRcbiAgICAgKiBkdXJpbmcgdGhlIHNlc3Npb24uY3JlYXRlIGV2ZW50LlxuICAgICAqL1xuICAgIHNldCBfdHJhY2luZ0NvbmZpZyh0cmFjaW5nQ29uZmlnKSB7XG4gICAgICAgIHRoaXMuI3RyYWNpbmdDb25maWcgPSB0cmFjaW5nQ29uZmlnO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSB0cmFjaW5nIGNvbmZpZyBmb3IgdGhlIHNlc3Npb24uIFRoaXMgd2lsbCBzZW5kIHRoZSB0cmFjaW5nIGNvbmZpZyB0byB0aGUgUmVhbHRpbWUgQVBJLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRyYWNpbmdDb25maWcgLSBUaGUgdHJhY2luZyBjb25maWcgdG8gc2V0LiBXZSBkb24ndCBzdXBwb3J0ICdhdXRvJyBoZXJlIGFzIHRoZSBTREsgd2lsbCBhbHdheXMgY29uZmlndXJlIGEgV29ya2Zsb3cgTmFtZSB1bmxlc3MgaXQgZXhpc3RzXG4gICAgICovXG4gICAgX3VwZGF0ZVRyYWNpbmdDb25maWcodHJhY2luZ0NvbmZpZykge1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMuI3RyYWNpbmdDb25maWcgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAvLyB0cmVhdGluZyBpdCBhcyBkZWZhdWx0IHZhbHVlXG4gICAgICAgICAgICB0aGlzLiN0cmFjaW5nQ29uZmlnID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHJhY2luZ0NvbmZpZyA9PT0gJ2F1dG8nKSB7XG4gICAgICAgICAgICAvLyB0dXJuIG9uIHRyYWNpbmcgaW4gYXV0byBtb2RlXG4gICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3Nlc3Npb24udXBkYXRlJyxcbiAgICAgICAgICAgICAgICBzZXNzaW9uOiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdyZWFsdGltZScsXG4gICAgICAgICAgICAgICAgICAgIHRyYWNpbmc6ICdhdXRvJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuI3RyYWNpbmdDb25maWcgIT09IG51bGwgJiZcbiAgICAgICAgICAgIHR5cGVvZiB0aGlzLiN0cmFjaW5nQ29uZmlnICE9PSAnc3RyaW5nJyAmJlxuICAgICAgICAgICAgdHlwZW9mIHRyYWNpbmdDb25maWcgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAvLyB0cmFjaW5nIGlzIGFscmVhZHkgc2V0LCB3ZSBjYW4ndCBjaGFuZ2UgaXRcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKCdUcmFjaW5nIGNvbmZpZyBpcyBhbHJlYWR5IHNldCwgc2tpcHBpbmcgc2V0dGluZyBpdCBhZ2Fpbi4gVGhpcyBsaWtlbHkgaGFwcGVucyB3aGVuIHlvdSBhbHJlYWR5IHNldCBhIHRyYWNpbmcgY29uZmlnIG9uIHNlc3Npb24gY3JlYXRpb24uJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRyYWNpbmdDb25maWcgPT09IG51bGwpIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnRGlzYWJsaW5nIHRyYWNpbmcgZm9yIHRoaXMgc2Vzc2lvbi4gSXQgY2Fubm90IGJlIHR1cm5lZCBvbiBmb3IgdGhpcyBzZXNzaW9uIGZyb20gdGhpcyBwb2ludCBvbi4nKTtcbiAgICAgICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnc2Vzc2lvbi51cGRhdGUnLFxuICAgICAgICAgICAgICAgIHNlc3Npb246IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3JlYWx0aW1lJyxcbiAgICAgICAgICAgICAgICAgICAgdHJhY2luZzogbnVsbCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuI3RyYWNpbmdDb25maWcgPT09IG51bGwgfHxcbiAgICAgICAgICAgIHR5cGVvZiB0aGlzLiN0cmFjaW5nQ29uZmlnID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgLy8gdHJhY2luZyBpcyBjdXJyZW50bHkgbm90IHNldCBzbyB3ZSBjYW4gc2V0IGl0IHRvIHRoZSBuZXcgdmFsdWVcbiAgICAgICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnc2Vzc2lvbi51cGRhdGUnLFxuICAgICAgICAgICAgICAgIHNlc3Npb246IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3JlYWx0aW1lJyxcbiAgICAgICAgICAgICAgICAgICAgdHJhY2luZzogdHJhY2luZ0NvbmZpZyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRyYWNpbmdDb25maWc/Lmdyb3VwX2lkICE9PSB0aGlzLiN0cmFjaW5nQ29uZmlnPy5ncm91cF9pZCB8fFxuICAgICAgICAgICAgdHJhY2luZ0NvbmZpZz8ubWV0YWRhdGEgIT09IHRoaXMuI3RyYWNpbmdDb25maWc/Lm1ldGFkYXRhIHx8XG4gICAgICAgICAgICB0cmFjaW5nQ29uZmlnPy53b3JrZmxvd19uYW1lICE9PSB0aGlzLiN0cmFjaW5nQ29uZmlnPy53b3JrZmxvd19uYW1lKSB7XG4gICAgICAgICAgICBsb2dnZXIud2FybignTWlzbWF0Y2ggaW4gdHJhY2luZyBjb25maWcuIElnbm9yaW5nIHRoZSBuZXcgdHJhY2luZyBjb25maWcuIFRoaXMgbGlrZWx5IGhhcHBlbnMgd2hlbiB5b3UgYWxyZWFkeSBzZXQgYSB0cmFjaW5nIGNvbmZpZyBvbiBzZXNzaW9uIGNyZWF0aW9uLiBDdXJyZW50IHRyYWNpbmcgY29uZmlnOiAlcywgbmV3IHRyYWNpbmcgY29uZmlnOiAlcycsIEpTT04uc3RyaW5naWZ5KHRoaXMuI3RyYWNpbmdDb25maWcpLCBKU09OLnN0cmluZ2lmeSh0cmFjaW5nQ29uZmlnKSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgdHlwZTogJ3Nlc3Npb24udXBkYXRlJyxcbiAgICAgICAgICAgIHNlc3Npb246IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAncmVhbHRpbWUnLFxuICAgICAgICAgICAgICAgIHRyYWNpbmc6IHRyYWNpbmdDb25maWcsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgc2Vzc2lvbiBjb25maWcuIFRoaXMgd2lsbCBtZXJnZSBpdCB3aXRoIHRoZSBjdXJyZW50IHNlc3Npb24gY29uZmlnIHdpdGggdGhlIGRlZmF1bHRcbiAgICAgKiB2YWx1ZXMgYW5kIHNlbmQgaXQgdG8gdGhlIFJlYWx0aW1lIEFQSS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb25maWcgLSBUaGUgc2Vzc2lvbiBjb25maWcgdG8gdXBkYXRlLlxuICAgICAqL1xuICAgIHVwZGF0ZVNlc3Npb25Db25maWcoY29uZmlnKSB7XG4gICAgICAgIGNvbnN0IHNlc3Npb25EYXRhID0gdGhpcy5idWlsZFNlc3Npb25QYXlsb2FkKGNvbmZpZyk7XG4gICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgIHR5cGU6ICdzZXNzaW9uLnVwZGF0ZScsXG4gICAgICAgICAgICBzZXNzaW9uOiBzZXNzaW9uRGF0YSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmQgdGhlIG91dHB1dCBvZiBhIGZ1bmN0aW9uIGNhbGwgdG8gdGhlIFJlYWx0aW1lIEFQSS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0b29sQ2FsbCAtIFRoZSB0b29sIGNhbGwgdG8gc2VuZCB0aGUgb3V0cHV0IGZvci5cbiAgICAgKiBAcGFyYW0gb3V0cHV0IC0gVGhlIG91dHB1dCBvZiB0aGUgZnVuY3Rpb24gY2FsbC5cbiAgICAgKiBAcGFyYW0gc3RhcnRSZXNwb25zZSAtIFdoZXRoZXIgdG8gc3RhcnQgYSBuZXcgcmVzcG9uc2UgYWZ0ZXIgc2VuZGluZyB0aGUgb3V0cHV0LlxuICAgICAqL1xuICAgIHNlbmRGdW5jdGlvbkNhbGxPdXRwdXQodG9vbENhbGwsIG91dHB1dCwgc3RhcnRSZXNwb25zZSA9IHRydWUpIHtcbiAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgdHlwZTogJ2NvbnZlcnNhdGlvbi5pdGVtLmNyZWF0ZScsXG4gICAgICAgICAgICBpdGVtOiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2Z1bmN0aW9uX2NhbGxfb3V0cHV0JyxcbiAgICAgICAgICAgICAgICBvdXRwdXQsXG4gICAgICAgICAgICAgICAgY2FsbF9pZDogdG9vbENhbGwuY2FsbElkLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBpdGVtID0gcmVhbHRpbWVUb29sQ2FsbEl0ZW0ucGFyc2Uoe1xuICAgICAgICAgICAgICAgIGl0ZW1JZDogdG9vbENhbGwuaWQsXG4gICAgICAgICAgICAgICAgcHJldmlvdXNJdGVtSWQ6IHRvb2xDYWxsLnByZXZpb3VzSXRlbUlkLFxuICAgICAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbl9jYWxsJyxcbiAgICAgICAgICAgICAgICBzdGF0dXM6ICdjb21wbGV0ZWQnLFxuICAgICAgICAgICAgICAgIGFyZ3VtZW50czogdG9vbENhbGwuYXJndW1lbnRzLFxuICAgICAgICAgICAgICAgIG5hbWU6IHRvb2xDYWxsLm5hbWUsXG4gICAgICAgICAgICAgICAgb3V0cHV0LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2l0ZW1fdXBkYXRlJywgaXRlbSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIHBhcnNpbmcgdG9vbCBjYWxsIGl0ZW0nLCBlcnJvciwgdG9vbENhbGwpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdGFydFJlc3BvbnNlKSB7XG4gICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3Jlc3BvbnNlLmNyZWF0ZScsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGFuIGF1ZGlvIGJ1ZmZlciB0byB0aGUgUmVhbHRpbWUgQVBJLiBJZiBgeyBjb21taXQ6IHRydWUgfWAgaXMgcGFzc2VkLCB0aGUgYXVkaW8gYnVmZmVyXG4gICAgICogd2lsbCBiZSBjb21taXR0ZWQgYW5kIHRoZSBtb2RlbCB3aWxsIHN0YXJ0IHByb2Nlc3NpbmcgaXQuIFRoaXMgaXMgbmVjZXNzYXJ5IGlmIHlvdSBoYXZlXG4gICAgICogZGlzYWJsZWQgdHVybiBkZXRlY3Rpb24gLyB2b2ljZSBhY3Rpdml0eSBkZXRlY3Rpb24gKFZBRCkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXVkaW8gLSBUaGUgYXVkaW8gYnVmZmVyIHRvIHNlbmQuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBUaGUgb3B0aW9ucyBmb3IgdGhlIGF1ZGlvIGJ1ZmZlci5cbiAgICAgKi9cbiAgICBzZW5kQXVkaW8oYXVkaW8sIHsgY29tbWl0ID0gZmFsc2UgfSA9IHt9KSB7XG4gICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgIHR5cGU6ICdpbnB1dF9hdWRpb19idWZmZXIuYXBwZW5kJyxcbiAgICAgICAgICAgIGF1ZGlvOiBhcnJheUJ1ZmZlclRvQmFzZTY0KGF1ZGlvKSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChjb21taXQpIHtcbiAgICAgICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnaW5wdXRfYXVkaW9fYnVmZmVyLmNvbW1pdCcsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldCB0aGUgaGlzdG9yeSBvZiB0aGUgY29udmVyc2F0aW9uLiBUaGlzIHdpbGwgY3JlYXRlIGEgZGlmZiBiZXR3ZWVuIHRoZSBvbGQgYW5kIG5ldyBoaXN0b3J5XG4gICAgICogYW5kIHNlbmQgdGhlIG5lY2Vzc2FyeSBldmVudHMgdG8gdGhlIFJlYWx0aW1lIEFQSSB0byB1cGRhdGUgdGhlIGhpc3RvcnkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb2xkSGlzdG9yeSAtIFRoZSBvbGQgaGlzdG9yeSBvZiB0aGUgY29udmVyc2F0aW9uLlxuICAgICAqIEBwYXJhbSBuZXdIaXN0b3J5IC0gVGhlIG5ldyBoaXN0b3J5IG9mIHRoZSBjb252ZXJzYXRpb24uXG4gICAgICovXG4gICAgcmVzZXRIaXN0b3J5KG9sZEhpc3RvcnksIG5ld0hpc3RvcnkpIHtcbiAgICAgICAgY29uc3QgeyByZW1vdmFscywgYWRkaXRpb25zLCB1cGRhdGVzIH0gPSBkaWZmUmVhbHRpbWVIaXN0b3J5KG9sZEhpc3RvcnksIG5ld0hpc3RvcnkpO1xuICAgICAgICBjb25zdCByZW1vdmFsSWRzID0gbmV3IFNldChyZW1vdmFscy5tYXAoKGl0ZW0pID0+IGl0ZW0uaXRlbUlkKSk7XG4gICAgICAgIC8vIHdlIGRvbid0IGhhdmUgYW4gdXBkYXRlIGV2ZW50IGZvciBpdGVtcyBzbyB3ZSB3aWxsIHJlbW92ZSBhbmQgcmUtYWRkIHdoYXQncyB0aGVyZVxuICAgICAgICBmb3IgKGNvbnN0IHVwZGF0ZSBvZiB1cGRhdGVzKSB7XG4gICAgICAgICAgICByZW1vdmFsSWRzLmFkZCh1cGRhdGUuaXRlbUlkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVtb3ZhbElkcy5zaXplID4gMCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBpdGVtSWQgb2YgcmVtb3ZhbElkcykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NvbnZlcnNhdGlvbi5pdGVtLmRlbGV0ZScsXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1faWQ6IGl0ZW1JZCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhZGRpdGlvbnNBbmRVcGRhdGVzID0gWy4uLmFkZGl0aW9ucywgLi4udXBkYXRlc107XG4gICAgICAgIGZvciAoY29uc3QgYWRkaXRpb24gb2YgYWRkaXRpb25zQW5kVXBkYXRlcykge1xuICAgICAgICAgICAgaWYgKGFkZGl0aW9uLnR5cGUgPT09ICdtZXNzYWdlJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1FbnRyeSA9IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ21lc3NhZ2UnLFxuICAgICAgICAgICAgICAgICAgICByb2xlOiBhZGRpdGlvbi5yb2xlLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBhZGRpdGlvbi5jb250ZW50LFxuICAgICAgICAgICAgICAgICAgICBpZDogYWRkaXRpb24uaXRlbUlkLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKGFkZGl0aW9uLnJvbGUgIT09ICdzeXN0ZW0nICYmIGFkZGl0aW9uLnN0YXR1cykge1xuICAgICAgICAgICAgICAgICAgICBpdGVtRW50cnkuc3RhdHVzID0gYWRkaXRpb24uc3RhdHVzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjb252ZXJzYXRpb24uaXRlbS5jcmVhdGUnLFxuICAgICAgICAgICAgICAgICAgICBpdGVtOiBpdGVtRW50cnksXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChhZGRpdGlvbi50eXBlID09PSAnZnVuY3Rpb25fY2FsbCcpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIud2FybignRnVuY3Rpb24gY2FsbHMgY2Fubm90IGJlIG1hbnVhbGx5IGFkZGVkIG9yIHVwZGF0ZWQgYXQgdGhlIG1vbWVudC4gSWdub3JpbmcuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2VuZE1jcFJlc3BvbnNlKGFwcHJvdmFsUmVxdWVzdCwgYXBwcm92ZWQpIHtcbiAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgdHlwZTogJ2NvbnZlcnNhdGlvbi5pdGVtLmNyZWF0ZScsXG4gICAgICAgICAgICBwcmV2aW91c19pdGVtX2lkOiBhcHByb3ZhbFJlcXVlc3QuaXRlbUlkLFxuICAgICAgICAgICAgaXRlbToge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdtY3BfYXBwcm92YWxfcmVzcG9uc2UnLFxuICAgICAgICAgICAgICAgIGFwcHJvdmFsX3JlcXVlc3RfaWQ6IGFwcHJvdmFsUmVxdWVzdC5pdGVtSWQsXG4gICAgICAgICAgICAgICAgYXBwcm92ZTogYXBwcm92ZWQsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vcGVuYWlSZWFsdGltZUJhc2UubWpzLm1hcCIsIi8vLyA8cmVmZXJlbmNlIGxpYj1cImRvbVwiIC8+XG5pbXBvcnQgeyBpc0Jyb3dzZXJFbnZpcm9ubWVudCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvX3NoaW1zJztcbmltcG9ydCB7IFVzZXJFcnJvciB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUnO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBPcGVuQUlSZWFsdGltZUJhc2UsIH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVCYXNlLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VSZWFsdGltZUV2ZW50IH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVFdmVudHMubWpzXCI7XG5pbXBvcnQgeyBIRUFERVJTIH0gZnJvbSBcIi4vdXRpbHMubWpzXCI7XG4vKipcbiAqIFRyYW5zcG9ydCBsYXllciB0aGF0J3MgaGFuZGxpbmcgdGhlIGNvbm5lY3Rpb24gYmV0d2VlbiB0aGUgY2xpZW50IGFuZCBPcGVuQUkncyBSZWFsdGltZSBBUElcbiAqIHZpYSBXZWJSVEMuIFdoaWxlIHRoaXMgdHJhbnNwb3J0IGxheWVyIGlzIGRlc2lnbmVkIHRvIGJlIHVzZWQgd2l0aGluIGEgUmVhbHRpbWVTZXNzaW9uLCBpdCBjYW5cbiAqIGFsc28gYmUgdXNlZCBzdGFuZGFsb25lIGlmIHlvdSB3YW50IHRvIGhhdmUgYSBkaXJlY3QgY29ubmVjdGlvbiB0byB0aGUgUmVhbHRpbWUgQVBJLlxuICpcbiAqIFVubGVzcyB5b3Ugc3BlY2lmeSBhIGBtZWRpYVN0cmVhbWAgb3IgYGF1ZGlvRWxlbWVudGAgb3B0aW9uLCB0aGUgdHJhbnNwb3J0IGxheWVyIHdpbGxcbiAqIGF1dG9tYXRpY2FsbHkgY29uZmlndXJlIHRoZSBtaWNyb3Bob25lIGFuZCBhdWRpbyBvdXRwdXQgdG8gYmUgdXNlZCBieSB0aGUgc2Vzc2lvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIE9wZW5BSVJlYWx0aW1lV2ViUlRDIGV4dGVuZHMgT3BlbkFJUmVhbHRpbWVCYXNlIHtcbiAgICBvcHRpb25zO1xuICAgICN1cmw7XG4gICAgI3N0YXRlID0ge1xuICAgICAgICBzdGF0dXM6ICdkaXNjb25uZWN0ZWQnLFxuICAgICAgICBwZWVyQ29ubmVjdGlvbjogdW5kZWZpbmVkLFxuICAgICAgICBkYXRhQ2hhbm5lbDogdW5kZWZpbmVkLFxuICAgICAgICBjYWxsSWQ6IHVuZGVmaW5lZCxcbiAgICB9O1xuICAgICN1c2VJbnNlY3VyZUFwaUtleTtcbiAgICAjb25nb2luZ1Jlc3BvbnNlID0gZmFsc2U7XG4gICAgI211dGVkID0gZmFsc2U7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGlmICh0eXBlb2YgUlRDUGVlckNvbm5lY3Rpb24gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dlYlJUQyBpcyBub3Qgc3VwcG9ydGVkIGluIHRoaXMgZW52aXJvbm1lbnQnKTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcihvcHRpb25zKTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgdGhpcy4jdXJsID0gb3B0aW9ucy5iYXNlVXJsID8/IGBodHRwczovL2FwaS5vcGVuYWkuY29tL3YxL3JlYWx0aW1lL2NhbGxzYDtcbiAgICAgICAgdGhpcy4jdXNlSW5zZWN1cmVBcGlLZXkgPSBvcHRpb25zLnVzZUluc2VjdXJlQXBpS2V5ID8/IGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCBjYWxsIElEIG9mIHRoZSBXZWJSVEMgY29ubmVjdGlvbi5cbiAgICAgKi9cbiAgICBnZXQgY2FsbElkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jc3RhdGUuY2FsbElkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCBzdGF0dXMgb2YgdGhlIFdlYlJUQyBjb25uZWN0aW9uLlxuICAgICAqL1xuICAgIGdldCBzdGF0dXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNzdGF0ZS5zdGF0dXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IGNvbm5lY3Rpb24gc3RhdGUgb2YgdGhlIFdlYlJUQyBjb25uZWN0aW9uIGluY2x1ZGluZyB0aGUgcGVlciBjb25uZWN0aW9uIGFuZCBkYXRhXG4gICAgICogY2hhbm5lbC5cbiAgICAgKi9cbiAgICBnZXQgY29ubmVjdGlvblN0YXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jc3RhdGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdGhlIHNlc3Npb24gaXMgbXV0ZWQuXG4gICAgICovXG4gICAgZ2V0IG11dGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jbXV0ZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbm5lY3QgdG8gdGhlIFJlYWx0aW1lIEFQSS4gVGhpcyB3aWxsIGVzdGFibGlzaCB0aGUgY29ubmVjdGlvbiB0byB0aGUgT3BlbkFJIFJlYWx0aW1lIEFQSVxuICAgICAqIHZpYSBXZWJSVEMuXG4gICAgICpcbiAgICAgKiBJZiB5b3UgYXJlIHVzaW5nIGEgYnJvd3NlciwgdGhlIHRyYW5zcG9ydCBsYXllciB3aWxsIGFsc28gYXV0b21hdGljYWxseSBjb25maWd1cmUgdGhlXG4gICAgICogbWljcm9waG9uZSBhbmQgYXVkaW8gb3V0cHV0IHRvIGJlIHVzZWQgYnkgdGhlIHNlc3Npb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIFRoZSBvcHRpb25zIGZvciB0aGUgY29ubmVjdGlvbi5cbiAgICAgKi9cbiAgICBhc3luYyBjb25uZWN0KG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHRoaXMuI3N0YXRlLnN0YXR1cyA9PT0gJ2Nvbm5lY3RlZCcpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy4jc3RhdGUuc3RhdHVzID09PSAnY29ubmVjdGluZycpIHtcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKCdSZWFsdGltZSBjb25uZWN0aW9uIGFscmVhZHkgaW4gcHJvZ3Jlc3MuIFBsZWFzZSBhd2FpdCBvcmlnaW5hbCBwcm9taXNlJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbW9kZWwgPSBvcHRpb25zLm1vZGVsID8/IHRoaXMuY3VycmVudE1vZGVsO1xuICAgICAgICB0aGlzLmN1cnJlbnRNb2RlbCA9IG1vZGVsO1xuICAgICAgICBjb25zdCBiYXNlVXJsID0gb3B0aW9ucy51cmwgPz8gdGhpcy4jdXJsO1xuICAgICAgICBjb25zdCBhcGlLZXkgPSBhd2FpdCB0aGlzLl9nZXRBcGlLZXkob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IGlzQ2xpZW50S2V5ID0gdHlwZW9mIGFwaUtleSA9PT0gJ3N0cmluZycgJiYgYXBpS2V5LnN0YXJ0c1dpdGgoJ2VrXycpO1xuICAgICAgICBpZiAoaXNCcm93c2VyRW52aXJvbm1lbnQoKSAmJiAhdGhpcy4jdXNlSW5zZWN1cmVBcGlLZXkgJiYgIWlzQ2xpZW50S2V5KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdVc2luZyB0aGUgV2ViUlRDIGNvbm5lY3Rpb24gaW4gYSBicm93c2VyIGVudmlyb25tZW50IHJlcXVpcmVzIGFuIGVwaGVtZXJhbCBjbGllbnQga2V5LiBJZiB5b3UgbmVlZCB0byB1c2UgYSByZWd1bGFyIEFQSSBrZXksIHVzZSB0aGUgV2ViU29ja2V0IHRyYW5zcG9ydCBvciBzZXQgdGhlIGB1c2VJbnNlY3VyZUFwaUtleWAgb3B0aW9uIHRvIHRydWUuJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWFzeW5jLXByb21pc2UtZXhlY3V0b3JcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdXNlclNlc3Npb25Db25maWcgPSB7XG4gICAgICAgICAgICAgICAgICAgIC4uLihvcHRpb25zLmluaXRpYWxTZXNzaW9uQ29uZmlnIHx8IHt9KSxcbiAgICAgICAgICAgICAgICAgICAgbW9kZWw6IHRoaXMuY3VycmVudE1vZGVsLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY29uc3QgY29ubmVjdGlvblVybCA9IG5ldyBVUkwoYmFzZVVybCk7XG4gICAgICAgICAgICAgICAgbGV0IHBlZXJDb25uZWN0aW9uID0gbmV3IFJUQ1BlZXJDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YUNoYW5uZWwgPSBwZWVyQ29ubmVjdGlvbi5jcmVhdGVEYXRhQ2hhbm5lbCgnb2FpLWV2ZW50cycpO1xuICAgICAgICAgICAgICAgIGxldCBjYWxsSWQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgY29uc3QgYXR0YWNoQ29ubmVjdGlvblN0YXRlSGFuZGxlciA9IChjb25uZWN0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24ub25jb25uZWN0aW9uc3RhdGVjaGFuZ2UgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGNvbm5lY3Rpb24uY29ubmVjdGlvblN0YXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZGlzY29ubmVjdGVkJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdmYWlsZWQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Nsb3NlZCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gJ2Nvbm5lY3RlZCcgc3RhdGUgaXMgaGFuZGxlZCBieSBkYXRhQ2hhbm5lbC5vbm9wZW4uIFNvIHdlIGRvbid0IG5lZWQgdG8gaGFuZGxlIGl0IGhlcmUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gJ25ldycgYW5kICdjb25uZWN0aW5nJyBhcmUgaW50ZXJtZWRpYXRlIHN0YXRlcyBhbmQgZG8gbm90IHJlcXVpcmUgYWN0aW9uIGhlcmUuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBhdHRhY2hDb25uZWN0aW9uU3RhdGVIYW5kbGVyKHBlZXJDb25uZWN0aW9uKTtcbiAgICAgICAgICAgICAgICB0aGlzLiNzdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnY29ubmVjdGluZycsXG4gICAgICAgICAgICAgICAgICAgIHBlZXJDb25uZWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICBkYXRhQ2hhbm5lbCxcbiAgICAgICAgICAgICAgICAgICAgY2FsbElkLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdjb25uZWN0aW9uX2NoYW5nZScsIHRoaXMuI3N0YXRlLnN0YXR1cyk7XG4gICAgICAgICAgICAgICAgZGF0YUNoYW5uZWwuYWRkRXZlbnRMaXN0ZW5lcignb3BlbicsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4jc3RhdGUgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICdjb25uZWN0ZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGVlckNvbm5lY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhQ2hhbm5lbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxJZCxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgLy8gU2VuZGluZyB0aGUgc2Vzc2lvbiBjb25maWcgYWdhaW4gaGVyZSBvbmNlIHRoZSBjaGFubmVsIGlzIGNvbm5lY3RlZCB0byBlbnN1cmVcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhhdCB0aGUgc2Vzc2lvbiBjb25maWcgaXMgc2VudCB0byB0aGUgc2VydmVyIGJlZm9yZSB0aGUgZmlyc3QgcmVzcG9uc2UgaXMgcmVjZWl2ZWRcbiAgICAgICAgICAgICAgICAgICAgLy8gU2V0dGluZyBpdCBvbiBjb25uZWN0aW9uIHNob3VsZCB3b3JrIGJ1dCB0aGUgY29uZmlnIGlzIG5vdCBiZWluZyB2YWxpZGF0ZWQgb24gdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vIHNlcnZlci4gVGhpcyB0cmlnZ2VycyBhIHZhbGlkYXRpb24gZXJyb3IgaWYgdGhlIGNvbmZpZyBpcyBub3QgdmFsaWQuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU2Vzc2lvbkNvbmZpZyh1c2VyU2Vzc2lvbkNvbmZpZyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnY29ubmVjdGlvbl9jaGFuZ2UnLCB0aGlzLiNzdGF0ZS5zdGF0dXMpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vbk9wZW4oKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGRhdGFDaGFubmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fb25FcnJvcihldmVudCk7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChldmVudCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZGF0YUNoYW5uZWwuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vbk1lc3NhZ2UoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGRhdGE6IHBhcnNlZCwgaXNHZW5lcmljIH0gPSBwYXJzZVJlYWx0aW1lRXZlbnQoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXBhcnNlZCB8fCBpc0dlbmVyaWMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5jcmVhdGVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4jb25nb2luZ1Jlc3BvbnNlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLmRvbmUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiNvbmdvaW5nUmVzcG9uc2UgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdzZXNzaW9uLmNyZWF0ZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl90cmFjaW5nQ29uZmlnID0gcGFyc2VkLnNlc3Npb24udHJhY2luZztcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRyeWluZyB0byB0dXJuIG9uIHRyYWNpbmcgYWZ0ZXIgdGhlIHNlc3Npb24gaXMgY3JlYXRlZFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdHJhY2luZ0NvbmZpZyA9IHR5cGVvZiB1c2VyU2Vzc2lvbkNvbmZpZy50cmFjaW5nID09PSAndW5kZWZpbmVkJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gJ2F1dG8nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB1c2VyU2Vzc2lvbkNvbmZpZy50cmFjaW5nO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlVHJhY2luZ0NvbmZpZyh0cmFjaW5nQ29uZmlnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8vIHNldCB1cCBhdWRpbyBwbGF5YmFja1xuICAgICAgICAgICAgICAgIGNvbnN0IGF1ZGlvRWxlbWVudCA9IHRoaXMub3B0aW9ucy5hdWRpb0VsZW1lbnQgPz8gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYXVkaW8nKTtcbiAgICAgICAgICAgICAgICBhdWRpb0VsZW1lbnQuYXV0b3BsYXkgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHBlZXJDb25uZWN0aW9uLm9udHJhY2sgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYXVkaW9FbGVtZW50LnNyY09iamVjdCA9IGV2ZW50LnN0cmVhbXNbMF07XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAvLyBnZXQgbWljcm9waG9uZSBzdHJlYW1cbiAgICAgICAgICAgICAgICBjb25zdCBzdHJlYW0gPSB0aGlzLm9wdGlvbnMubWVkaWFTdHJlYW0gPz9cbiAgICAgICAgICAgICAgICAgICAgKGF3YWl0IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1ZGlvOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgcGVlckNvbm5lY3Rpb24uYWRkVHJhY2soc3RyZWFtLmdldEF1ZGlvVHJhY2tzKClbMF0pO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuY2hhbmdlUGVlckNvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxQZWVyQ29ubmVjdGlvbiA9IHBlZXJDb25uZWN0aW9uO1xuICAgICAgICAgICAgICAgICAgICBwZWVyQ29ubmVjdGlvbiA9XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm9wdGlvbnMuY2hhbmdlUGVlckNvbm5lY3Rpb24ocGVlckNvbm5lY3Rpb24pO1xuICAgICAgICAgICAgICAgICAgICBpZiAob3JpZ2luYWxQZWVyQ29ubmVjdGlvbiAhPT0gcGVlckNvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsUGVlckNvbm5lY3Rpb24ub25jb25uZWN0aW9uc3RhdGVjaGFuZ2UgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGF0dGFjaENvbm5lY3Rpb25TdGF0ZUhhbmRsZXIocGVlckNvbm5lY3Rpb24pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiNzdGF0ZSA9IHsgLi4udGhpcy4jc3RhdGUsIHBlZXJDb25uZWN0aW9uIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IG9mZmVyID0gYXdhaXQgcGVlckNvbm5lY3Rpb24uY3JlYXRlT2ZmZXIoKTtcbiAgICAgICAgICAgICAgICBhd2FpdCBwZWVyQ29ubmVjdGlvbi5zZXRMb2NhbERlc2NyaXB0aW9uKG9mZmVyKTtcbiAgICAgICAgICAgICAgICBpZiAoIW9mZmVyLnNkcCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBjcmVhdGUgb2ZmZXInKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgc2RwUmVzcG9uc2UgPSBhd2FpdCBmZXRjaChjb25uZWN0aW9uVXJsLCB7XG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgICAgICBib2R5OiBvZmZlci5zZHAsXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vc2RwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHthcGlLZXl9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdYLU9wZW5BSS1BZ2VudHMtU0RLJzogSEVBREVSU1snWC1PcGVuQUktQWdlbnRzLVNESyddLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNhbGxJZCA9IHNkcFJlc3BvbnNlLmhlYWRlcnM/LmdldCgnTG9jYXRpb24nKT8uc3BsaXQoJy8nKS5wb3AoKTtcbiAgICAgICAgICAgICAgICB0aGlzLiNzdGF0ZSA9IHsgLi4udGhpcy4jc3RhdGUsIGNhbGxJZCB9O1xuICAgICAgICAgICAgICAgIGNvbnN0IGFuc3dlciA9IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Fuc3dlcicsXG4gICAgICAgICAgICAgICAgICAgIHNkcDogYXdhaXQgc2RwUmVzcG9uc2UudGV4dCgpLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgYXdhaXQgcGVlckNvbm5lY3Rpb24uc2V0UmVtb3RlRGVzY3JpcHRpb24oYW5zd2VyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9vbkVycm9yKGVycm9yKTtcbiAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZCBhbiBldmVudCB0byB0aGUgUmVhbHRpbWUgQVBJLiBUaGlzIHdpbGwgc3RyaW5naWZ5IHRoZSBldmVudCBhbmQgc2VuZCBpdCBkaXJlY3RseSB0byB0aGVcbiAgICAgKiBBUEkuIFRoaXMgY2FuIGJlIHVzZWQgaWYgeW91IHdhbnQgdG8gdGFrZSBjb250cm9sIG92ZXIgdGhlIGNvbm5lY3Rpb24gYW5kIHNlbmQgZXZlbnRzIG1hbnVhbGx5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGV2ZW50IC0gVGhlIGV2ZW50IHRvIHNlbmQuXG4gICAgICovXG4gICAgc2VuZEV2ZW50KGV2ZW50KSB7XG4gICAgICAgIGlmICghdGhpcy4jc3RhdGUuZGF0YUNoYW5uZWwgfHxcbiAgICAgICAgICAgIHRoaXMuI3N0YXRlLmRhdGFDaGFubmVsLnJlYWR5U3RhdGUgIT09ICdvcGVuJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXZWJSVEMgZGF0YSBjaGFubmVsIGlzIG5vdCBjb25uZWN0ZWQuIE1ha2Ugc3VyZSB5b3UgY2FsbCBgY29ubmVjdCgpYCBiZWZvcmUgc2VuZGluZyBldmVudHMuJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jc3RhdGUuZGF0YUNoYW5uZWwuc2VuZChKU09OLnN0cmluZ2lmeShldmVudCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNdXRlIG9yIHVubXV0ZSB0aGUgc2Vzc2lvbi5cbiAgICAgKiBAcGFyYW0gbXV0ZWQgLSBXaGV0aGVyIHRvIG11dGUgdGhlIHNlc3Npb24uXG4gICAgICovXG4gICAgbXV0ZShtdXRlZCkge1xuICAgICAgICB0aGlzLiNtdXRlZCA9IG11dGVkO1xuICAgICAgICBpZiAodGhpcy4jc3RhdGUucGVlckNvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgIGNvbnN0IHBlZXJDb25uZWN0aW9uID0gdGhpcy4jc3RhdGUucGVlckNvbm5lY3Rpb247XG4gICAgICAgICAgICBwZWVyQ29ubmVjdGlvbi5nZXRTZW5kZXJzKCkuZm9yRWFjaCgoc2VuZGVyKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHNlbmRlci50cmFjaykge1xuICAgICAgICAgICAgICAgICAgICBzZW5kZXIudHJhY2suZW5hYmxlZCA9ICFtdXRlZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfYWZ0ZXJBdWRpb0RvbmVFdmVudCgpIHtcbiAgICAgICAgdGhpcy4jb25nb2luZ1Jlc3BvbnNlID0gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsb3NlIHRoZSBjb25uZWN0aW9uIHRvIHRoZSBSZWFsdGltZSBBUEkgYW5kIGRpc2Nvbm5lY3RzIHRoZSB1bmRlcmx5aW5nIFdlYlJUQyBjb25uZWN0aW9uLlxuICAgICAqL1xuICAgIGNsb3NlKCkge1xuICAgICAgICBpZiAodGhpcy4jc3RhdGUuZGF0YUNoYW5uZWwpIHtcbiAgICAgICAgICAgIHRoaXMuI3N0YXRlLmRhdGFDaGFubmVsLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuI3N0YXRlLnBlZXJDb25uZWN0aW9uKSB7XG4gICAgICAgICAgICBjb25zdCBwZWVyQ29ubmVjdGlvbiA9IHRoaXMuI3N0YXRlLnBlZXJDb25uZWN0aW9uO1xuICAgICAgICAgICAgcGVlckNvbm5lY3Rpb24ub25jb25uZWN0aW9uc3RhdGVjaGFuZ2UgPSBudWxsO1xuICAgICAgICAgICAgcGVlckNvbm5lY3Rpb24uZ2V0U2VuZGVycygpLmZvckVhY2goKHNlbmRlcikgPT4ge1xuICAgICAgICAgICAgICAgIHNlbmRlci50cmFjaz8uc3RvcCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBwZWVyQ29ubmVjdGlvbi5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLiNzdGF0ZS5zdGF0dXMgIT09ICdkaXNjb25uZWN0ZWQnKSB7XG4gICAgICAgICAgICB0aGlzLiNzdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6ICdkaXNjb25uZWN0ZWQnLFxuICAgICAgICAgICAgICAgIHBlZXJDb25uZWN0aW9uOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgZGF0YUNoYW5uZWw6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBjYWxsSWQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2Nvbm5lY3Rpb25fY2hhbmdlJywgdGhpcy4jc3RhdGUuc3RhdHVzKTtcbiAgICAgICAgICAgIHRoaXMuX29uQ2xvc2UoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbnRlcnJ1cHQgdGhlIGN1cnJlbnQgcmVzcG9uc2UgaWYgb25lIGlzIG9uZ29pbmcgYW5kIGNsZWFyIHRoZSBhdWRpbyBidWZmZXIgc28gdGhhdCB0aGUgYWdlbnRcbiAgICAgKiBzdG9wcyB0YWxraW5nLlxuICAgICAqL1xuICAgIGludGVycnVwdCgpIHtcbiAgICAgICAgaWYgKHRoaXMuI29uZ29pbmdSZXNwb25zZSkge1xuICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdyZXNwb25zZS5jYW5jZWwnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLiNvbmdvaW5nUmVzcG9uc2UgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICB0eXBlOiAnb3V0cHV0X2F1ZGlvX2J1ZmZlci5jbGVhcicsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9wZW5haVJlYWx0aW1lV2ViUnRjLm1qcy5tYXAiLCIvLy8gPHJlZmVyZW5jZSBsaWI9XCJkb21cIiAvPlxuZXhwb3J0IGNvbnN0IFdlYlNvY2tldCA9IGdsb2JhbFRoaXMuV2ViU29ja2V0O1xuZXhwb3J0IGZ1bmN0aW9uIGlzQnJvd3NlckVudmlyb25tZW50KCkge1xuICAgIHJldHVybiB0cnVlO1xufVxuZXhwb3J0IGNvbnN0IHVzZVdlYlNvY2tldFByb3RvY29scyA9IHRydWU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zaGltcy1icm93c2VyLm1qcy5tYXAiLCJpbXBvcnQgeyBpc0Jyb3dzZXJFbnZpcm9ubWVudCwgdXNlV2ViU29ja2V0UHJvdG9jb2xzLCBXZWJTb2NrZXQsIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtcmVhbHRpbWUvX3NoaW1zJztcbmltcG9ydCB7IE9wZW5BSVJlYWx0aW1lQmFzZSwgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZUJhc2UubWpzXCI7XG5pbXBvcnQgeyBiYXNlNjRUb0FycmF5QnVmZmVyLCBIRUFERVJTLCBXRUJTT0NLRVRfTUVUQSB9IGZyb20gXCIuL3V0aWxzLm1qc1wiO1xuaW1wb3J0IHsgVXNlckVycm9yIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZSc7XG5pbXBvcnQgeyBwYXJzZVJlYWx0aW1lRXZlbnQgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZUV2ZW50cy5tanNcIjtcbi8qKlxuICogVHJhbnNwb3J0IGxheWVyIHRoYXQncyBoYW5kbGluZyB0aGUgY29ubmVjdGlvbiBiZXR3ZWVuIHRoZSBjbGllbnQgYW5kIE9wZW5BSSdzIFJlYWx0aW1lIEFQSVxuICogdmlhIFdlYlNvY2tldHMuIFdoaWxlIHRoaXMgdHJhbnNwb3J0IGxheWVyIGlzIGRlc2lnbmVkIHRvIGJlIHVzZWQgd2l0aGluIGEgUmVhbHRpbWVTZXNzaW9uLCBpdFxuICogY2FuIGFsc28gYmUgdXNlZCBzdGFuZGFsb25lIGlmIHlvdSB3YW50IHRvIGhhdmUgYSBkaXJlY3QgY29ubmVjdGlvbiB0byB0aGUgUmVhbHRpbWUgQVBJLlxuICovXG5leHBvcnQgY2xhc3MgT3BlbkFJUmVhbHRpbWVXZWJTb2NrZXQgZXh0ZW5kcyBPcGVuQUlSZWFsdGltZUJhc2Uge1xuICAgICNhcGlLZXk7XG4gICAgI3VybDtcbiAgICAjZGVmYXVsdFVybDtcbiAgICAjc3RhdGUgPSB7XG4gICAgICAgIHN0YXR1czogJ2Rpc2Nvbm5lY3RlZCcsXG4gICAgICAgIHdlYnNvY2tldDogdW5kZWZpbmVkLFxuICAgIH07XG4gICAgI3VzZUluc2VjdXJlQXBpS2V5O1xuICAgICNjdXJyZW50SXRlbUlkO1xuICAgICNjdXJyZW50QXVkaW9Db250ZW50SW5kZXg7XG4gICAgLyoqXG4gICAgICogVGltZXN0YW1wIG1haW50YWluZWQgYnkgdGhlIHRyYW5zcG9ydCBsYXllciB0byBhaWQgd2l0aCB0aGUgY2FsY3VsYXRpb24gb2YgdGhlIGVsYXBzZWQgdGltZVxuICAgICAqIHNpbmNlIHRoZSByZXNwb25zZSBzdGFydGVkIHRvIGNvbXB1dGUgdGhlIHJpZ2h0IGludGVycnVwdGlvbiB0aW1lLlxuICAgICAqXG4gICAgICogTW9zdGx5IGludGVybmFsIGJ1dCBtaWdodCBiZSB1c2VkIGJ5IGV4dGVuZGVkIHRyYW5zcG9ydCBsYXllcnMgZm9yIHRoZWlyIGludGVycnVwdGlvblxuICAgICAqIGNhbGN1bGF0aW9uLlxuICAgICAqL1xuICAgIF9maXJzdEF1ZGlvVGltZXN0YW1wO1xuICAgIF9hdWRpb0xlbmd0aE1zID0gMDtcbiAgICAjb25nb2luZ1Jlc3BvbnNlID0gZmFsc2U7XG4gICAgI2NyZWF0ZVdlYlNvY2tldDtcbiAgICAjc2tpcE9wZW5FdmVudExpc3RlbmVycztcbiAgICAjcmVzZXRBdWRpb1BsYXliYWNrU3RhdGUoKSB7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRJdGVtSWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX2ZpcnN0QXVkaW9UaW1lc3RhbXAgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX2F1ZGlvTGVuZ3RoTXMgPSAwO1xuICAgICAgICB0aGlzLiNjdXJyZW50QXVkaW9Db250ZW50SW5kZXggPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBzdXBlcihvcHRpb25zKTtcbiAgICAgICAgdGhpcy4jdXJsID0gb3B0aW9ucy51cmw7XG4gICAgICAgIHRoaXMuI2RlZmF1bHRVcmwgPSBvcHRpb25zLnVybDtcbiAgICAgICAgdGhpcy4jdXNlSW5zZWN1cmVBcGlLZXkgPSBvcHRpb25zLnVzZUluc2VjdXJlQXBpS2V5ID8/IGZhbHNlO1xuICAgICAgICB0aGlzLiNjcmVhdGVXZWJTb2NrZXQgPSBvcHRpb25zLmNyZWF0ZVdlYlNvY2tldDtcbiAgICAgICAgdGhpcy4jc2tpcE9wZW5FdmVudExpc3RlbmVycyA9IG9wdGlvbnMuc2tpcE9wZW5FdmVudExpc3RlbmVycyA/PyBmYWxzZTtcbiAgICB9XG4gICAgZ2V0Q29tbW9uUmVxdWVzdEhlYWRlcnMoKSB7XG4gICAgICAgIHJldHVybiBIRUFERVJTO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCBzdGF0dXMgb2YgdGhlIFdlYlNvY2tldCBjb25uZWN0aW9uLlxuICAgICAqL1xuICAgIGdldCBzdGF0dXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNzdGF0ZS5zdGF0dXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IGNvbm5lY3Rpb24gc3RhdGUgb2YgdGhlIFdlYlNvY2tldCBjb25uZWN0aW9uLlxuICAgICAqL1xuICAgIGdldCBjb25uZWN0aW9uU3RhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNzdGF0ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWx3YXlzIHJldHVybnMgYG51bGxgIGFzIHRoZSBXZWJTb2NrZXQgdHJhbnNwb3J0IGxheWVyIGRvZXMgbm90IGhhbmRsZSBtdXRpbmcuIEluc3RlYWQsXG4gICAgICogdGhpcyBzaG91bGQgYmUgaGFuZGxlZCBieSB0aGUgY2xpZW50IGJ5IG5vdCB0cmlnZ2VyaW5nIHRoZSBgc2VuZEF1ZGlvYCBtZXRob2QuXG4gICAgICovXG4gICAgZ2V0IG11dGVkKCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgaXRlbSBJRCBvZiB0aGUgb25nb2luZyByZXNwb25zZS5cbiAgICAgKi9cbiAgICBnZXQgY3VycmVudEl0ZW1JZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2N1cnJlbnRJdGVtSWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJzIHRoZSBgYXVkaW9gIGV2ZW50IHRoYXQgYSBjbGllbnQgbWlnaHQgbGlzdGVuIHRvIHRvIHJlY2VpdmUgdGhlIGF1ZGlvIGJ1ZmZlci5cbiAgICAgKiBQcm90ZWN0ZWQgZm9yIHlvdSB0byBiZSBhYmxlIHRvIG92ZXJyaWRlIGFuZCBkaXNhYmxlIGVtaXR0aW5nIHRoaXMgZXZlbnQgaW4gY2FzZSB5b3VyIGV4dGVuZGVkXG4gICAgICogdHJhbnNwb3J0IGxheWVyIGhhbmRsZXMgYXVkaW8gaW50ZXJuYWxseS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhdWRpb0V2ZW50IC0gVGhlIGF1ZGlvIGV2ZW50IHRvIGVtaXQuXG4gICAgICovXG4gICAgX29uQXVkaW8oYXVkaW9FdmVudCkge1xuICAgICAgICB0aGlzLmVtaXQoJ2F1ZGlvJywgYXVkaW9FdmVudCk7XG4gICAgfVxuICAgIF9hZnRlckF1ZGlvRG9uZUV2ZW50KCkge1xuICAgICAgICB0aGlzLiNyZXNldEF1ZGlvUGxheWJhY2tTdGF0ZSgpO1xuICAgIH1cbiAgICBhc3luYyAjc2V0dXBXZWJTb2NrZXQocmVzb2x2ZSwgcmVqZWN0LCBzZXNzaW9uQ29uZmlnKSB7XG4gICAgICAgIGlmICh0aGlzLiNzdGF0ZS53ZWJzb2NrZXQpIHtcbiAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuI2FwaUtleSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcignQVBJIGtleSBpcyBub3Qgc2V0LiBQbGVhc2UgY2FsbCBgY29ubmVjdCgpYCB3aXRoIGFuIEFQSSBrZXkgZmlyc3QuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzQnJvd3NlckVudmlyb25tZW50KCkgJiZcbiAgICAgICAgICAgICF0aGlzLiNhcGlLZXkuc3RhcnRzV2l0aCgnZWtfJykgJiZcbiAgICAgICAgICAgICF0aGlzLiN1c2VJbnNlY3VyZUFwaUtleSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcignVXNpbmcgdGhlIFdlYlNvY2tldCBjb25uZWN0aW9uIGluIGEgYnJvd3NlciBlbnZpcm9ubWVudCByZXF1aXJlcyBhbiBlcGhlbWVyYWwgY2xpZW50IGtleS4gSWYgeW91IGhhdmUgdG8gdXNlIGEgcmVndWxhciBBUEkga2V5LCBzZXQgdGhlIGB1c2VJbnNlY3VyZUFwaUtleWAgb3B0aW9uIHRvIHRydWUuJyk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHdzID0gbnVsbDtcbiAgICAgICAgaWYgKHRoaXMuI2NyZWF0ZVdlYlNvY2tldCkge1xuICAgICAgICAgICAgd3MgPSBhd2FpdCB0aGlzLiNjcmVhdGVXZWJTb2NrZXQoe1xuICAgICAgICAgICAgICAgIHVybDogdGhpcy4jdXJsLFxuICAgICAgICAgICAgICAgIGFwaUtleTogdGhpcy4jYXBpS2V5LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBicm93c2VycyBhbmQgd29ya2VyZCBzaG91bGQgdXNlIHRoZSBwcm90b2NvbHMgYXJndW1lbnQsIG5vZGUgc2hvdWxkIHVzZSB0aGUgaGVhZGVycyBhcmd1bWVudFxuICAgICAgICAgICAgY29uc3Qgd2Vic29ja2V0QXJndW1lbnRzID0gdXNlV2ViU29ja2V0UHJvdG9jb2xzXG4gICAgICAgICAgICAgICAgPyBbXG4gICAgICAgICAgICAgICAgICAgICdyZWFsdGltZScsXG4gICAgICAgICAgICAgICAgICAgIC8vIEF1dGhcbiAgICAgICAgICAgICAgICAgICAgJ29wZW5haS1pbnNlY3VyZS1hcGkta2V5LicgKyB0aGlzLiNhcGlLZXksXG4gICAgICAgICAgICAgICAgICAgIC8vIFZlcnNpb24gaGVhZGVyXG4gICAgICAgICAgICAgICAgICAgIFdFQlNPQ0tFVF9NRVRBLFxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuI2FwaUtleX1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgLi4udGhpcy5nZXRDb21tb25SZXF1ZXN0SGVhZGVycygpLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB3cyA9IG5ldyBXZWJTb2NrZXQodGhpcy4jdXJsLCB3ZWJzb2NrZXRBcmd1bWVudHMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI3N0YXRlID0ge1xuICAgICAgICAgICAgc3RhdHVzOiAnY29ubmVjdGluZycsXG4gICAgICAgICAgICB3ZWJzb2NrZXQ6IHdzLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmVtaXQoJ2Nvbm5lY3Rpb25fY2hhbmdlJywgdGhpcy4jc3RhdGUuc3RhdHVzKTtcbiAgICAgICAgY29uc3Qgb25Tb2NrZXRPcGVuUmVhZHkgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLiNzdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6ICdjb25uZWN0ZWQnLFxuICAgICAgICAgICAgICAgIHdlYnNvY2tldDogd3MsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdjb25uZWN0aW9uX2NoYW5nZScsIHRoaXMuI3N0YXRlLnN0YXR1cyk7XG4gICAgICAgICAgICB0aGlzLl9vbk9wZW4oKTtcbiAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMuI3NraXBPcGVuRXZlbnRMaXN0ZW5lcnMgPT09IHRydWUpIHtcbiAgICAgICAgICAgIG9uU29ja2V0T3BlblJlYWR5KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB3cy5hZGRFdmVudExpc3RlbmVyKCdvcGVuJywgb25Tb2NrZXRPcGVuUmVhZHkpO1xuICAgICAgICB9XG4gICAgICAgIHdzLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9vbkVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIHRoaXMuI3N0YXRlID0ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogJ2Rpc2Nvbm5lY3RlZCcsXG4gICAgICAgICAgICAgICAgd2Vic29ja2V0OiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdjb25uZWN0aW9uX2NoYW5nZScsIHRoaXMuI3N0YXRlLnN0YXR1cyk7XG4gICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICB9KTtcbiAgICAgICAgd3MuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIChtZXNzYWdlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9vbk1lc3NhZ2UobWVzc2FnZSk7XG4gICAgICAgICAgICBjb25zdCB7IGRhdGE6IHBhcnNlZCwgaXNHZW5lcmljIH0gPSBwYXJzZVJlYWx0aW1lRXZlbnQobWVzc2FnZSk7XG4gICAgICAgICAgICBpZiAoIXBhcnNlZCB8fCBpc0dlbmVyaWMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5vdXRwdXRfYXVkaW8uZGVsdGEnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jY3VycmVudEF1ZGlvQ29udGVudEluZGV4ID0gcGFyc2VkLmNvbnRlbnRfaW5kZXg7XG4gICAgICAgICAgICAgICAgdGhpcy4jY3VycmVudEl0ZW1JZCA9IHBhcnNlZC5pdGVtX2lkO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9maXJzdEF1ZGlvVGltZXN0YW1wID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIHJlc3BvbnNlIHN0YXJ0IHRpbWVzdGFtcCBpcyBub3Qgc2V0LCB3ZSBzZXQgaXQgdG8gdGhlIGN1cnJlbnQgdGltZS5cbiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBpcyB1c2VkIHRvIGNhbGN1bGF0ZSB0aGUgZWxhcHNlZCB0aW1lIGZvciBpbnRlcnJ1cHRpb24uXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2ZpcnN0QXVkaW9UaW1lc3RhbXAgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9hdWRpb0xlbmd0aE1zID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgYnVmZiA9IGJhc2U2NFRvQXJyYXlCdWZmZXIocGFyc2VkLmRlbHRhKTtcbiAgICAgICAgICAgICAgICAvLyBjYWxjdWxhdGUgdGhlIGF1ZGlvIGxlbmd0aCBpbiBtaWxsaXNlY29uZHNcbiAgICAgICAgICAgICAgICAvLyBHQSBmb3JtYXQ6IHNlc3Npb24uYXVkaW8ub3V0cHV0LmZvcm1hdCBzdXBwb3J0cyBzdHJ1Y3R1cmVkIHsgdHlwZTogXCJhdWRpby9wY21cIiwgcmF0ZSB9IG9yIFwiYXVkaW8vcGNtdVwiIGV0Yy5cbiAgICAgICAgICAgICAgICBjb25zdCBmbXQgPSB0aGlzLl9yYXdTZXNzaW9uQ29uZmlnPy5hdWRpbz8ub3V0cHV0Py5mb3JtYXQ7XG4gICAgICAgICAgICAgICAgaWYgKGZtdCAmJiB0eXBlb2YgZm10ID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgICAgICAvLyBTdHJ1Y3R1cmVkIGZvcm1hdFxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gZm10LnR5cGU7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0ID09PSAnYXVkaW8vcGNtdScgfHwgdCA9PT0gJ2F1ZGlvL3BjbWEnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyA4a0h6LCAxIGJ5dGUgcGVyIHNhbXBsZVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fYXVkaW9MZW5ndGhNcyArPSBidWZmLmJ5dGVMZW5ndGggLyA4O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHQgPT09ICdhdWRpby9wY20nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByYXRlID0gZm10LnJhdGUgPz8gMjQwMDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBieXRlcyAtPiBzYW1wbGVzICgyIGJ5dGVzIHBlciBzYW1wbGUpIC0+IG1zXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9hdWRpb0xlbmd0aE1zICs9IChidWZmLmJ5dGVMZW5ndGggLyAyIC8gcmF0ZSkgKiAxMDAwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmFsbGJhY2sgYXNzdW1wdGlvbiBzaW1pbGFyIHRvIGxlZ2FjeVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fYXVkaW9MZW5ndGhNcyArPSBidWZmLmJ5dGVMZW5ndGggLyAyNCAvIDI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGZtdCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZtdC5zdGFydHNXaXRoKCdnNzExXycpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9hdWRpb0xlbmd0aE1zICs9IGJ1ZmYuYnl0ZUxlbmd0aCAvIDg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBc3N1bWUgMjRrSHogUENNMTZcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2F1ZGlvTGVuZ3RoTXMgKz0gYnVmZi5ieXRlTGVuZ3RoIC8gMjQgLyAyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBEZWZhdWx0IHRvIDI0a0h6IFBDTTE2IGJlaGF2aW9yIGlmIHVuc3BlY2lmaWVkXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2F1ZGlvTGVuZ3RoTXMgKz0gYnVmZi5ieXRlTGVuZ3RoIC8gMjQgLyAyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBhdWRpb0V2ZW50ID0ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnYXVkaW8nLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiBidWZmLFxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZUlkOiBwYXJzZWQucmVzcG9uc2VfaWQsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLl9vbkF1ZGlvKGF1ZGlvRXZlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocGFyc2VkLnR5cGUgPT09ICdpbnB1dF9hdWRpb19idWZmZXIuc3BlZWNoX3N0YXJ0ZWQnKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYXV0b21hdGljUmVzcG9uc2VDYW5jZWxsYXRpb25FbmFibGVkID0gdGhpcy5fcmF3U2Vzc2lvbkNvbmZpZz8uYXVkaW8/LmlucHV0Py50dXJuX2RldGVjdGlvblxuICAgICAgICAgICAgICAgICAgICA/LmludGVycnVwdF9yZXNwb25zZSA/PyBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLmludGVycnVwdCghYXV0b21hdGljUmVzcG9uc2VDYW5jZWxsYXRpb25FbmFibGVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2UuY3JlYXRlZCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiNvbmdvaW5nUmVzcG9uc2UgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5kb25lJykge1xuICAgICAgICAgICAgICAgIHRoaXMuI29uZ29pbmdSZXNwb25zZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocGFyc2VkLnR5cGUgPT09ICdzZXNzaW9uLmNyZWF0ZWQnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fdHJhY2luZ0NvbmZpZyA9IHBhcnNlZC5zZXNzaW9uLnRyYWNpbmc7XG4gICAgICAgICAgICAgICAgLy8gVHJ5aW5nIHRvIHR1cm4gb24gdHJhY2luZyBhZnRlciB0aGUgc2Vzc2lvbiBpcyBjcmVhdGVkXG4gICAgICAgICAgICAgICAgY29uc3QgdHJhY2luZ0NvbmZpZyA9IHR5cGVvZiBzZXNzaW9uQ29uZmlnLnRyYWNpbmcgPT09ICd1bmRlZmluZWQnXG4gICAgICAgICAgICAgICAgICAgID8gJ2F1dG8nXG4gICAgICAgICAgICAgICAgICAgIDogc2Vzc2lvbkNvbmZpZy50cmFjaW5nO1xuICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZVRyYWNpbmdDb25maWcodHJhY2luZ0NvbmZpZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB3cy5hZGRFdmVudExpc3RlbmVyKCdjbG9zZScsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuI3N0YXRlID0ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogJ2Rpc2Nvbm5lY3RlZCcsXG4gICAgICAgICAgICAgICAgd2Vic29ja2V0OiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdjb25uZWN0aW9uX2NoYW5nZScsIHRoaXMuI3N0YXRlLnN0YXR1cyk7XG4gICAgICAgICAgICB0aGlzLl9vbkNsb3NlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBjb25uZWN0KG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgbW9kZWwgPSBvcHRpb25zLm1vZGVsID8/IHRoaXMuY3VycmVudE1vZGVsO1xuICAgICAgICB0aGlzLmN1cnJlbnRNb2RlbCA9IG1vZGVsO1xuICAgICAgICB0aGlzLiNhcGlLZXkgPSBhd2FpdCB0aGlzLl9nZXRBcGlLZXkob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IGNhbGxJZCA9IG9wdGlvbnMuY2FsbElkO1xuICAgICAgICBsZXQgdXJsO1xuICAgICAgICBpZiAob3B0aW9ucy51cmwpIHtcbiAgICAgICAgICAgIHVybCA9IG9wdGlvbnMudXJsO1xuICAgICAgICAgICAgdGhpcy4jZGVmYXVsdFVybCA9IG9wdGlvbnMudXJsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGNhbGxJZCkge1xuICAgICAgICAgICAgdXJsID0gYHdzczovL2FwaS5vcGVuYWkuY29tL3YxL3JlYWx0aW1lP2NhbGxfaWQ9JHtjYWxsSWR9YDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLiNkZWZhdWx0VXJsKSB7XG4gICAgICAgICAgICB1cmwgPSB0aGlzLiNkZWZhdWx0VXJsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdXJsID0gYHdzczovL2FwaS5vcGVuYWkuY29tL3YxL3JlYWx0aW1lP21vZGVsPSR7dGhpcy5jdXJyZW50TW9kZWx9YDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiN1cmwgPSB1cmw7XG4gICAgICAgIGNvbnN0IHNlc3Npb25Db25maWcgPSB7XG4gICAgICAgICAgICAuLi4ob3B0aW9ucy5pbml0aWFsU2Vzc2lvbkNvbmZpZyB8fCB7fSksXG4gICAgICAgICAgICBtb2RlbDogdGhpcy5jdXJyZW50TW9kZWwsXG4gICAgICAgIH07XG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRoaXMuI3NldHVwV2ViU29ja2V0KHJlc29sdmUsIHJlamVjdCwgc2Vzc2lvbkNvbmZpZykuY2F0Y2gocmVqZWN0KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlU2Vzc2lvbkNvbmZpZyhzZXNzaW9uQ29uZmlnKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZCBhbiBldmVudCB0byB0aGUgUmVhbHRpbWUgQVBJLiBUaGlzIHdpbGwgc3RyaW5naWZ5IHRoZSBldmVudCBhbmQgc2VuZCBpdCBkaXJlY3RseSB0byB0aGVcbiAgICAgKiBBUEkuIFRoaXMgY2FuIGJlIHVzZWQgaWYgeW91IHdhbnQgdG8gdGFrZSBjb250cm9sIG92ZXIgdGhlIGNvbm5lY3Rpb24gYW5kIHNlbmQgZXZlbnRzIG1hbnVhbGx5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGV2ZW50IC0gVGhlIGV2ZW50IHRvIHNlbmQuXG4gICAgICovXG4gICAgc2VuZEV2ZW50KGV2ZW50KSB7XG4gICAgICAgIGlmICghdGhpcy4jc3RhdGUud2Vic29ja2V0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dlYlNvY2tldCBpcyBub3QgY29ubmVjdGVkLiBNYWtlIHN1cmUgeW91IGNhbGwgYGNvbm5lY3QoKWAgYmVmb3JlIHNlbmRpbmcgZXZlbnRzLicpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI3N0YXRlLndlYnNvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KGV2ZW50KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsb3NlIHRoZSBXZWJTb2NrZXQgY29ubmVjdGlvbi5cbiAgICAgKlxuICAgICAqIFRoaXMgd2lsbCBhbHNvIHJlc2V0IGFueSBpbnRlcm5hbCBjb25uZWN0aW9uIHRyYWNraW5nIHVzZWQgZm9yIGludGVycnVwdGlvbiBoYW5kbGluZy5cbiAgICAgKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy4jc3RhdGUud2Vic29ja2V0Py5jbG9zZSgpO1xuICAgICAgICB0aGlzLiNjdXJyZW50SXRlbUlkID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9maXJzdEF1ZGlvVGltZXN0YW1wID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9hdWRpb0xlbmd0aE1zID0gMDtcbiAgICAgICAgdGhpcy4jY3VycmVudEF1ZGlvQ29udGVudEluZGV4ID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXaWxsIHRocm93IGFuIGVycm9yIGFzIHRoZSBXZWJTb2NrZXQgdHJhbnNwb3J0IGxheWVyIGRvZXMgbm90IHN1cHBvcnQgbXV0aW5nLlxuICAgICAqL1xuICAgIG11dGUoX211dGVkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTXV0ZSBpcyBub3Qgc3VwcG9ydGVkIGZvciB0aGUgV2ViU29ja2V0IHRyYW5zcG9ydC4gWW91IGhhdmUgdG8gbXV0ZSB0aGUgYXVkaW8gaW5wdXQgeW91cnNlbGYuJyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmQgYW4gYXVkaW8gYnVmZmVyIHRvIHRoZSBSZWFsdGltZSBBUEkuIFRoaXMgaXMgdXNlZCBmb3IgeW91ciBjbGllbnQgdG8gc2VuZCBhdWRpbyB0byB0aGVcbiAgICAgKiBtb2RlbCB0byByZXNwb25kLlxuICAgICAqXG4gICAgICogQHBhcmFtIGF1ZGlvIC0gVGhlIGF1ZGlvIGJ1ZmZlciB0byBzZW5kLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gVGhlIG9wdGlvbnMgZm9yIHRoZSBhdWRpbyBidWZmZXIuXG4gICAgICovXG4gICAgc2VuZEF1ZGlvKGF1ZGlvLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgaWYgKHRoaXMuI3N0YXRlLnN0YXR1cyA9PT0gJ2Nvbm5lY3RlZCcpIHtcbiAgICAgICAgICAgIHN1cGVyLnNlbmRBdWRpbyhhdWRpbywgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZCBhIGNhbmNlbCByZXNwb25zZSBldmVudCB0byB0aGUgUmVhbHRpbWUgQVBJLiBUaGlzIGlzIHVzZWQgdG8gY2FuY2VsIGFuIG9uZ29pbmdcbiAgICAgKiAgcmVzcG9uc2UgdGhhdCB0aGUgbW9kZWwgaXMgY3VycmVudGx5IGdlbmVyYXRpbmcuXG4gICAgICovXG4gICAgX2NhbmNlbFJlc3BvbnNlKCkge1xuICAgICAgICAvLyBjYW5jZWwgdGhlIG9uZ29pbmcgcmVzcG9uc2VcbiAgICAgICAgaWYgKHRoaXMuI29uZ29pbmdSZXNwb25zZSkge1xuICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdyZXNwb25zZS5jYW5jZWwnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLiNvbmdvaW5nUmVzcG9uc2UgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBEbyBOT1QgY2FsbCB0aGlzIG1ldGhvZCBkaXJlY3RseS4gQ2FsbCBgaW50ZXJydXB0KClgIGluc3RlYWQgZm9yIHByb3BlciBpbnRlcnJ1cHRpb24gaGFuZGxpbmcuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyB1c2VkIHRvIHNlbmQgdGhlIHJpZ2h0IGV2ZW50cyB0byB0aGUgQVBJIHRvIGluZm9ybSB0aGUgbW9kZWwgdGhhdCB0aGUgdXNlciBoYXNcbiAgICAgKiBpbnRlcnJ1cHRlZCB0aGUgcmVzcG9uc2UuIEl0IG1pZ2h0IGJlIG92ZXJyaWRkZW4vZXh0ZW5kZWQgYnkgYW4gZXh0ZW5kZWQgdHJhbnNwb3J0IGxheWVyLiBTZWVcbiAgICAgKiB0aGUgYFR3aWxpb1JlYWx0aW1lVHJhbnNwb3J0TGF5ZXJgIGZvciBhbiBleGFtcGxlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGVsYXBzZWRUaW1lIC0gVGhlIGVsYXBzZWQgdGltZSBzaW5jZSB0aGUgcmVzcG9uc2Ugc3RhcnRlZC5cbiAgICAgKi9cbiAgICBfaW50ZXJydXB0KGVsYXBzZWRUaW1lLCBjYW5jZWxPbmdvaW5nUmVzcG9uc2UgPSB0cnVlKSB7XG4gICAgICAgIGlmIChlbGFwc2VkVGltZSA8IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBpbW1lZGlhdGVseSBlbWl0IHRoaXMgZXZlbnQgc28gdGhlIGNsaWVudCBjYW4gc3RvcCBwbGF5aW5nIGF1ZGlvXG4gICAgICAgIGlmIChjYW5jZWxPbmdvaW5nUmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHRoaXMuX2NhbmNlbFJlc3BvbnNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbGVuZ3RoID0gdGhpcy5fYXVkaW9MZW5ndGhNcyA/PyBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XG4gICAgICAgIC8vIGF1ZGlvX2VuZF9tcyBtdXN0IGJlIGFuIGludGVnZXJcbiAgICAgICAgY29uc3QgYXVkaW9fZW5kX21zID0gTWF0aC5tYXgoMCwgTWF0aC5mbG9vcihNYXRoLm1pbihlbGFwc2VkVGltZSwgbGVuZ3RoKSkpO1xuICAgICAgICB0aGlzLmVtaXQoJ2F1ZGlvX2ludGVycnVwdGVkJyk7XG4gICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgIHR5cGU6ICdjb252ZXJzYXRpb24uaXRlbS50cnVuY2F0ZScsXG4gICAgICAgICAgICBpdGVtX2lkOiB0aGlzLiNjdXJyZW50SXRlbUlkLFxuICAgICAgICAgICAgY29udGVudF9pbmRleDogdGhpcy4jY3VycmVudEF1ZGlvQ29udGVudEluZGV4LFxuICAgICAgICAgICAgYXVkaW9fZW5kX21zLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW50ZXJydXB0IHRoZSBvbmdvaW5nIHJlc3BvbnNlLiBUaGlzIG1ldGhvZCBpcyB0cmlnZ2VyZWQgYXV0b21hdGljYWxseSBieSB0aGUgY2xpZW50IHdoZW5cbiAgICAgKiB2b2ljZSBhY3Rpdml0eSBkZXRlY3Rpb24gKFZBRCkgaXMgZW5hYmxlZCAoZGVmYXVsdCkgYXMgd2VsbCBhcyB3aGVuIGFuIG91dHB1dCBndWFyZHJhaWwgZ290XG4gICAgICogdHJpZ2dlcmVkLlxuICAgICAqXG4gICAgICogWW91IGNhbiBhbHNvIGNhbGwgdGhpcyBtZXRob2QgZGlyZWN0bHkgaWYgeW91IHdhbnQgdG8gaW50ZXJydXB0IHRoZSBjb252ZXJzYXRpb24gZm9yIGV4YW1wbGVcbiAgICAgKiBiYXNlZCBvbiBhbiBldmVudCBpbiB0aGUgY2xpZW50LlxuICAgICAqL1xuICAgIGludGVycnVwdChjYW5jZWxPbmdvaW5nUmVzcG9uc2UgPSB0cnVlKSB7XG4gICAgICAgIGlmICghdGhpcy4jY3VycmVudEl0ZW1JZCB8fCB0eXBlb2YgdGhpcy5fZmlyc3RBdWRpb1RpbWVzdGFtcCAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBlbGFwc2VkVGltZSA9IERhdGUubm93KCkgLSB0aGlzLl9maXJzdEF1ZGlvVGltZXN0YW1wO1xuICAgICAgICBpZiAoZWxhcHNlZFRpbWUgPj0gMCkge1xuICAgICAgICAgICAgdGhpcy5faW50ZXJydXB0KGVsYXBzZWRUaW1lLCBjYW5jZWxPbmdvaW5nUmVzcG9uc2UpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI3Jlc2V0QXVkaW9QbGF5YmFja1N0YXRlKCk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b3BlbmFpUmVhbHRpbWVXZWJzb2NrZXQubWpzLm1hcCIsImltcG9ydCB7IFVzZXJFcnJvciwgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlJztcbmV4cG9ydCBjb25zdCBCQUNLR1JPVU5EX1JFU1VMVF9TWU1CT0wgPSBTeW1ib2woJ2JhY2tncm91bmRSZXN1bHQnKTtcbmV4cG9ydCBmdW5jdGlvbiBiYWNrZ3JvdW5kUmVzdWx0KGNvbnRlbnQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBbQkFDS0dST1VORF9SRVNVTFRfU1lNQk9MXTogdHJ1ZSxcbiAgICAgICAgY29udGVudCxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzQmFja2dyb3VuZFJlc3VsdChyZXN1bHQpIHtcbiAgICByZXR1cm4gKHR5cGVvZiByZXN1bHQgPT09ICdvYmplY3QnICYmXG4gICAgICAgIHJlc3VsdCAhPT0gbnVsbCAmJlxuICAgICAgICBCQUNLR1JPVU5EX1JFU1VMVF9TWU1CT0wgaW4gcmVzdWx0KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1ZhbGlkUmVhbHRpbWVUb29sKHRvb2wpIHtcbiAgICByZXR1cm4gKHRvb2wudHlwZSA9PT0gJ2Z1bmN0aW9uJyB8fFxuICAgICAgICAodG9vbC50eXBlID09PSAnaG9zdGVkX3Rvb2wnICYmIHRvb2wubmFtZSA9PT0gJ2hvc3RlZF9tY3AnKSk7XG59XG5leHBvcnQgZnVuY3Rpb24gdG9SZWFsdGltZVRvb2xEZWZpbml0aW9uKHRvb2wpIHtcbiAgICBpZiAodG9vbC50eXBlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiB0b29sO1xuICAgIH1cbiAgICBpZiAodG9vbC50eXBlID09PSAnaG9zdGVkX3Rvb2wnICYmIHRvb2wubmFtZSA9PT0gJ2hvc3RlZF9tY3AnKSB7XG4gICAgICAgIGNvbnN0IHNlcnZlclVybCA9IHRvb2wucHJvdmlkZXJEYXRhLnNlcnZlcl91cmwgJiYgdG9vbC5wcm92aWRlckRhdGEuc2VydmVyX3VybC5sZW5ndGggPiAwXG4gICAgICAgICAgICA/IHRvb2wucHJvdmlkZXJEYXRhLnNlcnZlcl91cmxcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ21jcCcsXG4gICAgICAgICAgICBzZXJ2ZXJfbGFiZWw6IHRvb2wucHJvdmlkZXJEYXRhLnNlcnZlcl9sYWJlbCxcbiAgICAgICAgICAgIHNlcnZlcl91cmw6IHNlcnZlclVybCxcbiAgICAgICAgICAgIGhlYWRlcnM6IHRvb2wucHJvdmlkZXJEYXRhLmhlYWRlcnMsXG4gICAgICAgICAgICBhbGxvd2VkX3Rvb2xzOiB0b29sLnByb3ZpZGVyRGF0YS5hbGxvd2VkX3Rvb2xzLFxuICAgICAgICAgICAgcmVxdWlyZV9hcHByb3ZhbDogdG9vbC5wcm92aWRlckRhdGEucmVxdWlyZV9hcHByb3ZhbCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IFVzZXJFcnJvcihgSW52YWxpZCB0b29sIHR5cGU6ICR7dG9vbH1gKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRvb2wubWpzLm1hcCIsImltcG9ydCB7IGdldFRyYW5zZmVyTWVzc2FnZSwgTW9kZWxCZWhhdmlvckVycm9yLCBPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCwgUnVuQ29udGV4dCwgUnVuVG9vbEFwcHJvdmFsSXRlbSwgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlJztcbmltcG9ydCB7IFJ1bnRpbWVFdmVudEVtaXR0ZXIgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlL19zaGltcyc7XG5pbXBvcnQgeyBpc1pvZE9iamVjdCwgdG9TbWFydFN0cmluZyB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvdXRpbHMnO1xuaW1wb3J0IHsgZGVmaW5lUmVhbHRpbWVPdXRwdXRHdWFyZHJhaWwsIGdldFJlYWx0aW1lR3VhcmRyYWlsRmVlZGJhY2tNZXNzYWdlLCBnZXRSZWFsdGltZUd1YXJkcmFpbFNldHRpbmdzLCB9IGZyb20gXCIuL2d1YXJkcmFpbC5tanNcIjtcbmltcG9ydCB7IERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX1NFU1NJT05fQ09ORklHLCB9IGZyb20gXCIuL29wZW5haVJlYWx0aW1lQmFzZS5tanNcIjtcbmltcG9ydCB7IE9wZW5BSVJlYWx0aW1lV2ViUlRDIH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVXZWJSdGMubWpzXCI7XG5pbXBvcnQgeyBPcGVuQUlSZWFsdGltZVdlYlNvY2tldCB9IGZyb20gXCIuL29wZW5haVJlYWx0aW1lV2Vic29ja2V0Lm1qc1wiO1xuaW1wb3J0IHsgYXBwcm92YWxJdGVtVG9SZWFsdGltZUFwcHJvdmFsSXRlbSwgZ2V0TGFzdFRleHRGcm9tQXVkaW9PdXRwdXRNZXNzYWdlLCBoYXNXZWJSVENTdXBwb3J0LCByZWFsdGltZUFwcHJvdmFsSXRlbVRvQXBwcm92YWxJdGVtLCB1cGRhdGVSZWFsdGltZUhpc3RvcnksIH0gZnJvbSBcIi4vdXRpbHMubWpzXCI7XG5pbXBvcnQgbG9nZ2VyIGZyb20gXCIuL2xvZ2dlci5tanNcIjtcbmltcG9ydCB7IGlzQmFja2dyb3VuZFJlc3VsdCwgaXNWYWxpZFJlYWx0aW1lVG9vbCwgdG9SZWFsdGltZVRvb2xEZWZpbml0aW9uLCB9IGZyb20gXCIuL3Rvb2wubWpzXCI7XG5pbXBvcnQgeyBydW5Ub29sSW5wdXRHdWFyZHJhaWxzLCBydW5Ub29sT3V0cHV0R3VhcmRyYWlscywgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlJztcbmZ1bmN0aW9uIGNsb25lRGVmYXVsdFNlc3Npb25Db25maWcoKSB7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUcpKTtcbn1cbi8qKlxuICogQSBgUmVhbHRpbWVTZXNzaW9uYCBpcyB0aGUgY29ybmVyc3RvbmUgb2YgYnVpbGRpbmcgVm9pY2UgQWdlbnRzLiBJdCdzIHRoZSBlcXVpdmFsZW50IG9mIGFcbiAqIFJ1bm5lciBpbiB0ZXh0LWJhc2VkIGFnZW50cyBleGNlcHQgdGhhdCBpdCBhdXRvbWF0aWNhbGx5IGhhbmRsZXMgbXVsdGlwbGUgdHVybnMgYnkgbWFpbnRhaW5pbmcgYVxuICogY29ubmVjdGlvbiB3aXRoIHRoZSB1bmRlcmx5aW5nIHRyYW5zcG9ydCBsYXllci5cbiAqXG4gKiBUaGUgc2Vzc2lvbiBoYW5kbGVzIG1hbmFnaW5nIHRoZSBsb2NhbCBoaXN0b3J5IGNvcHksIGV4ZWN1dGVzIHRvb2xzLCBydW5zIG91dHB1dCBndWFyZHJhaWxzLCBhbmRcbiAqIGZhY2lsaXRhdGVzIGhhbmRvZmZzLlxuICpcbiAqIFRoZSBhY3R1YWwgYXVkaW8gaGFuZGxpbmcgYW5kIGdlbmVyYXRpb24gb2YgbW9kZWwgcmVzcG9uc2VzIGlzIGhhbmRsZWQgYnkgdGhlIHVuZGVybHlpbmdcbiAqIHRyYW5zcG9ydCBsYXllci4gQnkgZGVmYXVsdCBpZiB5b3UgYXJlIHVzaW5nIGEgYnJvd3NlciB3aXRoIFdlYlJUQyBzdXBwb3J0LCB0aGUgc2Vzc2lvbiB3aWxsXG4gKiBhdXRvbWF0aWNhbGx5IHVzZSB0aGUgV2ViUlRDIHZlcnNpb24gb2YgdGhlIE9wZW5BSSBSZWFsdGltZSBBUEkuIE9uIHRoZSBzZXJ2ZXIgb3IgaWYgeW91IHBhc3NcbiAqIGB3ZWJzb2NrZXRgIGFzIHRoZSB0cmFuc3BvcnQgbGF5ZXIsIHRoZSBzZXNzaW9uIHdpbGwgZXN0YWJsaXNoIGEgY29ubmVjdGlvbiB1c2luZyBXZWJTb2NrZXRzLlxuICpcbiAqIEluIHRoZSBjYXNlIG9mIFdlYlJUQywgaW4gdGhlIGJyb3dzZXIsIHRoZSB0cmFuc3BvcnQgbGF5ZXIgd2lsbCBhbHNvIGF1dG9tYXRpY2FsbHkgY29uZmlndXJlIHRoZVxuICogbWljcm9waG9uZSBhbmQgYXVkaW8gb3V0cHV0IHRvIGJlIHVzZWQgYnkgdGhlIHNlc3Npb24uXG4gKlxuICogWW91IGNhbiBhbHNvIGNyZWF0ZSBhIHRyYW5zcG9ydCBsYXllciBpbnN0YW5jZSB5b3Vyc2VsZiBhbmQgcGFzcyBpdCBpbiB0byBoYXZlIG1vcmUgY29udHJvbCBvdmVyXG4gKiB0aGUgY29uZmlndXJhdGlvbiBvciBldmVuIGV4dGVuZCB0aGUgZXhpc3Rpbmcgb25lcy4gQ2hlY2sgb3V0IHRoZSBgVHdpbGlvUmVhbHRpbWVUcmFuc3BvcnRMYXllcmBcbiAqIGZvciBhbiBleGFtcGxlIG9mIGhvdyB0byBjcmVhdGUgYSBjdXN0b20gdHJhbnNwb3J0IGxheWVyLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogY29uc3QgYWdlbnQgPSBuZXcgUmVhbHRpbWVBZ2VudCh7XG4gKiAgIG5hbWU6ICdteS1hZ2VudCcsXG4gKiAgIGluc3RydWN0aW9uczogJ1lvdSBhcmUgYSBoZWxwZnVsIGFzc2lzdGFudCB0aGF0IGNhbiBhbnN3ZXIgcXVlc3Rpb25zIGFuZCBoZWxwIHdpdGggdGFza3MuJyxcbiAqIH0pXG4gKlxuICogY29uc3Qgc2Vzc2lvbiA9IG5ldyBSZWFsdGltZVNlc3Npb24oYWdlbnQpO1xuICogc2Vzc2lvbi5jb25uZWN0KHtcbiAqICAgYXBpS2V5OiAneW91ci1hcGkta2V5JyxcbiAqIH0pO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBSZWFsdGltZVNlc3Npb24gZXh0ZW5kcyBSdW50aW1lRXZlbnRFbWl0dGVyIHtcbiAgICBpbml0aWFsQWdlbnQ7XG4gICAgb3B0aW9ucztcbiAgICAjdHJhbnNwb3J0O1xuICAgICNjdXJyZW50QWdlbnQ7XG4gICAgI2N1cnJlbnRUb29scztcbiAgICAjY29udGV4dDtcbiAgICAjb3V0cHV0R3VhcmRyYWlscyA9IFtdO1xuICAgICNvdXRwdXRHdWFyZHJhaWxTZXR0aW5ncztcbiAgICAjdHJhbnNjcmliZWRUZXh0RGVsdGFzID0ge307XG4gICAgI2hpc3RvcnkgPSBbXTtcbiAgICAjc2hvdWxkSW5jbHVkZUF1ZGlvRGF0YTtcbiAgICAjaW50ZXJydXB0ZWRCeUd1YXJkcmFpbCA9IHt9O1xuICAgICNhdWRpb1N0YXJ0ZWQgPSBmYWxzZTtcbiAgICAvLyBUcmFja3MgYWxsIE1DUCB0b29scyBmZXRjaGVkIHBlciBzZXJ2ZXIgbGFiZWwgKGZyb20gbWNwX2xpc3RfdG9vbHMgcmVzdWx0cykuXG4gICAgI2FsbE1jcFRvb2xzQnlTZXJ2ZXIgPSBuZXcgTWFwKCk7XG4gICAgLy8gVHJhY2tzIGN1cnJlbnRseSBhdmFpbGFibGUgTUNQIHRvb2xzIGJhc2VkIG9uIHRoZSBhY3RpdmUgYWdlbnQncyBjb25maWd1cmVkIHNlcnZlcl9sYWJlbHMuXG4gICAgI2F2YWlsYWJsZU1jcFRvb2xzID0gW107XG4gICAgLy8gS2VlcHMgdHJhY2sgb2YgdGhlIGxhc3QgZnVsbCBzZXNzaW9uIGNvbmZpZyB3ZSBzZW50IChjYW1lbENhc2Uga2V5cykgc28gdGhhdFxuICAgIC8vIHN1YnNlcXVlbnQgdXBkYXRlcyAoZS5nLiBkdXJpbmcgYWdlbnQgaGFuZG9mZnMpIHByZXNlcnZlIHByb3BlcnRpZXMgdGhhdCBhcmVcbiAgICAvLyBub3QgZXhwbGljaXRseSByZWNhbGN1bGF0ZWQgaGVyZSAoc3VjaCBhcyBpbnB1dEF1ZGlvRm9ybWF0LCBvdXRwdXRBdWRpb0Zvcm1hdCxcbiAgICAvLyBtb2RhbGl0aWVzLCBzcGVlZCwgdG9vbENob2ljZSwgdHVybkRldGVjdGlvbiwgZXRjLikuIFdpdGhvdXQgdGhpcywgdXBkYXRpbmdcbiAgICAvLyB0aGUgYWdlbnQgd291bGQgZHJvcCBhdWRpbyBmb3JtYXQgb3ZlcnJpZGVzIChlLmcuIGc3MTFfdWxhdykgYW5kIHJldmVydCB0b1xuICAgIC8vIHRyYW5zcG9ydCBkZWZhdWx0cyBjYXVzaW5nIGlzc3VlcyBmb3IgaW50ZWdyYXRpb25zIGxpa2UgVHdpbGlvLlxuICAgICNsYXN0U2Vzc2lvbkNvbmZpZyA9IGNsb25lRGVmYXVsdFNlc3Npb25Db25maWcoKTtcbiAgICAjYXV0b21hdGljYWxseVRyaWdnZXJSZXNwb25zZUZvck1jcFRvb2xDYWxscyA9IHRydWU7XG4gICAgY29uc3RydWN0b3IoaW5pdGlhbEFnZW50LCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5pbml0aWFsQWdlbnQgPSBpbml0aWFsQWdlbnQ7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIGlmICgodHlwZW9mIG9wdGlvbnMudHJhbnNwb3J0ID09PSAndW5kZWZpbmVkJyAmJiBoYXNXZWJSVENTdXBwb3J0KCkpIHx8XG4gICAgICAgICAgICBvcHRpb25zLnRyYW5zcG9ydCA9PT0gJ3dlYnJ0YycpIHtcbiAgICAgICAgICAgIHRoaXMuI3RyYW5zcG9ydCA9IG5ldyBPcGVuQUlSZWFsdGltZVdlYlJUQygpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9wdGlvbnMudHJhbnNwb3J0ID09PSAnd2Vic29ja2V0JyB8fFxuICAgICAgICAgICAgdHlwZW9mIG9wdGlvbnMudHJhbnNwb3J0ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdGhpcy4jdHJhbnNwb3J0ID0gbmV3IE9wZW5BSVJlYWx0aW1lV2ViU29ja2V0KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLiN0cmFuc3BvcnQgPSBvcHRpb25zLnRyYW5zcG9ydDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNjdXJyZW50QWdlbnQgPSBpbml0aWFsQWdlbnQ7XG4gICAgICAgIHRoaXMuI2NvbnRleHQgPSBuZXcgUnVuQ29udGV4dCh7XG4gICAgICAgICAgICAuLi4ob3B0aW9ucy5jb250ZXh0ID8/IHt9KSxcbiAgICAgICAgICAgIGhpc3Rvcnk6IHRoaXMuI2hpc3RvcnksXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiNvdXRwdXRHdWFyZHJhaWxzID0gKG9wdGlvbnMub3V0cHV0R3VhcmRyYWlscyA/PyBbXSkubWFwKGRlZmluZVJlYWx0aW1lT3V0cHV0R3VhcmRyYWlsKTtcbiAgICAgICAgdGhpcy4jb3V0cHV0R3VhcmRyYWlsU2V0dGluZ3MgPSBnZXRSZWFsdGltZUd1YXJkcmFpbFNldHRpbmdzKG9wdGlvbnMub3V0cHV0R3VhcmRyYWlsU2V0dGluZ3MgPz8ge30pO1xuICAgICAgICB0aGlzLiNzaG91bGRJbmNsdWRlQXVkaW9EYXRhID0gb3B0aW9ucy5oaXN0b3J5U3RvcmVBdWRpbyA/PyBmYWxzZTtcbiAgICAgICAgdGhpcy4jYXV0b21hdGljYWxseVRyaWdnZXJSZXNwb25zZUZvck1jcFRvb2xDYWxscyA9XG4gICAgICAgICAgICBvcHRpb25zLmF1dG9tYXRpY2FsbHlUcmlnZ2VyUmVzcG9uc2VGb3JNY3BUb29sQ2FsbHMgPz8gdHJ1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHRyYW5zcG9ydCBsYXllciB1c2VkIGJ5IHRoZSBzZXNzaW9uLlxuICAgICAqL1xuICAgIGdldCB0cmFuc3BvcnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiN0cmFuc3BvcnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IGFnZW50IGluIHRoZSBzZXNzaW9uLlxuICAgICAqL1xuICAgIGdldCBjdXJyZW50QWdlbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNjdXJyZW50QWdlbnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IHVzYWdlIG9mIHRoZSBzZXNzaW9uLlxuICAgICAqL1xuICAgIGdldCB1c2FnZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2NvbnRleHQudXNhZ2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IGNvbnRleHQgb2YgdGhlIHNlc3Npb24uXG4gICAgICovXG4gICAgZ2V0IGNvbnRleHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNjb250ZXh0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoZSBzZXNzaW9uIGlzIG11dGVkLiBNaWdodCBiZSBgbnVsbGAgaWYgdGhlIHVuZGVybHlpbmcgdHJhbnNwb3J0IGxheWVyIGRvZXMgbm90XG4gICAgICogc3VwcG9ydCBtdXRpbmcuXG4gICAgICovXG4gICAgZ2V0IG11dGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jdHJhbnNwb3J0Lm11dGVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgaGlzdG9yeSBvZiB0aGUgc2Vzc2lvbi5cbiAgICAgKi9cbiAgICBnZXQgaGlzdG9yeSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2hpc3Rvcnk7XG4gICAgfVxuICAgIGdldCBhdmFpbGFibGVNY3BUb29scygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2F2YWlsYWJsZU1jcFRvb2xzO1xuICAgIH1cbiAgICBhc3luYyAjc2V0Q3VycmVudEFnZW50KGFnZW50KSB7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudCA9IGFnZW50O1xuICAgICAgICBjb25zdCBoYW5kb2ZmcyA9IGF3YWl0IHRoaXMuI2N1cnJlbnRBZ2VudC5nZXRFbmFibGVkSGFuZG9mZnModGhpcy4jY29udGV4dCk7XG4gICAgICAgIGNvbnN0IGhhbmRvZmZUb29scyA9IGhhbmRvZmZzLm1hcCgoaGFuZG9mZikgPT4gaGFuZG9mZi5nZXRIYW5kb2ZmQXNGdW5jdGlvblRvb2woKSk7XG4gICAgICAgIGNvbnN0IGFsbFRvb2xzID0gKGF3YWl0IHRoaXMuI2N1cnJlbnRBZ2VudC5nZXRBbGxUb29scyh0aGlzLiNjb250ZXh0KSlcbiAgICAgICAgICAgIC5maWx0ZXIoaXNWYWxpZFJlYWx0aW1lVG9vbClcbiAgICAgICAgICAgIC5tYXAodG9SZWFsdGltZVRvb2xEZWZpbml0aW9uKTtcbiAgICAgICAgY29uc3QgaGFzVG9vbHNEZWZpbmVkID0gdHlwZW9mIHRoaXMuI2N1cnJlbnRBZ2VudC50b29scyAhPT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgICAgIHR5cGVvZiB0aGlzLiNjdXJyZW50QWdlbnQubWNwU2VydmVycyAhPT0gJ3VuZGVmaW5lZCc7XG4gICAgICAgIGNvbnN0IGhhc0hhbmRvZmZzRGVmaW5lZCA9IGhhbmRvZmZzLmxlbmd0aCA+IDA7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRUb29scyA9XG4gICAgICAgICAgICBoYXNUb29sc0RlZmluZWQgfHwgaGFzSGFuZG9mZnNEZWZpbmVkXG4gICAgICAgICAgICAgICAgPyBbLi4uYWxsVG9vbHMsIC4uLmhhbmRvZmZUb29sc11cbiAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgLy8gUmVjb21wdXRlIGN1cnJlbnRseSBhdmFpbGFibGUgTUNQIHRvb2xzIGJhc2VkIG9uIHRoZSBuZXcgYWdlbnQncyBhY3RpdmUgc2VydmVyIGxhYmVscy5cbiAgICAgICAgdGhpcy4jdXBkYXRlQXZhaWxhYmxlTWNwVG9vbHMoKTtcbiAgICB9XG4gICAgYXN5bmMgI2dldFNlc3Npb25Db25maWcoYWRkaXRpb25hbENvbmZpZyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IG92ZXJyaWRlc0NvbmZpZyA9IGFkZGl0aW9uYWxDb25maWcgPz8ge307XG4gICAgICAgIGNvbnN0IG9wdGlvbnNDb25maWcgPSB0aGlzLm9wdGlvbnMuY29uZmlnID8/IHt9O1xuICAgICAgICBjb25zdCBpbnN0cnVjdGlvbnMgPSBhd2FpdCB0aGlzLiNjdXJyZW50QWdlbnQuZ2V0U3lzdGVtUHJvbXB0KHRoaXMuI2NvbnRleHQpO1xuICAgICAgICBjb25zdCBnZXRBdWRpb091dHB1dFZvaWNlT3ZlcnJpZGUgPSAoY29uZmlnKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBhdWRpb0NvbmZpZyA9IGNvbmZpZ1xuICAgICAgICAgICAgICAgIC5hdWRpbztcbiAgICAgICAgICAgIHJldHVybiBhdWRpb0NvbmZpZz8ub3V0cHV0Py52b2ljZTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gUmVhbHRpbWUgZXhwZWN0cyB0cmFjaW5nIHRvIGJlIGV4cGxpY2l0bHkgbnVsbCB0byBkaXNhYmxlIGl0OyBsZWF2aW5nIHRoZSBwcmV2aW91cyBjb25maWdcbiAgICAgICAgLy8gaW4gcGxhY2Ugd291bGQgb3RoZXJ3aXNlIGNvbnRpbnVlIGVtaXR0aW5nIHNwYW5zLlxuICAgICAgICBjb25zdCB0cmFjaW5nQ29uZmlnID0gdGhpcy5vcHRpb25zXG4gICAgICAgICAgICAudHJhY2luZ0Rpc2FibGVkXG4gICAgICAgICAgICA/IG51bGxcbiAgICAgICAgICAgIDogdGhpcy5vcHRpb25zLndvcmtmbG93TmFtZVxuICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICB3b3JrZmxvd19uYW1lOiB0aGlzLm9wdGlvbnMud29ya2Zsb3dOYW1lLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA6ICdhdXRvJztcbiAgICAgICAgaWYgKHRyYWNpbmdDb25maWcgIT09IG51bGwgJiYgdHJhY2luZ0NvbmZpZyAhPT0gJ2F1dG8nKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmdyb3VwSWQpIHtcbiAgICAgICAgICAgICAgICB0cmFjaW5nQ29uZmlnLmdyb3VwX2lkID0gdGhpcy5vcHRpb25zLmdyb3VwSWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnRyYWNlTWV0YWRhdGEpIHtcbiAgICAgICAgICAgICAgICB0cmFjaW5nQ29uZmlnLm1ldGFkYXRhID0gdGhpcy5vcHRpb25zLnRyYWNlTWV0YWRhdGE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5vcHRpb25zLmdyb3VwSWQgfHwgdGhpcy5vcHRpb25zLnRyYWNlTWV0YWRhdGEpIHtcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKCdJbiBvcmRlciB0byBzZXQgdHJhY2VNZXRhZGF0YSBvciBhIGdyb3VwSWQgeW91IG5lZWQgdG8gc3BlY2lmeSBhIHdvcmtmbG93TmFtZS4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhdWRpb091dHB1dFZvaWNlT3ZlcnJpZGUgPSBnZXRBdWRpb091dHB1dFZvaWNlT3ZlcnJpZGUob3ZlcnJpZGVzQ29uZmlnKSA/P1xuICAgICAgICAgICAgZ2V0QXVkaW9PdXRwdXRWb2ljZU92ZXJyaWRlKG9wdGlvbnNDb25maWcpO1xuICAgICAgICBjb25zdCB0b3BMZXZlbFZvaWNlT3ZlcnJpZGUgPSBvdmVycmlkZXNDb25maWcudm9pY2UgPz8gb3B0aW9uc0NvbmZpZy52b2ljZTtcbiAgICAgICAgY29uc3QgcmVzb2x2ZWRWb2ljZSA9IHR5cGVvZiBhdWRpb091dHB1dFZvaWNlT3ZlcnJpZGUgIT09ICd1bmRlZmluZWQnXG4gICAgICAgICAgICA/IGF1ZGlvT3V0cHV0Vm9pY2VPdmVycmlkZVxuICAgICAgICAgICAgOiB0eXBlb2YgdG9wTGV2ZWxWb2ljZU92ZXJyaWRlICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICAgICAgICAgID8gdG9wTGV2ZWxWb2ljZU92ZXJyaWRlXG4gICAgICAgICAgICAgICAgOiB0aGlzLiNjdXJyZW50QWdlbnQudm9pY2U7XG4gICAgICAgIC8vIFN0YXJ0IGZyb20gYW55IHByZXZpb3VzbHktc2VudCBjb25maWcgKHNvIHdlIHByZXNlcnZlIHZhbHVlcyBsaWtlIGF1ZGlvIGZvcm1hdHMpXG4gICAgICAgIC8vIGFuZCB0aGUgb3JpZ2luYWwgb3B0aW9ucy5jb25maWcgcHJvdmlkZWQgYnkgdGhlIHVzZXIuIFByZWZlcmVuY2Ugb3JkZXI6XG4gICAgICAgIC8vIDEuIExhc3Qgc2Vzc2lvbiBjb25maWcgd2Ugc2VudCAoI2xhc3RTZXNzaW9uQ29uZmlnKVxuICAgICAgICAvLyAyLiBPcmlnaW5hbCBvcHRpb25zLmNvbmZpZ1xuICAgICAgICAvLyAzLiBBZGRpdGlvbmFsIGNvbmZpZyBwYXNzZWQgaW50byB0aGlzIGludm9jYXRpb24gKGV4cGxpY2l0IG92ZXJyaWRlcylcbiAgICAgICAgLy8gRmluYWxseSB3ZSBvdmVyd3JpdGUgZHluYW1pYyBmaWVsZHMgKGluc3RydWN0aW9ucywgdm9pY2UsIG1vZGVsLCB0b29scywgdHJhY2luZylcbiAgICAgICAgLy8gdG8gZW5zdXJlIHRoZXkgYWx3YXlzIHJlZmxlY3QgdGhlIGN1cnJlbnQgYWdlbnQgJiBydW50aW1lIHN0YXRlLlxuICAgICAgICBjb25zdCBiYXNlID0ge1xuICAgICAgICAgICAgLi4uKHRoaXMuI2xhc3RTZXNzaW9uQ29uZmlnID8/IHt9KSxcbiAgICAgICAgICAgIC4uLm9wdGlvbnNDb25maWcsXG4gICAgICAgICAgICAuLi5vdmVycmlkZXNDb25maWcsXG4gICAgICAgIH07XG4gICAgICAgIC8vIE5vdGU6IENlcnRhaW4gZmllbGRzIGNhbm5vdCBiZSB1cGRhdGVkIGFmdGVyIHRoZSBzZXNzaW9uIGJlZ2lucywgc3VjaCBhcyB2b2ljZSBhbmQgbW9kZWxcbiAgICAgICAgY29uc3QgZnVsbENvbmZpZyA9IHtcbiAgICAgICAgICAgIC4uLmJhc2UsXG4gICAgICAgICAgICBpbnN0cnVjdGlvbnMsXG4gICAgICAgICAgICB2b2ljZTogcmVzb2x2ZWRWb2ljZSxcbiAgICAgICAgICAgIG1vZGVsOiB0aGlzLm9wdGlvbnMubW9kZWwsXG4gICAgICAgICAgICB0b29sczogdGhpcy4jY3VycmVudFRvb2xzLFxuICAgICAgICAgICAgdHJhY2luZzogdHJhY2luZ0NvbmZpZyxcbiAgICAgICAgICAgIHByb21wdDogdHlwZW9mIHRoaXMuI2N1cnJlbnRBZ2VudC5wcm9tcHQgPT09ICdmdW5jdGlvbidcbiAgICAgICAgICAgICAgICA/IGF3YWl0IHRoaXMuI2N1cnJlbnRBZ2VudC5wcm9tcHQodGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50KVxuICAgICAgICAgICAgICAgIDogdGhpcy4jY3VycmVudEFnZW50LnByb21wdCxcbiAgICAgICAgfTtcbiAgICAgICAgLy8gVXBkYXRlIG91ciBjYWNoZSBzbyBzdWJzZXF1ZW50IHVwZGF0ZXMgaW5oZXJpdCB0aGUgZnVsbCBzZXQgaW5jbHVkaW5nIGFueVxuICAgICAgICAvLyBkeW5hbWljIGZpZWxkcyB3ZSBqdXN0IG92ZXJ3cm90ZS5cbiAgICAgICAgdGhpcy4jbGFzdFNlc3Npb25Db25maWcgPSBmdWxsQ29uZmlnO1xuICAgICAgICByZXR1cm4gZnVsbENvbmZpZztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29tcHV0ZSB0aGUgaW5pdGlhbCBzZXNzaW9uIGNvbmZpZyB0aGF0IHRoZSBjdXJyZW50IHNlc3Npb24gd2lsbCB1c2Ugd2hlbiBjb25uZWN0aW5nLlxuICAgICAqXG4gICAgICogVGhpcyBtaXJyb3JzIHRoZSBjb25maWd1cmF0aW9uIHBheWxvYWQgd2Ugc2VuZCBkdXJpbmcgYGNvbm5lY3RgLCBpbmNsdWRpbmcgZHluYW1pYyB2YWx1ZXNcbiAgICAgKiBzdWNoIGFzIHRoZSB1cHN0cmVhbSBhZ2VudCBpbnN0cnVjdGlvbnMsIHRvb2wgZGVmaW5pdGlvbnMsIGFuZCBwcm9tcHQgY29udGVudCBnZW5lcmF0ZWQgYXRcbiAgICAgKiBydW50aW1lLiBLZWVwaW5nIHRoaXMgaGVscGVyIGV4cG9zZWQgYWxsb3dzIHRyYW5zcG9ydHMgb3Igb3JjaGVzdHJhdGlvbiBsYXllcnMgdG8gcHJlY29tcHV0ZVxuICAgICAqIGEgQ2FsbEFjY2VwdC1jb21wYXRpYmxlIHBheWxvYWQgd2l0aG91dCBvcGVuaW5nIGEgc29ja2V0LlxuICAgICAqXG4gICAgICogQHBhcmFtIG92ZXJyaWRlcyAtIEFkZGl0aW9uYWwgY29uZmlnIG92ZXJyaWRlcyBhcHBsaWVkIG9uIHRvcCBvZiB0aGUgc2Vzc2lvbiBvcHRpb25zLlxuICAgICAqL1xuICAgIGFzeW5jIGdldEluaXRpYWxTZXNzaW9uQ29uZmlnKG92ZXJyaWRlcyA9IHt9KSB7XG4gICAgICAgIGF3YWl0IHRoaXMuI3NldEN1cnJlbnRBZ2VudCh0aGlzLmluaXRpYWxBZ2VudCk7XG4gICAgICAgIHJldHVybiB0aGlzLiNnZXRTZXNzaW9uQ29uZmlnKHtcbiAgICAgICAgICAgIC4uLih0aGlzLm9wdGlvbnMuY29uZmlnID8/IHt9KSxcbiAgICAgICAgICAgIC4uLihvdmVycmlkZXMgPz8ge30pLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udmVuaWVuY2UgaGVscGVyIHRvIGNvbXB1dGUgdGhlIGluaXRpYWwgc2Vzc2lvbiBjb25maWcgd2l0aG91dCBtYW51YWxseSBpbnN0YW50aWF0aW5nIGFuZCBjb25uZWN0aW5nIGEgc2Vzc2lvbi5cbiAgICAgKlxuICAgICAqIFRoaXMgaXMgcHJpbWFyaWx5IHVzZWZ1bCBmb3IgaW50ZWdyYXRpb25zIHRoYXQgbXVzdCBwcm92aWRlIHRoZSBzZXNzaW9uIGNvbmZpZ3VyYXRpb24gdG8gYVxuICAgICAqIHRoaXJkIHBhcnR5IChmb3IgZXhhbXBsZSB0aGUgU0lQIGBjYWxscy5hY2NlcHRgIGVuZHBvaW50KSBiZWZvcmUgdGhlIGFjdHVhbCByZWFsdGltZSBzZXNzaW9uXG4gICAgICogaXMgYXR0YWNoZWQuIFRoZSBoZWxwZXIgaW5zdGFudGlhdGVzIGEgdGhyb3dhd2F5IHNlc3Npb24gc28gYWxsIGFnZW50LWRyaXZlbiBkeW5hbWljIGZpZWxkc1xuICAgICAqIHJlc29sdmUgaW4gZXhhY3RseSB0aGUgc2FtZSB3YXkgYXMgdGhlIGxpdmUgc2Vzc2lvbiBwYXRoLlxuICAgICAqXG4gICAgICogQHBhcmFtIGFnZW50IC0gVGhlIHN0YXJ0aW5nIGFnZW50IGZvciB0aGUgc2Vzc2lvbi5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIFNlc3Npb24gb3B0aW9ucyB1c2VkIHRvIHNlZWQgdGhlIGNvbmZpZyBjYWxjdWxhdGlvbi5cbiAgICAgKiBAcGFyYW0gb3ZlcnJpZGVzIC0gQWRkaXRpb25hbCBjb25maWcgb3ZlcnJpZGVzIGFwcGxpZWQgb24gdG9wIG9mIHRoZSBwcm92aWRlZCBvcHRpb25zLlxuICAgICAqL1xuICAgIHN0YXRpYyBhc3luYyBjb21wdXRlSW5pdGlhbFNlc3Npb25Db25maWcoYWdlbnQsIG9wdGlvbnMgPSB7fSwgb3ZlcnJpZGVzID0ge30pIHtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IG5ldyBSZWFsdGltZVNlc3Npb24oYWdlbnQsIG9wdGlvbnMpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHNlc3Npb24uZ2V0SW5pdGlhbFNlc3Npb25Db25maWcob3ZlcnJpZGVzKTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIHNlc3Npb24uY2xvc2UoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyB1cGRhdGVBZ2VudChuZXdBZ2VudCkge1xuICAgICAgICB0aGlzLiNjdXJyZW50QWdlbnQuZW1pdCgnYWdlbnRfaGFuZG9mZicsIHRoaXMuI2NvbnRleHQsIG5ld0FnZW50KTtcbiAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF9oYW5kb2ZmJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCBuZXdBZ2VudCk7XG4gICAgICAgIGF3YWl0IHRoaXMuI3NldEN1cnJlbnRBZ2VudChuZXdBZ2VudCk7XG4gICAgICAgIGF3YWl0IHRoaXMuI3RyYW5zcG9ydC51cGRhdGVTZXNzaW9uQ29uZmlnKGF3YWl0IHRoaXMuI2dldFNlc3Npb25Db25maWcoKSk7XG4gICAgICAgIHJldHVybiBuZXdBZ2VudDtcbiAgICB9XG4gICAgYXN5bmMgI2hhbmRsZUhhbmRvZmYodG9vbENhbGwsIGhhbmRvZmYpIHtcbiAgICAgICAgY29uc3QgbmV3QWdlbnQgPSAoYXdhaXQgaGFuZG9mZi5vbkludm9rZUhhbmRvZmYodGhpcy4jY29udGV4dCwgdG9vbENhbGwuYXJndW1lbnRzKSk7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF9oYW5kb2ZmJywgdGhpcy4jY29udGV4dCwgbmV3QWdlbnQpO1xuICAgICAgICB0aGlzLmVtaXQoJ2FnZW50X2hhbmRvZmYnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQsIG5ld0FnZW50KTtcbiAgICAgICAgLy8gdXBkYXRlIHNlc3Npb24gd2l0aCBuZXcgYWdlbnRcbiAgICAgICAgYXdhaXQgdGhpcy4jc2V0Q3VycmVudEFnZW50KG5ld0FnZW50KTtcbiAgICAgICAgYXdhaXQgdGhpcy4jdHJhbnNwb3J0LnVwZGF0ZVNlc3Npb25Db25maWcoYXdhaXQgdGhpcy4jZ2V0U2Vzc2lvbkNvbmZpZygpKTtcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0gZ2V0VHJhbnNmZXJNZXNzYWdlKG5ld0FnZW50KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0LnNlbmRGdW5jdGlvbkNhbGxPdXRwdXQodG9vbENhbGwsIG91dHB1dCwgdHJ1ZSk7XG4gICAgICAgIHJldHVybiBuZXdBZ2VudDtcbiAgICB9XG4gICAgYXN5bmMgI2hhbmRsZUZ1bmN0aW9uVG9vbENhbGwodG9vbENhbGwsIHRvb2wpIHtcbiAgICAgICAgdGhpcy4jY29udGV4dC5jb250ZXh0Lmhpc3RvcnkgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuI2hpc3RvcnkpKTsgLy8gZGVlcCBjb3B5IG9mIHRoZSBoaXN0b3J5XG4gICAgICAgIGxldCBwYXJzZWRBcmdzID0gdG9vbENhbGwuYXJndW1lbnRzO1xuICAgICAgICBpZiAodG9vbC5wYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICBpZiAoaXNab2RPYmplY3QodG9vbC5wYXJhbWV0ZXJzKSkge1xuICAgICAgICAgICAgICAgIHBhcnNlZEFyZ3MgPSB0b29sLnBhcmFtZXRlcnMucGFyc2UocGFyc2VkQXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwYXJzZWRBcmdzID0gSlNPTi5wYXJzZShwYXJzZWRBcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZWVkc0FwcHJvdmFsID0gYXdhaXQgdG9vbC5uZWVkc0FwcHJvdmFsKHRoaXMuI2NvbnRleHQsIHBhcnNlZEFyZ3MsIHRvb2xDYWxsLmNhbGxJZCk7XG4gICAgICAgIGlmIChuZWVkc0FwcHJvdmFsKSB7XG4gICAgICAgICAgICBjb25zdCBhcHByb3ZhbCA9IHRoaXMuY29udGV4dC5pc1Rvb2xBcHByb3ZlZCh7XG4gICAgICAgICAgICAgICAgdG9vbE5hbWU6IHRvb2wubmFtZSxcbiAgICAgICAgICAgICAgICBjYWxsSWQ6IHRvb2xDYWxsLmNhbGxJZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGFwcHJvdmFsID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfdG9vbF9zdGFydCcsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCwgdG9vbCwge1xuICAgICAgICAgICAgICAgICAgICB0b29sQ2FsbCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLiNjdXJyZW50QWdlbnQuZW1pdCgnYWdlbnRfdG9vbF9zdGFydCcsIHRoaXMuI2NvbnRleHQsIHRvb2wsIHtcbiAgICAgICAgICAgICAgICAgICAgdG9vbENhbGwsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gJ1Rvb2wgZXhlY3V0aW9uIHdhcyBub3QgYXBwcm92ZWQuJztcbiAgICAgICAgICAgICAgICB0aGlzLiN0cmFuc3BvcnQuc2VuZEZ1bmN0aW9uQ2FsbE91dHB1dCh0b29sQ2FsbCwgcmVzdWx0LCB0cnVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2FnZW50X3Rvb2xfZW5kJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCB0b29sLCByZXN1bHQsIHsgdG9vbENhbGwgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy4jY3VycmVudEFnZW50LmVtaXQoJ2FnZW50X3Rvb2xfZW5kJywgdGhpcy4jY29udGV4dCwgdG9vbCwgcmVzdWx0LCB7XG4gICAgICAgICAgICAgICAgICAgIHRvb2xDYWxsLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBhcHByb3ZhbCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ3Rvb2xfYXBwcm92YWxfcmVxdWVzdGVkJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbl9hcHByb3ZhbCcsXG4gICAgICAgICAgICAgICAgICAgIHRvb2wsXG4gICAgICAgICAgICAgICAgICAgIGFwcHJvdmFsSXRlbTogbmV3IFJ1blRvb2xBcHByb3ZhbEl0ZW0odG9vbENhbGwsIHRoaXMuI2N1cnJlbnRBZ2VudCksXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGlucHV0R3VhcmRyYWlsUmVzdWx0ID0gYXdhaXQgcnVuVG9vbElucHV0R3VhcmRyYWlscyh7XG4gICAgICAgICAgICBndWFyZHJhaWxzOiB0b29sLmlucHV0R3VhcmRyYWlscyxcbiAgICAgICAgICAgIGNvbnRleHQ6IHRoaXMuI2NvbnRleHQsXG4gICAgICAgICAgICBhZ2VudDogdGhpcy4jY3VycmVudEFnZW50LFxuICAgICAgICAgICAgdG9vbENhbGw6IHRvb2xDYWxsLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF90b29sX3N0YXJ0JywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCB0b29sLCB7XG4gICAgICAgICAgICB0b29sQ2FsbCxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF90b29sX3N0YXJ0JywgdGhpcy4jY29udGV4dCwgdG9vbCwge1xuICAgICAgICAgICAgdG9vbENhbGwsXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiNjb250ZXh0LmNvbnRleHQuaGlzdG9yeSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy4jaGlzdG9yeSkpOyAvLyBkZWVwIGNvcHkgb2YgdGhlIGhpc3RvcnlcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gaW5wdXRHdWFyZHJhaWxSZXN1bHQudHlwZSA9PT0gJ3JlamVjdCdcbiAgICAgICAgICAgID8gaW5wdXRHdWFyZHJhaWxSZXN1bHQubWVzc2FnZVxuICAgICAgICAgICAgOiBhd2FpdCB0b29sLmludm9rZSh0aGlzLiNjb250ZXh0LCB0b29sQ2FsbC5hcmd1bWVudHMsIHtcbiAgICAgICAgICAgICAgICB0b29sQ2FsbCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICBjb25zdCBndWFyZGVkUmVzdWx0ID0gaW5wdXRHdWFyZHJhaWxSZXN1bHQudHlwZSA9PT0gJ3JlamVjdCdcbiAgICAgICAgICAgID8gcmVzdWx0XG4gICAgICAgICAgICA6IGF3YWl0IHJ1blRvb2xPdXRwdXRHdWFyZHJhaWxzKHtcbiAgICAgICAgICAgICAgICBndWFyZHJhaWxzOiB0b29sLm91dHB1dEd1YXJkcmFpbHMsXG4gICAgICAgICAgICAgICAgY29udGV4dDogdGhpcy4jY29udGV4dCxcbiAgICAgICAgICAgICAgICBhZ2VudDogdGhpcy4jY3VycmVudEFnZW50LFxuICAgICAgICAgICAgICAgIHRvb2xDYWxsOiB0b29sQ2FsbCxcbiAgICAgICAgICAgICAgICB0b29sT3V0cHV0OiByZXN1bHQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgbGV0IHN0cmluZ1Jlc3VsdDtcbiAgICAgICAgaWYgKGlzQmFja2dyb3VuZFJlc3VsdChndWFyZGVkUmVzdWx0KSkge1xuICAgICAgICAgICAgLy8gRG9uJ3QgZ2VuZXJhdGUgYSBuZXcgcmVzcG9uc2UsIGp1c3Qgc2VuZCB0aGUgcmVzdWx0XG4gICAgICAgICAgICBzdHJpbmdSZXN1bHQgPSB0b1NtYXJ0U3RyaW5nKGd1YXJkZWRSZXN1bHQuY29udGVudCk7XG4gICAgICAgICAgICB0aGlzLiN0cmFuc3BvcnQuc2VuZEZ1bmN0aW9uQ2FsbE91dHB1dCh0b29sQ2FsbCwgc3RyaW5nUmVzdWx0LCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdHJpbmdSZXN1bHQgPSB0b1NtYXJ0U3RyaW5nKGd1YXJkZWRSZXN1bHQpO1xuICAgICAgICAgICAgdGhpcy4jdHJhbnNwb3J0LnNlbmRGdW5jdGlvbkNhbGxPdXRwdXQodG9vbENhbGwsIHN0cmluZ1Jlc3VsdCwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF90b29sX2VuZCcsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCwgdG9vbCwgc3RyaW5nUmVzdWx0LCB7IHRvb2xDYWxsIH0pO1xuICAgICAgICB0aGlzLiNjdXJyZW50QWdlbnQuZW1pdCgnYWdlbnRfdG9vbF9lbmQnLCB0aGlzLiNjb250ZXh0LCB0b29sLCBzdHJpbmdSZXN1bHQsIHsgdG9vbENhbGwgfSk7XG4gICAgfVxuICAgIGFzeW5jICNoYW5kbGVGdW5jdGlvbkNhbGwodG9vbENhbGwpIHtcbiAgICAgICAgY29uc3QgZW5hYmxlZEhhbmRvZmZzID0gYXdhaXQgdGhpcy4jY3VycmVudEFnZW50LmdldEVuYWJsZWRIYW5kb2Zmcyh0aGlzLiNjb250ZXh0KTtcbiAgICAgICAgY29uc3QgaGFuZG9mZk1hcCA9IG5ldyBNYXAoZW5hYmxlZEhhbmRvZmZzLm1hcCgoaGFuZG9mZikgPT4gW2hhbmRvZmYudG9vbE5hbWUsIGhhbmRvZmZdKSk7XG4gICAgICAgIGNvbnN0IGFsbFRvb2xzID0gYXdhaXQgdGhpcy4jY3VycmVudEFnZW50LmdldEFsbFRvb2xzKHRoaXMuI2NvbnRleHQpO1xuICAgICAgICBjb25zdCBmdW5jdGlvblRvb2xNYXAgPSBuZXcgTWFwKGFsbFRvb2xzLm1hcCgodG9vbCkgPT4gW3Rvb2wubmFtZSwgdG9vbF0pKTtcbiAgICAgICAgY29uc3QgcG9zc2libGVIYW5kb2ZmID0gaGFuZG9mZk1hcC5nZXQodG9vbENhbGwubmFtZSk7XG4gICAgICAgIGlmIChwb3NzaWJsZUhhbmRvZmYpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuI2hhbmRsZUhhbmRvZmYodG9vbENhbGwsIHBvc3NpYmxlSGFuZG9mZik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBmdW5jdGlvblRvb2wgPSBmdW5jdGlvblRvb2xNYXAuZ2V0KHRvb2xDYWxsLm5hbWUpO1xuICAgICAgICAgICAgaWYgKGZ1bmN0aW9uVG9vbCAmJiBmdW5jdGlvblRvb2wudHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuI2hhbmRsZUZ1bmN0aW9uVG9vbENhbGwodG9vbENhbGwsIGZ1bmN0aW9uVG9vbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKGBUb29sICR7dG9vbENhbGwubmFtZX0gbm90IGZvdW5kYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgI3J1bk91dHB1dEd1YXJkcmFpbHMob3V0cHV0LCByZXNwb25zZUlkLCBpdGVtSWQpIHtcbiAgICAgICAgaWYgKHRoaXMuI291dHB1dEd1YXJkcmFpbHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZ3VhcmRyYWlsQXJncyA9IHtcbiAgICAgICAgICAgIGFnZW50OiB0aGlzLiNjdXJyZW50QWdlbnQsXG4gICAgICAgICAgICBhZ2VudE91dHB1dDogb3V0cHV0LFxuICAgICAgICAgICAgY29udGV4dDogdGhpcy4jY29udGV4dCxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsKHRoaXMuI291dHB1dEd1YXJkcmFpbHMubWFwKChndWFyZHJhaWwpID0+IGd1YXJkcmFpbC5ydW4oZ3VhcmRyYWlsQXJncykpKTtcbiAgICAgICAgY29uc3QgZmlyc3RUcmlwd2lyZVRyaWdnZXJlZCA9IHJlc3VsdHMuZmluZCgocmVzdWx0KSA9PiByZXN1bHQub3V0cHV0LnRyaXB3aXJlVHJpZ2dlcmVkKTtcbiAgICAgICAgaWYgKGZpcnN0VHJpcHdpcmVUcmlnZ2VyZWQpIHtcbiAgICAgICAgICAgIC8vIHRoaXMgZW5zdXJlcyB0aGF0IGlmIG9uZSBndWFyZHJhaWwgYWxyZWFkeSB0cmlwcyBhbmQgd2UgYXJlIGluIHRoZSBtaWRkbGUgb2YgYW5vdGhlclxuICAgICAgICAgICAgLy8gZ3VhcmRyYWlsIHJ1biwgd2UgZG9uJ3QgdHJpcCBhZ2FpblxuICAgICAgICAgICAgaWYgKHRoaXMuI2ludGVycnVwdGVkQnlHdWFyZHJhaWxbcmVzcG9uc2VJZF0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLiNpbnRlcnJ1cHRlZEJ5R3VhcmRyYWlsW3Jlc3BvbnNlSWRdID0gdHJ1ZTtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yID0gbmV3IE91dHB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkKGBPdXRwdXQgZ3VhcmRyYWlsIHRyaWdnZXJlZDogJHtKU09OLnN0cmluZ2lmeShmaXJzdFRyaXB3aXJlVHJpZ2dlcmVkLm91dHB1dC5vdXRwdXRJbmZvKX1gLCBmaXJzdFRyaXB3aXJlVHJpZ2dlcmVkKTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnZ3VhcmRyYWlsX3RyaXBwZWQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQsIGVycm9yLCB7XG4gICAgICAgICAgICAgICAgaXRlbUlkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmludGVycnVwdCgpO1xuICAgICAgICAgICAgY29uc3QgZmVlZGJhY2tUZXh0ID0gZ2V0UmVhbHRpbWVHdWFyZHJhaWxGZWVkYmFja01lc3NhZ2UoZmlyc3RUcmlwd2lyZVRyaWdnZXJlZCk7XG4gICAgICAgICAgICB0aGlzLnNlbmRNZXNzYWdlKGZlZWRiYWNrVGV4dCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG4gICAgI3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQub24oJyonLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgndHJhbnNwb3J0X2V2ZW50JywgZXZlbnQpO1xuICAgICAgICAgICAgLy8gSGFuZGxlIGNvbXBsZXRlZCB1c2VyIHRyYW5zY3JpcHRpb24gZXZlbnRzXG4gICAgICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ2NvbnZlcnNhdGlvbi5pdGVtLmlucHV0X2F1ZGlvX3RyYW5zY3JpcHRpb24uY29tcGxldGVkJykge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRlZEV2ZW50ID0gZXZlbnQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuI2hpc3RvcnkgPSB1cGRhdGVSZWFsdGltZUhpc3RvcnkodGhpcy4jaGlzdG9yeSwgY29tcGxldGVkRXZlbnQsIHRoaXMuI3Nob3VsZEluY2x1ZGVBdWRpb0RhdGEpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiNjb250ZXh0LmNvbnRleHQuaGlzdG9yeSA9IHRoaXMuI2hpc3Rvcnk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnaGlzdG9yeV91cGRhdGVkJywgdGhpcy4jaGlzdG9yeSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogZXJyLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQub24oJ21jcF90b29sc19saXN0ZWQnLCAoeyBzZXJ2ZXJMYWJlbCwgdG9vbHMgfSkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLiNhbGxNY3BUb29sc0J5U2VydmVyLnNldChzZXJ2ZXJMYWJlbCwgdG9vbHMgPz8gW10pO1xuICAgICAgICAgICAgICAgIHRoaXMuI3VwZGF0ZUF2YWlsYWJsZU1jcFRvb2xzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIHsgdHlwZTogJ2Vycm9yJywgZXJyb3I6IGVyciB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignYXVkaW8nLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy4jYXVkaW9TdGFydGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jYXVkaW9TdGFydGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2F1ZGlvX3N0YXJ0JywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZW1pdCgnYXVkaW8nLCBldmVudCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQub24oJ3R1cm5fc3RhcnRlZCcsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuI2F1ZGlvU3RhcnRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF9zdGFydCcsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCk7XG4gICAgICAgICAgICB0aGlzLiNjdXJyZW50QWdlbnQuZW1pdCgnYWdlbnRfc3RhcnQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCd0dXJuX2RvbmUnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBldmVudC5yZXNwb25zZS5vdXRwdXRbZXZlbnQucmVzcG9uc2Uub3V0cHV0Lmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgY29uc3QgdGV4dE91dHB1dCA9IGdldExhc3RUZXh0RnJvbUF1ZGlvT3V0cHV0TWVzc2FnZShpdGVtKSA/PyAnJztcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1JZCA9IGl0ZW0/LmlkID8/ICcnO1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF9lbmQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQsIHRleHRPdXRwdXQpO1xuICAgICAgICAgICAgdGhpcy4jY3VycmVudEFnZW50LmVtaXQoJ2FnZW50X2VuZCcsIHRoaXMuI2NvbnRleHQsIHRleHRPdXRwdXQpO1xuICAgICAgICAgICAgdGhpcy4jcnVuT3V0cHV0R3VhcmRyYWlscyh0ZXh0T3V0cHV0LCBldmVudC5yZXNwb25zZS5pZCwgaXRlbUlkKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignYXVkaW9fZG9uZScsICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLiNhdWRpb1N0YXJ0ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiNhdWRpb1N0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZW1pdCgnYXVkaW9fc3RvcHBlZCcsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCk7XG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgbGFzdFJ1bkluZGV4ID0gMDtcbiAgICAgICAgbGV0IGxhc3RJdGVtSWQ7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignYXVkaW9fdHJhbnNjcmlwdF9kZWx0YScsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBkZWx0YSA9IGV2ZW50LmRlbHRhO1xuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1JZCA9IGV2ZW50Lml0ZW1JZDtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZUlkID0gZXZlbnQucmVzcG9uc2VJZDtcbiAgICAgICAgICAgICAgICBpZiAobGFzdEl0ZW1JZCAhPT0gaXRlbUlkKSB7XG4gICAgICAgICAgICAgICAgICAgIGxhc3RJdGVtSWQgPSBpdGVtSWQ7XG4gICAgICAgICAgICAgICAgICAgIGxhc3RSdW5JbmRleCA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRUZXh0ID0gdGhpcy4jdHJhbnNjcmliZWRUZXh0RGVsdGFzW2l0ZW1JZF0gPz8gJyc7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3VGV4dCA9IGN1cnJlbnRUZXh0ICsgZGVsdGE7XG4gICAgICAgICAgICAgICAgdGhpcy4jdHJhbnNjcmliZWRUZXh0RGVsdGFzW2l0ZW1JZF0gPSBuZXdUZXh0O1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLiNvdXRwdXRHdWFyZHJhaWxTZXR0aW5ncy5kZWJvdW5jZVRleHRMZW5ndGggPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3UnVuSW5kZXggPSBNYXRoLmZsb29yKG5ld1RleHQubGVuZ3RoIC8gdGhpcy4jb3V0cHV0R3VhcmRyYWlsU2V0dGluZ3MuZGVib3VuY2VUZXh0TGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBpZiAobmV3UnVuSW5kZXggPiBsYXN0UnVuSW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgbGFzdFJ1bkluZGV4ID0gbmV3UnVuSW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIGRvbid0IGNhbmNlbCBleGlzdGluZyBydW5zIGJlY2F1c2Ugd2Ugd2FudCB0aGUgZmlyc3Qgb25lIHRvIGZhaWwgdG8gZmFpbFxuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgdHJhbnNwb3J0IGxheWVyIHNob3VsZCB1cG9uIGZhaWx1cmUgaGFuZGxlIHRoZSBpbnRlcnJ1cHRpb24gYW5kIHN0b3AgdGhlIG1vZGVsXG4gICAgICAgICAgICAgICAgICAgIC8vIGZyb20gZ2VuZXJhdGluZyBmdXJ0aGVyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuI3J1bk91dHB1dEd1YXJkcmFpbHMobmV3VGV4dCwgcmVzcG9uc2VJZCwgaXRlbUlkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGVycixcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignaXRlbV91cGRhdGUnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNOZXcgPSAhdGhpcy4jaGlzdG9yeS5zb21lKChpdGVtKSA9PiBpdGVtLml0ZW1JZCA9PT0gZXZlbnQuaXRlbUlkKTtcbiAgICAgICAgICAgICAgICB0aGlzLiNoaXN0b3J5ID0gdXBkYXRlUmVhbHRpbWVIaXN0b3J5KHRoaXMuI2hpc3RvcnksIGV2ZW50LCB0aGlzLiNzaG91bGRJbmNsdWRlQXVkaW9EYXRhKTtcbiAgICAgICAgICAgICAgICB0aGlzLiNjb250ZXh0LmNvbnRleHQuaGlzdG9yeSA9IHRoaXMuI2hpc3Rvcnk7XG4gICAgICAgICAgICAgICAgaWYgKGlzTmV3KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFkZGVkSXRlbSA9IHRoaXMuI2hpc3RvcnkuZmluZCgoaXRlbSkgPT4gaXRlbS5pdGVtSWQgPT09IGV2ZW50Lml0ZW1JZCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhZGRlZEl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnaGlzdG9yeV9hZGRlZCcsIGFkZGVkSXRlbSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdoaXN0b3J5X3VwZGF0ZWQnLCB0aGlzLiNoaXN0b3J5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZXJyLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCdpdGVtX2RlbGV0ZWQnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jaGlzdG9yeSA9IHRoaXMuI2hpc3RvcnkuZmlsdGVyKChpdGVtKSA9PiBpdGVtLml0ZW1JZCAhPT0gZXZlbnQuaXRlbUlkKTtcbiAgICAgICAgICAgICAgICB0aGlzLiNjb250ZXh0LmNvbnRleHQuaGlzdG9yeSA9IHRoaXMuI2hpc3Rvcnk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdoaXN0b3J5X3VwZGF0ZWQnLCB0aGlzLiNoaXN0b3J5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZXJyLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCdmdW5jdGlvbl9jYWxsJywgYXN5bmMgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuI2hhbmRsZUZ1bmN0aW9uQ2FsbChldmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGhhbmRsaW5nIGZ1bmN0aW9uIGNhbGwnLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3IsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQub24oJ3VzYWdlX3VwZGF0ZScsICh1c2FnZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy4jY29udGV4dC51c2FnZS5hZGQodXNhZ2UpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCdhdWRpb19pbnRlcnJ1cHRlZCcsICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLiNhdWRpb1N0YXJ0ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiNhdWRpb1N0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZW1pdCgnYXVkaW9faW50ZXJydXB0ZWQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCdlcnJvcicsIChlcnJvcikgPT4ge1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignbWNwX3Rvb2xfY2FsbF9jb21wbGV0ZWQnLCAodG9vbENhbGwpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnbWNwX3Rvb2xfY2FsbF9jb21wbGV0ZWQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQsIHRvb2xDYWxsKTtcbiAgICAgICAgICAgIGlmICh0aGlzLiNhdXRvbWF0aWNhbGx5VHJpZ2dlclJlc3BvbnNlRm9yTWNwVG9vbENhbGxzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jdHJhbnNwb3J0LnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdyZXNwb25zZS5jcmVhdGUnLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCdtY3BfYXBwcm92YWxfcmVxdWVzdCcsIChhcHByb3ZhbFJlcXVlc3QpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgndG9vbF9hcHByb3ZhbF9yZXF1ZXN0ZWQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQsIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnbWNwX2FwcHJvdmFsX3JlcXVlc3QnLFxuICAgICAgICAgICAgICAgIGFwcHJvdmFsSXRlbTogcmVhbHRpbWVBcHByb3ZhbEl0ZW1Ub0FwcHJvdmFsSXRlbSh0aGlzLiNjdXJyZW50QWdlbnQsIGFwcHJvdmFsUmVxdWVzdCksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlY29tcHV0ZXMgdGhlIGN1cnJlbnRseSBhdmFpbGFibGUgTUNQIHRvb2xzIGJhc2VkIG9uIHRoZSBjdXJyZW50IGFnZW50J3MgYWN0aXZlXG4gICAgICogTUNQIHNlcnZlciBjb25maWd1cmF0aW9ucyBhbmQgdGhlIGNhY2hlZCBwZXItc2VydmVyIHRvb2wgbGlzdGluZ3MuIEVtaXRzXG4gICAgICogYG1jcF90b29sc19jaGFuZ2VkYCBpZiB0aGUgc2V0IGNoYW5nZWQuXG4gICAgICovXG4gICAgI3VwZGF0ZUF2YWlsYWJsZU1jcFRvb2xzKCkge1xuICAgICAgICAvLyBDb2xsZWN0IGFjdGl2ZSBNQ1Agc2VydmVyIGxhYmVscyBhbmQgb3B0aW9uYWwgYWxsb3dlZCBmaWx0ZXJzIGZyb20gdGhlIGN1cnJlbnQgYWdlbnRcbiAgICAgICAgY29uc3QgYWN0aXZlTWNwQ29uZmlncyA9IHRoaXMuI2N1cnJlbnRUb29scz8uZmlsdGVyKCh0KSA9PiB0LnR5cGUgPT09ICdtY3AnKTtcbiAgICAgICAgY29uc3QgYWxsb3dlZEZyb21Db25maWcgPSAoY2ZnKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBhbGxvd2VkID0gY2ZnLmFsbG93ZWRfdG9vbHM7XG4gICAgICAgICAgICBpZiAoIWFsbG93ZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGFsbG93ZWQpKVxuICAgICAgICAgICAgICAgIHJldHVybiBhbGxvd2VkO1xuICAgICAgICAgICAgaWYgKGFsbG93ZWQgJiYgQXJyYXkuaXNBcnJheShhbGxvd2VkLnRvb2xfbmFtZXMpKVxuICAgICAgICAgICAgICAgIHJldHVybiBhbGxvd2VkLnRvb2xfbmFtZXM7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBkZWR1cEJ5TmFtZSA9IG5ldyBNYXAoKTtcbiAgICAgICAgZm9yIChjb25zdCBjZmcgb2YgYWN0aXZlTWNwQ29uZmlncykge1xuICAgICAgICAgICAgY29uc3QgdG9vbHMgPSB0aGlzLiNhbGxNY3BUb29sc0J5U2VydmVyLmdldChjZmcuc2VydmVyX2xhYmVsKSA/PyBbXTtcbiAgICAgICAgICAgIGNvbnN0IGFsbG93ZWQgPSBhbGxvd2VkRnJvbUNvbmZpZyhjZmcpO1xuICAgICAgICAgICAgZm9yIChjb25zdCB0b29sIG9mIHRvb2xzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGFsbG93ZWQgJiYgIWFsbG93ZWQuaW5jbHVkZXModG9vbC5uYW1lKSlcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgaWYgKCFkZWR1cEJ5TmFtZS5oYXModG9vbC5uYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICBkZWR1cEJ5TmFtZS5zZXQodG9vbC5uYW1lLCB0b29sKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmV4dCA9IEFycmF5LmZyb20oZGVkdXBCeU5hbWUudmFsdWVzKCkpO1xuICAgICAgICBjb25zdCBwcmV2ID0gdGhpcy4jYXZhaWxhYmxlTWNwVG9vbHM7XG4gICAgICAgIGNvbnN0IGNoYW5nZWQgPSBwcmV2Lmxlbmd0aCAhPT0gbmV4dC5sZW5ndGggfHxcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHByZXYubWFwKCh0KSA9PiB0Lm5hbWUpLnNvcnQoKSkgIT09XG4gICAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkobmV4dC5tYXAoKHQpID0+IHQubmFtZSkuc29ydCgpKTtcbiAgICAgICAgaWYgKGNoYW5nZWQpIHtcbiAgICAgICAgICAgIHRoaXMuI2F2YWlsYWJsZU1jcFRvb2xzID0gbmV4dDtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnbWNwX3Rvb2xzX2NoYW5nZWQnLCB0aGlzLiNhdmFpbGFibGVNY3BUb29scyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29ubmVjdCB0byB0aGUgc2Vzc2lvbi4gVGhpcyB3aWxsIGVzdGFibGlzaCB0aGUgY29ubmVjdGlvbiB0byB0aGUgdW5kZXJseWluZyB0cmFuc3BvcnQgbGF5ZXJcbiAgICAgKiBhbmQgc3RhcnQgdGhlIHNlc3Npb24uXG4gICAgICpcbiAgICAgKiBBZnRlciBjb25uZWN0aW5nLCB0aGUgc2Vzc2lvbiB3aWxsIGFsc28gZW1pdCBhIGBoaXN0b3J5X3VwZGF0ZWRgIGV2ZW50IHdpdGggYW4gZW1wdHkgaGlzdG9yeS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gVGhlIG9wdGlvbnMgZm9yIHRoZSBjb25uZWN0aW9uLlxuICAgICAqL1xuICAgIGFzeW5jIGNvbm5lY3Qob3B0aW9ucykge1xuICAgICAgICAvLyBtYWtlcyBzdXJlIHRoZSBjdXJyZW50IGFnZW50IGlzIGNvcnJlY3RseSBzZXQgYW5kIGxvYWRzIHRoZSB0b29sc1xuICAgICAgICBhd2FpdCB0aGlzLiNzZXRDdXJyZW50QWdlbnQodGhpcy5pbml0aWFsQWdlbnQpO1xuICAgICAgICB0aGlzLiNzZXRFdmVudExpc3RlbmVycygpO1xuICAgICAgICBhd2FpdCB0aGlzLiN0cmFuc3BvcnQuY29ubmVjdCh7XG4gICAgICAgICAgICBhcGlLZXk6IG9wdGlvbnMuYXBpS2V5ID8/IHRoaXMub3B0aW9ucy5hcGlLZXksXG4gICAgICAgICAgICBtb2RlbDogdGhpcy5vcHRpb25zLm1vZGVsLFxuICAgICAgICAgICAgdXJsOiBvcHRpb25zLnVybCxcbiAgICAgICAgICAgIGNhbGxJZDogb3B0aW9ucy5jYWxsSWQsXG4gICAgICAgICAgICBpbml0aWFsU2Vzc2lvbkNvbmZpZzogYXdhaXQgdGhpcy4jZ2V0U2Vzc2lvbkNvbmZpZyh0aGlzLm9wdGlvbnMuY29uZmlnKSxcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIEVuc3VyZSB0aGUgY2FjaGVkIGxhc3RTZXNzaW9uQ29uZmlnIGluY2x1ZGVzIGV2ZXJ5dGhpbmcgcGFzc2VkIGFzIHRoZSBpbml0aWFsIHNlc3Npb24gY29uZmlnXG4gICAgICAgIC8vICh0aGUgY2FsbCBhYm92ZSBhbHJlYWR5IHNldCBpdCB2aWEgI2dldFNlc3Npb25Db25maWcgYnV0IGluIGNhc2UgYWRkaXRpb25hbCBvdmVycmlkZXMgd2VyZVxuICAgICAgICAvLyBwYXNzZWQgZGlyZWN0bHkgaGVyZSBpbiB0aGUgZnV0dXJlIHdlIGNvdWxkIG1lcmdlIHRoZW0pLiBGb3Igbm93IGl0J3MgYSBuby1vcC5cbiAgICAgICAgdGhpcy4jaGlzdG9yeSA9IFtdO1xuICAgICAgICB0aGlzLmVtaXQoJ2hpc3RvcnlfdXBkYXRlZCcsIHRoaXMuI2hpc3RvcnkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIGhpc3Rvcnkgb2YgdGhlIHNlc3Npb24uXG4gICAgICogQHBhcmFtIG5ld0hpc3RvcnkgLSBUaGUgbmV3IGhpc3RvcnkgdG8gc2V0LlxuICAgICAqL1xuICAgIHVwZGF0ZUhpc3RvcnkobmV3SGlzdG9yeSkge1xuICAgICAgICBsZXQgdXBkYXRlZEhpc3Rvcnk7XG4gICAgICAgIGlmICh0eXBlb2YgbmV3SGlzdG9yeSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdXBkYXRlZEhpc3RvcnkgPSBuZXdIaXN0b3J5KHRoaXMuI2hpc3RvcnkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdXBkYXRlZEhpc3RvcnkgPSBuZXdIaXN0b3J5O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5yZXNldEhpc3RvcnkodGhpcy4jaGlzdG9yeSwgdXBkYXRlZEhpc3RvcnkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGEgbWVzc2FnZSB0byB0aGUgc2Vzc2lvbi5cbiAgICAgKiBAcGFyYW0gbWVzc2FnZSAtIFRoZSBtZXNzYWdlIHRvIHNlbmQuXG4gICAgICogQHBhcmFtIG90aGVyRXZlbnREYXRhIC0gQWRkaXRpb25hbCBldmVudCBkYXRhIHRvIHNlbmQuXG4gICAgICovXG4gICAgc2VuZE1lc3NhZ2UobWVzc2FnZSwgb3RoZXJFdmVudERhdGEgPSB7fSkge1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQuc2VuZE1lc3NhZ2UobWVzc2FnZSwgb3RoZXJFdmVudERhdGEpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGQgaW1hZ2UgdG8gdGhlIHNlc3Npb25cbiAgICAgKiBAcGFyYW0gaW1hZ2UgLSBUaGUgaW1hZ2UgdG8gYWRkLlxuICAgICAqL1xuICAgIGFkZEltYWdlKGltYWdlLCB7IHRyaWdnZXJSZXNwb25zZSA9IHRydWUgfSA9IHt9KSB7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5hZGRJbWFnZShpbWFnZSwgeyB0cmlnZ2VyUmVzcG9uc2UgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE11dGUgdGhlIHNlc3Npb24uXG4gICAgICogQHBhcmFtIG11dGVkIC0gV2hldGhlciB0byBtdXRlIHRoZSBzZXNzaW9uLlxuICAgICAqL1xuICAgIG11dGUobXV0ZWQpIHtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm11dGUobXV0ZWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEaXNjb25uZWN0IGZyb20gdGhlIHNlc3Npb24uXG4gICAgICovXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuI2ludGVycnVwdGVkQnlHdWFyZHJhaWwgPSB7fTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0LmNsb3NlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmQgYXVkaW8gdG8gdGhlIHNlc3Npb24uXG4gICAgICogQHBhcmFtIGF1ZGlvIC0gVGhlIGF1ZGlvIHRvIHNlbmQuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBBZGRpdGlvbmFsIG9wdGlvbnMuXG4gICAgICogQHBhcmFtIG9wdGlvbnMuY29tbWl0IC0gV2hldGhlciB0byBmaW5pc2ggdGhlIHR1cm4gd2l0aCB0aGlzIGF1ZGlvLlxuICAgICAqL1xuICAgIHNlbmRBdWRpbyhhdWRpbywgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5zZW5kQXVkaW8oYXVkaW8sIG9wdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbnRlcnJ1cHQgdGhlIHNlc3Npb24gYXJ0aWZpY2lhbGx5IGZvciBleGFtcGxlIGlmIHlvdSB3YW50IHRvIGJ1aWxkIGEgXCJzdG9wIHRhbGtpbmdcIlxuICAgICAqIGJ1dHRvbi5cbiAgICAgKi9cbiAgICBpbnRlcnJ1cHQoKSB7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5pbnRlcnJ1cHQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwcm92ZSBhIHRvb2wgY2FsbC4gVGhpcyB3aWxsIGFsc28gdHJpZ2dlciB0aGUgdG9vbCBjYWxsIHRvIHRoZSBhZ2VudC5cbiAgICAgKiBAcGFyYW0gYXBwcm92YWxJdGVtIC0gVGhlIGFwcHJvdmFsIGl0ZW0gdG8gYXBwcm92ZS5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIEFkZGl0aW9uYWwgb3B0aW9ucy5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucy5hbHdheXNBcHByb3ZlIC0gV2hldGhlciB0byBhbHdheXMgYXBwcm92ZSB0aGUgdG9vbCBjYWxsLlxuICAgICAqL1xuICAgIGFzeW5jIGFwcHJvdmUoYXBwcm92YWxJdGVtLCBvcHRpb25zID0geyBhbHdheXNBcHByb3ZlOiBmYWxzZSB9KSB7XG4gICAgICAgIHRoaXMuI2NvbnRleHQuYXBwcm92ZVRvb2woYXBwcm92YWxJdGVtLCBvcHRpb25zKTtcbiAgICAgICAgY29uc3QgdG9vbE5hbWUgPSBhcHByb3ZhbEl0ZW0udG9vbE5hbWUgPz8gYXBwcm92YWxJdGVtLnJhd0l0ZW0ubmFtZTtcbiAgICAgICAgY29uc3QgdG9vbCA9IHRoaXMuI2N1cnJlbnRBZ2VudC50b29scy5maW5kKCh0b29sKSA9PiB0b29sLm5hbWUgPT09IHRvb2xOYW1lKTtcbiAgICAgICAgaWYgKHRvb2wgJiZcbiAgICAgICAgICAgIHRvb2wudHlwZSA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgICAgICAgICAgYXBwcm92YWxJdGVtLnJhd0l0ZW0udHlwZSA9PT0gJ2Z1bmN0aW9uX2NhbGwnKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLiNoYW5kbGVGdW5jdGlvblRvb2xDYWxsKGFwcHJvdmFsSXRlbS5yYXdJdGVtLCB0b29sKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChhcHByb3ZhbEl0ZW0ucmF3SXRlbS50eXBlID09PSAnaG9zdGVkX3Rvb2xfY2FsbCcpIHtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmFsd2F5c0FwcHJvdmUpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIud2FybignQWx3YXlzIGFwcHJvdmluZyBNQ1AgdG9vbHMgaXMgbm90IHN1cHBvcnRlZC4gVXNlIHRoZSBhbGxvd2VkIHRvb2xzIGNvbmZpZ3VyYXRpb24gaW5zdGVhZC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG1jcEFwcHJvdmFsUmVxdWVzdCA9IGFwcHJvdmFsSXRlbVRvUmVhbHRpbWVBcHByb3ZhbEl0ZW0oYXBwcm92YWxJdGVtKTtcbiAgICAgICAgICAgIHRoaXMuI3RyYW5zcG9ydC5zZW5kTWNwUmVzcG9uc2UobWNwQXBwcm92YWxSZXF1ZXN0LCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNb2RlbEJlaGF2aW9yRXJyb3IoYFRvb2wgJHt0b29sTmFtZSA/PyAndW5rbm93bid9IG5vdCBmb3VuZGApO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlamVjdCBhIHRvb2wgY2FsbC4gVGhpcyB3aWxsIGFsc28gdHJpZ2dlciB0aGUgdG9vbCBjYWxsIHRvIHRoZSBhZ2VudC5cbiAgICAgKiBAcGFyYW0gYXBwcm92YWxJdGVtIC0gVGhlIGFwcHJvdmFsIGl0ZW0gdG8gcmVqZWN0LlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gQWRkaXRpb25hbCBvcHRpb25zLlxuICAgICAqIEBwYXJhbSBvcHRpb25zLmFsd2F5c1JlamVjdCAtIFdoZXRoZXIgdG8gYWx3YXlzIHJlamVjdCB0aGUgdG9vbCBjYWxsLlxuICAgICAqL1xuICAgIGFzeW5jIHJlamVjdChhcHByb3ZhbEl0ZW0sIG9wdGlvbnMgPSB7IGFsd2F5c1JlamVjdDogZmFsc2UgfSkge1xuICAgICAgICB0aGlzLiNjb250ZXh0LnJlamVjdFRvb2woYXBwcm92YWxJdGVtLCBvcHRpb25zKTtcbiAgICAgICAgLy8gd2Ugc3RpbGwgbmVlZCB0byBzaW11bGF0ZSBhIHRvb2wgY2FsbCB0byB0aGUgYWdlbnQgdG8gbGV0IHRoZSBhZ2VudCBrbm93XG4gICAgICAgIGNvbnN0IHRvb2xOYW1lID0gYXBwcm92YWxJdGVtLnRvb2xOYW1lID8/IGFwcHJvdmFsSXRlbS5yYXdJdGVtLm5hbWU7XG4gICAgICAgIGNvbnN0IHRvb2wgPSB0aGlzLiNjdXJyZW50QWdlbnQudG9vbHMuZmluZCgodG9vbCkgPT4gdG9vbC5uYW1lID09PSB0b29sTmFtZSk7XG4gICAgICAgIGlmICh0b29sICYmXG4gICAgICAgICAgICB0b29sLnR5cGUgPT09ICdmdW5jdGlvbicgJiZcbiAgICAgICAgICAgIGFwcHJvdmFsSXRlbS5yYXdJdGVtLnR5cGUgPT09ICdmdW5jdGlvbl9jYWxsJykge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy4jaGFuZGxlRnVuY3Rpb25Ub29sQ2FsbChhcHByb3ZhbEl0ZW0ucmF3SXRlbSwgdG9vbCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYXBwcm92YWxJdGVtLnJhd0l0ZW0udHlwZSA9PT0gJ2hvc3RlZF90b29sX2NhbGwnKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5hbHdheXNSZWplY3QpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIud2FybignQWx3YXlzIHJlamVjdGluZyBNQ1AgdG9vbHMgaXMgbm90IHN1cHBvcnRlZC4gVXNlIHRoZSBhbGxvd2VkIHRvb2xzIGNvbmZpZ3VyYXRpb24gaW5zdGVhZC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG1jcEFwcHJvdmFsUmVxdWVzdCA9IGFwcHJvdmFsSXRlbVRvUmVhbHRpbWVBcHByb3ZhbEl0ZW0oYXBwcm92YWxJdGVtKTtcbiAgICAgICAgICAgIHRoaXMuI3RyYW5zcG9ydC5zZW5kTWNwUmVzcG9uc2UobWNwQXBwcm92YWxSZXF1ZXN0LCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKGBUb29sICR7dG9vbE5hbWUgPz8gJ3Vua25vd24nfSBub3QgZm91bmRgKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlYWx0aW1lU2Vzc2lvbi5tanMubWFwIiwiaW1wb3J0IHsgVXNlckVycm9yIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZSc7XG5pbXBvcnQgeyBPcGVuQUlSZWFsdGltZVdlYlNvY2tldCwgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZVdlYnNvY2tldC5tanNcIjtcbmltcG9ydCB7IFJlYWx0aW1lU2Vzc2lvbiwgfSBmcm9tIFwiLi9yZWFsdGltZVNlc3Npb24ubWpzXCI7XG4vKipcbiAqIFRyYW5zcG9ydCBsYXllciB0aGF0IGNvbm5lY3RzIHRvIGFuIGV4aXN0aW5nIFNJUC1pbml0aWF0ZWQgUmVhbHRpbWUgY2FsbCB2aWEgY2FsbCBJRC5cbiAqL1xuZXhwb3J0IGNsYXNzIE9wZW5BSVJlYWx0aW1lU0lQIGV4dGVuZHMgT3BlbkFJUmVhbHRpbWVXZWJTb2NrZXQge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBzdXBlcihvcHRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQnVpbGQgdGhlIGluaXRpYWwgc2Vzc2lvbiBwYXlsb2FkIGZvciBhIFNJUC1hdHRhY2hlZCBzZXNzaW9uLCBtYXRjaGluZyB0aGUgY29uZmlnIHRoYXQgYSBSZWFsdGltZVNlc3Npb24gd291bGQgc2VuZCBvbiBjb25uZWN0LlxuICAgICAqXG4gICAgICogVGhpcyBlbmFibGVzIFNJUCBkZXBsb3ltZW50cyB0byBhY2NlcHQgYW4gaW5jb21pbmcgY2FsbCB3aXRoIGEgcGF5bG9hZCB0aGF0IGFscmVhZHkgcmVmbGVjdHNcbiAgICAgKiB0aGUgYWN0aXZlIGFnZW50J3MgaW5zdHJ1Y3Rpb25zLCB0b29scywgcHJvbXB0LCBhbmQgdHJhY2luZyBtZXRhZGF0YSB3aXRob3V0IGR1cGxpY2F0aW5nIHRoZVxuICAgICAqIHNlc3Npb24gbG9naWMgb3V0c2lkZSBvZiB0aGUgU0RLLiBUaGUgcmV0dXJuZWQgb2JqZWN0IHN0cnVjdHVyYWxseSBtYXRjaGVzIHRoZSBSRVNUXG4gICAgICogYENhbGxBY2NlcHRQYXJhbXNgIGludGVyZmFjZSwgc28gaXQgY2FuIGJlIGZvcndhcmRlZCBkaXJlY3RseSB0b1xuICAgICAqIGBvcGVuYWkucmVhbHRpbWUuY2FsbHMuYWNjZXB0KC4uLilgLlxuICAgICAqXG4gICAgICogQHBhcmFtIGFnZW50IC0gVGhlIHN0YXJ0aW5nIGFnZW50IHVzZWQgdG8gc2VlZCB0aGUgc2Vzc2lvbiBpbnN0cnVjdGlvbnMsIHRvb2xzLCBhbmQgcHJvbXB0LlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc2Vzc2lvbiBvcHRpb25zIHRoYXQgbWlycm9yIHRoZSBvbmVzIHBhc3NlZCB0byB0aGUgUmVhbHRpbWVTZXNzaW9uIGNvbnN0cnVjdG9yLlxuICAgICAqIEBwYXJhbSBvdmVycmlkZXMgLSBBZGRpdGlvbmFsIGNvbmZpZyBvdmVycmlkZXMgYXBwbGllZCBvbiB0b3Agb2YgdGhlIHNlc3Npb24gb3B0aW9ucy5cbiAgICAgKi9cbiAgICBzdGF0aWMgYXN5bmMgYnVpbGRJbml0aWFsQ29uZmlnKGFnZW50LCBvcHRpb25zID0ge30sIG92ZXJyaWRlcyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IHNlc3Npb25Db25maWcgPSBhd2FpdCBSZWFsdGltZVNlc3Npb24uY29tcHV0ZUluaXRpYWxTZXNzaW9uQ29uZmlnKGFnZW50LCBvcHRpb25zLCBvdmVycmlkZXMpO1xuICAgICAgICBjb25zdCB0cmFuc3BvcnQgPSBuZXcgT3BlbkFJUmVhbHRpbWVTSVAoKTtcbiAgICAgICAgcmV0dXJuIHRyYW5zcG9ydC5idWlsZFNlc3Npb25QYXlsb2FkKHNlc3Npb25Db25maWcpO1xuICAgIH1cbiAgICBzZW5kQXVkaW8oX2F1ZGlvLCBfb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIC8vIFNJUCBpbnRlZ3JhdGlvbnMgc3RyZWFtIGF1ZGlvIHRvIE9wZW5BSSBkaXJlY3RseSB0aHJvdWdoIHRoZSB0ZWxlcGhvbnkgcHJvdmlkZXIsIHNvIHRoZVxuICAgICAgICAvLyB0cmFuc3BvcnQgZGVsaWJlcmF0ZWx5IHByZXZlbnRzIHVzZXJsYW5kIGNvZGUgZnJvbSBzZW5kaW5nIGR1cGxpY2F0ZSBidWZmZXJzLlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ09wZW5BSVJlYWx0aW1lU0lQIGRvZXMgbm90IHN1cHBvcnQgc2VuZGluZyBhdWRpbyBidWZmZXJzOyBhdWRpbyBpcyBoYW5kbGVkIGJ5IHRoZSBTSVAgY2FsbC4nKTtcbiAgICB9XG4gICAgYXN5bmMgY29ubmVjdChvcHRpb25zKSB7XG4gICAgICAgIGlmICghb3B0aW9ucy5jYWxsSWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ09wZW5BSVJlYWx0aW1lU0lQIHJlcXVpcmVzIGBjYWxsSWRgIGluIHRoZSBjb25uZWN0IG9wdGlvbnMuJyk7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgc3VwZXIuY29ubmVjdChvcHRpb25zKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vcGVuYWlSZWFsdGltZVNpcC5tanMubWFwIiwiaW1wb3J0ICogYXMgdXRpbEltcG9ydCBmcm9tIFwiLi91dGlscy5tanNcIjtcbmV4cG9ydCB7IFJlYWx0aW1lQWdlbnQgfSBmcm9tIFwiLi9yZWFsdGltZUFnZW50Lm1qc1wiO1xuZXhwb3J0IHsgUmVhbHRpbWVTZXNzaW9uLCB9IGZyb20gXCIuL3JlYWx0aW1lU2Vzc2lvbi5tanNcIjtcbmV4cG9ydCB7IE9wZW5BSVJlYWx0aW1lV2ViUlRDLCB9IGZyb20gXCIuL29wZW5haVJlYWx0aW1lV2ViUnRjLm1qc1wiO1xuZXhwb3J0IHsgT3BlbkFJUmVhbHRpbWVXZWJTb2NrZXQsIH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVXZWJzb2NrZXQubWpzXCI7XG5leHBvcnQgeyBPcGVuQUlSZWFsdGltZVNJUCB9IGZyb20gXCIuL29wZW5haVJlYWx0aW1lU2lwLm1qc1wiO1xuZXhwb3J0IHsgT3BlbkFJUmVhbHRpbWVCYXNlLCBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9NT0RFTCwgREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUcsIH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVCYXNlLm1qc1wiO1xuZXhwb3J0IGNvbnN0IHV0aWxzID0ge1xuICAgIGJhc2U2NFRvQXJyYXlCdWZmZXI6IHV0aWxJbXBvcnQuYmFzZTY0VG9BcnJheUJ1ZmZlcixcbiAgICBhcnJheUJ1ZmZlclRvQmFzZTY0OiB1dGlsSW1wb3J0LmFycmF5QnVmZmVyVG9CYXNlNjQsXG4gICAgZ2V0TGFzdFRleHRGcm9tQXVkaW9PdXRwdXRNZXNzYWdlOiB1dGlsSW1wb3J0LmdldExhc3RUZXh0RnJvbUF1ZGlvT3V0cHV0TWVzc2FnZSxcbn07XG5leHBvcnQgeyBNb2RlbEJlaGF2aW9yRXJyb3IsIE91dHB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkLCB0b29sLCBVc2VyRXJyb3IsIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZSc7XG5leHBvcnQgeyBiYWNrZ3JvdW5kUmVzdWx0LCBpc0JhY2tncm91bmRSZXN1bHQgfSBmcm9tIFwiLi90b29sLm1qc1wiO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCJdLCJuYW1lcyI6WyJNRVRBREFUQSIsInNhZmVFeGVjdXRlIiwiZm4iLCJlcnJvciIsImdldEVudW1WYWx1ZXMiLCJlbnRyaWVzIiwibnVtZXJpY1ZhbHVlcyIsInYiLCJrIiwiXyIsIl9hIiwiJFpvZFJlZ2lzdHJ5Iiwic2NoZW1hIiwiX21ldGEiLCJtZXRhIiwicCIsInBtIiwiZiIsInJlZ2lzdHJ5IiwiZ2xvYmFsUmVnaXN0cnkiLCJpbml0aWFsaXplQ29udGV4dCIsInBhcmFtcyIsInRhcmdldCIsInByb2Nlc3MiLCJjdHgiLCJfcGFyYW1zIiwiZGVmIiwic2VlbiIsInJlc3VsdCIsIm92ZXJyaWRlU2NoZW1hIiwiX2IiLCJfanNvbiIsInByb2Nlc3NvciIsInBhcmVudCIsImlzVHJhbnNmb3JtaW5nIiwiZXh0cmFjdERlZnMiLCJyb290IiwiaWRUb1NjaGVtYSIsImVudHJ5IiwiaWQiLCJleGlzdGluZyIsIm1ha2VVUkkiLCJkZWZzU2VnbWVudCIsImV4dGVybmFsSWQiLCJ1cmlHZW5lcmF0b3IiLCJkZWZVcmlQcmVmaXgiLCJkZWZJZCIsImV4dHJhY3RUb0RlZiIsInJlZiIsImtleSIsImV4dCIsIl9jIiwiX2QiLCJmaW5hbGl6ZSIsImZsYXR0ZW5SZWYiLCJ6b2RTY2hlbWEiLCJfY2FjaGVkIiwicmVmU2VlbiIsInJlZlNjaGVtYSIsInBhcmVudFNlZW4iLCJkZWZzIiwiZmluYWxpemVkIiwiY3JlYXRlU3RhbmRhcmRKU09OU2NoZW1hTWV0aG9kIiwiX3NjaGVtYSIsIl9jdHgiLCJvcHRpb24iLCJpdGVtIiwiaW8iLCJwcm9jZXNzb3JzIiwibGlicmFyeU9wdGlvbnMiLCJmb3JtYXRNYXAiLCJzdHJpbmdQcm9jZXNzb3IiLCJqc29uIiwibWluaW11bSIsIm1heGltdW0iLCJmb3JtYXQiLCJwYXR0ZXJucyIsImNvbnRlbnRFbmNvZGluZyIsInJlZ2V4ZXMiLCJyZWdleCIsIm51bWJlclByb2Nlc3NvciIsIm11bHRpcGxlT2YiLCJleGNsdXNpdmVNYXhpbXVtIiwiZXhjbHVzaXZlTWluaW11bSIsImJvb2xlYW5Qcm9jZXNzb3IiLCJiaWdpbnRQcm9jZXNzb3IiLCJzeW1ib2xQcm9jZXNzb3IiLCJudWxsUHJvY2Vzc29yIiwidW5kZWZpbmVkUHJvY2Vzc29yIiwidm9pZFByb2Nlc3NvciIsIm5ldmVyUHJvY2Vzc29yIiwiYW55UHJvY2Vzc29yIiwidW5rbm93blByb2Nlc3NvciIsImRhdGVQcm9jZXNzb3IiLCJlbnVtUHJvY2Vzc29yIiwidmFsdWVzIiwibGl0ZXJhbFByb2Nlc3NvciIsInZhbHMiLCJ2YWwiLCJuYW5Qcm9jZXNzb3IiLCJ0ZW1wbGF0ZUxpdGVyYWxQcm9jZXNzb3IiLCJwYXR0ZXJuIiwiZmlsZVByb2Nlc3NvciIsImZpbGUiLCJtaW1lIiwibSIsInN1Y2Nlc3NQcm9jZXNzb3IiLCJjdXN0b21Qcm9jZXNzb3IiLCJmdW5jdGlvblByb2Nlc3NvciIsInRyYW5zZm9ybVByb2Nlc3NvciIsIm1hcFByb2Nlc3NvciIsInNldFByb2Nlc3NvciIsImFycmF5UHJvY2Vzc29yIiwib2JqZWN0UHJvY2Vzc29yIiwic2hhcGUiLCJhbGxLZXlzIiwicmVxdWlyZWRLZXlzIiwidW5pb25Qcm9jZXNzb3IiLCJpc0V4Y2x1c2l2ZSIsIm9wdGlvbnMiLCJ4IiwiaSIsImludGVyc2VjdGlvblByb2Nlc3NvciIsImEiLCJiIiwiaXNTaW1wbGVJbnRlcnNlY3Rpb24iLCJhbGxPZiIsInR1cGxlUHJvY2Vzc29yIiwicHJlZml4UGF0aCIsInJlc3RQYXRoIiwicHJlZml4SXRlbXMiLCJyZXN0IiwicmVjb3JkUHJvY2Vzc29yIiwia2V5VHlwZSIsImtleUJhZyIsInZhbHVlU2NoZW1hIiwia2V5VmFsdWVzIiwidmFsaWRLZXlWYWx1ZXMiLCJudWxsYWJsZVByb2Nlc3NvciIsImlubmVyIiwibm9ub3B0aW9uYWxQcm9jZXNzb3IiLCJkZWZhdWx0UHJvY2Vzc29yIiwicHJlZmF1bHRQcm9jZXNzb3IiLCJjYXRjaFByb2Nlc3NvciIsImNhdGNoVmFsdWUiLCJwaXBlUHJvY2Vzc29yIiwiaW5uZXJUeXBlIiwicmVhZG9ubHlQcm9jZXNzb3IiLCJwcm9taXNlUHJvY2Vzc29yIiwib3B0aW9uYWxQcm9jZXNzb3IiLCJsYXp5UHJvY2Vzc29yIiwiYWxsUHJvY2Vzc29ycyIsInRvSlNPTlNjaGVtYSIsImlucHV0Iiwic2NoZW1hcyIsImV4dGVybmFsIiwibWFrZVBhcnNlYWJsZVRleHRGb3JtYXQiLCJyZXNwb25zZV9mb3JtYXQiLCJwYXJzZXIiLCJvYmoiLCJpZ25vcmVPdmVycmlkZSIsImRlZmF1bHRPcHRpb25zIiwiZ2V0RGVmYXVsdE9wdGlvbnMiLCJ6b2REZWYiLCJpc0VtcHR5T2JqIiwiX2siLCJnZXRSZWZzIiwiX29wdGlvbnMiLCJjdXJyZW50UGF0aCIsIm5hbWUiLCJhZGRFcnJvck1lc3NhZ2UiLCJyZXMiLCJlcnJvck1lc3NhZ2UiLCJyZWZzIiwic2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyIsInZhbHVlIiwidXRpbCIsImFzc2VydElzIiwiX2FyZyIsImFzc2VydE5ldmVyIiwiX3giLCJpdGVtcyIsInZhbGlkS2V5cyIsImZpbHRlcmVkIiwiZSIsIm9iamVjdCIsImtleXMiLCJhcnIiLCJjaGVja2VyIiwiam9pblZhbHVlcyIsImFycmF5Iiwic2VwYXJhdG9yIiwib2JqZWN0VXRpbCIsImZpcnN0Iiwic2Vjb25kIiwiWm9kRXJyb3IiLCJpc3N1ZXMiLCJzdWIiLCJzdWJzIiwiYWN0dWFsUHJvdG8iLCJfbWFwcGVyIiwibWFwcGVyIiwiaXNzdWUiLCJmaWVsZEVycm9ycyIsInByb2Nlc3NFcnJvciIsImN1cnIiLCJlbCIsImZvcm1FcnJvcnMiLCJmaXJzdEVsIiwiZXJyb3JVdGlsIiwibWVzc2FnZSIsIlpvZEZpcnN0UGFydHlUeXBlS2luZCIsInBhcnNlQW55RGVmIiwicGFyc2VBcnJheURlZiIsInBhcnNlRGVmIiwicGFyc2VCaWdpbnREZWYiLCJjaGVjayIsInBhcnNlQm9vbGVhbkRlZiIsInBhcnNlQnJhbmRlZERlZiIsIl9kZWYiLCJwYXJzZUNhdGNoRGVmIiwicGFyc2VEYXRlRGVmIiwib3ZlcnJpZGVEYXRlU3RyYXRlZ3kiLCJzdHJhdGVneSIsImludGVnZXJEYXRlUGFyc2VyIiwicGFyc2VEZWZhdWx0RGVmIiwicGFyc2VFZmZlY3RzRGVmIiwiZm9yY2VSZXNvbHV0aW9uIiwicGFyc2VFbnVtRGVmIiwiaXNKc29uU2NoZW1hN0FsbE9mVHlwZSIsInR5cGUiLCJwYXJzZUludGVyc2VjdGlvbkRlZiIsInVuZXZhbHVhdGVkUHJvcGVydGllcyIsIm1lcmdlZEFsbE9mIiwibmVzdGVkU2NoZW1hIiwiYWRkaXRpb25hbFByb3BlcnRpZXMiLCJwYXJzZUxpdGVyYWxEZWYiLCJwYXJzZWRUeXBlIiwiZW1vamlSZWdleCIsInpvZFBhdHRlcm5zIiwicGFyc2VTdHJpbmdEZWYiLCJwcm9jZXNzUGF0dGVybiIsImVzY2FwZU5vbkFscGhhTnVtZXJpYyIsImFkZEZvcm1hdCIsImFkZFBhdHRlcm4iLCJjIiwicHJvY2Vzc1JlZ0V4cCIsInJlZ2V4T3JGdW5jdGlvbiIsImZsYWdzIiwic291cmNlIiwiaXNFc2NhcGVkIiwiaW5DaGFyR3JvdXAiLCJpbkNoYXJSYW5nZSIsInJlZ2V4VGVzdCIsInBhcnNlUmVjb3JkRGVmIiwiYWNjIiwicGFyc2VNYXBEZWYiLCJwYXJzZU5hdGl2ZUVudW1EZWYiLCJhY3R1YWxWYWx1ZXMiLCJwYXJzZWRUeXBlcyIsInBhcnNlTmV2ZXJEZWYiLCJwYXJzZU51bGxEZWYiLCJwcmltaXRpdmVNYXBwaW5ncyIsInBhcnNlVW5pb25EZWYiLCJhc0FueU9mIiwidHlwZXMiLCJ1bmlxdWVUeXBlcyIsImFueU9mIiwicGFyc2VOdWxsYWJsZURlZiIsImJhc2UiLCJwYXJzZU51bWJlckRlZiIsImRlY2lkZUFkZGl0aW9uYWxQcm9wZXJ0aWVzIiwicGFyc2VPYmplY3REZWYiLCJwcm9wTmFtZSIsInByb3BEZWYiLCJwcm9wZXJ0eVBhdGgiLCJwYXJzZWREZWYiLCJwYXJzZU9wdGlvbmFsRGVmIiwiaW5uZXJTY2hlbWEiLCJwYXJzZVBpcGVsaW5lRGVmIiwicGFyc2VQcm9taXNlRGVmIiwicGFyc2VTZXREZWYiLCJwYXJzZVR1cGxlRGVmIiwicGFyc2VVbmRlZmluZWREZWYiLCJwYXJzZVVua25vd25EZWYiLCJwYXJzZVJlYWRvbmx5RGVmIiwic2Vlbkl0ZW0iLCJvdmVycmlkZVJlc3VsdCIsInNlZW5TY2hlbWEiLCJnZXQkcmVmIiwibmV3SXRlbSIsImpzb25TY2hlbWEiLCJzZWxlY3RQYXJzZXIiLCJhZGRNZXRhIiwiZ2V0UmVsYXRpdmVQYXRoIiwiaW5kZXgiLCJwYXRoQSIsInBhdGhCIiwidHlwZU5hbWUiLCJ6b2RUb0pzb25TY2hlbWEiLCJtYWluIiwidGl0bGUiLCJkZWZpbml0aW9ucyIsInByb2Nlc3NlZERlZmluaXRpb25zIiwibmV3RGVmaW5pdGlvbnMiLCJjb21iaW5lZCIsIm1ha2VQYXJzZWFibGVSZXNwb25zZVRvb2wiLCJ0b29sIiwiY2FsbGJhY2siLCJ0b1N0cmljdEpzb25TY2hlbWEiLCJzY2hlbWFDb3B5IiwiZW5zdXJlU3RyaWN0SnNvblNjaGVtYSIsImlzTnVsbGFibGUiLCJvbmVPZlZhcmlhbnQiLCJhbGxPZlZhcmlhbnQiLCJwYXRoIiwiaXNPYmplY3QiLCJkZWZOYW1lIiwiZGVmU2NoZW1hIiwiZGVmaW5pdGlvbk5hbWUiLCJkZWZpbml0aW9uU2NoZW1hIiwicmVxdWlyZWQiLCJwcm9wZXJ0aWVzIiwicHJvcFNjaGVtYSIsInZhcmlhbnQiLCJyZXNvbHZlZCIsImhhc01vcmVUaGFuTktleXMiLCJyZXNvbHZlUmVmIiwicGF0aFBhcnRzIiwibiIsInpvZFYzVG9Kc29uU2NoZW1hIiwiX3pvZFRvSnNvblNjaGVtYSIsInpvZFY0VG9Kc29uU2NoZW1hIiwiejQudG9KU09OU2NoZW1hIiwiaXNab2RWNCIsInpvZE9iamVjdCIsInpvZFRleHRGb3JtYXQiLCJwcm9wcyIsImNvbnRlbnQiLCJ6b2RSZXNwb25zZXNGdW5jdGlvbiIsImFyZ3MiLCJBZ2VudHNFcnJvciIsInN0YXRlIiwiX19wdWJsaWNGaWVsZCIsIlN5c3RlbUVycm9yIiwiTWF4VHVybnNFeGNlZWRlZEVycm9yIiwiTW9kZWxCZWhhdmlvckVycm9yIiwiSW52YWxpZFRvb2xJbnB1dEVycm9yIiwib3JpZ2luYWxFcnJvciIsInRvb2xJbnZvY2F0aW9uIiwiVXNlckVycm9yIiwiR3VhcmRyYWlsRXhlY3V0aW9uRXJyb3IiLCJUb29sQ2FsbEVycm9yIiwiSW5wdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCIsIk91dHB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkIiwiVG9vbElucHV0R3VhcmRyYWlsVHJpcHdpcmVUcmlnZ2VyZWQiLCJUb29sT3V0cHV0R3VhcmRyYWlsVHJpcHdpcmVUcmlnZ2VyZWQiLCJyZWFkWm9kRGVmaW5pdGlvbiIsImNhbmRpZGF0ZSIsInJlYWRab2RUeXBlIiwicmF3VHlwZSIsImxvd2VyIiwiaXNab2RPYmplY3QiLCJpc0FnZW50VG9vbElucHV0IiwiSlNPTl9TQ0hFTUFfRFJBRlRfMDciLCJPUFRJT05BTF9XUkFQUEVSUyIsIkRFQ09SQVRPUl9XUkFQUEVSUyIsIlNJTVBMRV9UWVBFX01BUFBJTkciLCJoYXNKc29uU2NoZW1hT2JqZWN0U2hhcGUiLCJ6b2RKc29uU2NoZW1hQ29tcGF0IiwiYnVpbGRPYmplY3RTY2hlbWEiLCJyZWFkU2hhcGUiLCJmaWVsZCIsIm9wdGlvbmFsIiwiY29udmVydFByb3BlcnR5IiwiY3VycmVudCIsInVud3JhcERlY29yYXRvcnMiLCJuZXh0IiwiY29udmVydFNjaGVtYSIsInVud3JhcHBlZCIsImJ1aWxkQXJyYXlTY2hlbWEiLCJidWlsZFR1cGxlU2NoZW1hIiwiYnVpbGRVbmlvblNjaGVtYSIsImJ1aWxkSW50ZXJzZWN0aW9uU2NoZW1hIiwiYnVpbGRMaXRlcmFsIiwiYnVpbGRFbnVtIiwiYnVpbGRSZWNvcmRTY2hlbWEiLCJidWlsZE1hcFNjaGVtYSIsImJ1aWxkU2V0U2NoZW1hIiwiYnVpbGROdWxsYWJsZVNjaGVtYSIsImV4dHJhY3RGaXJzdCIsImNvZXJjZUFycmF5IiwibGVmdCIsInJpZ2h0IiwibGl0ZXJhbCIsInpvZFJlc3BvbnNlc0Z1bmN0aW9uQ29tcGF0Iiwiem9kVGV4dEZvcm1hdENvbXBhdCIsImJ1aWxkSnNvblNjaGVtYUZyb21ab2QiLCJpbnB1dFR5cGUiLCJ0b0Z1bmN0aW9uVG9vbE5hbWUiLCJnZXRTY2hlbWFBbmRQYXJzZXJGcm9tSW5wdXRUeXBlIiwidXNlRmFsbGJhY2siLCJmYWxsYmFja1NjaGVtYSIsInJhd0lucHV0IiwiZm9ybWF0dGVkRnVuY3Rpb24iLCJjb252ZXJ0QWdlbnRPdXRwdXRUeXBlVG9TZXJpYWxpemFibGUiLCJvdXRwdXRUeXBlIiwib3V0cHV0IiwicyIsImgiLCJkIiwidyIsInkiLCJtcyIsInBhcnNlIiwiZm10TG9uZyIsImZtdFNob3J0Iiwic3RyIiwibWF0Y2giLCJtc0FicyIsInBsdXJhbCIsImlzUGx1cmFsIiwic2V0dXAiLCJlbnYiLCJjcmVhdGVEZWJ1ZyIsImNvZXJjZSIsImRpc2FibGUiLCJlbmFibGUiLCJlbmFibGVkIiwicmVxdWlyZSQkMCIsImRlc3Ryb3kiLCJzZWxlY3RDb2xvciIsIm5hbWVzcGFjZSIsImhhc2giLCJwcmV2VGltZSIsImVuYWJsZU92ZXJyaWRlIiwibmFtZXNwYWNlc0NhY2hlIiwiZW5hYmxlZENhY2hlIiwiZGVidWciLCJzZWxmIiwiZm9ybWF0dGVyIiwiZXh0ZW5kIiwiZGVsaW1pdGVyIiwibmV3RGVidWciLCJuYW1lc3BhY2VzIiwic3BsaXQiLCJucyIsIm1hdGNoZXNUZW1wbGF0ZSIsInNlYXJjaCIsInRlbXBsYXRlIiwic2VhcmNoSW5kZXgiLCJ0ZW1wbGF0ZUluZGV4Iiwic3RhckluZGV4IiwibWF0Y2hJbmRleCIsInNraXAiLCJjb21tb24iLCJleHBvcnRzIiwiZm9ybWF0QXJncyIsInNhdmUiLCJsb2FkIiwidXNlQ29sb3JzIiwibG9jYWxzdG9yYWdlIiwid2FybmVkIiwibW9kdWxlIiwibGFzdEMiLCJyIiwiZm9ybWF0dGVycyIsImxvYWRFbnYiLCJfbG9hZEVudiIsImlzRW5hYmxlZCIsImZsYWdOYW1lIiwidHJhY2luZyIsImxvZ2dpbmciLCJkb250TG9nTW9kZWxEYXRhIiwiZG9udExvZ1Rvb2xEYXRhIiwiZ2V0TG9nZ2VyIiwibG9nZ2VyIiwiQllURV9QUkVWSUVXX0xJTUlUIiwidG9TbWFydFN0cmluZyIsImlzQXJyYXlCdWZmZXJMaWtlIiwiZm9ybWF0Qnl0ZUFycmF5IiwiaXNBcnJheUJ1ZmZlclZpZXciLCJ2aWV3Iiwic21hcnRTdHJpbmdSZXBsYWNlciIsInNoYXJlZEFycmF5QnVmZmVyQ3RvciIsImlzU2VyaWFsaXplZEJ1ZmZlclNuYXBzaG90IiwiaXNOb2RlQnVmZmVyIiwiYnVmZmVyQ3RvciIsImJ5dGVzIiwicHJldmlld0xlbmd0aCIsInByZXZpZXdQYXJ0cyIsImZvcm1hdEJ5dGUiLCJlbGxpcHNpcyIsImJ5dGUiLCJfa2V5IiwibmVzdGVkVmFsdWUiLCJkZWZpbmVUb29sSW5wdXRHdWFyZHJhaWwiLCJkZWZpbmVUb29sT3V0cHV0R3VhcmRyYWlsIiwicmVzb2x2ZVRvb2xJbnB1dEd1YXJkcmFpbHMiLCJndWFyZHJhaWxzIiwiZ3IiLCJyZXNvbHZlVG9vbE91dHB1dEd1YXJkcmFpbHMiLCJpc0NvbXB1dGVyUHJvdmlkZXIiLCJjb21wdXRlckNhY2hlIiwiY29tcHV0ZXJJbml0aWFsaXplck1hcCIsImNvbXB1dGVyc0J5UnVuQ29udGV4dCIsImdldENvbXB1dGVySW5pdGlhbGl6ZXIiLCJpbml0aWFsaXplciIsInRyYWNrUmVzb2x2ZWRDb21wdXRlciIsInJ1bkNvbnRleHQiLCJyZXNvbHZlZEJ5UnVuIiwicmVzb2x2ZUNvbXB1dGVyIiwidG9vbEtleSIsInBlckNvbnRleHQiLCJjYWNoZWQiLCJpbml0aWFsaXplckNvbmZpZyIsImxpZmVjeWNsZSIsImRpc3Bvc2VyIiwiY29tcHV0ZXIiLCJkaXNwb3NlUmVzb2x2ZWRDb21wdXRlcnMiLCJkaXNwb3NlcnMiLCJzdG9yZWRJbml0aWFsaXplciIsImRpc3Bvc2UiLCJkZWZhdWx0VG9vbEVycm9yRnVuY3Rpb24iLCJjb250ZXh0IiwidG9vbEVycm9yRnVuY3Rpb24iLCJzdHJpY3RNb2RlIiwicGFyYW1ldGVycyIsIl9pbnZva2UiLCJkZXRhaWxzIiwicGFyc2VkIiwic3RyaW5nUmVzdWx0IiwiaW52b2tlIiwiY3VycmVudFNwYW4iLCJnZXRDdXJyZW50U3BhbiIsIm5lZWRzQXBwcm92YWwiLCJhZ2VudCIsInByZWRpY2F0ZSIsIlpvZFBhcnNlZFR5cGUiLCJnZXRQYXJzZWRUeXBlIiwiZGF0YSIsIlpvZElzc3VlQ29kZSIsImVycm9yTWFwIiwib3ZlcnJpZGVFcnJvck1hcCIsImRlZmF1bHRFcnJvck1hcCIsImdldEVycm9yTWFwIiwibWFrZUlzc3VlIiwiZXJyb3JNYXBzIiwiaXNzdWVEYXRhIiwiZnVsbFBhdGgiLCJmdWxsSXNzdWUiLCJtYXBzIiwibWFwIiwiYWRkSXNzdWVUb0NvbnRleHQiLCJvdmVycmlkZU1hcCIsIlBhcnNlU3RhdHVzIiwic3RhdHVzIiwicmVzdWx0cyIsImFycmF5VmFsdWUiLCJJTlZBTElEIiwicGFpcnMiLCJzeW5jUGFpcnMiLCJwYWlyIiwiZmluYWxPYmplY3QiLCJESVJUWSIsIk9LIiwiaXNBYm9ydGVkIiwiaXNEaXJ0eSIsImlzVmFsaWQiLCJpc0FzeW5jIiwiUGFyc2VJbnB1dExhenlQYXRoIiwiaGFuZGxlUmVzdWx0IiwicHJvY2Vzc0NyZWF0ZVBhcmFtcyIsImludmFsaWRfdHlwZV9lcnJvciIsInJlcXVpcmVkX2Vycm9yIiwiZGVzY3JpcHRpb24iLCJpc3MiLCJab2RUeXBlIiwiZXJyIiwibWF5YmVBc3luY1Jlc3VsdCIsImdldElzc3VlUHJvcGVydGllcyIsInNldEVycm9yIiwicmVmaW5lbWVudERhdGEiLCJyZWZpbmVtZW50IiwiWm9kRWZmZWN0cyIsIlpvZE9wdGlvbmFsIiwiWm9kTnVsbGFibGUiLCJab2RBcnJheSIsIlpvZFByb21pc2UiLCJab2RVbmlvbiIsImluY29taW5nIiwiWm9kSW50ZXJzZWN0aW9uIiwidHJhbnNmb3JtIiwiZGVmYXVsdFZhbHVlRnVuYyIsIlpvZERlZmF1bHQiLCJab2RCcmFuZGVkIiwiY2F0Y2hWYWx1ZUZ1bmMiLCJab2RDYXRjaCIsIlRoaXMiLCJab2RQaXBlbGluZSIsIlpvZFJlYWRvbmx5IiwiY3VpZFJlZ2V4IiwiY3VpZDJSZWdleCIsInVsaWRSZWdleCIsInV1aWRSZWdleCIsIm5hbm9pZFJlZ2V4Iiwiand0UmVnZXgiLCJkdXJhdGlvblJlZ2V4IiwiZW1haWxSZWdleCIsIl9lbW9qaVJlZ2V4IiwiaXB2NFJlZ2V4IiwiaXB2NENpZHJSZWdleCIsImlwdjZSZWdleCIsImlwdjZDaWRyUmVnZXgiLCJiYXNlNjRSZWdleCIsImJhc2U2NHVybFJlZ2V4IiwiZGF0ZVJlZ2V4U291cmNlIiwiZGF0ZVJlZ2V4IiwidGltZVJlZ2V4U291cmNlIiwic2Vjb25kc1JlZ2V4U291cmNlIiwic2Vjb25kc1F1YW50aWZpZXIiLCJ0aW1lUmVnZXgiLCJkYXRldGltZVJlZ2V4Iiwib3B0cyIsImlzVmFsaWRJUCIsImlwIiwidmVyc2lvbiIsImlzVmFsaWRKV1QiLCJqd3QiLCJhbGciLCJoZWFkZXIiLCJiYXNlNjQiLCJkZWNvZGVkIiwiaXNWYWxpZENpZHIiLCJab2RTdHJpbmciLCJ0b29CaWciLCJ0b29TbWFsbCIsInZhbGlkYXRpb24iLCJtaW5MZW5ndGgiLCJtYXhMZW5ndGgiLCJsZW4iLCJjaCIsIm1pbiIsIm1heCIsImZsb2F0U2FmZVJlbWFpbmRlciIsInN0ZXAiLCJ2YWxEZWNDb3VudCIsInN0ZXBEZWNDb3VudCIsImRlY0NvdW50IiwidmFsSW50Iiwic3RlcEludCIsIlpvZE51bWJlciIsImtpbmQiLCJpbmNsdXNpdmUiLCJab2RCaWdJbnQiLCJab2RCb29sZWFuIiwiWm9kRGF0ZSIsIm1pbkRhdGUiLCJtYXhEYXRlIiwiWm9kU3ltYm9sIiwiWm9kVW5kZWZpbmVkIiwiWm9kTnVsbCIsIlpvZEFueSIsIlpvZFVua25vd24iLCJab2ROZXZlciIsIlpvZFZvaWQiLCJkZWVwUGFydGlhbGlmeSIsIlpvZE9iamVjdCIsIm5ld1NoYXBlIiwiZmllbGRTY2hlbWEiLCJab2RUdXBsZSIsInNoYXBlS2V5cyIsImV4dHJhS2V5cyIsImtleVZhbGlkYXRvciIsInVua25vd25LZXlzIiwiY2F0Y2hhbGwiLCJkZWZhdWx0RXJyb3IiLCJhdWdtZW50YXRpb24iLCJtZXJnaW5nIiwibWFzayIsIm5ld0ZpZWxkIiwiY3JlYXRlWm9kRW51bSIsImhhbmRsZVJlc3VsdHMiLCJ1bmlvbkVycm9ycyIsImNoaWxkQ3R4IiwiZGlydHkiLCJnZXREaXNjcmltaW5hdG9yIiwiWm9kTGF6eSIsIlpvZExpdGVyYWwiLCJab2RFbnVtIiwiWm9kTmF0aXZlRW51bSIsIlpvZERpc2NyaW1pbmF0ZWRVbmlvbiIsImRpc2NyaW1pbmF0b3IiLCJkaXNjcmltaW5hdG9yVmFsdWUiLCJvcHRpb25zTWFwIiwiZGlzY3JpbWluYXRvclZhbHVlcyIsIm1lcmdlVmFsdWVzIiwiYVR5cGUiLCJiVHlwZSIsImJLZXlzIiwic2hhcmVkS2V5cyIsIm5ld09iaiIsInNoYXJlZFZhbHVlIiwibmV3QXJyYXkiLCJpdGVtQSIsIml0ZW1CIiwiaGFuZGxlUGFyc2VkIiwicGFyc2VkTGVmdCIsInBhcnNlZFJpZ2h0IiwibWVyZ2VkIiwiaXRlbUluZGV4IiwiWm9kUmVjb3JkIiwidmFsdWVUeXBlIiwidGhpcmQiLCJab2RNYXAiLCJmaW5hbE1hcCIsIlpvZFNldCIsImZpbmFsaXplU2V0IiwiZWxlbWVudHMiLCJwYXJzZWRTZXQiLCJlbGVtZW50IiwibWluU2l6ZSIsIm1heFNpemUiLCJzaXplIiwiZ2V0dGVyIiwiZXhwZWN0ZWRWYWx1ZXMiLCJlbnVtVmFsdWVzIiwibmV3RGVmIiwib3B0IiwibmF0aXZlRW51bVZhbHVlcyIsInByb21pc2lmaWVkIiwiZWZmZWN0IiwiY2hlY2tDdHgiLCJhcmciLCJwcm9jZXNzZWQiLCJleGVjdXRlUmVmaW5lbWVudCIsInByZXByb2Nlc3MiLCJuZXdDdHgiLCJab2ROYU4iLCJpblJlc3VsdCIsImZyZWV6ZSIsImNsZWFuUGFyYW1zIiwiY3VzdG9tIiwiZmF0YWwiLCJfZmF0YWwiLCJpbnN0YW5jZU9mVHlwZSIsImNscyIsInN0cmluZ1R5cGUiLCJudW1iZXJUeXBlIiwiYm9vbGVhblR5cGUiLCJhbnlUeXBlIiwiYXJyYXlUeXBlIiwib2JqZWN0VHlwZSIsInVuaW9uVHlwZSIsImRpc2NyaW1pbmF0ZWRVbmlvblR5cGUiLCJyZWNvcmRUeXBlIiwibGF6eVR5cGUiLCJsaXRlcmFsVHlwZSIsImVudW1UeXBlIiwiei5vYmplY3QiLCJ6LnN0cmluZyIsInoubGl0ZXJhbCIsInoucmVjb3JkIiwiei5hbnkiLCJ6LmFycmF5Iiwiei5ib29sZWFuIiwiX2NhY2hlZFRvb2xzIiwiX2NhY2hlZFRvb2xLZXlzQnlTZXJ2ZXIiLCJkZWZhdWx0TUNQVG9vbENhY2hlS2V5Iiwic2VydmVyIiwiZ2V0RnVuY3Rpb25Ub29sc0Zyb21TZXJ2ZXIiLCJjb252ZXJ0U2NoZW1hc1RvU3RyaWN0IiwiZ2VuZXJhdGVNQ1BUb29sQ2FjaGVLZXkiLCJjYWNoZUtleSIsInQiLCJtY3BUb0Z1bmN0aW9uVG9vbCIsImxpc3RUb29sc0ZvclNlcnZlciIsInNwYW4iLCJmZXRjaGVkTWNwVG9vbHMiLCJtY3BUb29scyIsImZpbHRlcmVkVG9vbHMiLCJmaWx0ZXIiLCJnbG9iYWxMb2dnZXIiLCJhbGxvd2VkVG9vbE5hbWVzIiwiYmxvY2tlZFRvb2xOYW1lcyIsImFsbG93ZWQiLCJibG9ja2VkIiwidG9vbHMiLCJnZXRDdXJyZW50VHJhY2UiLCJ3aXRoTUNQTGlzdFRvb2xzU3BhbiIsImdldEFsbE1jcFRvb2xzIiwibWNwU2VydmVyc09yT3B0cyIsIm1jcFNlcnZlcnMiLCJjb252ZXJ0U2NoZW1hc1RvU3RyaWN0RnJvbU9wdHMiLCJydW5Db250ZXh0RnJvbU9wdHMiLCJhZ2VudEZyb21PcHRzIiwiYWxsVG9vbHMiLCJ0b29sTmFtZXMiLCJzZXJ2ZXJUb29scyIsImludGVyc2VjdGlvbiIsIm1jcFRvb2wiLCJfY29udGV4dCIsInN0cmljdFNjaGVtYSIsIm5vblN0cmljdFNjaGVtYSIsIm91dCIsIkJyb3dzZXJFdmVudEVtaXR0ZXIiLCJfX3ByaXZhdGVBZGQiLCJfdGFyZ2V0IiwiX2xpc3RlbmVyV3JhcHBlcnMiLCJsaXN0ZW5lciIsImV2ZW50VHlwZSIsImxpc3RlbmVyc0ZvclR5cGUiLCJfX3ByaXZhdGVHZXQiLCJ3cmFwcGVycyIsIndyYXBwZXIiLCJldmVudCIsImhhbmRsZXIiLCJyYW5kb21VVUlEIiwiUmVhZGFibGUiLCJfZGVzdGluYXRpb24iLCJfdHJhbnNmb3JtIiwiUmVhZGFibGVTdHJlYW0iLCJUcmFuc2Zvcm1TdHJlYW0iLCJBc3luY0xvY2FsU3RvcmFnZSIsIkJyb3dzZXJUaW1lciIsInRpbWVvdXQiLCJ0aW1lb3V0SWQiLCJ0aW1lciIsImVuY29kZVVpbnQ4QXJyYXlUb0Jhc2U2NCIsImdsb2JhbEJ1ZmZlciIsImJpbmFyeSIsImNoYXJzIiwiYzEiLCJjMiIsImMzIiwiZW5jMSIsImVuYzIiLCJlbmMzIiwiZW5jNCIsInNlcmlhbGl6ZUJpbmFyeSIsInRvVWludDhBcnJheUZyb21CaW5hcnkiLCJ0b0FnZW50SW5wdXRMaXN0Iiwib3JpZ2luYWxJbnB1dCIsImdldEFnZW50SW5wdXRJdGVtS2V5IiwiYWdlbnRJbnB1dFNlcmlhbGl6YXRpb25SZXBsYWNlciIsImJ1aWxkQWdlbnRJbnB1dFBvb2wiLCJwb29sIiwidGFrZUFnZW50SW5wdXRGcm9tUG9vbCIsImNhbmRpZGF0ZXMiLCJyZW1vdmVBZ2VudElucHV0RnJvbVBvb2wiLCJzZXJpYWxpemVkIiwiZXh0cmFjdE91dHB1dEl0ZW1zRnJvbVJ1bkl0ZW1zIiwiZ2V0VHVybklucHV0IiwiZ2VuZXJhdGVkSXRlbXMiLCJvdXRwdXRJdGVtcyIsIlNoYXJlZEJhc2UiLCJJdGVtQmFzZSIsIlJlZnVzYWwiLCJPdXRwdXRUZXh0IiwiSW5wdXRUZXh0IiwiUmVhc29uaW5nVGV4dCIsIklucHV0SW1hZ2UiLCJ6XG4gICAgICAgIC8vIDEuIGltYWdlIGRhdGFcbiAgICAgICAgLnN0cmluZyIsIklucHV0RmlsZSIsInpcbiAgICAgICAgLy8gMS4gZmlsZSBkYXRhXG4gICAgICAgIC5zdHJpbmciLCJBdWRpb0NvbnRlbnQiLCJ6XG4gICAgICAgIC5zdHJpbmciLCJJbWFnZUNvbnRlbnQiLCJUb29sT3V0cHV0VGV4dCIsIkltYWdlRGF0YU9iamVjdFNjaGVtYSIsInpcbiAgICAgICAgLnVuaW9uIiwiei5pbnN0YW5jZW9mIiwiSW1hZ2VVcmxPYmplY3RTY2hlbWEiLCJJbWFnZUZpbGVJZE9iamVjdFNjaGVtYSIsIkltYWdlT2JqZWN0U2NoZW1hIiwielxuICAgIC51bmlvbiIsIkZpbGVEYXRhT2JqZWN0U2NoZW1hIiwiRmlsZVVybE9iamVjdFNjaGVtYSIsIkZpbGVJZE9iamVjdFNjaGVtYSIsIkZpbGVSZWZlcmVuY2VTY2hlbWEiLCJ6U3RyaW5nV2l0aEhpbnRzIiwiX2hpbnRzIiwiVG9vbE91dHB1dEltYWdlIiwiVG9vbE91dHB1dEZpbGVDb250ZW50IiwiQ29tcHV0ZXJUb29sT3V0cHV0IiwiY29tcHV0ZXJBY3Rpb25zIiwiei5kaXNjcmltaW5hdGVkVW5pb24iLCJ6Lm51bWJlciIsInouZW51bSIsIkFzc2lzdGFudENvbnRlbnQiLCJNZXNzYWdlQmFzZSIsIkFzc2lzdGFudE1lc3NhZ2VJdGVtIiwiVXNlckNvbnRlbnQiLCJVc2VyTWVzc2FnZUl0ZW0iLCJTeXN0ZW1NZXNzYWdlSXRlbSIsIkhvc3RlZFRvb2xDYWxsSXRlbSIsIkZ1bmN0aW9uQ2FsbEl0ZW0iLCJUb29sQ2FsbE91dHB1dENvbnRlbnQiLCJUb29sQ2FsbFN0cnVjdHVyZWRPdXRwdXQiLCJGdW5jdGlvbkNhbGxSZXN1bHRJdGVtIiwiQ29tcHV0ZXJVc2VDYWxsSXRlbSIsIkNvbXB1dGVyQ2FsbFJlc3VsdEl0ZW0iLCJTaGVsbEFjdGlvbiIsIlNoZWxsQ2FsbEl0ZW0iLCJTaGVsbENhbGxPdXRjb21lIiwiU2hlbGxDYWxsT3V0cHV0Q29udGVudCIsInpcbiAgICAub2JqZWN0IiwiU2hlbGxDYWxsUmVzdWx0SXRlbSIsIkFwcGx5UGF0Y2hPcGVyYXRpb25DcmVhdGVGaWxlIiwiQXBwbHlQYXRjaE9wZXJhdGlvblVwZGF0ZUZpbGUiLCJBcHBseVBhdGNoT3BlcmF0aW9uRGVsZXRlRmlsZSIsIkFwcGx5UGF0Y2hPcGVyYXRpb24iLCJBcHBseVBhdGNoQ2FsbEl0ZW0iLCJBcHBseVBhdGNoQ2FsbFJlc3VsdEl0ZW0iLCJUb29sQ2FsbEl0ZW0iLCJSZWFzb25pbmdJdGVtIiwiQ29tcGFjdGlvbkl0ZW0iLCJVbmtub3duSXRlbSIsIk91dHB1dE1vZGVsSXRlbSIsIk1vZGVsSXRlbSIsInoudW5pb24iLCJSZXF1ZXN0VXNhZ2VEYXRhIiwiVXNhZ2VEYXRhIiwiU3RyZWFtRXZlbnRUZXh0U3RyZWFtIiwiU3RyZWFtRXZlbnRSZXNwb25zZVN0YXJ0ZWQiLCJTdHJlYW1FdmVudFJlc3BvbnNlQ29tcGxldGVkIiwiU3RyZWFtRXZlbnRHZW5lcmljSXRlbSIsImNvbWJpbmVBYm9ydFNpZ25hbHMiLCJzaWduYWxzIiwiYWN0aXZlIiwiYW55Rm4iLCJjb250cm9sbGVyIiwiYWJvcnRDb21iaW5lZCIsInJlYXNvbiIsInNpZ25hbCIsIlJ1blJlc3VsdEJhc2UiLCJyZXNwb25zZXMiLCJSdW5SZXN1bHQiLCJTdHJlYW1lZFJ1blJlc3VsdCIsIl9lcnJvciIsIl9jb21iaW5lZFNpZ25hbCIsIl9hYm9ydENvbnRyb2xsZXIiLCJfcmVhZGFibGVDb250cm9sbGVyIiwiX3JlYWRhYmxlU3RyZWFtIiwiX2NvbXBsZXRlZFByb21pc2UiLCJfY29tcGxldGVkUHJvbWlzZVJlc29sdmUiLCJfY29tcGxldGVkUHJvbWlzZVJlamVjdCIsIl9jYW5jZWxsZWQiLCJfc3RyZWFtTG9vcFByb21pc2UiLCJfX3ByaXZhdGVTZXQiLCJfUmVhZGFibGVTdHJlYW0iLCJyZXNvbHZlIiwicmVqZWN0IiwiaGFuZGxlQWJvcnQiLCJzdHJlYW0iLCJwcm9taXNlIiwiQUxTX1NZTUJPTCIsImxvY2FsRmFsbGJhY2tBbHMiLCJnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UiLCJnbG9iYWxTY29wZSIsImdsb2JhbEFMUyIsIm5ld0FMUyIsImdldEFjdGl2ZUNvbnRleHQiLCJzdG9yZSIsImN1cnJlbnRUcmFjZSIsIl93cmFwRnVuY3Rpb25XaXRoVHJhY2VMaWZlY3ljbGUiLCJjdXJyZW50Q29udGV4dCIsInByZXZpb3VzQWxzU3RvcmUiLCJ0cmFjZSIsImNsZWFudXBEZWZlcnJlZCIsInN0YXJ0ZWQiLCJjbGVhbnVwQ29udGV4dCIsInN0cmVhbUxvb3BQcm9taXNlIiwid2l0aFRyYWNlIiwiZ2V0R2xvYmFsVHJhY2VQcm92aWRlciIsImdldE9yQ3JlYXRlVHJhY2UiLCJuZXdDb250ZXh0Iiwic2V0Q3VycmVudFNwYW4iLCJyZXNldEN1cnJlbnRTcGFuIiwiYWRkRXJyb3JUb0N1cnJlbnRTcGFuIiwic3BhbkVycm9yIiwiY2xvbmVDdXJyZW50Q29udGV4dCIsIndpdGhOZXdTcGFuQ29udGV4dCIsImNvcHlPZkNvbnRleHQiLCJDb25zb2xlU3BhbkV4cG9ydGVyIiwiQmF0Y2hUcmFjZVByb2Nlc3NvciIsImV4cG9ydGVyIiwibWF4UXVldWVTaXplIiwibWF4QmF0Y2hTaXplIiwic2NoZWR1bGVEZWxheSIsImV4cG9ydFRyaWdnZXJSYXRpbyIsIl9CYXRjaFRyYWNlUHJvY2Vzc29yX2luc3RhbmNlcyIsIl9tYXhRdWV1ZVNpemUiLCJfbWF4QmF0Y2hTaXplIiwiX3NjaGVkdWxlRGVsYXkiLCJfZXhwb3J0VHJpZ2dlclNpemUiLCJfZXhwb3J0ZXIiLCJfYnVmZmVyIiwiX3RpbWVyIiwiX3RpbWVvdXQiLCJfZXhwb3J0SW5Qcm9ncmVzcyIsIl90aW1lb3V0QWJvcnRDb250cm9sbGVyIiwiX19wcml2YXRlTWV0aG9kIiwicnVuRXhwb3J0TG9vcF9mbiIsInNhZmVBZGRJdGVtX2ZuIiwiX3RyYWNlIiwiX3NwYW4iLCJleHBvcnRCYXRjaGVzX2ZuIiwiZm9yY2UiLCJ0b0V4cG9ydCIsImJhdGNoIiwiTXVsdGlUcmFjaW5nUHJvY2Vzc29yIiwiX3Byb2Nlc3NvcnMiLCJfZGVmYXVsdEV4cG9ydGVyIiwiX2RlZmF1bHRQcm9jZXNzb3IiLCJkZWZhdWx0RXhwb3J0ZXIiLCJ0aW1lSXNvIiwiZ2VuZXJhdGVUcmFjZUlkIiwiZ2VuZXJhdGVTcGFuSWQiLCJyZW1vdmVQcml2YXRlRmllbGRzIiwiX1NwYW4iLCJfZGF0YSIsIl90cmFjZUlkIiwiX3NwYW5JZCIsIl9wYXJlbnRJZCIsIl9wcm9jZXNzb3IiLCJfc3RhcnRlZEF0IiwiX2VuZGVkQXQiLCJfdHJhY2luZ0FwaUtleSIsIl9wcmV2aW91c1NwYW4iLCJTcGFuIiwiTm9vcFNwYW4iLCJfVHJhY2UiLCJfc3RhcnRlZCIsIlRyYWNlIiwiTm9vcFRyYWNlIiwiVHJhY2VQcm92aWRlciIsIl9UcmFjZVByb3ZpZGVyX2luc3RhbmNlcyIsIl9tdWx0aVByb2Nlc3NvciIsIl9kaXNhYmxlZCIsImFkZENsZWFudXBMaXN0ZW5lcnNfZm4iLCJkaXNhYmxlZCIsInRyYWNlT3B0aW9ucyIsInRyYWNlSWQiLCJzcGFuT3B0aW9ucyIsInBhcmVudElkIiwidHJhY2luZ0FwaUtleSIsImNsZWFudXAiLCJoYXNPdGhlckxpc3RlbmVyc0ZvclNpZ25hbHMiLCJoYXNPdGhlckxpc3RlbmVyc0ZvckV2ZW50cyIsIm1vZHVsZVRyYWNlUHJvdmlkZXIiLCJzeW1ib2wiLCJnbG9iYWxIb2xkZXIiLCJkZXNjcmlwdG9yIiwiZ2V0TW9kdWxlVHJhY2VQcm92aWRlciIsInByb3ZpZGVyIiwiX3dpdGhTcGFuRmFjdG9yeSIsImNyZWF0ZVNwYW4iLCJjcmVhdGVBZ2VudFNwYW4iLCJjcmVhdGVGdW5jdGlvblNwYW4iLCJ3aXRoRnVuY3Rpb25TcGFuIiwiY3JlYXRlSGFuZG9mZlNwYW4iLCJ3aXRoSGFuZG9mZlNwYW4iLCJjcmVhdGVHdWFyZHJhaWxTcGFuIiwid2l0aEd1YXJkcmFpbFNwYW4iLCJjcmVhdGVNQ1BMaXN0VG9vbHNTcGFuIiwiYWRkVHJhY2VQcm9jZXNzb3IiLCJFdmVudEVtaXR0ZXJEZWxlZ2F0ZSIsIkFnZW50SG9va3MiLCJSdW50aW1lRXZlbnRFbWl0dGVyIiwiUnVuSG9va3MiLCJPUEVOQUlfREVGQVVMVF9NT0RFTF9FTlZfVkFSSUFCTEVfTkFNRSIsImdwdDVSZWFzb25pbmdTZXR0aW5nc1JlcXVpcmVkIiwibW9kZWxOYW1lIiwiaXNHcHQ1RGVmYXVsdCIsImdldERlZmF1bHRNb2RlbCIsImdldERlZmF1bHRNb2RlbFNldHRpbmdzIiwibW9kZWwiLCJfbW9kZWwiLCJnZXRUcmFuc2Zlck1lc3NhZ2UiLCJkZWZhdWx0SGFuZG9mZlRvb2xOYW1lIiwiZGVmYXVsdEhhbmRvZmZUb29sRGVzY3JpcHRpb24iLCJIYW5kb2ZmIiwib25JbnZva2VIYW5kb2ZmIiwiaGFuZG9mZiIsImNvbmZpZyIsImhhc09uSGFuZG9mZiIsImhhc0lucHV0VHlwZSIsImlucHV0SnNvblN0cmluZyIsImdldEhhbmRvZmYiLCJSdW5SYXdNb2RlbFN0cmVhbUV2ZW50IiwiUnVuSXRlbVN0cmVhbUV2ZW50IiwiUnVuQWdlbnRVcGRhdGVkU3RyZWFtRXZlbnQiLCJkZWZpbmVJbnB1dEd1YXJkcmFpbCIsImV4ZWN1dGUiLCJydW5JblBhcmFsbGVsIiwiZGVmaW5lT3V0cHV0R3VhcmRyYWlsIiwiZ2V0RGVmYXVsdE1vZGVsUHJvdmlkZXIiLCJSZXF1ZXN0VXNhZ2UiLCJpbnB1dFRva2Vuc0RldGFpbHMiLCJvdXRwdXRUb2tlbnNEZXRhaWxzIiwiVXNhZ2UiLCJyZXF1ZXN0VXNhZ2VFbnRyaWVzIiwibm9ybWFsaXplZFJlcXVlc3RVc2FnZUVudHJpZXMiLCJuZXdVc2FnZSIsIlJ1bkNvbnRleHQiLCJfYXBwcm92YWxzIiwiYXBwcm92YWxzIiwiYXBwcm92YWwiLCJ0b29sTmFtZSIsImNhbGxJZCIsImFwcHJvdmFsRW50cnkiLCJpbmRpdmlkdWFsQ2FsbEFwcHJvdmFsIiwiaW5kaXZpZHVhbENhbGxSZWplY3Rpb24iLCJhcHByb3ZhbEl0ZW0iLCJhbHdheXNBcHByb3ZlIiwiYWx3YXlzUmVqZWN0IiwiUnVuSXRlbUJhc2UiLCJSdW5NZXNzYWdlT3V0cHV0SXRlbSIsInJhd0l0ZW0iLCJwYXJ0IiwiUnVuVG9vbENhbGxJdGVtIiwiUnVuVG9vbENhbGxPdXRwdXRJdGVtIiwiUnVuUmVhc29uaW5nSXRlbSIsIlJ1bkhhbmRvZmZDYWxsSXRlbSIsIlJ1bkhhbmRvZmZPdXRwdXRJdGVtIiwic291cmNlQWdlbnQiLCJ0YXJnZXRBZ2VudCIsIlJ1blRvb2xBcHByb3ZhbEl0ZW0iLCJBZ2VudFRvb2xVc2VUcmFja2VyIiwiX2FnZW50VG9Ub29scyIsImFsbG93RW1wdHkiLCJuZXh0U3RlcFNjaGVtYSIsIlNpbmdsZVN0ZXBSZXN1bHQiLCJtb2RlbFJlc3BvbnNlIiwicHJlU3RlcEl0ZW1zIiwibmV3U3RlcEl0ZW1zIiwibmV4dFN0ZXAiLCJDVVJSRU5UX1NDSEVNQV9WRVJTSU9OIiwiU1VQUE9SVEVEX1NDSEVNQV9WRVJTSU9OUyIsIiRzY2hlbWFWZXJzaW9uIiwic2VyaWFsaXplZEFnZW50U2NoZW1hIiwic2VyaWFsaXplZFNwYW5CYXNlIiwielxuICAgICAgICAub2JqZWN0IiwiU2VyaWFsaXplZFNwYW4iLCJ6LmxhenkiLCJyZXF1ZXN0VXNhZ2VTY2hlbWEiLCJ1c2FnZVNjaGVtYSIsIm1vZGVsUmVzcG9uc2VTY2hlbWEiLCJwcm90b2NvbC5PdXRwdXRNb2RlbEl0ZW0iLCJpdGVtU2NoZW1hIiwicHJvdG9jb2wuQXNzaXN0YW50TWVzc2FnZUl0ZW0iLCJwcm90b2NvbC5Ub29sQ2FsbEl0ZW0iLCJwcm90b2NvbC5Ib3N0ZWRUb29sQ2FsbEl0ZW0iLCJwcm90b2NvbC5GdW5jdGlvbkNhbGxSZXN1bHRJdGVtIiwicHJvdG9jb2wuQ29tcHV0ZXJDYWxsUmVzdWx0SXRlbSIsInByb3RvY29sLlNoZWxsQ2FsbFJlc3VsdEl0ZW0iLCJwcm90b2NvbC5BcHBseVBhdGNoQ2FsbFJlc3VsdEl0ZW0iLCJwcm90b2NvbC5SZWFzb25pbmdJdGVtIiwicHJvdG9jb2wuRnVuY3Rpb25DYWxsSXRlbSIsInByb3RvY29sLlNoZWxsQ2FsbEl0ZW0iLCJwcm90b2NvbC5BcHBseVBhdGNoQ2FsbEl0ZW0iLCJzZXJpYWxpemVkVHJhY2VTY2hlbWEiLCJzZXJpYWxpemVkUHJvY2Vzc2VkUmVzcG9uc2VTY2hlbWEiLCJ6XG4gICAgICAgIC5hcnJheSIsImd1YXJkcmFpbEZ1bmN0aW9uT3V0cHV0U2NoZW1hIiwidG9vbEd1YXJkcmFpbEJlaGF2aW9yU2NoZW1hIiwidG9vbEd1YXJkcmFpbEZ1bmN0aW9uT3V0cHV0U2NoZW1hIiwidG9vbEd1YXJkcmFpbE1ldGFkYXRhU2NoZW1hIiwiaW5wdXRHdWFyZHJhaWxSZXN1bHRTY2hlbWEiLCJvdXRwdXRHdWFyZHJhaWxSZXN1bHRTY2hlbWEiLCJ0b29sSW5wdXRHdWFyZHJhaWxSZXN1bHRTY2hlbWEiLCJ0b29sT3V0cHV0R3VhcmRyYWlsUmVzdWx0U2NoZW1hIiwiU2VyaWFsaXplZFJ1blN0YXRlIiwicHJvdG9jb2wuTW9kZWxJdGVtIiwiUnVuU3RhdGUiLCJzdGFydGluZ0FnZW50IiwibWF4VHVybnMiLCJjb252ZXJzYXRpb25JZCIsInByZXZpb3VzUmVzcG9uc2VJZCIsImNvdW50IiwiaW5jbHVkZVRyYWNpbmdBcGlLZXkiLCJyZXNwb25zZSIsImluaXRpYWxBZ2VudCIsInBhcnNpbmdFcnJvciIsImpzb25SZXN1bHQiLCJjdXJyZW50U2NoZW1hVmVyc2lvbiIsInN0YXRlSnNvbiIsImFnZW50TWFwIiwiYnVpbGRBZ2VudE1hcCIsImN1cnJlbnRBZ2VudCIsImFnZW50TmFtZSIsIl9lIiwiZGVzZXJpYWxpemVTcGFuIiwiZGVzZXJpYWxpemVNb2RlbFJlc3BvbnNlIiwiZGVzZXJpYWxpemVJdGVtIiwiZGVzZXJpYWxpemVQcm9jZXNzZWRSZXNwb25zZSIsIl9mIiwicXVldWUiLCJBZ2VudCIsInNlcmlhbGl6ZWRTcGFuIiwic3BhbkRhdGEiLCJwcmV2aW91c1NwYW4iLCJzZXJpYWxpemVkTW9kZWxSZXNwb25zZSIsInNlcmlhbGl6ZWRJdGVtIiwic2VyaWFsaXplZFByb2Nlc3NlZFJlc3BvbnNlIiwiY29tcHV0ZXJUb29scyIsInNoZWxsVG9vbHMiLCJhcHBseVBhdGNoVG9vbHMiLCJoYW5kb2ZmcyIsImZ1bmN0aW9uQ2FsbCIsImNvbXB1dGVyQWN0aW9uIiwic2hlbGxBY3Rpb24iLCJhcHBseVBhdGNoQWN0aW9uIiwiYXBwcm92YWxSZXF1ZXN0IiwiREVGQVVMVF9NQVhfVFVSTlMiLCJhcHBseUNhbGxNb2RlbElucHV0RmlsdGVyIiwiY2FsbE1vZGVsSW5wdXRGaWx0ZXIiLCJpbnB1dEl0ZW1zIiwic3lzdGVtSW5zdHJ1Y3Rpb25zIiwiY2xvbmVJbnB1dEl0ZW1zIiwiY2xvbmVkIiwiY2xvbmVNYXAiLCJvcmlnaW5hbFBvb2wiLCJmYWxsYmFja09yaWdpbmFscyIsInJlbW92ZUZyb21GYWxsYmFjayIsIm9yaWdpbmFsIiwidGFrZUZhbGxiYWNrT3JpZ2luYWwiLCJzb3VyY2VJdGVtcyIsIm1hdGNoZWRCeUNvbnRlbnQiLCJmYWxsYmFjayIsImNsb25lZEZpbHRlcmVkSW5wdXQiLCJTZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyIiwibW9kZWxSZXNwb25zZXMiLCJvcmlnaW5hbEl0ZW1zIiwiaGFzUmVzcG9uc2VzIiwic2VydmVySXRlbUtleXMiLCJsYXRlc3RSZXNwb25zZSIsInJhd0l0ZW1LZXkiLCJpbml0aWFsSXRlbXMiLCJkZWxpdmVyZWQiLCJkcm9wUmVtYWluaW5nSW5pdGlhbElucHV0IiwibWFya0ZpbHRlcmVkSXRlbXNBc1NlbnQiLCJhbGxUdXJuSXRlbXMiLCJjcmVhdGVHdWFyZHJhaWxUcmFja2VyIiwicGVuZGluZyIsImZhaWxlZCIsInJ1bkd1YXJkcmFpbHNXaXRoVHJpcHdpcmUiLCJndWFyZHJhaWxBcmdzIiwicmVzdWx0c1RhcmdldCIsIm9uVHJpcHdpcmUiLCJpc1RyaXB3aXJlRXJyb3IiLCJvbkVycm9yIiwiZ3VhcmRyYWlsIiwiYnVpbGRJbnB1dEd1YXJkcmFpbERlZmluaXRpb25zIiwicnVubmVyR3VhcmRyYWlscyIsInNwbGl0SW5wdXRHdWFyZHJhaWxzIiwiYmxvY2tpbmciLCJwYXJhbGxlbCIsInJ1bklucHV0R3VhcmRyYWlscyIsInJ1bk91dHB1dEd1YXJkcmFpbHMiLCJydW5uZXJPdXRwdXRHdWFyZHJhaWxzIiwiYWdlbnRPdXRwdXQiLCJydW5PdXRwdXQiLCJoYXNHcHQ1T25seVNldHRpbmdzIiwic2V0dGluZ3MiLCJwcm92aWRlckRhdGEiLCJzZWxlY3RNb2RlbCIsImFnZW50TW9kZWwiLCJydW5Db25maWdNb2RlbCIsIm1heWJlUmVzZXRUb29sQ2hvaWNlIiwidG9vbFVzZVRyYWNrZXIiLCJtb2RlbFNldHRpbmdzIiwiYWRqdXN0TW9kZWxTZXR0aW5nc0Zvck5vbkdQVDVSdW5uZXJNb2RlbCIsImV4cGxpY3RseU1vZGVsU2V0IiwiYWdlbnRNb2RlbFNldHRpbmdzIiwicnVubmVyTW9kZWwiLCJyZXNvbHZlZE1vZGVsTmFtZSIsImlzTm9uR3B0NVJ1bm5lck1vZGVsIiwiaGFzR3B0NURlZmF1bHRzIiwic3RyaXBHcHQ1T25seVNldHRpbmdzIiwiY29waWVkUHJvdmlkZXJEYXRhIiwiY29waWVkTW9kZWxTZXR0aW5ncyIsImVuc3VyZVRvb2xBdmFpbGFibGUiLCJoYW5kbGVUb29sQ2FsbEFjdGlvbiIsImVycm9yRGF0YSIsInRvb2xzVXNlZCIsImFjdGlvbnMiLCJidWlsZEFjdGlvbiIsInJlc29sdmVkVG9vbCIsInJlc29sdmVGdW5jdGlvbk9ySGFuZG9mZiIsInRvb2xDYWxsIiwiaGFuZG9mZk1hcCIsImZ1bmN0aW9uTWFwIiwiZnVuY3Rpb25Ub29sIiwicHJvY2Vzc01vZGVsUmVzcG9uc2UiLCJydW5IYW5kb2ZmcyIsInJ1bkZ1bmN0aW9ucyIsInJ1bkNvbXB1dGVyQWN0aW9ucyIsInJ1blNoZWxsQWN0aW9ucyIsInJ1bkFwcGx5UGF0Y2hBY3Rpb25zIiwicnVuTUNQQXBwcm92YWxSZXF1ZXN0cyIsImNvbXB1dGVyVG9vbCIsInNoZWxsVG9vbCIsImFwcGx5UGF0Y2hUb29sIiwibWNwVG9vbE1hcCIsIm1jcFNlcnZlckxhYmVsIiwibWNwU2VydmVyVG9vbCIsImlzQWJvcnRFcnJvciIsIkRvbUV4Y2VwdGlvbkN0b3IiLCJnZXRSdW5JdGVtU3RyZWFtRXZlbnROYW1lIiwiZW5xdWV1ZVJ1bkl0ZW1TdHJlYW1FdmVudCIsIml0ZW1OYW1lIiwic3RyZWFtU3RlcEl0ZW1zVG9SdW5SZXN1bHQiLCJhZGRTdGVwVG9SdW5SZXN1bHQiLCJza2lwcGVkSXRlbXMiLCJpc09wZW5BSVJlc3BvbnNlc0NvbXBhY3Rpb25Bd2FyZVNlc3Npb24iLCJzZXNzaW9uIiwiY3JlYXRlU2Vzc2lvblBlcnNpc3RlbmNlVHJhY2tlciIsIlNlc3Npb25QZXJzaXN0ZW5jZVRyYWNrZXJJbXBsIiwic2Vzc2lvbkl0ZW1zIiwiZmlsdGVyZWRJdGVtcyIsInBlbmRpbmdDb3VudHMiLCJjbG9uZUl0ZW1zIiwibmV4dFNuYXBzaG90IiwiY29sbGVjdFBlcnNpc3RhYmxlRmlsdGVyZWRJdGVtcyIsImJ1aWxkU25hcHNob3RGb3JVbmZpbHRlcmVkSXRlbXMiLCJzZXJ2ZXJNYW5hZ2VzQ29udmVyc2F0aW9uIiwicGVyc2lzdElucHV0Iiwic2F2ZVN0cmVhbUlucHV0VG9TZXNzaW9uIiwiaXRlbXNUb1BlcnNpc3QiLCJidWlsZFNvdXJjZU9jY3VycmVuY2VDb3VudHMiLCJzb3VyY2VPY2N1cnJlbmNlQ291bnRzIiwibmV4dENvdW50IiwiZXhpc3RpbmdTbmFwc2hvdCIsInBlcnNpc3RhYmxlSXRlbXMiLCJjb25zdW1lQW55UGVuZGluZ1dyaXRlU2xvdCIsInJlbWFpbmluZyIsImZpbHRlcmVkSXRlbSIsImFsbG9jYXRlZCIsInBlbmRpbmdPY2N1cnJlbmNlcyIsInNvdXJjZUtleSIsImZpbHRlcmVkS2V5IiwiZmlsdGVyZWRSZW1haW5pbmciLCJzYXZlVG9TZXNzaW9uIiwic2Vzc2lvbklucHV0SXRlbXMiLCJhbHJlYWR5UGVyc2lzdGVkIiwibmV3UnVuSXRlbXMiLCJwZXJzaXN0UnVuSXRlbXNUb1Nlc3Npb24iLCJzYW5pdGl6ZWRJbnB1dCIsIm5vcm1hbGl6ZUl0ZW1zRm9yU2Vzc2lvblBlcnNpc3RlbmNlIiwic2F2ZVN0cmVhbVJlc3VsdFRvU2Vzc2lvbiIsInByZXBhcmVJbnB1dEl0ZW1zV2l0aFNlc3Npb24iLCJzZXNzaW9uSW5wdXRDYWxsYmFjayIsImluY2x1ZGVIaXN0b3J5SW5QcmVwYXJlZElucHV0IiwicHJlc2VydmVEcm9wcGVkTmV3SXRlbXMiLCJoaXN0b3J5IiwibmV3SW5wdXRJdGVtcyIsImhpc3RvcnlTbmFwc2hvdCIsIm5ld0lucHV0U25hcHNob3QiLCJoaXN0b3J5Q291bnRzIiwiYnVpbGRJdGVtRnJlcXVlbmN5TWFwIiwibmV3SW5wdXRDb3VudHMiLCJoaXN0b3J5UmVmcyIsIm5ld0lucHV0UmVmcyIsImFwcGVuZGVkIiwiZGVjcmVtZW50Q291bnQiLCJoaXN0b3J5UmVtYWluaW5nIiwibmV3UmVtYWluaW5nIiwicHJlcGFyZWRJdGVtcyIsInNhbml0aXplVmFsdWVGb3JTZXNzaW9uIiwic3RyaXBUcmFuc2llbnRDYWxsSWRzIiwidG9EYXRhVXJsRnJvbUJ5dGVzIiwiaXNQbGFpbk9iamVjdCIsInJlY29yZCIsIm1lZGlhVHlwZSIsIm5leHRDb250ZXh0IiwicHJvdG8iLCJzaG91bGRTdHJpcElkIiwic2hvdWxkU3RyaXBJZEZvclR5cGUiLCJleHRyYUlucHV0SXRlbXMiLCJsYXN0UmVzcG9uc2VJZCIsImFscmVhZHlQZXJzaXN0ZWRDb3VudCIsIml0ZW1zVG9TYXZlIiwicnVuQ29tcGFjdGlvbk9uU2Vzc2lvbiIsInNhbml0aXplZEl0ZW1zIiwicmVzcG9uc2VJZCIsImNvbXBhY3Rpb25SZXN1bHQiLCJ1c2FnZSIsImNvdW50cyIsImdldExhc3RUZXh0RnJvbU91dHB1dE1lc3NhZ2UiLCJvdXRwdXRNZXNzYWdlIiwibGFzdEl0ZW0iLCJnZXRPdXRwdXRUZXh0Iiwibm9ybWFsaXplQmVoYXZpb3IiLCJydW5Ub29sSW5wdXRHdWFyZHJhaWxzIiwib25SZXN1bHQiLCJsaXN0IiwiYmVoYXZpb3IiLCJydW5Ub29sT3V0cHV0R3VhcmRyYWlscyIsInRvb2xPdXRwdXQiLCJmaW5hbE91dHB1dCIsIlRPT0xfQVBQUk9WQUxfUkVKRUNUSU9OX01FU1NBR0UiLCJnZXRUb29sQ2FsbE91dHB1dEl0ZW0iLCJtYXliZVN0cnVjdHVyZWRPdXRwdXRzIiwibm9ybWFsaXplU3RydWN0dXJlZFRvb2xPdXRwdXRzIiwic3RydWN0dXJlZEl0ZW1zIiwiY29udmVydFN0cnVjdHVyZWRUb29sT3V0cHV0VG9JbnB1dEl0ZW0iLCJleGVjdXRlRnVuY3Rpb25Ub29sQ2FsbHMiLCJ0b29sUnVucyIsInJ1bm5lciIsImRlcHMiLCJ0b29sUnVuIiwicGFyc2VkQXJncyIsInBhcnNlVG9vbEFyZ3VtZW50cyIsImFwcHJvdmFsT3V0Y29tZSIsImhhbmRsZUZ1bmN0aW9uQXBwcm92YWwiLCJydW5BcHByb3ZlZEZ1bmN0aW9uVG9vbCIsImJ1aWxkQXBwcm92YWxSZXF1ZXN0UmVzdWx0IiwiYnVpbGRBcHByb3ZhbFJlamVjdGlvblJlc3VsdCIsImlucHV0R3VhcmRyYWlsUmVzdWx0IiwiZW1pdFRvb2xTdGFydCIsImVtaXRUb29sRW5kIiwiZnVuY3Rpb25SZXN1bHQiLCJuZXN0ZWRSdW5SZXN1bHQiLCJjb25zdW1lQWdlbnRUb29sUnVuUmVzdWx0IiwibmVzdGVkSW50ZXJydXB0aW9ucyIsImVycm9yUmVzdWx0IiwiX3J1bkNvbXB1dGVyQWN0aW9uQW5kU2NyZWVuc2hvdCIsImFjdGlvbiIsInNjcmVlbnNob3QiLCJ0b0Vycm9yTWVzc2FnZSIsInJlc29sdmVUb29sQXBwcm92YWwiLCJvbkFwcHJvdmFsIiwiZGVjaXNpb24iLCJoYW5kbGVUb29sQXBwcm92YWxEZWNpc2lvbiIsImJ1aWxkUmVqZWN0aW9uSXRlbSIsImFwcHJvdmFsU3RhdGUiLCJleGVjdXRlU2hlbGxBY3Rpb25zIiwiY3VzdG9tTG9nZ2VyIiwiX2xvZ2dlciIsImFwcHJvdmFsRGVjaXNpb24iLCJyZWplY3Rpb25PdXRwdXQiLCJzaGVsbE91dHB1dHMiLCJwcm92aWRlck1ldGEiLCJtYXhPdXRwdXRMZW5ndGgiLCJzaGVsbFJlc3VsdCIsImV4ZWN1dGVBcHBseVBhdGNoT3BlcmF0aW9ucyIsImV4ZWN1dGVDb21wdXRlckFjdGlvbnMiLCJpbWFnZVVybCIsImV4ZWN1dGVIYW5kb2ZmQ2FsbHMiLCJuZXdSZXNwb25zZSIsImFjdHVhbEhhbmRvZmYiLCJoYW5kb2ZmU3BhbiIsIm5ld0FnZW50IiwicmVxdWVzdGVkQWdlbnRzIiwiaW5wdXRGaWx0ZXIiLCJoYW5kb2ZmSW5wdXREYXRhIiwiTk9UX0ZJTkFMX09VVFBVVCIsImNvbGxlY3RJbnRlcnJ1cHRpb25zIiwidG9vbFJlc3VsdHMiLCJhZGRpdGlvbmFsSXRlbXMiLCJpbnRlcnJ1cHRpb25zIiwiY2hlY2tGb3JGaW5hbE91dHB1dEZyb21Ub29scyIsImFkZGl0aW9uYWxJbnRlcnJ1cHRpb25zIiwiZmlyc3RUb29sUmVzdWx0IiwidG9vbFVzZUJlaGF2aW9yIiwic3RvcHBpbmdUb29sIiwic3RydWN0dXJlZCIsIm5vcm1hbGl6ZWQiLCJub3JtYWxpemVTdHJ1Y3R1cmVkVG9vbE91dHB1dCIsImlzUmVjb3JkIiwiaW1hZ2VTdHJpbmciLCJpbWFnZUZpbGVJZCIsImZhbGxiYWNrSW1hZ2VNZWRpYVR5cGUiLCJpc05vbkVtcHR5U3RyaW5nIiwiaW1hZ2VGaWVsZCIsImltYWdlT2JqIiwiaW5saW5lTWVkaWFUeXBlIiwidG9JbmxpbmVJbWFnZVN0cmluZyIsImNhbmRpZGF0ZUlkIiwiZmlsZVZhbHVlIiwibm9ybWFsaXplRmlsZVZhbHVlIiwiYXNEYXRhVXJsIiwicmVmZXJlbmNlZElkIiwiZGlyZWN0RmlsZSIsIm5vcm1hbGl6ZWRPYmplY3QiLCJub3JtYWxpemVGaWxlT2JqZWN0Q2FuZGlkYXRlIiwibGVnYWN5VmFsdWUiLCJub3JtYWxpemVMZWdhY3lGaWxlVmFsdWUiLCJkYXRhVmFsdWUiLCJoYXNTdHJpbmdEYXRhIiwiaGFzQmluYXJ5RGF0YSIsImZpbGVuYW1lIiwiaGFuZGxlSG9zdGVkTWNwQXBwcm92YWxzIiwicmVxdWVzdHMiLCJmdW5jdGlvblJlc3VsdHMiLCJhcHBlbmRJZk5ldyIsInJlc29sdmVBcHByb3ZhbCIsInBlbmRpbmdBcHByb3ZhbHMiLCJwZW5kaW5nQXBwcm92YWxJZHMiLCJ0b29sRGF0YSIsImFwcHJvdmFsUmVxdWVzdElkIiwiYXBwcm92YWxSZXN1bHQiLCJhcHByb3ZhbFJlc3BvbnNlRGF0YSIsIkFQUFJPVkFMX0lURU1fVFlQRVMiLCJpc0hvc3RlZE1jcEFwcHJvdmFsSXRlbSIsInJlc29sdmVBcHByb3ZhbFN0YXRlIiwiaXNBcHByb3ZhbEl0ZW1MaWtlIiwiaXRlbVR5cGUiLCJnZXRBcHByb3ZhbElkZW50aXR5IiwiYnVpbGRBcHBlbmRDb250ZXh0IiwiZXhpc3RpbmdJdGVtcyIsInNlZW5JdGVtcyIsInNlZW5BcHByb3ZhbElkZW50aXRpZXMiLCJpZGVudGl0eSIsImFwcGVuZFJ1bkl0ZW1JZk5ldyIsImJ1aWxkQXBwcm92ZWRDYWxsSWRTZXQiLCJjYWxsSWRzIiwiY29sbGVjdENvbXBsZXRlZENhbGxJZHMiLCJjb21wbGV0ZWQiLCJmaWx0ZXJBY3Rpb25zQnlBcHByb3ZhbCIsImFsbG93ZWRDYWxsSWRzIiwiZmlsdGVyUGVuZGluZ0FjdGlvbnMiLCJoYXNDYWxsSWQiLCJ0cnVuY2F0ZUZvckRldmVsb3BlciIsInRyaW1tZWQiLCJmb3JtYXRGaW5hbE91dHB1dFR5cGVFcnJvciIsInouWm9kRXJyb3IiLCJpc3N1ZVBhdGhQYXJ0cyIsImlzc3VlUGF0aCIsInJlc29sdmVJbnRlcnJ1cHRlZFR1cm4iLCJvcmlnaW5hbFByZVN0ZXBJdGVtcyIsInByb2Nlc3NlZFJlc3BvbnNlIiwiZnVuY3Rpb25DYWxsSWRzIiwiY29tcGxldGVkRnVuY3Rpb25DYWxsSWRzIiwiY29tcGxldGVkU2hlbGxDYWxsSWRzIiwiY29tcGxldGVkQXBwbHlQYXRjaENhbGxJZHMiLCJwZW5kaW5nQXBwcm92YWxJdGVtcyIsInBlbmRpbmdBcHByb3ZhbElkZW50aXRpZXMiLCJmdW5jdGlvblRvb2xSdW5zIiwicnVuIiwic2hlbGxSdW5zIiwicGVuZGluZ0NvbXB1dGVyQWN0aW9ucyIsImFwcGx5UGF0Y2hSdW5zIiwiY29tcHV0ZXJSZXN1bHRzIiwic2hlbGxSZXN1bHRzIiwiYXBwbHlQYXRjaFJlc3VsdHMiLCJuZXdJdGVtcyIsImFwcGVuZENvbnRleHQiLCJob3N0ZWRNY3BBcHByb3ZhbHMiLCJrZXB0QXBwcm92YWxJdGVtcyIsInJlbW92ZWRBcHByb3ZhbENvdW50IiwiY29tcGxldGVkU3RlcCIsIm1heWJlQ29tcGxldGVUdXJuRnJvbVRvb2xSZXN1bHRzIiwicmVzb2x2ZVR1cm5BZnRlck1vZGVsUmVzcG9uc2UiLCJtZXNzYWdlSXRlbXMiLCJwb3RlbnRpYWxGaW5hbE91dHB1dCIsIm91dHB1dEVycm9yTWVzc2FnZSIsIl9ydW5uZXIiLCJ0b29sT3V0Y29tZSIsImlzQ29tcHV0ZXJJbnN0YW5jZSIsInNlcmlhbGl6ZVRvb2wiLCJzZXJpYWxpemVIYW5kb2ZmIiwiZ2V0VHJhY2luZyIsInRyYWNpbmdEaXNhYmxlZCIsInRyYWNlSW5jbHVkZVNlbnNpdGl2ZURhdGEiLCJlbnN1cmVBZ2VudFNwYW4iLCJleGlzdGluZ1NwYW4iLCJoYW5kb2ZmTmFtZXMiLCJwcmVwYXJlQWdlbnRBcnRpZmFjdHMiLCJjYXBhYmlsaXRpZXMiLCJjb2xsZWN0QWdlbnRDYXBhYmlsaXRpZXMiLCJ3YXJtVXBDb21wdXRlclRvb2xzIiwicHJlcGFyZVR1cm4iLCJpc1Jlc3VtZWRTdGF0ZSIsInByZXNlcnZlVHVyblBlcnNpc3RlbmNlT25SZXN1bWUiLCJjb250aW51aW5nSW50ZXJydXB0ZWRUdXJuIiwic2VydmVyQ29udmVyc2F0aW9uVHJhY2tlciIsImlucHV0R3VhcmRyYWlsRGVmcyIsImd1YXJkcmFpbEhhbmRsZXJzIiwiZW1pdEFnZW50U3RhcnQiLCJhcnRpZmFjdHMiLCJpc1Jlc3VtaW5nRnJvbUludGVycnVwdGlvbiIsImJlZ2luVHVybiIsInBhcmFsbGVsR3VhcmRyYWlsUHJvbWlzZSIsInJ1bklucHV0R3VhcmRyYWlsc0ZvclR1cm4iLCJ0dXJuSW5wdXQiLCJoYW5kbGVycyIsImd1YXJkcmFpbERlZnMiLCJyZXN1bWluZ1R1cm5JblByb2dyZXNzIiwiYXBwbHlUdXJuUmVzdWx0IiwidHVyblJlc3VsdCIsInJlc2V0VHVyblBlcnNpc3RlbmNlIiwib25TdGVwSXRlbXMiLCJyZXN1bWVJbnRlcnJ1cHRlZFR1cm4iLCJoYW5kbGVJbnRlcnJ1cHRlZE91dGNvbWUiLCJvdXRjb21lIiwic2V0Q29udGludWluZ0ludGVycnVwdGVkVHVybiIsIl9leGhhdXN0aXZlIiwiUnVubmVyIiwiX1J1bm5lcl9pbnN0YW5jZXMiLCJyZXNvbHZlZE9wdGlvbnMiLCJoYXNDYWxsTW9kZWxJbnB1dEZpbHRlciIsInRyYWNpbmdDb25maWciLCJlZmZlY3RpdmVPcHRpb25zIiwicmVzdW1pbmdGcm9tU3RhdGUiLCJyZXN1bWVkQ29udmVyc2F0aW9uSWQiLCJyZXN1bWVkUHJldmlvdXNSZXNwb25zZUlkIiwic2Vzc2lvblBlcnNpc3RlbmNlIiwicHJlcGFyZWRJbnB1dCIsInByZXBhcmVkIiwiZW5zdXJlU3RyZWFtSW5wdXRQZXJzaXN0ZWQiLCJleGVjdXRlUnVuIiwicnVuSW5kaXZpZHVhbFN0cmVhbV9mbiIsInJ1blJlc3VsdCIsInJ1bkluZGl2aWR1YWxOb25TdHJlYW1fZm4iLCJyZXNvbHZlTW9kZWxGb3JBZ2VudF9mbiIsInNlbGVjdGVkTW9kZWwiLCJzZXNzaW9uSW5wdXRVcGRhdGUiLCJyZXNvbHZlZENvbnZlcnNhdGlvbklkIiwicmVzb2x2ZWRQcmV2aW91c1Jlc3BvbnNlSWQiLCJpbnRlcnJ1cHRlZE91dGNvbWUiLCJzaG91bGRSZXR1cm4iLCJzaG91bGRDb250aW51ZSIsIndhc0NvbnRpbnVpbmdJbnRlcnJ1cHRlZFR1cm4iLCJndWFyZHJhaWxUcmFja2VyIiwicHJldmlvdXNUdXJuIiwicHJldmlvdXNQZXJzaXN0ZWRDb3VudCIsInByZXZpb3VzR2VuZXJhdGVkQ291bnQiLCJwcmVwYXJlZENhbGwiLCJwcmVwYXJlTW9kZWxDYWxsX2ZuIiwiY3VycmVudFN0ZXAiLCJydW5TdHJlYW1Mb29wX2ZuIiwic2VudElucHV0VG9Nb2RlbCIsInN0cmVhbUlucHV0UGVyc2lzdGVkIiwicGVyc2lzdFN0cmVhbUlucHV0SWZOZWVkZWQiLCJhd2FpdEd1YXJkcmFpbHNBbmRQZXJzaXN0SW5wdXQiLCJwcmVwYXJlZFR1cm4iLCJkZWxheVN0cmVhbUlucHV0UGVyc2lzdGVuY2UiLCJmaW5hbFJlc3BvbnNlIiwiaW5wdXRNYXJrZWQiLCJtYXJrSW5wdXRPbmNlIiwicHJlVG9vbEl0ZW1zIiwic3RyZWFtT3B0aW9ucyIsInByb21wdCIsIm1vZGVsSW5wdXQiLCJwZXJzaXN0ZWRJdGVtcyIsImZpbHRlckFwcGxpZWQiLCJhZ2VudFRvb2xSdW5SZXN1bHRzIiwic2F2ZUFnZW50VG9vbFJ1blJlc3VsdCIsIkFnZW50QXNUb29sTmVlZEFwcHJvdmFsU2NoYW1lIiwiX0FnZW50Iiwib3V0cHV0VHlwZXMiLCJ0b29sRGVzY3JpcHRpb24iLCJjdXN0b21PdXRwdXRFeHRyYWN0b3IiLCJydW5Db25maWciLCJydW5PcHRpb25zIiwib25TdHJlYW0iLCJldmVudEhhbmRsZXJzIiwiZW1pdEV2ZW50Iiwic3BlY2lmaWMiLCJ3aWxkY2FyZCIsImFnZW50VG9vbCIsInNob3VsZFN0cmVhbSIsInN0cmVhbVBheWxvYWQiLCJzdHJlYW1SZXN1bHQiLCJjb21wbGV0ZWRSZXN1bHQiLCJ1c2VzU3RvcEF0VG9vbE5hbWVzIiwib3V0cHV0VGV4dCIsInNldCIsImVuYWJsZWRUb29scyIsIm1heWJlSXNFbmFibGVkIiwiYmFzZTY0VG9BcnJheUJ1ZmZlciIsImJpbmFyeVN0cmluZyIsImFycmF5QnVmZmVyVG9CYXNlNjQiLCJhcnJheUJ1ZmZlciIsImdldExhc3RUZXh0RnJvbUF1ZGlvT3V0cHV0TWVzc2FnZSIsImxhc3RDb250ZW50SXRlbSIsImRpZmZSZWFsdGltZUhpc3RvcnkiLCJvbGRIaXN0b3J5IiwibmV3SGlzdG9yeSIsInJlbW92YWxzIiwiYWRkaXRpb25zIiwib2xkSXRlbSIsInVwZGF0ZXMiLCJoYXNXZWJSVENTdXBwb3J0IiwicmVtb3ZlQXVkaW9Gcm9tQ29udGVudCIsInByZXNlcnZlQXNzaXN0YW50QXVkaW9UcmFuc2NyaXB0cyIsIm1lcmdlZENvbnRlbnQiLCJwcmV2aW91c0VudHJ5IiwidXBkYXRlUmVhbHRpbWVIaXN0b3J5Iiwic2hvdWxkSW5jbHVkZUF1ZGlvRGF0YSIsInVwZGF0ZWRDb250ZW50IiwibmV3RXZlbnQiLCJleGlzdGluZ0luZGV4IiwiZXhpc3RpbmdJdGVtIiwibWVyZ2VkRXZlbnQiLCJpZHgiLCJwcmV2SW5kZXgiLCJIRUFERVJTIiwiV0VCU09DS0VUX01FVEEiLCJyZWFsdGltZUFwcHJvdmFsSXRlbVRvQXBwcm92YWxJdGVtIiwiYXBwcm92YWxJdGVtVG9SZWFsdGltZUFwcHJvdmFsSXRlbSIsIml0ZW1JZCIsInNlcnZlckxhYmVsIiwiUmVhbHRpbWVBZ2VudCIsImdldFJlYWx0aW1lR3VhcmRyYWlsU2V0dGluZ3MiLCJkZWZpbmVSZWFsdGltZU91dHB1dEd1YXJkcmFpbCIsInBvbGljeUhpbnRJbnB1dCIsImJhc2VHdWFyZHJhaWwiLCJwb2xpY3lIaW50IiwiZ2V0UmVhbHRpbWVHdWFyZHJhaWxGZWVkYmFja01lc3NhZ2UiLCJpc0RlZmluZWQiLCJpc0RlcHJlY2F0ZWRDb25maWciLCJ0b05ld1Nlc3Npb25Db25maWciLCJpbnB1dENvbmZpZyIsIm5vcm1hbGl6ZUF1ZGlvRm9ybWF0IiwicmVxdWVzdGVkT3V0cHV0Vm9pY2UiLCJvdXRwdXRDb25maWciLCJfaCIsIl9nIiwicmVhbHRpbWVNZXNzYWdlSXRlbVNjaGVtYSIsInJlYWx0aW1lVG9vbENhbGxJdGVtIiwicmVhbHRpbWVNY3BDYWxsSXRlbSIsInJlYWx0aW1lTWNwQ2FsbEFwcHJvdmFsUmVxdWVzdEl0ZW0iLCJyZWFsdGltZVJlc3BvbnNlIiwielxuICAgICAgICAgICAgLm9iamVjdCIsInpcbiAgICAgICAgLmVudW0iLCJjb252ZXJzYXRpb25JdGVtQ29udGVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1TY2hlbWEiLCJjb252ZXJzYXRpb25DcmVhdGVkRXZlbnRTY2hlbWEiLCJjb252ZXJzYXRpb25JdGVtQWRkZWRFdmVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1Eb25lRXZlbnRTY2hlbWEiLCJjb252ZXJzYXRpb25JdGVtRGVsZXRlZEV2ZW50U2NoZW1hIiwiY29udmVyc2F0aW9uSXRlbUlucHV0QXVkaW9UcmFuc2NyaXB0aW9uQ29tcGxldGVkRXZlbnRTY2hlbWEiLCJjb252ZXJzYXRpb25JdGVtSW5wdXRBdWRpb1RyYW5zY3JpcHRpb25EZWx0YUV2ZW50U2NoZW1hIiwiY29udmVyc2F0aW9uSXRlbUlucHV0QXVkaW9UcmFuc2NyaXB0aW9uRmFpbGVkRXZlbnRTY2hlbWEiLCJjb252ZXJzYXRpb25JdGVtUmV0cmlldmVkRXZlbnRTY2hlbWEiLCJjb252ZXJzYXRpb25JdGVtVHJ1bmNhdGVkRXZlbnRTY2hlbWEiLCJjb252ZXJzYXRpb25JdGVtQ3JlYXRlRXZlbnRTY2hlbWEiLCJjb252ZXJzYXRpb25JdGVtRGVsZXRlRXZlbnRTY2hlbWEiLCJjb252ZXJzYXRpb25JdGVtUmV0cmlldmVFdmVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1UcnVuY2F0ZUV2ZW50U2NoZW1hIiwiZXJyb3JFdmVudFNjaGVtYSIsImlucHV0QXVkaW9CdWZmZXJDbGVhcmVkRXZlbnRTY2hlbWEiLCJpbnB1dEF1ZGlvQnVmZmVyQXBwZW5kRXZlbnRTY2hlbWEiLCJpbnB1dEF1ZGlvQnVmZmVyQ2xlYXJFdmVudFNjaGVtYSIsImlucHV0QXVkaW9CdWZmZXJDb21taXRFdmVudFNjaGVtYSIsImlucHV0QXVkaW9CdWZmZXJDb21taXR0ZWRFdmVudFNjaGVtYSIsImlucHV0QXVkaW9CdWZmZXJTcGVlY2hTdGFydGVkRXZlbnRTY2hlbWEiLCJpbnB1dEF1ZGlvQnVmZmVyU3BlZWNoU3RvcHBlZEV2ZW50U2NoZW1hIiwib3V0cHV0QXVkaW9CdWZmZXJTdGFydGVkRXZlbnRTY2hlbWEiLCJvdXRwdXRBdWRpb0J1ZmZlclN0b3BwZWRFdmVudFNjaGVtYSIsIm91dHB1dEF1ZGlvQnVmZmVyQ2xlYXJlZEV2ZW50U2NoZW1hIiwicmF0ZUxpbWl0c1VwZGF0ZWRFdmVudFNjaGVtYSIsInJlc3BvbnNlQXVkaW9EZWx0YUV2ZW50U2NoZW1hIiwicmVzcG9uc2VBdWRpb0RvbmVFdmVudFNjaGVtYSIsInJlc3BvbnNlQXVkaW9UcmFuc2NyaXB0RGVsdGFFdmVudFNjaGVtYSIsInJlc3BvbnNlQXVkaW9UcmFuc2NyaXB0RG9uZUV2ZW50U2NoZW1hIiwicmVzcG9uc2VDb250ZW50UGFydEFkZGVkRXZlbnRTY2hlbWEiLCJyZXNwb25zZUNvbnRlbnRQYXJ0RG9uZUV2ZW50U2NoZW1hIiwicmVzcG9uc2VDcmVhdGVkRXZlbnRTY2hlbWEiLCJyZXNwb25zZURvbmVFdmVudFNjaGVtYSIsInJlc3BvbnNlRnVuY3Rpb25DYWxsQXJndW1lbnRzRGVsdGFFdmVudFNjaGVtYSIsInJlc3BvbnNlRnVuY3Rpb25DYWxsQXJndW1lbnRzRG9uZUV2ZW50U2NoZW1hIiwicmVzcG9uc2VPdXRwdXRJdGVtQWRkZWRFdmVudFNjaGVtYSIsInJlc3BvbnNlT3V0cHV0SXRlbURvbmVFdmVudFNjaGVtYSIsInJlc3BvbnNlVGV4dERlbHRhRXZlbnRTY2hlbWEiLCJyZXNwb25zZVRleHREb25lRXZlbnRTY2hlbWEiLCJzZXNzaW9uQ3JlYXRlZEV2ZW50U2NoZW1hIiwic2Vzc2lvblVwZGF0ZWRFdmVudFNjaGVtYSIsInJlc3BvbnNlQ2FuY2VsRXZlbnRTY2hlbWEiLCJyZXNwb25zZUNyZWF0ZUV2ZW50U2NoZW1hIiwic2Vzc2lvblVwZGF0ZUV2ZW50U2NoZW1hIiwibWNwTGlzdFRvb2xzSW5Qcm9ncmVzc0V2ZW50U2NoZW1hIiwibWNwTGlzdFRvb2xzQ29tcGxldGVkRXZlbnRTY2hlbWEiLCJyZXNwb25zZU1jcENhbGxBcmd1bWVudHNEZWx0YUV2ZW50U2NoZW1hIiwicmVzcG9uc2VNY3BDYWxsQXJndW1lbnRzRG9uZUV2ZW50U2NoZW1hIiwicmVzcG9uc2VNY3BDYWxsSW5Qcm9ncmVzc0V2ZW50U2NoZW1hIiwicmVzcG9uc2VNY3BDYWxsQ29tcGxldGVkRXZlbnRTY2hlbWEiLCJtY3BMaXN0VG9vbHNGYWlsZWRFdmVudFNjaGVtYSIsImdlbmVyaWNFdmVudFNjaGVtYSIsInJlYWx0aW1lU2VydmVyRXZlbnRTY2hlbWEiLCJwYXJzZVJlYWx0aW1lRXZlbnQiLCJyYXciLCJnZW5lcmljUGFyc2VkIiwiREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfTU9ERUwiLCJERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRyIsIl9PcGVuQUlSZWFsdGltZUJhc2UiLCJfYXBpS2V5IiwiX3RyYWNpbmdDb25maWciLCJfcmF3U2Vzc2lvbkNvbmZpZyIsImFwaUtleSIsImlzR2VuZXJpYyIsImlucHV0VG9rZW5zIiwib3V0cHV0VG9rZW5zIiwidG90YWxUb2tlbnMiLCJwcmV2aW91c0l0ZW1JZCIsIm1jcEFwcHJvdmFsUmVxdWVzdCIsIm1jcENhbGwiLCJyZWFsdGltZUl0ZW0iLCJvdGhlckV2ZW50RGF0YSIsInRyaWdnZXJSZXNwb25zZSIsImltYWdlIiwibmV3Q29uZmlnIiwibm9pc2VSZWR1Y3Rpb25PdmVycmlkZSIsInRyYW5zY3JpcHRpb25PdmVycmlkZSIsInR1cm5EZXRlY3Rpb25PdmVycmlkZSIsInNlc3Npb25EYXRhIiwiX2oiLCJfaSIsIl9sIiwiX24iLCJfbSIsIl9wIiwiX28iLCJfciIsIl9xIiwiX3QiLCJfcyIsIl92IiwiX3UiLCJfdyIsIl96IiwiX3kiLCJfQiIsIl9BIiwicGlja0RlZmluZWQiLCJjcmVhdGVSZXNwb25zZSIsImNyZWF0ZV9yZXNwb25zZSIsImVhZ2VybmVzcyIsImludGVycnVwdFJlc3BvbnNlIiwiaW50ZXJydXB0X3Jlc3BvbnNlIiwicHJlZml4UGFkZGluZ01zIiwicHJlZml4X3BhZGRpbmdfbXMiLCJzaWxlbmNlRHVyYXRpb25NcyIsInNpbGVuY2VfZHVyYXRpb25fbXMiLCJ0aHJlc2hvbGQiLCJpZGxlVGltZW91dE1zIiwiaWRsZV90aW1lb3V0X21zIiwic3RhcnRSZXNwb25zZSIsImF1ZGlvIiwiY29tbWl0IiwicmVtb3ZhbElkcyIsInVwZGF0ZSIsImFkZGl0aW9uc0FuZFVwZGF0ZXMiLCJhZGRpdGlvbiIsIml0ZW1FbnRyeSIsImFwcHJvdmVkIiwiT3BlbkFJUmVhbHRpbWVCYXNlIiwiT3BlbkFJUmVhbHRpbWVXZWJSVEMiLCJfdXJsIiwiX3N0YXRlIiwiX3VzZUluc2VjdXJlQXBpS2V5IiwiX29uZ29pbmdSZXNwb25zZSIsIl9tdXRlZCIsImJhc2VVcmwiLCJpc0NsaWVudEtleSIsInVzZXJTZXNzaW9uQ29uZmlnIiwiY29ubmVjdGlvblVybCIsInBlZXJDb25uZWN0aW9uIiwiZGF0YUNoYW5uZWwiLCJhdHRhY2hDb25uZWN0aW9uU3RhdGVIYW5kbGVyIiwiY29ubmVjdGlvbiIsImF1ZGlvRWxlbWVudCIsIm9yaWdpbmFsUGVlckNvbm5lY3Rpb24iLCJvZmZlciIsInNkcFJlc3BvbnNlIiwiYW5zd2VyIiwibXV0ZWQiLCJzZW5kZXIiLCJXZWJTb2NrZXQiLCJPcGVuQUlSZWFsdGltZVdlYlNvY2tldCIsIl9PcGVuQUlSZWFsdGltZVdlYlNvY2tldF9pbnN0YW5jZXMiLCJfZGVmYXVsdFVybCIsIl9jdXJyZW50SXRlbUlkIiwiX2N1cnJlbnRBdWRpb0NvbnRlbnRJbmRleCIsIl9jcmVhdGVXZWJTb2NrZXQiLCJfc2tpcE9wZW5FdmVudExpc3RlbmVycyIsImF1ZGlvRXZlbnQiLCJyZXNldEF1ZGlvUGxheWJhY2tTdGF0ZV9mbiIsInVybCIsInNlc3Npb25Db25maWciLCJzZXR1cFdlYlNvY2tldF9mbiIsImVsYXBzZWRUaW1lIiwiY2FuY2VsT25nb2luZ1Jlc3BvbnNlIiwibGVuZ3RoIiwiYXVkaW9fZW5kX21zIiwid3MiLCJ3ZWJzb2NrZXRBcmd1bWVudHMiLCJvblNvY2tldE9wZW5SZWFkeSIsImJ1ZmYiLCJmbXQiLCJyYXRlIiwiYXV0b21hdGljUmVzcG9uc2VDYW5jZWxsYXRpb25FbmFibGVkIiwiQkFDS0dST1VORF9SRVNVTFRfU1lNQk9MIiwiYmFja2dyb3VuZFJlc3VsdCIsImlzQmFja2dyb3VuZFJlc3VsdCIsImlzVmFsaWRSZWFsdGltZVRvb2wiLCJ0b1JlYWx0aW1lVG9vbERlZmluaXRpb24iLCJzZXJ2ZXJVcmwiLCJjbG9uZURlZmF1bHRTZXNzaW9uQ29uZmlnIiwiX1JlYWx0aW1lU2Vzc2lvbiIsIl9SZWFsdGltZVNlc3Npb25faW5zdGFuY2VzIiwiX3RyYW5zcG9ydCIsIl9jdXJyZW50QWdlbnQiLCJfY3VycmVudFRvb2xzIiwiX291dHB1dEd1YXJkcmFpbHMiLCJfb3V0cHV0R3VhcmRyYWlsU2V0dGluZ3MiLCJfdHJhbnNjcmliZWRUZXh0RGVsdGFzIiwiX2hpc3RvcnkiLCJfc2hvdWxkSW5jbHVkZUF1ZGlvRGF0YSIsIl9pbnRlcnJ1cHRlZEJ5R3VhcmRyYWlsIiwiX2F1ZGlvU3RhcnRlZCIsIl9hbGxNY3BUb29sc0J5U2VydmVyIiwiX2F2YWlsYWJsZU1jcFRvb2xzIiwiX2xhc3RTZXNzaW9uQ29uZmlnIiwiX2F1dG9tYXRpY2FsbHlUcmlnZ2VyUmVzcG9uc2VGb3JNY3BUb29sQ2FsbHMiLCJvdmVycmlkZXMiLCJzZXRDdXJyZW50QWdlbnRfZm4iLCJnZXRTZXNzaW9uQ29uZmlnX2ZuIiwic2V0RXZlbnRMaXN0ZW5lcnNfZm4iLCJ1cGRhdGVkSGlzdG9yeSIsImhhbmRsZUZ1bmN0aW9uVG9vbENhbGxfZm4iLCJoYW5kb2ZmVG9vbHMiLCJoYXNUb29sc0RlZmluZWQiLCJoYXNIYW5kb2Zmc0RlZmluZWQiLCJ1cGRhdGVBdmFpbGFibGVNY3BUb29sc19mbiIsImFkZGl0aW9uYWxDb25maWciLCJvdmVycmlkZXNDb25maWciLCJvcHRpb25zQ29uZmlnIiwiaW5zdHJ1Y3Rpb25zIiwiZ2V0QXVkaW9PdXRwdXRWb2ljZU92ZXJyaWRlIiwiYXVkaW9Db25maWciLCJhdWRpb091dHB1dFZvaWNlT3ZlcnJpZGUiLCJ0b3BMZXZlbFZvaWNlT3ZlcnJpZGUiLCJyZXNvbHZlZFZvaWNlIiwiZnVsbENvbmZpZyIsImhhbmRsZUhhbmRvZmZfZm4iLCJndWFyZGVkUmVzdWx0IiwiaGFuZGxlRnVuY3Rpb25DYWxsX2ZuIiwiZW5hYmxlZEhhbmRvZmZzIiwiZnVuY3Rpb25Ub29sTWFwIiwicG9zc2libGVIYW5kb2ZmIiwicnVuT3V0cHV0R3VhcmRyYWlsc19mbiIsImZpcnN0VHJpcHdpcmVUcmlnZ2VyZWQiLCJmZWVkYmFja1RleHQiLCJjb21wbGV0ZWRFdmVudCIsInRleHRPdXRwdXQiLCJsYXN0UnVuSW5kZXgiLCJsYXN0SXRlbUlkIiwiZGVsdGEiLCJuZXdUZXh0IiwibmV3UnVuSW5kZXgiLCJpc05ldyIsImFkZGVkSXRlbSIsImFjdGl2ZU1jcENvbmZpZ3MiLCJhbGxvd2VkRnJvbUNvbmZpZyIsImNmZyIsImRlZHVwQnlOYW1lIiwicHJldiIsIlJlYWx0aW1lU2Vzc2lvbiIsIk9wZW5BSVJlYWx0aW1lU0lQIiwiX2F1ZGlvIiwidXRpbHMiLCJ1dGlsSW1wb3J0LmJhc2U2NFRvQXJyYXlCdWZmZXIiLCJ1dGlsSW1wb3J0LmFycmF5QnVmZmVyVG9CYXNlNjQiLCJ1dGlsSW1wb3J0LmdldExhc3RUZXh0RnJvbUF1ZGlvT3V0cHV0TWVzc2FnZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUNPLE1BQU1BLEtBQVc7QUFBQSxFQUVwQixTQUFXO0FBS2Y7QUNSTyxlQUFlQyxHQUFZQyxHQUFJO0FBQ2xDLE1BQUk7QUFDQSxXQUFPLENBQUMsTUFBTSxNQUFNQSxHQUFJO0FBQUEsRUFDNUIsU0FDT0MsR0FBTztBQUNWLFdBQU8sQ0FBQ0EsR0FBTyxJQUFJO0FBQUEsRUFDdkI7QUFDSjtBQ0tPLFNBQVNDLEdBQWNDLEdBQVM7QUFDbkMsUUFBTUMsSUFBZ0IsT0FBTyxPQUFPRCxDQUFPLEVBQUUsT0FBTyxDQUFDRSxNQUFNLE9BQU9BLEtBQU0sUUFBUTtBQUloRixTQUhlLE9BQU8sUUFBUUYsQ0FBTyxFQUNoQyxPQUFPLENBQUMsQ0FBQ0csR0FBR0MsQ0FBQyxNQUFNSCxFQUFjLFFBQVEsQ0FBQ0UsQ0FBQyxNQUFNLEVBQUUsRUFDbkQsSUFBSSxDQUFDLENBQUNDLEdBQUdGLENBQUMsTUFBTUEsQ0FBQztBQUUxQjtBQ2xCQSxJQUFJRztBQUdHLE1BQU1DLEdBQWE7QUFBQSxFQUN0QixjQUFjO0FBQ1YsU0FBSyxPQUFPLG9CQUFJLFFBQU8sR0FDdkIsS0FBSyxTQUFTLG9CQUFJLElBQUc7QUFBQSxFQUN6QjtBQUFBLEVBQ0EsSUFBSUMsTUFBV0MsR0FBTztBQUNsQixVQUFNQyxJQUFPRCxFQUFNLENBQUM7QUFDcEIsZ0JBQUssS0FBSyxJQUFJRCxHQUFRRSxDQUFJLEdBQ3RCQSxLQUFRLE9BQU9BLEtBQVMsWUFBWSxRQUFRQSxLQUM1QyxLQUFLLE9BQU8sSUFBSUEsRUFBSyxJQUFJRixDQUFN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O0FBQ1osUUFBS0EsTUFDSkEsSUFBUyxJQUNULFFBQVEsS0FBSyx1SUFBdUk7QUFBQSxNQUV2SjtBQUFBLElBQ0EsR0FBQyxHQU1ETixFQUFBLFNBQWlCO0FBQUEsTUFDaEI7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQTtBQVlELGFBQVNJLElBQVk7QUFJcEIsVUFBSSxPQUFPLFNBQVcsT0FBZSxPQUFP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RUFDQSxJQUFJLFFBQVE7QUFDUixXQUFPLENBQUMsQ0FBQyxLQUFLLEtBQUssT0FBTyxLQUFLLENBQUNBLE1BQU9BLEVBQUcsU0FBUyxLQUFLO0FBQUEsRUFDNUQ7QUFBQSxFQUNBLElBQUksVUFBVTtBQUNWLFdBQU8sQ0FBQyxDQUFDLEtBQUssS0FBSyxPQUFPLEtBQUssQ0FBQ0EsTUFBT0EsRUFBRyxTQUFTLE9BQU87QUFBQSxFQUM5RDtBQUFBLEVBQ0EsSUFBSSxTQUFTO0FBQ1QsV0FBTyxDQUFDLENBQUMsS0FBSyxLQUFLLE9BQU8sS0FBSyxDQUFDQSxNQUFPQSxFQUFHLFNBQVMsTUFBTTtBQUFBLEVBQzdEO0FBQUEsRUFDQSxJQUFJLFdBQVc7QUFDWCxXQUFPLENBQUMsQ0FBQyxLQUFLLEtBQUssT0FBTyxLQUFLLENBQUNBLE1BQU9BLEVBQUcsU0FBUyxRQUFRO0FBQUEsRUFDL0Q7QUFBQSxFQUNBLElBQUksU0FBUztBQUNULFdBQU8sQ0FBQyxDQUFDLEtBQUssS0FBSyxPQUFPLEtBQUssQ0FBQ0EsTUFBT0EsRUFBRyxTQUFTLE1BQU07QUFBQSxFQUM3RDtBQUFBLEVBQ0EsSUFBSSxVQUFVO0FBQ1YsV0FBTyxDQUFDLENBQUMsS0FBSyxLQUFLLE9BQU8sS0FBSyxDQUFDQSxNQUFPQSxFQUFHLFNBQVMsT0FBTztBQUFBLEVBQzlEO0FBQUEsRUFDQSxJQUFJLFNBQVM7QUFDVCxXQUFPLENBQUMsQ0FBQyxLQUFLLEtBQUssT0FBTyxLQUFLLENBQUNBLE1BQU9BLEVBQUcsU0FBUyxNQUFNO0FBQUEsRUFDN0Q7QUFBQSxFQUNBLElBQUksT0FBTztBQUNQLFdBQU8sQ0FBQyxDQUFDLEtBQUssS0FBSyxPQUFPLEtBQUssQ0FBQ0EsTUFBT0EsRUFBRyxTQUFTLElBQUk7QUFBQSxFQUMzRDtBQUFBLEVBQ0EsSUFBSSxTQUFTO0FBQ1QsV0FBTyxDQUFDLENBQUMsS0FBSyxLQUFLLE9BQU8sS0FBSyxDQUFDQSxNQUFPQSxFQUFHLFNBQVMsTUFBTTtBQUFBLEVBQzdEO0FBQUEsRUFDQSxJQUFJLFdBQVc7QUFD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LENBQUk7QUFBQSxFQUczQztBQUNBLFFBQU1zRSxJQUFPLE1BQU0sS0FBSytpRCxFQUFZLE9BQU0sQ0FBRSxHQUN0Q0MsSUFBTzduQyxFQUFBLE1BQUtnbEM7QUFJbEIsR0FIZ0I2QyxFQUFLLFdBQVdoakQsRUFBSyxVQUNqQyxLQUFLLFVBQVVnakQsRUFBSyxJQUFJLENBQUNucUMsTUFBTUEsRUFBRSxJQUFJLEVBQUUsTUFBTSxNQUN6QyxLQUFLLFVBQVU3WSxFQUFLLElBQUksQ0FBQzZZLE1BQU1BLEVBQUUsSUFBSSxFQUFFLE1BQU0sT0FFakQrSyxFQUFBLE1BQUt1OEIsSUFBcUJuZ0QsSUFDMUIsS0FBSyxLQUFLLHFCQUFxQm1iLEVBQUEsTUFBS2dsQyxHQUFrQjtBQUU5RDtBQTlpQkcsSUFBTThDLEtBQU4zRDtBQ3pDQSxNQUFNNEQsV0FBMEIxRixHQUF3QjtBQUFBLEVBQzNELFlBQVkxdEQsSUFBVSxJQUFJO0FBQ3RCLFVBQU1BLENBQU87QUFBQSxFQUNqQjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFjQSxhQUFhLG1CQUFtQmlhLEdBQU9qYSxJQUFVLENBQUEsR0FBSXd3RCxJQUFZLENBQUEsR0FBSTtBQUNqRSxVQUFNcEMsSUFBZ0IsTUFBTStFLEdBQWdCLDRCQUE0Qmw1QyxHQUFPamEsR0FBU3d3RCxDQUFTO0FBRWpHLFdBRGtCLElBQUk0QyxHQUFpQixFQUN0QixvQkFBb0JoRixDQUFhO0FBQUEsRUFDdEQ7QUFBQSxFQUNBLFVBQVVpRixHQUFRcndELElBQVcsSUFBSTtBQUc3QixVQUFNLElBQUksTUFBTSw2RkFBNkY7QUFBQSxFQUNqSDtBQUFBLEVBQ0EsTUFBTSxRQUFRaEQsR0FBUztBQUNuQixRQUFJLENBQUNBLEVBQVE7QUFDVCxZQUFNLElBQUl1TyxHQUFVLDZEQUE2RDtBQUVyRixVQUFNLE1BQU0sUUFBUXZPLENBQU87QUFBQSxFQUMvQjtBQUNKO0FDaENZLE1BQUNzekQsS0FBUTtBQUFBLEVBQ2pCLHFCQUFxQkM7QUFBQUEsRUFDckIscUJBQXFCQztBQUFBQSxFQUNyQixtQ0FBbUNDO0FBQ3ZDOyIsInhfZ29vZ2xlX2lnbm9yZUxpc3QiOlsyLDMsNCw1LDYsNyw4LDksMTAsMTEsMTIsMTMsMTQsMTUsMTYsMTcsMTgsMTksMjAsMjEsMjIsMjMsMjQsMjUsMjYsMjcsMjgsMjksMzAsMzEsMzIsMzMsMzQsMzUsMzYsMzcsMzgsMzksNDAsNDEsNDIsNDMsNDQsNDUsNDYsNDcsNDgsNDksNTUsNTYsNTcsNjMsNjQsNjUsNjYsNjcsNjgsNjldfQ==
